(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Mf={exports:{}},yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function Nx(){if(Nv)return yl;Nv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:u}}return yl.Fragment=e,yl.jsx=n,yl.jsxs=n,yl}var Dv;function Dx(){return Dv||(Dv=1,Mf.exports=Nx()),Mf.exports}var g=Dx(),jf={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function Ox(){if(Ov)return Ie;Ov=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.iterator;function x(R){return R===null||typeof R!="object"?null:(R=S&&R[S]||R["@@iterator"],typeof R=="function"?R:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,Y={};function B(R,X,re){this.props=R,this.context=X,this.refs=Y,this.updater=re||D}B.prototype.isReactComponent={},B.prototype.setState=function(R,X){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,X,"setState")},B.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function ne(){}ne.prototype=B.prototype;function oe(R,X,re){this.props=R,this.context=X,this.refs=Y,this.updater=re||D}var ue=oe.prototype=new ne;ue.constructor=oe,j(ue,B.prototype),ue.isPureReactComponent=!0;var ge=Array.isArray,K={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function k(R,X,re,ie,me,Re){return re=Re.ref,{$$typeof:r,type:R,key:X,ref:re!==void 0?re:null,props:Re}}function A(R,X){return k(R.type,X,void 0,void 0,void 0,R.props)}function I(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function N(R){var X={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(re){return X[re]})}var M=/\/+/g;function U(R,X){return typeof R=="object"&&R!==null&&R.key!=null?N(""+R.key):X.toString(36)}function O(){}function Et(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(O,O):(R.status="pending",R.then(function(X){R.status==="pending"&&(R.status="fulfilled",R.value=X)},function(X){R.status==="pending"&&(R.status="rejected",R.reason=X)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function tt(R,X,re,ie,me){var Re=typeof R;(Re==="undefined"||Re==="boolean")&&(R=null);var _e=!1;if(R===null)_e=!0;else switch(Re){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(R.$$typeof){case r:case e:_e=!0;break;case E:return _e=R._init,tt(_e(R._payload),X,re,ie,me)}}if(_e)return me=me(R),_e=ie===""?"."+U(R,0):ie,ge(me)?(re="",_e!=null&&(re=_e.replace(M,"$&/")+"/"),tt(me,X,re,"",function(Gn){return Gn})):me!=null&&(I(me)&&(me=A(me,re+(me.key==null||R&&R.key===me.key?"":(""+me.key).replace(M,"$&/")+"/")+_e)),X.push(me)),1;_e=0;var ct=ie===""?".":ie+":";if(ge(R))for(var We=0;We<R.length;We++)ie=R[We],Re=ct+U(ie,We),_e+=tt(ie,X,re,Re,me);else if(We=x(R),typeof We=="function")for(R=We.call(R),We=0;!(ie=R.next()).done;)ie=ie.value,Re=ct+U(ie,We++),_e+=tt(ie,X,re,Re,me);else if(Re==="object"){if(typeof R.then=="function")return tt(Et(R),X,re,ie,me);throw X=String(R),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return _e}function Q(R,X,re){if(R==null)return R;var ie=[],me=0;return tt(R,ie,"","",function(Re){return X.call(re,Re,me++)}),ie}function le(R){if(R._status===-1){var X=R._result;X=X(),X.then(function(re){(R._status===0||R._status===-1)&&(R._status=1,R._result=re)},function(re){(R._status===0||R._status===-1)&&(R._status=2,R._result=re)}),R._status===-1&&(R._status=0,R._result=X)}if(R._status===1)return R._result.default;throw R._result}var pe=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function se(){}return Ie.Children={map:Q,forEach:function(R,X,re){Q(R,function(){X.apply(this,arguments)},re)},count:function(R){var X=0;return Q(R,function(){X++}),X},toArray:function(R){return Q(R,function(X){return X})||[]},only:function(R){if(!I(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},Ie.Component=B,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=oe,Ie.StrictMode=s,Ie.Suspense=y,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(R){return K.H.useMemoCache(R)}},Ie.cache=function(R){return function(){return R.apply(null,arguments)}},Ie.cloneElement=function(R,X,re){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var ie=j({},R.props),me=R.key,Re=void 0;if(X!=null)for(_e in X.ref!==void 0&&(Re=void 0),X.key!==void 0&&(me=""+X.key),X)!te.call(X,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&X.ref===void 0||(ie[_e]=X[_e]);var _e=arguments.length-2;if(_e===1)ie.children=re;else if(1<_e){for(var ct=Array(_e),We=0;We<_e;We++)ct[We]=arguments[We+2];ie.children=ct}return k(R.type,me,void 0,void 0,Re,ie)},Ie.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:u,_context:R},R},Ie.createElement=function(R,X,re){var ie,me={},Re=null;if(X!=null)for(ie in X.key!==void 0&&(Re=""+X.key),X)te.call(X,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(me[ie]=X[ie]);var _e=arguments.length-2;if(_e===1)me.children=re;else if(1<_e){for(var ct=Array(_e),We=0;We<_e;We++)ct[We]=arguments[We+2];me.children=ct}if(R&&R.defaultProps)for(ie in _e=R.defaultProps,_e)me[ie]===void 0&&(me[ie]=_e[ie]);return k(R,Re,void 0,void 0,null,me)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(R){return{$$typeof:m,render:R}},Ie.isValidElement=I,Ie.lazy=function(R){return{$$typeof:E,_payload:{_status:-1,_result:R},_init:le}},Ie.memo=function(R,X){return{$$typeof:v,type:R,compare:X===void 0?null:X}},Ie.startTransition=function(R){var X=K.T,re={};K.T=re;try{var ie=R(),me=K.S;me!==null&&me(re,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(se,pe)}catch(Re){pe(Re)}finally{K.T=X}},Ie.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},Ie.use=function(R){return K.H.use(R)},Ie.useActionState=function(R,X,re){return K.H.useActionState(R,X,re)},Ie.useCallback=function(R,X){return K.H.useCallback(R,X)},Ie.useContext=function(R){return K.H.useContext(R)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(R,X){return K.H.useDeferredValue(R,X)},Ie.useEffect=function(R,X,re){var ie=K.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(R,X)},Ie.useId=function(){return K.H.useId()},Ie.useImperativeHandle=function(R,X,re){return K.H.useImperativeHandle(R,X,re)},Ie.useInsertionEffect=function(R,X){return K.H.useInsertionEffect(R,X)},Ie.useLayoutEffect=function(R,X){return K.H.useLayoutEffect(R,X)},Ie.useMemo=function(R,X){return K.H.useMemo(R,X)},Ie.useOptimistic=function(R,X){return K.H.useOptimistic(R,X)},Ie.useReducer=function(R,X,re){return K.H.useReducer(R,X,re)},Ie.useRef=function(R){return K.H.useRef(R)},Ie.useState=function(R){return K.H.useState(R)},Ie.useSyncExternalStore=function(R,X,re){return K.H.useSyncExternalStore(R,X,re)},Ie.useTransition=function(){return K.H.useTransition()},Ie.version="19.1.0",Ie}var kv;function Sm(){return kv||(kv=1,jf.exports=Ox()),jf.exports}var fe=Sm(),Pf={exports:{}},vl={},Uf={exports:{}},Lf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function kx(){return Vv||(Vv=1,function(r){function e(Q,le){var pe=Q.length;Q.push(le);e:for(;0<pe;){var se=pe-1>>>1,R=Q[se];if(0<o(R,le))Q[se]=le,Q[pe]=R,pe=se;else break e}}function n(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var le=Q[0],pe=Q.pop();if(pe!==le){Q[0]=pe;e:for(var se=0,R=Q.length,X=R>>>1;se<X;){var re=2*(se+1)-1,ie=Q[re],me=re+1,Re=Q[me];if(0>o(ie,pe))me<R&&0>o(Re,ie)?(Q[se]=Re,Q[me]=pe,se=me):(Q[se]=ie,Q[re]=pe,se=re);else if(me<R&&0>o(Re,pe))Q[se]=Re,Q[me]=pe,se=me;else break e}}return le}function o(Q,le){var pe=Q.sortIndex-le.sortIndex;return pe!==0?pe:Q.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var y=[],v=[],E=1,S=null,x=3,D=!1,j=!1,Y=!1,B=!1,ne=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function ge(Q){for(var le=n(v);le!==null;){if(le.callback===null)s(v);else if(le.startTime<=Q)s(v),le.sortIndex=le.expirationTime,e(y,le);else break;le=n(v)}}function K(Q){if(Y=!1,ge(Q),!j)if(n(y)!==null)j=!0,te||(te=!0,U());else{var le=n(v);le!==null&&tt(K,le.startTime-Q)}}var te=!1,k=-1,A=5,I=-1;function N(){return B?!0:!(r.unstable_now()-I<A)}function M(){if(B=!1,te){var Q=r.unstable_now();I=Q;var le=!0;try{e:{j=!1,Y&&(Y=!1,oe(k),k=-1),D=!0;var pe=x;try{t:{for(ge(Q),S=n(y);S!==null&&!(S.expirationTime>Q&&N());){var se=S.callback;if(typeof se=="function"){S.callback=null,x=S.priorityLevel;var R=se(S.expirationTime<=Q);if(Q=r.unstable_now(),typeof R=="function"){S.callback=R,ge(Q),le=!0;break t}S===n(y)&&s(y),ge(Q)}else s(y);S=n(y)}if(S!==null)le=!0;else{var X=n(v);X!==null&&tt(K,X.startTime-Q),le=!1}}break e}finally{S=null,x=pe,D=!1}le=void 0}}finally{le?U():te=!1}}}var U;if(typeof ue=="function")U=function(){ue(M)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,Et=O.port2;O.port1.onmessage=M,U=function(){Et.postMessage(null)}}else U=function(){ne(M,0)};function tt(Q,le){k=ne(function(){Q(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(Q){switch(x){case 1:case 2:case 3:var le=3;break;default:le=x}var pe=x;x=le;try{return Q()}finally{x=pe}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(Q,le){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var pe=x;x=Q;try{return le()}finally{x=pe}},r.unstable_scheduleCallback=function(Q,le,pe){var se=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?se+pe:se):pe=se,Q){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=pe+R,Q={id:E++,callback:le,priorityLevel:Q,startTime:pe,expirationTime:R,sortIndex:-1},pe>se?(Q.sortIndex=pe,e(v,Q),n(y)===null&&Q===n(v)&&(Y?(oe(k),k=-1):Y=!0,tt(K,pe-se))):(Q.sortIndex=R,e(y,Q),j||D||(j=!0,te||(te=!0,U()))),Q},r.unstable_shouldYield=N,r.unstable_wrapCallback=function(Q){var le=x;return function(){var pe=x;x=le;try{return Q.apply(this,arguments)}finally{x=pe}}}}(Lf)),Lf}var Mv;function Vx(){return Mv||(Mv=1,Uf.exports=kx()),Uf.exports}var zf={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function Mx(){if(jv)return Kt;jv=1;var r=Sm();function e(y){var v="https://react.dev/errors/"+y;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)v+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+y+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(y,v,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:y,containerInfo:v,implementation:E}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,v){if(y==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Kt.createPortal=function(y,v){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return u(y,v,null,E)},Kt.flushSync=function(y){var v=d.T,E=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=v,s.p=E,s.d.f()}},Kt.preconnect=function(y,v){typeof y=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,s.d.C(y,v))},Kt.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Kt.preinit=function(y,v){if(typeof y=="string"&&v&&typeof v.as=="string"){var E=v.as,S=m(E,v.crossOrigin),x=typeof v.integrity=="string"?v.integrity:void 0,D=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;E==="style"?s.d.S(y,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:S,integrity:x,fetchPriority:D}):E==="script"&&s.d.X(y,{crossOrigin:S,integrity:x,fetchPriority:D,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},Kt.preinitModule=function(y,v){if(typeof y=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var E=m(v.as,v.crossOrigin);s.d.M(y,{crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&s.d.M(y)},Kt.preload=function(y,v){if(typeof y=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var E=v.as,S=m(E,v.crossOrigin);s.d.L(y,E,{crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},Kt.preloadModule=function(y,v){if(typeof y=="string")if(v){var E=m(v.as,v.crossOrigin);s.d.m(y,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else s.d.m(y)},Kt.requestFormReset=function(y){s.d.r(y)},Kt.unstable_batchedUpdates=function(y,v){return y(v)},Kt.useFormState=function(y,v,E){return d.H.useFormState(y,v,E)},Kt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Kt.version="19.1.0",Kt}var Pv;function jx(){if(Pv)return zf.exports;Pv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zf.exports=Mx(),zf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function Px(){if(Uv)return vl;Uv=1;var r=Vx(),e=Sm(),n=jx();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var b=!1,T=h.child;T;){if(T===a){b=!0,a=h,l=f;break}if(T===l){b=!0,l=h,a=f;break}T=T.sibling}if(!b){for(T=f.child;T;){if(T===a){b=!0,a=f,l=h;break}if(T===l){b=!0,l=f,a=h;break}T=T.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function v(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=v(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,S=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var O=Symbol.for("react.client.reference");function Et(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===O?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case j:return"Fragment";case B:return"Profiler";case Y:return"StrictMode";case K:return"Suspense";case te:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case D:return"Portal";case ue:return(t.displayName||"Context")+".Provider";case oe:return(t._context.displayName||"Context")+".Consumer";case ge:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return i=t.displayName||null,i!==null?i:Et(t.type)||"Memo";case A:i=t._payload,t=t._init;try{return Et(t(i))}catch{}}return null}var tt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},se=[],R=-1;function X(t){return{current:t}}function re(t){0>R||(t.current=se[R],se[R]=null,R--)}function ie(t,i){R++,se[R]=t.current,t.current=i}var me=X(null),Re=X(null),_e=X(null),ct=X(null);function We(t,i){switch(ie(_e,i),ie(Re,t),ie(me,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?rv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=rv(i),t=sv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}re(me),ie(me,t)}function Gn(){re(me),re(Re),re(_e)}function $i(t){t.memoizedState!==null&&ie(ct,t);var i=me.current,a=sv(i,t.type);i!==a&&(ie(Re,t),ie(me,a))}function gi(t){Re.current===t&&(re(me),re(Re)),ct.current===t&&(re(ct),dl._currentValue=pe)}var Qr=Object.prototype.hasOwnProperty,Xr=r.unstable_scheduleCallback,$r=r.unstable_cancelCallback,lo=r.unstable_shouldYield,nu=r.unstable_requestPaint,_n=r.unstable_now,Vh=r.unstable_getCurrentPriorityLevel,uo=r.unstable_ImmediatePriority,Hs=r.unstable_UserBlockingPriority,Zr=r.unstable_NormalPriority,Mh=r.unstable_LowPriority,Gs=r.unstable_IdlePriority,co=r.log,iu=r.unstable_setDisableYieldValue,at=null,Ge=null;function un(t){if(typeof co=="function"&&iu(t),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(at,t)}catch{}}var Gt=Math.clz32?Math.clz32:Wr,ru=Math.log,jh=Math.LN2;function Wr(t){return t>>>=0,t===0?32:31-(ru(t)/jh|0)|0}var Jr=256,es=4194304;function Vn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Fs(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=Vn(l):(b&=T,b!==0?h=Vn(b):a||(a=T&~t,a!==0&&(h=Vn(a))))):(T=l&~f,T!==0?h=Vn(T):b!==0?h=Vn(b):a||(a=l&~t,a!==0&&(h=Vn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function ts(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ho(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fo(){var t=Jr;return Jr<<=1,(Jr&4194048)===0&&(Jr=256),t}function mo(){var t=es;return es<<=1,(es&62914560)===0&&(es=4194304),t}function pi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function yi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function go(t,i,a,l,h,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,C=t.expirationTimes,q=t.hiddenUpdates;for(a=b&~a;0<a;){var $=31-Gt(a),W=1<<$;T[$]=0,C[$]=-1;var H=q[$];if(H!==null)for(q[$]=null,$=0;$<H.length;$++){var G=H[$];G!==null&&(G.lane&=-536870913)}a&=~W}l!==0&&Fn(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~i))}function Fn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Gt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function po(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Gt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Zi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ks(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Wi(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:wv(t.type))}function su(t,i){var a=le.p;try{return le.p=t,i()}finally{le.p=a}}var nt=Math.random().toString(36).slice(2),Tt="__reactFiber$"+nt,gt="__reactProps$"+nt,bn="__reactContainer$"+nt,yo="__reactEvents$"+nt,Ph="__reactListeners$"+nt,Ji="__reactHandles$"+nt,au="__reactResources$"+nt,ns="__reactMarker$"+nt;function er(t){delete t[Tt],delete t[gt],delete t[yo],delete t[Ph],delete t[Ji]}function vi(t){var i=t[Tt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[bn]||a[Tt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=uv(t);t!==null;){if(a=t[Tt])return a;t=uv(t)}return i}t=a,a=t.parentNode}return null}function Kn(t){if(t=t[Tt]||t[bn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Yn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Zt(t){var i=t[au];return i||(i=t[au]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ht(t){t[ns]=!0}var vo=new Set,Ys={};function Mn(t,i){_i(t,i),_i(t+"Capture",i)}function _i(t,i){for(Ys[t]=i,t=0;t<i.length;t++)vo.add(i[t])}var ou=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lu={},is={};function uu(t){return Qr.call(is,t)?!0:Qr.call(lu,t)?!1:ou.test(t)?is[t]=!0:(lu[t]=!0,!1)}function tr(t,i,a){if(uu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function Qn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function jt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var rs,cu;function bi(t){if(rs===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);rs=i&&i[1]||"",cu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rs+t+cu}var Qs=!1;function Xs(t,i){if(!t||Qs)return"";Qs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var H=G}Reflect.construct(t,[],W)}else{try{W.call()}catch(G){H=G}t.call(W.prototype)}}else{try{throw Error()}catch(G){H=G}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],T=f[1];if(b&&T){var C=b.split(`
`),q=T.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===q.length)for(l=C.length-1,h=q.length-1;1<=l&&0<=h&&C[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==q[h]){var $=`
`+C[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=h);break}}}finally{Qs=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?bi(a):""}function _o(t){switch(t.tag){case 26:case 27:case 5:return bi(t.type);case 16:return bi("Lazy");case 13:return bi("Suspense");case 19:return bi("SuspenseList");case 0:case 15:return Xs(t.type,!1);case 11:return Xs(t.type.render,!1);case 1:return Xs(t.type,!0);case 31:return bi("Activity");default:return""}}function $s(t){try{var i="";do i+=_o(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Wt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Uh(t){var i=bo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Zs(t){t._valueTracker||(t._valueTracker=Uh(t))}function Eo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=bo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ss(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Lh=/[\n"\\]/g;function pt(t){return t.replace(Lh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function cn(t,i,a,l,h,f,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),i!=null?b==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Wt(i)):t.value!==""+Wt(i)&&(t.value=""+Wt(i)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),i!=null?nr(t,b,Wt(i)):a!=null?nr(t,b,Wt(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Wt(T):t.removeAttribute("name")}function as(t,i,a,l,h,f,b,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+Wt(a):"",i=i!=null?""+Wt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function nr(t,i,a){i==="number"&&ss(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ei(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Wt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Ye(t,i,a){if(i!=null&&(i=""+Wt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Wt(a):""}function os(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(tt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Wt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function En(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ls=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hu(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ls.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function To(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&hu(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&hu(t,f,i[f])}function xo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ws(t){return Bh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ti=null;function Tn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xi=null,wi=null;function wo(t){var i=Kn(t);if(i&&(t=i.stateNode)){var a=t[gt]||null;e:switch(t=i.stateNode,i.type){case"input":if(cn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[gt]||null;if(!h)throw Error(s(90));cn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Eo(l)}break e;case"textarea":Ye(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ei(t,!!a.multiple,i,!1)}}}var Xn=!1;function du(t,i,a){if(Xn)return t(i,a);Xn=!0;try{var l=t(i);return l}finally{if(Xn=!1,(xi!==null||wi!==null)&&(sc(),xi&&(i=xi,t=wi,wi=xi=null,wo(i),t)))for(i=0;i<t.length;i++)wo(t[i])}}function us(t,i){var a=t.stateNode;if(a===null)return null;var l=a[gt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xn=!1;if(jn)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){xn=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{xn=!1}var $n=null,ir=null,Ai=null;function Ao(){if(Ai)return Ai;var t,i=ir,a=i.length,l,h="value"in $n?$n.value:$n.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&i[a-l]===h[f-l];l++);return Ai=h.slice(t,1<l?1-l:void 0)}function Zn(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Wn(){return!0}function So(){return!1}function Ct(t){function i(a,l,h,f,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Wn:So,this.isPropagationStopped=So,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),i}var qe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Js=Ct(qe),hs=E({},qe,{view:0,detail:0}),fu=Ct(hs),ea,ta,Jn,ds=E({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jn&&(Jn&&t.type==="mousemove"?(ea=t.screenX-Jn.screenX,ta=t.screenY-Jn.screenY):ta=ea=0,Jn=t),ea)},movementY:function(t){return"movementY"in t?t.movementY:ta}}),wn=Ct(ds),mu=E({},ds,{dataTransfer:0}),qh=Ct(mu),fs=E({},hs,{relatedTarget:0}),na=Ct(fs),Ro=E({},qe,{animationName:0,elapsedTime:0,pseudoElement:0}),ia=Ct(Ro),gu=E({},qe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ra=Ct(gu),Hh=E({},qe,{data:0}),Io=Ct(Hh),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Co(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=yu[t])?!!i[t]:!1}function gs(){return Co}var vu=E({},hs,{key:function(t){if(t.key){var i=ms[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Zn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gs,charCode:function(t){return t.type==="keypress"?Zn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sa=Ct(vu),_u=E({},ds,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),No=Ct(_u),Si=E({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gs}),bu=Ct(Si),Eu=E({},qe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tu=Ct(Eu),xu=E({},ds,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aa=Ct(xu),Jt=E({},qe,{newState:0,oldState:0}),wu=Ct(Jt),Au=[9,13,27,32],ei=jn&&"CompositionEvent"in window,c=null;jn&&"documentMode"in document&&(c=document.documentMode);var p=jn&&"TextEvent"in window&&!c,_=jn&&(!ei||c&&8<c&&11>=c),w=" ",L=!1;function F(t,i){switch(t){case"keyup":return Au.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ae(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var je=!1;function xt(t,i){switch(t){case"compositionend":return ae(i);case"keypress":return i.which!==32?null:(L=!0,w);case"textInput":return t=i.data,t===w&&L?null:t;default:return null}}function Pe(t,i){if(je)return t==="compositionend"||!ei&&F(t,i)?(t=Ao(),Ai=ir=$n=null,je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Nt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Nt[t.type]:i==="textarea"}function Ri(t,i,a,l){xi?wi?wi.push(l):wi=[l]:xi=l,i=hc(i,"onChange"),0<i.length&&(a=new Js("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Pt=null,ti=null;function Do(t){Jy(t,0)}function Su(t){var i=Yn(t);if(Eo(i))return t}function bg(t,i){if(t==="change")return i}var Eg=!1;if(jn){var Gh;if(jn){var Fh="oninput"in document;if(!Fh){var Tg=document.createElement("div");Tg.setAttribute("oninput","return;"),Fh=typeof Tg.oninput=="function"}Gh=Fh}else Gh=!1;Eg=Gh&&(!document.documentMode||9<document.documentMode)}function xg(){Pt&&(Pt.detachEvent("onpropertychange",wg),ti=Pt=null)}function wg(t){if(t.propertyName==="value"&&Su(ti)){var i=[];Ri(i,ti,t,Tn(t)),du(Do,i)}}function aT(t,i,a){t==="focusin"?(xg(),Pt=i,ti=a,Pt.attachEvent("onpropertychange",wg)):t==="focusout"&&xg()}function oT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Su(ti)}function lT(t,i){if(t==="click")return Su(i)}function uT(t,i){if(t==="input"||t==="change")return Su(i)}function cT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var hn=typeof Object.is=="function"?Object.is:cT;function Oo(t,i){if(hn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Qr.call(i,h)||!hn(t[h],i[h]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sg(t,i){var a=Ag(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ag(a)}}function Rg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Rg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Ig(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ss(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ss(t.document)}return i}function Kh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var hT=jn&&"documentMode"in document&&11>=document.documentMode,oa=null,Yh=null,ko=null,Qh=!1;function Cg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qh||oa==null||oa!==ss(l)||(l=oa,"selectionStart"in l&&Kh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ko&&Oo(ko,l)||(ko=l,l=hc(Yh,"onSelect"),0<l.length&&(i=new Js("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=oa)))}function ps(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var la={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionrun:ps("Transition","TransitionRun"),transitionstart:ps("Transition","TransitionStart"),transitioncancel:ps("Transition","TransitionCancel"),transitionend:ps("Transition","TransitionEnd")},Xh={},Ng={};jn&&(Ng=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function ys(t){if(Xh[t])return Xh[t];if(!la[t])return t;var i=la[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ng)return Xh[t]=i[a];return t}var Dg=ys("animationend"),Og=ys("animationiteration"),kg=ys("animationstart"),dT=ys("transitionrun"),fT=ys("transitionstart"),mT=ys("transitioncancel"),Vg=ys("transitionend"),Mg=new Map,$h="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$h.push("scrollEnd");function Pn(t,i){Mg.set(t,i),Mn(i,[t])}var jg=new WeakMap;function An(t,i){if(typeof t=="object"&&t!==null){var a=jg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:$s(i)},jg.set(t,i),i)}return{value:t,source:i,stack:$s(i)}}var Sn=[],ua=0,Zh=0;function Ru(){for(var t=ua,i=Zh=ua=0;i<t;){var a=Sn[i];Sn[i++]=null;var l=Sn[i];Sn[i++]=null;var h=Sn[i];Sn[i++]=null;var f=Sn[i];if(Sn[i++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}f!==0&&Pg(a,h,f)}}function Iu(t,i,a,l){Sn[ua++]=t,Sn[ua++]=i,Sn[ua++]=a,Sn[ua++]=l,Zh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Wh(t,i,a,l){return Iu(t,i,a,l),Cu(t)}function ca(t,i){return Iu(t,null,null,i),Cu(t)}function Pg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Gt(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function Cu(t){if(50<rl)throw rl=0,sf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ha={};function gT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,i,a,l){return new gT(t,i,a,l)}function Jh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ii(t,i){var a=t.alternate;return a===null?(a=dn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Ug(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Nu(t,i,a,l,h,f){var b=0;if(l=t,typeof t=="function")Jh(t)&&(b=1);else if(typeof t=="string")b=yx(t,a,me.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=dn(31,a,i,h),t.elementType=I,t.lanes=f,t;case j:return vs(a.children,h,f,i);case Y:b=8,h|=24;break;case B:return t=dn(12,a,i,h|2),t.elementType=B,t.lanes=f,t;case K:return t=dn(13,a,i,h),t.elementType=K,t.lanes=f,t;case te:return t=dn(19,a,i,h),t.elementType=te,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ne:case ue:b=10;break e;case oe:b=9;break e;case ge:b=11;break e;case k:b=14;break e;case A:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=dn(b,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function vs(t,i,a,l){return t=dn(7,t,l,i),t.lanes=a,t}function ed(t,i,a){return t=dn(6,t,null,i),t.lanes=a,t}function td(t,i,a){return i=dn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var da=[],fa=0,Du=null,Ou=0,Rn=[],In=0,_s=null,Ci=1,Ni="";function bs(t,i){da[fa++]=Ou,da[fa++]=Du,Du=t,Ou=i}function Lg(t,i,a){Rn[In++]=Ci,Rn[In++]=Ni,Rn[In++]=_s,_s=t;var l=Ci;t=Ni;var h=32-Gt(l)-1;l&=~(1<<h),a+=1;var f=32-Gt(i)+h;if(30<f){var b=h-h%5;f=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Ci=1<<32-Gt(i)+h|a<<h|l,Ni=f+t}else Ci=1<<f|a<<h|l,Ni=t}function nd(t){t.return!==null&&(bs(t,1),Lg(t,1,0))}function id(t){for(;t===Du;)Du=da[--fa],da[fa]=null,Ou=da[--fa],da[fa]=null;for(;t===_s;)_s=Rn[--In],Rn[In]=null,Ni=Rn[--In],Rn[In]=null,Ci=Rn[--In],Rn[In]=null}var en=null,ot=null,Be=!1,Es=null,ni=!1,rd=Error(s(519));function Ts(t){var i=Error(s(418,""));throw jo(An(i,t)),rd}function zg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Tt]=t,i[gt]=l,a){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(a=0;a<al.length;a++)ke(al[a],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":ke("invalid",i),as(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Zs(i);break;case"select":ke("invalid",i);break;case"textarea":ke("invalid",i),os(i,l.value,l.defaultValue,l.children),Zs(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||iv(i.textContent,a)?(l.popover!=null&&(ke("beforetoggle",i),ke("toggle",i)),l.onScroll!=null&&ke("scroll",i),l.onScrollEnd!=null&&ke("scrollend",i),l.onClick!=null&&(i.onclick=dc),i=!0):i=!1,i||Ts(t)}function Bg(t){for(en=t.return;en;)switch(en.tag){case 5:case 13:ni=!1;return;case 27:case 3:ni=!0;return;default:en=en.return}}function Vo(t){if(t!==en)return!1;if(!Be)return Bg(t),Be=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Ef(t.type,t.memoizedProps)),a=!a),a&&ot&&Ts(t),Bg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ot=Ln(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ot=null}}else i===27?(i=ot,_r(t.type)?(t=Af,Af=null,ot=t):ot=i):ot=en?Ln(t.stateNode.nextSibling):null;return!0}function Mo(){ot=en=null,Be=!1}function qg(){var t=Es;return t!==null&&(an===null?an=t:an.push.apply(an,t),Es=null),t}function jo(t){Es===null?Es=[t]:Es.push(t)}var sd=X(null),xs=null,Di=null;function rr(t,i,a){ie(sd,i._currentValue),i._currentValue=a}function Oi(t){t._currentValue=sd.current,re(sd)}function ad(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function od(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var C=0;C<i.length;C++)if(T.context===i[C]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),ad(f.return,a,t),l||(b=null);break e}f=T.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),ad(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function Po(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var T=h.type;hn(h.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(h===ct.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(dl):t=[dl])}h=h.return}t!==null&&od(i,t,a,l),i.flags|=262144}function ku(t){for(t=t.firstContext;t!==null;){if(!hn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ws(t){xs=t,Di=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ft(t){return Hg(xs,t)}function Vu(t,i){return xs===null&&ws(t),Hg(t,i)}function Hg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Di===null){if(t===null)throw Error(s(308));Di=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Di=Di.next=i;return a}var pT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},yT=r.unstable_scheduleCallback,vT=r.unstable_NormalPriority,At={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ld(){return{controller:new pT,data:new Map,refCount:0}}function Uo(t){t.refCount--,t.refCount===0&&yT(vT,function(){t.controller.abort()})}var Lo=null,ud=0,ma=0,ga=null;function _T(t,i){if(Lo===null){var a=Lo=[];ud=0,ma=df(),ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ud++,i.then(Gg,Gg),i}function Gg(){if(--ud===0&&Lo!==null){ga!==null&&(ga.status="fulfilled");var t=Lo;Lo=null,ma=0,ga=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function bT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Fg=Q.S;Q.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&_T(t,i),Fg!==null&&Fg(t,i)};var As=X(null);function cd(){var t=As.current;return t!==null?t:Je.pooledCache}function Mu(t,i){i===null?ie(As,As.current):ie(As,i.pool)}function Kg(){var t=cd();return t===null?null:{parent:At._currentValue,pool:t}}var zo=Error(s(460)),Yg=Error(s(474)),ju=Error(s(542)),hd={then:function(){}};function Qg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Pu(){}function Xg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Pu,Pu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Zg(t),t;default:if(typeof i.status=="string")i.then(Pu,Pu);else{if(t=Je,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Zg(t),t}throw Bo=i,zo}}var Bo=null;function $g(){if(Bo===null)throw Error(s(459));var t=Bo;return Bo=null,t}function Zg(t){if(t===zo||t===ju)throw Error(s(483))}var sr=!1;function dd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ar(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function or(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Fe&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Cu(t),Pg(t,null,a),i}return Iu(t,l,i,a),Cu(t)}function qo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,po(t,a)}}function md(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var gd=!1;function Ho(){if(gd){var t=ga;if(t!==null)throw t}}function Go(t,i,a,l){gd=!1;var h=t.updateQueue;sr=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,q=C.next;C.next=null,b===null?f=q:b.next=q,b=C;var $=t.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==b&&(T===null?$.firstBaseUpdate=q:T.next=q,$.lastBaseUpdate=C))}if(f!==null){var W=h.baseState;b=0,$=q=C=null,T=f;do{var H=T.lane&-536870913,G=H!==T.lane;if(G?(Ue&H)===H:(l&H)===H){H!==0&&H===ma&&(gd=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var we=t,be=T;H=i;var $e=a;switch(be.tag){case 1:if(we=be.payload,typeof we=="function"){W=we.call($e,W,H);break e}W=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=be.payload,H=typeof we=="function"?we.call($e,W,H):we,H==null)break e;W=E({},W,H);break e;case 2:sr=!0}}H=T.callback,H!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[H]:G.push(H))}else G={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(q=$=G,C=W):$=$.next=G,b|=H;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;G=T,T=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);$===null&&(C=W),h.baseState=C,h.firstBaseUpdate=q,h.lastBaseUpdate=$,f===null&&(h.shared.lanes=0),gr|=b,t.lanes=b,t.memoizedState=W}}function Wg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Jg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Wg(a[t],i)}var pa=X(null),Uu=X(0);function ep(t,i){t=Li,ie(Uu,t),ie(pa,i),Li=t|i.baseLanes}function pd(){ie(Uu,Li),ie(pa,pa.current)}function yd(){Li=Uu.current,re(pa),re(Uu)}var lr=0,Ce=null,Qe=null,yt=null,Lu=!1,ya=!1,Ss=!1,zu=0,Fo=0,va=null,ET=0;function dt(){throw Error(s(321))}function vd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!hn(t[a],i[a]))return!1;return!0}function _d(t,i,a,l,h,f){return lr=f,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=t===null||t.memoizedState===null?Pp:Up,Ss=!1,f=a(l,h),Ss=!1,ya&&(f=np(i,a,l,h)),tp(t),f}function tp(t){Q.H=Ku;var i=Qe!==null&&Qe.next!==null;if(lr=0,yt=Qe=Ce=null,Lu=!1,Fo=0,va=null,i)throw Error(s(300));t===null||Dt||(t=t.dependencies,t!==null&&ku(t)&&(Dt=!0))}function np(t,i,a,l){Ce=t;var h=0;do{if(ya&&(va=null),Fo=0,ya=!1,25<=h)throw Error(s(301));if(h+=1,yt=Qe=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Q.H=IT,f=i(a,l)}while(ya);return f}function TT(){var t=Q.H,i=t.useState()[0];return i=typeof i.then=="function"?Ko(i):i,t=t.useState()[0],(Qe!==null?Qe.memoizedState:null)!==t&&(Ce.flags|=1024),i}function bd(){var t=zu!==0;return zu=0,t}function Ed(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Td(t){if(Lu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Lu=!1}lr=0,yt=Qe=Ce=null,ya=!1,Fo=zu=0,va=null}function rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ce.memoizedState=yt=t:yt=yt.next=t,yt}function vt(){if(Qe===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Qe.next;var i=yt===null?Ce.memoizedState:yt.next;if(i!==null)yt=i,Qe=t;else{if(t===null)throw Ce.alternate===null?Error(s(467)):Error(s(310));Qe=t,t={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},yt===null?Ce.memoizedState=yt=t:yt=yt.next=t}return yt}function xd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(t){var i=Fo;return Fo+=1,va===null&&(va=[]),t=Xg(va,t,i),i=Ce,(yt===null?i.memoizedState:yt.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?Pp:Up),t}function Bu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ko(t);if(t.$$typeof===ue)return Ft(t)}throw Error(s(438,String(t)))}function wd(t){var i=null,a=Ce.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ce.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=xd(),Ce.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=N;return i.index++,a}function ki(t,i){return typeof i=="function"?i(t):i}function qu(t){var i=vt();return Ad(i,Qe,t)}function Ad(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=b=null,C=null,q=i,$=!1;do{var W=q.lane&-536870913;if(W!==q.lane?(Ue&W)===W:(lr&W)===W){var H=q.revertLane;if(H===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),W===ma&&($=!0);else if((lr&H)===H){q=q.next,H===ma&&($=!0);continue}else W={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},C===null?(T=C=W,b=f):C=C.next=W,Ce.lanes|=H,gr|=H;W=q.action,Ss&&a(f,W),f=q.hasEagerState?q.eagerState:a(f,W)}else H={lane:W,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},C===null?(T=C=H,b=f):C=C.next=H,Ce.lanes|=W,gr|=W;q=q.next}while(q!==null&&q!==i);if(C===null?b=f:C.next=T,!hn(f,t.memoizedState)&&(Dt=!0,$&&(a=ga,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=C,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Sd(t){var i=vt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do f=t(f,b.action),b=b.next;while(b!==h);hn(f,i.memoizedState)||(Dt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function ip(t,i,a){var l=Ce,h=vt(),f=Be;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var b=!hn((Qe||h).memoizedState,a);b&&(h.memoizedState=a,Dt=!0),h=h.queue;var T=ap.bind(null,l,h,t);if(Yo(2048,8,T,[t]),h.getSnapshot!==i||b||yt!==null&&yt.memoizedState.tag&1){if(l.flags|=2048,_a(9,Hu(),sp.bind(null,l,h,a,i),null),Je===null)throw Error(s(349));f||(lr&124)!==0||rp(l,i,a)}return a}function rp(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ce.updateQueue,i===null?(i=xd(),Ce.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function sp(t,i,a,l){i.value=a,i.getSnapshot=l,op(i)&&lp(t)}function ap(t,i,a){return a(function(){op(i)&&lp(t)})}function op(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!hn(t,a)}catch{return!0}}function lp(t){var i=ca(t,2);i!==null&&yn(i,t,2)}function Rd(t){var i=rn();if(typeof t=="function"){var a=t;if(t=a(),Ss){un(!0);try{a()}finally{un(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:t},i}function up(t,i,a,l){return t.baseState=a,Ad(t,Qe,typeof l=="function"?l:ki)}function xT(t,i,a,l,h){if(Fu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};Q.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,cp(i,f)):(f.next=a.next,i.pending=a.next=f)}}function cp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=Q.T,b={};Q.T=b;try{var T=a(h,l),C=Q.S;C!==null&&C(b,T),hp(t,i,T)}catch(q){Id(t,i,q)}finally{Q.T=f}}else try{f=a(h,l),hp(t,i,f)}catch(q){Id(t,i,q)}}function hp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){dp(t,i,l)},function(l){return Id(t,i,l)}):dp(t,i,a)}function dp(t,i,a){i.status="fulfilled",i.value=a,fp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,cp(t,a)))}function Id(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,fp(i),i=i.next;while(i!==l)}t.action=null}function fp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function mp(t,i){return i}function gp(t,i){if(Be){var a=Je.formState;if(a!==null){e:{var l=Ce;if(Be){if(ot){t:{for(var h=ot,f=ni;h.nodeType!==8;){if(!f){h=null;break t}if(h=Ln(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ot=Ln(h.nextSibling),l=h.data==="F!";break e}}Ts(l)}l=!1}l&&(i=a[0])}}return a=rn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mp,lastRenderedState:i},a.queue=l,a=Vp.bind(null,Ce,l),l.dispatch=a,l=Rd(!1),f=kd.bind(null,Ce,!1,l.queue),l=rn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=xT.bind(null,Ce,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function pp(t){var i=vt();return yp(i,Qe,t)}function yp(t,i,a){if(i=Ad(t,i,mp)[0],t=qu(ki)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ko(i)}catch(b){throw b===zo?ju:b}else l=i;i=vt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Ce.flags|=2048,_a(9,Hu(),wT.bind(null,h,a),null)),[l,f,t]}function wT(t,i){t.action=i}function vp(t){var i=vt(),a=Qe;if(a!==null)return yp(i,a,t);vt(),i=i.memoizedState,a=vt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function _a(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=xd(),Ce.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Hu(){return{destroy:void 0,resource:void 0}}function _p(){return vt().memoizedState}function Gu(t,i,a,l){var h=rn();l=l===void 0?null:l,Ce.flags|=t,h.memoizedState=_a(1|i,Hu(),a,l)}function Yo(t,i,a,l){var h=vt();l=l===void 0?null:l;var f=h.memoizedState.inst;Qe!==null&&l!==null&&vd(l,Qe.memoizedState.deps)?h.memoizedState=_a(i,f,a,l):(Ce.flags|=t,h.memoizedState=_a(1|i,f,a,l))}function bp(t,i){Gu(8390656,8,t,i)}function Ep(t,i){Yo(2048,8,t,i)}function Tp(t,i){return Yo(4,2,t,i)}function xp(t,i){return Yo(4,4,t,i)}function wp(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ap(t,i,a){a=a!=null?a.concat([t]):null,Yo(4,4,wp.bind(null,i,t),a)}function Cd(){}function Sp(t,i){var a=vt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&vd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Rp(t,i){var a=vt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&vd(i,l[1]))return l[0];if(l=t(),Ss){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,i],l}function Nd(t,i,a){return a===void 0||(lr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Ny(),Ce.lanes|=t,gr|=t,a)}function Ip(t,i,a,l){return hn(a,i)?a:pa.current!==null?(t=Nd(t,a,l),hn(t,i)||(Dt=!0),t):(lr&42)===0?(Dt=!0,t.memoizedState=a):(t=Ny(),Ce.lanes|=t,gr|=t,i)}function Cp(t,i,a,l,h){var f=le.p;le.p=f!==0&&8>f?f:8;var b=Q.T,T={};Q.T=T,kd(t,!1,i,a);try{var C=h(),q=Q.S;if(q!==null&&q(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var $=bT(C,l);Qo(t,i,$,pn(t))}else Qo(t,i,l,pn(t))}catch(W){Qo(t,i,{then:function(){},status:"rejected",reason:W},pn())}finally{le.p=f,Q.T=b}}function AT(){}function Dd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=Np(t).queue;Cp(t,h,i,pe,a===null?AT:function(){return Dp(t),a(l)})}function Np(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Dp(t){var i=Np(t).next.queue;Qo(t,i,{},pn())}function Od(){return Ft(dl)}function Op(){return vt().memoizedState}function kp(){return vt().memoizedState}function ST(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=pn();t=ar(a);var l=or(i,t,a);l!==null&&(yn(l,i,a),qo(l,i,a)),i={cache:ld()},t.payload=i;return}i=i.return}}function RT(t,i,a){var l=pn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(t)?Mp(i,a):(a=Wh(t,i,a,l),a!==null&&(yn(a,t,l),jp(a,i,l)))}function Vp(t,i,a){var l=pn();Qo(t,i,a,l)}function Qo(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(t))Mp(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var b=i.lastRenderedState,T=f(b,a);if(h.hasEagerState=!0,h.eagerState=T,hn(T,b))return Iu(t,i,h,0),Je===null&&Ru(),!1}catch{}finally{}if(a=Wh(t,i,h,l),a!==null)return yn(a,t,l),jp(a,i,l),!0}return!1}function kd(t,i,a,l){if(l={lane:2,revertLane:df(),action:l,hasEagerState:!1,eagerState:null,next:null},Fu(t)){if(i)throw Error(s(479))}else i=Wh(t,a,l,2),i!==null&&yn(i,t,2)}function Fu(t){var i=t.alternate;return t===Ce||i!==null&&i===Ce}function Mp(t,i){ya=Lu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function jp(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,po(t,a)}}var Ku={readContext:Ft,use:Bu,useCallback:dt,useContext:dt,useEffect:dt,useImperativeHandle:dt,useLayoutEffect:dt,useInsertionEffect:dt,useMemo:dt,useReducer:dt,useRef:dt,useState:dt,useDebugValue:dt,useDeferredValue:dt,useTransition:dt,useSyncExternalStore:dt,useId:dt,useHostTransitionStatus:dt,useFormState:dt,useActionState:dt,useOptimistic:dt,useMemoCache:dt,useCacheRefresh:dt},Pp={readContext:Ft,use:Bu,useCallback:function(t,i){return rn().memoizedState=[t,i===void 0?null:i],t},useContext:Ft,useEffect:bp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Gu(4194308,4,wp.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Gu(4194308,4,t,i)},useInsertionEffect:function(t,i){Gu(4,2,t,i)},useMemo:function(t,i){var a=rn();i=i===void 0?null:i;var l=t();if(Ss){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=rn();if(a!==void 0){var h=a(i);if(Ss){un(!0);try{a(i)}finally{un(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=RT.bind(null,Ce,t),[l.memoizedState,t]},useRef:function(t){var i=rn();return t={current:t},i.memoizedState=t},useState:function(t){t=Rd(t);var i=t.queue,a=Vp.bind(null,Ce,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Cd,useDeferredValue:function(t,i){var a=rn();return Nd(a,t,i)},useTransition:function(){var t=Rd(!1);return t=Cp.bind(null,Ce,t.queue,!0,!1),rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ce,h=rn();if(Be){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),Je===null)throw Error(s(349));(Ue&124)!==0||rp(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,bp(ap.bind(null,l,f,t),[t]),l.flags|=2048,_a(9,Hu(),sp.bind(null,l,f,a,i),null),a},useId:function(){var t=rn(),i=Je.identifierPrefix;if(Be){var a=Ni,l=Ci;a=(l&~(1<<32-Gt(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=zu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=ET++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Od,useFormState:gp,useActionState:gp,useOptimistic:function(t){var i=rn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=kd.bind(null,Ce,!0,a),a.dispatch=i,[t,i]},useMemoCache:wd,useCacheRefresh:function(){return rn().memoizedState=ST.bind(null,Ce)}},Up={readContext:Ft,use:Bu,useCallback:Sp,useContext:Ft,useEffect:Ep,useImperativeHandle:Ap,useInsertionEffect:Tp,useLayoutEffect:xp,useMemo:Rp,useReducer:qu,useRef:_p,useState:function(){return qu(ki)},useDebugValue:Cd,useDeferredValue:function(t,i){var a=vt();return Ip(a,Qe.memoizedState,t,i)},useTransition:function(){var t=qu(ki)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:Ko(t),i]},useSyncExternalStore:ip,useId:Op,useHostTransitionStatus:Od,useFormState:pp,useActionState:pp,useOptimistic:function(t,i){var a=vt();return up(a,Qe,t,i)},useMemoCache:wd,useCacheRefresh:kp},IT={readContext:Ft,use:Bu,useCallback:Sp,useContext:Ft,useEffect:Ep,useImperativeHandle:Ap,useInsertionEffect:Tp,useLayoutEffect:xp,useMemo:Rp,useReducer:Sd,useRef:_p,useState:function(){return Sd(ki)},useDebugValue:Cd,useDeferredValue:function(t,i){var a=vt();return Qe===null?Nd(a,t,i):Ip(a,Qe.memoizedState,t,i)},useTransition:function(){var t=Sd(ki)[0],i=vt().memoizedState;return[typeof t=="boolean"?t:Ko(t),i]},useSyncExternalStore:ip,useId:Op,useHostTransitionStatus:Od,useFormState:vp,useActionState:vp,useOptimistic:function(t,i){var a=vt();return Qe!==null?up(a,Qe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:wd,useCacheRefresh:kp},ba=null,Xo=0;function Yu(t){var i=Xo;return Xo+=1,ba===null&&(ba=[]),Xg(ba,t,i)}function $o(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Qu(t,i){throw i.$$typeof===S?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Lp(t){var i=t._init;return i(t._payload)}function zp(t){function i(P,V){if(t){var z=P.deletions;z===null?(P.deletions=[V],P.flags|=16):z.push(V)}}function a(P,V){if(!t)return null;for(;V!==null;)i(P,V),V=V.sibling;return null}function l(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function h(P,V){return P=Ii(P,V),P.index=0,P.sibling=null,P}function f(P,V,z){return P.index=z,t?(z=P.alternate,z!==null?(z=z.index,z<V?(P.flags|=67108866,V):z):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function b(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function T(P,V,z,Z){return V===null||V.tag!==6?(V=ed(z,P.mode,Z),V.return=P,V):(V=h(V,z),V.return=P,V)}function C(P,V,z,Z){var de=z.type;return de===j?$(P,V,z.props.children,Z,z.key):V!==null&&(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===A&&Lp(de)===V.type)?(V=h(V,z.props),$o(V,z),V.return=P,V):(V=Nu(z.type,z.key,z.props,null,P.mode,Z),$o(V,z),V.return=P,V)}function q(P,V,z,Z){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=td(z,P.mode,Z),V.return=P,V):(V=h(V,z.children||[]),V.return=P,V)}function $(P,V,z,Z,de){return V===null||V.tag!==7?(V=vs(z,P.mode,Z,de),V.return=P,V):(V=h(V,z),V.return=P,V)}function W(P,V,z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=ed(""+V,P.mode,z),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return z=Nu(V.type,V.key,V.props,null,P.mode,z),$o(z,V),z.return=P,z;case D:return V=td(V,P.mode,z),V.return=P,V;case A:var Z=V._init;return V=Z(V._payload),W(P,V,z)}if(tt(V)||U(V))return V=vs(V,P.mode,z,null),V.return=P,V;if(typeof V.then=="function")return W(P,Yu(V),z);if(V.$$typeof===ue)return W(P,Vu(P,V),z);Qu(P,V)}return null}function H(P,V,z,Z){var de=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return de!==null?null:T(P,V,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case x:return z.key===de?C(P,V,z,Z):null;case D:return z.key===de?q(P,V,z,Z):null;case A:return de=z._init,z=de(z._payload),H(P,V,z,Z)}if(tt(z)||U(z))return de!==null?null:$(P,V,z,Z,null);if(typeof z.then=="function")return H(P,V,Yu(z),Z);if(z.$$typeof===ue)return H(P,V,Vu(P,z),Z);Qu(P,z)}return null}function G(P,V,z,Z,de){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return P=P.get(z)||null,T(V,P,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return P=P.get(Z.key===null?z:Z.key)||null,C(V,P,Z,de);case D:return P=P.get(Z.key===null?z:Z.key)||null,q(V,P,Z,de);case A:var De=Z._init;return Z=De(Z._payload),G(P,V,z,Z,de)}if(tt(Z)||U(Z))return P=P.get(z)||null,$(V,P,Z,de,null);if(typeof Z.then=="function")return G(P,V,z,Yu(Z),de);if(Z.$$typeof===ue)return G(P,V,z,Vu(V,Z),de);Qu(V,Z)}return null}function we(P,V,z,Z){for(var de=null,De=null,ye=V,Ee=V=0,kt=null;ye!==null&&Ee<z.length;Ee++){ye.index>Ee?(kt=ye,ye=null):kt=ye.sibling;var ze=H(P,ye,z[Ee],Z);if(ze===null){ye===null&&(ye=kt);break}t&&ye&&ze.alternate===null&&i(P,ye),V=f(ze,V,Ee),De===null?de=ze:De.sibling=ze,De=ze,ye=kt}if(Ee===z.length)return a(P,ye),Be&&bs(P,Ee),de;if(ye===null){for(;Ee<z.length;Ee++)ye=W(P,z[Ee],Z),ye!==null&&(V=f(ye,V,Ee),De===null?de=ye:De.sibling=ye,De=ye);return Be&&bs(P,Ee),de}for(ye=l(ye);Ee<z.length;Ee++)kt=G(ye,P,Ee,z[Ee],Z),kt!==null&&(t&&kt.alternate!==null&&ye.delete(kt.key===null?Ee:kt.key),V=f(kt,V,Ee),De===null?de=kt:De.sibling=kt,De=kt);return t&&ye.forEach(function(wr){return i(P,wr)}),Be&&bs(P,Ee),de}function be(P,V,z,Z){if(z==null)throw Error(s(151));for(var de=null,De=null,ye=V,Ee=V=0,kt=null,ze=z.next();ye!==null&&!ze.done;Ee++,ze=z.next()){ye.index>Ee?(kt=ye,ye=null):kt=ye.sibling;var wr=H(P,ye,ze.value,Z);if(wr===null){ye===null&&(ye=kt);break}t&&ye&&wr.alternate===null&&i(P,ye),V=f(wr,V,Ee),De===null?de=wr:De.sibling=wr,De=wr,ye=kt}if(ze.done)return a(P,ye),Be&&bs(P,Ee),de;if(ye===null){for(;!ze.done;Ee++,ze=z.next())ze=W(P,ze.value,Z),ze!==null&&(V=f(ze,V,Ee),De===null?de=ze:De.sibling=ze,De=ze);return Be&&bs(P,Ee),de}for(ye=l(ye);!ze.done;Ee++,ze=z.next())ze=G(ye,P,Ee,ze.value,Z),ze!==null&&(t&&ze.alternate!==null&&ye.delete(ze.key===null?Ee:ze.key),V=f(ze,V,Ee),De===null?de=ze:De.sibling=ze,De=ze);return t&&ye.forEach(function(Cx){return i(P,Cx)}),Be&&bs(P,Ee),de}function $e(P,V,z,Z){if(typeof z=="object"&&z!==null&&z.type===j&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case x:e:{for(var de=z.key;V!==null;){if(V.key===de){if(de=z.type,de===j){if(V.tag===7){a(P,V.sibling),Z=h(V,z.props.children),Z.return=P,P=Z;break e}}else if(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===A&&Lp(de)===V.type){a(P,V.sibling),Z=h(V,z.props),$o(Z,z),Z.return=P,P=Z;break e}a(P,V);break}else i(P,V);V=V.sibling}z.type===j?(Z=vs(z.props.children,P.mode,Z,z.key),Z.return=P,P=Z):(Z=Nu(z.type,z.key,z.props,null,P.mode,Z),$o(Z,z),Z.return=P,P=Z)}return b(P);case D:e:{for(de=z.key;V!==null;){if(V.key===de)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(P,V.sibling),Z=h(V,z.children||[]),Z.return=P,P=Z;break e}else{a(P,V);break}else i(P,V);V=V.sibling}Z=td(z,P.mode,Z),Z.return=P,P=Z}return b(P);case A:return de=z._init,z=de(z._payload),$e(P,V,z,Z)}if(tt(z))return we(P,V,z,Z);if(U(z)){if(de=U(z),typeof de!="function")throw Error(s(150));return z=de.call(z),be(P,V,z,Z)}if(typeof z.then=="function")return $e(P,V,Yu(z),Z);if(z.$$typeof===ue)return $e(P,V,Vu(P,z),Z);Qu(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,V!==null&&V.tag===6?(a(P,V.sibling),Z=h(V,z),Z.return=P,P=Z):(a(P,V),Z=ed(z,P.mode,Z),Z.return=P,P=Z),b(P)):a(P,V)}return function(P,V,z,Z){try{Xo=0;var de=$e(P,V,z,Z);return ba=null,de}catch(ye){if(ye===zo||ye===ju)throw ye;var De=dn(29,ye,null,P.mode);return De.lanes=Z,De.return=P,De}finally{}}}var Ea=zp(!0),Bp=zp(!1),Cn=X(null),ii=null;function ur(t){var i=t.alternate;ie(St,St.current&1),ie(Cn,t),ii===null&&(i===null||pa.current!==null||i.memoizedState!==null)&&(ii=t)}function qp(t){if(t.tag===22){if(ie(St,St.current),ie(Cn,t),ii===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ii=t)}}else cr()}function cr(){ie(St,St.current),ie(Cn,Cn.current)}function Vi(t){re(Cn),ii===t&&(ii=null),re(St)}var St=X(0);function Xu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||wf(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Vd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Md={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=pn(),h=ar(l);h.payload=i,a!=null&&(h.callback=a),i=or(t,h,l),i!==null&&(yn(i,t,l),qo(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=pn(),h=ar(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=or(t,h,l),i!==null&&(yn(i,t,l),qo(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=pn(),l=ar(a);l.tag=2,i!=null&&(l.callback=i),i=or(t,l,a),i!==null&&(yn(i,t,a),qo(i,t,a))}};function Hp(t,i,a,l,h,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):i.prototype&&i.prototype.isPureReactComponent?!Oo(a,l)||!Oo(h,f):!0}function Gp(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Md.enqueueReplaceState(i,i.state,null)}function Rs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var $u=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Fp(t){$u(t)}function Kp(t){console.error(t)}function Yp(t){$u(t)}function Zu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Qp(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function jd(t,i,a){return a=ar(a),a.tag=3,a.payload={element:null},a.callback=function(){Zu(t,i)},a}function Xp(t){return t=ar(t),t.tag=3,t}function $p(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){Qp(i,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Qp(i,a,l),typeof h!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function CT(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Po(i,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 13:return ii===null?of():a.alternate===null&&lt===0&&(lt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===hd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),uf(t,l,h)),!1;case 22:return a.flags|=65536,l===hd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),uf(t,l,h)),!1}throw Error(s(435,a.tag))}return uf(t,l,h),of(),!1}if(Be)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==rd&&(t=Error(s(422),{cause:l}),jo(An(t,a)))):(l!==rd&&(i=Error(s(423),{cause:l}),jo(An(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=An(l,a),h=jd(t.stateNode,l,h),md(t,h),lt!==4&&(lt=2)),!1;var f=Error(s(520),{cause:l});if(f=An(f,a),il===null?il=[f]:il.push(f),lt!==4&&(lt=2),i===null)return!0;l=An(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=jd(a.stateNode,l,t),md(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(pr===null||!pr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Xp(h),$p(h,t,a,l),md(a,h),!1}a=a.return}while(a!==null);return!1}var Zp=Error(s(461)),Dt=!1;function Ut(t,i,a,l){i.child=t===null?Bp(i,null,a,l):Ea(i,t.child,a,l)}function Wp(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return ws(i),l=_d(t,i,a,b,f,h),T=bd(),t!==null&&!Dt?(Ed(t,i,h),Mi(t,i,h)):(Be&&T&&nd(i),i.flags|=1,Ut(t,i,l,h),i.child)}function Jp(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Jh(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,ey(t,i,f,l,h)):(t=Nu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Gd(t,h)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:Oo,a(b,l)&&t.ref===i.ref)return Mi(t,i,h)}return i.flags|=1,t=Ii(f,l),t.ref=i.ref,t.return=i,i.child=t}function ey(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(Oo(f,l)&&t.ref===i.ref)if(Dt=!1,i.pendingProps=l=f,Gd(t,h))(t.flags&131072)!==0&&(Dt=!0);else return i.lanes=t.lanes,Mi(t,i,h)}return Pd(t,i,a,l,h)}function ty(t,i,a){var l=i.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return ny(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Mu(i,f!==null?f.cachePool:null),f!==null?ep(i,f):pd(),qp(i);else return i.lanes=i.childLanes=536870912,ny(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Mu(i,f.cachePool),ep(i,f),cr(),i.memoizedState=null):(t!==null&&Mu(i,null),pd(),cr());return Ut(t,i,h,a),i.child}function ny(t,i,a,l){var h=cd();return h=h===null?null:{parent:At._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Mu(i,null),pd(),qp(i),t!==null&&Po(t,i,l,!0),null}function Wu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Pd(t,i,a,l,h){return ws(i),a=_d(t,i,a,l,void 0,h),l=bd(),t!==null&&!Dt?(Ed(t,i,h),Mi(t,i,h)):(Be&&l&&nd(i),i.flags|=1,Ut(t,i,a,h),i.child)}function iy(t,i,a,l,h,f){return ws(i),i.updateQueue=null,a=np(i,l,a,h),tp(t),l=bd(),t!==null&&!Dt?(Ed(t,i,f),Mi(t,i,f)):(Be&&l&&nd(i),i.flags|=1,Ut(t,i,a,f),i.child)}function ry(t,i,a,l,h){if(ws(i),i.stateNode===null){var f=ha,b=a.contextType;typeof b=="object"&&b!==null&&(f=Ft(b)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Md,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},dd(i),b=a.contextType,f.context=typeof b=="object"&&b!==null?Ft(b):ha,f.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Vd(i,a,b,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Md.enqueueReplaceState(f,f.state,null),Go(i,l,f,h),Ho(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,C=Rs(a,T);f.props=C;var q=f.context,$=a.contextType;b=ha,typeof $=="object"&&$!==null&&(b=Ft($));var W=a.getDerivedStateFromProps;$=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||q!==b)&&Gp(i,f,l,b),sr=!1;var H=i.memoizedState;f.state=H,Go(i,l,f,h),Ho(),q=i.memoizedState,T||H!==q||sr?(typeof W=="function"&&(Vd(i,a,W,l),q=i.memoizedState),(C=sr||Hp(i,a,C,l,H,q,b))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),f.props=l,f.state=q,f.context=b,l=C):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,fd(t,i),b=i.memoizedProps,$=Rs(a,b),f.props=$,W=i.pendingProps,H=f.context,q=a.contextType,C=ha,typeof q=="object"&&q!==null&&(C=Ft(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==W||H!==C)&&Gp(i,f,l,C),sr=!1,H=i.memoizedState,f.state=H,Go(i,l,f,h),Ho();var G=i.memoizedState;b!==W||H!==G||sr||t!==null&&t.dependencies!==null&&ku(t.dependencies)?(typeof T=="function"&&(Vd(i,a,T,l),G=i.memoizedState),($=sr||Hp(i,a,$,l,H,G,C)||t!==null&&t.dependencies!==null&&ku(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,C)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),f.props=l,f.state=G,f.context=C,l=$):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,Wu(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=Ea(i,t.child,null,h),i.child=Ea(i,null,a,h)):Ut(t,i,a,h),i.memoizedState=f.state,t=i.child):t=Mi(t,i,h),t}function sy(t,i,a,l){return Mo(),i.flags|=256,Ut(t,i,a,l),i.child}var Ud={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(t){return{baseLanes:t,cachePool:Kg()}}function zd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Nn),t}function ay(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(St.current&2)!==0),b&&(h=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,t===null){if(Be){if(h?ur(i):cr(),Be){var T=ot,C;if(C=T){e:{for(C=T,T=ni;C.nodeType!==8;){if(!T){T=null;break e}if(C=Ln(C.nextSibling),C===null){T=null;break e}}T=C}T!==null?(i.memoizedState={dehydrated:T,treeContext:_s!==null?{id:Ci,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},C=dn(18,null,null,0),C.stateNode=T,C.return=i,i.child=C,en=i,ot=null,C=!0):C=!1}C||Ts(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return wf(T)?i.lanes=32:i.lanes=536870912,null;Vi(i)}return T=l.children,l=l.fallback,h?(cr(),h=i.mode,T=Ju({mode:"hidden",children:T},h),l=vs(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=Ld(a),h.childLanes=zd(t,b,a),i.memoizedState=Ud,l):(ur(i),Bd(i,T))}if(C=t.memoizedState,C!==null&&(T=C.dehydrated,T!==null)){if(f)i.flags&256?(ur(i),i.flags&=-257,i=qd(t,i,a)):i.memoizedState!==null?(cr(),i.child=t.child,i.flags|=128,i=null):(cr(),h=l.fallback,T=i.mode,l=Ju({mode:"visible",children:l.children},T),h=vs(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ea(i,t.child,null,a),l=i.child,l.memoizedState=Ld(a),l.childLanes=zd(t,b,a),i.memoizedState=Ud,i=h);else if(ur(i),wf(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var q=b.dgst;b=q,l=Error(s(419)),l.stack="",l.digest=b,jo({value:l,source:null,stack:null}),i=qd(t,i,a)}else if(Dt||Po(t,i,a,!1),b=(a&t.childLanes)!==0,Dt||b){if(b=Je,b!==null&&(l=a&-a,l=(l&42)!==0?1:Zi(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,ca(t,l),yn(b,t,l),Zp;T.data==="$?"||of(),i=qd(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,ot=Ln(T.nextSibling),en=i,Be=!0,Es=null,ni=!1,t!==null&&(Rn[In++]=Ci,Rn[In++]=Ni,Rn[In++]=_s,Ci=t.id,Ni=t.overflow,_s=i),i=Bd(i,l.children),i.flags|=4096);return i}return h?(cr(),h=l.fallback,T=i.mode,C=t.child,q=C.sibling,l=Ii(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,q!==null?h=Ii(q,h):(h=vs(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=t.child.memoizedState,T===null?T=Ld(a):(C=T.cachePool,C!==null?(q=At._currentValue,C=C.parent!==q?{parent:q,pool:q}:C):C=Kg(),T={baseLanes:T.baseLanes|a,cachePool:C}),h.memoizedState=T,h.childLanes=zd(t,b,a),i.memoizedState=Ud,l):(ur(i),a=t.child,t=a.sibling,a=Ii(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(b=i.deletions,b===null?(i.deletions=[t],i.flags|=16):b.push(t)),i.child=a,i.memoizedState=null,a)}function Bd(t,i){return i=Ju({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ju(t,i){return t=dn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function qd(t,i,a){return Ea(i,t.child,null,a),t=Bd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function oy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),ad(t.return,i,a)}function Hd(t,i,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function ly(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;if(Ut(t,i,l.children,a),l=St.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&oy(t,a,i);else if(t.tag===19)oy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ie(St,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Xu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Hd(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Xu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Hd(i,!0,a,null,f);break;case"together":Hd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Mi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),gr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Po(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ii(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ii(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Gd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ku(t)))}function NT(t,i,a){switch(i.tag){case 3:We(i,i.stateNode.containerInfo),rr(i,At,t.memoizedState.cache),Mo();break;case 27:case 5:$i(i);break;case 4:We(i,i.stateNode.containerInfo);break;case 10:rr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(ur(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ay(t,i,a):(ur(i),t=Mi(t,i,a),t!==null?t.sibling:null);ur(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Po(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return ly(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(St,St.current),l)break;return null;case 22:case 23:return i.lanes=0,ty(t,i,a);case 24:rr(i,At,t.memoizedState.cache)}return Mi(t,i,a)}function uy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Dt=!0;else{if(!Gd(t,a)&&(i.flags&128)===0)return Dt=!1,NT(t,i,a);Dt=(t.flags&131072)!==0}else Dt=!1,Be&&(i.flags&1048576)!==0&&Lg(i,Ou,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Jh(l)?(t=Rs(l,t),i.tag=1,i=ry(null,i,l,t,a)):(i.tag=0,i=Pd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ge){i.tag=11,i=Wp(null,i,l,t,a);break e}else if(h===k){i.tag=14,i=Jp(null,i,l,t,a);break e}}throw i=Et(l)||l,Error(s(306,i,""))}}return i;case 0:return Pd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Rs(l,i.pendingProps),ry(t,i,l,h,a);case 3:e:{if(We(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,fd(t,i),Go(i,l,null,a);var b=i.memoizedState;if(l=b.cache,rr(i,At,l),l!==f.cache&&od(i,[At],a,!0),Ho(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=sy(t,i,l,a);break e}else if(l!==h){h=An(Error(s(424)),i),jo(h),i=sy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ot=Ln(t.firstChild),en=i,Be=!0,Es=null,ni=!0,a=Bp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Mo(),l===h){i=Mi(t,i,a);break e}Ut(t,i,l,a)}i=i.child}return i;case 26:return Wu(t,i),t===null?(a=fv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Be||(a=i.type,t=i.pendingProps,l=fc(_e.current).createElement(a),l[Tt]=i,l[gt]=t,zt(l,a,t),ht(l),i.stateNode=l):i.memoizedState=fv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return $i(i),t===null&&Be&&(l=i.stateNode=cv(i.type,i.pendingProps,_e.current),en=i,ni=!0,h=ot,_r(i.type)?(Af=h,ot=Ln(l.firstChild)):ot=h),Ut(t,i,i.pendingProps.children,a),Wu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Be&&((h=l=ot)&&(l=rx(l,i.type,i.pendingProps,ni),l!==null?(i.stateNode=l,en=i,ot=Ln(l.firstChild),ni=!1,h=!0):h=!1),h||Ts(i)),$i(i),h=i.type,f=i.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,Ef(h,f)?l=null:b!==null&&Ef(h,b)&&(i.flags|=32),i.memoizedState!==null&&(h=_d(t,i,TT,null,null,a),dl._currentValue=h),Wu(t,i),Ut(t,i,l,a),i.child;case 6:return t===null&&Be&&((t=a=ot)&&(a=sx(a,i.pendingProps,ni),a!==null?(i.stateNode=a,en=i,ot=null,t=!0):t=!1),t||Ts(i)),null;case 13:return ay(t,i,a);case 4:return We(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Ea(i,null,l,a):Ut(t,i,l,a),i.child;case 11:return Wp(t,i,i.type,i.pendingProps,a);case 7:return Ut(t,i,i.pendingProps,a),i.child;case 8:return Ut(t,i,i.pendingProps.children,a),i.child;case 12:return Ut(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,rr(i,i.type,l.value),Ut(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,ws(i),h=Ft(h),l=l(h),i.flags|=1,Ut(t,i,l,a),i.child;case 14:return Jp(t,i,i.type,i.pendingProps,a);case 15:return ey(t,i,i.type,i.pendingProps,a);case 19:return ly(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Ju(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ii(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ty(t,i,a);case 24:return ws(i),l=Ft(At),t===null?(h=cd(),h===null&&(h=Je,f=ld(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},dd(i),rr(i,At,h)):((t.lanes&a)!==0&&(fd(t,i),Go(i,null,null,a),Ho()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),rr(i,At,l)):(l=f.cache,rr(i,At,l),l!==h.cache&&od(i,[At],a,!0))),Ut(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ji(t){t.flags|=4}function cy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!vv(i)){if(i=Cn.current,i!==null&&((Ue&4194048)===Ue?ii!==null:(Ue&62914560)!==Ue&&(Ue&536870912)===0||i!==ii))throw Bo=hd,Yg;t.flags|=8192}}function ec(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?mo():536870912,t.lanes|=i,Aa|=i)}function Zo(t,i){if(!Be)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function rt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function DT(t,i,a){var l=i.pendingProps;switch(id(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(i),null;case 1:return rt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Oi(At),Gn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Vo(i)?ji(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,qg())),rt(i),null;case 26:return a=i.memoizedState,t===null?(ji(i),a!==null?(rt(i),cy(i,a)):(rt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(ji(i),rt(i),cy(i,a)):(rt(i),i.flags&=-16777217):(t.memoizedProps!==l&&ji(i),rt(i),i.flags&=-16777217),null;case 27:gi(i),a=_e.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}t=me.current,Vo(i)?zg(i):(t=cv(h,l,a),i.stateNode=t,ji(i))}return rt(i),null;case 5:if(gi(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}if(t=me.current,Vo(i))zg(i);else{switch(h=fc(_e.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Tt]=i,t[gt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(zt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ji(i)}}return rt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=_e.current,Vo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=en,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Tt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||iv(t.nodeValue,a)),t||Ts(i)}else t=fc(t).createTextNode(l),t[Tt]=i,i.stateNode=t}return rt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Vo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Tt]=i}else Mo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rt(i),h=!1}else h=qg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Vi(i),i):(Vi(i),null)}if(Vi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),ec(i,i.updateQueue),rt(i),null;case 4:return Gn(),t===null&&pf(i.stateNode.containerInfo),rt(i),null;case 10:return Oi(i.type),rt(i),null;case 19:if(re(St),h=i.memoizedState,h===null)return rt(i),null;if(l=(i.flags&128)!==0,f=h.rendering,f===null)if(l)Zo(h,!1);else{if(lt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Xu(t),f!==null){for(i.flags|=128,Zo(h,!1),t=f.updateQueue,i.updateQueue=t,ec(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Ug(a,t),a=a.sibling;return ie(St,St.current&1|2),i.child}t=t.sibling}h.tail!==null&&_n()>ic&&(i.flags|=128,l=!0,Zo(h,!1),i.lanes=4194304)}else{if(!l)if(t=Xu(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,ec(i,t),Zo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!Be)return rt(i),null}else 2*_n()-h.renderingStartTime>ic&&a!==536870912&&(i.flags|=128,l=!0,Zo(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=_n(),i.sibling=null,t=St.current,ie(St,l?t&1|2:t&1),i):(rt(i),null);case 22:case 23:return Vi(i),yd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(rt(i),i.subtreeFlags&6&&(i.flags|=8192)):rt(i),a=i.updateQueue,a!==null&&ec(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&re(As),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Oi(At),rt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function OT(t,i){switch(id(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Oi(At),Gn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return gi(i),null;case 13:if(Vi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Mo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return re(St),null;case 4:return Gn(),null;case 10:return Oi(i.type),null;case 22:case 23:return Vi(i),yd(),t!==null&&re(As),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Oi(At),null;case 25:return null;default:return null}}function hy(t,i){switch(id(i),i.tag){case 3:Oi(At),Gn();break;case 26:case 27:case 5:gi(i);break;case 4:Gn();break;case 13:Vi(i);break;case 19:re(St);break;case 10:Oi(i.type);break;case 22:case 23:Vi(i),yd(),t!==null&&re(As);break;case 24:Oi(At)}}function Wo(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==h)}}catch(T){Ze(i,i.return,T)}}function hr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,h=i;var C=a,q=T;try{q()}catch($){Ze(h,C,$)}}}l=l.next}while(l!==f)}}catch($){Ze(i,i.return,$)}}function dy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Jg(i,a)}catch(l){Ze(t,t.return,l)}}}function fy(t,i,a){a.props=Rs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Ze(t,i,l)}}function Jo(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Ze(t,i,h)}}function ri(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Ze(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Ze(t,i,h)}else a.current=null}function my(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Ze(t,t.return,h)}}function Fd(t,i,a){try{var l=t.stateNode;JT(l,t.type,a,i),l[gt]=i}catch(h){Ze(t,t.return,h)}}function gy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&_r(t.type)||t.tag===4}function Kd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&_r(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=dc));else if(l!==4&&(l===27&&_r(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Yd(t,i,a),t=t.sibling;t!==null;)Yd(t,i,a),t=t.sibling}function tc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&_r(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(tc(t,i,a),t=t.sibling;t!==null;)tc(t,i,a),t=t.sibling}function py(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);zt(i,l,a),i[Tt]=t,i[gt]=a}catch(f){Ze(t,t.return,f)}}var Pi=!1,ft=!1,Qd=!1,yy=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function kT(t,i){if(t=t.containerInfo,_f=_c,t=Ig(t),Kh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,T=-1,C=-1,q=0,$=0,W=t,H=null;t:for(;;){for(var G;W!==a||h!==0&&W.nodeType!==3||(T=b+h),W!==f||l!==0&&W.nodeType!==3||(C=b+l),W.nodeType===3&&(b+=W.nodeValue.length),(G=W.firstChild)!==null;)H=W,W=G;for(;;){if(W===t)break t;if(H===a&&++q===h&&(T=b),H===f&&++$===l&&(C=b),(G=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=G}a=T===-1||C===-1?null:{start:T,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(bf={focusedElem:t,selectionRange:a},_c=!1,Ot=i;Ot!==null;)if(i=Ot,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Ot=t;else for(;Ot!==null;){switch(i=Ot,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var we=Rs(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(we,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){Ze(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)xf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":xf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Ot=t;break}Ot=i.return}}function vy(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:dr(t,a),l&4&&Wo(5,a);break;case 1:if(dr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(b){Ze(a,a.return,b)}else{var h=Rs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Ze(a,a.return,b)}}l&64&&dy(a),l&512&&Jo(a,a.return);break;case 3:if(dr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Jg(t,i)}catch(b){Ze(a,a.return,b)}}break;case 27:i===null&&l&4&&py(a);case 26:case 5:dr(t,a),i===null&&l&4&&my(a),l&512&&Jo(a,a.return);break;case 12:dr(t,a);break;case 13:dr(t,a),l&4&&Ey(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=qT.bind(null,a),ax(t,a))));break;case 22:if(l=a.memoizedState!==null||Pi,!l){i=i!==null&&i.memoizedState!==null||ft,h=Pi;var f=ft;Pi=l,(ft=i)&&!f?fr(t,a,(a.subtreeFlags&8772)!==0):dr(t,a),Pi=h,ft=f}break;case 30:break;default:dr(t,a)}}function _y(t){var i=t.alternate;i!==null&&(t.alternate=null,_y(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&er(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,sn=!1;function Ui(t,i,a){for(a=a.child;a!==null;)by(t,i,a),a=a.sibling}function by(t,i,a){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(at,a)}catch{}switch(a.tag){case 26:ft||ri(a,i),Ui(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ft||ri(a,i);var l=it,h=sn;_r(a.type)&&(it=a.stateNode,sn=!1),Ui(t,i,a),ll(a.stateNode),it=l,sn=h;break;case 5:ft||ri(a,i);case 6:if(l=it,h=sn,it=null,Ui(t,i,a),it=l,sn=h,it!==null)if(sn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(f){Ze(a,i,f)}else try{it.removeChild(a.stateNode)}catch(f){Ze(a,i,f)}break;case 18:it!==null&&(sn?(t=it,lv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),pl(t)):lv(it,a.stateNode));break;case 4:l=it,h=sn,it=a.stateNode.containerInfo,sn=!0,Ui(t,i,a),it=l,sn=h;break;case 0:case 11:case 14:case 15:ft||hr(2,a,i),ft||hr(4,a,i),Ui(t,i,a);break;case 1:ft||(ri(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&fy(a,i,l)),Ui(t,i,a);break;case 21:Ui(t,i,a);break;case 22:ft=(l=ft)||a.memoizedState!==null,Ui(t,i,a),ft=l;break;default:Ui(t,i,a)}}function Ey(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{pl(t)}catch(a){Ze(i,i.return,a)}}function VT(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new yy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new yy),i;default:throw Error(s(435,t.tag))}}function Xd(t,i){var a=VT(t);i.forEach(function(l){var h=HT.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function fn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,b=i,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(_r(T.type)){it=T.stateNode,sn=!1;break e}break;case 5:it=T.stateNode,sn=!1;break e;case 3:case 4:it=T.stateNode.containerInfo,sn=!0;break e}T=T.return}if(it===null)throw Error(s(160));by(f,b,h),it=null,sn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Ty(i,t),i=i.sibling}var Un=null;function Ty(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:fn(i,t),mn(t),l&4&&(hr(3,t,t.return),Wo(3,t),hr(5,t,t.return));break;case 1:fn(i,t),mn(t),l&512&&(ft||a===null||ri(a,a.return)),l&64&&Pi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Un;if(fn(i,t),mn(t),l&512&&(ft||a===null||ri(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[ns]||f[Tt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),zt(f,l,a),f[Tt]=t,ht(f),l=f;break e;case"link":var b=pv("link","href",h).get(l+(a.href||""));if(b){for(var T=0;T<b.length;T++)if(f=b[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(T,1);break t}}f=h.createElement(l),zt(f,l,a),h.head.appendChild(f);break;case"meta":if(b=pv("meta","content",h).get(l+(a.content||""))){for(T=0;T<b.length;T++)if(f=b[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(T,1);break t}}f=h.createElement(l),zt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Tt]=t,ht(f),l=f}t.stateNode=l}else yv(h,t.type,t.stateNode);else t.stateNode=gv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?yv(h,t.type,t.stateNode):gv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Fd(t,t.memoizedProps,a.memoizedProps)}break;case 27:fn(i,t),mn(t),l&512&&(ft||a===null||ri(a,a.return)),a!==null&&l&4&&Fd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(fn(i,t),mn(t),l&512&&(ft||a===null||ri(a,a.return)),t.flags&32){h=t.stateNode;try{En(h,"")}catch(G){Ze(t,t.return,G)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Fd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Qd=!0);break;case 6:if(fn(i,t),mn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(G){Ze(t,t.return,G)}}break;case 3:if(pc=null,h=Un,Un=mc(i.containerInfo),fn(i,t),Un=h,mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{pl(i.containerInfo)}catch(G){Ze(t,t.return,G)}Qd&&(Qd=!1,xy(t));break;case 4:l=Un,Un=mc(t.stateNode.containerInfo),fn(i,t),mn(t),Un=l;break;case 12:fn(i,t),mn(t);break;case 13:fn(i,t),mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(tf=_n()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Xd(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,q=Pi,$=ft;if(Pi=q||h,ft=$||C,fn(i,t),ft=$,Pi=q,mn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||C||Pi||ft||Is(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(f=C.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=C.stateNode;var W=C.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(G){Ze(C,C.return,G)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(G){Ze(C,C.return,G)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Xd(t,a))));break;case 19:fn(i,t),mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Xd(t,l)));break;case 30:break;case 21:break;default:fn(i,t),mn(t)}}function mn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(gy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Kd(t);tc(t,f,h);break;case 5:var b=a.stateNode;a.flags&32&&(En(b,""),a.flags&=-33);var T=Kd(t);tc(t,T,b);break;case 3:case 4:var C=a.stateNode.containerInfo,q=Kd(t);Yd(t,q,C);break;default:throw Error(s(161))}}catch($){Ze(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function xy(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;xy(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function dr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)vy(t,i.alternate,i),i=i.sibling}function Is(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:hr(4,i,i.return),Is(i);break;case 1:ri(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&fy(i,i.return,a),Is(i);break;case 27:ll(i.stateNode);case 26:case 5:ri(i,i.return),Is(i);break;case 22:i.memoizedState===null&&Is(i);break;case 30:Is(i);break;default:Is(i)}t=t.sibling}}function fr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,b=f.flags;switch(f.tag){case 0:case 11:case 15:fr(h,f,a),Wo(4,f);break;case 1:if(fr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){Ze(l,l.return,q)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Wg(C[h],T)}catch(q){Ze(l,l.return,q)}}a&&b&64&&dy(f),Jo(f,f.return);break;case 27:py(f);case 26:case 5:fr(h,f,a),a&&l===null&&b&4&&my(f),Jo(f,f.return);break;case 12:fr(h,f,a);break;case 13:fr(h,f,a),a&&b&4&&Ey(h,f);break;case 22:f.memoizedState===null&&fr(h,f,a),Jo(f,f.return);break;case 30:break;default:fr(h,f,a)}i=i.sibling}}function $d(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Uo(a))}function Zd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Uo(t))}function si(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)wy(t,i,a,l),i=i.sibling}function wy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:si(t,i,a,l),h&2048&&Wo(9,i);break;case 1:si(t,i,a,l);break;case 3:si(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Uo(t)));break;case 12:if(h&2048){si(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,b=f.id,T=f.onPostCommit;typeof T=="function"&&T(b,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){Ze(i,i.return,C)}}else si(t,i,a,l);break;case 13:si(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,b=i.alternate,i.memoizedState!==null?f._visibility&2?si(t,i,a,l):el(t,i):f._visibility&2?si(t,i,a,l):(f._visibility|=2,Ta(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&$d(b,i);break;case 24:si(t,i,a,l),h&2048&&Zd(i.alternate,i);break;default:si(t,i,a,l)}}function Ta(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,b=i,T=a,C=l,q=b.flags;switch(b.tag){case 0:case 11:case 15:Ta(f,b,T,C,h),Wo(8,b);break;case 23:break;case 22:var $=b.stateNode;b.memoizedState!==null?$._visibility&2?Ta(f,b,T,C,h):el(f,b):($._visibility|=2,Ta(f,b,T,C,h)),h&&q&2048&&$d(b.alternate,b);break;case 24:Ta(f,b,T,C,h),h&&q&2048&&Zd(b.alternate,b);break;default:Ta(f,b,T,C,h)}i=i.sibling}}function el(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:el(a,l),h&2048&&$d(l.alternate,l);break;case 24:el(a,l),h&2048&&Zd(l.alternate,l);break;default:el(a,l)}i=i.sibling}}var tl=8192;function xa(t){if(t.subtreeFlags&tl)for(t=t.child;t!==null;)Ay(t),t=t.sibling}function Ay(t){switch(t.tag){case 26:xa(t),t.flags&tl&&t.memoizedState!==null&&_x(Un,t.memoizedState,t.memoizedProps);break;case 5:xa(t);break;case 3:case 4:var i=Un;Un=mc(t.stateNode.containerInfo),xa(t),Un=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=tl,tl=16777216,xa(t),tl=i):xa(t));break;default:xa(t)}}function Sy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function nl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ot=l,Iy(l,t)}Sy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ry(t),t=t.sibling}function Ry(t){switch(t.tag){case 0:case 11:case 15:nl(t),t.flags&2048&&hr(9,t,t.return);break;case 3:nl(t);break;case 12:nl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,nc(t)):nl(t);break;default:nl(t)}}function nc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ot=l,Iy(l,t)}Sy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:hr(8,i,i.return),nc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,nc(i));break;default:nc(i)}t=t.sibling}}function Iy(t,i){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:hr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Uo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ot=l;else e:for(a=t;Ot!==null;){l=Ot;var h=l.sibling,f=l.return;if(_y(l),l===a){Ot=null;break e}if(h!==null){h.return=f,Ot=h;break e}Ot=f}}}var MT={getCacheForType:function(t){var i=Ft(At),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},jT=typeof WeakMap=="function"?WeakMap:Map,Fe=0,Je=null,Oe=null,Ue=0,Ke=0,gn=null,mr=!1,wa=!1,Wd=!1,Li=0,lt=0,gr=0,Cs=0,Jd=0,Nn=0,Aa=0,il=null,an=null,ef=!1,tf=0,ic=1/0,rc=null,pr=null,Lt=0,yr=null,Sa=null,Ra=0,nf=0,rf=null,Cy=null,rl=0,sf=null;function pn(){if((Fe&2)!==0&&Ue!==0)return Ue&-Ue;if(Q.T!==null){var t=ma;return t!==0?t:df()}return Wi()}function Ny(){Nn===0&&(Nn=(Ue&536870912)===0||Be?fo():536870912);var t=Cn.current;return t!==null&&(t.flags|=32),Nn}function yn(t,i,a){(t===Je&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)&&(Ia(t,0),vr(t,Ue,Nn,!1)),yi(t,a),((Fe&2)===0||t!==Je)&&(t===Je&&((Fe&2)===0&&(Cs|=a),lt===4&&vr(t,Ue,Nn,!1)),ai(t))}function Dy(t,i,a){if((Fe&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||ts(t,i),h=l?LT(t,i):lf(t,i,!0),f=l;do{if(h===0){wa&&!l&&vr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!PT(a)){h=lf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var T=t;h=il;var C=T.current.memoizedState.isDehydrated;if(C&&(Ia(T,b).flags|=256),b=lf(T,b,!1),b!==2){if(Wd&&!C){T.errorRecoveryDisabledLanes|=f,Cs|=f,h=4;break e}f=an,an=h,f!==null&&(an===null?an=f:an.push.apply(an,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){Ia(t,0),vr(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:vr(l,i,Nn,!mr);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=tf+300-_n(),10<h)){if(vr(l,i,Nn,!mr),Fs(l,0,!0)!==0)break e;l.timeoutHandle=av(Oy.bind(null,l,a,an,rc,ef,i,Nn,Cs,Aa,mr,f,2,-0,0),h);break e}Oy(l,a,an,rc,ef,i,Nn,Cs,Aa,mr,f,0,-0,0)}}break}while(!0);ai(t)}function Oy(t,i,a,l,h,f,b,T,C,q,$,W,H,G){if(t.timeoutHandle=-1,W=i.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(hl={stylesheets:null,count:0,unsuspend:vx},Ay(i),W=bx(),W!==null)){t.cancelPendingCommit=W(Ly.bind(null,t,i,f,a,l,h,b,T,C,$,1,H,G)),vr(t,f,b,!q);return}Ly(t,i,f,a,l,h,b,T,C)}function PT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!hn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vr(t,i,a,l){i&=~Jd,i&=~Cs,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-Gt(h),b=1<<f;l[f]=-1,h&=~b}a!==0&&Fn(t,a,i)}function sc(){return(Fe&6)===0?(sl(0),!1):!0}function af(){if(Oe!==null){if(Ke===0)var t=Oe.return;else t=Oe,Di=xs=null,Td(t),ba=null,Xo=0,t=Oe;for(;t!==null;)hy(t.alternate,t),t=t.return;Oe=null}}function Ia(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,tx(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),af(),Je=t,Oe=a=Ii(t.current,null),Ue=i,Ke=0,gn=null,mr=!1,wa=ts(t,i),Wd=!1,Aa=Nn=Jd=Cs=gr=lt=0,an=il=null,ef=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Gt(l),f=1<<h;i|=t[h],l&=~f}return Li=i,Ru(),a}function ky(t,i){Ce=null,Q.H=Ku,i===zo||i===ju?(i=$g(),Ke=3):i===Yg?(i=$g(),Ke=4):Ke=i===Zp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,Oe===null&&(lt=1,Zu(t,An(i,t.current)))}function Vy(){var t=Q.H;return Q.H=Ku,t===null?Ku:t}function My(){var t=Q.A;return Q.A=MT,t}function of(){lt=4,mr||(Ue&4194048)!==Ue&&Cn.current!==null||(wa=!0),(gr&134217727)===0&&(Cs&134217727)===0||Je===null||vr(Je,Ue,Nn,!1)}function lf(t,i,a){var l=Fe;Fe|=2;var h=Vy(),f=My();(Je!==t||Ue!==i)&&(rc=null,Ia(t,i)),i=!1;var b=lt;e:do try{if(Ke!==0&&Oe!==null){var T=Oe,C=gn;switch(Ke){case 8:af(),b=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var q=Ke;if(Ke=0,gn=null,Ca(t,T,C,q),a&&wa){b=0;break e}break;default:q=Ke,Ke=0,gn=null,Ca(t,T,C,q)}}UT(),b=lt;break}catch($){ky(t,$)}while(!0);return i&&t.shellSuspendCounter++,Di=xs=null,Fe=l,Q.H=h,Q.A=f,Oe===null&&(Je=null,Ue=0,Ru()),b}function UT(){for(;Oe!==null;)jy(Oe)}function LT(t,i){var a=Fe;Fe|=2;var l=Vy(),h=My();Je!==t||Ue!==i?(rc=null,ic=_n()+500,Ia(t,i)):wa=ts(t,i);e:do try{if(Ke!==0&&Oe!==null){i=Oe;var f=gn;t:switch(Ke){case 1:Ke=0,gn=null,Ca(t,i,f,1);break;case 2:case 9:if(Qg(f)){Ke=0,gn=null,Py(i);break}i=function(){Ke!==2&&Ke!==9||Je!==t||(Ke=7),ai(t)},f.then(i,i);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:Qg(f)?(Ke=0,gn=null,Py(i)):(Ke=0,gn=null,Ca(t,i,f,7));break;case 5:var b=null;switch(Oe.tag){case 26:b=Oe.memoizedState;case 5:case 27:var T=Oe;if(!b||vv(b)){Ke=0,gn=null;var C=T.sibling;if(C!==null)Oe=C;else{var q=T.return;q!==null?(Oe=q,ac(q)):Oe=null}break t}}Ke=0,gn=null,Ca(t,i,f,5);break;case 6:Ke=0,gn=null,Ca(t,i,f,6);break;case 8:af(),lt=6;break e;default:throw Error(s(462))}}zT();break}catch($){ky(t,$)}while(!0);return Di=xs=null,Q.H=l,Q.A=h,Fe=a,Oe!==null?0:(Je=null,Ue=0,Ru(),lt)}function zT(){for(;Oe!==null&&!lo();)jy(Oe)}function jy(t){var i=uy(t.alternate,t,Li);t.memoizedProps=t.pendingProps,i===null?ac(t):Oe=i}function Py(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=iy(a,i,i.pendingProps,i.type,void 0,Ue);break;case 11:i=iy(a,i,i.pendingProps,i.type.render,i.ref,Ue);break;case 5:Td(i);default:hy(a,i),i=Oe=Ug(i,Li),i=uy(a,i,Li)}t.memoizedProps=t.pendingProps,i===null?ac(t):Oe=i}function Ca(t,i,a,l){Di=xs=null,Td(i),ba=null,Xo=0;var h=i.return;try{if(CT(t,h,i,a,Ue)){lt=1,Zu(t,An(a,t.current)),Oe=null;return}}catch(f){if(h!==null)throw Oe=h,f;lt=1,Zu(t,An(a,t.current)),Oe=null;return}i.flags&32768?(Be||l===1?t=!0:wa||(Ue&536870912)!==0?t=!1:(mr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Uy(i,t)):ac(i)}function ac(t){var i=t;do{if((i.flags&32768)!==0){Uy(i,mr);return}t=i.return;var a=DT(i.alternate,i,Li);if(a!==null){Oe=a;return}if(i=i.sibling,i!==null){Oe=i;return}Oe=i=t}while(i!==null);lt===0&&(lt=5)}function Uy(t,i){do{var a=OT(t.alternate,t);if(a!==null){a.flags&=32767,Oe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=a}while(t!==null);lt=6,Oe=null}function Ly(t,i,a,l,h,f,b,T,C){t.cancelPendingCommit=null;do oc();while(Lt!==0);if((Fe&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Zh,go(t,a,f,b,T,C),t===Je&&(Oe=Je=null,Ue=0),Sa=i,yr=t,Ra=a,nf=f,rf=h,Cy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,GT(Zr,function(){return Gy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=le.p,le.p=2,b=Fe,Fe|=4;try{kT(t,i,a)}finally{Fe=b,le.p=h,Q.T=l}}Lt=1,zy(),By(),qy()}}function zy(){if(Lt===1){Lt=0;var t=yr,i=Sa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var h=Fe;Fe|=4;try{Ty(i,t);var f=bf,b=Ig(t.containerInfo),T=f.focusedElem,C=f.selectionRange;if(b!==T&&T&&T.ownerDocument&&Rg(T.ownerDocument.documentElement,T)){if(C!==null&&Kh(T)){var q=C.start,$=C.end;if($===void 0&&($=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min($,T.value.length);else{var W=T.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var G=H.getSelection(),we=T.textContent.length,be=Math.min(C.start,we),$e=C.end===void 0?be:Math.min(C.end,we);!G.extend&&be>$e&&(b=$e,$e=be,be=b);var P=Sg(T,be),V=Sg(T,$e);if(P&&V&&(G.rangeCount!==1||G.anchorNode!==P.node||G.anchorOffset!==P.offset||G.focusNode!==V.node||G.focusOffset!==V.offset)){var z=W.createRange();z.setStart(P.node,P.offset),G.removeAllRanges(),be>$e?(G.addRange(z),G.extend(V.node,V.offset)):(z.setEnd(V.node,V.offset),G.addRange(z))}}}}for(W=[],G=T;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<W.length;T++){var Z=W[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}_c=!!_f,bf=_f=null}finally{Fe=h,le.p=l,Q.T=a}}t.current=i,Lt=2}}function By(){if(Lt===2){Lt=0;var t=yr,i=Sa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var h=Fe;Fe|=4;try{vy(t,i.alternate,i)}finally{Fe=h,le.p=l,Q.T=a}}Lt=3}}function qy(){if(Lt===4||Lt===3){Lt=0,nu();var t=yr,i=Sa,a=Ra,l=Cy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Lt=5:(Lt=0,Sa=yr=null,Hy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(pr=null),Ks(a),i=i.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(at,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Q.T,h=le.p,le.p=2,Q.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var T=l[b];f(T.value,{componentStack:T.stack})}}finally{Q.T=i,le.p=h}}(Ra&3)!==0&&oc(),ai(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===sf?rl++:(rl=0,sf=t):rl=0,sl(0)}}function Hy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Uo(i)))}function oc(t){return zy(),By(),qy(),Gy()}function Gy(){if(Lt!==5)return!1;var t=yr,i=nf;nf=0;var a=Ks(Ra),l=Q.T,h=le.p;try{le.p=32>a?32:a,Q.T=null,a=rf,rf=null;var f=yr,b=Ra;if(Lt=0,Sa=yr=null,Ra=0,(Fe&6)!==0)throw Error(s(331));var T=Fe;if(Fe|=4,Ry(f.current),wy(f,f.current,b,a),Fe=T,sl(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(at,f)}catch{}return!0}finally{le.p=h,Q.T=l,Hy(t,i)}}function Fy(t,i,a){i=An(a,i),i=jd(t.stateNode,i,2),t=or(t,i,2),t!==null&&(yi(t,2),ai(t))}function Ze(t,i,a){if(t.tag===3)Fy(t,t,a);else for(;i!==null;){if(i.tag===3){Fy(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(pr===null||!pr.has(l))){t=An(a,t),a=Xp(2),l=or(i,a,2),l!==null&&($p(a,l,i,t),yi(l,2),ai(l));break}}i=i.return}}function uf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new jT;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Wd=!0,h.add(a),t=BT.bind(null,t,i,a),i.then(t,t))}function BT(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Je===t&&(Ue&a)===a&&(lt===4||lt===3&&(Ue&62914560)===Ue&&300>_n()-tf?(Fe&2)===0&&Ia(t,0):Jd|=a,Aa===Ue&&(Aa=0)),ai(t)}function Ky(t,i){i===0&&(i=mo()),t=ca(t,i),t!==null&&(yi(t,i),ai(t))}function qT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Ky(t,a)}function HT(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Ky(t,a)}function GT(t,i){return Xr(t,i)}var lc=null,Na=null,cf=!1,uc=!1,hf=!1,Ns=0;function ai(t){t!==Na&&t.next===null&&(Na===null?lc=Na=t:Na=Na.next=t),uc=!0,cf||(cf=!0,KT())}function sl(t,i){if(!hf&&uc){hf=!0;do for(var a=!1,l=lc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var b=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Gt(42|t)+1)-1,f&=h&~(b&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,$y(l,f))}else f=Ue,f=Fs(l,l===Je?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ts(l,f)||(a=!0,$y(l,f));l=l.next}while(a);hf=!1}}function FT(){Yy()}function Yy(){uc=cf=!1;var t=0;Ns!==0&&(ex()&&(t=Ns),Ns=0);for(var i=_n(),a=null,l=lc;l!==null;){var h=l.next,f=Qy(l,i);f===0?(l.next=null,a===null?lc=h:a.next=h,h===null&&(Na=a)):(a=l,(t!==0||(f&3)!==0)&&(uc=!0)),l=h}sl(t)}function Qy(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-Gt(f),T=1<<b,C=h[b];C===-1?((T&a)===0||(T&l)!==0)&&(h[b]=ho(T,i)):C<=i&&(t.expiredLanes|=T),f&=~T}if(i=Je,a=Ue,a=Fs(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ke===2||Ke===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&$r(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ts(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&$r(l),Ks(a)){case 2:case 8:a=Hs;break;case 32:a=Zr;break;case 268435456:a=Gs;break;default:a=Zr}return l=Xy.bind(null,t),a=Xr(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&$r(l),t.callbackPriority=2,t.callbackNode=null,2}function Xy(t,i){if(Lt!==0&&Lt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(oc()&&t.callbackNode!==a)return null;var l=Ue;return l=Fs(t,t===Je?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Dy(t,l,i),Qy(t,_n()),t.callbackNode!=null&&t.callbackNode===a?Xy.bind(null,t):null)}function $y(t,i){if(oc())return null;Dy(t,i,!0)}function KT(){nx(function(){(Fe&6)!==0?Xr(uo,FT):Yy()})}function df(){return Ns===0&&(Ns=fo()),Ns}function Zy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ws(""+t)}function Wy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function YT(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=Zy((h[gt]||null).action),b=l.submitter;b&&(i=(i=b[gt]||null)?Zy(i.formAction):b.getAttribute("formAction"),i!==null&&(f=i,b=null));var T=new Js("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Ns!==0){var C=b?Wy(h,b):new FormData(h);Dd(a,{pending:!0,data:C,method:h.method,action:f},null,C)}}else typeof f=="function"&&(T.preventDefault(),C=b?Wy(h,b):new FormData(h),Dd(a,{pending:!0,data:C,method:h.method,action:f},f,C))},currentTarget:h}]})}}for(var ff=0;ff<$h.length;ff++){var mf=$h[ff],QT=mf.toLowerCase(),XT=mf[0].toUpperCase()+mf.slice(1);Pn(QT,"on"+XT)}Pn(Dg,"onAnimationEnd"),Pn(Og,"onAnimationIteration"),Pn(kg,"onAnimationStart"),Pn("dblclick","onDoubleClick"),Pn("focusin","onFocus"),Pn("focusout","onBlur"),Pn(dT,"onTransitionRun"),Pn(fT,"onTransitionStart"),Pn(mT,"onTransitionCancel"),Pn(Vg,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),Mn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$T=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(al));function Jy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var b=l.length-1;0<=b;b--){var T=l[b],C=T.instance,q=T.currentTarget;if(T=T.listener,C!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch($){$u($)}h.currentTarget=null,f=C}else for(b=0;b<l.length;b++){if(T=l[b],C=T.instance,q=T.currentTarget,T=T.listener,C!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch($){$u($)}h.currentTarget=null,f=C}}}}function ke(t,i){var a=i[yo];a===void 0&&(a=i[yo]=new Set);var l=t+"__bubble";a.has(l)||(ev(i,t,2,!1),a.add(l))}function gf(t,i,a){var l=0;i&&(l|=4),ev(a,t,l,i)}var cc="_reactListening"+Math.random().toString(36).slice(2);function pf(t){if(!t[cc]){t[cc]=!0,vo.forEach(function(a){a!=="selectionchange"&&($T.has(a)||gf(a,!1,t),gf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[cc]||(i[cc]=!0,gf("selectionchange",!1,i))}}function ev(t,i,a,l){switch(wv(i)){case 2:var h=xx;break;case 8:h=wx;break;default:h=Nf}a=h.bind(null,i,a,t),h=void 0,!xn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function yf(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===h)break;if(b===4)for(b=l.return;b!==null;){var C=b.tag;if((C===3||C===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;T!==null;){if(b=vi(T),b===null)return;if(C=b.tag,C===5||C===6||C===26||C===27){l=f=b;continue e}T=T.parentNode}}l=l.return}du(function(){var q=f,$=Tn(a),W=[];e:{var H=Mg.get(t);if(H!==void 0){var G=Js,we=t;switch(t){case"keypress":if(Zn(a)===0)break e;case"keydown":case"keyup":G=sa;break;case"focusin":we="focus",G=na;break;case"focusout":we="blur",G=na;break;case"beforeblur":case"afterblur":G=na;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=qh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=bu;break;case Dg:case Og:case kg:G=ia;break;case Vg:G=Tu;break;case"scroll":case"scrollend":G=fu;break;case"wheel":G=aa;break;case"copy":case"cut":case"paste":G=ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=No;break;case"toggle":case"beforetoggle":G=wu}var be=(i&4)!==0,$e=!be&&(t==="scroll"||t==="scrollend"),P=be?H!==null?H+"Capture":null:H;be=[];for(var V=q,z;V!==null;){var Z=V;if(z=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||z===null||P===null||(Z=us(V,P),Z!=null&&be.push(ol(V,Z,z))),$e)break;V=V.return}0<be.length&&(H=new G(H,we,null,a,$),W.push({event:H,listeners:be}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",H&&a!==Ti&&(we=a.relatedTarget||a.fromElement)&&(vi(we)||we[bn]))break e;if((G||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,G?(we=a.relatedTarget||a.toElement,G=q,we=we?vi(we):null,we!==null&&($e=u(we),be=we.tag,we!==$e||be!==5&&be!==27&&be!==6)&&(we=null)):(G=null,we=q),G!==we)){if(be=wn,Z="onMouseLeave",P="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(be=No,Z="onPointerLeave",P="onPointerEnter",V="pointer"),$e=G==null?H:Yn(G),z=we==null?H:Yn(we),H=new be(Z,V+"leave",G,a,$),H.target=$e,H.relatedTarget=z,Z=null,vi($)===q&&(be=new be(P,V+"enter",we,a,$),be.target=z,be.relatedTarget=$e,Z=be),$e=Z,G&&we)t:{for(be=G,P=we,V=0,z=be;z;z=Da(z))V++;for(z=0,Z=P;Z;Z=Da(Z))z++;for(;0<V-z;)be=Da(be),V--;for(;0<z-V;)P=Da(P),z--;for(;V--;){if(be===P||P!==null&&be===P.alternate)break t;be=Da(be),P=Da(P)}be=null}else be=null;G!==null&&tv(W,H,G,be,!1),we!==null&&$e!==null&&tv(W,$e,we,be,!0)}}e:{if(H=q?Yn(q):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var de=bg;else if(wt(H))if(Eg)de=uT;else{de=oT;var De=aT}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&xo(q.elementType)&&(de=bg):de=lT;if(de&&(de=de(t,q))){Ri(W,de,a,$);break e}De&&De(t,H,q),t==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&nr(H,"number",H.value)}switch(De=q?Yn(q):window,t){case"focusin":(wt(De)||De.contentEditable==="true")&&(oa=De,Yh=q,ko=null);break;case"focusout":ko=Yh=oa=null;break;case"mousedown":Qh=!0;break;case"contextmenu":case"mouseup":case"dragend":Qh=!1,Cg(W,a,$);break;case"selectionchange":if(hT)break;case"keydown":case"keyup":Cg(W,a,$)}var ye;if(ei)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else je?F(t,a)&&(Ee="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(_&&a.locale!=="ko"&&(je||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&je&&(ye=Ao()):($n=$,ir="value"in $n?$n.value:$n.textContent,je=!0)),De=hc(q,Ee),0<De.length&&(Ee=new Io(Ee,t,null,a,$),W.push({event:Ee,listeners:De}),ye?Ee.data=ye:(ye=ae(a),ye!==null&&(Ee.data=ye)))),(ye=p?xt(t,a):Pe(t,a))&&(Ee=hc(q,"onBeforeInput"),0<Ee.length&&(De=new Io("onBeforeInput","beforeinput",null,a,$),W.push({event:De,listeners:Ee}),De.data=ye)),YT(W,t,q,a,$)}Jy(W,i)})}function ol(t,i,a){return{instance:t,listener:i,currentTarget:a}}function hc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=us(t,a),h!=null&&l.unshift(ol(t,h,f)),h=us(t,i),h!=null&&l.push(ol(t,h,f))),t.tag===3)return l;t=t.return}return[]}function Da(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function tv(t,i,a,l,h){for(var f=i._reactName,b=[];a!==null&&a!==l;){var T=a,C=T.alternate,q=T.stateNode;if(T=T.tag,C!==null&&C===l)break;T!==5&&T!==26&&T!==27||q===null||(C=q,h?(q=us(a,f),q!=null&&b.unshift(ol(a,q,C))):h||(q=us(a,f),q!=null&&b.push(ol(a,q,C)))),a=a.return}b.length!==0&&t.push({event:i,listeners:b})}var ZT=/\r\n?/g,WT=/\u0000|\uFFFD/g;function nv(t){return(typeof t=="string"?t:""+t).replace(ZT,`
`).replace(WT,"")}function iv(t,i){return i=nv(i),nv(t)===i}function dc(){}function Xe(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||En(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&En(t,""+l);break;case"className":Qn(t,"class",l);break;case"tabIndex":Qn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Qn(t,a,l);break;case"style":To(t,l,f);break;case"data":if(i!=="object"){Qn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ws(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Xe(t,i,"name",h.name,h,null),Xe(t,i,"formEncType",h.formEncType,h,null),Xe(t,i,"formMethod",h.formMethod,h,null),Xe(t,i,"formTarget",h.formTarget,h,null)):(Xe(t,i,"encType",h.encType,h,null),Xe(t,i,"method",h.method,h,null),Xe(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ws(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=dc);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ws(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),tr(t,"popover",l);break;case"xlinkActuate":jt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":tr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=zh.get(a)||a,tr(t,a,l))}}function vf(t,i,a,l,h,f){switch(a){case"style":To(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?En(t,l):(typeof l=="number"||typeof l=="bigint")&&En(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=dc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ys.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[gt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):tr(t,a,l)}}}function zt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xe(t,i,f,b,a,null)}}h&&Xe(t,i,"srcSet",a.srcSet,a,null),l&&Xe(t,i,"src",a.src,a,null);return;case"input":ke("invalid",t);var T=f=b=h=null,C=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":h=$;break;case"type":b=$;break;case"checked":C=$;break;case"defaultChecked":q=$;break;case"value":f=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:Xe(t,i,l,$,a,null)}}as(t,f,T,C,q,b,h,!1),Zs(t);return;case"select":ke("invalid",t),l=b=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:Xe(t,i,h,T,a,null)}i=f,a=b,t.multiple=!!l,i!=null?Ei(t,!!l,i,!1):a!=null&&Ei(t,!!l,a,!0);return;case"textarea":ke("invalid",t),f=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(T=a[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Xe(t,i,b,T,a,null)}os(t,l,h,f),Zs(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xe(t,i,C,l,a,null)}return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<al.length;l++)ke(al[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Xe(t,i,q,l,a,null)}return;default:if(xo(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&vf(t,i,$,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Xe(t,i,T,l,a,null))}function JT(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,T=null,C=null,q=null,$=null;for(G in a){var W=a[G];if(a.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":C=W;default:l.hasOwnProperty(G)||Xe(t,i,G,null,l,W)}}for(var H in l){var G=l[H];if(W=a[H],l.hasOwnProperty(H)&&(G!=null||W!=null))switch(H){case"type":f=G;break;case"name":h=G;break;case"checked":q=G;break;case"defaultChecked":$=G;break;case"value":b=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==W&&Xe(t,i,H,G,l,W)}}cn(t,b,T,C,q,$,f,h);return;case"select":G=b=T=H=null;for(f in a)if(C=a[f],a.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":G=C;default:l.hasOwnProperty(f)||Xe(t,i,f,null,l,C)}for(h in l)if(f=l[h],C=a[h],l.hasOwnProperty(h)&&(f!=null||C!=null))switch(h){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":b=f;default:f!==C&&Xe(t,i,h,f,l,C)}i=T,a=b,l=G,H!=null?Ei(t,!!a,H,!1):!!l!=!!a&&(i!=null?Ei(t,!!a,i,!0):Ei(t,!!a,a?[]:"",!1));return;case"textarea":G=H=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Xe(t,i,T,null,l,h)}for(b in l)if(h=l[b],f=a[b],l.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":H=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Xe(t,i,b,h,l,f)}Ye(t,H,G);return;case"option":for(var we in a)if(H=a[we],a.hasOwnProperty(we)&&H!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:Xe(t,i,we,null,l,H)}for(C in l)if(H=l[C],G=a[C],l.hasOwnProperty(C)&&H!==G&&(H!=null||G!=null))switch(C){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Xe(t,i,C,H,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)H=a[be],a.hasOwnProperty(be)&&H!=null&&!l.hasOwnProperty(be)&&Xe(t,i,be,null,l,H);for(q in l)if(H=l[q],G=a[q],l.hasOwnProperty(q)&&H!==G&&(H!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:Xe(t,i,q,H,l,G)}return;default:if(xo(i)){for(var $e in a)H=a[$e],a.hasOwnProperty($e)&&H!==void 0&&!l.hasOwnProperty($e)&&vf(t,i,$e,void 0,l,H);for($ in l)H=l[$],G=a[$],!l.hasOwnProperty($)||H===G||H===void 0&&G===void 0||vf(t,i,$,H,l,G);return}}for(var P in a)H=a[P],a.hasOwnProperty(P)&&H!=null&&!l.hasOwnProperty(P)&&Xe(t,i,P,null,l,H);for(W in l)H=l[W],G=a[W],!l.hasOwnProperty(W)||H===G||H==null&&G==null||Xe(t,i,W,H,l,G)}var _f=null,bf=null;function fc(t){return t.nodeType===9?t:t.ownerDocument}function rv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Ef(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Tf=null;function ex(){var t=window.event;return t&&t.type==="popstate"?t===Tf?!1:(Tf=t,!0):(Tf=null,!1)}var av=typeof setTimeout=="function"?setTimeout:void 0,tx=typeof clearTimeout=="function"?clearTimeout:void 0,ov=typeof Promise=="function"?Promise:void 0,nx=typeof queueMicrotask=="function"?queueMicrotask:typeof ov<"u"?function(t){return ov.resolve(null).then(t).catch(ix)}:av;function ix(t){setTimeout(function(){throw t})}function _r(t){return t==="head"}function lv(t,i){var a=i,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&ll(b.documentElement),a&2&&ll(b.body),a&4)for(a=b.head,ll(a),b=a.firstChild;b;){var T=b.nextSibling,C=b.nodeName;b[ns]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=T}}if(h===0){t.removeChild(f),pl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);pl(i)}function xf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":xf(a),er(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function rx(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[ns])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Ln(t.nextSibling),t===null)break}return null}function sx(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Ln(t.nextSibling),t===null))return null;return t}function wf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function ax(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Ln(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Af=null;function uv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function cv(t,i,a){switch(i=fc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function ll(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);er(t)}var Dn=new Map,hv=new Set;function mc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var zi=le.d;le.d={f:ox,r:lx,D:ux,C:cx,L:hx,m:dx,X:mx,S:fx,M:gx};function ox(){var t=zi.f(),i=sc();return t||i}function lx(t){var i=Kn(t);i!==null&&i.tag===5&&i.type==="form"?Dp(i):zi.r(t)}var Oa=typeof document>"u"?null:document;function dv(t,i,a){var l=Oa;if(l&&typeof i=="string"&&i){var h=pt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),hv.has(h)||(hv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),zt(i,"link",t),ht(i),l.head.appendChild(i)))}}function ux(t){zi.D(t),dv("dns-prefetch",t,null)}function cx(t,i){zi.C(t,i),dv("preconnect",t,i)}function hx(t,i,a){zi.L(t,i,a);var l=Oa;if(l&&t&&i){var h='link[rel="preload"][as="'+pt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+pt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+pt(a.imageSizes)+'"]')):h+='[href="'+pt(t)+'"]';var f=h;switch(i){case"style":f=ka(t);break;case"script":f=Va(t)}Dn.has(f)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Dn.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(ul(f))||i==="script"&&l.querySelector(cl(f))||(i=l.createElement("link"),zt(i,"link",t),ht(i),l.head.appendChild(i)))}}function dx(t,i){zi.m(t,i);var a=Oa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+pt(l)+'"][href="'+pt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Va(t)}if(!Dn.has(f)&&(t=E({rel:"modulepreload",href:t},i),Dn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cl(f)))return}l=a.createElement("link"),zt(l,"link",t),ht(l),a.head.appendChild(l)}}}function fx(t,i,a){zi.S(t,i,a);var l=Oa;if(l&&t){var h=Zt(l).hoistableStyles,f=ka(t);i=i||"default";var b=h.get(f);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(ul(f)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Dn.get(f))&&Sf(t,a);var C=b=l.createElement("link");ht(C),zt(C,"link",t),C._p=new Promise(function(q,$){C.onload=q,C.onerror=$}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,gc(b,i,l)}b={type:"stylesheet",instance:b,count:1,state:T},h.set(f,b)}}}function mx(t,i){zi.X(t,i);var a=Oa;if(a&&t){var l=Zt(a).hoistableScripts,h=Va(t),f=l.get(h);f||(f=a.querySelector(cl(h)),f||(t=E({src:t,async:!0},i),(i=Dn.get(h))&&Rf(t,i),f=a.createElement("script"),ht(f),zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function gx(t,i){zi.M(t,i);var a=Oa;if(a&&t){var l=Zt(a).hoistableScripts,h=Va(t),f=l.get(h);f||(f=a.querySelector(cl(h)),f||(t=E({src:t,async:!0,type:"module"},i),(i=Dn.get(h))&&Rf(t,i),f=a.createElement("script"),ht(f),zt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function fv(t,i,a,l){var h=(h=_e.current)?mc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ka(a.href),a=Zt(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ka(a.href);var f=Zt(h).hoistableStyles,b=f.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=h.querySelector(ul(t)))&&!f._p&&(b.instance=f,b.state.loading=5),Dn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Dn.set(t,a),f||px(h,t,a,b.state))),i&&l===null)throw Error(s(528,""));return b}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Va(a),a=Zt(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ka(t){return'href="'+pt(t)+'"'}function ul(t){return'link[rel="stylesheet"]['+t+"]"}function mv(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function px(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),zt(i,"link",a),ht(i),t.head.appendChild(i))}function Va(t){return'[src="'+pt(t)+'"]'}function cl(t){return"script[async]"+t}function gv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+pt(a.href)+'"]');if(l)return i.instance=l,ht(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ht(l),zt(l,"style",h),gc(l,a.precedence,t),i.instance=l;case"stylesheet":h=ka(a.href);var f=t.querySelector(ul(h));if(f)return i.state.loading|=4,i.instance=f,ht(f),f;l=mv(a),(h=Dn.get(h))&&Sf(l,h),f=(t.ownerDocument||t).createElement("link"),ht(f);var b=f;return b._p=new Promise(function(T,C){b.onload=T,b.onerror=C}),zt(f,"link",l),i.state.loading|=4,gc(f,a.precedence,t),i.instance=f;case"script":return f=Va(a.src),(h=t.querySelector(cl(f)))?(i.instance=h,ht(h),h):(l=a,(h=Dn.get(f))&&(l=E({},a),Rf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ht(h),zt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,gc(l,a.precedence,t));return i.instance}function gc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Sf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Rf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var pc=null;function pv(t,i,a){if(pc===null){var l=new Map,h=pc=new Map;h.set(a,l)}else h=pc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[ns]||f[Tt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(i)||"";b=t+b;var T=l.get(b);T?T.push(f):l.set(b,[f])}}return l}function yv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function yx(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function vv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var hl=null;function vx(){}function _x(t,i,a){if(hl===null)throw Error(s(475));var l=hl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ka(a.href),f=t.querySelector(ul(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=yc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,ht(f);return}f=t.ownerDocument||t,a=mv(a),(h=Dn.get(h))&&Sf(a,h),f=f.createElement("link"),ht(f);var b=f;b._p=new Promise(function(T,C){b.onload=T,b.onerror=C}),zt(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=yc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function bx(){if(hl===null)throw Error(s(475));var t=hl;return t.stylesheets&&t.count===0&&If(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&If(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function yc(){if(this.count--,this.count===0){if(this.stylesheets)If(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var vc=null;function If(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,vc=new Map,i.forEach(Ex,t),vc=null,yc.call(t))}function Ex(t,i){if(!(i.state.loading&4)){var a=vc.get(t);if(a)var l=a.get(null);else{a=new Map,vc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=i.instance,b=h.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,h),a.set(b,h),this.count++,l=yc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var dl={$$typeof:ue,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Tx(t,i,a,l,h,f,b,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pi(0),this.hiddenUpdates=pi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function _v(t,i,a,l,h,f,b,T,C,q,$,W){return t=new Tx(t,i,a,b,T,C,q,W),i=1,f===!0&&(i|=24),f=dn(3,null,null,i),t.current=f,f.stateNode=t,i=ld(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},dd(f),t}function bv(t){return t?(t=ha,t):ha}function Ev(t,i,a,l,h,f){h=bv(h),l.context===null?l.context=h:l.pendingContext=h,l=ar(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=or(t,l,i),a!==null&&(yn(a,t,i),qo(a,t,i))}function Tv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Cf(t,i){Tv(t,i),(t=t.alternate)&&Tv(t,i)}function xv(t){if(t.tag===13){var i=ca(t,67108864);i!==null&&yn(i,t,67108864),Cf(t,67108864)}}var _c=!0;function xx(t,i,a,l){var h=Q.T;Q.T=null;var f=le.p;try{le.p=2,Nf(t,i,a,l)}finally{le.p=f,Q.T=h}}function wx(t,i,a,l){var h=Q.T;Q.T=null;var f=le.p;try{le.p=8,Nf(t,i,a,l)}finally{le.p=f,Q.T=h}}function Nf(t,i,a,l){if(_c){var h=Df(l);if(h===null)yf(t,i,l,bc,a),Av(t,l);else if(Sx(h,t,i,a,l))l.stopPropagation();else if(Av(t,l),i&4&&-1<Ax.indexOf(t)){for(;h!==null;){var f=Kn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=Vn(f.pendingLanes);if(b!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var C=1<<31-Gt(b);T.entanglements[1]|=C,b&=~C}ai(f),(Fe&6)===0&&(ic=_n()+500,sl(0))}}break;case 13:T=ca(f,2),T!==null&&yn(T,f,2),sc(),Cf(f,2)}if(f=Df(l),f===null&&yf(t,i,l,bc,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else yf(t,i,l,null,a)}}function Df(t){return t=Tn(t),Of(t)}var bc=null;function Of(t){if(bc=null,t=vi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return bc=t,null}function wv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vh()){case uo:return 2;case Hs:return 8;case Zr:case Mh:return 32;case Gs:return 268435456;default:return 32}default:return 32}}var kf=!1,br=null,Er=null,Tr=null,fl=new Map,ml=new Map,xr=[],Ax="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Av(t,i){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":fl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(i.pointerId)}}function gl(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Kn(i),i!==null&&xv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function Sx(t,i,a,l,h){switch(i){case"focusin":return br=gl(br,t,i,a,l,h),!0;case"dragenter":return Er=gl(Er,t,i,a,l,h),!0;case"mouseover":return Tr=gl(Tr,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return fl.set(f,gl(fl.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,ml.set(f,gl(ml.get(f)||null,t,i,a,l,h)),!0}return!1}function Sv(t){var i=vi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,su(t.priority,function(){if(a.tag===13){var l=pn();l=Zi(l);var h=ca(a,l);h!==null&&yn(h,a,l),Cf(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ec(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Df(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ti=l,a.target.dispatchEvent(l),Ti=null}else return i=Kn(a),i!==null&&xv(i),t.blockedOn=a,!1;i.shift()}return!0}function Rv(t,i,a){Ec(t)&&a.delete(i)}function Rx(){kf=!1,br!==null&&Ec(br)&&(br=null),Er!==null&&Ec(Er)&&(Er=null),Tr!==null&&Ec(Tr)&&(Tr=null),fl.forEach(Rv),ml.forEach(Rv)}function Tc(t,i){t.blockedOn===i&&(t.blockedOn=null,kf||(kf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Rx)))}var xc=null;function Iv(t){xc!==t&&(xc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){xc===t&&(xc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Of(l||a)===null)continue;break}var f=Kn(a);f!==null&&(t.splice(i,3),i-=3,Dd(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function pl(t){function i(C){return Tc(C,t)}br!==null&&Tc(br,t),Er!==null&&Tc(Er,t),Tr!==null&&Tc(Tr,t),fl.forEach(i),ml.forEach(i);for(var a=0;a<xr.length;a++){var l=xr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<xr.length&&(a=xr[0],a.blockedOn===null);)Sv(a),a.blockedOn===null&&xr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],b=h[gt]||null;if(typeof f=="function")b||Iv(a);else if(b){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[gt]||null)T=b.formAction;else if(Of(h)!==null)continue}else T=b.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),Iv(a)}}}function Vf(t){this._internalRoot=t}wc.prototype.render=Vf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=pn();Ev(a,l,t,i,null,null)},wc.prototype.unmount=Vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;Ev(t.current,2,null,t,null,null),sc(),i[bn]=null}};function wc(t){this._internalRoot=t}wc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Wi();t={blockedOn:null,target:t,priority:i};for(var a=0;a<xr.length&&i!==0&&i<xr[a].priority;a++);xr.splice(a,0,t),a===0&&Sv(t)}};var Cv=e.version;if(Cv!=="19.1.0")throw Error(s(527,Cv,"19.1.0"));le.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(i),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var Ix={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ac.isDisabled&&Ac.supportsFiber)try{at=Ac.inject(Ix),Ge=Ac}catch{}}return vl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Fp,f=Kp,b=Yp,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=_v(t,1,!1,null,null,a,l,h,f,b,T,null),t[bn]=i.current,pf(t),new Vf(i)},vl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=Fp,b=Kp,T=Yp,C=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),i=_v(t,1,!0,i,a??null,l,h,f,b,T,C,q),i.context=bv(null),a=i.current,l=pn(),l=Zi(l),h=ar(l),h.callback=null,or(a,h,l),a=l,i.current.lanes=a,yi(i,a),ai(i),t[bn]=i.current,pf(t),new wc(i)},vl.version="19.1.0",vl}var Lv;function Ux(){if(Lv)return Pf.exports;Lv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Pf.exports=Px(),Pf.exports}var Lx=Ux();const zx="modulepreload",Bx=function(r){return"/youtube-bgm-research/"+r},zv={},_l=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let d=function(v){return Promise.all(v.map(E=>Promise.resolve(E).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),y=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=d(n.map(v=>{if(v=Bx(v),v in zv)return;zv[v]=!0;const E=v.endsWith(".css"),S=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${S}`))return;const x=document.createElement("link");if(x.rel=E?"stylesheet":zx,E||(x.as="script"),x.crossOrigin="",x.href=v,y&&x.setAttribute("nonce",y),document.head.appendChild(x),E)return new Promise((D,j)=>{x.addEventListener("load",D),x.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${v}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return e().catch(u)})},qx=()=>{};var Bv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Hx=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],d=r[n++],m=r[n++],y=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const u=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},__={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],d=o+1<r.length,m=d?r[o+1]:0,y=o+2<r.length,v=y?r[o+2]:0,E=u>>2,S=(u&3)<<4|m>>4;let x=(m&15)<<2|v>>6,D=v&63;y||(D=64,d||(x=64)),s.push(n[E],n[S],n[x],n[D])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(v_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Hx(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const v=o<r.length?n[r.charAt(o)]:64;++o;const S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||v==null||S==null)throw new Gx;const x=u<<2|m>>4;if(s.push(x),v!==64){const D=m<<4&240|v>>2;if(s.push(D),S!==64){const j=v<<6&192|S;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Gx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fx=function(r){const e=v_(r);return __.encodeByteArray(e,!0)},Hc=function(r){return Fx(r).replace(/\./g,"")},b_=function(r){try{return __.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx=()=>Kx().__FIREBASE_DEFAULTS__,Qx=()=>{if(typeof process>"u"||typeof Bv>"u")return;const r=Bv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Xx=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&b_(r[1]);return e&&JSON.parse(e)},lh=()=>{try{return qx()||Yx()||Qx()||Xx()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},E_=r=>{var e,n;return(n=(e=lh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},$x=r=>{const e=E_(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},T_=()=>{var r;return(r=lh())===null||r===void 0?void 0:r.config},x_=r=>{var e;return(e=lh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(r){return r.endsWith(".cloudworkstations.dev")}async function w_(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Hc(JSON.stringify(n)),Hc(JSON.stringify(d)),""].join(".")}const Il={};function Jx(){const r={prod:[],emulator:[]};for(const e of Object.keys(Il))Il[e]?r.emulator.push(e):r.prod.push(e);return r}function ew(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let qv=!1;function A_(r,e){if(typeof window>"u"||typeof document>"u"||!eo(window.location.host)||Il[r]===e||Il[r]||qv)return;Il[r]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",u=Jx().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function y(x,D){x.setAttribute("width","24"),x.setAttribute("id",D),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function v(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{qv=!0,d()},x}function E(x,D){x.setAttribute("id",D),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function S(){const x=ew(s),D=n("text"),j=document.getElementById(D)||document.createElement("span"),Y=n("learnmore"),B=document.getElementById(Y)||document.createElement("a"),ne=n("preprendIcon"),oe=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const ue=x.element;m(ue),E(B,Y);const ge=v();y(oe,ne),ue.append(oe,j,B,ge),document.body.appendChild(ue)}u?(j.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",D)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function nw(){var r;const e=(r=lh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rw(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function sw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aw(){const r=$t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ow(){return!nw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lw(){try{return typeof indexedDB=="object"}catch{return!1}}function uw(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="FirebaseError";class Xi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=cw,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gl.prototype.create)}}class Gl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?hw(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Xi(o,m,s)}}function hw(r,e){return r.replace(dw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const dw=/\{\$([^}]+)}/g;function fw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ks(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],d=e[o];if(Hv(u)&&Hv(d)){if(!ks(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Hv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function bl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function El(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function mw(r,e){const n=new gw(r,e);return n.subscribe.bind(n)}class gw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");pw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Bf),o.error===void 0&&(o.error=Bf),o.complete===void 0&&(o.complete=Bf);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pw(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Bf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(r){return r&&r._delegate?r._delegate:r}class Vs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Zx;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(_w(e))try{this.getOrInitializeService({instanceIdentifier:Ds})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ds){return this.instances.has(e)}getOptions(e=Ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:vw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ds){return this.component?this.component.multipleInstances?e:Ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vw(r){return r===Ds?void 0:r}function _w(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new yw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ve||(Ve={}));const Ew={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},Tw=Ve.INFO,xw={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},ww=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=xw[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rm{constructor(e){this.name=e,this._logLevel=Tw,this._logHandler=ww,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ew[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const Aw=(r,e)=>e.some(n=>r instanceof n);let Gv,Fv;function Sw(){return Gv||(Gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rw(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S_=new WeakMap,Jf=new WeakMap,R_=new WeakMap,qf=new WeakMap,Im=new WeakMap;function Iw(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",d)},u=()=>{n(Or(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&S_.set(n,r)}).catch(()=>{}),Im.set(e,r),e}function Cw(r){if(Jf.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",d),r.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",d),r.addEventListener("abort",d)});Jf.set(r,e)}let em={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Jf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||R_.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Nw(r){em=r(em)}function Dw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Hf(this),e,...n);return R_.set(s,e.sort?e.sort():[e]),Or(s)}:Rw().includes(r)?function(...e){return r.apply(Hf(this),e),Or(S_.get(this))}:function(...e){return Or(r.apply(Hf(this),e))}}function Ow(r){return typeof r=="function"?Dw(r):(r instanceof IDBTransaction&&Cw(r),Aw(r,Sw())?new Proxy(r,em):r)}function Or(r){if(r instanceof IDBRequest)return Iw(r);if(qf.has(r))return qf.get(r);const e=Ow(r);return e!==r&&(qf.set(r,e),Im.set(e,r)),e}const Hf=r=>Im.get(r);function kw(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(r,e),m=Or(d);return s&&d.addEventListener("upgradeneeded",y=>{s(Or(d.result),y.oldVersion,y.newVersion,Or(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{u&&y.addEventListener("close",()=>u()),o&&y.addEventListener("versionchange",v=>o(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const Vw=["get","getKey","getAll","getAllKeys","count"],Mw=["put","add","delete","clear"],Gf=new Map;function Kv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Gf.get(e))return Gf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Mw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Vw.includes(n)))return;const u=async function(d,...m){const y=this.transaction(d,o?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),o&&y.done]))[0]};return Gf.set(e,u),u}Nw(r=>({...r,get:(e,n,s)=>Kv(e,n)||r.get(e,n,s),has:(e,n)=>!!Kv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Pw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Pw(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tm="@firebase/app",Yv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Rm("@firebase/app"),Uw="@firebase/app-compat",Lw="@firebase/analytics-compat",zw="@firebase/analytics",Bw="@firebase/app-check-compat",qw="@firebase/app-check",Hw="@firebase/auth",Gw="@firebase/auth-compat",Fw="@firebase/database",Kw="@firebase/data-connect",Yw="@firebase/database-compat",Qw="@firebase/functions",Xw="@firebase/functions-compat",$w="@firebase/installations",Zw="@firebase/installations-compat",Ww="@firebase/messaging",Jw="@firebase/messaging-compat",eA="@firebase/performance",tA="@firebase/performance-compat",nA="@firebase/remote-config",iA="@firebase/remote-config-compat",rA="@firebase/storage",sA="@firebase/storage-compat",aA="@firebase/firestore",oA="@firebase/ai",lA="@firebase/firestore-compat",uA="firebase",cA="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",hA={[tm]:"fire-core",[Uw]:"fire-core-compat",[zw]:"fire-analytics",[Lw]:"fire-analytics-compat",[qw]:"fire-app-check",[Bw]:"fire-app-check-compat",[Hw]:"fire-auth",[Gw]:"fire-auth-compat",[Fw]:"fire-rtdb",[Kw]:"fire-data-connect",[Yw]:"fire-rtdb-compat",[Qw]:"fire-fn",[Xw]:"fire-fn-compat",[$w]:"fire-iid",[Zw]:"fire-iid-compat",[Ww]:"fire-fcm",[Jw]:"fire-fcm-compat",[eA]:"fire-perf",[tA]:"fire-perf-compat",[nA]:"fire-rc",[iA]:"fire-rc-compat",[rA]:"fire-gcs",[sA]:"fire-gcs-compat",[aA]:"fire-fst",[lA]:"fire-fst-compat",[oA]:"fire-vertex","fire-js":"fire-js",[uA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gc=new Map,dA=new Map,im=new Map;function Qv(r,e){try{r.container.addComponent(e)}catch(n){Fi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Fa(r){const e=r.name;if(im.has(e))return Fi.debug(`There were multiple attempts to register component ${e}.`),!1;im.set(e,r);for(const n of Gc.values())Qv(n,r);for(const n of dA.values())Qv(n,r);return!0}function Cm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function On(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new Gl("app","Firebase",fA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=cA;function I_(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:nm,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw kr.create("bad-app-name",{appName:String(o)});if(n||(n=T_()),!n)throw kr.create("no-options");const u=Gc.get(o);if(u){if(ks(n,u.options)&&ks(s,u.config))return u;throw kr.create("duplicate-app",{appName:o})}const d=new bw(o);for(const y of im.values())d.addComponent(y);const m=new mA(n,s,d);return Gc.set(o,m),m}function C_(r=nm){const e=Gc.get(r);if(!e&&r===nm&&T_())return I_();if(!e)throw kr.create("no-app",{appName:r});return e}function Vr(r,e,n){var s;let o=(s=hA[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fi.warn(m.join(" "));return}Fa(new Vs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="firebase-heartbeat-database",pA=1,Vl="firebase-heartbeat-store";let Ff=null;function N_(){return Ff||(Ff=kw(gA,pA,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(r=>{throw kr.create("idb-open",{originalErrorMessage:r.message})})),Ff}async function yA(r){try{const n=(await N_()).transaction(Vl),s=await n.objectStore(Vl).get(D_(r));return await n.done,s}catch(e){if(e instanceof Xi)Fi.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fi.warn(n.message)}}}async function Xv(r,e){try{const s=(await N_()).transaction(Vl,"readwrite");await s.objectStore(Vl).put(e,D_(r)),await s.done}catch(n){if(n instanceof Xi)Fi.warn(n.message);else{const s=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fi.warn(s.message)}}}function D_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=1024,_A=30;class bA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TA(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=$v();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>_A){const d=xA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Fi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$v(),{heartbeatsToSend:s,unsentEntries:o}=EA(this._heartbeatsCache.heartbeats),u=Hc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Fi.warn(n),""}}}function $v(){return new Date().toISOString().substring(0,10)}function EA(r,e=vA){const n=[];let s=r.slice();for(const o of r){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Zv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Zv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class TA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lw()?uw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Xv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Zv(r){return Hc(JSON.stringify({version:2,heartbeats:r})).length}function xA(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(r){Fa(new Vs("platform-logger",e=>new jw(e),"PRIVATE")),Fa(new Vs("heartbeat",e=>new bA(e),"PRIVATE")),Vr(tm,Yv,r),Vr(tm,Yv,"esm2017"),Vr("fire-js","")}wA("");var Wv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mr,O_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,A){function I(){}I.prototype=A.prototype,k.D=A.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(N,M,U){for(var O=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)O[Et-2]=arguments[Et];return A.prototype[M].apply(N,O)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,A,I){I||(I=0);var N=Array(16);if(typeof A=="string")for(var M=0;16>M;++M)N[M]=A.charCodeAt(I++)|A.charCodeAt(I++)<<8|A.charCodeAt(I++)<<16|A.charCodeAt(I++)<<24;else for(M=0;16>M;++M)N[M]=A[I++]|A[I++]<<8|A[I++]<<16|A[I++]<<24;A=k.g[0],I=k.g[1],M=k.g[2];var U=k.g[3],O=A+(U^I&(M^U))+N[0]+3614090360&4294967295;A=I+(O<<7&4294967295|O>>>25),O=U+(M^A&(I^M))+N[1]+3905402710&4294967295,U=A+(O<<12&4294967295|O>>>20),O=M+(I^U&(A^I))+N[2]+606105819&4294967295,M=U+(O<<17&4294967295|O>>>15),O=I+(A^M&(U^A))+N[3]+3250441966&4294967295,I=M+(O<<22&4294967295|O>>>10),O=A+(U^I&(M^U))+N[4]+4118548399&4294967295,A=I+(O<<7&4294967295|O>>>25),O=U+(M^A&(I^M))+N[5]+1200080426&4294967295,U=A+(O<<12&4294967295|O>>>20),O=M+(I^U&(A^I))+N[6]+2821735955&4294967295,M=U+(O<<17&4294967295|O>>>15),O=I+(A^M&(U^A))+N[7]+4249261313&4294967295,I=M+(O<<22&4294967295|O>>>10),O=A+(U^I&(M^U))+N[8]+1770035416&4294967295,A=I+(O<<7&4294967295|O>>>25),O=U+(M^A&(I^M))+N[9]+2336552879&4294967295,U=A+(O<<12&4294967295|O>>>20),O=M+(I^U&(A^I))+N[10]+4294925233&4294967295,M=U+(O<<17&4294967295|O>>>15),O=I+(A^M&(U^A))+N[11]+2304563134&4294967295,I=M+(O<<22&4294967295|O>>>10),O=A+(U^I&(M^U))+N[12]+1804603682&4294967295,A=I+(O<<7&4294967295|O>>>25),O=U+(M^A&(I^M))+N[13]+4254626195&4294967295,U=A+(O<<12&4294967295|O>>>20),O=M+(I^U&(A^I))+N[14]+2792965006&4294967295,M=U+(O<<17&4294967295|O>>>15),O=I+(A^M&(U^A))+N[15]+1236535329&4294967295,I=M+(O<<22&4294967295|O>>>10),O=A+(M^U&(I^M))+N[1]+4129170786&4294967295,A=I+(O<<5&4294967295|O>>>27),O=U+(I^M&(A^I))+N[6]+3225465664&4294967295,U=A+(O<<9&4294967295|O>>>23),O=M+(A^I&(U^A))+N[11]+643717713&4294967295,M=U+(O<<14&4294967295|O>>>18),O=I+(U^A&(M^U))+N[0]+3921069994&4294967295,I=M+(O<<20&4294967295|O>>>12),O=A+(M^U&(I^M))+N[5]+3593408605&4294967295,A=I+(O<<5&4294967295|O>>>27),O=U+(I^M&(A^I))+N[10]+38016083&4294967295,U=A+(O<<9&4294967295|O>>>23),O=M+(A^I&(U^A))+N[15]+3634488961&4294967295,M=U+(O<<14&4294967295|O>>>18),O=I+(U^A&(M^U))+N[4]+3889429448&4294967295,I=M+(O<<20&4294967295|O>>>12),O=A+(M^U&(I^M))+N[9]+568446438&4294967295,A=I+(O<<5&4294967295|O>>>27),O=U+(I^M&(A^I))+N[14]+3275163606&4294967295,U=A+(O<<9&4294967295|O>>>23),O=M+(A^I&(U^A))+N[3]+4107603335&4294967295,M=U+(O<<14&4294967295|O>>>18),O=I+(U^A&(M^U))+N[8]+1163531501&4294967295,I=M+(O<<20&4294967295|O>>>12),O=A+(M^U&(I^M))+N[13]+2850285829&4294967295,A=I+(O<<5&4294967295|O>>>27),O=U+(I^M&(A^I))+N[2]+4243563512&4294967295,U=A+(O<<9&4294967295|O>>>23),O=M+(A^I&(U^A))+N[7]+1735328473&4294967295,M=U+(O<<14&4294967295|O>>>18),O=I+(U^A&(M^U))+N[12]+2368359562&4294967295,I=M+(O<<20&4294967295|O>>>12),O=A+(I^M^U)+N[5]+4294588738&4294967295,A=I+(O<<4&4294967295|O>>>28),O=U+(A^I^M)+N[8]+2272392833&4294967295,U=A+(O<<11&4294967295|O>>>21),O=M+(U^A^I)+N[11]+1839030562&4294967295,M=U+(O<<16&4294967295|O>>>16),O=I+(M^U^A)+N[14]+4259657740&4294967295,I=M+(O<<23&4294967295|O>>>9),O=A+(I^M^U)+N[1]+2763975236&4294967295,A=I+(O<<4&4294967295|O>>>28),O=U+(A^I^M)+N[4]+1272893353&4294967295,U=A+(O<<11&4294967295|O>>>21),O=M+(U^A^I)+N[7]+4139469664&4294967295,M=U+(O<<16&4294967295|O>>>16),O=I+(M^U^A)+N[10]+3200236656&4294967295,I=M+(O<<23&4294967295|O>>>9),O=A+(I^M^U)+N[13]+681279174&4294967295,A=I+(O<<4&4294967295|O>>>28),O=U+(A^I^M)+N[0]+3936430074&4294967295,U=A+(O<<11&4294967295|O>>>21),O=M+(U^A^I)+N[3]+3572445317&4294967295,M=U+(O<<16&4294967295|O>>>16),O=I+(M^U^A)+N[6]+76029189&4294967295,I=M+(O<<23&4294967295|O>>>9),O=A+(I^M^U)+N[9]+3654602809&4294967295,A=I+(O<<4&4294967295|O>>>28),O=U+(A^I^M)+N[12]+3873151461&4294967295,U=A+(O<<11&4294967295|O>>>21),O=M+(U^A^I)+N[15]+530742520&4294967295,M=U+(O<<16&4294967295|O>>>16),O=I+(M^U^A)+N[2]+3299628645&4294967295,I=M+(O<<23&4294967295|O>>>9),O=A+(M^(I|~U))+N[0]+4096336452&4294967295,A=I+(O<<6&4294967295|O>>>26),O=U+(I^(A|~M))+N[7]+1126891415&4294967295,U=A+(O<<10&4294967295|O>>>22),O=M+(A^(U|~I))+N[14]+2878612391&4294967295,M=U+(O<<15&4294967295|O>>>17),O=I+(U^(M|~A))+N[5]+4237533241&4294967295,I=M+(O<<21&4294967295|O>>>11),O=A+(M^(I|~U))+N[12]+1700485571&4294967295,A=I+(O<<6&4294967295|O>>>26),O=U+(I^(A|~M))+N[3]+2399980690&4294967295,U=A+(O<<10&4294967295|O>>>22),O=M+(A^(U|~I))+N[10]+4293915773&4294967295,M=U+(O<<15&4294967295|O>>>17),O=I+(U^(M|~A))+N[1]+2240044497&4294967295,I=M+(O<<21&4294967295|O>>>11),O=A+(M^(I|~U))+N[8]+1873313359&4294967295,A=I+(O<<6&4294967295|O>>>26),O=U+(I^(A|~M))+N[15]+4264355552&4294967295,U=A+(O<<10&4294967295|O>>>22),O=M+(A^(U|~I))+N[6]+2734768916&4294967295,M=U+(O<<15&4294967295|O>>>17),O=I+(U^(M|~A))+N[13]+1309151649&4294967295,I=M+(O<<21&4294967295|O>>>11),O=A+(M^(I|~U))+N[4]+4149444226&4294967295,A=I+(O<<6&4294967295|O>>>26),O=U+(I^(A|~M))+N[11]+3174756917&4294967295,U=A+(O<<10&4294967295|O>>>22),O=M+(A^(U|~I))+N[2]+718787259&4294967295,M=U+(O<<15&4294967295|O>>>17),O=I+(U^(M|~A))+N[9]+3951481745&4294967295,k.g[0]=k.g[0]+A&4294967295,k.g[1]=k.g[1]+(M+(O<<21&4294967295|O>>>11))&4294967295,k.g[2]=k.g[2]+M&4294967295,k.g[3]=k.g[3]+U&4294967295}s.prototype.u=function(k,A){A===void 0&&(A=k.length);for(var I=A-this.blockSize,N=this.B,M=this.h,U=0;U<A;){if(M==0)for(;U<=I;)o(this,k,U),U+=this.blockSize;if(typeof k=="string"){for(;U<A;)if(N[M++]=k.charCodeAt(U++),M==this.blockSize){o(this,N),M=0;break}}else for(;U<A;)if(N[M++]=k[U++],M==this.blockSize){o(this,N),M=0;break}}this.h=M,this.o+=A},s.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var A=1;A<k.length-8;++A)k[A]=0;var I=8*this.o;for(A=k.length-8;A<k.length;++A)k[A]=I&255,I/=256;for(this.u(k),k=Array(16),A=I=0;4>A;++A)for(var N=0;32>N;N+=8)k[I++]=this.g[A]>>>N&255;return k};function u(k,A){var I=m;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=A(k)}function d(k,A){this.h=A;for(var I=[],N=!0,M=k.length-1;0<=M;M--){var U=k[M]|0;N&&U==A||(I[M]=U,N=!1)}this.g=I}var m={};function y(k){return-128<=k&&128>k?u(k,function(A){return new d([A|0],0>A?-1:0)}):new d([k|0],0>k?-1:0)}function v(k){if(isNaN(k)||!isFinite(k))return S;if(0>k)return B(v(-k));for(var A=[],I=1,N=0;k>=I;N++)A[N]=k/I|0,I*=4294967296;return new d(A,0)}function E(k,A){if(k.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(k.charAt(0)=="-")return B(E(k.substring(1),A));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=v(Math.pow(A,8)),N=S,M=0;M<k.length;M+=8){var U=Math.min(8,k.length-M),O=parseInt(k.substring(M,M+U),A);8>U?(U=v(Math.pow(A,U)),N=N.j(U).add(v(O))):(N=N.j(I),N=N.add(v(O)))}return N}var S=y(0),x=y(1),D=y(16777216);r=d.prototype,r.m=function(){if(Y(this))return-B(this).m();for(var k=0,A=1,I=0;I<this.g.length;I++){var N=this.i(I);k+=(0<=N?N:4294967296+N)*A,A*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(j(this))return"0";if(Y(this))return"-"+B(this).toString(k);for(var A=v(Math.pow(k,6)),I=this,N="";;){var M=ge(I,A).g;I=ne(I,M.j(A));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=M,j(I))return U+N;for(;6>U.length;)U="0"+U;N=U+N}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function j(k){if(k.h!=0)return!1;for(var A=0;A<k.g.length;A++)if(k.g[A]!=0)return!1;return!0}function Y(k){return k.h==-1}r.l=function(k){return k=ne(this,k),Y(k)?-1:j(k)?0:1};function B(k){for(var A=k.g.length,I=[],N=0;N<A;N++)I[N]=~k.g[N];return new d(I,~k.h).add(x)}r.abs=function(){return Y(this)?B(this):this},r.add=function(k){for(var A=Math.max(this.g.length,k.g.length),I=[],N=0,M=0;M<=A;M++){var U=N+(this.i(M)&65535)+(k.i(M)&65535),O=(U>>>16)+(this.i(M)>>>16)+(k.i(M)>>>16);N=O>>>16,U&=65535,O&=65535,I[M]=O<<16|U}return new d(I,I[I.length-1]&-2147483648?-1:0)};function ne(k,A){return k.add(B(A))}r.j=function(k){if(j(this)||j(k))return S;if(Y(this))return Y(k)?B(this).j(B(k)):B(B(this).j(k));if(Y(k))return B(this.j(B(k)));if(0>this.l(D)&&0>k.l(D))return v(this.m()*k.m());for(var A=this.g.length+k.g.length,I=[],N=0;N<2*A;N++)I[N]=0;for(N=0;N<this.g.length;N++)for(var M=0;M<k.g.length;M++){var U=this.i(N)>>>16,O=this.i(N)&65535,Et=k.i(M)>>>16,tt=k.i(M)&65535;I[2*N+2*M]+=O*tt,oe(I,2*N+2*M),I[2*N+2*M+1]+=U*tt,oe(I,2*N+2*M+1),I[2*N+2*M+1]+=O*Et,oe(I,2*N+2*M+1),I[2*N+2*M+2]+=U*Et,oe(I,2*N+2*M+2)}for(N=0;N<A;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=A;N<2*A;N++)I[N]=0;return new d(I,0)};function oe(k,A){for(;(k[A]&65535)!=k[A];)k[A+1]+=k[A]>>>16,k[A]&=65535,A++}function ue(k,A){this.g=k,this.h=A}function ge(k,A){if(j(A))throw Error("division by zero");if(j(k))return new ue(S,S);if(Y(k))return A=ge(B(k),A),new ue(B(A.g),B(A.h));if(Y(A))return A=ge(k,B(A)),new ue(B(A.g),A.h);if(30<k.g.length){if(Y(k)||Y(A))throw Error("slowDivide_ only works with positive integers.");for(var I=x,N=A;0>=N.l(k);)I=K(I),N=K(N);var M=te(I,1),U=te(N,1);for(N=te(N,2),I=te(I,2);!j(N);){var O=U.add(N);0>=O.l(k)&&(M=M.add(I),U=O),N=te(N,1),I=te(I,1)}return A=ne(k,M.j(A)),new ue(M,A)}for(M=S;0<=k.l(A);){for(I=Math.max(1,Math.floor(k.m()/A.m())),N=Math.ceil(Math.log(I)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),U=v(I),O=U.j(A);Y(O)||0<O.l(k);)I-=N,U=v(I),O=U.j(A);j(U)&&(U=x),M=M.add(U),k=ne(k,O)}return new ue(M,k)}r.A=function(k){return ge(this,k).h},r.and=function(k){for(var A=Math.max(this.g.length,k.g.length),I=[],N=0;N<A;N++)I[N]=this.i(N)&k.i(N);return new d(I,this.h&k.h)},r.or=function(k){for(var A=Math.max(this.g.length,k.g.length),I=[],N=0;N<A;N++)I[N]=this.i(N)|k.i(N);return new d(I,this.h|k.h)},r.xor=function(k){for(var A=Math.max(this.g.length,k.g.length),I=[],N=0;N<A;N++)I[N]=this.i(N)^k.i(N);return new d(I,this.h^k.h)};function K(k){for(var A=k.g.length+1,I=[],N=0;N<A;N++)I[N]=k.i(N)<<1|k.i(N-1)>>>31;return new d(I,k.h)}function te(k,A){var I=A>>5;A%=32;for(var N=k.g.length-I,M=[],U=0;U<N;U++)M[U]=0<A?k.i(U+I)>>>A|k.i(U+I+1)<<32-A:k.i(U+I);return new d(M,k.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,O_=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=E,Mr=d}).apply(typeof Wv<"u"?Wv:typeof self<"u"?self:typeof window<"u"?window:{});var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var k_,Tl,V_,kc,rm,M_,j_,P_;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sc=="object"&&Sc];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,p){if(p)e:{var _=s;c=c.split(".");for(var w=0;w<c.length-1;w++){var L=c[w];if(!(L in _))break e;_=_[L]}c=c[c.length-1],w=_[c],p=p(w),p!=w&&p!=null&&e(_,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var _=0,w=!1,L={next:function(){if(!w&&_<c.length){var F=_++;return{value:p(F,c[F]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function v(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function E(c,p,_){return c.call.apply(c.bind,arguments)}function S(c,p,_){if(!c)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function x(c,p,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:S,x.apply(null,arguments)}function D(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),c.apply(this,w)}}function j(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(w,L,F){for(var ae=Array(arguments.length-2),je=2;je<arguments.length;je++)ae[je-2]=arguments[je];return p.prototype[L].apply(w,ae)}}function Y(c){const p=c.length;if(0<p){const _=Array(p);for(let w=0;w<p;w++)_[w]=c[w];return _}return[]}function B(c,p){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(y(w)){const L=c.length||0,F=w.length||0;c.length=L+F;for(let ae=0;ae<F;ae++)c[L+ae]=w[ae]}else c.push(w)}}class ne{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function oe(c){return/^[\s\xa0]*$/.test(c)}function ue(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function ge(c){return ge[" "](c),c}ge[" "]=function(){};var K=ue().indexOf("Gecko")!=-1&&!(ue().toLowerCase().indexOf("webkit")!=-1&&ue().indexOf("Edge")==-1)&&!(ue().indexOf("Trident")!=-1||ue().indexOf("MSIE")!=-1)&&ue().indexOf("Edge")==-1;function te(c,p,_){for(const w in c)p.call(_,c[w],w,c)}function k(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function A(c){const p={};for(const _ in c)p[_]=c[_];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(c,p){let _,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(_ in w)c[_]=w[_];for(let F=0;F<I.length;F++)_=I[F],Object.prototype.hasOwnProperty.call(w,_)&&(c[_]=w[_])}}function M(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function U(c){m.setTimeout(()=>{throw c},0)}function O(){var c=se;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class Et{constructor(){this.h=this.g=null}add(p,_){const w=tt.get();w.set(p,_),this.h?this.h.next=w:this.g=w,this.h=w}}var tt=new ne(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let le,pe=!1,se=new Et,R=()=>{const c=m.Promise.resolve(void 0);le=()=>{c.then(X)}};var X=()=>{for(var c;c=O();){try{c.h.call(c.g)}catch(_){U(_)}var p=tt;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}pe=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var me=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,p),m.removeEventListener("test",_,p)}catch{}return c}();function Re(c,p){if(ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,w=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(K){e:{try{ge(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:_e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}j(Re,ie);var _e={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),We=0;function Gn(c,p,_,w,L){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!w,this.ha=L,this.key=++We,this.da=this.fa=!1}function $i(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function gi(c){this.src=c,this.g={},this.h=0}gi.prototype.add=function(c,p,_,w,L){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var ae=Xr(c,p,w,L);return-1<ae?(p=c[ae],_||(p.fa=!1)):(p=new Gn(p,this.src,F,!!w,L),p.fa=_,c.push(p)),p};function Qr(c,p){var _=p.type;if(_ in c.g){var w=c.g[_],L=Array.prototype.indexOf.call(w,p,void 0),F;(F=0<=L)&&Array.prototype.splice.call(w,L,1),F&&($i(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Xr(c,p,_,w){for(var L=0;L<c.length;++L){var F=c[L];if(!F.da&&F.listener==p&&F.capture==!!_&&F.ha==w)return L}return-1}var $r="closure_lm_"+(1e6*Math.random()|0),lo={};function nu(c,p,_,w,L){if(Array.isArray(p)){for(var F=0;F<p.length;F++)nu(c,p[F],_,w,L);return null}return _=iu(_),c&&c[ct]?c.K(p,_,v(w)?!!w.capture:!1,L):_n(c,p,_,!1,w,L)}function _n(c,p,_,w,L,F){if(!p)throw Error("Invalid event type");var ae=v(L)?!!L.capture:!!L,je=Gs(c);if(je||(c[$r]=je=new gi(c)),_=je.add(p,_,w,ae,F),_.proxy)return _;if(w=Vh(),_.proxy=w,w.src=c,w.listener=_,c.addEventListener)me||(L=ae),L===void 0&&(L=!1),c.addEventListener(p.toString(),w,L);else if(c.attachEvent)c.attachEvent(Zr(p.toString()),w);else if(c.addListener&&c.removeListener)c.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Vh(){function c(_){return p.call(c.src,c.listener,_)}const p=Mh;return c}function uo(c,p,_,w,L){if(Array.isArray(p))for(var F=0;F<p.length;F++)uo(c,p[F],_,w,L);else w=v(w)?!!w.capture:!!w,_=iu(_),c&&c[ct]?(c=c.i,p=String(p).toString(),p in c.g&&(F=c.g[p],_=Xr(F,_,w,L),-1<_&&($i(F[_]),Array.prototype.splice.call(F,_,1),F.length==0&&(delete c.g[p],c.h--)))):c&&(c=Gs(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Xr(p,_,w,L)),(_=-1<c?p[c]:null)&&Hs(_))}function Hs(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[ct])Qr(p.i,c);else{var _=c.type,w=c.proxy;p.removeEventListener?p.removeEventListener(_,w,c.capture):p.detachEvent?p.detachEvent(Zr(_),w):p.addListener&&p.removeListener&&p.removeListener(w),(_=Gs(p))?(Qr(_,c),_.h==0&&(_.src=null,p[$r]=null)):$i(c)}}}function Zr(c){return c in lo?lo[c]:lo[c]="on"+c}function Mh(c,p){if(c.da)c=!0;else{p=new Re(p,this);var _=c.listener,w=c.ha||c.src;c.fa&&Hs(c),c=_.call(w,p)}return c}function Gs(c){return c=c[$r],c instanceof gi?c:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function iu(c){return typeof c=="function"?c:(c[co]||(c[co]=function(p){return c.handleEvent(p)}),c[co])}function at(){re.call(this),this.i=new gi(this),this.M=this,this.F=null}j(at,re),at.prototype[ct]=!0,at.prototype.removeEventListener=function(c,p,_,w){uo(this,c,p,_,w)};function Ge(c,p){var _,w=c.F;if(w)for(_=[];w;w=w.F)_.push(w);if(c=c.M,w=p.type||p,typeof p=="string")p=new ie(p,c);else if(p instanceof ie)p.target=p.target||c;else{var L=p;p=new ie(w,c),N(p,L)}if(L=!0,_)for(var F=_.length-1;0<=F;F--){var ae=p.g=_[F];L=un(ae,w,!0,p)&&L}if(ae=p.g=c,L=un(ae,w,!0,p)&&L,L=un(ae,w,!1,p)&&L,_)for(F=0;F<_.length;F++)ae=p.g=_[F],L=un(ae,w,!1,p)&&L}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var _=c.g[p],w=0;w<_.length;w++)$i(_[w]);delete c.g[p],c.h--}}this.F=null},at.prototype.K=function(c,p,_,w){return this.i.add(String(c),p,!1,_,w)},at.prototype.L=function(c,p,_,w){return this.i.add(String(c),p,!0,_,w)};function un(c,p,_,w){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,F=0;F<p.length;++F){var ae=p[F];if(ae&&!ae.da&&ae.capture==_){var je=ae.listener,xt=ae.ha||ae.src;ae.fa&&Qr(c.i,ae),L=je.call(xt,w)!==!1&&L}}return L&&!w.defaultPrevented}function Gt(c,p,_){if(typeof c=="function")_&&(c=x(c,_));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function ru(c){c.g=Gt(()=>{c.g=null,c.i&&(c.i=!1,ru(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class jh extends re{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ru(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wr(c){re.call(this),this.h=c,this.g={}}j(Wr,re);var Jr=[];function es(c){te(c.g,function(p,_){this.g.hasOwnProperty(_)&&Hs(p)},c),c.g={}}Wr.prototype.N=function(){Wr.aa.N.call(this),es(this)},Wr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vn=m.JSON.stringify,Fs=m.JSON.parse,ts=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function ho(){}ho.prototype.h=null;function fo(c){return c.h||(c.h=c.i())}function mo(){}var pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yi(){ie.call(this,"d")}j(yi,ie);function go(){ie.call(this,"c")}j(go,ie);var Fn={},po=null;function Zi(){return po=po||new at}Fn.La="serverreachability";function Ks(c){ie.call(this,Fn.La,c)}j(Ks,ie);function Wi(c){const p=Zi();Ge(p,new Ks(p))}Fn.STAT_EVENT="statevent";function su(c,p){ie.call(this,Fn.STAT_EVENT,c),this.stat=p}j(su,ie);function nt(c){const p=Zi();Ge(p,new su(p,c))}Fn.Ma="timingevent";function Tt(c,p){ie.call(this,Fn.Ma,c),this.size=p}j(Tt,ie);function gt(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function yo(c,p,_,w,L,F){c.info(function(){if(c.g)if(F)for(var ae="",je=F.split("&"),xt=0;xt<je.length;xt++){var Pe=je[xt].split("=");if(1<Pe.length){var Nt=Pe[0];Pe=Pe[1];var wt=Nt.split("_");ae=2<=wt.length&&wt[1]=="type"?ae+(Nt+"="+Pe+"&"):ae+(Nt+"=redacted&")}}else ae=null;else ae=F;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+p+`
`+_+`
`+ae})}function Ph(c,p,_,w,L,F,ae){c.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+p+`
`+_+`
`+F+" "+ae})}function Ji(c,p,_,w){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+ns(c,_)+(w?" "+w:"")})}function au(c,p){c.info(function(){return"TIMEOUT: "+p})}bn.prototype.info=function(){};function ns(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var w=_[c];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var ae=1;ae<L.length;ae++)L[ae]=""}}}}return Vn(_)}catch{return p}}var er={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kn;function Yn(){}j(Yn,ho),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},Kn=new Yn;function Zt(c,p,_,w){this.j=c,this.i=p,this.l=_,this.R=w||1,this.U=new Wr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ht}function ht(){this.i=null,this.g="",this.h=!1}var vo={},Ys={};function Mn(c,p,_){c.L=1,c.v=os(cn(p)),c.m=_,c.P=!0,_i(c,null)}function _i(c,p){c.F=Date.now(),is(c),c.A=cn(c.v);var _=c.A,w=c.R;Array.isArray(w)||(w=[String(w)]),wo(_.i,"t",w),c.C=0,_=c.j.J,c.h=new ht,c.g=Tu(c.j,_?p:null,!c.m),0<c.O&&(c.M=new jh(x(c.Y,c,c.g),c.O)),p=c.U,_=c.g,w=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Jr[0]=L.toString()),L=Jr);for(var F=0;F<L.length;F++){var ae=nu(_,L[F],w||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=c.H?A(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),Wi(),yo(c.i,c.u,c.A,c.l,c.R,c.m)}Zt.prototype.ca=function(c){c=c.target;const p=this.M;p&&wn(c)==3?p.j():this.Y(c)},Zt.prototype.Y=function(c){try{if(c==this.g)e:{const wt=wn(this.g);var p=this.g.Ba();const Ri=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||mu(this.g)))){this.J||wt!=4||p==7||(p==8||0>=Ri?Wi(3):Wi(2)),tr(this);var _=this.g.Z();this.X=_;t:if(ou(this)){var w=mu(this.g);c="";var L=w.length,F=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jt(this),Qn(this);var ae="";break t}this.h.i=new m.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(w[p],{stream:!(F&&p==L-1)});w.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=_==200,Ph(this.i,this.u,this.A,this.l,this.R,wt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,xt=this.g;if((je=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oe(je)){var Pe=je;break t}}Pe=null}if(_=Pe)Ji(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rs(this,_);else{this.o=!1,this.s=3,nt(12),jt(this),Qn(this);break e}}if(this.P){_=!0;let Pt;for(;!this.J&&this.C<ae.length;)if(Pt=lu(this,ae),Pt==Ys){wt==4&&(this.s=4,nt(14),_=!1),Ji(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==vo){this.s=4,nt(15),Ji(this.i,this.l,ae,"[Invalid Chunk]"),_=!1;break}else Ji(this.i,this.l,Pt,null),rs(this,Pt);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||ae.length!=0||this.h.h||(this.s=1,nt(16),_=!1),this.o=this.o&&_,!_)Ji(this.i,this.l,ae,"[Invalid Chunked Response]"),jt(this),Qn(this);else if(0<ae.length&&!this.W){this.W=!0;var Nt=this.j;Nt.g==this&&Nt.ba&&!Nt.M&&(Nt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),gs(Nt),Nt.M=!0,nt(11))}}else Ji(this.i,this.l,ae,null),rs(this,ae);wt==4&&jt(this),this.o&&!this.J&&(wt==4?_u(this.j,this):(this.o=!1,is(this)))}else qh(this.g),_==400&&0<ae.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),jt(this),Qn(this)}}}catch{}finally{}};function ou(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function lu(c,p){var _=c.C,w=p.indexOf(`
`,_);return w==-1?Ys:(_=Number(p.substring(_,w)),isNaN(_)?vo:(w+=1,w+_>p.length?Ys:(p=p.slice(w,w+_),c.C=w+_,p)))}Zt.prototype.cancel=function(){this.J=!0,jt(this)};function is(c){c.S=Date.now()+c.I,uu(c,c.I)}function uu(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=gt(x(c.ba,c),p)}function tr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}Zt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(au(this.i,this.A),this.L!=2&&(Wi(),nt(17)),jt(this),this.s=2,Qn(this)):uu(this,this.S-c)};function Qn(c){c.j.G==0||c.J||_u(c.j,c)}function jt(c){tr(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,es(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function rs(c,p){try{var _=c.j;if(_.G!=0&&(_.g==c||_o(_.h,c))){if(!c.K&&_o(_.h,c)&&_.G==3){try{var w=_.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)sa(_),ia(_);else break e;Co(_),nt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=gt(x(_.Za,_),6e3));if(1>=Xs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Si(_,11)}else if((c.K||_.g==c)&&sa(_),!oe(p))for(L=_.Da.g.parse(p),p=0;p<L.length;p++){let Pe=L[p];if(_.T=Pe[0],Pe=Pe[1],_.G==2)if(Pe[0]=="c"){_.K=Pe[1],_.ia=Pe[2];const Nt=Pe[3];Nt!=null&&(_.la=Nt,_.j.info("VER="+_.la));const wt=Pe[4];wt!=null&&(_.Aa=wt,_.j.info("SVER="+_.Aa));const Ri=Pe[5];Ri!=null&&typeof Ri=="number"&&0<Ri&&(w=1.5*Ri,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const Pt=c.g;if(Pt){const ti=Pt.g?Pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ti){var F=w.h;F.g||ti.indexOf("spdy")==-1&&ti.indexOf("quic")==-1&&ti.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&($s(F,F.h),F.h=null))}if(w.D){const Do=Pt.g?Pt.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(w.ya=Do,Ye(w.I,w.D,Do))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var ae=c;if(w.qa=Eu(w,w.J?w.ia:null,w.W),ae.K){Wt(w.h,ae);var je=ae,xt=w.L;xt&&(je.I=xt),je.B&&(tr(je),is(je)),w.g=ae}else yu(w);0<_.i.length&&ra(_)}else Pe[0]!="stop"&&Pe[0]!="close"||Si(_,7);else _.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Si(_,7):Ro(_):Pe[0]!="noop"&&_.l&&_.l.ta(Pe),_.v=0)}}Wi(4)}catch{}}var cu=class{constructor(c,p){this.g=c,this.map=p}};function bi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qs(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Xs(c){return c.h?1:c.g?c.g.size:0}function _o(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function $s(c,p){c.g?c.g.add(p):c.h=p}function Wt(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}bi.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function bo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return Y(c.i)}function Uh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(y(c)){for(var p=[],_=c.length,w=0;w<_;w++)p.push(c[w]);return p}p=[],_=0;for(w in c)p[_++]=c[w];return p}function Zs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(y(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const w in c)p[_++]=w;return p}}}function Eo(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(y(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var _=Zs(c),w=Uh(c),L=w.length,F=0;F<L;F++)p.call(void 0,w[F],_&&_[F],c)}var ss=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lh(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var w=c[_].indexOf("="),L=null;if(0<=w){var F=c[_].substring(0,w);L=c[_].substring(w+1)}else F=c[_];p(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function pt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof pt){this.h=c.h,as(this,c.j),this.o=c.o,this.g=c.g,nr(this,c.s),this.l=c.l;var p=c.i,_=new Ti;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Ei(this,_),this.m=c.m}else c&&(p=String(c).match(ss))?(this.h=!1,as(this,p[1]||"",!0),this.o=En(p[2]||""),this.g=En(p[3]||"",!0),nr(this,p[4]),this.l=En(p[5]||"",!0),Ei(this,p[6]||"",!0),this.m=En(p[7]||"")):(this.h=!1,this.i=new Ti(null,this.h))}pt.prototype.toString=function(){var c=[],p=this.j;p&&c.push(ls(p,To,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(ls(p,To,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ls(_,_.charAt(0)=="/"?zh:xo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ls(_,Ws)),c.join("")};function cn(c){return new pt(c)}function as(c,p,_){c.j=_?En(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function nr(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Ei(c,p,_){p instanceof Ti?(c.i=p,du(c.i,c.h)):(_||(p=ls(p,Bh)),c.i=new Ti(p,c.h))}function Ye(c,p,_){c.i.set(p,_)}function os(c){return Ye(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function En(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ls(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,hu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function hu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var To=/[#\/\?@]/g,xo=/[#\?:]/g,zh=/[#\?]/g,Bh=/[#\?@]/g,Ws=/#/g;function Ti(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Tn(c){c.g||(c.g=new Map,c.h=0,c.i&&Lh(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}r=Ti.prototype,r.add=function(c,p){Tn(this),this.i=null,c=Xn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function xi(c,p){Tn(c),p=Xn(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function wi(c,p){return Tn(c),p=Xn(c,p),c.g.has(p)}r.forEach=function(c,p){Tn(this),this.g.forEach(function(_,w){_.forEach(function(L){c.call(p,L,w,this)},this)},this)},r.na=function(){Tn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let w=0;w<p.length;w++){const L=c[w];for(let F=0;F<L.length;F++)_.push(p[w])}return _},r.V=function(c){Tn(this);let p=[];if(typeof c=="string")wi(this,c)&&(p=p.concat(this.g.get(Xn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},r.set=function(c,p){return Tn(this),this.i=null,c=Xn(this,c),wi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},r.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function wo(c,p,_){xi(c,p),0<_.length&&(c.i=null,c.g.set(Xn(c,p),Y(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var w=p[_];const F=encodeURIComponent(String(w)),ae=this.V(w);for(w=0;w<ae.length;w++){var L=F;ae[w]!==""&&(L+="="+encodeURIComponent(String(ae[w]))),c.push(L)}}return this.i=c.join("&")};function Xn(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function du(c,p){p&&!c.j&&(Tn(c),c.i=null,c.g.forEach(function(_,w){var L=w.toLowerCase();w!=L&&(xi(this,w),wo(this,L,_))},c)),c.j=p}function us(c,p){const _=new bn;if(m.Image){const w=new Image;w.onload=D(xn,_,"TestLoadImage: loaded",!0,p,w),w.onerror=D(xn,_,"TestLoadImage: error",!1,p,w),w.onabort=D(xn,_,"TestLoadImage: abort",!1,p,w),w.ontimeout=D(xn,_,"TestLoadImage: timeout",!1,p,w),m.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=c}else p(!1)}function jn(c,p){const _=new bn,w=new AbortController,L=setTimeout(()=>{w.abort(),xn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:w.signal}).then(F=>{clearTimeout(L),F.ok?xn(_,"TestPingServer: ok",!0,p):xn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),xn(_,"TestPingServer: error",!1,p)})}function xn(c,p,_,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(_)}catch{}}function cs(){this.g=new ts}function $n(c,p,_){const w=_||"";try{Eo(c,function(L,F){let ae=L;v(L)&&(ae=Vn(L)),p.push(w+F+"="+encodeURIComponent(ae))})}catch(L){throw p.push(w+"type="+encodeURIComponent("_badmap")),L}}function ir(c){this.l=c.Ub||null,this.j=c.eb||!1}j(ir,ho),ir.prototype.g=function(){return new Ai(this.l,this.j)},ir.prototype.i=function(c){return function(){return c}}({});function Ai(c,p){at.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}j(Ai,at),r=Ai.prototype,r.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Wn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zn(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ao(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ao(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Zn(this):Wn(this),this.readyState==3&&Ao(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Zn(this))},r.Qa=function(c){this.g&&(this.response=c,Zn(this))},r.ga=function(){this.g&&Zn(this)};function Zn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Wn(c)}r.setRequestHeader=function(c,p){this.u.append(c,p)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function Wn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function So(c){let p="";return te(c,function(_,w){p+=w,p+=":",p+=_,p+=`\r
`}),p}function Ct(c,p,_){e:{for(w in _){var w=!1;break e}w=!0}w||(_=So(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):Ye(c,p,_))}function qe(c){at.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}j(qe,at);var Js=/^https?$/i,hs=["POST","PUT"];r=qe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,p,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kn.g(),this.v=this.o?fo(this.o):fo(Kn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(F){fu(this,F);return}if(c=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)_.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const F of w.keys())_.set(F,w.get(F));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(F=>F.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(hs,p,void 0))||w||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,ae]of _)this.g.setRequestHeader(F,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ds(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){fu(this,F)}};function fu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,ea(c),Jn(c)}function ea(c){c.A||(c.A=!0,Ge(c,"complete"),Ge(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ge(this,"complete"),Ge(this,"abort"),Jn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jn(this,!0)),qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ta(this):this.bb())},r.bb=function(){ta(this)};function ta(c){if(c.h&&typeof d<"u"&&(!c.v[1]||wn(c)!=4||c.Z()!=2)){if(c.u&&wn(c)==4)Gt(c.Ea,0,c);else if(Ge(c,"readystatechange"),wn(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var w;if(w=ae===0){var L=String(c.D).match(ss)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),w=!Js.test(L?L.toLowerCase():"")}_=w}if(_)Ge(c,"complete"),Ge(c,"success");else{c.m=6;try{var F=2<wn(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",ea(c)}}finally{Jn(c)}}}}function Jn(c,p){if(c.g){ds(c);const _=c.g,w=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Ge(c,"ready");try{_.onreadystatechange=w}catch{}}}function ds(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function wn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),Fs(p)}};function mu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function qh(c){const p={};c=(c.g&&2<=wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<c.length;w++){if(oe(c[w]))continue;var _=M(c[w]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const F=p[L]||[];p[L]=F,F.push(_)}k(p,function(w){return w.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fs(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function na(c){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fs("baseRetryDelayMs",5e3,c),this.cb=fs("retryDelaySeedMs",1e4,c),this.Wa=fs("forwardChannelMaxRetries",2,c),this.wa=fs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bi(c&&c.concurrentRequestLimit),this.Da=new cs,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=na.prototype,r.la=8,r.G=1,r.connect=function(c,p,_,w){nt(0),this.W=c,this.H=p||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Eu(this,null,this.W),ra(this)};function Ro(c){if(gu(c),c.G==3){var p=c.U++,_=cn(c.I);if(Ye(_,"SID",c.K),Ye(_,"RID",p),Ye(_,"TYPE","terminate"),ms(c,_),p=new Zt(c,c.j,p),p.L=2,p.v=os(cn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=p.v,_=!0),_||(p.g=Tu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),is(p)}bu(c)}function ia(c){c.g&&(gs(c),c.g.cancel(),c.g=null)}function gu(c){ia(c),c.u&&(m.clearTimeout(c.u),c.u=null),sa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ra(c){if(!Qs(c.h)&&!c.s){c.s=!0;var p=c.Ga;le||R(),pe||(le(),pe=!0),se.add(p,c),c.B=0}}function Hh(c,p){return Xs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=gt(x(c.Ga,c,p),No(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Zt(this,this.j,c);let F=this.o;if(this.S&&(F?(F=A(F),N(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=pu(this,L,p),_=cn(this.I),Ye(_,"RID",c),Ye(_,"CVER",22),this.D&&Ye(_,"X-HTTP-Session-Id",this.D),ms(this,_),F&&(this.O?p="headers="+encodeURIComponent(String(So(F)))+"&"+p:this.m&&Ct(_,this.m,F)),$s(this.h,L),this.Ua&&Ye(_,"TYPE","init"),this.P?(Ye(_,"$req",p),Ye(_,"SID","null"),L.T=!0,Mn(L,_,null)):Mn(L,_,p),this.G=2}}else this.G==3&&(c?Io(this,c):this.i.length==0||Qs(this.h)||Io(this))};function Io(c,p){var _;p?_=p.l:_=c.U++;const w=cn(c.I);Ye(w,"SID",c.K),Ye(w,"RID",_),Ye(w,"AID",c.T),ms(c,w),c.m&&c.o&&Ct(w,c.m,c.o),_=new Zt(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=pu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),$s(c.h,_),Mn(_,w,p)}function ms(c,p){c.H&&te(c.H,function(_,w){Ye(p,w,_)}),c.l&&Eo({},function(_,w){Ye(p,w,_)})}function pu(c,p,_){_=Math.min(c.i.length,_);var w=c.l?x(c.l.Na,c.l,c):null;e:{var L=c.i;let F=-1;for(;;){const ae=["count="+_];F==-1?0<_?(F=L[0].g,ae.push("ofs="+F)):F=0:ae.push("ofs="+F);let je=!0;for(let xt=0;xt<_;xt++){let Pe=L[xt].g;const Nt=L[xt].map;if(Pe-=F,0>Pe)F=Math.max(0,L[xt].g-100),je=!1;else try{$n(Nt,ae,"req"+Pe+"_")}catch{w&&w(Nt)}}if(je){w=ae.join("&");break e}}}return c=c.i.splice(0,_),p.D=c,w}function yu(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;le||R(),pe||(le(),pe=!0),se.add(p,c),c.v=0}}function Co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=gt(x(c.Fa,c),No(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,vu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=gt(x(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),ia(this),vu(this))};function gs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function vu(c){c.g=new Zt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=cn(c.qa);Ye(p,"RID","rpc"),Ye(p,"SID",c.K),Ye(p,"AID",c.T),Ye(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ye(p,"TO",c.ja),Ye(p,"TYPE","xmlhttp"),ms(c,p),c.m&&c.o&&Ct(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=os(cn(p)),_.m=null,_.P=!0,_i(_,c)}r.Za=function(){this.C!=null&&(this.C=null,ia(this),Co(this),nt(19))};function sa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function _u(c,p){var _=null;if(c.g==p){sa(c),gs(c),c.g=null;var w=2}else if(_o(c.h,p))_=p.D,Wt(c.h,p),w=1;else return;if(c.G!=0){if(p.o)if(w==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;w=Zi(),Ge(w,new Tt(w,_)),ra(c)}else yu(c);else if(L=p.s,L==3||L==0&&0<p.X||!(w==1&&Hh(c,p)||w==2&&Co(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),L){case 1:Si(c,5);break;case 4:Si(c,10);break;case 3:Si(c,6);break;default:Si(c,2)}}}function No(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function Si(c,p){if(c.j.info("Error code "+p),p==2){var _=x(c.fb,c),w=c.Xa;const L=!w;w=new pt(w||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||as(w,"https"),os(w),L?us(w.toString(),_):jn(w.toString(),_)}else nt(2);c.G=0,c.l&&c.l.sa(p),bu(c),gu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function bu(c){if(c.G=0,c.ka=[],c.l){const p=bo(c.h);(p.length!=0||c.i.length!=0)&&(B(c.ka,p),B(c.ka,c.i),c.h.i.length=0,Y(c.i),c.i.length=0),c.l.ra()}}function Eu(c,p,_){var w=_ instanceof pt?cn(_):new pt(_);if(w.g!="")p&&(w.g=p+"."+w.g),nr(w,w.s);else{var L=m.location;w=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var F=new pt(null);w&&as(F,w),p&&(F.g=p),L&&nr(F,L),_&&(F.l=_),w=F}return _=c.D,p=c.ya,_&&p&&Ye(w,_,p),Ye(w,"VER",c.la),ms(c,w),w}function Tu(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new qe(new ir({eb:_})):new qe(c.pa),p.Ha(c.J),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function xu(){}r=xu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function aa(){}aa.prototype.g=function(c,p){return new Jt(c,p)};function Jt(c,p){at.call(this),this.g=new na(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!oe(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!oe(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new ei(this)}j(Jt,at),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Ro(this.g)},Jt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Vn(c),c=_);p.i.push(new cu(p.Ya++,c)),p.G==3&&ra(p)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,Jt.aa.N.call(this)};function wu(c){yi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const _ in p){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}j(wu,yi);function Au(){go.call(this),this.status=1}j(Au,go);function ei(c){this.g=c}j(ei,xu),ei.prototype.ua=function(){Ge(this.g,"a")},ei.prototype.ta=function(c){Ge(this.g,new wu(c))},ei.prototype.sa=function(c){Ge(this.g,new Au)},ei.prototype.ra=function(){Ge(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,P_=function(){return new aa},j_=function(){return Zi()},M_=Fn,rm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},er.NO_ERROR=0,er.TIMEOUT=8,er.HTTP_ERROR=6,kc=er,vi.COMPLETE="complete",V_=vi,mo.EventType=pi,pi.OPEN="a",pi.CLOSE="b",pi.ERROR="c",pi.MESSAGE="d",at.prototype.listen=at.prototype.K,Tl=mo,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,k_=qe}).apply(typeof Sc<"u"?Sc:typeof self<"u"?self:typeof window<"u"?window:{});const Jv="@firebase/firestore",e0="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let no="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Rm("@firebase/firestore");function Ma(){return Ms.logLevel}function ce(r,...e){if(Ms.logLevel<=Ve.DEBUG){const n=e.map(Nm);Ms.debug(`Firestore (${no}): ${r}`,...n)}}function Ki(r,...e){if(Ms.logLevel<=Ve.ERROR){const n=e.map(Nm);Ms.error(`Firestore (${no}): ${r}`,...n)}}function Ka(r,...e){if(Ms.logLevel<=Ve.WARN){const n=e.map(Nm);Ms.warn(`Firestore (${no}): ${r}`,...n)}}function Nm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,U_(r,s,n)}function U_(r,e,n){let s=`FIRESTORE (${no}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Ki(s),new Error(s)}function He(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||U_(e,o,s)}function Se(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class SA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class RA{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){He(this.o===void 0,42304);let s=this.i;const o=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let u=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Hi,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable(async()=>{await y.promise,await o(this.currentUser)})},m=y=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Hi)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(He(typeof s.accessToken=="string",31837,{l:s}),new L_(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class IA{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CA{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new IA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class t0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class NA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){He(this.o===void 0,3512);const s=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new t0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(He(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new t0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=DA(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ne(r,e){return r<e?-1:r>e?1:0}function sm(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return Ne(s,o);{const u=z_(),d=OA(u.encode(n0(r,n)),u.encode(n0(e,n)));return d!==0?d:Ne(s,o)}}n+=s>65535?2:1}return Ne(r.length,e.length)}function n0(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function OA(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return Ne(r[n],e[n]);return Ne(r.length,e.length)}function Ya(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=-62135596800,r0=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*r0);return new Rt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<i0)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/r0}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-i0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Rt(0,0))}static max(){return new Ae(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="__name__";class oi{constructor(e,n,s){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&xe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=oi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ne(e.length,n.length)}static compareSegments(e,n){const s=oi.isNumericId(e),o=oi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?oi.extractNumericId(e).compare(oi.extractNumericId(n)):sm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}}class et extends oi{construct(e,n,s){return new et(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new et(n)}static emptyPath(){return new et([])}}const kA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qt extends oi{construct(e,n,s){return new qt(e,n,s)}static isValidIdentifier(e){return kA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===s0}static keyField(){return new qt([s0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qt(n)}static emptyPath(){return new qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(et.fromString(e))}static fromName(e){return new ve(et.fromString(e).popFirst(5))}static empty(){return new ve(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new et(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;function VA(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(s===1e9?new Rt(n+1,0):new Rt(n,s));return new Pr(o,ve.empty(),e)}function MA(r){return new Pr(r.readTime,r.key,Ml)}class Pr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Pr(Ae.min(),ve.empty(),Ml)}static max(){return new Pr(Ae.max(),ve.empty(),Ml)}}function jA(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==PA)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,s)=>{n(e)})}static reject(e){return new J((n,s)=>{s(e)})}static waitFor(e){return new J((n,s)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&n()},y=>s(y))}),d=!0,u===o&&n()})}static or(e){let n=J.resolve(!1);for(const s of e)n=n.next(o=>o?J.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new J((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let y=0;y<u;y++){const v=y;n(e[v]).next(E=>{d[v]=E,++m,m===u&&s(d)},E=>o(E))}})}static doWhile(e,n){return new J((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function LA(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ro(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}uh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function ch(r){return r==null}function Fc(r){return r===0&&1/r==-1/0}function zA(r){return typeof r=="number"&&Number.isInteger(r)&&!Fc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="";function BA(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=a0(e)),e=qA(r.get(n),e);return a0(e)}function qA(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case q_:n+="";break;default:n+=u}}return n}function a0(r){return r+q_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Gr(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function H_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||Bt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Bt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rc(this.root,e,this.comparator,!0)}}class Rc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Bt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Bt.RED,this.left=o??Bt.EMPTY,this.right=u??Bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Bt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Bt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Bt.EMPTY=null,Bt.RED=!0,Bt.BLACK=!1;Bt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new l0(this.data.getIterator())}getIteratorFrom(e){return new l0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class l0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new vn([])}unionWith(e){let n=new It(qt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ya(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new G_("Invalid base64 string: "+u):u}}(e);return new Ht(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new Ht(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ht.EMPTY_BYTE_STRING=new Ht("");const HA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(r){if(He(!!r,39018),typeof r=="string"){let e=0;const n=HA.exec(r);if(He(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:mt(r.seconds),nanos:mt(r.nanos)}}function mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Lr(r){return typeof r=="string"?Ht.fromBase64String(r):Ht.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="server_timestamp",K_="__type__",Y_="__previous_value__",Q_="__local_write_time__";function Om(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[K_])===null||n===void 0?void 0:n.stringValue)===F_}function hh(r){const e=r.mapValue.fields[Y_];return Om(e)?hh(e):e}function jl(r){const e=Ur(r.mapValue.fields[Q_].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,n,s,o,u,d,m,y,v,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=E}}const Kc="(default)";class Pl{constructor(e,n){this.projectId=e,this.database=n||Kc}static empty(){return new Pl("","")}get isDefaultDatabase(){return this.database===Kc}isEqual(e){return e instanceof Pl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="__type__",FA="__max__",Ic={mapValue:{}},$_="__vector__",Yc="value";function zr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Om(r)?4:YA(r)?9007199254740991:KA(r)?10:11:xe(28295,{value:r})}function fi(r,e){if(r===e)return!0;const n=zr(r);if(n!==zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return jl(r).isEqual(jl(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ur(o.timestampValue),m=Ur(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Lr(o.bytesValue).isEqual(Lr(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return mt(o.geoPointValue.latitude)===mt(u.geoPointValue.latitude)&&mt(o.geoPointValue.longitude)===mt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return mt(o.integerValue)===mt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=mt(o.doubleValue),m=mt(u.doubleValue);return d===m?Fc(d)===Fc(m):isNaN(d)&&isNaN(m)}return!1}(r,e);case 9:return Ya(r.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(o0(d)!==o0(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!fi(d[y],m[y])))return!1;return!0}(r,e);default:return xe(52216,{left:r})}}function Ul(r,e){return(r.values||[]).find(n=>fi(n,e))!==void 0}function Qa(r,e){if(r===e)return 0;const n=zr(r),s=zr(e);if(n!==s)return Ne(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return function(u,d){const m=mt(u.integerValue||u.doubleValue),y=mt(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(r,e);case 3:return u0(r.timestampValue,e.timestampValue);case 4:return u0(jl(r),jl(e));case 5:return sm(r.stringValue,e.stringValue);case 6:return function(u,d){const m=Lr(u),y=Lr(d);return m.compareTo(y)}(r.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),y=d.split("/");for(let v=0;v<m.length&&v<y.length;v++){const E=Ne(m[v],y[v]);if(E!==0)return E}return Ne(m.length,y.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,d){const m=Ne(mt(u.latitude),mt(d.latitude));return m!==0?m:Ne(mt(u.longitude),mt(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return c0(r.arrayValue,e.arrayValue);case 10:return function(u,d){var m,y,v,E;const S=u.fields||{},x=d.fields||{},D=(m=S[Yc])===null||m===void 0?void 0:m.arrayValue,j=(y=x[Yc])===null||y===void 0?void 0:y.arrayValue,Y=Ne(((v=D==null?void 0:D.values)===null||v===void 0?void 0:v.length)||0,((E=j==null?void 0:j.values)===null||E===void 0?void 0:E.length)||0);return Y!==0?Y:c0(D,j)}(r.mapValue,e.mapValue);case 11:return function(u,d){if(u===Ic.mapValue&&d===Ic.mapValue)return 0;if(u===Ic.mapValue)return 1;if(d===Ic.mapValue)return-1;const m=u.fields||{},y=Object.keys(m),v=d.fields||{},E=Object.keys(v);y.sort(),E.sort();for(let S=0;S<y.length&&S<E.length;++S){const x=sm(y[S],E[S]);if(x!==0)return x;const D=Qa(m[y[S]],v[E[S]]);if(D!==0)return D}return Ne(y.length,E.length)}(r.mapValue,e.mapValue);default:throw xe(23264,{Pe:n})}}function u0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const n=Ur(r),s=Ur(e),o=Ne(n.seconds,s.seconds);return o!==0?o:Ne(n.nanos,s.nanos)}function c0(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Qa(n[o],s[o]);if(u)return u}return Ne(n.length,s.length)}function Xa(r){return am(r)}function am(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Ur(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Lr(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return ve.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=am(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${am(n.fields[d])}`;return o+"}"}(r.mapValue):xe(61005,{value:r})}function Vc(r){switch(zr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hh(r);return e?16+Vc(e):16;case 5:return 2*r.stringValue.length;case 6:return Lr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Vc(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Gr(s.fields,(u,d)=>{o+=u.length+Vc(d)}),o}(r.mapValue);default:throw xe(13486,{value:r})}}function h0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function om(r){return!!r&&"integerValue"in r}function km(r){return!!r&&"arrayValue"in r}function d0(r){return!!r&&"nullValue"in r}function f0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Mc(r){return!!r&&"mapValue"in r}function KA(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[X_])===null||n===void 0?void 0:n.stringValue)===$_}function Cl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Gr(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Cl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function YA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===FA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Mc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cl(n)}setAll(e){let n=qt.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=Cl(d):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Mc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Gr(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new ln(Cl(this.value))}}function Z_(r){const e=[];return Gr(r.fields,(n,s)=>{const o=new qt([n]);if(Mc(s)){const u=Z_(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Xt(e,0,Ae.min(),Ae.min(),Ae.min(),ln.empty(),0)}static newFoundDocument(e,n,s,o){return new Xt(e,1,n,Ae.min(),s,o,0)}static newNoDocument(e,n){return new Xt(e,2,n,Ae.min(),Ae.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,Ae.min(),Ae.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n){this.position=e,this.inclusive=n}}function m0(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],d=r.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(d.referenceValue),n.key):s=Qa(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function g0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!fi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n="asc"){this.field=e,this.dir=n}}function QA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{}class bt extends W_{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new $A(e,n,s):n==="array-contains"?new JA(e,s):n==="in"?new eS(e,s):n==="not-in"?new tS(e,s):n==="array-contains-any"?new nS(e,s):new bt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new ZA(e,s):new WA(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qa(n,this.value)):n!==null&&zr(this.value)===zr(n)&&this.matchesComparison(Qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bn extends W_{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Bn(e,n)}matches(e){return J_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function J_(r){return r.op==="and"}function eb(r){return XA(r)&&J_(r)}function XA(r){for(const e of r.filters)if(e instanceof Bn)return!1;return!0}function lm(r){if(r instanceof bt)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(eb(r))return r.filters.map(e=>lm(e)).join(",");{const e=r.filters.map(n=>lm(n)).join(",");return`${r.op}(${e})`}}function tb(r,e){return r instanceof bt?function(s,o){return o instanceof bt&&s.op===o.op&&s.field.isEqual(o.field)&&fi(s.value,o.value)}(r,e):r instanceof Bn?function(s,o){return o instanceof Bn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,d,m)=>u&&tb(d,o.filters[m]),!0):!1}(r,e):void xe(19439)}function nb(r){return r instanceof bt?function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`}(r):r instanceof Bn?function(n){return n.op.toString()+" {"+n.getFilters().map(nb).join(" ,")+"}"}(r):"Filter"}class $A extends bt{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class ZA extends bt{constructor(e,n){super(e,"in",n),this.keys=ib("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class WA extends bt{constructor(e,n){super(e,"not-in",n),this.keys=ib("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ib(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ve.fromName(s.referenceValue))}class JA extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return km(n)&&Ul(n.arrayValue,this.value)}}class eS extends bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ul(this.value.arrayValue,n)}}class tS extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ul(this.value.arrayValue,n)}}class nS extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!km(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Ul(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Ie=null}}function p0(r,e=null,n=[],s=[],o=null,u=null,d=null){return new iS(r,e,n,s,o,u,d)}function Vm(r){const e=Se(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>lm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),ch(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Xa(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Xa(s)).join(",")),e.Ie=n}return e.Ie}function Mm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!QA(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!tb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!g0(r.startAt,e.startAt)&&g0(r.endAt,e.endAt)}function um(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=y,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function rS(r,e,n,s,o,u,d,m){return new Kl(r,e,n,s,o,u,d,m)}function jm(r){return new Kl(r)}function y0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function rb(r){return r.collectionGroup!==null}function Nl(r){const e=Se(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new It(qt.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Xc(u,s))}),n.has(qt.keyField().canonicalString())||e.Ee.push(new Xc(qt.keyField(),s))}return e.Ee}function ui(r){const e=Se(r);return e.de||(e.de=sS(e,Nl(r))),e.de}function sS(r,e){if(r.limitType==="F")return p0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Xc(o.field,u)});const n=r.endAt?new Qc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Qc(r.startAt.position,r.startAt.inclusive):null;return p0(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function cm(r,e){const n=r.filters.concat([e]);return new Kl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function hm(r,e,n){return new Kl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function dh(r,e){return Mm(ui(r),ui(e))&&r.limitType===e.limitType}function sb(r){return`${Vm(ui(r))}|lt:${r.limitType}`}function ja(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>nb(o)).join(", ")}]`),ch(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Xa(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Xa(o)).join(",")),`Target(${s})`}(ui(r))}; limitType=${r.limitType})`}function fh(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of Nl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,m,y){const v=m0(d,m,y);return d.inclusive?v<=0:v<0}(s.startAt,Nl(s),o)||s.endAt&&!function(d,m,y){const v=m0(d,m,y);return d.inclusive?v>=0:v>0}(s.endAt,Nl(s),o))}(r,e)}function aS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ab(r){return(e,n)=>{let s=!1;for(const o of Nl(r)){const u=oS(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function oS(r,e,n){const s=r.field.isKeyField()?ve.comparator(e.key,n.key):function(u,d,m){const y=d.data.field(u),v=m.data.field(u);return y!==null&&v!==null?Qa(y,v):xe(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return xe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return H_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS=new st(ve.comparator);function Yi(){return lS}const ob=new st(ve.comparator);function xl(...r){let e=ob;for(const n of r)e=e.insert(n.key,n);return e}function lb(r){let e=ob;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Os(){return Dl()}function ub(){return Dl()}function Dl(){return new Ls(r=>r.toString(),(r,e)=>r.isEqual(e))}const uS=new st(ve.comparator),cS=new It(ve.comparator);function Me(...r){let e=cS;for(const n of r)e=e.add(n);return e}const hS=new It(Ne);function dS(){return hS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fc(e)?"-0":e}}function cb(r){return{integerValue:""+r}}function fS(r,e){return zA(e)?cb(e):Pm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(){this._=void 0}}function mS(r,e,n){return r instanceof Ll?function(o,u){const d={fields:{[K_]:{stringValue:F_},[Q_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Om(u)&&(u=hh(u)),u&&(d.fields[Y_]=u),{mapValue:d}}(n,e):r instanceof zl?db(r,e):r instanceof Bl?fb(r,e):function(o,u){const d=hb(o,u),m=v0(d)+v0(o.Re);return om(d)&&om(o.Re)?cb(m):Pm(o.serializer,m)}(r,e)}function gS(r,e,n){return r instanceof zl?db(r,e):r instanceof Bl?fb(r,e):n}function hb(r,e){return r instanceof $c?function(s){return om(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Ll extends mh{}class zl extends mh{constructor(e){super(),this.elements=e}}function db(r,e){const n=mb(e);for(const s of r.elements)n.some(o=>fi(o,s))||n.push(s);return{arrayValue:{values:n}}}class Bl extends mh{constructor(e){super(),this.elements=e}}function fb(r,e){let n=mb(e);for(const s of r.elements)n=n.filter(o=>!fi(o,s));return{arrayValue:{values:n}}}class $c extends mh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function v0(r){return mt(r.integerValue||r.doubleValue)}function mb(r){return km(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n){this.field=e,this.transform=n}}function yS(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof zl&&o instanceof zl||s instanceof Bl&&o instanceof Bl?Ya(s.elements,o.elements,fi):s instanceof $c&&o instanceof $c?fi(s.Re,o.Re):s instanceof Ll&&o instanceof Ll}(r.transform,e.transform)}class vS{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class gh{}function gb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Um(r.key,kn.none()):new Yl(r.key,r.data,kn.none());{const n=r.data,s=ln.empty();let o=new It(qt.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new Fr(r.key,s,new vn(o.toArray()),kn.none())}}function _S(r,e,n){r instanceof Yl?function(o,u,d){const m=o.value.clone(),y=b0(o.fieldTransforms,u,d.transformResults);m.setAll(y),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,n):r instanceof Fr?function(o,u,d){if(!jc(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=b0(o.fieldTransforms,u,d.transformResults),y=u.data;y.setAll(pb(o)),y.setAll(m),u.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(r,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function Ol(r,e,n,s){return r instanceof Yl?function(u,d,m,y){if(!jc(u.precondition,d))return m;const v=u.value.clone(),E=E0(u.fieldTransforms,y,d);return v.setAll(E),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(r,e,n,s):r instanceof Fr?function(u,d,m,y){if(!jc(u.precondition,d))return m;const v=E0(u.fieldTransforms,y,d),E=d.data;return E.setAll(pb(u)),E.setAll(v),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(S=>S.field))}(r,e,n,s):function(u,d,m){return jc(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(r,e,n)}function bS(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=hb(s.transform,o||null);u!=null&&(n===null&&(n=ln.empty()),n.set(s.field,u))}return n||null}function _0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ya(s,o,(u,d)=>yS(u,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Yl extends gh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fr extends gh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function pb(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function b0(r,e,n){const s=new Map;He(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const u=r[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,gS(d,m,n[o]))}return s}function E0(r,e,n){const s=new Map;for(const o of r){const u=o.transform,d=n.data.field(o.field);s.set(o.field,mS(u,d,e))}return s}class Um extends gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ES extends gh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&_S(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Ol(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Ol(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ub();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const y=gb(d,m);y!==null&&s.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Ae.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&Ya(this.mutations,e.mutations,(n,s)=>_0(n,s))&&Ya(this.baseMutations,e.baseMutations,(n,s)=>_0(n,s))}}class Lm{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){He(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return uS}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new Lm(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Le;function AS(r){switch(r){case ee.OK:return xe(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return xe(15467,{code:r})}}function yb(r){if(r===void 0)return Ki("GRPC error has no .code"),ee.UNKNOWN;switch(r){case _t.OK:return ee.OK;case _t.CANCELLED:return ee.CANCELLED;case _t.UNKNOWN:return ee.UNKNOWN;case _t.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case _t.INTERNAL:return ee.INTERNAL;case _t.UNAVAILABLE:return ee.UNAVAILABLE;case _t.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case _t.NOT_FOUND:return ee.NOT_FOUND;case _t.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case _t.ABORTED:return ee.ABORTED;case _t.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case _t.DATA_LOSS:return ee.DATA_LOSS;default:return xe(39323,{code:r})}}(Le=_t||(_t={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=new Mr([4294967295,4294967295],0);function T0(r){const e=z_().encode(r),n=new O_;return n.update(e),new Uint8Array(n.digest())}function x0(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Mr([n,s],0),new Mr([o,u],0)]}class zm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new wl(`Invalid padding: ${n}`);if(s<0)throw new wl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new wl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new wl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Mr.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(Mr.fromNumber(s)));return o.compare(SS)===1&&(o=new Mr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=T0(e),[s,o]=x0(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);if(!this.be(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new zm(u,o,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const n=T0(e),[s,o]=x0(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ph(Ae.min(),o,new st(Ne),Yi(),Me())}}class Ql{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ql(s,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class vb{constructor(e,n){this.targetId=e,this.Ce=n}}class _b{constructor(e,n,s=Ht.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class w0{constructor(){this.Fe=0,this.Me=A0(),this.xe=Ht.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Me(),n=Me(),s=Me();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:xe(38017,{changeType:u})}}),new Ql(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=A0()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,He(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class RS{constructor(e){this.ze=e,this.je=new Map,this.He=Yi(),this.Je=Cc(),this.Ye=Cc(),this.Ze=new st(Ne)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(um(u))if(s===0){const d=new ve(u.path);this.tt(n,d,Xt.newNoDocument(d,Ae.min()))}else He(s===1,20013,{expectedCount:s});else{const d=this.ut(n);if(d!==s){const m=this.ct(e),y=m?this.lt(m,e,d):1;if(y!==0){this.st(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,v)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=Lr(s).toUint8Array()}catch(y){if(y instanceof G_)return Ka("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new zm(d,o,u)}catch(y){return Ka(y instanceof wl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.pe===0?null:m}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,d)=>{const m=this._t(d);if(m){if(u.current&&um(m.target)){const y=new ve(m.target.path);this.Et(y).has(d)||this.dt(d,y)||this.tt(d,y,Xt.newNoDocument(y,e))}u.Le&&(n.set(d,u.qe()),u.Qe())}});let s=Me();this.Ye.forEach((u,d)=>{let m=!0;d.forEachWhile(y=>{const v=this._t(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.He.forEach((u,d)=>d.setReadTime(e));const o=new ph(e,n,this.Ze,this.He,s);return this.He=Yi(),this.Je=Cc(),this.Ye=Cc(),this.Ze=new st(Ne),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new w0,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new It(Ne),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new It(Ne),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new w0),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Cc(){return new st(ve.comparator)}function A0(){return new st(ve.comparator)}const IS={asc:"ASCENDING",desc:"DESCENDING"},CS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NS={and:"AND",or:"OR"};class DS{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dm(r,e){return r.useProto3Json||ch(e)?e:{value:e}}function Zc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function OS(r,e){return Zc(r,e.toTimestamp())}function ci(r){return He(!!r,49232),Ae.fromTimestamp(function(n){const s=Ur(n);return new Rt(s.seconds,s.nanos)}(r))}function Bm(r,e){return fm(r,e).canonicalString()}function fm(r,e){const n=function(o){return new et(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function Eb(r){const e=et.fromString(r);return He(Sb(e),10190,{key:e.toString()}),e}function mm(r,e){return Bm(r.databaseId,e.path)}function Kf(r,e){const n=Eb(e);if(n.get(1)!==r.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(xb(n))}function Tb(r,e){return Bm(r.databaseId,e)}function kS(r){const e=Eb(r);return e.length===4?et.emptyPath():xb(e)}function gm(r){return new et(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function xb(r){return He(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function S0(r,e,n){return{name:mm(r,e),fields:n.value.mapValue.fields}}function VS(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:xe(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(v,E){return v.useProto3Json?(He(E===void 0||typeof E=="string",58123),Ht.fromBase64String(E||"")):(He(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Ht.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(v){const E=v.code===void 0?ee.UNKNOWN:yb(v.code);return new he(E,v.message||"")}(d);n=new _b(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Kf(r,s.document.name),u=ci(s.document.updateTime),d=s.document.createTime?ci(s.document.createTime):Ae.min(),m=new ln({mapValue:{fields:s.document.fields}}),y=Xt.newFoundDocument(o,u,d,m),v=s.targetIds||[],E=s.removedTargetIds||[];n=new Pc(v,E,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Kf(r,s.document),u=s.readTime?ci(s.readTime):Ae.min(),d=Xt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Pc([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Kf(r,s.document),u=s.removedTargetIds||[];n=new Pc([],u,o,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new wS(o,u),m=s.targetId;n=new vb(m,d)}}return n}function MS(r,e){let n;if(e instanceof Yl)n={update:S0(r,e.key,e.value)};else if(e instanceof Um)n={delete:mm(r,e.key)};else if(e instanceof Fr)n={update:S0(r,e.key,e.data),updateMask:GS(e.fieldMask)};else{if(!(e instanceof ES))return xe(16599,{ft:e.type});n={verify:mm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const m=d.transform;if(m instanceof Ll)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof zl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Bl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $c)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw xe(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:OS(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:xe(27497)}(r,e.precondition)),n}function jS(r,e){return r&&r.length>0?(He(e!==void 0,14353),r.map(n=>function(o,u){let d=o.updateTime?ci(o.updateTime):ci(u);return d.isEqual(Ae.min())&&(d=ci(u)),new vS(d,o.transformResults||[])}(n,e))):[]}function PS(r,e){return{documents:[Tb(r,e.path)]}}function US(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Tb(r,o);const u=function(v){if(v.length!==0)return Ab(Bn.create(v,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(v){if(v.length!==0)return v.map(E=>function(x){return{field:Pa(x.field),direction:BS(x.dir)}}(E))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=dm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{gt:n,parent:o}}function LS(r){let e=kS(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){He(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(S){const x=wb(S);return x instanceof Bn&&eb(x)?x.getFilters():[x]}(n.where));let d=[];n.orderBy&&(d=function(S){return S.map(x=>function(j){return new Xc(Ua(j.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(x))}(n.orderBy));let m=null;n.limit&&(m=function(S){let x;return x=typeof S=="object"?S.value:S,ch(x)?null:x}(n.limit));let y=null;n.startAt&&(y=function(S){const x=!!S.before,D=S.values||[];return new Qc(D,x)}(n.startAt));let v=null;return n.endAt&&(v=function(S){const x=!S.before,D=S.values||[];return new Qc(D,x)}(n.endAt)),rS(e,o,d,u,m,"F",y,v)}function zS(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wb(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ua(n.unaryFilter.field);return bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ua(n.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ua(n.unaryFilter.field);return bt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ua(n.unaryFilter.field);return bt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(r):r.fieldFilter!==void 0?function(n){return bt.create(Ua(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return Bn.create(n.compositeFilter.filters.map(s=>wb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(r):xe(30097,{filter:r})}function BS(r){return IS[r]}function qS(r){return CS[r]}function HS(r){return NS[r]}function Pa(r){return{fieldPath:r.canonicalString()}}function Ua(r){return qt.fromServerFormat(r.fieldPath)}function Ab(r){return r instanceof bt?function(n){if(n.op==="=="){if(f0(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NAN"}};if(d0(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(f0(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NOT_NAN"}};if(d0(n.value))return{unaryFilter:{field:Pa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pa(n.field),op:qS(n.op),value:n.value}}}(r):r instanceof Bn?function(n){const s=n.getFilters().map(o=>Ab(o));return s.length===1?s[0]:{compositeFilter:{op:HS(n.op),filters:s}}}(r):xe(54877,{filter:r})}function GS(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Sb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,s,o,u=Ae.min(),d=Ae.min(),m=Ht.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.wt=e}}function KS(r){const e=LS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(){this.Cn=new QS}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Pr.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Pr.min())}updateCollectionGroup(e,n,s){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class QS{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new It(et.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new It(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rb=41943040;class on{static withCacheSize(e){return new on(e,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(Rb,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new $a(0)}static lr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="LruGarbageCollector",XS=1048576;function C0([r,e],[n,s]){const o=Ne(r,n);return o===0?Ne(e,s):o}class $S{constructor(e){this.Er=e,this.buffer=new It(C0),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();C0(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZS{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ce(I0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ro(n)?ce(I0,"Ignoring IndexedDB error during garbage collection: ",n):await io(n)}await this.mr(3e5)})}}class WS{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return J.resolve(uh.le);const s=new $S(n);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(R0)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R0):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,o,u,d,m,y,v;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,d=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(s=S,m=Date.now(),this.removeTargets(e,s,n))).next(S=>(u=S,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(S=>(v=Date.now(),Ma()<=Ve.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(y-m)+`ms
	Removed ${S} documents in `+(v-y)+`ms
Total Duration: ${v-E}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}function JS(r,e){return new WS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.changes=new Ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?J.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Ol(s.mutation,o,vn.empty(),Rt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Me()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Me()){const o=Os();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let d=xl();return u.forEach((m,y)=>{d=d.insert(m,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=Os();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Me()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,o){let u=Yi();const d=Dl(),m=function(){return Dl()}();return n.forEach((y,v)=>{const E=s.get(v.key);o.has(v.key)&&(E===void 0||E.mutation instanceof Fr)?u=u.insert(v.key,v):E!==void 0?(d.set(v.key,E.mutation.getFieldMask()),Ol(E.mutation,v,E.mutation.getFieldMask(),Rt.now())):d.set(v.key,vn.empty())}),this.recalculateAndSaveOverlays(e,u).next(y=>(y.forEach((v,E)=>d.set(v,E)),n.forEach((v,E)=>{var S;return m.set(v,new t1(E,(S=d.get(v))!==null&&S!==void 0?S:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Dl();let o=new st((d,m)=>d-m),u=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(y=>{const v=n.get(y);if(v===null)return;let E=s.get(y)||vn.empty();E=m.applyToLocalView(v,E),s.set(y,E);const S=(o.get(m.batchId)||Me()).add(y);o=o.insert(m.batchId,S)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,E=y.value,S=ub();E.forEach(x=>{if(!u.has(x)){const D=gb(n.get(x),s.get(x));D!==null&&S.set(x,D),u=u.add(x)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,S))}return J.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):J.resolve(Os());let m=Ml,y=u;return d.next(v=>J.forEach(v,(E,S)=>(m<S.largestBatchId&&(m=S.largestBatchId),u.get(E)?J.resolve():this.remoteDocumentCache.getEntry(e,E).next(x=>{y=y.insert(E,x)}))).next(()=>this.populateOverlays(e,v,u)).next(()=>this.computeViews(e,y,v,Me())).next(E=>({batchId:m,changes:lb(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(s=>{let o=xl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=xl();return this.indexManager.getCollectionParents(e,u).next(m=>J.forEach(m,y=>{const v=function(S,x){return new Kl(x,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)}(n,y.child(u));return this.getDocumentsMatchingCollectionQuery(e,v,s,o).next(E=>{E.forEach((S,x)=>{d=d.insert(S,x)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(d=>{u.forEach((y,v)=>{const E=v.getKey();d.get(E)===null&&(d=d.insert(E,Xt.newInvalidDocument(E)))});let m=xl();return d.forEach((y,v)=>{const E=u.get(y);E!==void 0&&Ol(E.mutation,v,vn.empty(),Rt.now()),fh(n,v)&&(m=m.insert(y,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return J.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ci(o.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:KS(o.bundledQuery),readTime:ci(o.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.overlays=new st(ve.comparator),this.Qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Os();return J.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.St(e,n,u)}),J.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),J.resolve()}getOverlaysForCollection(e,n,s){const o=Os(),u=n.length+1,d=new ve(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===u&&y.largestBatchId>s&&o.set(y.getKey(),y)}return J.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new st((v,E)=>v-E);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let E=u.get(v.largestBatchId);E===null&&(E=Os(),u=u.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const m=Os(),y=u.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((v,E)=>m.set(v,E)),!(m.size()>=o)););return J.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new xS(n,s));let u=this.Qr.get(n);u===void 0&&(u=Me(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.sessionToken=Ht.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.$r=new It(Vt.Ur),this.Kr=new It(Vt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new Vt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new Vt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new ve(new et([])),s=new Vt(n,e),o=new Vt(n,e+1),u=[];return this.Kr.forEachInRange([s,o],d=>{this.zr(d),u.push(d.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ve(new et([])),s=new Vt(n,e),o=new Vt(n,e+1);let u=Me();return this.Kr.forEachInRange([s,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new Vt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Vt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ve.comparator(e.key,n.key)||Ne(e.Zr,n.Zr)}static Wr(e,n){return Ne(e.Zr,n.Zr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new It(Vt.Ur)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new TS(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Xr=this.Xr.add(new Vt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return J.resolve(d)}lookupMutationBatch(e,n){return J.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ti(s),u=o<0?0:o;return J.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Dm:this.nr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Vt(n,0),o=new Vt(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],d=>{const m=this.ei(d.Zr);u.push(m)}),J.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new It(Ne);return n.forEach(o=>{const u=new Vt(o,0),d=new Vt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,d],m=>{s=s.add(m.Zr)})}),J.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const d=new Vt(new ve(u),0);let m=new It(Ne);return this.Xr.forEachWhile(y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===o&&(m=m.add(y.Zr)),!0)},d),J.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){He(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return J.forEach(n.mutations,o=>{const u=new Vt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new Vt(n,0),o=this.Xr.firstAfterOrEqual(s);return J.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.ii=e,this.docs=function(){return new st(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return J.resolve(s?s.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let s=Yi();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Xt.newInvalidDocument(o))}),J.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Yi();const d=n.path,m=new ve(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:E}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||jA(MA(E),s)<=0||(o.has(E.key)||fh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return J.resolve(u)}getAllFromCollectionGroup(e,n,s,o){xe(9500)}si(e,n){return J.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new l1(this)}getSize(e){return J.resolve(this.size)}}class l1 extends e1{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),J.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.persistence=e,this.oi=new Ls(n=>Vm(n),Mm),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this._i=0,this.ai=new qm,this.targetCount=0,this.ui=$a.cr()}forEachTarget(e,n){return this.oi.forEach((s,o)=>n(o)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),J.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new $a(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Tr(n),J.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.oi.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),J.waitFor(u).next(()=>o)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return J.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),J.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),J.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return J.resolve(s)}containsKey(e,n){return J.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n){this.ci={},this.overlays={},this.li=new uh(0),this.hi=!1,this.hi=!0,this.Pi=new s1,this.referenceDelegate=e(this),this.Ti=new u1(this),this.indexManager=new YS,this.remoteDocumentCache=function(o){return new o1(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new FS(n),this.Ei=new i1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new r1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new a1(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);const o=new c1(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return J.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class c1 extends UA{constructor(e){super(),this.currentSequenceNumber=e}}class Hm{constructor(e){this.persistence=e,this.Vi=new qm,this.mi=null}static fi(e){return new Hm(e)}get gi(){if(this.mi)return this.mi;throw xe(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),J.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.gi,s=>{const o=ve.fromPath(s);return this.pi(e,o).next(u=>{u||n.removeEntry(o,Ae.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return J.or([()=>J.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Wc{constructor(e,n){this.persistence=e,this.yi=new Ls(s=>BA(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=JS(this,n)}static fi(e,n){return new Wc(e,n)}di(){}Ai(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return J.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?J.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,n).next(m=>{m||(s++,u.removeEntry(d,Ae.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),J.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vc(e.data.value)),n}Dr(e,n,s){return J.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return J.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ds=s,this.As=o}static Rs(e,n){let s=Me(),o=Me();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gm(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return ow()?8:LA($t())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ws(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.bs(e,n,o,s).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new h1;return this.Ss(e,n,d).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,d,m.size)})}).next(()=>u.result)}Ds(e,n,s,o){return s.documentReadCount<this.gs?(Ma()<=Ve.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",ja(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),J.resolve()):(Ma()<=Ve.DEBUG&&ce("QueryEngine","Query:",ja(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(Ma()<=Ve.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",ja(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(n))):J.resolve())}ws(e,n){if(y0(n))return J.resolve(null);let s=ui(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=hm(n,null,"F"),s=ui(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const d=Me(...u);return this.ys.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(y=>{const v=this.vs(n,m);return this.Cs(n,v,d,y.readTime)?this.ws(e,hm(n,null,"F")):this.Fs(e,v,n,y)}))})))}bs(e,n,s,o){return y0(n)||o.isEqual(Ae.min())?J.resolve(null):this.ys.getDocuments(e,s).next(u=>{const d=this.vs(n,u);return this.Cs(n,d,s,o)?J.resolve(null):(Ma()<=Ve.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ja(n)),this.Fs(e,d,n,VA(o,Ml)).next(m=>m))})}vs(e,n){let s=new It(ab(e));return n.forEach((o,u)=>{fh(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Ma()<=Ve.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",ja(n)),this.ys.getDocumentsMatchingQuery(e,n,Pr.min(),s)}Fs(e,n,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="LocalStore",f1=3e8;class m1{constructor(e,n,s,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new st(Ne),this.Os=new Ls(u=>Vm(u),Mm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new n1(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function g1(r,e,n,s){return new m1(r,e,n,s)}async function Cb(r,e){const n=Se(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const d=[],m=[];let y=Me();for(const v of o){d.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}for(const v of u){m.push(v.batchId);for(const E of v.mutations)y=y.add(E.key)}return n.localDocuments.getDocuments(s,y).next(v=>({ks:v,removedBatchIds:d,addedBatchIds:m}))})})}function p1(r,e){const n=Se(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,y,v,E){const S=v.batch,x=S.keys();let D=J.resolve();return x.forEach(j=>{D=D.next(()=>E.getEntry(y,j)).next(Y=>{const B=v.docVersions.get(j);He(B!==null,48541),Y.version.compareTo(B)<0&&(S.applyToRemoteDocument(Y,v),Y.isValidDocument()&&(Y.setReadTime(v.commitVersion),E.addEntry(Y)))})}),D.next(()=>m.mutationQueue.removeMutationBatch(y,S))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=Me();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function Nb(r){const e=Se(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function y1(r,e){const n=Se(r),s=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((E,S)=>{const x=o.get(S);if(!x)return;m.push(n.Ti.removeMatchingKeys(u,E.removedDocuments,S).next(()=>n.Ti.addMatchingKeys(u,E.addedDocuments,S)));let D=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?D=D.withResumeToken(Ht.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(E.resumeToken,s)),o=o.insert(S,D),function(Y,B,ne){return Y.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-Y.snapshotVersion.toMicroseconds()>=f1?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0}(x,D,E)&&m.push(n.Ti.updateTargetData(u,D))});let y=Yi(),v=Me();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(v1(u,d,e.documentUpdates).next(E=>{y=E.qs,v=E.Qs})),!s.isEqual(Ae.min())){const E=n.Ti.getLastRemoteSnapshotVersion(u).next(S=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return J.waitFor(m).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,y,v)).next(()=>y)}).then(u=>(n.xs=o,u))}function v1(r,e,n){let s=Me(),o=Me();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let d=Yi();return n.forEach((m,y)=>{const v=u.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Ae.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):ce(Fm,"Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)}),{qs:d,Qs:o}})}function _1(r,e){const n=Se(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Dm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function b1(r,e){const n=Se(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Ti.getTargetData(s,e).next(u=>u?(o=u,J.resolve(o)):n.Ti.allocateTargetId(s).next(d=>(o=new Dr(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function pm(r,e,n){const s=Se(r),o=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!ro(d))throw d;ce(Fm,`Failed to update sequence numbers for target ${e}: ${d}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function N0(r,e,n){const s=Se(r);let o=Ae.min(),u=Me();return s.persistence.runTransaction("Execute query","readwrite",d=>function(y,v,E){const S=Se(y),x=S.Os.get(E);return x!==void 0?J.resolve(S.xs.get(x)):S.Ti.getTargetData(v,E)}(s,d,ui(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(d,m.targetId).next(y=>{u=y})}).next(()=>s.Ms.getDocumentsMatchingQuery(d,e,n?o:Ae.min(),n?u:Me())).next(m=>(E1(s,aS(e),m),{documents:m,$s:u})))}function E1(r,e,n){let s=r.Ns.get(e)||Ae.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Ns.set(e,s)}class D0{constructor(){this.activeTargetIds=dS()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T1{constructor(){this.xo=new D0,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new D0,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="ConnectivityMonitor";class k0{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ce(O0,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ce(O0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc=null;function ym(){return Nc===null?Nc=function(){return 268435456+Math.round(2147483648*Math.random())}():Nc++,"0x"+Nc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="RestConnection",w1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class A1{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===Kc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,n,s,o,u){const d=ym(),m=this.jo(e,n.toUriEncodedString());ce(Yf,`Sending RPC '${e}' ${d}:`,m,s);const y={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(y,o,u);const{host:v}=new URL(m),E=eo(v);return this.Jo(e,m,y,s,E).then(S=>(ce(Yf,`Received RPC '${e}' ${d}: `,S),S),S=>{throw Ka(Yf,`RPC '${e}' ${d} failed with error: `,S,"url: ",m,"request:",s),S})}Yo(e,n,s,o,u,d){return this.zo(e,n,s,o,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+no}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const s=w1[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class R1 extends A1{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=ym();return new Promise((m,y)=>{const v=new k_;v.setWithCredentials(!0),v.listenOnce(V_.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case kc.NO_ERROR:const S=v.getResponseJson();ce(Yt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(S)),m(S);break;case kc.TIMEOUT:ce(Yt,`RPC '${e}' ${d} timed out`),y(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case kc.HTTP_ERROR:const x=v.getStatus();if(ce(Yt,`RPC '${e}' ${d} failed with status:`,x,"response text:",v.getResponseText()),x>0){let D=v.getResponseJson();Array.isArray(D)&&(D=D[0]);const j=D==null?void 0:D.error;if(j&&j.status&&j.message){const Y=function(ne){const oe=ne.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(oe)>=0?oe:ee.UNKNOWN}(j.status);y(new he(Y,j.message))}else y(new he(ee.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new he(ee.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{h_:e,streamId:d,P_:v.getLastErrorCode(),T_:v.getLastError()})}}finally{ce(Yt,`RPC '${e}' ${d} completed.`)}});const E=JSON.stringify(o);ce(Yt,`RPC '${e}' ${d} sending request:`,o),v.send(n,"POST",E,s,15)})}I_(e,n,s){const o=ym(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=P_(),m=j_(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Ho(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const E=u.join("");ce(Yt,`Creating RPC '${e}' stream ${o}: ${E}`,y);const S=d.createWebChannel(E,y);this.E_(S);let x=!1,D=!1;const j=new S1({Zo:B=>{D?ce(Yt,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(x||(ce(Yt,`Opening RPC '${e}' stream ${o} transport.`),S.open(),x=!0),ce(Yt,`RPC '${e}' stream ${o} sending:`,B),S.send(B))},Xo:()=>S.close()}),Y=(B,ne,oe)=>{B.listen(ne,ue=>{try{oe(ue)}catch(ge){setTimeout(()=>{throw ge},0)}})};return Y(S,Tl.EventType.OPEN,()=>{D||(ce(Yt,`RPC '${e}' stream ${o} transport opened.`),j.__())}),Y(S,Tl.EventType.CLOSE,()=>{D||(D=!0,ce(Yt,`RPC '${e}' stream ${o} transport closed`),j.u_(),this.d_(S))}),Y(S,Tl.EventType.ERROR,B=>{D||(D=!0,Ka(Yt,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),j.u_(new he(ee.UNAVAILABLE,"The operation could not be completed")))}),Y(S,Tl.EventType.MESSAGE,B=>{var ne;if(!D){const oe=B.data[0];He(!!oe,16349);const ue=oe,ge=(ue==null?void 0:ue.error)||((ne=ue[0])===null||ne===void 0?void 0:ne.error);if(ge){ce(Yt,`RPC '${e}' stream ${o} received error:`,ge);const K=ge.status;let te=function(I){const N=_t[I];if(N!==void 0)return yb(N)}(K),k=ge.message;te===void 0&&(te=ee.INTERNAL,k="Unknown error status: "+K+" with message "+ge.message),D=!0,j.u_(new he(te,k)),S.close()}else ce(Yt,`RPC '${e}' stream ${o} received:`,oe),j.c_(oe)}}),Y(m,M_.STAT_EVENT,B=>{B.stat===rm.PROXY?ce(Yt,`RPC '${e}' stream ${o} detected buffering proxy`):B.stat===rm.NOPROXY&&ce(Yt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.a_()},0),j}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Qf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(r){return new DS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="PersistentStream";class Ob{constructor(e,n,s,o,u,d,m,y){this.xi=e,this.S_=s,this.D_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Db(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(Ki(n.toString()),Ki("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===n&&this.z_(s,o)},s=>{e(()=>{const o=new he(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ce(V0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ce(V0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class I1 extends Ob{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=VS(this.serializer,e),s=function(u){if(!("targetChange"in u))return Ae.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Ae.min():d.readTime?ci(d.readTime):Ae.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=gm(this.serializer),n.addTarget=function(u,d){let m;const y=d.target;if(m=um(y)?{documents:PS(u,y)}:{query:US(u,y).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=bb(u,d.resumeToken);const v=dm(u,d.expectedCount);v!==null&&(m.expectedCount=v)}else if(d.snapshotVersion.compareTo(Ae.min())>0){m.readTime=Zc(u,d.snapshotVersion.toTimestamp());const v=dm(u,d.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const s=zS(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=gm(this.serializer),n.removeTarget=e,this.Q_(n)}}class C1 extends Ob{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=jS(e.writeResults,e.commitTime),s=ci(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=gm(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>MS(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{}class D1 extends N1{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.zo(e,fm(n,s),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(ee.UNKNOWN,u.toString())})}Yo(e,n,s,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Yo(e,fm(n,s),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(ee.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class O1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ki(n),this.ua=!1):ce("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="RemoteStore";class k1{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(d=>{s.enqueueAndForget(async()=>{zs(this)&&(ce(js,"Restarting streams for network reachability change."),await async function(y){const v=Se(y);v.da.add(4),await Xl(v),v.Va.set("Unknown"),v.da.delete(4),await vh(v)}(this))})}),this.Va=new O1(s,o)}}async function vh(r){if(zs(r))for(const e of r.Aa)await e(!0)}async function Xl(r){for(const e of r.Aa)await e(!1)}function kb(r,e){const n=Se(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Xm(n)?Qm(n):so(n).N_()&&Ym(n,e))}function Km(r,e){const n=Se(r),s=so(n);n.Ea.delete(e),s.N_()&&Vb(n,e),n.Ea.size===0&&(s.N_()?s.k_():zs(n)&&n.Va.set("Unknown"))}function Ym(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}so(r).Z_(e)}function Vb(r,e){r.ma.Ke(e),so(r).X_(e)}function Qm(r){r.ma=new RS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),so(r).start(),r.Va.ca()}function Xm(r){return zs(r)&&!so(r).O_()&&r.Ea.size>0}function zs(r){return Se(r).da.size===0}function Mb(r){r.ma=void 0}async function V1(r){r.Va.set("Online")}async function M1(r){r.Ea.forEach((e,n)=>{Ym(r,e)})}async function j1(r,e){Mb(r),Xm(r)?(r.Va.Pa(e),Qm(r)):r.Va.set("Unknown")}async function P1(r,e,n){if(r.Va.set("Online"),e instanceof _b&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ea.delete(m),o.ma.removeTarget(m))}(r,e)}catch(s){ce(js,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Jc(r,s)}else if(e instanceof Pc?r.ma.Xe(e):e instanceof vb?r.ma.ot(e):r.ma.nt(e),!n.isEqual(Ae.min()))try{const s=await Nb(r.localStore);n.compareTo(s)>=0&&await function(u,d){const m=u.ma.It(d);return m.targetChanges.forEach((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const E=u.Ea.get(v);E&&u.Ea.set(v,E.withResumeToken(y.resumeToken,d))}}),m.targetMismatches.forEach((y,v)=>{const E=u.Ea.get(y);if(!E)return;u.Ea.set(y,E.withResumeToken(Ht.EMPTY_BYTE_STRING,E.snapshotVersion)),Vb(u,y);const S=new Dr(E.target,y,v,E.sequenceNumber);Ym(u,S)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){ce(js,"Failed to raise snapshot:",s),await Jc(r,s)}}async function Jc(r,e,n){if(!ro(e))throw e;r.da.add(1),await Xl(r),r.Va.set("Offline"),n||(n=()=>Nb(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ce(js,"Retrying IndexedDB access"),await n(),r.da.delete(1),await vh(r)})}function jb(r,e){return e().catch(n=>Jc(r,n,e))}async function _h(r){const e=Se(r),n=Br(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Dm;for(;U1(e);)try{const o=await _1(e.localStore,s);if(o===null){e.Ia.length===0&&n.k_();break}s=o.batchId,L1(e,o)}catch(o){await Jc(e,o)}Pb(e)&&Ub(e)}function U1(r){return zs(r)&&r.Ia.length<10}function L1(r,e){r.Ia.push(e);const n=Br(r);n.N_()&&n.ea&&n.ta(e.mutations)}function Pb(r){return zs(r)&&!Br(r).O_()&&r.Ia.length>0}function Ub(r){Br(r).start()}async function z1(r){Br(r).ia()}async function B1(r){const e=Br(r);for(const n of r.Ia)e.ta(n.mutations)}async function q1(r,e,n){const s=r.Ia.shift(),o=Lm.from(s,e,n);await jb(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await _h(r)}async function H1(r,e){e&&Br(r).ea&&await async function(s,o){if(function(d){return AS(d)&&d!==ee.ABORTED}(o.code)){const u=s.Ia.shift();Br(s).L_(),await jb(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await _h(s)}}(r,e),Pb(r)&&Ub(r)}async function M0(r,e){const n=Se(r);n.asyncQueue.verifyOperationInProgress(),ce(js,"RemoteStore received new credentials");const s=zs(n);n.da.add(3),await Xl(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await vh(n)}async function G1(r,e){const n=Se(r);e?(n.da.delete(2),await vh(n)):e||(n.da.add(2),await Xl(n),n.Va.set("Unknown"))}function so(r){return r.fa||(r.fa=function(n,s,o){const u=Se(n);return u.oa(),new I1(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:V1.bind(null,r),n_:M1.bind(null,r),i_:j1.bind(null,r),Y_:P1.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Xm(r)?Qm(r):r.Va.set("Unknown")):(await r.fa.stop(),Mb(r))})),r.fa}function Br(r){return r.ga||(r.ga=function(n,s,o){const u=Se(n);return u.oa(),new C1(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:z1.bind(null,r),i_:H1.bind(null,r),na:B1.bind(null,r),ra:q1.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await _h(r)):(await r.ga.stop(),r.Ia.length>0&&(ce(js,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new $m(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zm(r,e){if(Ki("AsyncQueue",`${e}: ${r}`),ro(r))return new he(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{static emptySet(e){return new za(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=xl(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new za;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(){this.pa=new st(ve.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):xe(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Za{constructor(e,n,s,o,u,d,m,y,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Za(e,n,za.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class K1{constructor(){this.queries=P0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Se(n),u=o.queries;o.queries=P0(),u.forEach((d,m)=>{for(const y of m.Sa)y.onError(s)})})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function P0(){return new Ls(r=>sb(r),dh)}async function Lb(r,e){const n=Se(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(s=2):(u=new F1,s=e.va()?0:1);try{switch(s){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=Zm(d,`Initialization of query '${ja(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&Wm(n)}async function zb(r,e){const n=Se(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Y1(r,e){const n=Se(r);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.Sa)m.Ma(o)&&(s=!0);d.ba=o}}s&&Wm(n)}function Q1(r,e,n){const s=Se(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Wm(r){r.Ca.forEach(e=>{e.next()})}var vm,U0;(U0=vm||(vm={})).xa="default",U0.Cache="cache";class Bb{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Za(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this.key=e}}class Hb{constructor(e){this.key=e}}class X1{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Me(),this.mutatedKeys=Me(),this.Za=ab(e),this.Xa=new za(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new j0,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,v=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,S)=>{const x=o.get(E),D=fh(this.query,S)?S:null,j=!!x&&this.mutatedKeys.has(x.key),Y=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let B=!1;x&&D?x.data.isEqual(D.data)?j!==Y&&(s.track({type:3,doc:D}),B=!0):this.ru(x,D)||(s.track({type:2,doc:D}),B=!0,(y&&this.Za(D,y)>0||v&&this.Za(D,v)<0)&&(m=!0)):!x&&D?(s.track({type:0,doc:D}),B=!0):x&&!D&&(s.track({type:1,doc:x}),B=!0,(y||v)&&(m=!0)),B&&(D?(d=d.add(D),u=Y?u.add(E):u.delete(E)):(d=d.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{Xa:d,nu:s,Cs:m,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((E,S)=>function(D,j){const Y=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:B})}};return Y(D)-Y(j)}(E.type,S.type)||this.Za(E.doc,S.doc)),this.iu(s),o=o!=null&&o;const m=n&&!o?this.su():[],y=this.Ya.size===0&&this.current&&!o?1:0,v=y!==this.Ja;return this.Ja=y,d.length!==0||v?{snapshot:new Za(this.query,e.Xa,u,d,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new j0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Me(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new Hb(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new qb(s))}),n}au(e){this.Ha=e.$s,this.Ya=Me();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Za.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Jm="SyncEngine";class $1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Z1{constructor(e){this.key=e,this.cu=!1}}class W1{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new Ls(m=>sb(m),dh),this.Pu=new Map,this.Tu=new Set,this.Iu=new st(ve.comparator),this.Eu=new Map,this.du=new qm,this.Au={},this.Ru=new Map,this.Vu=$a.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function J1(r,e,n=!0){const s=Xb(r);let o;const u=s.hu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await Gb(s,e,n,!0),o}async function eR(r,e){const n=Xb(r);await Gb(n,e,!0,!1)}async function Gb(r,e,n,s){const o=await b1(r.localStore,ui(e)),u=o.targetId,d=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await tR(r,e,u,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&kb(r.remoteStore,o),m}async function tR(r,e,n,s,o){r.fu=(S,x,D)=>async function(Y,B,ne,oe){let ue=B.view.tu(ne);ue.Cs&&(ue=await N0(Y.localStore,B.query,!1).then(({documents:k})=>B.view.tu(k,ue)));const ge=oe&&oe.targetChanges.get(B.targetId),K=oe&&oe.targetMismatches.get(B.targetId)!=null,te=B.view.applyChanges(ue,Y.isPrimaryClient,ge,K);return z0(Y,B.targetId,te.ou),te.snapshot}(r,S,x,D);const u=await N0(r.localStore,e,!0),d=new X1(e,u.$s),m=d.tu(u.documents),y=Ql.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),v=d.applyChanges(m,r.isPrimaryClient,y);z0(r,n,v.ou);const E=new $1(e,n,d);return r.hu.set(e,E),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),v.snapshot}async function nR(r,e,n){const s=Se(r),o=s.hu.get(e),u=s.Pu.get(o.targetId);if(u.length>1)return s.Pu.set(o.targetId,u.filter(d=>!dh(d,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await pm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Km(s.remoteStore,o.targetId),_m(s,o.targetId)}).catch(io)):(_m(s,o.targetId),await pm(s.localStore,o.targetId,!0))}async function iR(r,e){const n=Se(r),s=n.hu.get(e),o=n.Pu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Km(n.remoteStore,s.targetId))}async function rR(r,e,n){const s=hR(r);try{const o=await function(d,m){const y=Se(d),v=Rt.now(),E=m.reduce((D,j)=>D.add(j.key),Me());let S,x;return y.persistence.runTransaction("Locally write mutations","readwrite",D=>{let j=Yi(),Y=Me();return y.Bs.getEntries(D,E).next(B=>{j=B,j.forEach((ne,oe)=>{oe.isValidDocument()||(Y=Y.add(ne))})}).next(()=>y.localDocuments.getOverlayedDocuments(D,j)).next(B=>{S=B;const ne=[];for(const oe of m){const ue=bS(oe,S.get(oe.key).overlayedDocument);ue!=null&&ne.push(new Fr(oe.key,ue,Z_(ue.value.mapValue),kn.exists(!0)))}return y.mutationQueue.addMutationBatch(D,v,ne,m)}).next(B=>{x=B;const ne=B.applyToLocalDocumentSet(S,Y);return y.documentOverlayCache.saveOverlays(D,B.batchId,ne)})}).then(()=>({batchId:x.batchId,changes:lb(S)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,y){let v=d.Au[d.currentUser.toKey()];v||(v=new st(Ne)),v=v.insert(m,y),d.Au[d.currentUser.toKey()]=v}(s,o.batchId,n),await $l(s,o.changes),await _h(s.remoteStore)}catch(o){const u=Zm(o,"Failed to persist write");n.reject(u)}}async function Fb(r,e){const n=Se(r);try{const s=await y1(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Eu.get(u);d&&(He(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?He(d.cu,14607):o.removedDocuments.size>0&&(He(d.cu,42227),d.cu=!1))}),await $l(n,s,e)}catch(s){await io(s)}}function L0(r,e,n){const s=Se(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.hu.forEach((u,d)=>{const m=d.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const y=Se(d);y.onlineState=m;let v=!1;y.queries.forEach((E,S)=>{for(const x of S.Sa)x.Fa(m)&&(v=!0)}),v&&Wm(y)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function sR(r,e,n){const s=Se(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Eu.get(e),u=o&&o.key;if(u){let d=new st(ve.comparator);d=d.insert(u,Xt.newNoDocument(u,Ae.min()));const m=Me().add(u),y=new ph(Ae.min(),new Map,new st(Ne),d,m);await Fb(s,y),s.Iu=s.Iu.remove(u),s.Eu.delete(e),eg(s)}else await pm(s.localStore,e,!1).then(()=>_m(s,e,n)).catch(io)}async function aR(r,e){const n=Se(r),s=e.batch.batchId;try{const o=await p1(n.localStore,e);Yb(n,s,null),Kb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await $l(n,o)}catch(o){await io(o)}}async function oR(r,e,n){const s=Se(r);try{const o=await function(d,m){const y=Se(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let E;return y.mutationQueue.lookupMutationBatch(v,m).next(S=>(He(S!==null,37113),E=S.keys(),y.mutationQueue.removeMutationBatch(v,S))).next(()=>y.mutationQueue.performConsistencyCheck(v)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(v,E,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,E)).next(()=>y.localDocuments.getDocuments(v,E))})}(s.localStore,e);Yb(s,e,n),Kb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await $l(s,o)}catch(o){await io(o)}}function Kb(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function Yb(r,e,n){const s=Se(r);let o=s.Au[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function _m(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||Qb(r,s)})}function Qb(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(Km(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),eg(r))}function z0(r,e,n){for(const s of n)s instanceof qb?(r.du.addReference(s.key,e),lR(r,s)):s instanceof Hb?(ce(Jm,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||Qb(r,s.key)):xe(19791,{pu:s})}function lR(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(ce(Jm,"New document in limbo: "+n),r.Tu.add(s),eg(r))}function eg(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new ve(et.fromString(e)),s=r.Vu.next();r.Eu.set(s,new Z1(n)),r.Iu=r.Iu.insert(n,s),kb(r.remoteStore,new Dr(ui(jm(n.path)),s,"TargetPurposeLimboResolution",uh.le))}}async function $l(r,e,n){const s=Se(r),o=[],u=[],d=[];s.hu.isEmpty()||(s.hu.forEach((m,y)=>{d.push(s.fu(y,e,n).then(v=>{var E;if((v||n)&&s.isPrimaryClient){const S=v?!v.fromCache:(E=n==null?void 0:n.targetChanges.get(y.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(y.targetId,S?"current":"not-current")}if(v){o.push(v);const S=Gm.Rs(y.targetId,v);u.push(S)}}))}),await Promise.all(d),s.lu.Y_(o),await async function(y,v){const E=Se(y);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>J.forEach(v,x=>J.forEach(x.ds,D=>E.persistence.referenceDelegate.addReference(S,x.targetId,D)).next(()=>J.forEach(x.As,D=>E.persistence.referenceDelegate.removeReference(S,x.targetId,D)))))}catch(S){if(!ro(S))throw S;ce(Fm,"Failed to update sequence numbers: "+S)}for(const S of v){const x=S.targetId;if(!S.fromCache){const D=E.xs.get(x),j=D.snapshotVersion,Y=D.withLastLimboFreeSnapshotVersion(j);E.xs=E.xs.insert(x,Y)}}}(s.localStore,u))}async function uR(r,e){const n=Se(r);if(!n.currentUser.isEqual(e)){ce(Jm,"User change. New user:",e.toKey());const s=await Cb(n.localStore,e);n.currentUser=e,function(u,d){u.Ru.forEach(m=>{m.forEach(y=>{y.reject(new he(ee.CANCELLED,d))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await $l(n,s.ks)}}function cR(r,e){const n=Se(r),s=n.Eu.get(e);if(s&&s.cu)return Me().add(s.key);{let o=Me();const u=n.Pu.get(e);if(!u)return o;for(const d of u){const m=n.hu.get(d);o=o.unionWith(m.view.eu)}return o}}function Xb(r){const e=Se(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sR.bind(null,e),e.lu.Y_=Y1.bind(null,e.eventManager),e.lu.gu=Q1.bind(null,e.eventManager),e}function hR(r){const e=Se(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oR.bind(null,e),e}class eh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return g1(this.persistence,new d1,e.initialUser,this.serializer)}Su(e){return new Ib(Hm.fi,this.serializer)}bu(e){return new T1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eh.provider={build:()=>new eh};class dR extends eh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){He(this.persistence.referenceDelegate instanceof Wc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ZS(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?on.withCacheSize(this.cacheSizeBytes):on.DEFAULT;return new Ib(s=>Wc.fi(s,n),this.serializer)}}class bm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>L0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=uR.bind(null,this.syncEngine),await G1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new K1}()}createDatastore(e){const n=yh(e.databaseInfo.databaseId),s=function(u){return new R1(u)}(e.databaseInfo);return function(u,d,m,y){return new D1(u,d,m,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,d,m){return new k1(s,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>L0(this.syncEngine,n,0),function(){return k0.C()?new k0:new x1}())}createSyncEngine(e,n){return function(o,u,d,m,y,v,E){const S=new W1(o,u,d,m,y,v);return E&&(S.mu=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Se(o);ce(js,"RemoteStore shutting down."),u.da.add(5),await Xl(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}bm.provider={build:()=>new bm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ki("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class fR{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=B_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async d=>{ce(qr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(ce(qr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Zm(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Xf(r,e){r.asyncQueue.verifyOperationInProgress(),ce(qr,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await Cb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function B0(r,e){r.asyncQueue.verifyOperationInProgress();const n=await mR(r);ce(qr,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>M0(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>M0(e.remoteStore,o)),r._onlineComponents=e}async function mR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(qr,"Using user provided OfflineComponentProvider");try{await Xf(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Ka("Error using user provided cache. Falling back to memory cache: "+n),await Xf(r,new eh)}}else ce(qr,"Using default OfflineComponentProvider"),await Xf(r,new dR(void 0));return r._offlineComponents}async function Zb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(qr,"Using user provided OnlineComponentProvider"),await B0(r,r._uninitializedComponentsProvider._online)):(ce(qr,"Using default OnlineComponentProvider"),await B0(r,new bm))),r._onlineComponents}function gR(r){return Zb(r).then(e=>e.syncEngine)}async function Wb(r){const e=await Zb(r),n=e.eventManager;return n.onListen=J1.bind(null,e.syncEngine),n.onUnlisten=nR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iR.bind(null,e.syncEngine),n}function pR(r,e,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,y,v){const E=new $b({next:x=>{E.xu(),d.enqueueAndForget(()=>zb(u,S));const D=x.docs.has(m);!D&&x.fromCache?v.reject(new he(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&x.fromCache&&y&&y.source==="server"?v.reject(new he(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new Bb(jm(m.path),E,{includeMetadataChanges:!0,Qa:!0});return Lb(u,S)}(await Wb(r),r.asyncQueue,e,n,s)),s.promise}function yR(r,e,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,y,v){const E=new $b({next:x=>{E.xu(),d.enqueueAndForget(()=>zb(u,S)),x.fromCache&&y.source==="server"?v.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(x)},error:x=>v.reject(x)}),S=new Bb(m,E,{includeMetadataChanges:!0,Qa:!0});return Lb(u,S)}(await Wb(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eE(r,e,n){if(!n)throw new he(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function vR(r,e,n,s){if(e===!0&&s===!0)throw new he(ee.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function H0(r){if(!ve.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function G0(r){if(ve.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function bh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xe(12329,{type:typeof r})}function qn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bh(r);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="firestore.googleapis.com",F0=!0;class K0{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tE,this.ssl=F0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:F0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XS)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new AA;switch(s.type){case"firstParty":return new CA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=q0.get(n);s&&(ce("ComponentProvider","Removing Datastore"),q0.delete(n),s.terminate())}(this),Promise.resolve()}}function _R(r,e,n,s={}){var o;r=qn(r,Eh);const u=eo(e),d=r._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),y=`${e}:${n}`;u&&(w_(`https://${y}`),A_("Firestore",!0)),d.host!==tE&&d.host!==y&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const v=Object.assign(Object.assign({},d),{host:y,ssl:u,emulatorOptions:s});if(!ks(v,m)&&(r._setSettings(v),s.mockUserToken)){let E,S;if(typeof s.mockUserToken=="string")E=s.mockUserToken,S=Qt.MOCK_USER;else{E=Wx(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Qt(x)}r._authCredentials=new SA(new L_(E,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ao(this.firestore,e,this._query)}}class tn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}}class jr extends ao{constructor(e,n,s){super(e,n,jm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new ve(e))}withConverter(e){return new jr(this.firestore,e,this._path)}}function Hr(r,e,...n){if(r=Mt(r),eE("collection","path",e),r instanceof Eh){const s=et.fromString(e,...n);return G0(s),new jr(r,null,s)}{if(!(r instanceof tn||r instanceof jr))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...n));return G0(s),new jr(r.firestore,null,s)}}function nn(r,e,...n){if(r=Mt(r),arguments.length===1&&(e=B_.newId()),eE("doc","path",e),r instanceof Eh){const s=et.fromString(e,...n);return H0(s),new tn(r,null,new ve(s))}{if(!(r instanceof tn||r instanceof jr))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(et.fromString(e,...n));return H0(s),new tn(r.firestore,r instanceof jr?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="AsyncQueue";class Q0{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Db(this,"async_queue_retry"),this.rc=()=>{const s=Qf();s&&ce(Y0,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=Qf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Qf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Hi;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!ro(e))throw e;ce(Y0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Ki("INTERNAL UNHANDLED ERROR: ",X0(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=$m.createAndSchedule(this,e,n,s,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&xe(47125,{cc:X0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function X0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Bs extends Eh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new Q0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Q0(e),this._firestoreClient=void 0,await e}}}function bR(r,e){const n=typeof r=="object"?r:C_(),s=typeof r=="string"?r:Kc,o=Cm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=$x("firestore");u&&_R(o,...u)}return o}function tg(r){if(r._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||ER(r),r._firestoreClient}function ER(r){var e,n,s;const o=r._freezeSettings(),u=function(m,y,v,E){return new GA(m,y,v,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Jb(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new fR(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wa(Ht.fromBase64String(e))}catch(n){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wa(Ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=/^__.*__$/;class xR{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yl(e,this.data,n,this.fieldTransforms)}}class nE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ic:r})}}class rg{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return th(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(iE(this.Ic)&&TR.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class wR{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||yh(e)}bc(e,n,s,o=!1){return new rg({Ic:e,methodName:n,wc:s,path:qt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wh(r){const e=r._freezeSettings(),n=yh(r._databaseId);return new wR(r._databaseId,!!e.ignoreUndefinedProperties,n)}function rE(r,e,n,s,o,u={}){const d=r.bc(u.merge||u.mergeFields?2:0,e,n,o);ag("Data must be an object, but it was:",d,s);const m=sE(s,d);let y,v;if(u.merge)y=new vn(d.fieldMask),v=d.fieldTransforms;else if(u.mergeFields){const E=[];for(const S of u.mergeFields){const x=Em(e,S,n);if(!d.contains(x))throw new he(ee.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);oE(E,x)||E.push(x)}y=new vn(E),v=d.fieldTransforms.filter(S=>y.covers(S.field))}else y=null,v=d.fieldTransforms;return new xR(new ln(m),y,v)}class Ah extends xh{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ah}}class sg extends xh{_toFieldTransform(e){return new pS(e.path,new Ll)}isEqual(e){return e instanceof sg}}function AR(r,e,n,s){const o=r.bc(1,e,n);ag("Data must be an object, but it was:",o,s);const u=[],d=ln.empty();Gr(s,(y,v)=>{const E=og(e,y,n);v=Mt(v);const S=o.mc(E);if(v instanceof Ah)u.push(E);else{const x=Zl(v,S);x!=null&&(u.push(E),d.set(E,x))}});const m=new vn(u);return new nE(d,m,o.fieldTransforms)}function SR(r,e,n,s,o,u){const d=r.bc(1,e,n),m=[Em(e,s,n)],y=[o];if(u.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(Em(e,u[x])),y.push(u[x+1]);const v=[],E=ln.empty();for(let x=m.length-1;x>=0;--x)if(!oE(v,m[x])){const D=m[x];let j=y[x];j=Mt(j);const Y=d.mc(D);if(j instanceof Ah)v.push(D);else{const B=Zl(j,Y);B!=null&&(v.push(D),E.set(D,B))}}const S=new vn(v);return new nE(E,S,d.fieldTransforms)}function RR(r,e,n,s=!1){return Zl(n,r.bc(s?4:3,e))}function Zl(r,e){if(aE(r=Mt(r)))return ag("Unsupported field value:",e,r),sE(r,e);if(r instanceof xh)return function(s,o){if(!iE(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const u=[];let d=0;for(const m of s){let y=Zl(m,o.fc(d));y==null&&(y={nullValue:"NULL_VALUE"}),u.push(y),d++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=Mt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return fS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Rt.fromDate(s);return{timestampValue:Zc(o.serializer,u)}}if(s instanceof Rt){const u=new Rt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Zc(o.serializer,u)}}if(s instanceof ng)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Wa)return{bytesValue:bb(o.serializer,s._byteString)};if(s instanceof tn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Bm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ig)return function(d,m){return{mapValue:{fields:{[X_]:{stringValue:$_},[Yc]:{arrayValue:{values:d.toArray().map(v=>{if(typeof v!="number")throw m.gc("VectorValues must only contain numeric values.");return Pm(m.serializer,v)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${bh(s)}`)}(r,e)}function sE(r,e){const n={};return H_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gr(r,(s,o)=>{const u=Zl(o,e.Ac(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function aE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Rt||r instanceof ng||r instanceof Wa||r instanceof tn||r instanceof xh||r instanceof ig)}function ag(r,e,n){if(!aE(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=bh(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function Em(r,e,n){if((e=Mt(e))instanceof Th)return e._internalPath;if(typeof e=="string")return og(r,e);throw th("Field path arguments must be of type string or ",r,!1,void 0,n)}const IR=new RegExp("[~\\*/\\[\\]]");function og(r,e,n){if(e.search(IR)>=0)throw th(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Th(...e.split("."))._internalPath}catch{throw th(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function th(r,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(u||d)&&(y+=" (found",u&&(y+=` in field ${s}`),d&&(y+=` in document ${o}`),y+=")"),new he(ee.INVALID_ARGUMENT,m+r+y)}function oE(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class CR extends lE{data(){return super.data()}}function lg(r,e){return typeof e=="string"?og(r,e):e instanceof Th?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class DR extends ug{}function Sh(r,e,...n){let s=[];e instanceof ug&&s.push(e),s=s.concat(n),function(u){const d=u.filter(y=>y instanceof cg).length,m=u.filter(y=>y instanceof Rh).length;if(d>1||d>0&&m>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Rh extends DR{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Rh(e,n,s)}_apply(e){const n=this._parse(e);return uE(e._query,n),new ao(e.firestore,e.converter,cm(e._query,n))}_parse(e){const n=wh(e.firestore);return function(u,d,m,y,v,E,S){let x;if(v.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Z0(S,E);const j=[];for(const Y of S)j.push($0(y,u,Y));x={arrayValue:{values:j}}}else x=$0(y,u,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Z0(S,E),x=RR(m,d,S,E==="in"||E==="not-in");return bt.create(v,E,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ih(r,e,n){const s=e,o=lg("where",r);return Rh._create(o,s,n)}class cg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:Bn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const y of m)uE(d,y),d=cm(d,y)}(e._query,n),new ao(e.firestore,e.converter,cm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function $0(r,e,n){if(typeof(n=Mt(n))=="string"){if(n==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rb(e)&&n.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(et.fromString(n));if(!ve.isDocumentKey(s))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return h0(r,new ve(s))}if(n instanceof tn)return h0(r,n._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bh(n)}.`)}function Z0(r,e){if(!Array.isArray(r)||r.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uE(r,e){const n=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class OR{convertValue(e,n="none"){switch(zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Gr(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Yc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>mt(d.doubleValue));return new ig(u)}convertGeoPoint(e){return new ng(mt(e.latitude),mt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=hh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=et.fromString(e);He(Sb(s),9688,{name:e});const o=new Pl(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||Ki(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hE extends lE{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(lg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Uc extends hE{data(e={}){return super.data(e)}}class kR{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Al(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Uc(this._firestore,this._userDataWriter,s.key,s,new Al(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const y=new Uc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Al(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const y=new Uc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Al(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let v=-1,E=-1;return m.type!==0&&(v=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),E=d.indexOf(m.doc.key)),{type:VR(m.type),doc:y,oldIndex:v,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function VR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(r){r=qn(r,tn);const e=qn(r.firestore,Bs);return pR(tg(e),r._key).then(n=>jR(e,r,n))}class dE extends OR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}function Ja(r){r=qn(r,ao);const e=qn(r.firestore,Bs),n=tg(e),s=new dE(e);return NR(r._query),yR(n,r._query).then(o=>new kR(e,s,r,o))}function li(r,e,n){r=qn(r,tn);const s=qn(r.firestore,Bs),o=cE(r.converter,e,n);return Ch(s,[rE(wh(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,kn.none())])}function fE(r,e,n,...s){r=qn(r,tn);const o=qn(r.firestore,Bs),u=wh(o);let d;return d=typeof(e=Mt(e))=="string"||e instanceof Th?SR(u,"updateDoc",r._key,e,n,s):AR(u,"updateDoc",r._key,e),Ch(o,[d.toMutation(r._key,kn.exists(!0))])}function MR(r){return Ch(qn(r.firestore,Bs),[new Um(r._key,kn.none())])}function mE(r,e){const n=qn(r.firestore,Bs),s=nn(r),o=cE(r.converter,e);return Ch(n,[rE(wh(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,kn.exists(!1))]).then(()=>s)}function Ch(r,e){return function(s,o){const u=new Hi;return s.asyncQueue.enqueueAndForget(async()=>rR(await gR(s),o,u)),u.promise}(tg(r),e)}function jR(r,e,n){const s=n.docs.get(e._key),o=new dE(r);return new hE(r,o,e._key,s,new Al(n.hasPendingWrites,n.fromCache),e.converter)}function Sr(){return new sg("serverTimestamp")}(function(e,n=!0){(function(o){no=o})(to),Fa(new Vs("firestore",(s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new Bs(new RA(s.getProvider("auth-internal")),new NA(d,s.getProvider("app-check-internal")),function(v,E){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pl(v.options.projectId,E)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Vr(Jv,e0,e),Vr(Jv,e0,"esm2017")})();var PR="firebase",UR="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(PR,UR,"app");function hg(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function gE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LR=gE,pE=new Gl("auth","Firebase",gE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new Rm("@firebase/auth");function zR(r,...e){nh.logLevel<=Ve.WARN&&nh.warn(`Auth (${to}): ${r}`,...e)}function Lc(r,...e){nh.logLevel<=Ve.ERROR&&nh.error(`Auth (${to}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(r,...e){throw dg(r,...e)}function hi(r,...e){return dg(r,...e)}function yE(r,e,n){const s=Object.assign(Object.assign({},LR()),{[e]:n});return new Gl("auth","Firebase",s).create(e,{appName:r.name})}function Gi(r){return yE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dg(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return pE.create(r,...e)}function Te(r,e,...n){if(!r)throw dg(e,...n)}function Bi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Lc(e),new Error(e)}function Qi(r,e){r||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function BR(){return W0()==="http:"||W0()==="https:"}function W0(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BR()||rw()||"connection"in navigator)?navigator.onLine:!0}function HR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qi(n>e,"Short delay should be less than long delay!"),this.isMobile=tw()||sw()}get(){return qR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(r,e){Qi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KR=new Wl(3e4,6e4);function Kr(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Yr(r,e,n,s,o={}){return _E(r,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=Fl(Object.assign({key:r.config.apiKey},d)).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const v=Object.assign({method:e,headers:y},u);return iw()||(v.referrerPolicy="no-referrer"),r.emulatorConfig&&eo(r.emulatorConfig.host)&&(v.credentials="include"),vE.fetch()(await bE(r,r.config.apiHost,n,m),v)})}async function _E(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},GR),e);try{const o=new QR(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Dc(r,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[y,v]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dc(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw Dc(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw Dc(r,"user-disabled",d);const E=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw yE(r,E,v);Hn(r,E)}}catch(o){if(o instanceof Xi)throw o;Hn(r,"network-request-failed",{message:String(o)})}}async function Jl(r,e,n,s,o={}){const u=await Yr(r,e,n,s,o);return"mfaPendingCredential"in u&&Hn(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function bE(r,e,n,s){const o=`${e}${n}?${s}`,u=r,d=u.config.emulator?fg(r.config,o):`${r.config.apiScheme}://${o}`;return FR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function YR(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class QR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hi(this.auth,"network-request-failed")),KR.get())})}}function Dc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=hi(r,e,s);return o.customData._tokenResponse=n,o}function J0(r){return r!==void 0&&r.enterprise!==void 0}class XR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return YR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $R(r,e){return Yr(r,"GET","/v2/recaptchaConfig",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(r,e){return Yr(r,"POST","/v1/accounts:delete",e)}async function ih(r,e){return Yr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WR(r,e=!1){const n=Mt(r),s=await n.getIdToken(e),o=mg(s);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:kl($f(o.auth_time)),issuedAtTime:kl($f(o.iat)),expirationTime:kl($f(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function $f(r){return Number(r)*1e3}function mg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Lc("JWT malformed, contained fewer than 3 sections"),null;try{const o=b_(n);return o?JSON.parse(o):(Lc("Failed to decode base64 JWT payload"),null)}catch(o){return Lc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function e_(r){const e=mg(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Xi&&JR(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function JR({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=kl(this.lastLoginAt),this.creationTime=kl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rh(r){var e;const n=r.auth,s=await r.getIdToken(),o=await ql(r,ih(n,{idToken:s}));Te(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?EE(u.providerUserInfo):[],m=nI(r.providerData,d),y=r.isAnonymous,v=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),E=y?v:!1,S={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new xm(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,S)}async function tI(r){const e=Mt(r);await rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nI(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function EE(r){return r.map(e=>{var{providerId:n}=e,s=hg(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(r,e){const n=await _E(r,{},async()=>{const s=Fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,d=await bE(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:s};return r.emulatorConfig&&eo(r.emulatorConfig.host)&&(y.credentials="include"),vE.fetch()(d,y)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rI(r,e){return Yr(r,"POST","/v2/accounts:revokeToken",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=e_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await iI(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new qa;return s&&(Te(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class zn{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=hg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new xm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await ql(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return WR(this,e)}reload(){return tI(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await rh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(Gi(this.auth));const e=await this.getIdToken();return await ql(this,ZR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,d,m,y,v,E;const S=(s=n.displayName)!==null&&s!==void 0?s:void 0,x=(o=n.email)!==null&&o!==void 0?o:void 0,D=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,j=(d=n.photoURL)!==null&&d!==void 0?d:void 0,Y=(m=n.tenantId)!==null&&m!==void 0?m:void 0,B=(y=n._redirectEventId)!==null&&y!==void 0?y:void 0,ne=(v=n.createdAt)!==null&&v!==void 0?v:void 0,oe=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:ue,emailVerified:ge,isAnonymous:K,providerData:te,stsTokenManager:k}=n;Te(ue&&k,e,"internal-error");const A=qa.fromJSON(this.name,k);Te(typeof ue=="string",e,"internal-error"),Ar(S,e.name),Ar(x,e.name),Te(typeof ge=="boolean",e,"internal-error"),Te(typeof K=="boolean",e,"internal-error"),Ar(D,e.name),Ar(j,e.name),Ar(Y,e.name),Ar(B,e.name),Ar(ne,e.name),Ar(oe,e.name);const I=new zn({uid:ue,auth:e,email:x,emailVerified:ge,displayName:S,isAnonymous:K,photoURL:j,phoneNumber:D,tenantId:Y,stsTokenManager:A,createdAt:ne,lastLoginAt:oe});return te&&Array.isArray(te)&&(I.providerData=te.map(N=>Object.assign({},N))),B&&(I._redirectEventId=B),I}static async _fromIdTokenResponse(e,n,s=!1){const o=new qa;o.updateFromServerResponse(n);const u=new zn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await rh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?EE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new qa;m.updateFromIdToken(s);const y=new zn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new xm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(y,v),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;function qi(r){Qi(r instanceof Function,"Expected a class definition");let e=t_.get(r);return e?(Qi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,t_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TE.type="NONE";const n_=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(r,e,n){return`firebase:${r}:${e}:${n}`}class Ha{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=zc(this.userKey,o.apiKey,u),this.fullPersistenceKey=zc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ih(this.auth,{idToken:e}).catch(()=>{});return n?zn._fromGetAccountInfoResponse(this.auth,n,e):null}return zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ha(qi(n_),e,s);const o=(await Promise.all(n.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let u=o[0]||qi(n_);const d=zc(s,e.config.apiKey,e.name);let m=null;for(const v of n)try{const E=await v._get(d);if(E){let S;if(typeof E=="string"){const x=await ih(e,{idToken:E}).catch(()=>{});if(!x)break;S=await zn._fromGetAccountInfoResponse(e,x,E)}else S=zn._fromJSON(e,E);v!==u&&(m=S),u=v;break}}catch{}const y=o.filter(v=>v._shouldAllowMigration);return!u._shouldAllowMigration||!y.length?new Ha(u,e,s):(u=y[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async v=>{if(v!==u)try{await v._remove(d)}catch{}})),new Ha(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IE(e))return"Blackberry";if(CE(e))return"Webos";if(wE(e))return"Safari";if((e.includes("chrome/")||AE(e))&&!e.includes("edge/"))return"Chrome";if(RE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function xE(r=$t()){return/firefox\//i.test(r)}function wE(r=$t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AE(r=$t()){return/crios\//i.test(r)}function SE(r=$t()){return/iemobile/i.test(r)}function RE(r=$t()){return/android/i.test(r)}function IE(r=$t()){return/blackberry/i.test(r)}function CE(r=$t()){return/webos/i.test(r)}function gg(r=$t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function sI(r=$t()){var e;return gg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function aI(){return aw()&&document.documentMode===10}function NE(r=$t()){return gg(r)||RE(r)||CE(r)||IE(r)||/windows phone/i.test(r)||SE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(r,e=[]){let n;switch(r){case"Browser":n=i_($t());break;case"Worker":n=`${i_($t())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${to}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const y=e(u);d(y)}catch(y){m(y)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(r,e={}){return Yr(r,"GET","/v2/passwordPolicy",Kr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=6;class cI{constructor(e){var n,s,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:uI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,d,m;const y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,y),this.validatePasswordCharacterOptions(e,y),y.isValid&&(y.isValid=(n=y.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),y.isValid&&(y.isValid=(s=y.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),y.isValid&&(y.isValid=(o=y.containsLowercaseLetter)!==null&&o!==void 0?o:!0),y.isValid&&(y.isValid=(u=y.containsUppercaseLetter)!==null&&u!==void 0?u:!0),y.isValid&&(y.isValid=(d=y.containsNumericCharacter)!==null&&d!==void 0?d:!0),y.isValid&&(y.isValid=(m=y.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),y}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new r_(this),this.idTokenSubscription=new r_(this),this.beforeStateQueue=new oI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ih(this,{idToken:e}),s=await zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(On(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,y=await this.tryRedirectSignIn(e);(!d||d===m)&&(y!=null&&y.user)&&(o=y.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(Gi(this));const n=e?Mt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(Gi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(Gi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lI(this),n=new cI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await rI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qi(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const y=e.addObserver(n,s,o);return()=>{d=!0,y()}}else{const y=e.addObserver(n);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qs(r){return Mt(r)}class r_{constructor(e){this.auth=e,this.observer=null,this.addObserver=mw(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dI(r){Nh=r}function OE(r){return Nh.loadJS(r)}function fI(){return Nh.recaptchaEnterpriseScript}function mI(){return Nh.gapiScript}function gI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class pI{constructor(){this.enterprise=new yI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class yI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const vI="recaptcha-enterprise",kE="NO_RECAPTCHA";class _I{constructor(e){this.type=vI,this.auth=qs(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{$R(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const v=new XR(y);return u.tenantId==null?u._agentRecaptchaConfig=v:u._tenantRecaptchaConfigs[u.tenantId]=v,d(v.siteKey)}}).catch(y=>{m(y)})})}function o(u,d,m){const y=window.grecaptcha;J0(y)?y.enterprise.ready(()=>{y.enterprise.execute(u,{action:e}).then(v=>{d(v)}).catch(()=>{d(kE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pI().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&J0(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=fI();y.length!==0&&(y+=m),OE(y).then(()=>{o(m,u,d)}).catch(v=>{d(v)})}}).catch(m=>{d(m)})})}}async function s_(r,e,n,s=!1,o=!1){const u=new _I(r);let d;if(o)d=kE;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,v=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:v,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function wm(r,e,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await s_(r,e,n,n==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await s_(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(r,e){const n=Cm(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ks(u,e??{}))return o;Hn(o,"already-initialized")}return n.initialize({options:e})}function EI(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(qi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function TI(r,e,n){const s=qs(r);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=VE(e),{host:d,port:m}=xI(e),y=m===null?"":`:${m}`,v={url:`${u}//${d}${y}/`},E=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(ks(v,s.config.emulator)&&ks(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=v,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,eo(d)?(w_(`${u}//${d}${y}`),A_("Auth",!0)):wI()}function VE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function xI(r){const e=VE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:a_(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:a_(d)}}}function a_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function wI(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,n){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function AI(r,e){return Yr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SI(r,e){return Jl(r,"POST","/v1/accounts:signInWithPassword",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(r,e){return Jl(r,"POST","/v1/accounts:signInWithEmailLink",Kr(r,e))}async function II(r,e){return Jl(r,"POST","/v1/accounts:signInWithEmailLink",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends pg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Hl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Hl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wm(e,n,"signInWithPassword",SI);case"emailLink":return RI(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wm(e,s,"signUpPassword",AI);case"emailLink":return II(e,{idToken:n,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(r,e){return Jl(r,"POST","/v1/accounts:signInWithIdp",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="http://localhost";class Ps extends pg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=hg(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new Ps(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Ga(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ga(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ga(e,n)}buildRequest(){const e={requestUri:CI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DI(r){const e=bl(El(r)).link,n=e?bl(El(e)).deep_link_id:null,s=bl(El(r)).deep_link_id;return(s?bl(El(s)).link:null)||s||n||e||r}class yg{constructor(e){var n,s,o,u,d,m;const y=bl(El(e)),v=(n=y.apiKey)!==null&&n!==void 0?n:null,E=(s=y.oobCode)!==null&&s!==void 0?s:null,S=NI((o=y.mode)!==null&&o!==void 0?o:null);Te(v&&E&&S,"argument-error"),this.apiKey=v,this.operation=S,this.code=E,this.continueUrl=(u=y.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=y.lang)!==null&&d!==void 0?d:null,this.tenantId=(m=y.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=DI(e);try{return new yg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.providerId=oo.PROVIDER_ID}static credential(e,n){return Hl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=yg.parseLink(n);return Te(s,"argument-error"),Hl._fromEmailAndCode(e,s.code,s.tenantId)}}oo.PROVIDER_ID="password";oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends ME{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends eu{constructor(){super("facebook.com")}static credential(e){return Ps._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends eu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ps._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ir.credential(n,s)}catch{return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends eu{constructor(){super("github.com")}static credential(e){return Ps._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.GITHUB_SIGN_IN_METHOD="github.com";Cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends eu{constructor(){super("twitter.com")}static credential(e,n){return Ps._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(r,e){return Jl(r,"POST","/v1/accounts:signUp",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await zn._fromIdTokenResponse(e,s,o),d=o_(s);return new Us({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=o_(s);return new Us({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function o_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends Xi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,sh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new sh(e,n,s,o)}}function jE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?sh._fromErrorAndOperation(r,u,e,s):u})}async function kI(r,e,n=!1){const s=await ql(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Us._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(r,e,n=!1){const{auth:s}=r;if(On(s.app))return Promise.reject(Gi(s));const o="reauthenticate";try{const u=await ql(r,jE(s,o,e,r),n);Te(u.idToken,s,"internal-error");const d=mg(u.idToken);Te(d,s,"internal-error");const{sub:m}=d;return Te(r.uid===m,s,"user-mismatch"),Us._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Hn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PE(r,e,n=!1){if(On(r.app))return Promise.reject(Gi(r));const s="signIn",o=await jE(r,s,e),u=await Us._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function MI(r,e){return PE(qs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UE(r){const e=qs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function jI(r,e,n){if(On(r.app))return Promise.reject(Gi(r));const s=qs(r),d=await wm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OI).catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&UE(r),y}),m=await Us._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function PI(r,e,n){return On(r.app)?Promise.reject(Gi(r)):MI(Mt(r),oo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&UE(r),s})}function UI(r,e,n,s){return Mt(r).onIdTokenChanged(e,n,s)}function LI(r,e,n){return Mt(r).beforeAuthStateChanged(e,n)}function zI(r,e,n,s){return Mt(r).onAuthStateChanged(e,n,s)}function BI(r){return Mt(r).signOut()}const ah="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ah,"1"),this.storage.removeItem(ah),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI=1e3,HI=10;class zE extends LE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,y)=>{this.notifyListeners(d,y)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);aI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},qI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zE.type="LOCAL";const GI=zE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends LE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BE.type="SESSION";const qE=BE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Dh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async v=>v(n.origin,u)),y=await FI(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:y})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,y)=>{const v=vg("",20);o.port1.start();const E=setTimeout(()=>{y(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(S){const x=S;if(x.data.eventId===v)switch(x.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(E),clearTimeout(u),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:v,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function YI(r){di().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function QI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function $I(){return HE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE="firebaseLocalStorageDb",ZI=1,oh="firebaseLocalStorage",FE="fbase_key";class tu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Oh(r,e){return r.transaction([oh],e?"readwrite":"readonly").objectStore(oh)}function WI(){const r=indexedDB.deleteDatabase(GE);return new tu(r).toPromise()}function Am(){const r=indexedDB.open(GE,ZI);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(oh,{keyPath:FE})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(oh)?e(s):(s.close(),await WI(),e(await Am()))})})}async function l_(r,e,n){const s=Oh(r,!0).put({[FE]:e,value:n});return new tu(s).toPromise()}async function JI(r,e){const n=Oh(r,!1).get(e),s=await new tu(n).toPromise();return s===void 0?null:s.value}function u_(r,e){const n=Oh(r,!0).delete(e);return new tu(n).toPromise()}const eC=800,tC=3;class KE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>tC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dh._getInstance($I()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await QI(),!this.activeServiceWorker)return;this.sender=new KI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Am();return await l_(e,ah,"1"),await u_(e,ah),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>l_(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>JI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>u_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Oh(o,!1).getAll();return new tu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KE.type="LOCAL";const nC=KE;new Wl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(r,e){return e?qi(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g extends pg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ga(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function rC(r){return PE(r.auth,new _g(r),r.bypassAuthState)}function sC(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),VI(n,new _g(r),r.bypassAuthState)}async function aC(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),kI(n,new _g(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rC;case"linkViaPopup":case"linkViaRedirect":return aC;case"reauthViaPopup":case"reauthViaRedirect":return sC;default:Hn(this.auth,"internal-error")}}resolve(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=new Wl(2e3,1e4);class La extends YE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,La.currentPopupAction&&La.currentPopupAction.cancel(),La.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Qi(this.filter.length===1,"Popup operations only handle one event");const e=vg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,La.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oC.get())};e()}}La.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="pendingRedirect",Bc=new Map;class uC extends YE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Bc.get(this.auth._key());if(!e){try{const s=await cC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Bc.set(this.auth._key(),e)}return this.bypassAuthState||Bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cC(r,e){const n=fC(e),s=dC(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function hC(r,e){Bc.set(r._key(),e)}function dC(r){return qi(r._redirectPersistence)}function fC(r){return zc(lC,r.config.apiKey,r.name)}async function mC(r,e,n=!1){if(On(r.app))return Promise.reject(Gi(r));const s=qs(r),o=iC(s,e),d=await new uC(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=10*60*1e3;class pC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!QE(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(hi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gC&&this.cachedEventUids.clear(),this.cachedEventUids.has(c_(e))}saveEventToCache(e){this.cachedEventUids.add(c_(e)),this.lastProcessedEventTime=Date.now()}}function c_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function QE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(r,e={}){return Yr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,bC=/^https?/;async function EC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await vC(r);for(const n of e)try{if(TC(n))return}catch{}Hn(r,"unauthorized-domain")}function TC(r){const e=Tm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!bC.test(n))return!1;if(_C.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new Wl(3e4,6e4);function h_(){const r=di().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function wC(r){return new Promise((e,n)=>{var s,o,u;function d(){h_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h_(),n(hi(r,"network-request-failed"))},timeout:xC.get()})}if(!((o=(s=di().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=di().gapi)===null||u===void 0)&&u.load)d();else{const m=gI("iframefcb");return di()[m]=()=>{gapi.load?d():n(hi(r,"network-request-failed"))},OE(`${mI()}?onload=${m}`).catch(y=>n(y))}}).catch(e=>{throw qc=null,e})}let qc=null;function AC(r){return qc=qc||wC(r),qc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=new Wl(5e3,15e3),RC="__/auth/iframe",IC="emulator/auth/iframe",CC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DC(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?fg(e,IC):`https://${r.config.authDomain}/${RC}`,s={apiKey:e.apiKey,appName:r.name,v:to},o=NC.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Fl(s).slice(1)}`}async function OC(r){const e=await AC(r),n=di().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:DC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=hi(r,"network-request-failed"),m=di().setTimeout(()=>{u(d)},SC.get());function y(){di().clearTimeout(m),o(s)}s.ping(y).then(y,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VC=500,MC=600,jC="_blank",PC="http://localhost";class d_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UC(r,e,n,s=VC,o=MC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const y=Object.assign(Object.assign({},kC),{width:s.toString(),height:o.toString(),top:u,left:d}),v=$t().toLowerCase();n&&(m=AE(v)?jC:n),xE(v)&&(e=e||PC,y.scrollbars="yes");const E=Object.entries(y).reduce((x,[D,j])=>`${x}${D}=${j},`,"");if(sI(v)&&m!=="_self")return LC(e||"",m),new d_(null);const S=window.open(e||"",m,E);Te(S,r,"popup-blocked");try{S.focus()}catch{}return new d_(S)}function LC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="__/auth/handler",BC="emulator/auth/handler",qC=encodeURIComponent("fac");async function f_(r,e,n,s,o,u){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:to,eventId:o};if(e instanceof ME){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",fw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))d[E]=S}if(e instanceof eu){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const y=await r._getAppCheckToken(),v=y?`#${qC}=${encodeURIComponent(y)}`:"";return`${HC(r)}?${Fl(m).slice(1)}${v}`}function HC({config:r}){return r.emulator?fg(r,BC):`https://${r.authDomain}/${zC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="webStorageSupport";class GC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qE,this._completeRedirectFn=mC,this._overrideRedirectResult=hC}async _openPopup(e,n,s,o){var u;Qi((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await f_(e,n,s,Tm(),o);return UC(e,d,vg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await f_(e,n,s,Tm(),o);return YI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Qi(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await OC(e),s=new pC(e);return n.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zf,{type:Zf},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Zf];d!==void 0&&n(!!d),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NE()||wE()||gg()}}const FC=GC;var m_="@firebase/auth",g_="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QC(r){Fa(new Vs("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Te(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DE(r)},v=new hI(s,o,u,y);return EI(v,n),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Fa(new Vs("auth-internal",e=>{const n=qs(e.getProvider("auth").getImmediate());return(s=>new KC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(m_,g_,YC(r)),Vr(m_,g_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=5*60,$C=x_("authIdTokenMaxAge")||XC;let p_=null;const ZC=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>$C)return;const o=n==null?void 0:n.token;p_!==o&&(p_=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function WC(r=C_()){const e=Cm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=bI(r,{popupRedirectResolver:FC,persistence:[nC,GI,qE]}),s=x_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=ZC(u.toString());LI(n,d,()=>d(n.currentUser)),UI(n,m=>d(m))}}const o=E_("auth");return o&&TI(n,`http://${o}`),n}function JC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}dI({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=hi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",JC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QC("Browser");const e2={apiKey:"AIzaSyDiPG7ecBiVdu2G0SyLaHnzF31K8NRNtyA",authDomain:"summery-23833.firebaseapp.com",projectId:"summery-23833",storageBucket:"summery-23833.firebasestorage.app",messagingSenderId:"816198973728",appId:"1:816198973728:web:176ca98e3e5de114667f45",measurementId:"G-TJ39GVQV67"},XE=I_(e2),ut=bR(XE),Oc=WC(XE),$E=fe.createContext(),mi=()=>{const r=fe.useContext($E);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},t2=({children:r})=>{const[e,n]=fe.useState(null),[s,o]=fe.useState(!0);fe.useEffect(()=>zI(Oc,async S=>{S&&await u(S),n(S),o(!1)}),[]);const u=async E=>{var S,x;try{const D=nn(ut,"users",E.uid);(await Ba(D)).exists()?await li(D,{lastLogin:Sr()},{merge:!0}):(console.log("👤 トップレベルユーザードキュメントを作成中:",E.email),await li(D,{email:E.email,uid:E.uid,displayName:E.displayName||((S=E.email)==null?void 0:S.split("@")[0])||"ユーザー",createdAt:Sr(),lastLogin:Sr()}));const Y=nn(ut,"users",E.uid,"profile","config");(await Ba(Y)).exists()?await li(Y,{lastLogin:Sr()},{merge:!0}):(console.log("👤 ユーザープロフィールを作成中:",E.email),await li(Y,{name:E.displayName||((x=E.email)==null?void 0:x.split("@")[0])||"ユーザー",email:E.email,language:"ja",theme:"light",notifications:{email:!0,browser:!0,surgingChannels:!0},preferences:{defaultSort:"growthRate",itemsPerPage:20,autoRefresh:!1},registeredAt:Sr(),lastLogin:Sr()}),console.log("✅ ユーザープロフィール作成完了"));const ne=nn(ut,"users",E.uid,"settings","config");(await Ba(ne)).exists()||(console.log("⚙️ ユーザー設定を作成中"),await li(ne,{youtubeApiKey:"",searchKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music"],collectionFrequency:"daily",keywordCount:8,videosPerKeyword:40,maxChannelsPerRun:150,monthsThreshold:3,minSubscribers:1e3,maxSubscribers:5e5,minVideos:5,minGrowthRate:10,bgmKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music","meditation","sleep music"],bgmExclusions:["lyrics","歌詞","vocal","sing","rap","talk","podcast"],trackingFrequency:"weekly",trackingRetentionDays:365,theme:"light",defaultSort:"growthRate",itemsPerPage:20,enableApiUsageDisplay:!0,maxDailyApiCalls:1e4,createdAt:Sr()}),console.log("✅ ユーザー設定作成完了"))}catch(D){console.error("ユーザードキュメント作成エラー:",D)}},v={user:e,login:async(E,S)=>{try{return(await PI(Oc,E,S)).user}catch(x){throw x}},register:async(E,S)=>{try{return(await jI(Oc,E,S)).user}catch(x){throw x}},logout:async()=>{try{await BI(Oc)}catch(E){throw E}},loading:s};return g.jsx($E.Provider,{value:v,children:r})},n2=({currentView:r,onViewChange:e})=>{const{user:n,logout:s}=mi(),[o,u]=fe.useState(!1);fe.useEffect(()=>{const y=localStorage.getItem("theme"),v=window.matchMedia("(prefers-color-scheme: dark)").matches;y==="dark"||!y&&v?(u(!0),document.documentElement.classList.add("dark")):(u(!1),document.documentElement.classList.remove("dark"))},[]);const d=()=>{const y=!o;u(y),y?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},m=[{id:"channels",label:"チャンネル一覧",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"history",label:"履歴",icon:"📋"},{id:"profile",label:"プロフィール",icon:"👤"},{id:"settings",label:"設定",icon:"⚙️"}];return g.jsx("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors",children:g.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[g.jsxs("div",{className:"flex justify-between items-center h-16",children:[g.jsx("div",{className:"flex items-center min-w-0 flex-1",children:g.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white truncate",children:"🎵 YouTube BGM分析"})}),g.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[g.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden sm:block truncate max-w-32",children:n==null?void 0:n.email}),g.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"ダークモード切り替え",children:o?"☀️":"🌙"}),g.jsx("button",{onClick:s,className:"p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"ログアウト",children:"🚪"})]})]}),g.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:g.jsx("nav",{className:"flex space-x-0 overflow-x-auto",children:m.map(y=>g.jsxs("button",{onClick:()=>e(y.id),className:`flex-shrink-0 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${r===y.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:border-gray-300 dark:hover:border-gray-600"}`,children:[g.jsx("span",{className:"mr-2",children:y.icon}),g.jsx("span",{className:"whitespace-nowrap",children:y.label})]},y.id))})})]})})},i2=({filters:r,onFiltersChange:e})=>{const n=u=>{e({...r,sortBy:u})},s=u=>{e({...r,filterBy:u})},o=u=>{e({...r,search:u})};return g.jsx("div",{className:"card mb-8",children:g.jsxs("div",{className:"flex flex-wrap gap-6 items-center",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-sm font-medium text-gray-700",children:"並び替え:"}),g.jsxs("select",{value:r.sortBy,onChange:u=>n(u.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[g.jsx("option",{value:"growth_rate",children:"成長率順"}),g.jsx("option",{value:"subscribers",children:"登録者数順"}),g.jsx("option",{value:"views",children:"再生回数順"}),g.jsx("option",{value:"recent_videos",children:"最新動画数順"}),g.jsx("option",{value:"added_date",children:"追加日順"})]})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("label",{className:"text-sm font-medium text-gray-700",children:"フィルター:"}),g.jsxs("select",{value:r.filterBy,onChange:u=>s(u.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[g.jsx("option",{value:"unset",children:"未仕分け"}),g.jsx("option",{value:"all",children:"全て"}),g.jsx("option",{value:"tracking",children:"トラッキング中"}),g.jsx("option",{value:"non-tracking",children:"対象外"}),g.jsx("option",{value:"rejected",children:"除外済み"}),g.jsx("option",{value:"growing",children:"成長中"}),g.jsx("option",{value:"large",children:"大規模"}),g.jsx("option",{value:"small",children:"小規模"})]})]}),g.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[g.jsx("label",{className:"text-sm font-medium text-gray-700",children:"検索:"}),g.jsx("input",{type:"text",value:r.search,onChange:u=>o(u.target.value),placeholder:"チャンネル名検索...",className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent flex-1 min-w-0"})]})]})})},r2=({channels:r})=>{const e=r.length,n=r.length>0?Math.round(r.reduce((o,u)=>o+(u.growthRate||0),0)/r.length):0,s=r.length>0?r.reduce((o,u)=>(u.growthRate||0)>(o.growthRate||0)?u:o,r[0]):null;return g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[g.jsxs("div",{className:"stat-card",children:[g.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:e}),g.jsx("div",{className:"text-sm text-gray-600",children:"追跡チャンネル数"})]}),g.jsxs("div",{className:"stat-card",children:[g.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:[n,"%"]}),g.jsx("div",{className:"text-sm text-gray-600",children:"平均成長率"})]}),g.jsxs("div",{className:"stat-card",children:[g.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1 truncate",children:s?s.channelTitle:"-"}),g.jsx("div",{className:"text-sm text-gray-600",children:"トップパフォーマー"})]})]})};async function kh(r){if(!r)throw new Error("ユーザーIDが必要です");try{const e=await Ba(nn(ut,"users",r,"settings","config"));if(!e.exists())throw new Error(`⚠️ 設定が見つかりません。

📋 対処法：
1. 画面右上の「設定」タブをクリック
2. YouTube APIキーを入力して保存
3. 再度お試しください`);const n=e.data().youtubeApiKey;if(!n||n.trim()==="")throw new Error(`🔑 YouTube APIキーが設定されていません。

📋 設定手順：
1. Google Cloud Consoleでプロジェクトを作成
2. YouTube Data API v3を有効化
3. APIキーを作成
4. 設定画面でAPIキーを入力`);if(!n.startsWith("AIza")||n.length<35)throw new Error(`❌ APIキーの形式が正しくありません。

YouTube Data API v3のAPIキーは「AIza」で始まり、39文字の長さである必要があります。`);return n}catch(e){throw console.error("APIキー取得エラー:",e),e}}function ZE(r){const e=r.trim(),n=[/youtube\.com\/channel\/([UC][a-zA-Z0-9_-]{22})/,/youtube\.com\/c\/([a-zA-Z0-9_-]+)/,/youtube\.com\/user\/([a-zA-Z0-9_-]+)/,/youtube\.com\/@([a-zA-Z0-9_-]+)/,/^(UC[a-zA-Z0-9_-]{22})$/];for(const s of n){const o=e.match(s);if(o)return o[1]}return e}async function WE(r,e){var n,s,o,u,d,m,y;try{const v=await kh(e),E="https://www.googleapis.com/youtube/v3/channels",S=new URLSearchParams({key:v,id:r,part:"snippet,statistics,contentDetails"}),x=await fetch(`${E}?${S}`),D=await x.json();if(!x.ok)throw new Error(((n=D.error)==null?void 0:n.message)||"API呼び出しエラー");if(!D.items||D.items.length===0)throw new Error("チャンネルが見つかりません");const j=D.items[0],Y=j.snippet,B=j.statistics;return{channelId:j.id,channelTitle:Y.title,description:Y.description,thumbnailUrl:((o=(s=Y.thumbnails)==null?void 0:s.high)==null?void 0:o.url)||((d=(u=Y.thumbnails)==null?void 0:u.default)==null?void 0:d.url),channelUrl:`https://www.youtube.com/channel/${j.id}`,subscriberCount:parseInt(B.subscriberCount)||0,videoCount:parseInt(B.videoCount)||0,totalViews:parseInt(B.viewCount)||0,publishedAt:Y.publishedAt,uploadsPlaylistId:(y=(m=j.contentDetails)==null?void 0:m.relatedPlaylists)==null?void 0:y.uploads}}catch(v){throw console.error("チャンネル情報取得エラー:",v),v}}async function JE(r,e){var n;try{const s=await kh(e),o="https://www.googleapis.com/youtube/v3/playlistItems";let u=null,d="",m=0;const y=10;console.log(`📹 最初の動画を検索中: ${r}`);do{const v=new URLSearchParams({key:s,playlistId:r,part:"snippet",maxResults:50});d&&v.append("pageToken",d);const E=await fetch(`${o}?${v}`),S=await E.json();if(!E.ok)throw new Error(((n=S.error)==null?void 0:n.message)||"API呼び出しエラー");if(S.items&&S.items.length>0){for(const x of S.items){const D=new Date(x.snippet.publishedAt);(!u||D<new Date(u.publishedAt))&&(u={title:x.snippet.title,publishedAt:x.snippet.publishedAt,videoId:x.snippet.resourceId.videoId})}console.log(`   ページ ${m+1}: ${S.items.length}本の動画をチェック`),console.log(`   現在の最古動画: ${u==null?void 0:u.title} (${u==null?void 0:u.publishedAt})`)}d=S.nextPageToken,m++,await new Promise(x=>setTimeout(x,100))}while(d&&m<y);return console.log(`✅ 最初の動画検索完了: ${(u==null?void 0:u.title)||"なし"}`),u}catch(s){return console.error("最初の動画取得エラー:",s),null}}async function eT(r,e){try{const n=Hr(ut,"users",e,"channels"),s=Sh(n,Ih("channelId","==",r));return!(await Ja(s)).empty}catch(n){return console.error("チャンネル存在チェックエラー:",n),!1}}async function s2(r,e){var n,s,o,u,d,m,y,v;try{if(!r)return console.error("uploadsPlaylistId is required"),null;const E=await kh(e),S="https://www.googleapis.com/youtube/v3/playlistItems";let x=null,D="",j=0;const Y=5;console.log(`🔥 最も人気の動画を検索中: ${r}`);do{const B=new URLSearchParams({key:E,playlistId:r,part:"snippet",maxResults:50});D&&B.append("pageToken",D);const ne=new AbortController,oe=setTimeout(()=>ne.abort(),1e4),ue=await fetch(`${S}?${B}`,{signal:ne.signal});clearTimeout(oe);const ge=await ue.json();if(!ue.ok)throw(s=(n=ge.error)==null?void 0:n.message)!=null&&s.includes("quota")?new Error("YouTube API の使用量制限に達しました。しばらく待ってから再試行してください。"):new Error(((o=ge.error)==null?void 0:o.message)||"API呼び出しエラー");if(ge.items&&ge.items.length>0){const K=ge.items.map(k=>k.snippet.resourceId.videoId),te=await a2(K,e);for(let k=0;k<ge.items.length;k++){const A=ge.items[k],I=te[A.snippet.resourceId.videoId];if(I){const N=parseInt(I.viewCount)||0;(!x||N>x.viewCount)&&(x={title:A.snippet.title,viewCount:N,likeCount:parseInt(I.likeCount)||0,commentCount:parseInt(I.commentCount)||0,publishedAt:A.snippet.publishedAt,thumbnailUrl:((d=(u=A.snippet.thumbnails)==null?void 0:u.high)==null?void 0:d.url)||((y=(m=A.snippet.thumbnails)==null?void 0:m.default)==null?void 0:y.url),videoId:A.snippet.resourceId.videoId,url:`https://www.youtube.com/watch?v=${A.snippet.resourceId.videoId}`})}}console.log(`   ページ ${j+1}: ${ge.items.length}本の動画をチェック`),console.log(`   現在の最人気動画: ${x==null?void 0:x.title} (${(v=x==null?void 0:x.viewCount)==null?void 0:v.toLocaleString()}回再生)`)}D=ge.nextPageToken,j++,await new Promise(K=>setTimeout(K,200))}while(D&&j<Y);return console.log(`✅ 最人気動画検索完了: ${(x==null?void 0:x.title)||"なし"}`),x}catch(E){return console.error("最人気動画取得エラー:",E),null}}async function a2(r,e){var n;try{const s=await kh(e),o="https://www.googleapis.com/youtube/v3/videos",u=new URLSearchParams({key:s,id:r.join(","),part:"statistics"}),d=await fetch(`${o}?${u}`),m=await d.json();if(!d.ok)throw new Error(((n=m.error)==null?void 0:n.message)||"API呼び出しエラー");const y={};return m.items&&m.items.forEach(v=>{y[v.id]=v.statistics}),y}catch(s){return console.error("動画統計取得エラー:",s),{}}}function tT(r,e){try{const n=e?new Date(e.publishedAt):new Date(r.publishedAt),o=(new Date-n)/(1e3*60*60*24*30);if(o<=0)return 0;const d=r.subscriberCount/o/1e3*100;return Math.round(Math.min(d,999))}catch(n){return console.error("成長率計算エラー:",n),0}}async function nT(r,e){try{const n=Hr(ut,"users",e,"channels");return await mE(n,{...r,status:"unset",createdAt:new Date,addedManually:!0}),!0}catch(n){throw console.error("Firestore保存エラー:",n),n}}async function iT(r,e){try{const n=nn(ut,"users",e,"channels",r);await fE(n,{isViewed:!0,viewedAt:Sr()}),console.log(`Channel marked as viewed: ${r}`)}catch(n){throw console.error("Error marking channel as viewed:",n),n}}async function rT(r,e,n,s=null){try{const o=nn(ut,"users",n,"channels",r),u={status:e,statusUpdatedAt:new Date,statusUpdatedBy:"user"};return s&&(u.rejectionReason=s),await fE(o,u),console.log(`✅ Updated channel status: ${r} -> ${e}`),!0}catch(o){return console.error(`Error updating channel status for ${r}:`,o),!1}}async function Sl(r="all",e,n={}){try{if(!e)throw new Error("ユーザーIDが必要です");let s=Hr(ut,"users",e,"channels");r!=="all"&&r!=="unset"&&(s=Sh(s,Ih("status","==",r)));const o=await Ja(s),u=[];o.forEach(m=>{const y=m.data();u.push({id:m.id,...y})});let d=u;return r==="unset"&&(d=u.filter(m=>!m.status||m.status===null||m.status===void 0||m.status===""||m.status==="unset")),console.log(`📊 Found ${d.length} channels with status: ${r} for user: ${e}`),d}catch(s){return console.error("Error getting channels by status:",s),[]}}async function o2(r){if(!r)throw new Error("ユーザーIDが必要です");try{const e=Sh(Hr(ut,"users",r,"channels"),Ih("status","==","tracking"));return(await Ja(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){throw console.error("トラッキングチャンネル取得エラー:",e),e}}const Rl=Object.freeze(Object.defineProperty({__proto__:null,addChannelToFirestore:nT,calculateGrowthRate:tT,checkChannelExists:eT,extractChannelId:ZE,fetchChannelFirstVideo:JE,fetchChannelInfo:WE,fetchChannelMostPopularVideo:s2,getChannelsByStatus:Sl,getTrackedChannels:o2,markChannelAsViewed:iT,updateChannelStatus:rT},Symbol.toStringTag,{value:"Module"})),l2=({channel:r,userId:e,onStatusChange:n})=>{const[s,o]=fe.useState(!1),[u,d]=fe.useState(!1),[m,y]=fe.useState(""),v=[{value:"unset",label:"未設定",color:"bg-gray-100 text-gray-800",icon:"❓"},{value:"tracking",label:"追跡中",color:"bg-green-100 text-green-800",icon:"📈"},{value:"non-tracking",label:"非追跡",color:"bg-yellow-100 text-yellow-800",icon:"⏸️"},{value:"rejected",label:"除外",color:"bg-red-100 text-red-800",icon:"❌"}],E=v.find(j=>j.value===(r.status||"unset")),S=async j=>{if(j==="rejected"){d(!0);return}await D(j)},x=async()=>{await D("rejected",m),d(!1),y("")},D=async(j,Y=null)=>{o(!0);try{await rT(r.id,j,e,Y)&&(n==null||n(r.id,j,Y))}catch(B){console.error("ステータス更新エラー:",B)}finally{o(!1)}};return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"relative",children:[g.jsx("select",{value:r.status||"unset",onChange:j=>S(j.target.value),disabled:s,className:`text-sm px-3 py-1 rounded-full border-0 cursor-pointer disabled:cursor-not-allowed ${E.color}`,children:v.map(j=>g.jsxs("option",{value:j.value,children:[j.icon," ",j.label]},j.value))}),s&&g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"})})]}),u&&g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"除外理由を入力"}),g.jsx("textarea",{value:m,onChange:j=>y(j.target.value),placeholder:"このチャンネルを除外する理由を入力してください（任意）",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 h-24 resize-none"}),g.jsxs("div",{className:"flex justify-end space-x-3 mt-4",children:[g.jsx("button",{onClick:()=>{d(!1),y("")},className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"キャンセル"}),g.jsx("button",{onClick:x,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"除外する"})]})]})})]})},sT=({channel:r,onChannelClick:e,onAddToTracking:n,onStatusChange:s})=>{const{user:o}=mi(),[u,d]=fe.useState(r.isViewed||!1),m=x=>x>=1e6?`${(x/1e6).toFixed(1)}M`:x>=1e3?`${(x/1e3).toFixed(1)}K`:x.toString(),y=x=>x?(x.toDate?x.toDate():new Date(x)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}):"-",v=x=>x>=50?"bg-green-100 text-green-800":x>=20?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",E=x=>{if(u||!x)return!1;const D=x.toDate?x.toDate():new Date(x);return(Date.now()-D.getTime())/(1e3*60*60*24)<=7},S=async()=>{if(!u&&r.id)try{await iT(r.id,o.uid),d(!0)}catch(x){console.error("Error marking channel as viewed:",x)}e&&e(r)};return g.jsx("div",{className:"channel-card",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("img",{src:r.thumbnailUrl||"/default-avatar.png",alt:r.channelTitle,className:"w-16 h-16 rounded-full object-cover flex-shrink-0 cursor-pointer",onClick:S,onError:x=>{x.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[g.jsx("h3",{className:"font-semibold text-gray-900 truncate cursor-pointer hover:text-blue-600",onClick:S,children:r.channelTitle}),E(r.createdAt)&&g.jsx("span",{className:"inline-block px-2 py-1 text-xs font-bold bg-red-100 text-red-800 rounded-full animate-pulse",children:"NEW!"})]}),g.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[g.jsxs("span",{className:"text-sm text-gray-600",children:[m(r.subscriberCount)," 登録者"]}),g.jsx("span",{className:"text-sm text-gray-500",children:"•"}),g.jsxs("span",{className:"text-sm text-gray-600",children:["開設: ",y(r.publishedAt)]})]}),g.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.keywords&&r.keywords.slice(0,3).map((x,D)=>g.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:x},D))}),r.latestVideo&&g.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[g.jsx("span",{className:"font-medium",children:"最新:"})," ",r.latestVideo.title]}),g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${v(r.growthRate||0)}`,children:["成長率 ",r.growthRate||0,"%"]}),g.jsxs("div",{className:"flex gap-2 items-center",children:[g.jsx(l2,{channel:r,userId:o==null?void 0:o.uid,onStatusChange:s}),g.jsx("button",{onClick:x=>{x.stopPropagation(),window.open(r.channelUrl,"_blank")},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"訪問 →"})]})]})]})]})})},u2=({channels:r,onChannelClick:e,onAddToTracking:n,onStatusChange:s})=>r.length===0?g.jsxs("div",{className:"text-center py-16",children:[g.jsx("div",{className:"text-6xl mb-4",children:"📈"}),g.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"まだチャンネルが追加されていません"}),g.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"上記の検索欄からYouTubeチャンネルを追加して分析を開始してください"})]}):g.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(o=>g.jsx(sT,{channel:o,onChannelClick:e,onAddToTracking:n,onStatusChange:s},o.channelId))}),c2=({channel:r,isOpen:e,onClose:n,onRemove:s})=>{if(!e||!r)return null;const o=m=>m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(1)}K`:m.toString(),u=m=>m?(m.toDate?m.toDate():new Date(m)).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"-",d=()=>{confirm("このチャンネルを追跡リストから削除しますか？")&&(s(r.id),n())};return g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[g.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[g.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"チャンネル詳細"}),g.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]}),g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[g.jsx("img",{src:r.thumbnailUrl||"/default-avatar.png",alt:r.channelTitle,className:"w-24 h-24 rounded-full object-cover",onError:m=>{m.target.src="https://via.placeholder.com/96x96/e5e7eb/9ca3af?text=🎵"}}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.channelTitle}),g.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[g.jsxs("div",{children:[g.jsx("span",{className:"text-gray-600",children:"登録者数:"}),g.jsx("span",{className:"ml-2 font-semibold",children:o(r.subscriberCount)})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-gray-600",children:"総再生回数:"}),g.jsx("span",{className:"ml-2 font-semibold",children:o(r.totalViews||0)})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-gray-600",children:"動画数:"}),g.jsx("span",{className:"ml-2 font-semibold",children:r.videoCount||"-"})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-gray-600",children:"開設日:"}),g.jsx("span",{className:"ml-2 font-semibold",children:u(r.publishedAt)})]}),g.jsxs("div",{children:[g.jsx("span",{className:"text-gray-600",children:"初投稿:"}),g.jsx("span",{className:"ml-2 font-semibold",children:u(r.firstVideoDate)})]}),g.jsxs("div",{className:"col-span-2",children:[g.jsx("span",{className:"text-gray-600",children:"成長率:"}),g.jsxs("span",{className:"ml-2 font-semibold text-blue-600",children:[r.growthRate||0,"%"]})]})]})]})]}),r.keywords&&r.keywords.length>0&&g.jsxs("div",{className:"mb-6",children:[g.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-2",children:"タグ"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:r.keywords.map((m,y)=>g.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-full",children:m},y))})]}),r.latestVideo&&g.jsxs("div",{className:"mb-6",children:[g.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"最新動画"}),g.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[g.jsx("h6",{className:"font-medium text-gray-900 mb-1",children:r.latestVideo.title}),g.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["投稿日: ",u(r.latestVideo.publishedAt)]}),g.jsx("a",{href:r.latestVideo.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"動画を見る →"})]})]}),r.mostPopularVideo&&g.jsxs("div",{className:"mb-6",children:[g.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"🔥 最も人気の動画"}),g.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:g.jsxs("div",{className:"flex gap-4",children:[r.mostPopularVideo.thumbnailUrl&&g.jsx("img",{src:r.mostPopularVideo.thumbnailUrl,alt:r.mostPopularVideo.title,className:"w-24 h-18 rounded object-cover flex-shrink-0"}),g.jsxs("div",{className:"flex-1",children:[g.jsx("h6",{className:"font-medium text-gray-900 mb-2 line-clamp-2",children:r.mostPopularVideo.title}),g.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[g.jsxs("span",{className:"flex items-center gap-1",children:["👁️ ",o(r.mostPopularVideo.viewCount)," 回視聴"]}),r.mostPopularVideo.likeCount>0&&g.jsxs("span",{className:"flex items-center gap-1",children:["👍 ",o(r.mostPopularVideo.likeCount)]}),r.mostPopularVideo.commentCount>0&&g.jsxs("span",{className:"flex items-center gap-1",children:["💬 ",o(r.mostPopularVideo.commentCount)]})]}),g.jsx("a",{href:r.mostPopularVideo.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 text-sm font-medium",children:"動画を見る →"})]})]})})]})]}),g.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[g.jsx("button",{onClick:()=>window.open(r.channelUrl,"_blank"),className:"btn-primary flex-1",children:"チャンネル訪問"}),g.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors",children:"追跡削除"})]})]})})},h2="https://api.github.com";function d2(r){return{Authorization:`token ${r}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"}}function y_(r){return r&&r.trim()?(localStorage.setItem("github_token",r.trim()),!0):(localStorage.removeItem("github_token"),!1)}function f2(){const r=localStorage.getItem("github_token");return r&&r.trim().length>0}async function m2(r){try{return(await fetch(`${h2}/user`,{headers:d2(r)})).ok}catch(e){return console.error("GitHub Token validation error:",e),!1}}const g2=()=>{const{user:r}=mi(),[e,n]=fe.useState({youtubeApiKey:"",githubToken:"",searchKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music"],collectionFrequency:"daily",keywordCount:8,videosPerKeyword:40,maxChannelsPerRun:150,monthsThreshold:3,minSubscribers:500,maxSubscribers:1e3,minVideos:5,minGrowthRate:10,bgmKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music","meditation","sleep music"],bgmExclusions:["lyrics","歌詞","vocal","sing","rap","talk","podcast"],trackingFrequency:"weekly",trackingRetentionDays:365,theme:"light",defaultSort:"growthRate",itemsPerPage:20,enableApiUsageDisplay:!0,maxDailyApiCalls:1e4}),[s,o]=fe.useState(!0),[u,d]=fe.useState(!1),[m,y]=fe.useState(""),[v,E]=fe.useState("basic"),[S,x]=fe.useState("unchecked");fe.useEffect(()=>{r&&D()},[r]);const D=async()=>{if(r)try{const K=await Ba(nn(ut,"users",r.uid,"settings","config"));K.exists()&&n(te=>({...te,...K.data()})),f2()&&(x("valid"),n(te=>({...te,githubToken:"●●●●●●●●●●●●"})))}catch(K){console.error("設定の読み込みエラー:",K),y("設定の読み込みに失敗しました")}finally{o(!1)}},j=async()=>{try{if(d(!0),e.githubToken&&e.githubToken!=="●●●●●●●●●●●●")if(await m2(e.githubToken))y_(e.githubToken),x("valid"),y("設定を保存しました（GitHub Token有効）");else{x("invalid"),y("GitHub Tokenが無効です");return}else e.githubToken===""&&(y_(""),x("unchecked"));const K={...e};delete K.githubToken,await li(nn(ut,"users",r.uid,"settings","config"),K),(!e.githubToken||e.githubToken==="●●●●●●●●●●●●")&&y("設定を保存しました"),setTimeout(()=>y(""),3e3)}catch(K){console.error("設定の保存エラー:",K),y("設定の保存に失敗しました")}finally{d(!1)}},Y=async K=>{if(r)try{const te=await Ja(Hr(ut,"users",r.uid,"channels")),k=await Ja(Hr(ut,"users",r.uid,"trackingData")),A=te.docs.map(M=>({id:M.id,...M.data()})),I=k.docs.map(M=>({id:M.id,...M.data()})),N={channels:A,tracking:I,exportedAt:new Date().toISOString()};if(K==="csv"){const M=B(A);ne(M,"youtube-bgm-channels.csv","text/csv")}else{const M=JSON.stringify(N,null,2);ne(M,"youtube-bgm-data.json","application/json")}y(`${K.toUpperCase()}でエクスポートしました`)}catch(te){console.error("エクスポートエラー:",te),y("エクスポートに失敗しました")}},B=K=>{const te=["チャンネル名","チャンネルID","登録者数","動画数","成長率(%)","開設日","最初の動画日","キーワード","URL"],k=K.map(A=>[A.channelTitle||"",A.channelId||"",A.subscriberCount||0,A.videoCount||0,A.growthRate||0,A.publishedAt?new Date(A.publishedAt).toLocaleDateString("ja-JP"):"",A.firstVideoDate?new Date(A.firstVideoDate).toLocaleDateString("ja-JP"):"",(A.keywords||[]).join("; "),A.channelUrl||""]);return[te,...k].map(A=>A.map(I=>`"${String(I).replace(/"/g,'""')}"`).join(",")).join(`
`)},ne=(K,te,k)=>{const A=new Blob([K],{type:k}),I=URL.createObjectURL(A),N=document.createElement("a");N.href=I,N.download=te,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(I)},oe=K=>{const te=prompt(`新しい${K==="search"?"検索":K==="bgm"?"BGM":"除外"}キーワードを入力してください:`);if(te&&te.trim()){const k=K==="search"?"searchKeywords":K==="bgm"?"bgmKeywords":"bgmExclusions";n(A=>({...A,[k]:[...A[k],te.trim()]}))}},ue=(K,te)=>{const k=K==="search"?"searchKeywords":K==="bgm"?"bgmKeywords":"bgmExclusions";n(A=>({...A,[k]:A[k].filter((I,N)=>N!==te)}))},ge=[{id:"basic",label:"基本設定",icon:"⚙️"},{id:"collection",label:"収集設定",icon:"🔍"},{id:"filtering",label:"フィルタリング",icon:"📊"},{id:"bgm",label:"BGM判定",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"display",label:"表示設定",icon:"🎨"},{id:"data",label:"データ管理",icon:"💾"},{id:"security",label:"セキュリティ",icon:"🔒"}];return s?g.jsx("div",{className:"flex items-center justify-center min-h-96",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):g.jsx("div",{className:"max-w-6xl mx-auto p-6",children:g.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[g.jsxs("div",{className:"border-b border-gray-200 p-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"設定"}),g.jsx("p",{className:"text-gray-600 mt-1",children:"アプリケーションの動作をカスタマイズできます"}),m&&g.jsx("div",{className:`mt-4 p-3 rounded-md ${m.includes("失敗")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:m})]}),g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"w-64 border-r border-gray-200 p-4",children:g.jsx("nav",{className:"space-y-1",children:ge.map(K=>g.jsxs("button",{onClick:()=>E(K.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${v===K.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[g.jsx("span",{className:"mr-2",children:K.icon}),K.label]},K.id))})}),g.jsxs("div",{className:"flex-1 p-6",children:[v==="basic"&&g.jsxs("div",{className:"space-y-6",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"基本設定"}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube API キー"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"password",value:e.youtubeApiKey,onChange:K=>n(te=>({...te,youtubeApiKey:K.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 pr-10 ${e.youtubeApiKey?"border-green-300":"border-gray-300"}`,placeholder:"YouTube Data API v3 キーを入力"}),g.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.youtubeApiKey&&g.jsx("span",{className:"text-green-500",children:"✓"})})]}),g.jsxs("div",{className:"text-sm text-gray-500 mt-1 space-y-1",children:[g.jsxs("p",{children:["🔑 ",g.jsx("strong",{children:"自分でAPIキーを取得してください："})]}),g.jsxs("ol",{className:"list-decimal list-inside ml-4 space-y-1",children:[g.jsxs("li",{children:[g.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Google Cloud Console"})," でプロジェクトを作成"]}),g.jsx("li",{children:"「YouTube Data API v3」を有効化"}),g.jsx("li",{children:"認証情報でAPIキーを作成し、API制限を設定"}),g.jsx("li",{children:"作成したAPIキーをここに入力"})]}),g.jsx("p",{className:"text-amber-600 font-medium",children:"⚠️ 各ユーザーが個別にAPIキーを設定する必要があります"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Personal Access Token"}),g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"password",value:e.githubToken,onChange:K=>n(te=>({...te,githubToken:K.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 pr-10 ${S==="valid"?"border-green-300":S==="invalid"?"border-red-300":"border-gray-300"}`,placeholder:"ghp_xxxxxxxxxxxxxxxxxx"}),g.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:[S==="valid"&&g.jsx("span",{className:"text-green-500",children:"✓"}),S==="invalid"&&g.jsx("span",{className:"text-red-500",children:"✗"})]})]}),g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"不具合・要望報告機能でGitHub Issuesに投稿するために必要です"}),g.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"GitHub Settings → Developer settings → Personal access tokens で作成"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索キーワード"}),g.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.searchKeywords.map((K,te)=>g.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[K,g.jsx("button",{onClick:()=>ue("search",te),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},te))}),g.jsx("button",{onClick:()=>oe("search"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),v==="collection"&&g.jsxs("div",{className:"space-y-6",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"収集設定"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"収集頻度"}),g.jsxs("select",{value:e.collectionFrequency,onChange:K=>n(te=>({...te,collectionFrequency:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[g.jsx("option",{value:"daily",children:"毎日"}),g.jsx("option",{value:"weekly",children:"毎週"}),g.jsx("option",{value:"monthly",children:"毎月"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"使用キーワード数"}),g.jsx("input",{type:"number",value:e.keywordCount,onChange:K=>n(te=>({...te,keywordCount:parseInt(K.target.value)||8})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"キーワードあたり動画数"}),g.jsx("input",{type:"number",value:e.videosPerKeyword,onChange:K=>n(te=>({...te,videosPerKeyword:parseInt(K.target.value)||40})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"10",max:"100"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大チャンネル処理数"}),g.jsx("input",{type:"number",value:e.maxChannelsPerRun,onChange:K=>n(te=>({...te,maxChannelsPerRun:parseInt(K.target.value)||150})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"50",max:"500"})]})]})]}),v==="filtering"&&g.jsxs("div",{className:"space-y-6",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"フィルタリング設定"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"チャンネル作成期間（ヶ月）"}),g.jsx("input",{type:"number",value:e.monthsThreshold,onChange:K=>n(te=>({...te,monthsThreshold:parseInt(K.target.value)||3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"12"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小登録者数"}),g.jsx("input",{type:"number",value:e.minSubscribers,onChange:K=>n(te=>({...te,minSubscribers:parseInt(K.target.value)||1e3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"100"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大登録者数"}),g.jsx("input",{type:"number",value:e.maxSubscribers,onChange:K=>n(te=>({...te,maxSubscribers:parseInt(K.target.value)||5e5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小動画数"}),g.jsx("input",{type:"number",value:e.minVideos,onChange:K=>n(te=>({...te,minVideos:parseInt(K.target.value)||5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小成長率（%）"}),g.jsx("input",{type:"number",value:e.minGrowthRate,onChange:K=>n(te=>({...te,minGrowthRate:parseInt(K.target.value)||10})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"0"})]})]})]}),v==="bgm"&&g.jsxs("div",{className:"space-y-6",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"BGM判定設定"}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BGM関連キーワード"}),g.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.bgmKeywords.map((K,te)=>g.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:[K,g.jsx("button",{onClick:()=>ue("bgm",te),className:"ml-1 text-green-600 hover:text-green-800",children:"×"})]},te))}),g.jsx("button",{onClick:()=>oe("bgm"),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"+ キーワードを追加"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"除外キーワード"}),g.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.bgmExclusions.map((K,te)=>g.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:[K,g.jsx("button",{onClick:()=>ue("exclusion",te),className:"ml-1 text-red-600 hover:text-red-800",children:"×"})]},te))}),g.jsx("button",{onClick:()=>oe("exclusion"),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),v==="tracking"&&g.jsxs("div",{className:"space-y-6",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"トラッキング設定"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"トラッキング頻度"}),g.jsxs("select",{value:e.trackingFrequency,onChange:K=>n(te=>({...te,trackingFrequency:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[g.jsx("option",{value:"daily",children:"毎日"}),g.jsx("option",{value:"weekly",children:"毎週"}),g.jsx("option",{value:"monthly",children:"毎月"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"データ保持期間（日）"}),g.jsx("input",{type:"number",value:e.trackingRetentionDays,onChange:K=>n(te=>({...te,trackingRetentionDays:parseInt(K.target.value)||365})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"30",max:"1095"})]})]})]}),v==="display"&&g.jsxs("div",{className:"space-y-6",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"表示設定"}),g.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テーマ"}),g.jsxs("select",{value:e.theme,onChange:K=>n(te=>({...te,theme:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[g.jsx("option",{value:"light",children:"ライト"}),g.jsx("option",{value:"dark",children:"ダーク"}),g.jsx("option",{value:"auto",children:"自動"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"デフォルト並び順"}),g.jsxs("select",{value:e.defaultSort,onChange:K=>n(te=>({...te,defaultSort:K.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[g.jsx("option",{value:"growthRate",children:"成長率順"}),g.jsx("option",{value:"subscriberCount",children:"登録者数順"}),g.jsx("option",{value:"publishedAt",children:"新着順"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1ページの表示件数"}),g.jsxs("select",{value:e.itemsPerPage,onChange:K=>n(te=>({...te,itemsPerPage:parseInt(K.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[g.jsx("option",{value:10,children:"10件"}),g.jsx("option",{value:20,children:"20件"}),g.jsx("option",{value:50,children:"50件"}),g.jsx("option",{value:100,children:"100件"})]})]})]})]}),v==="data"&&g.jsxs("div",{className:"space-y-6",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"データ管理"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[g.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データエクスポート"}),g.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"収集したチャンネルデータとトラッキングデータをエクスポートできます"}),g.jsxs("div",{className:"flex gap-2",children:[g.jsx("button",{onClick:()=>Y("csv"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"CSV形式でエクスポート"}),g.jsx("button",{onClick:()=>Y("json"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"JSON形式でエクスポート"})]})]}),g.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[g.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データバックアップ"}),g.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"定期的にデータのバックアップを作成することをお勧めします"}),g.jsx("button",{onClick:()=>Y("json"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"今すぐバックアップ"})]})]})]}),v==="security"&&g.jsxs("div",{className:"space-y-6",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"セキュリティ設定"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",checked:e.enableApiUsageDisplay,onChange:K=>n(te=>({...te,enableApiUsageDisplay:K.target.checked})),className:"mr-2"}),g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"API使用量の表示"})]}),g.jsx("p",{className:"text-sm text-gray-500 ml-6",children:"YouTube API使用量をダッシュボードに表示します"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1日のAPI呼び出し制限"}),g.jsx("input",{type:"number",value:e.maxDailyApiCalls,onChange:K=>n(te=>({...te,maxDailyApiCalls:parseInt(K.target.value)||1e4})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000",max:"1000000"}),g.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"YouTube APIの1日あたりのクォータ制限を設定"})]})]})]}),g.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-gray-200",children:g.jsx("button",{onClick:j,disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:u?"保存中...":"設定を保存"})})]})]})]})})},Wf=({trackingData:r,title:e})=>{var o,u,d,m,y;if(console.log(`TrackingChart for ${e}:`,r),!r||r.length===0)return g.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),g.jsx("div",{className:"text-center py-8 text-gray-500",children:"トラッキングデータがありません"})]});const n=Math.max(...r.map(v=>v.value)),s=Math.min(...r.map(v=>v.value));return console.log(`Chart range for ${e}: ${s} - ${n}`),g.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[g.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),g.jsx("div",{className:"mb-4",children:g.jsxs("div",{className:"relative h-32 bg-gray-50 rounded p-4",children:[g.jsxs("svg",{width:"100%",height:"100%",className:"overflow-visible",children:[r.length>1&&r.map((v,E)=>{if(E===0)return null;const S=r[E-1],x=(E-1)/(r.length-1)*100,D=E/(r.length-1)*100,j=n===s?50:100-(S.value-s)/(n-s)*80,Y=n===s?50:100-(v.value-s)/(n-s)*80;return g.jsx("line",{x1:`${x}%`,y1:`${j}%`,x2:`${D}%`,y2:`${Y}%`,stroke:"#3b82f6",strokeWidth:"2",className:"transition-all duration-300"},E)}),r.map((v,E)=>{const S=E/(r.length-1)*100,x=n===s?50:100-(v.value-s)/(n-s)*80,D=E===r.length-1;return g.jsx("circle",{cx:`${S}%`,cy:`${x}%`,r:"4",fill:D?"#1d4ed8":"#3b82f6",className:"transition-all duration-300"},E)})]}),g.jsx("div",{className:"flex justify-between mt-2",children:r.map((v,E)=>g.jsx("div",{className:"text-xs text-gray-600 text-center flex-1",children:new Date(v.date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})},E))})]})}),g.jsxs("div",{className:"mb-4 max-h-32 overflow-y-auto",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"履歴データ"}),g.jsx("div",{className:"space-y-1",children:r.map((v,E)=>g.jsxs("div",{className:"flex justify-between text-xs",children:[g.jsx("span",{className:"text-gray-600",children:new Date(v.date).toLocaleDateString("ja-JP")}),g.jsx("span",{className:"font-medium text-gray-900",children:v.value.toLocaleString()})]},E))})]}),g.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center border-t pt-4",children:[g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-600",children:"最新"}),g.jsx("div",{className:"text-lg font-semibold text-blue-600",children:(o=r[r.length-1])==null?void 0:o.value.toLocaleString()})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-600",children:"最高"}),g.jsx("div",{className:"text-lg font-semibold text-green-600",children:n.toLocaleString()})]}),g.jsxs("div",{children:[g.jsx("div",{className:"text-sm text-gray-600",children:"成長"}),g.jsx("div",{className:`text-lg font-semibold ${r.length>1?((u=r[r.length-1])==null?void 0:u.value)>((d=r[0])==null?void 0:d.value)?"text-green-600":"text-red-600":"text-gray-600"}`,children:r.length>1?`${((((m=r[r.length-1])==null?void 0:m.value)/((y=r[0])==null?void 0:y.value)-1)*100).toFixed(1)}%`:"N/A"})]})]})]})},p2=({selectedChannelId:r})=>{const{user:e}=mi(),[n,s]=fe.useState({subscriberCount:[],videoCount:[],totalViews:[]}),[o,u]=fe.useState(!1),[d,m]=fe.useState([]),[y,v]=fe.useState(!0),[E,S]=fe.useState(r),x=ne=>ne>=1e6?`${(ne/1e6).toFixed(1)}M`:ne>=1e3?`${(ne/1e3).toFixed(1)}K`:ne.toString(),D=ne=>ne>=50?"bg-green-100 text-green-800":ne>=20?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800";fe.useEffect(()=>{e&&j()},[e]),fe.useEffect(()=>{e&&E&&Y(E)},[E,e]);const j=async()=>{if(e)try{v(!0);const{getChannelsByStatus:ne}=await _l(async()=>{const{getChannelsByStatus:ue}=await Promise.resolve().then(()=>Rl);return{getChannelsByStatus:ue}},void 0),oe=await ne("tracking",e.uid);m(oe)}catch(ne){console.error("追跡チャンネル一覧の取得エラー:",ne)}finally{v(!1)}},Y=async ne=>{if(e)try{u(!0),console.log("Loading tracking data for:",ne);try{const ge=(await Ja(Sh(Hr(ut,"users",e.uid,"trackingData"),Ih("channelId","==",ne)))).docs.map(K=>K.data());if(console.log("Found tracking data:",ge),ge.length>0){const K=ge.filter(N=>N.recordedAt).sort((N,M)=>{const U=N.recordedAt.toDate?N.recordedAt.toDate():new Date(N.recordedAt),O=M.recordedAt.toDate?M.recordedAt.toDate():new Date(M.recordedAt);return U-O}),te=K.map(N=>({date:N.recordedAt.toDate?N.recordedAt.toDate():new Date(N.recordedAt),value:N.subscriberCount||0})),k=K.map(N=>({date:N.recordedAt.toDate?N.recordedAt.toDate():new Date(N.recordedAt),value:N.videoCount||0})),A=K.map(N=>({date:N.recordedAt.toDate?N.recordedAt.toDate():new Date(N.recordedAt),value:N.totalViews||0})),I={subscriberCount:te,videoCount:k,totalViews:A};console.log("Setting real tracking data:",I),s(I);return}}catch(ue){console.log("Failed to fetch real tracking data, using mock data:",ue)}const oe=d.find(ue=>ue.channelId===ne);if(console.log("Using channel data for mock tracking:",oe),oe){const ue=new Date,ge=new Date(ue-7*24*60*60*1e3),K=new Date(ue-14*24*60*60*1e3),te=oe.subscriberCount||0,k=oe.videoCount||0,A=oe.totalViews||0,I={subscriberCount:[{date:K,value:Math.max(0,Math.floor(te*.95))},{date:ge,value:Math.max(0,Math.floor(te*.98))},{date:ue,value:te}],videoCount:[{date:K,value:Math.max(0,k-2)},{date:ge,value:Math.max(0,k-1)},{date:ue,value:k}],totalViews:[{date:K,value:Math.max(0,Math.floor(A*.9))},{date:ge,value:Math.max(0,Math.floor(A*.95))},{date:ue,value:A}]};console.log("Setting simulated tracking data:",I),s(I)}}catch(oe){console.error("トラッキングデータの取得エラー:",oe)}finally{u(!1)}};if(o&&E)return g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600",children:"トラッキングデータを読み込み中..."})]});if(y)return g.jsxs("div",{className:"text-center py-8",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600",children:"トラッキングチャンネルを読み込み中..."})]});if(!E)return g.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-8",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"text-6xl mb-4",children:"📊"}),g.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"チャンネルを選択してください"}),g.jsx("p",{className:"text-gray-600 mb-6",children:"追跡中のチャンネルから1つを選択すると、成長データを表示します"}),d.length>0&&g.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(ne=>g.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{onClick:()=>{console.log("Selecting channel:",ne.channelId,ne),S(ne.channelId),Y(ne.channelId)},className:"cursor-pointer flex items-center gap-3 flex-1",children:[g.jsx("img",{src:ne.thumbnailUrl||"/default-avatar.png",alt:ne.channelTitle,className:"w-12 h-12 rounded-full object-cover",onError:oe=>{oe.target.src="https://via.placeholder.com/48x48/e5e7eb/9ca3af?text=🎵"}}),g.jsxs("div",{className:"text-left flex-1",children:[g.jsx("h4",{className:"font-medium text-gray-900 truncate",children:ne.channelTitle}),g.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[g.jsxs("span",{className:"text-sm text-gray-600",children:[x(ne.subscriberCount||0)," 登録者"]}),ne.growthRate&&g.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${D(ne.growthRate)}`,children:["成長率 ",ne.growthRate,"%"]})]})]})]}),g.jsx("button",{onClick:oe=>{oe.stopPropagation(),window.open(ne.channelUrl,"_blank")},className:"ml-2 text-blue-600 hover:text-blue-700 text-sm font-medium px-3 py-1 rounded hover:bg-blue-50 transition-colors",children:"訪問 →"})]})},ne.id))}),d.length===0&&g.jsxs("p",{className:"text-gray-500",children:["まだトラッキング中のチャンネルがありません。",g.jsx("br",{}),"チャンネル一覧からチャンネルを「追跡」ステータスに設定してください。"]})]})});const B=d.find(ne=>ne.channelId===E);return g.jsxs("div",{className:"space-y-6",children:[B&&g.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:g.jsxs("div",{className:"flex items-center justify-between mb-4",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("img",{src:B.thumbnailUrl||"/default-avatar.png",alt:B.channelTitle,className:"w-16 h-16 rounded-full object-cover",onError:ne=>{ne.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),g.jsxs("div",{children:[g.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:B.channelTitle}),g.jsx("button",{onClick:()=>window.open(B.channelUrl,"_blank"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium px-3 py-1 rounded hover:bg-blue-50 transition-colors",children:"訪問 →"})]}),g.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[g.jsxs("span",{children:[x(B.subscriberCount||0)," 登録者"]}),g.jsxs("span",{children:[x(B.videoCount||0)," 動画"]}),B.growthRate&&g.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${D(B.growthRate)}`,children:["成長率 ",B.growthRate,"%"]})]})]})]}),g.jsx("button",{onClick:()=>S(null),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",children:"← チャンネル一覧に戻る"})]})}),g.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[g.jsx(Wf,{trackingData:n.subscriberCount,title:"📈 登録者数の推移"}),g.jsx(Wf,{trackingData:n.videoCount,title:"🎥 動画数の推移"}),g.jsx(Wf,{trackingData:n.totalViews,title:"👁️ 総再生回数の推移"})]})]})},y2=()=>{var D,j,Y;const{user:r}=mi(),[e,n]=fe.useState("tracking"),[s,o]=fe.useState([]),[u,d]=fe.useState(!0),[m,y]=fe.useState({tracking:0,"non-tracking":0,rejected:0});fe.useEffect(()=>{r&&v()},[e,r]),fe.useEffect(()=>{r&&E()},[r]);const v=async()=>{if(r)try{d(!0);const B=await Sl(e,r.uid);o(B)}catch(B){console.error("チャンネル履歴読み込みエラー:",B)}finally{d(!1)}},E=async()=>{if(r)try{const[B,ne,oe]=await Promise.all([Sl("tracking",r.uid),Sl("non-tracking",r.uid),Sl("rejected",r.uid)]);y({tracking:B.length,"non-tracking":ne.length,rejected:oe.length})}catch(B){console.error("統計読み込みエラー:",B)}},S=[{id:"tracking",label:"トラッキング中",icon:"📊",color:"green",count:m.tracking},{id:"non-tracking",label:"対象外",icon:"📋",color:"yellow",count:m["non-tracking"]},{id:"rejected",label:"除外済み",icon:"❌",color:"red",count:m.rejected}],x=B=>B?(B.toDate?B.toDate():new Date(B)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return r?g.jsxs("div",{className:"space-y-6",children:[g.jsxs("div",{className:"text-center",children:[g.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"チャンネル履歴"}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"ステータス別にチャンネルの履歴を確認できます"})]}),g.jsx("div",{className:"card",children:g.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(B=>{const ne=e===B.id,oe={green:ne?"bg-green-100 text-green-800 border-green-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-green-50 hover:text-green-700",yellow:ne?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-yellow-50 hover:text-yellow-700",red:ne?"bg-red-100 text-red-800 border-red-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-red-50 hover:text-red-700"};return g.jsxs("button",{onClick:()=>n(B.id),className:`px-4 py-3 rounded-lg border font-medium transition-all duration-200 flex items-center gap-2 ${oe[B.color]}`,children:[g.jsx("span",{className:"text-lg",children:B.icon}),g.jsx("span",{children:B.label}),g.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${ne?"bg-white bg-opacity-50":"bg-gray-200"}`,children:B.count})]},B.id)})})}),g.jsxs("div",{className:"card",children:[g.jsx("div",{className:"mb-4",children:g.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[((D=S.find(B=>B.id===e))==null?void 0:D.label)||"チャンネル"," (",s.length,"件)"]})}),u?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600",children:"読み込み中..."})]}):s.length===0?g.jsxs("div",{className:"text-center py-12",children:[g.jsx("div",{className:"text-6xl mb-4",children:((j=S.find(B=>B.id===e))==null?void 0:j.icon)||"📋"}),g.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:[(Y=S.find(B=>B.id===e))==null?void 0:Y.label,"のチャンネルがありません"]}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"チャンネルの仕分けを行うと、ここに表示されます"})]}):g.jsx("div",{className:"space-y-4",children:s.map(B=>{var ne;return g.jsxs("div",{className:"relative",children:[g.jsx(sT,{channel:B,onChannelClick:()=>{},onAddToTracking:()=>{},showStatusHistory:!0}),g.jsxs("div",{className:"mt-2 px-4 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg text-sm",children:[g.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[g.jsxs("span",{children:["ステータス: ",g.jsx("strong",{className:"text-gray-900 dark:text-white",children:((ne=S.find(oe=>oe.id===B.status))==null?void 0:ne.label)||B.status||"未設定"})]}),g.jsxs("span",{children:["更新日時: ",x(B.statusUpdatedAt)]})]}),B.status==="rejected"&&B.rejectionReason&&g.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded border-l-4 border-red-300",children:g.jsxs("span",{className:"text-red-700 dark:text-red-300 text-sm",children:[g.jsx("strong",{children:"除外理由:"})," ",B.rejectionReason]})}),B.statusUpdatedBy&&g.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["更新者: ",B.statusUpdatedBy]})]})]},B.id)})})]}),g.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:g.jsxs("p",{children:["合計: ",m.tracking+m["non-tracking"]+m.rejected," チャンネル | トラッキング中: ",m.tracking," | 対象外: ",m["non-tracking"]," | 除外済み: ",m.rejected]})})]}):g.jsxs("div",{className:"text-center py-12",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"チャンネル履歴"}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"チャンネル履歴を表示するにはログインが必要です"})]})},v2=()=>{const{user:r}=mi(),[e,n]=fe.useState({name:"",language:"ja",theme:"light",notifications:{email:!0,browser:!0,surgingChannels:!0},preferences:{defaultSort:"growthRate",itemsPerPage:20,autoRefresh:!1}}),[s,o]=fe.useState(!0),[u,d]=fe.useState(!1),[m,y]=fe.useState("");fe.useEffect(()=>{r&&v()},[r]);const v=async()=>{var D;try{const j=await Ba(nn(ut,"users",r.uid,"profile","config"));if(j.exists())n(Y=>({...Y,...j.data()}));else{const Y={...e,name:r.displayName||((D=r.email)==null?void 0:D.split("@")[0])||"",registeredAt:new Date,lastLogin:new Date};await li(nn(ut,"users",r.uid,"profile","config"),Y),n(Y)}}catch(j){console.error("プロフィール読み込みエラー:",j),y("プロフィールの読み込みに失敗しました")}finally{o(!1)}},E=async()=>{d(!0);try{await li(nn(ut,"users",r.uid,"profile","config"),{...e,updatedAt:new Date}),y("プロフィールを保存しました"),setTimeout(()=>y(""),3e3)}catch(D){console.error("プロフィール保存エラー:",D),y("プロフィールの保存に失敗しました")}finally{d(!1)}},S=(D,j)=>{n(Y=>({...Y,[D]:j}))},x=(D,j,Y)=>{n(B=>({...B,[D]:{...B[D],[j]:Y}}))};return s?g.jsx("div",{className:"flex items-center justify-center min-h-96",children:g.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):g.jsx("div",{className:"max-w-4xl mx-auto p-6",children:g.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[g.jsxs("div",{className:"border-b border-gray-200 p-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"ユーザープロフィール"}),g.jsx("p",{className:"text-gray-600 mt-1",children:"アカウント情報と環境設定を管理します"}),m&&g.jsx("div",{className:`mt-4 p-3 rounded-md ${m.includes("失敗")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:m})]}),g.jsxs("div",{className:"p-6 space-y-8",children:[g.jsxs("section",{children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"基本情報"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"表示名"}),g.jsx("input",{type:"text",value:e.name,onChange:D=>S("name",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"表示名を入力"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"メールアドレス"}),g.jsx("input",{type:"email",value:r.email,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"メールアドレスの変更はFirebase Authenticationで行ってください"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"言語設定"}),g.jsxs("select",{value:e.language,onChange:D=>S("language",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[g.jsx("option",{value:"ja",children:"日本語"}),g.jsx("option",{value:"en",children:"English"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テーマ"}),g.jsxs("select",{value:e.theme,onChange:D=>S("theme",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[g.jsx("option",{value:"light",children:"ライト"}),g.jsx("option",{value:"dark",children:"ダーク"}),g.jsx("option",{value:"auto",children:"システム設定に従う"})]})]})]})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"通知設定"}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",checked:e.notifications.email,onChange:D=>x("notifications","email",D.target.checked),className:"mr-3 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),g.jsxs("div",{children:[g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"メール通知"}),g.jsx("p",{className:"text-xs text-gray-500",children:"重要な更新をメールで通知します"})]})]}),g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",checked:e.notifications.browser,onChange:D=>x("notifications","browser",D.target.checked),className:"mr-3 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),g.jsxs("div",{children:[g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"ブラウザ通知"}),g.jsx("p",{className:"text-xs text-gray-500",children:"ブラウザでプッシュ通知を表示します"})]})]}),g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",checked:e.notifications.surgingChannels,onChange:D=>x("notifications","surgingChannels",D.target.checked),className:"mr-3 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),g.jsxs("div",{children:[g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"急上昇チャンネル通知"}),g.jsx("p",{className:"text-xs text-gray-500",children:"追跡中のチャンネルが急成長した際に通知します"})]})]})]})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"表示設定"}),g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"デフォルト並び順"}),g.jsxs("select",{value:e.preferences.defaultSort,onChange:D=>x("preferences","defaultSort",D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[g.jsx("option",{value:"growthRate",children:"成長率順"}),g.jsx("option",{value:"subscriberCount",children:"登録者数順"}),g.jsx("option",{value:"createdAt",children:"追加日順"}),g.jsx("option",{value:"channelTitle",children:"チャンネル名順"})]})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1ページの表示件数"}),g.jsxs("select",{value:e.preferences.itemsPerPage,onChange:D=>x("preferences","itemsPerPage",parseInt(D.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[g.jsx("option",{value:10,children:"10件"}),g.jsx("option",{value:20,children:"20件"}),g.jsx("option",{value:50,children:"50件"}),g.jsx("option",{value:100,children:"100件"})]})]})]}),g.jsx("div",{className:"mt-4",children:g.jsxs("label",{className:"flex items-center",children:[g.jsx("input",{type:"checkbox",checked:e.preferences.autoRefresh,onChange:D=>x("preferences","autoRefresh",D.target.checked),className:"mr-3 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),g.jsxs("div",{children:[g.jsx("span",{className:"text-sm font-medium text-gray-700",children:"自動更新"}),g.jsx("p",{className:"text-xs text-gray-500",children:"データを定期的に自動更新します"})]})]})})]}),g.jsxs("section",{children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"アカウント統計"}),g.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[g.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[g.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"---"}),g.jsx("div",{className:"text-sm text-gray-600",children:"登録チャンネル数"})]}),g.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[g.jsx("div",{className:"text-2xl font-bold text-green-600",children:"---"}),g.jsx("div",{className:"text-sm text-gray-600",children:"追跡中"})]}),g.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[g.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"---"}),g.jsx("div",{className:"text-sm text-gray-600",children:"API使用量"})]}),g.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[g.jsx("div",{className:"text-2xl font-bold text-purple-600",children:e.registeredAt?Math.floor((Date.now()-new Date(e.registeredAt))/(1e3*60*60*24)):"---"}),g.jsx("div",{className:"text-sm text-gray-600",children:"利用開始日数"})]})]})]}),g.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200",children:g.jsx("button",{onClick:E,disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:u?"保存中...":"プロフィールを保存"})})]})]})})},_2=({isOpen:r,onClose:e,onChannelAdded:n})=>{const{user:s}=mi(),[o,u]=fe.useState(""),[d,m]=fe.useState(!1),[y,v]=fe.useState(""),E=async S=>{if(S.preventDefault(),!(!o.trim()||d)){m(!0),v("");try{const x=ZE(o.trim());if(console.log("Extracted channel ID:",x),await eT(x,s.uid)){v("このチャンネルは既に追加されています");return}const j=await WE(x,s.uid);console.log("Channel info:",j);const Y=await JE(j.uploadsPlaylistId,s.uid),B=tT(j,Y),ne={...j,firstVideoDate:(Y==null?void 0:Y.publishedAt)||j.publishedAt,growthRate:B,scoreBgmRelev:50,status:"unset"};await nT(ne,s.uid),n==null||n(ne),u(""),e()}catch(x){console.error("チャンネル追加エラー:",x),v(x.message||"チャンネルの追加に失敗しました")}finally{m(!1)}}};return r?g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"チャンネルを手動追加"}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-xl",children:"×"})]}),g.jsxs("form",{onSubmit:E,className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"チャンネルURL または チャンネルID"}),g.jsx("input",{type:"text",value:o,onChange:S=>u(S.target.value),placeholder:"https://www.youtube.com/channel/UC... または UCxxxxxxxx",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",disabled:d}),g.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["サポート形式:",g.jsxs("ul",{className:"list-disc ml-4 mt-1",children:[g.jsx("li",{children:"youtube.com/channel/UCxxxxxxxx"}),g.jsx("li",{children:"youtube.com/c/channelname"}),g.jsx("li",{children:"youtube.com/@handle"}),g.jsx("li",{children:"UCxxxxxxxx (直接ID)"})]})]})]}),y&&g.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:y}),g.jsxs("div",{className:"flex justify-end space-x-3",children:[g.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:d,children:"キャンセル"}),g.jsx("button",{type:"submit",disabled:!o.trim()||d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"追加中...":"追加"})]})]})]})}):null},b2=({isOpen:r,onClose:e})=>{const{user:n}=mi(),[s,o]=fe.useState({type:"bug",title:"",description:"",steps:"",expected:"",actual:""}),[u,d]=fe.useState(!1),[m,y]=fe.useState(!1),v=[{value:"bug",label:"🐛 バグ報告",icon:"🐛"},{value:"feature",label:"💡 機能要望",icon:"💡"},{value:"improvement",label:"🔧 改善提案",icon:"🔧"},{value:"other",label:"❓ その他",icon:"❓"}],E=(D,j)=>{o(Y=>({...Y,[D]:j}))},S=()=>{const D=v.find(Y=>Y.value===s.type);let j=`## ${D.icon} ${D.label}

`;return j+=`**説明:**
${s.description}

`,s.type==="bug"&&(j+=`**再現手順:**
${s.steps}

`,j+=`**期待される動作:**
${s.expected}

`,j+=`**実際の動作:**
${s.actual}

`),j+=`**報告者:** ${n.email}
`,j+=`**報告日時:** ${new Date().toLocaleString("ja-JP")}
`,j+=`**ブラウザ:** ${navigator.userAgent}
`,j},x=async D=>{if(D.preventDefault(),!(!s.title.trim()||!s.description.trim())){d(!0);try{const j=Hr(ut,"users",n.uid,"feedbackReports"),Y=S();await mE(j,{title:s.title,body:Y,type:s.type,status:"pending",githubIssueNum:null,createdAt:new Date,userEmail:n.email}),y(!0),setTimeout(()=>{y(!1),e(),o({type:"bug",title:"",description:"",steps:"",expected:"",actual:""})},2e3)}catch(j){console.error("フィードバック送信エラー:",j),alert("フィードバックの送信に失敗しました。もう一度お試しください。")}finally{d(!1)}}};return r?m?g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:g.jsxs("div",{className:"bg-white rounded-lg p-8 w-full max-w-md text-center",children:[g.jsx("div",{className:"text-green-600 text-4xl mb-4",children:"✅"}),g.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"フィードバックを送信しました"}),g.jsxs("p",{className:"text-gray-600",children:["ご報告いただき、ありがとうございます。",g.jsx("br",{}),"開発チームが確認次第、対応いたします。"]})]})}):g.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:g.jsxs("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[g.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6",children:g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"📝 フィードバック・不具合報告"}),g.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]})}),g.jsxs("form",{onSubmit:x,className:"p-6 space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"報告タイプ"}),g.jsx("div",{className:"grid grid-cols-2 gap-3",children:v.map(D=>g.jsxs("label",{className:`border rounded-lg p-3 cursor-pointer transition-colors ${s.type===D.value?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,children:[g.jsx("input",{type:"radio",name:"type",value:D.value,checked:s.type===D.value,onChange:j=>E("type",j.target.value),className:"sr-only"}),g.jsx("span",{className:"text-sm font-medium",children:D.label})]},D.value))})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["タイトル ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("input",{type:"text",value:s.title,onChange:D=>E("title",D.target.value),placeholder:"問題や要望を簡潔に表現してください",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0})]}),g.jsxs("div",{children:[g.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["詳細説明 ",g.jsx("span",{className:"text-red-500",children:"*"})]}),g.jsx("textarea",{value:s.description,onChange:D=>E("description",D.target.value),placeholder:"問題の詳細や要望内容を具体的に記載してください",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 resize-none",required:!0})]}),s.type==="bug"&&g.jsxs(g.Fragment,{children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"再現手順"}),g.jsx("textarea",{value:s.steps,onChange:D=>E("steps",D.target.value),placeholder:`1. ○○をクリック
2. △△を入力
3. □□ボタンを押す
4. エラーが発生`,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"期待される動作"}),g.jsx("textarea",{value:s.expected,onChange:D=>E("expected",D.target.value),placeholder:"本来どのような動作をするべきかを記載してください",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 resize-none"})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"実際の動作"}),g.jsx("textarea",{value:s.actual,onChange:D=>E("actual",D.target.value),placeholder:"実際に起こった動作やエラーメッセージを記載してください",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 resize-none"})]})]}),g.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[g.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"📋 送信される情報"}),g.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[g.jsx("li",{children:"• 報告内容（上記で入力された内容）"}),g.jsxs("li",{children:["• ユーザーのメールアドレス: ",n==null?void 0:n.email]}),g.jsx("li",{children:"• 報告日時"}),g.jsx("li",{children:"• ブラウザ情報（デバッグ用）"})]}),g.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"※ 個人的なAPIキーやパスワードなどの機密情報は送信されません"})]}),g.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[g.jsx("button",{type:"button",onClick:e,className:"px-6 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:u,children:"キャンセル"}),g.jsx("button",{type:"submit",disabled:!s.title.trim()||!s.description.trim()||u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"送信中...":"送信"})]})]})]})}):null},E2=({isLogin:r,setIsLogin:e})=>{const[n,s]=fe.useState(""),[o,u]=fe.useState(""),[d,m]=fe.useState(""),[y,v]=fe.useState(!1),{login:E,register:S}=mi(),x=async D=>{if(D.preventDefault(),!n||!o){m("メールアドレスとパスワードを入力してください");return}if(o.length<6){m("パスワードは6文字以上で入力してください");return}m(""),v(!0);try{r?await E(n,o):await S(n,o)}catch(j){switch(console.error("認証エラー:",j),j.code){case"auth/user-not-found":m("ユーザーが見つかりません");break;case"auth/wrong-password":m("パスワードが間違っています");break;case"auth/email-already-in-use":m("このメールアドレスは既に使用されています");break;case"auth/invalid-email":m("メールアドレスの形式が正しくありません");break;case"auth/weak-password":m("パスワードが弱すぎます");break;default:m("認証に失敗しました。もう一度お試しください。")}}finally{v(!1)}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"max-w-md w-full space-y-8",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:r?"ログイン":"アカウント作成"}),g.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"YouTube BGM Research Tool"})]}),g.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[d&&g.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d}),g.jsxs("div",{className:"space-y-4",children:[g.jsxs("div",{children:[g.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"メールアドレス"}),g.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n,onChange:D=>s(D.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"your-email@example.com"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"パスワード"}),g.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:o,onChange:D=>u(D.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"パスワード（6文字以上）"})]})]}),g.jsx("div",{children:g.jsx("button",{type:"submit",disabled:y,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?g.jsxs("div",{className:"flex items-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"処理中..."]}):r?"ログイン":"アカウント作成"})}),g.jsx("div",{className:"text-center",children:g.jsx("button",{type:"button",onClick:()=>e(!r),className:"text-blue-600 hover:text-blue-500 text-sm",children:r?"アカウントを作成する":"ログインに戻る"})})]})]})})};function T2(){const{user:r,loading:e}=mi(),[n,s]=fe.useState(!0),[o,u]=fe.useState([]),[d,m]=fe.useState([]),[y,v]=fe.useState(!0),[E,S]=fe.useState(null),[x,D]=fe.useState(null),[j,Y]=fe.useState(new Set),[B,ne]=fe.useState("channels"),[oe,ue]=fe.useState(null),[ge,K]=fe.useState(!1),[te,k]=fe.useState(!1),[A,I]=fe.useState({sortBy:"growth_rate",filterBy:"unset",search:""});fe.useEffect(()=>{r&&(N(),M())},[r]),fe.useEffect(()=>{U()},[o,A,j]),fe.useEffect(()=>{r&&A.filterBy!=="all"&&A.filterBy!=="growing"&&A.filterBy!=="large"&&A.filterBy!=="small"&&N()},[A.filterBy,r]);const N=async()=>{if(r)try{v(!0);const{getChannelsByStatus:se}=await _l(async()=>{const{getChannelsByStatus:X}=await Promise.resolve().then(()=>Rl);return{getChannelsByStatus:X}},void 0);let R=[];switch(A.filterBy){case"unset":R=await se("unset",r.uid);break;case"tracking":R=await se("tracking",r.uid);break;case"non-tracking":R=await se("non-tracking",r.uid);break;case"rejected":R=await se("rejected",r.uid);break;case"all":R=await se("all",r.uid);break;default:R=await se("unset",r.uid);break}u(R)}catch(se){console.error("チャンネルデータの読み込みエラー:",se)}finally{v(!1)}},M=async()=>{if(r)try{const{getTrackedChannels:se}=await _l(async()=>{const{getTrackedChannels:re}=await Promise.resolve().then(()=>Rl);return{getTrackedChannels:re}},void 0),R=await se(r.uid),X=new Set(R.map(re=>re.channelId));Y(X)}catch(se){console.error("追跡チャンネルデータの読み込みエラー:",se)}},U=()=>{let se=o.map(R=>({...R,isTracked:j.has(R.channelId)}));switch(A.search&&(se=se.filter(R=>R.channelTitle.toLowerCase().includes(A.search.toLowerCase()))),A.filterBy){case"growing":se=se.filter(R=>(R.growthRate||0)>20);break;case"large":se=se.filter(R=>R.subscriberCount>1e5);break;case"small":se=se.filter(R=>R.subscriberCount<1e4);break}switch(A.sortBy){case"growth_rate":se.sort((R,X)=>(X.growthRate||0)-(R.growthRate||0));break;case"subscribers":se.sort((R,X)=>X.subscriberCount-R.subscriberCount);break;case"views":se.sort((R,X)=>(X.totalViews||0)-(R.totalViews||0));break;case"added_date":se.sort((R,X)=>{var me,Re,_e,ct;const re=((Re=(me=R.createdAt)==null?void 0:me.toDate)==null?void 0:Re.call(me))||new Date(R.createdAt);return(((ct=(_e=X.createdAt)==null?void 0:_e.toDate)==null?void 0:ct.call(_e))||new Date(X.createdAt))-re});break}m(se)},O=async se=>{try{let R=se;if(se.startsWith("UC")&&se.length===24){const X=o.find(re=>re.channelId===se);if(X)R=X.id;else{console.error("削除対象のチャンネルが見つかりません");return}}await MR(nn(ut,"users",r.uid,"channels",R)),await N(),console.log(`✅ チャンネルを削除しました: ${R}`)}catch(R){console.error("チャンネル削除エラー:",R),alert("チャンネルの削除に失敗しました")}},Et=async se=>{try{if(j.has(se.channelId))return;await li(nn(ut,"users",r.uid,"trackedChannels",se.channelId),{channelId:se.channelId,channelTitle:se.channelTitle,channelUrl:se.channelUrl,thumbnailUrl:se.thumbnailUrl,addedAt:new Date,isActive:!0}),await li(nn(ut,"users",r.uid,"trackingData",`${se.channelId}_${new Date().toISOString().split("T")[0]}`),{channelId:se.channelId,subscriberCount:se.subscriberCount,videoCount:se.videoCount,totalViews:se.totalViews,recordedAt:new Date}),Y(R=>new Set([...R,se.channelId])),console.log(`✅ Added to tracking: ${se.channelTitle}`)}catch(R){console.error("追跡追加エラー:",R)}},tt=async se=>{S(se),D({...se,mostPopularVideo:{title:"最も人気の動画（取得中...）",viewCount:0,thumbnailUrl:"",url:""}});try{const{fetchChannelMostPopularVideo:R,fetchChannelInfo:X}=await _l(async()=>{const{fetchChannelMostPopularVideo:me,fetchChannelInfo:Re}=await Promise.resolve().then(()=>Rl);return{fetchChannelMostPopularVideo:me,fetchChannelInfo:Re}},void 0);let re=se.uploadsPlaylistId;re||(console.log("uploadsPlaylistId not found, fetching channel info..."),re=(await X(se.channelId,r.uid)).uploadsPlaylistId),console.log("Using uploadsPlaylistId:",re);const ie=await R(re,r.uid);D(ie?{...se,mostPopularVideo:ie}:{...se,mostPopularVideo:{title:"人気動画が見つかりませんでした",viewCount:0,thumbnailUrl:"",url:""}})}catch(R){console.error("人気動画取得エラー:",R),D({...se,mostPopularVideo:{title:"人気動画の取得に失敗しました",viewCount:0,thumbnailUrl:"",url:""}})}},Q=()=>{S(null),D(null)};if(e)return g.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600",children:"認証状態を確認中..."})]})});if(!r)return g.jsx(E2,{isLogin:n,setIsLogin:s});if(y)return g.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:g.jsxs("div",{className:"text-center",children:[g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),g.jsx("p",{className:"text-gray-600",children:"チャンネルデータを読み込み中..."})]})});const le=()=>{N()},pe=()=>{switch(B){case"settings":return g.jsx(g2,{});case"profile":return g.jsx(v2,{});case"tracking":return g.jsx(p2,{selectedChannelId:oe});case"history":return g.jsx(y2,{});default:return g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"チャンネル管理"}),g.jsxs("div",{className:"flex space-x-3",children:[g.jsx("button",{onClick:()=>K(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"+ 手動追加"}),g.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"📝 フィードバック"})]})]}),g.jsx(i2,{filters:A,onFiltersChange:I}),g.jsx(r2,{channels:d}),g.jsx(u2,{channels:d,onChannelClick:tt,onAddToTracking:Et,onStatusChange:async(se,R,X)=>{const{updateChannelStatus:re}=await _l(async()=>{const{updateChannelStatus:ie}=await Promise.resolve().then(()=>Rl);return{updateChannelStatus:ie}},void 0);await re(se,R,r.uid,X),await N()}})]})}};return g.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[g.jsx(n2,{currentView:B,onViewChange:ne}),g.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:pe()}),g.jsx(c2,{channel:x||E,isOpen:!!E,onClose:Q,onRemove:O}),g.jsx(_2,{isOpen:ge,onClose:()=>K(!1),onChannelAdded:le}),g.jsx(b2,{isOpen:te,onClose:()=>k(!1)})]})}function x2(){return g.jsx(t2,{children:g.jsx(T2,{})})}Lx.createRoot(document.getElementById("root")).render(g.jsx(fe.StrictMode,{children:g.jsx(x2,{})}));
