(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Of={exports:{}},yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function wA(){if(Iv)return yl;Iv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:u}}return yl.Fragment=e,yl.jsx=n,yl.jsxs=n,yl}var Cv;function SA(){return Cv||(Cv=1,Of.exports=wA()),Of.exports}var v=SA(),kf={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function xA(){if(Nv)return Ie;Nv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function x(N){return N===null||typeof N!="object"?null:(N=w&&N[w]||N["@@iterator"],typeof N=="function"?N:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,B={};function Q(N,W,se){this.props=N,this.context=W,this.refs=B,this.updater=se||V}Q.prototype.isReactComponent={},Q.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},Q.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function ue(){}ue.prototype=Q.prototype;function he(N,W,se){this.props=N,this.context=W,this.refs=B,this.updater=se||V}var le=he.prototype=new ue;le.constructor=he,G(le,Q.prototype),le.isPureReactComponent=!0;var de=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function D(N,W,se,ie,ye,Se){return se=Se.ref,{$$typeof:r,type:N,key:W,ref:se!==void 0?se:null,props:Se}}function S(N,W){return D(N.type,W,void 0,void 0,void 0,N.props)}function R(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function O(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(se){return W[se]})}var M=/\/+/g;function j(N,W){return typeof N=="object"&&N!==null&&N.key!=null?O(""+N.key):W.toString(36)}function C(){}function bt(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(C,C):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function ae(N,W,se,ie,ye){var Se=typeof N;(Se==="undefined"||Se==="boolean")&&(N=null);var _e=!1;if(N===null)_e=!0;else switch(Se){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(N.$$typeof){case r:case e:_e=!0;break;case E:return _e=N._init,ae(_e(N._payload),W,se,ie,ye)}}if(_e)return ye=ye(N),_e=ie===""?"."+j(N,0):ie,de(ye)?(se="",_e!=null&&(se=_e.replace(M,"$&/")+"/"),ae(ye,W,se,"",function(ln){return ln})):ye!=null&&(R(ye)&&(ye=S(ye,se+(ye.key==null||N&&N.key===ye.key?"":(""+ye.key).replace(M,"$&/")+"/")+_e)),W.push(ye)),1;_e=0;var ft=ie===""?".":ie+":";if(de(N))for(var Qe=0;Qe<N.length;Qe++)ie=N[Qe],Se=ft+j(ie,Qe),_e+=ae(ie,W,se,Se,ye);else if(Qe=x(N),typeof Qe=="function")for(N=Qe.call(N),Qe=0;!(ie=N.next()).done;)ie=ie.value,Se=ft+j(ie,Qe++),_e+=ae(ie,W,se,Se,ye);else if(Se==="object"){if(typeof N.then=="function")return ae(bt(N),W,se,ie,ye);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return _e}function U(N,W,se){if(N==null)return N;var ie=[],ye=0;return ae(N,ie,"","",function(Se){return W.call(se,Se,ye++)}),ie}function ne(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(se){(N._status===0||N._status===-1)&&(N._status=1,N._result=se)},function(se){(N._status===0||N._status===-1)&&(N._status=2,N._result=se)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var oe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Ce(){}return Ie.Children={map:U,forEach:function(N,W,se){U(N,function(){W.apply(this,arguments)},se)},count:function(N){var W=0;return U(N,function(){W++}),W},toArray:function(N){return U(N,function(W){return W})||[]},only:function(N){if(!R(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ie.Component=Q,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=he,Ie.StrictMode=s,Ie.Suspense=p,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(N){return Y.H.useMemoCache(N)}},Ie.cache=function(N){return function(){return N.apply(null,arguments)}},Ie.cloneElement=function(N,W,se){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ie=G({},N.props),ye=N.key,Se=void 0;if(W!=null)for(_e in W.ref!==void 0&&(Se=void 0),W.key!==void 0&&(ye=""+W.key),W)!Z.call(W,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&W.ref===void 0||(ie[_e]=W[_e]);var _e=arguments.length-2;if(_e===1)ie.children=se;else if(1<_e){for(var ft=Array(_e),Qe=0;Qe<_e;Qe++)ft[Qe]=arguments[Qe+2];ie.children=ft}return D(N.type,ye,void 0,void 0,Se,ie)},Ie.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Ie.createElement=function(N,W,se){var ie,ye={},Se=null;if(W!=null)for(ie in W.key!==void 0&&(Se=""+W.key),W)Z.call(W,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ye[ie]=W[ie]);var _e=arguments.length-2;if(_e===1)ye.children=se;else if(1<_e){for(var ft=Array(_e),Qe=0;Qe<_e;Qe++)ft[Qe]=arguments[Qe+2];ye.children=ft}if(N&&N.defaultProps)for(ie in _e=N.defaultProps,_e)ye[ie]===void 0&&(ye[ie]=_e[ie]);return D(N,Se,void 0,void 0,null,ye)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(N){return{$$typeof:m,render:N}},Ie.isValidElement=R,Ie.lazy=function(N){return{$$typeof:E,_payload:{_status:-1,_result:N},_init:ne}},Ie.memo=function(N,W){return{$$typeof:y,type:N,compare:W===void 0?null:W}},Ie.startTransition=function(N){var W=Y.T,se={};Y.T=se;try{var ie=N(),ye=Y.S;ye!==null&&ye(se,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(Ce,oe)}catch(Se){oe(Se)}finally{Y.T=W}},Ie.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},Ie.use=function(N){return Y.H.use(N)},Ie.useActionState=function(N,W,se){return Y.H.useActionState(N,W,se)},Ie.useCallback=function(N,W){return Y.H.useCallback(N,W)},Ie.useContext=function(N){return Y.H.useContext(N)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(N,W){return Y.H.useDeferredValue(N,W)},Ie.useEffect=function(N,W,se){var ie=Y.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(N,W)},Ie.useId=function(){return Y.H.useId()},Ie.useImperativeHandle=function(N,W,se){return Y.H.useImperativeHandle(N,W,se)},Ie.useInsertionEffect=function(N,W){return Y.H.useInsertionEffect(N,W)},Ie.useLayoutEffect=function(N,W){return Y.H.useLayoutEffect(N,W)},Ie.useMemo=function(N,W){return Y.H.useMemo(N,W)},Ie.useOptimistic=function(N,W){return Y.H.useOptimistic(N,W)},Ie.useReducer=function(N,W,se){return Y.H.useReducer(N,W,se)},Ie.useRef=function(N){return Y.H.useRef(N)},Ie.useState=function(N){return Y.H.useState(N)},Ie.useSyncExternalStore=function(N,W,se){return Y.H.useSyncExternalStore(N,W,se)},Ie.useTransition=function(){return Y.H.useTransition()},Ie.version="19.1.0",Ie}var Dv;function wm(){return Dv||(Dv=1,kf.exports=xA()),kf.exports}var pe=wm(),Vf={exports:{}},vl={},Mf={exports:{}},Pf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function RA(){return Ov||(Ov=1,function(r){function e(U,ne){var oe=U.length;U.push(ne);e:for(;0<oe;){var Ce=oe-1>>>1,N=U[Ce];if(0<o(N,ne))U[Ce]=ne,U[oe]=N,oe=Ce;else break e}}function n(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var ne=U[0],oe=U.pop();if(oe!==ne){U[0]=oe;e:for(var Ce=0,N=U.length,W=N>>>1;Ce<W;){var se=2*(Ce+1)-1,ie=U[se],ye=se+1,Se=U[ye];if(0>o(ie,oe))ye<N&&0>o(Se,ie)?(U[Ce]=Se,U[ye]=oe,Ce=ye):(U[Ce]=ie,U[se]=oe,Ce=se);else if(ye<N&&0>o(Se,oe))U[Ce]=Se,U[ye]=oe,Ce=ye;else break e}}return ne}function o(U,ne){var oe=U.sortIndex-ne.sortIndex;return oe!==0?oe:U.id-ne.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var p=[],y=[],E=1,w=null,x=3,V=!1,G=!1,B=!1,Q=!1,ue=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,le=typeof setImmediate<"u"?setImmediate:null;function de(U){for(var ne=n(y);ne!==null;){if(ne.callback===null)s(y);else if(ne.startTime<=U)s(y),ne.sortIndex=ne.expirationTime,e(p,ne);else break;ne=n(y)}}function Y(U){if(B=!1,de(U),!G)if(n(p)!==null)G=!0,Z||(Z=!0,j());else{var ne=n(y);ne!==null&&ae(Y,ne.startTime-U)}}var Z=!1,D=-1,S=5,R=-1;function O(){return Q?!0:!(r.unstable_now()-R<S)}function M(){if(Q=!1,Z){var U=r.unstable_now();R=U;var ne=!0;try{e:{G=!1,B&&(B=!1,he(D),D=-1),V=!0;var oe=x;try{t:{for(de(U),w=n(p);w!==null&&!(w.expirationTime>U&&O());){var Ce=w.callback;if(typeof Ce=="function"){w.callback=null,x=w.priorityLevel;var N=Ce(w.expirationTime<=U);if(U=r.unstable_now(),typeof N=="function"){w.callback=N,de(U),ne=!0;break t}w===n(p)&&s(p),de(U)}else s(p);w=n(p)}if(w!==null)ne=!0;else{var W=n(y);W!==null&&ae(Y,W.startTime-U),ne=!1}}break e}finally{w=null,x=oe,V=!1}ne=void 0}}finally{ne?j():Z=!1}}}var j;if(typeof le=="function")j=function(){le(M)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,bt=C.port2;C.port1.onmessage=M,j=function(){bt.postMessage(null)}}else j=function(){ue(M,0)};function ae(U,ne){D=ue(function(){U(r.unstable_now())},ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(U){switch(x){case 1:case 2:case 3:var ne=3;break;default:ne=x}var oe=x;x=ne;try{return U()}finally{x=oe}},r.unstable_requestPaint=function(){Q=!0},r.unstable_runWithPriority=function(U,ne){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var oe=x;x=U;try{return ne()}finally{x=oe}},r.unstable_scheduleCallback=function(U,ne,oe){var Ce=r.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Ce+oe:Ce):oe=Ce,U){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=oe+N,U={id:E++,callback:ne,priorityLevel:U,startTime:oe,expirationTime:N,sortIndex:-1},oe>Ce?(U.sortIndex=oe,e(y,U),n(p)===null&&U===n(y)&&(B?(he(D),D=-1):B=!0,ae(Y,oe-Ce))):(U.sortIndex=N,e(p,U),G||V||(G=!0,Z||(Z=!0,j()))),U},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(U){var ne=x;return function(){var oe=x;x=ne;try{return U.apply(this,arguments)}finally{x=oe}}}}(Pf)),Pf}var kv;function IA(){return kv||(kv=1,Mf.exports=RA()),Mf.exports}var jf={exports:{}},Ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function CA(){if(Vv)return Ft;Vv=1;var r=wm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:y,implementation:E}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ft.createPortal=function(p,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,E)},Ft.flushSync=function(p){var y=d.T,E=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=E,s.d.f()}},Ft.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Ft.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ft.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var E=y.as,w=m(E,y.crossOrigin),x=typeof y.integrity=="string"?y.integrity:void 0,V=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:x,fetchPriority:V}):E==="script"&&s.d.X(p,{crossOrigin:w,integrity:x,fetchPriority:V,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ft.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Ft.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,w=m(E,y.crossOrigin);s.d.L(p,E,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ft.preloadModule=function(p,y){if(typeof p=="string")if(y){var E=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Ft.requestFormReset=function(p){s.d.r(p)},Ft.unstable_batchedUpdates=function(p,y){return p(y)},Ft.useFormState=function(p,y,E){return d.H.useFormState(p,y,E)},Ft.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ft.version="19.1.0",Ft}var Mv;function NA(){if(Mv)return jf.exports;Mv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),jf.exports=CA(),jf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pv;function DA(){if(Pv)return vl;Pv=1;var r=IA(),e=wm(),n=NA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var b=!1,T=h.child;T;){if(T===a){b=!0,a=h,l=f;break}if(T===l){b=!0,l=h,a=f;break}T=T.sibling}if(!b){for(T=f.child;T;){if(T===a){b=!0,a=f,l=h;break}if(T===l){b=!0,l=f,a=h;break}T=T.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ue=Symbol.for("react.provider"),he=Symbol.for("react.consumer"),le=Symbol.for("react.context"),de=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function bt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case Q:return"Profiler";case B:return"StrictMode";case Y:return"Suspense";case Z:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V:return"Portal";case le:return(t.displayName||"Context")+".Provider";case he:return(t._context.displayName||"Context")+".Consumer";case de:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:bt(t.type)||"Memo";case S:i=t._payload,t=t._init;try{return bt(t(i))}catch{}}return null}var ae=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Ce=[],N=-1;function W(t){return{current:t}}function se(t){0>N||(t.current=Ce[N],Ce[N]=null,N--)}function ie(t,i){N++,Ce[N]=t.current,t.current=i}var ye=W(null),Se=W(null),_e=W(null),ft=W(null);function Qe(t,i){switch(ie(_e,i),ie(Se,t),ie(ye,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?nv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=nv(i),t=iv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}se(ye),ie(ye,t)}function ln(){se(ye),se(Se),se(_e)}function Fn(t){t.memoizedState!==null&&ie(ft,t);var i=ye.current,a=iv(i,t.type);i!==a&&(ie(Se,t),ie(ye,a))}function Vn(t){Se.current===t&&(se(ye),se(Se)),ft.current===t&&(se(ft),dl._currentValue=oe)}var mi=Object.prototype.hasOwnProperty,gi=r.unstable_scheduleCallback,pi=r.unstable_cancelCallback,Qr=r.unstable_shouldYield,tu=r.unstable_requestPaint,_n=r.unstable_now,Dh=r.unstable_getCurrentPriorityLevel,uo=r.unstable_ImmediatePriority,Hs=r.unstable_UserBlockingPriority,$r=r.unstable_NormalPriority,Oh=r.unstable_LowPriority,Gs=r.unstable_IdlePriority,co=r.log,nu=r.unstable_setDisableYieldValue,at=null,Fe=null;function un(t){if(typeof co=="function"&&nu(t),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(at,t)}catch{}}var Ht=Math.clz32?Math.clz32:Xr,iu=Math.log,kh=Math.LN2;function Xr(t){return t>>>=0,t===0?32:31-(iu(t)/kh|0)|0}var Zr=256,Jr=4194304;function Mn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Fs(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=Mn(l):(b&=T,b!==0?h=Mn(b):a||(a=T&~t,a!==0&&(h=Mn(a))))):(T=l&~f,T!==0?h=Mn(T):b!==0?h=Mn(b):a||(a=l&~t,a!==0&&(h=Mn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function Wr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ho(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fo(){var t=Zr;return Zr<<=1,(Zr&4194048)===0&&(Zr=256),t}function mo(){var t=Jr;return Jr<<=1,(Jr&62914560)===0&&(Jr=4194304),t}function yi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function vi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function go(t,i,a,l,h,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,I=t.expirationTimes,q=t.hiddenUpdates;for(a=b&~a;0<a;){var $=31-Ht(a),J=1<<$;T[$]=0,I[$]=-1;var H=q[$];if(H!==null)for(q[$]=null,$=0;$<H.length;$++){var F=H[$];F!==null&&(F.lane&=-536870913)}a&=~J}l!==0&&Kn(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~i))}function Kn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Ht(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function po(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Ht(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Ji(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ks(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Wi(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:Tv(t.type))}function ru(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var nt=Math.random().toString(36).slice(2),Et="__reactFiber$"+nt,mt="__reactProps$"+nt,bn="__reactContainer$"+nt,yo="__reactEvents$"+nt,Vh="__reactListeners$"+nt,er="__reactHandles$"+nt,su="__reactResources$"+nt,es="__reactMarker$"+nt;function tr(t){delete t[Et],delete t[mt],delete t[yo],delete t[Vh],delete t[er]}function _i(t){var i=t[Et];if(i)return i;for(var a=t.parentNode;a;){if(i=a[bn]||a[Et]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=ov(t);t!==null;){if(a=t[Et])return a;t=ov(t)}return i}t=a,a=t.parentNode}return null}function Yn(t){if(t=t[Et]||t[bn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Qn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Xt(t){var i=t[su];return i||(i=t[su]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ut(t){t[es]=!0}var vo=new Set,Ys={};function Pn(t,i){bi(t,i),bi(t+"Capture",i)}function bi(t,i){for(Ys[t]=i,t=0;t<i.length;t++)vo.add(i[t])}var au=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ou={},ts={};function lu(t){return mi.call(ts,t)?!0:mi.call(ou,t)?!1:au.test(t)?ts[t]=!0:(ou[t]=!0,!1)}function nr(t,i,a){if(lu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function $n(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Mt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var ns,uu;function Ei(t){if(ns===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ns=i&&i[1]||"",uu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ns+t+uu}var Qs=!1;function $s(t,i){if(!t||Qs)return"";Qs=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(F){var H=F}Reflect.construct(t,[],J)}else{try{J.call()}catch(F){H=F}t.call(J.prototype)}}else{try{throw Error()}catch(F){H=F}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(F){if(F&&H&&typeof F.stack=="string")return[F.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],T=f[1];if(b&&T){var I=b.split(`
`),q=T.split(`
`);for(h=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===I.length||h===q.length)for(l=I.length-1,h=q.length-1;1<=l&&0<=h&&I[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(I[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||I[l]!==q[h]){var $=`
`+I[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=h);break}}}finally{Qs=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ei(a):""}function _o(t){switch(t.tag){case 26:case 27:case 5:return Ei(t.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 15:return $s(t.type,!1);case 11:return $s(t.type.render,!1);case 1:return $s(t.type,!0);case 31:return Ei("Activity");default:return""}}function Xs(t){try{var i="";do i+=_o(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Mh(t){var i=bo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Zs(t){t._valueTracker||(t._valueTracker=Mh(t))}function Eo(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=bo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function is(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ph=/[\n"\\]/g;function gt(t){return t.replace(Ph,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function cn(t,i,a,l,h,f,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),i!=null?b==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Zt(i)):t.value!==""+Zt(i)&&(t.value=""+Zt(i)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),i!=null?ir(t,b,Zt(i)):a!=null?ir(t,b,Zt(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Zt(T):t.removeAttribute("name")}function rs(t,i,a,l,h,f,b,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+Zt(a):"",i=i!=null?""+Zt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function ir(t,i,a){i==="number"&&is(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ti(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Zt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function $e(t,i,a){if(i!=null&&(i=""+Zt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Zt(a):""}function ss(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ae(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Zt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function En(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var as=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cu(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||as.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function To(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&cu(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&cu(t,f,i[f])}function Ao(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Uh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(t){return Uh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ai=null;function Tn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wi=null,Si=null;function wo(t){var i=Yn(t);if(i&&(t=i.stateNode)){var a=t[mt]||null;e:switch(t=i.stateNode,i.type){case"input":if(cn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[mt]||null;if(!h)throw Error(s(90));cn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Eo(l)}break e;case"textarea":$e(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ti(t,!!a.multiple,i,!1)}}}var Xn=!1;function hu(t,i,a){if(Xn)return t(i,a);Xn=!0;try{var l=t(i);return l}finally{if(Xn=!1,(wi!==null||Si!==null)&&(rc(),wi&&(i=wi,t=Si,Si=wi=null,wo(i),t)))for(i=0;i<t.length;i++)wo(t[i])}}function os(t,i){var a=t.stateNode;if(a===null)return null;var l=a[mt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),An=!1;if(jn)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){An=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{An=!1}var Zn=null,rr=null,xi=null;function So(){if(xi)return xi;var t,i=rr,a=i.length,l,h="value"in Zn?Zn.value:Zn.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&i[a-l]===h[f-l];l++);return xi=h.slice(t,1<l?1-l:void 0)}function Jn(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Wn(){return!0}function xo(){return!1}function It(t){function i(a,l,h,f,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Wn:xo,this.isPropagationStopped=xo,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),i}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=It(He),us=E({},He,{view:0,detail:0}),du=It(us),ea,ta,ei,cs=E({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ei&&(ei&&t.type==="mousemove"?(ea=t.screenX-ei.screenX,ta=t.screenY-ei.screenY):ta=ea=0,ei=t),ea)},movementY:function(t){return"movementY"in t?t.movementY:ta}}),wn=It(cs),fu=E({},cs,{dataTransfer:0}),Lh=It(fu),hs=E({},us,{relatedTarget:0}),na=It(hs),Ro=E({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),ia=It(Ro),mu=E({},He,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ra=It(mu),zh=E({},He,{data:0}),Io=It(zh),ds={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Co(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=pu[t])?!!i[t]:!1}function fs(){return Co}var yu=E({},us,{key:function(t){if(t.key){var i=ds[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Jn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fs,charCode:function(t){return t.type==="keypress"?Jn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sa=It(yu),vu=E({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),No=It(vu),Ri=E({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fs}),_u=It(Ri),bu=E({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eu=It(bu),Tu=E({},cs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aa=It(Tu),Jt=E({},He,{newState:0,oldState:0}),Au=It(Jt),wu=[9,13,27,32],ti=jn&&"CompositionEvent"in window,c=null;jn&&"documentMode"in document&&(c=document.documentMode);var g=jn&&"TextEvent"in window&&!c,_=jn&&(!ti||c&&8<c&&11>=c),A=" ",L=!1;function K(t,i){switch(t){case"keyup":return wu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function re(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var je=!1;function Tt(t,i){switch(t){case"compositionend":return re(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return t=i.data,t===A&&L?null:t;default:return null}}function Ue(t,i){if(je)return t==="compositionend"||!ti&&K(t,i)?(t=So(),xi=rr=Zn=null,je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Ct={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function At(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ct[t.type]:i==="textarea"}function Ii(t,i,a,l){wi?Si?Si.push(l):Si=[l]:wi=l,i=cc(i,"onChange"),0<i.length&&(a=new Ws("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Pt=null,ni=null;function Do(t){Zy(t,0)}function Su(t){var i=Qn(t);if(Eo(i))return t}function vg(t,i){if(t==="change")return i}var _g=!1;if(jn){var Bh;if(jn){var qh="oninput"in document;if(!qh){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),qh=typeof bg.oninput=="function"}Bh=qh}else Bh=!1;_g=Bh&&(!document.documentMode||9<document.documentMode)}function Eg(){Pt&&(Pt.detachEvent("onpropertychange",Tg),ni=Pt=null)}function Tg(t){if(t.propertyName==="value"&&Su(ni)){var i=[];Ii(i,ni,t,Tn(t)),hu(Do,i)}}function eT(t,i,a){t==="focusin"?(Eg(),Pt=i,ni=a,Pt.attachEvent("onpropertychange",Tg)):t==="focusout"&&Eg()}function tT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Su(ni)}function nT(t,i){if(t==="click")return Su(i)}function iT(t,i){if(t==="input"||t==="change")return Su(i)}function rT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var hn=typeof Object.is=="function"?Object.is:rT;function Oo(t,i){if(hn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!mi.call(i,h)||!hn(t[h],i[h]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,i){var a=Ag(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ag(a)}}function Sg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Sg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function xg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=is(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=is(t.document)}return i}function Hh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var sT=jn&&"documentMode"in document&&11>=document.documentMode,oa=null,Gh=null,ko=null,Fh=!1;function Rg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Fh||oa==null||oa!==is(l)||(l=oa,"selectionStart"in l&&Hh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ko&&Oo(ko,l)||(ko=l,l=cc(Gh,"onSelect"),0<l.length&&(i=new Ws("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=oa)))}function ms(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var la={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionrun:ms("Transition","TransitionRun"),transitionstart:ms("Transition","TransitionStart"),transitioncancel:ms("Transition","TransitionCancel"),transitionend:ms("Transition","TransitionEnd")},Kh={},Ig={};jn&&(Ig=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function gs(t){if(Kh[t])return Kh[t];if(!la[t])return t;var i=la[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ig)return Kh[t]=i[a];return t}var Cg=gs("animationend"),Ng=gs("animationiteration"),Dg=gs("animationstart"),aT=gs("transitionrun"),oT=gs("transitionstart"),lT=gs("transitioncancel"),Og=gs("transitionend"),kg=new Map,Yh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yh.push("scrollEnd");function Un(t,i){kg.set(t,i),Pn(i,[t])}var Vg=new WeakMap;function Sn(t,i){if(typeof t=="object"&&t!==null){var a=Vg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Xs(i)},Vg.set(t,i),i)}return{value:t,source:i,stack:Xs(i)}}var xn=[],ua=0,Qh=0;function xu(){for(var t=ua,i=Qh=ua=0;i<t;){var a=xn[i];xn[i++]=null;var l=xn[i];xn[i++]=null;var h=xn[i];xn[i++]=null;var f=xn[i];if(xn[i++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}f!==0&&Mg(a,h,f)}}function Ru(t,i,a,l){xn[ua++]=t,xn[ua++]=i,xn[ua++]=a,xn[ua++]=l,Qh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function $h(t,i,a,l){return Ru(t,i,a,l),Iu(t)}function ca(t,i){return Ru(t,null,null,i),Iu(t)}function Mg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Ht(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function Iu(t){if(50<rl)throw rl=0,tf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ha={};function uT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,i,a,l){return new uT(t,i,a,l)}function Xh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ci(t,i){var a=t.alternate;return a===null?(a=dn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Pg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Cu(t,i,a,l,h,f){var b=0;if(l=t,typeof t=="function")Xh(t)&&(b=1);else if(typeof t=="string")b=hA(t,a,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=dn(31,a,i,h),t.elementType=R,t.lanes=f,t;case G:return ps(a.children,h,f,i);case B:b=8,h|=24;break;case Q:return t=dn(12,a,i,h|2),t.elementType=Q,t.lanes=f,t;case Y:return t=dn(13,a,i,h),t.elementType=Y,t.lanes=f,t;case Z:return t=dn(19,a,i,h),t.elementType=Z,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ue:case le:b=10;break e;case he:b=9;break e;case de:b=11;break e;case D:b=14;break e;case S:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=dn(b,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function ps(t,i,a,l){return t=dn(7,t,l,i),t.lanes=a,t}function Zh(t,i,a){return t=dn(6,t,null,i),t.lanes=a,t}function Jh(t,i,a){return i=dn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var da=[],fa=0,Nu=null,Du=0,Rn=[],In=0,ys=null,Ni=1,Di="";function vs(t,i){da[fa++]=Du,da[fa++]=Nu,Nu=t,Du=i}function jg(t,i,a){Rn[In++]=Ni,Rn[In++]=Di,Rn[In++]=ys,ys=t;var l=Ni;t=Di;var h=32-Ht(l)-1;l&=~(1<<h),a+=1;var f=32-Ht(i)+h;if(30<f){var b=h-h%5;f=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Ni=1<<32-Ht(i)+h|a<<h|l,Di=f+t}else Ni=1<<f|a<<h|l,Di=t}function Wh(t){t.return!==null&&(vs(t,1),jg(t,1,0))}function ed(t){for(;t===Nu;)Nu=da[--fa],da[fa]=null,Du=da[--fa],da[fa]=null;for(;t===ys;)ys=Rn[--In],Rn[In]=null,Di=Rn[--In],Rn[In]=null,Ni=Rn[--In],Rn[In]=null}var Wt=null,ot=null,qe=!1,_s=null,ii=!1,td=Error(s(519));function bs(t){var i=Error(s(418,""));throw Po(Sn(i,t)),td}function Ug(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Et]=t,i[mt]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<al.length;a++)Ve(al[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),rs(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Zs(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),ss(i,l.value,l.defaultValue,l.children),Zs(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||tv(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=hc),i=!0):i=!1,i||bs(t)}function Lg(t){for(Wt=t.return;Wt;)switch(Wt.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:Wt=Wt.return}}function Vo(t){if(t!==Wt)return!1;if(!qe)return Lg(t),qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||vf(t.type,t.memoizedProps)),a=!a),a&&ot&&bs(t),Lg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ot=zn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ot=null}}else i===27?(i=ot,br(t.type)?(t=Tf,Tf=null,ot=t):ot=i):ot=Wt?zn(t.stateNode.nextSibling):null;return!0}function Mo(){ot=Wt=null,qe=!1}function zg(){var t=_s;return t!==null&&(sn===null?sn=t:sn.push.apply(sn,t),_s=null),t}function Po(t){_s===null?_s=[t]:_s.push(t)}var nd=W(null),Es=null,Oi=null;function sr(t,i,a){ie(nd,i._currentValue),i._currentValue=a}function ki(t){t._currentValue=nd.current,se(nd)}function id(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function rd(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var I=0;I<i.length;I++)if(T.context===i[I]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),id(f.return,a,t),l||(b=null);break e}f=T.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),id(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function jo(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var T=h.type;hn(h.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(h===ft.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(dl):t=[dl])}h=h.return}t!==null&&rd(i,t,a,l),i.flags|=262144}function Ou(t){for(t=t.firstContext;t!==null;){if(!hn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ts(t){Es=t,Oi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return Bg(Es,t)}function ku(t,i){return Es===null&&Ts(t),Bg(t,i)}function Bg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Oi===null){if(t===null)throw Error(s(308));Oi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Oi=Oi.next=i;return a}var cT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},hT=r.unstable_scheduleCallback,dT=r.unstable_NormalPriority,wt={$$typeof:le,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sd(){return{controller:new cT,data:new Map,refCount:0}}function Uo(t){t.refCount--,t.refCount===0&&hT(dT,function(){t.controller.abort()})}var Lo=null,ad=0,ma=0,ga=null;function fT(t,i){if(Lo===null){var a=Lo=[];ad=0,ma=uf(),ga={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ad++,i.then(qg,qg),i}function qg(){if(--ad===0&&Lo!==null){ga!==null&&(ga.status="fulfilled");var t=Lo;Lo=null,ma=0,ga=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function mT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Hg=U.S;U.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&fT(t,i),Hg!==null&&Hg(t,i)};var As=W(null);function od(){var t=As.current;return t!==null?t:et.pooledCache}function Vu(t,i){i===null?ie(As,As.current):ie(As,i.pool)}function Gg(){var t=od();return t===null?null:{parent:wt._currentValue,pool:t}}var zo=Error(s(460)),Fg=Error(s(474)),Mu=Error(s(542)),ld={then:function(){}};function Kg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Pu(){}function Yg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Pu,Pu),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$g(t),t;default:if(typeof i.status=="string")i.then(Pu,Pu);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,$g(t),t}throw Bo=i,zo}}var Bo=null;function Qg(){if(Bo===null)throw Error(s(459));var t=Bo;return Bo=null,t}function $g(t){if(t===zo||t===Mu)throw Error(s(483))}var ar=!1;function ud(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function or(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function lr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Iu(t),Mg(t,null,a),i}return Ru(t,l,i,a),Iu(t)}function qo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,po(t,a)}}function hd(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var dd=!1;function Ho(){if(dd){var t=ga;if(t!==null)throw t}}function Go(t,i,a,l){dd=!1;var h=t.updateQueue;ar=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var I=T,q=I.next;I.next=null,b===null?f=q:b.next=q,b=I;var $=t.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==b&&(T===null?$.firstBaseUpdate=q:T.next=q,$.lastBaseUpdate=I))}if(f!==null){var J=h.baseState;b=0,$=q=I=null,T=f;do{var H=T.lane&-536870913,F=H!==T.lane;if(F?(Le&H)===H:(l&H)===H){H!==0&&H===ma&&(dd=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var we=t,be=T;H=i;var Je=a;switch(be.tag){case 1:if(we=be.payload,typeof we=="function"){J=we.call(Je,J,H);break e}J=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=be.payload,H=typeof we=="function"?we.call(Je,J,H):we,H==null)break e;J=E({},J,H);break e;case 2:ar=!0}}H=T.callback,H!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[H]:F.push(H))}else F={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(q=$=F,I=J):$=$.next=F,b|=H;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;F=T,T=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);$===null&&(I=J),h.baseState=I,h.firstBaseUpdate=q,h.lastBaseUpdate=$,f===null&&(h.shared.lanes=0),pr|=b,t.lanes=b,t.memoizedState=J}}function Xg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Zg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Xg(a[t],i)}var pa=W(null),ju=W(0);function Jg(t,i){t=zi,ie(ju,t),ie(pa,i),zi=t|i.baseLanes}function fd(){ie(ju,zi),ie(pa,pa.current)}function md(){zi=ju.current,se(pa),se(ju)}var ur=0,Ne=null,Xe=null,pt=null,Uu=!1,ya=!1,ws=!1,Lu=0,Fo=0,va=null,gT=0;function ct(){throw Error(s(321))}function gd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!hn(t[a],i[a]))return!1;return!0}function pd(t,i,a,l,h,f){return ur=f,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=t===null||t.memoizedState===null?Mp:Pp,ws=!1,f=a(l,h),ws=!1,ya&&(f=ep(i,a,l,h)),Wg(t),f}function Wg(t){U.H=Fu;var i=Xe!==null&&Xe.next!==null;if(ur=0,pt=Xe=Ne=null,Uu=!1,Fo=0,va=null,i)throw Error(s(300));t===null||Nt||(t=t.dependencies,t!==null&&Ou(t)&&(Nt=!0))}function ep(t,i,a,l){Ne=t;var h=0;do{if(ya&&(va=null),Fo=0,ya=!1,25<=h)throw Error(s(301));if(h+=1,pt=Xe=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}U.H=TT,f=i(a,l)}while(ya);return f}function pT(){var t=U.H,i=t.useState()[0];return i=typeof i.then=="function"?Ko(i):i,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(Ne.flags|=1024),i}function yd(){var t=Lu!==0;return Lu=0,t}function vd(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function _d(t){if(Uu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Uu=!1}ur=0,pt=Xe=Ne=null,ya=!1,Fo=Lu=0,va=null}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ne.memoizedState=pt=t:pt=pt.next=t,pt}function yt(){if(Xe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var i=pt===null?Ne.memoizedState:pt.next;if(i!==null)pt=i,Xe=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},pt===null?Ne.memoizedState=pt=t:pt=pt.next=t}return pt}function bd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(t){var i=Fo;return Fo+=1,va===null&&(va=[]),t=Yg(va,t,i),i=Ne,(pt===null?i.memoizedState:pt.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?Mp:Pp),t}function zu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ko(t);if(t.$$typeof===le)return Gt(t)}throw Error(s(438,String(t)))}function Ed(t){var i=null,a=Ne.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=bd(),Ne.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function Vi(t,i){return typeof i=="function"?i(t):i}function Bu(t){var i=yt();return Td(i,Xe,t)}function Td(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=b=null,I=null,q=i,$=!1;do{var J=q.lane&-536870913;if(J!==q.lane?(Le&J)===J:(ur&J)===J){var H=q.revertLane;if(H===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),J===ma&&($=!0);else if((ur&H)===H){q=q.next,H===ma&&($=!0);continue}else J={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(T=I=J,b=f):I=I.next=J,Ne.lanes|=H,pr|=H;J=q.action,ws&&a(f,J),f=q.hasEagerState?q.eagerState:a(f,J)}else H={lane:J,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(T=I=H,b=f):I=I.next=H,Ne.lanes|=J,pr|=J;q=q.next}while(q!==null&&q!==i);if(I===null?b=f:I.next=T,!hn(f,t.memoizedState)&&(Nt=!0,$&&(a=ga,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=I,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ad(t){var i=yt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do f=t(f,b.action),b=b.next;while(b!==h);hn(f,i.memoizedState)||(Nt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function tp(t,i,a){var l=Ne,h=yt(),f=qe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var b=!hn((Xe||h).memoizedState,a);b&&(h.memoizedState=a,Nt=!0),h=h.queue;var T=rp.bind(null,l,h,t);if(Yo(2048,8,T,[t]),h.getSnapshot!==i||b||pt!==null&&pt.memoizedState.tag&1){if(l.flags|=2048,_a(9,qu(),ip.bind(null,l,h,a,i),null),et===null)throw Error(s(349));f||(ur&124)!==0||np(l,i,a)}return a}function np(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ne.updateQueue,i===null?(i=bd(),Ne.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function ip(t,i,a,l){i.value=a,i.getSnapshot=l,sp(i)&&ap(t)}function rp(t,i,a){return a(function(){sp(i)&&ap(t)})}function sp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!hn(t,a)}catch{return!0}}function ap(t){var i=ca(t,2);i!==null&&yn(i,t,2)}function wd(t){var i=nn();if(typeof t=="function"){var a=t;if(t=a(),ws){un(!0);try{a()}finally{un(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},i}function op(t,i,a,l){return t.baseState=a,Td(t,Xe,typeof l=="function"?l:Vi)}function yT(t,i,a,l,h){if(Gu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};U.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,lp(i,f)):(f.next=a.next,i.pending=a.next=f)}}function lp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=U.T,b={};U.T=b;try{var T=a(h,l),I=U.S;I!==null&&I(b,T),up(t,i,T)}catch(q){Sd(t,i,q)}finally{U.T=f}}else try{f=a(h,l),up(t,i,f)}catch(q){Sd(t,i,q)}}function up(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){cp(t,i,l)},function(l){return Sd(t,i,l)}):cp(t,i,a)}function cp(t,i,a){i.status="fulfilled",i.value=a,hp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,lp(t,a)))}function Sd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,hp(i),i=i.next;while(i!==l)}t.action=null}function hp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function dp(t,i){return i}function fp(t,i){if(qe){var a=et.formState;if(a!==null){e:{var l=Ne;if(qe){if(ot){t:{for(var h=ot,f=ii;h.nodeType!==8;){if(!f){h=null;break t}if(h=zn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ot=zn(h.nextSibling),l=h.data==="F!";break e}}bs(l)}l=!1}l&&(i=a[0])}}return a=nn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dp,lastRenderedState:i},a.queue=l,a=Op.bind(null,Ne,l),l.dispatch=a,l=wd(!1),f=Nd.bind(null,Ne,!1,l.queue),l=nn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=yT.bind(null,Ne,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function mp(t){var i=yt();return gp(i,Xe,t)}function gp(t,i,a){if(i=Td(t,i,dp)[0],t=Bu(Vi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Ko(i)}catch(b){throw b===zo?Mu:b}else l=i;i=yt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Ne.flags|=2048,_a(9,qu(),vT.bind(null,h,a),null)),[l,f,t]}function vT(t,i){t.action=i}function pp(t){var i=yt(),a=Xe;if(a!==null)return gp(i,a,t);yt(),i=i.memoizedState,a=yt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function _a(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=bd(),Ne.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function qu(){return{destroy:void 0,resource:void 0}}function yp(){return yt().memoizedState}function Hu(t,i,a,l){var h=nn();l=l===void 0?null:l,Ne.flags|=t,h.memoizedState=_a(1|i,qu(),a,l)}function Yo(t,i,a,l){var h=yt();l=l===void 0?null:l;var f=h.memoizedState.inst;Xe!==null&&l!==null&&gd(l,Xe.memoizedState.deps)?h.memoizedState=_a(i,f,a,l):(Ne.flags|=t,h.memoizedState=_a(1|i,f,a,l))}function vp(t,i){Hu(8390656,8,t,i)}function _p(t,i){Yo(2048,8,t,i)}function bp(t,i){return Yo(4,2,t,i)}function Ep(t,i){return Yo(4,4,t,i)}function Tp(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ap(t,i,a){a=a!=null?a.concat([t]):null,Yo(4,4,Tp.bind(null,i,t),a)}function xd(){}function wp(t,i){var a=yt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&gd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Sp(t,i){var a=yt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&gd(i,l[1]))return l[0];if(l=t(),ws){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,i],l}function Rd(t,i,a){return a===void 0||(ur&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Iy(),Ne.lanes|=t,pr|=t,a)}function xp(t,i,a,l){return hn(a,i)?a:pa.current!==null?(t=Rd(t,a,l),hn(t,i)||(Nt=!0),t):(ur&42)===0?(Nt=!0,t.memoizedState=a):(t=Iy(),Ne.lanes|=t,pr|=t,i)}function Rp(t,i,a,l,h){var f=ne.p;ne.p=f!==0&&8>f?f:8;var b=U.T,T={};U.T=T,Nd(t,!1,i,a);try{var I=h(),q=U.S;if(q!==null&&q(T,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var $=mT(I,l);Qo(t,i,$,pn(t))}else Qo(t,i,l,pn(t))}catch(J){Qo(t,i,{then:function(){},status:"rejected",reason:J},pn())}finally{ne.p=f,U.T=b}}function _T(){}function Id(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=Ip(t).queue;Rp(t,h,i,oe,a===null?_T:function(){return Cp(t),a(l)})}function Ip(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:oe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Cp(t){var i=Ip(t).next.queue;Qo(t,i,{},pn())}function Cd(){return Gt(dl)}function Np(){return yt().memoizedState}function Dp(){return yt().memoizedState}function bT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=pn();t=or(a);var l=lr(i,t,a);l!==null&&(yn(l,i,a),qo(l,i,a)),i={cache:sd()},t.payload=i;return}i=i.return}}function ET(t,i,a){var l=pn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Gu(t)?kp(i,a):(a=$h(t,i,a,l),a!==null&&(yn(a,t,l),Vp(a,i,l)))}function Op(t,i,a){var l=pn();Qo(t,i,a,l)}function Qo(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Gu(t))kp(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var b=i.lastRenderedState,T=f(b,a);if(h.hasEagerState=!0,h.eagerState=T,hn(T,b))return Ru(t,i,h,0),et===null&&xu(),!1}catch{}finally{}if(a=$h(t,i,h,l),a!==null)return yn(a,t,l),Vp(a,i,l),!0}return!1}function Nd(t,i,a,l){if(l={lane:2,revertLane:uf(),action:l,hasEagerState:!1,eagerState:null,next:null},Gu(t)){if(i)throw Error(s(479))}else i=$h(t,a,l,2),i!==null&&yn(i,t,2)}function Gu(t){var i=t.alternate;return t===Ne||i!==null&&i===Ne}function kp(t,i){ya=Uu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Vp(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,po(t,a)}}var Fu={readContext:Gt,use:zu,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct},Mp={readContext:Gt,use:zu,useCallback:function(t,i){return nn().memoizedState=[t,i===void 0?null:i],t},useContext:Gt,useEffect:vp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Hu(4194308,4,Tp.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Hu(4194308,4,t,i)},useInsertionEffect:function(t,i){Hu(4,2,t,i)},useMemo:function(t,i){var a=nn();i=i===void 0?null:i;var l=t();if(ws){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=nn();if(a!==void 0){var h=a(i);if(ws){un(!0);try{a(i)}finally{un(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=ET.bind(null,Ne,t),[l.memoizedState,t]},useRef:function(t){var i=nn();return t={current:t},i.memoizedState=t},useState:function(t){t=wd(t);var i=t.queue,a=Op.bind(null,Ne,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:xd,useDeferredValue:function(t,i){var a=nn();return Rd(a,t,i)},useTransition:function(){var t=wd(!1);return t=Rp.bind(null,Ne,t.queue,!0,!1),nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ne,h=nn();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),et===null)throw Error(s(349));(Le&124)!==0||np(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,vp(rp.bind(null,l,f,t),[t]),l.flags|=2048,_a(9,qu(),ip.bind(null,l,f,a,i),null),a},useId:function(){var t=nn(),i=et.identifierPrefix;if(qe){var a=Di,l=Ni;a=(l&~(1<<32-Ht(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Lu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=gT++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Cd,useFormState:fp,useActionState:fp,useOptimistic:function(t){var i=nn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Nd.bind(null,Ne,!0,a),a.dispatch=i,[t,i]},useMemoCache:Ed,useCacheRefresh:function(){return nn().memoizedState=bT.bind(null,Ne)}},Pp={readContext:Gt,use:zu,useCallback:wp,useContext:Gt,useEffect:_p,useImperativeHandle:Ap,useInsertionEffect:bp,useLayoutEffect:Ep,useMemo:Sp,useReducer:Bu,useRef:yp,useState:function(){return Bu(Vi)},useDebugValue:xd,useDeferredValue:function(t,i){var a=yt();return xp(a,Xe.memoizedState,t,i)},useTransition:function(){var t=Bu(Vi)[0],i=yt().memoizedState;return[typeof t=="boolean"?t:Ko(t),i]},useSyncExternalStore:tp,useId:Np,useHostTransitionStatus:Cd,useFormState:mp,useActionState:mp,useOptimistic:function(t,i){var a=yt();return op(a,Xe,t,i)},useMemoCache:Ed,useCacheRefresh:Dp},TT={readContext:Gt,use:zu,useCallback:wp,useContext:Gt,useEffect:_p,useImperativeHandle:Ap,useInsertionEffect:bp,useLayoutEffect:Ep,useMemo:Sp,useReducer:Ad,useRef:yp,useState:function(){return Ad(Vi)},useDebugValue:xd,useDeferredValue:function(t,i){var a=yt();return Xe===null?Rd(a,t,i):xp(a,Xe.memoizedState,t,i)},useTransition:function(){var t=Ad(Vi)[0],i=yt().memoizedState;return[typeof t=="boolean"?t:Ko(t),i]},useSyncExternalStore:tp,useId:Np,useHostTransitionStatus:Cd,useFormState:pp,useActionState:pp,useOptimistic:function(t,i){var a=yt();return Xe!==null?op(a,Xe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Ed,useCacheRefresh:Dp},ba=null,$o=0;function Ku(t){var i=$o;return $o+=1,ba===null&&(ba=[]),Yg(ba,t,i)}function Xo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Yu(t,i){throw i.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function jp(t){var i=t._init;return i(t._payload)}function Up(t){function i(P,k){if(t){var z=P.deletions;z===null?(P.deletions=[k],P.flags|=16):z.push(k)}}function a(P,k){if(!t)return null;for(;k!==null;)i(P,k),k=k.sibling;return null}function l(P){for(var k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function h(P,k){return P=Ci(P,k),P.index=0,P.sibling=null,P}function f(P,k,z){return P.index=z,t?(z=P.alternate,z!==null?(z=z.index,z<k?(P.flags|=67108866,k):z):(P.flags|=67108866,k)):(P.flags|=1048576,k)}function b(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function T(P,k,z,X){return k===null||k.tag!==6?(k=Zh(z,P.mode,X),k.return=P,k):(k=h(k,z),k.return=P,k)}function I(P,k,z,X){var me=z.type;return me===G?$(P,k,z.props.children,X,z.key):k!==null&&(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&jp(me)===k.type)?(k=h(k,z.props),Xo(k,z),k.return=P,k):(k=Cu(z.type,z.key,z.props,null,P.mode,X),Xo(k,z),k.return=P,k)}function q(P,k,z,X){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=Jh(z,P.mode,X),k.return=P,k):(k=h(k,z.children||[]),k.return=P,k)}function $(P,k,z,X,me){return k===null||k.tag!==7?(k=ps(z,P.mode,X,me),k.return=P,k):(k=h(k,z),k.return=P,k)}function J(P,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Zh(""+k,P.mode,z),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case x:return z=Cu(k.type,k.key,k.props,null,P.mode,z),Xo(z,k),z.return=P,z;case V:return k=Jh(k,P.mode,z),k.return=P,k;case S:var X=k._init;return k=X(k._payload),J(P,k,z)}if(ae(k)||j(k))return k=ps(k,P.mode,z,null),k.return=P,k;if(typeof k.then=="function")return J(P,Ku(k),z);if(k.$$typeof===le)return J(P,ku(P,k),z);Yu(P,k)}return null}function H(P,k,z,X){var me=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return me!==null?null:T(P,k,""+z,X);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case x:return z.key===me?I(P,k,z,X):null;case V:return z.key===me?q(P,k,z,X):null;case S:return me=z._init,z=me(z._payload),H(P,k,z,X)}if(ae(z)||j(z))return me!==null?null:$(P,k,z,X,null);if(typeof z.then=="function")return H(P,k,Ku(z),X);if(z.$$typeof===le)return H(P,k,ku(P,z),X);Yu(P,z)}return null}function F(P,k,z,X,me){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return P=P.get(z)||null,T(k,P,""+X,me);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case x:return P=P.get(X.key===null?z:X.key)||null,I(k,P,X,me);case V:return P=P.get(X.key===null?z:X.key)||null,q(k,P,X,me);case S:var Oe=X._init;return X=Oe(X._payload),F(P,k,z,X,me)}if(ae(X)||j(X))return P=P.get(z)||null,$(k,P,X,me,null);if(typeof X.then=="function")return F(P,k,z,Ku(X),me);if(X.$$typeof===le)return F(P,k,z,ku(k,X),me);Yu(k,X)}return null}function we(P,k,z,X){for(var me=null,Oe=null,ge=k,Ee=k=0,Ot=null;ge!==null&&Ee<z.length;Ee++){ge.index>Ee?(Ot=ge,ge=null):Ot=ge.sibling;var Be=H(P,ge,z[Ee],X);if(Be===null){ge===null&&(ge=Ot);break}t&&ge&&Be.alternate===null&&i(P,ge),k=f(Be,k,Ee),Oe===null?me=Be:Oe.sibling=Be,Oe=Be,ge=Ot}if(Ee===z.length)return a(P,ge),qe&&vs(P,Ee),me;if(ge===null){for(;Ee<z.length;Ee++)ge=J(P,z[Ee],X),ge!==null&&(k=f(ge,k,Ee),Oe===null?me=ge:Oe.sibling=ge,Oe=ge);return qe&&vs(P,Ee),me}for(ge=l(ge);Ee<z.length;Ee++)Ot=F(ge,P,Ee,z[Ee],X),Ot!==null&&(t&&Ot.alternate!==null&&ge.delete(Ot.key===null?Ee:Ot.key),k=f(Ot,k,Ee),Oe===null?me=Ot:Oe.sibling=Ot,Oe=Ot);return t&&ge.forEach(function(Sr){return i(P,Sr)}),qe&&vs(P,Ee),me}function be(P,k,z,X){if(z==null)throw Error(s(151));for(var me=null,Oe=null,ge=k,Ee=k=0,Ot=null,Be=z.next();ge!==null&&!Be.done;Ee++,Be=z.next()){ge.index>Ee?(Ot=ge,ge=null):Ot=ge.sibling;var Sr=H(P,ge,Be.value,X);if(Sr===null){ge===null&&(ge=Ot);break}t&&ge&&Sr.alternate===null&&i(P,ge),k=f(Sr,k,Ee),Oe===null?me=Sr:Oe.sibling=Sr,Oe=Sr,ge=Ot}if(Be.done)return a(P,ge),qe&&vs(P,Ee),me;if(ge===null){for(;!Be.done;Ee++,Be=z.next())Be=J(P,Be.value,X),Be!==null&&(k=f(Be,k,Ee),Oe===null?me=Be:Oe.sibling=Be,Oe=Be);return qe&&vs(P,Ee),me}for(ge=l(ge);!Be.done;Ee++,Be=z.next())Be=F(ge,P,Ee,Be.value,X),Be!==null&&(t&&Be.alternate!==null&&ge.delete(Be.key===null?Ee:Be.key),k=f(Be,k,Ee),Oe===null?me=Be:Oe.sibling=Be,Oe=Be);return t&&ge.forEach(function(AA){return i(P,AA)}),qe&&vs(P,Ee),me}function Je(P,k,z,X){if(typeof z=="object"&&z!==null&&z.type===G&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case x:e:{for(var me=z.key;k!==null;){if(k.key===me){if(me=z.type,me===G){if(k.tag===7){a(P,k.sibling),X=h(k,z.props.children),X.return=P,P=X;break e}}else if(k.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===S&&jp(me)===k.type){a(P,k.sibling),X=h(k,z.props),Xo(X,z),X.return=P,P=X;break e}a(P,k);break}else i(P,k);k=k.sibling}z.type===G?(X=ps(z.props.children,P.mode,X,z.key),X.return=P,P=X):(X=Cu(z.type,z.key,z.props,null,P.mode,X),Xo(X,z),X.return=P,P=X)}return b(P);case V:e:{for(me=z.key;k!==null;){if(k.key===me)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){a(P,k.sibling),X=h(k,z.children||[]),X.return=P,P=X;break e}else{a(P,k);break}else i(P,k);k=k.sibling}X=Jh(z,P.mode,X),X.return=P,P=X}return b(P);case S:return me=z._init,z=me(z._payload),Je(P,k,z,X)}if(ae(z))return we(P,k,z,X);if(j(z)){if(me=j(z),typeof me!="function")throw Error(s(150));return z=me.call(z),be(P,k,z,X)}if(typeof z.then=="function")return Je(P,k,Ku(z),X);if(z.$$typeof===le)return Je(P,k,ku(P,z),X);Yu(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(a(P,k.sibling),X=h(k,z),X.return=P,P=X):(a(P,k),X=Zh(z,P.mode,X),X.return=P,P=X),b(P)):a(P,k)}return function(P,k,z,X){try{$o=0;var me=Je(P,k,z,X);return ba=null,me}catch(ge){if(ge===zo||ge===Mu)throw ge;var Oe=dn(29,ge,null,P.mode);return Oe.lanes=X,Oe.return=P,Oe}finally{}}}var Ea=Up(!0),Lp=Up(!1),Cn=W(null),ri=null;function cr(t){var i=t.alternate;ie(St,St.current&1),ie(Cn,t),ri===null&&(i===null||pa.current!==null||i.memoizedState!==null)&&(ri=t)}function zp(t){if(t.tag===22){if(ie(St,St.current),ie(Cn,t),ri===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ri=t)}}else hr()}function hr(){ie(St,St.current),ie(Cn,Cn.current)}function Mi(t){se(Cn),ri===t&&(ri=null),se(St)}var St=W(0);function Qu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ef(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Dd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Od={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=pn(),h=or(l);h.payload=i,a!=null&&(h.callback=a),i=lr(t,h,l),i!==null&&(yn(i,t,l),qo(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=pn(),h=or(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=lr(t,h,l),i!==null&&(yn(i,t,l),qo(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=pn(),l=or(a);l.tag=2,i!=null&&(l.callback=i),i=lr(t,l,a),i!==null&&(yn(i,t,a),qo(i,t,a))}};function Bp(t,i,a,l,h,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):i.prototype&&i.prototype.isPureReactComponent?!Oo(a,l)||!Oo(h,f):!0}function qp(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Od.enqueueReplaceState(i,i.state,null)}function Ss(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var $u=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Hp(t){$u(t)}function Gp(t){console.error(t)}function Fp(t){$u(t)}function Xu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Kp(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function kd(t,i,a){return a=or(a),a.tag=3,a.payload={element:null},a.callback=function(){Xu(t,i)},a}function Yp(t){return t=or(t),t.tag=3,t}function Qp(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){Kp(i,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Kp(i,a,l),typeof h!="function"&&(yr===null?yr=new Set([this]):yr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function AT(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&jo(i,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 13:return ri===null?rf():a.alternate===null&&lt===0&&(lt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===ld?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),af(t,l,h)),!1;case 22:return a.flags|=65536,l===ld?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),af(t,l,h)),!1}throw Error(s(435,a.tag))}return af(t,l,h),rf(),!1}if(qe)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==td&&(t=Error(s(422),{cause:l}),Po(Sn(t,a)))):(l!==td&&(i=Error(s(423),{cause:l}),Po(Sn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Sn(l,a),h=kd(t.stateNode,l,h),hd(t,h),lt!==4&&(lt=2)),!1;var f=Error(s(520),{cause:l});if(f=Sn(f,a),il===null?il=[f]:il.push(f),lt!==4&&(lt=2),i===null)return!0;l=Sn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=kd(a.stateNode,l,t),hd(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(yr===null||!yr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Yp(h),Qp(h,t,a,l),hd(a,h),!1}a=a.return}while(a!==null);return!1}var $p=Error(s(461)),Nt=!1;function jt(t,i,a,l){i.child=t===null?Lp(i,null,a,l):Ea(i,t.child,a,l)}function Xp(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return Ts(i),l=pd(t,i,a,b,f,h),T=yd(),t!==null&&!Nt?(vd(t,i,h),Pi(t,i,h)):(qe&&T&&Wh(i),i.flags|=1,jt(t,i,l,h),i.child)}function Zp(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Xh(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Jp(t,i,f,l,h)):(t=Cu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Bd(t,h)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:Oo,a(b,l)&&t.ref===i.ref)return Pi(t,i,h)}return i.flags|=1,t=Ci(f,l),t.ref=i.ref,t.return=i,i.child=t}function Jp(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(Oo(f,l)&&t.ref===i.ref)if(Nt=!1,i.pendingProps=l=f,Bd(t,h))(t.flags&131072)!==0&&(Nt=!0);else return i.lanes=t.lanes,Pi(t,i,h)}return Vd(t,i,a,l,h)}function Wp(t,i,a){var l=i.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return ey(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Vu(i,f!==null?f.cachePool:null),f!==null?Jg(i,f):fd(),zp(i);else return i.lanes=i.childLanes=536870912,ey(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Vu(i,f.cachePool),Jg(i,f),hr(),i.memoizedState=null):(t!==null&&Vu(i,null),fd(),hr());return jt(t,i,h,a),i.child}function ey(t,i,a,l){var h=od();return h=h===null?null:{parent:wt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Vu(i,null),fd(),zp(i),t!==null&&jo(t,i,l,!0),null}function Zu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Vd(t,i,a,l,h){return Ts(i),a=pd(t,i,a,l,void 0,h),l=yd(),t!==null&&!Nt?(vd(t,i,h),Pi(t,i,h)):(qe&&l&&Wh(i),i.flags|=1,jt(t,i,a,h),i.child)}function ty(t,i,a,l,h,f){return Ts(i),i.updateQueue=null,a=ep(i,l,a,h),Wg(t),l=yd(),t!==null&&!Nt?(vd(t,i,f),Pi(t,i,f)):(qe&&l&&Wh(i),i.flags|=1,jt(t,i,a,f),i.child)}function ny(t,i,a,l,h){if(Ts(i),i.stateNode===null){var f=ha,b=a.contextType;typeof b=="object"&&b!==null&&(f=Gt(b)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Od,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},ud(i),b=a.contextType,f.context=typeof b=="object"&&b!==null?Gt(b):ha,f.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Dd(i,a,b,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Od.enqueueReplaceState(f,f.state,null),Go(i,l,f,h),Ho(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,I=Ss(a,T);f.props=I;var q=f.context,$=a.contextType;b=ha,typeof $=="object"&&$!==null&&(b=Gt($));var J=a.getDerivedStateFromProps;$=typeof J=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||q!==b)&&qp(i,f,l,b),ar=!1;var H=i.memoizedState;f.state=H,Go(i,l,f,h),Ho(),q=i.memoizedState,T||H!==q||ar?(typeof J=="function"&&(Dd(i,a,J,l),q=i.memoizedState),(I=ar||Bp(i,a,I,l,H,q,b))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),f.props=l,f.state=q,f.context=b,l=I):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,cd(t,i),b=i.memoizedProps,$=Ss(a,b),f.props=$,J=i.pendingProps,H=f.context,q=a.contextType,I=ha,typeof q=="object"&&q!==null&&(I=Gt(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==J||H!==I)&&qp(i,f,l,I),ar=!1,H=i.memoizedState,f.state=H,Go(i,l,f,h),Ho();var F=i.memoizedState;b!==J||H!==F||ar||t!==null&&t.dependencies!==null&&Ou(t.dependencies)?(typeof T=="function"&&(Dd(i,a,T,l),F=i.memoizedState),($=ar||Bp(i,a,$,l,H,F,I)||t!==null&&t.dependencies!==null&&Ou(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,F,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,F,I)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),f.props=l,f.state=F,f.context=I,l=$):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,Zu(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=Ea(i,t.child,null,h),i.child=Ea(i,null,a,h)):jt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=Pi(t,i,h),t}function iy(t,i,a,l){return Mo(),i.flags|=256,jt(t,i,a,l),i.child}var Md={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pd(t){return{baseLanes:t,cachePool:Gg()}}function jd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Nn),t}function ry(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(St.current&2)!==0),b&&(h=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,t===null){if(qe){if(h?cr(i):hr(),qe){var T=ot,I;if(I=T){e:{for(I=T,T=ii;I.nodeType!==8;){if(!T){T=null;break e}if(I=zn(I.nextSibling),I===null){T=null;break e}}T=I}T!==null?(i.memoizedState={dehydrated:T,treeContext:ys!==null?{id:Ni,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},I=dn(18,null,null,0),I.stateNode=T,I.return=i,i.child=I,Wt=i,ot=null,I=!0):I=!1}I||bs(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Ef(T)?i.lanes=32:i.lanes=536870912,null;Mi(i)}return T=l.children,l=l.fallback,h?(hr(),h=i.mode,T=Ju({mode:"hidden",children:T},h),l=ps(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=Pd(a),h.childLanes=jd(t,b,a),i.memoizedState=Md,l):(cr(i),Ud(i,T))}if(I=t.memoizedState,I!==null&&(T=I.dehydrated,T!==null)){if(f)i.flags&256?(cr(i),i.flags&=-257,i=Ld(t,i,a)):i.memoizedState!==null?(hr(),i.child=t.child,i.flags|=128,i=null):(hr(),h=l.fallback,T=i.mode,l=Ju({mode:"visible",children:l.children},T),h=ps(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Ea(i,t.child,null,a),l=i.child,l.memoizedState=Pd(a),l.childLanes=jd(t,b,a),i.memoizedState=Md,i=h);else if(cr(i),Ef(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var q=b.dgst;b=q,l=Error(s(419)),l.stack="",l.digest=b,Po({value:l,source:null,stack:null}),i=Ld(t,i,a)}else if(Nt||jo(t,i,a,!1),b=(a&t.childLanes)!==0,Nt||b){if(b=et,b!==null&&(l=a&-a,l=(l&42)!==0?1:Ji(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,ca(t,l),yn(b,t,l),$p;T.data==="$?"||rf(),i=Ld(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=I.treeContext,ot=zn(T.nextSibling),Wt=i,qe=!0,_s=null,ii=!1,t!==null&&(Rn[In++]=Ni,Rn[In++]=Di,Rn[In++]=ys,Ni=t.id,Di=t.overflow,ys=i),i=Ud(i,l.children),i.flags|=4096);return i}return h?(hr(),h=l.fallback,T=i.mode,I=t.child,q=I.sibling,l=Ci(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,q!==null?h=Ci(q,h):(h=ps(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=t.child.memoizedState,T===null?T=Pd(a):(I=T.cachePool,I!==null?(q=wt._currentValue,I=I.parent!==q?{parent:q,pool:q}:I):I=Gg(),T={baseLanes:T.baseLanes|a,cachePool:I}),h.memoizedState=T,h.childLanes=jd(t,b,a),i.memoizedState=Md,l):(cr(i),a=t.child,t=a.sibling,a=Ci(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(b=i.deletions,b===null?(i.deletions=[t],i.flags|=16):b.push(t)),i.child=a,i.memoizedState=null,a)}function Ud(t,i){return i=Ju({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ju(t,i){return t=dn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Ld(t,i,a){return Ea(i,t.child,null,a),t=Ud(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function sy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),id(t.return,i,a)}function zd(t,i,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function ay(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;if(jt(t,i,l.children,a),l=St.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sy(t,a,i);else if(t.tag===19)sy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ie(St,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Qu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),zd(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Qu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}zd(i,!0,a,null,f);break;case"together":zd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Pi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),pr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(jo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ci(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ci(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Bd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Ou(t)))}function wT(t,i,a){switch(i.tag){case 3:Qe(i,i.stateNode.containerInfo),sr(i,wt,t.memoizedState.cache),Mo();break;case 27:case 5:Fn(i);break;case 4:Qe(i,i.stateNode.containerInfo);break;case 10:sr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(cr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ry(t,i,a):(cr(i),t=Pi(t,i,a),t!==null?t.sibling:null);cr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(jo(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return ay(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(St,St.current),l)break;return null;case 22:case 23:return i.lanes=0,Wp(t,i,a);case 24:sr(i,wt,t.memoizedState.cache)}return Pi(t,i,a)}function oy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Nt=!0;else{if(!Bd(t,a)&&(i.flags&128)===0)return Nt=!1,wT(t,i,a);Nt=(t.flags&131072)!==0}else Nt=!1,qe&&(i.flags&1048576)!==0&&jg(i,Du,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Xh(l)?(t=Ss(l,t),i.tag=1,i=ny(null,i,l,t,a)):(i.tag=0,i=Vd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===de){i.tag=11,i=Xp(null,i,l,t,a);break e}else if(h===D){i.tag=14,i=Zp(null,i,l,t,a);break e}}throw i=bt(l)||l,Error(s(306,i,""))}}return i;case 0:return Vd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Ss(l,i.pendingProps),ny(t,i,l,h,a);case 3:e:{if(Qe(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,cd(t,i),Go(i,l,null,a);var b=i.memoizedState;if(l=b.cache,sr(i,wt,l),l!==f.cache&&rd(i,[wt],a,!0),Ho(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=iy(t,i,l,a);break e}else if(l!==h){h=Sn(Error(s(424)),i),Po(h),i=iy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ot=zn(t.firstChild),Wt=i,qe=!0,_s=null,ii=!0,a=Lp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Mo(),l===h){i=Pi(t,i,a);break e}jt(t,i,l,a)}i=i.child}return i;case 26:return Zu(t,i),t===null?(a=hv(i.type,null,i.pendingProps,null))?i.memoizedState=a:qe||(a=i.type,t=i.pendingProps,l=dc(_e.current).createElement(a),l[Et]=i,l[mt]=t,Lt(l,a,t),ut(l),i.stateNode=l):i.memoizedState=hv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Fn(i),t===null&&qe&&(l=i.stateNode=lv(i.type,i.pendingProps,_e.current),Wt=i,ii=!0,h=ot,br(i.type)?(Tf=h,ot=zn(l.firstChild)):ot=h),jt(t,i,i.pendingProps.children,a),Zu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&qe&&((h=l=ot)&&(l=JT(l,i.type,i.pendingProps,ii),l!==null?(i.stateNode=l,Wt=i,ot=zn(l.firstChild),ii=!1,h=!0):h=!1),h||bs(i)),Fn(i),h=i.type,f=i.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,vf(h,f)?l=null:b!==null&&vf(h,b)&&(i.flags|=32),i.memoizedState!==null&&(h=pd(t,i,pT,null,null,a),dl._currentValue=h),Zu(t,i),jt(t,i,l,a),i.child;case 6:return t===null&&qe&&((t=a=ot)&&(a=WT(a,i.pendingProps,ii),a!==null?(i.stateNode=a,Wt=i,ot=null,t=!0):t=!1),t||bs(i)),null;case 13:return ry(t,i,a);case 4:return Qe(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Ea(i,null,l,a):jt(t,i,l,a),i.child;case 11:return Xp(t,i,i.type,i.pendingProps,a);case 7:return jt(t,i,i.pendingProps,a),i.child;case 8:return jt(t,i,i.pendingProps.children,a),i.child;case 12:return jt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,sr(i,i.type,l.value),jt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Ts(i),h=Gt(h),l=l(h),i.flags|=1,jt(t,i,l,a),i.child;case 14:return Zp(t,i,i.type,i.pendingProps,a);case 15:return Jp(t,i,i.type,i.pendingProps,a);case 19:return ay(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Ju(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ci(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Wp(t,i,a);case 24:return Ts(i),l=Gt(wt),t===null?(h=od(),h===null&&(h=et,f=sd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},ud(i),sr(i,wt,h)):((t.lanes&a)!==0&&(cd(t,i),Go(i,null,null,a),Ho()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),sr(i,wt,l)):(l=f.cache,sr(i,wt,l),l!==h.cache&&rd(i,[wt],a,!0))),jt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ji(t){t.flags|=4}function ly(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!pv(i)){if(i=Cn.current,i!==null&&((Le&4194048)===Le?ri!==null:(Le&62914560)!==Le&&(Le&536870912)===0||i!==ri))throw Bo=ld,Fg;t.flags|=8192}}function Wu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?mo():536870912,t.lanes|=i,Sa|=i)}function Zo(t,i){if(!qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function rt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function ST(t,i,a){var l=i.pendingProps;switch(ed(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(i),null;case 1:return rt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ki(wt),ln(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Vo(i)?ji(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,zg())),rt(i),null;case 26:return a=i.memoizedState,t===null?(ji(i),a!==null?(rt(i),ly(i,a)):(rt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(ji(i),rt(i),ly(i,a)):(rt(i),i.flags&=-16777217):(t.memoizedProps!==l&&ji(i),rt(i),i.flags&=-16777217),null;case 27:Vn(i),a=_e.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}t=ye.current,Vo(i)?Ug(i):(t=lv(h,l,a),i.stateNode=t,ji(i))}return rt(i),null;case 5:if(Vn(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}if(t=ye.current,Vo(i))Ug(i);else{switch(h=dc(_e.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Et]=i,t[mt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Lt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ji(i)}}return rt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=_e.current,Vo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Wt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Et]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||tv(t.nodeValue,a)),t||bs(i)}else t=dc(t).createTextNode(l),t[Et]=i,i.stateNode=t}return rt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Vo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Et]=i}else Mo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rt(i),h=!1}else h=zg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Mi(i),i):(Mi(i),null)}if(Mi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Wu(i,i.updateQueue),rt(i),null;case 4:return ln(),t===null&&ff(i.stateNode.containerInfo),rt(i),null;case 10:return ki(i.type),rt(i),null;case 19:if(se(St),h=i.memoizedState,h===null)return rt(i),null;if(l=(i.flags&128)!==0,f=h.rendering,f===null)if(l)Zo(h,!1);else{if(lt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Qu(t),f!==null){for(i.flags|=128,Zo(h,!1),t=f.updateQueue,i.updateQueue=t,Wu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Pg(a,t),a=a.sibling;return ie(St,St.current&1|2),i.child}t=t.sibling}h.tail!==null&&_n()>nc&&(i.flags|=128,l=!0,Zo(h,!1),i.lanes=4194304)}else{if(!l)if(t=Qu(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Wu(i,t),Zo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qe)return rt(i),null}else 2*_n()-h.renderingStartTime>nc&&a!==536870912&&(i.flags|=128,l=!0,Zo(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=_n(),i.sibling=null,t=St.current,ie(St,l?t&1|2:t&1),i):(rt(i),null);case 22:case 23:return Mi(i),md(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(rt(i),i.subtreeFlags&6&&(i.flags|=8192)):rt(i),a=i.updateQueue,a!==null&&Wu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&se(As),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ki(wt),rt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function xT(t,i){switch(ed(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ki(wt),ln(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Vn(i),null;case 13:if(Mi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Mo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return se(St),null;case 4:return ln(),null;case 10:return ki(i.type),null;case 22:case 23:return Mi(i),md(),t!==null&&se(As),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ki(wt),null;case 25:return null;default:return null}}function uy(t,i){switch(ed(i),i.tag){case 3:ki(wt),ln();break;case 26:case 27:case 5:Vn(i);break;case 4:ln();break;case 13:Mi(i);break;case 19:se(St);break;case 10:ki(i.type);break;case 22:case 23:Mi(i),md(),t!==null&&se(As);break;case 24:ki(wt)}}function Jo(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==h)}}catch(T){We(i,i.return,T)}}function dr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,h=i;var I=a,q=T;try{q()}catch($){We(h,I,$)}}}l=l.next}while(l!==f)}}catch($){We(i,i.return,$)}}function cy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Zg(i,a)}catch(l){We(t,t.return,l)}}}function hy(t,i,a){a.props=Ss(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){We(t,i,l)}}function Wo(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){We(t,i,h)}}function si(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){We(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){We(t,i,h)}else a.current=null}function dy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){We(t,t.return,h)}}function qd(t,i,a){try{var l=t.stateNode;YT(l,t.type,a,i),l[mt]=i}catch(h){We(t,t.return,h)}}function fy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&br(t.type)||t.tag===4}function Hd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&br(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=hc));else if(l!==4&&(l===27&&br(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Gd(t,i,a),t=t.sibling;t!==null;)Gd(t,i,a),t=t.sibling}function ec(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&br(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(ec(t,i,a),t=t.sibling;t!==null;)ec(t,i,a),t=t.sibling}function my(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Lt(i,l,a),i[Et]=t,i[mt]=a}catch(f){We(t,t.return,f)}}var Ui=!1,ht=!1,Fd=!1,gy=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function RT(t,i){if(t=t.containerInfo,pf=vc,t=xg(t),Hh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,T=-1,I=-1,q=0,$=0,J=t,H=null;t:for(;;){for(var F;J!==a||h!==0&&J.nodeType!==3||(T=b+h),J!==f||l!==0&&J.nodeType!==3||(I=b+l),J.nodeType===3&&(b+=J.nodeValue.length),(F=J.firstChild)!==null;)H=J,J=F;for(;;){if(J===t)break t;if(H===a&&++q===h&&(T=b),H===f&&++$===l&&(I=b),(F=J.nextSibling)!==null)break;J=H,H=J.parentNode}J=F}a=T===-1||I===-1?null:{start:T,end:I}}else a=null}a=a||{start:0,end:0}}else a=null;for(yf={focusedElem:t,selectionRange:a},vc=!1,Dt=i;Dt!==null;)if(i=Dt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Dt=t;else for(;Dt!==null;){switch(i=Dt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var we=Ss(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(we,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){We(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)bf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":bf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Dt=t;break}Dt=i.return}}function py(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:fr(t,a),l&4&&Jo(5,a);break;case 1:if(fr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(b){We(a,a.return,b)}else{var h=Ss(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(b){We(a,a.return,b)}}l&64&&cy(a),l&512&&Wo(a,a.return);break;case 3:if(fr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Zg(t,i)}catch(b){We(a,a.return,b)}}break;case 27:i===null&&l&4&&my(a);case 26:case 5:fr(t,a),i===null&&l&4&&dy(a),l&512&&Wo(a,a.return);break;case 12:fr(t,a);break;case 13:fr(t,a),l&4&&_y(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=PT.bind(null,a),eA(t,a))));break;case 22:if(l=a.memoizedState!==null||Ui,!l){i=i!==null&&i.memoizedState!==null||ht,h=Ui;var f=ht;Ui=l,(ht=i)&&!f?mr(t,a,(a.subtreeFlags&8772)!==0):fr(t,a),Ui=h,ht=f}break;case 30:break;default:fr(t,a)}}function yy(t){var i=t.alternate;i!==null&&(t.alternate=null,yy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&tr(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,rn=!1;function Li(t,i,a){for(a=a.child;a!==null;)vy(t,i,a),a=a.sibling}function vy(t,i,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(at,a)}catch{}switch(a.tag){case 26:ht||si(a,i),Li(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ht||si(a,i);var l=it,h=rn;br(a.type)&&(it=a.stateNode,rn=!1),Li(t,i,a),ll(a.stateNode),it=l,rn=h;break;case 5:ht||si(a,i);case 6:if(l=it,h=rn,it=null,Li(t,i,a),it=l,rn=h,it!==null)if(rn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(f){We(a,i,f)}else try{it.removeChild(a.stateNode)}catch(f){We(a,i,f)}break;case 18:it!==null&&(rn?(t=it,av(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),pl(t)):av(it,a.stateNode));break;case 4:l=it,h=rn,it=a.stateNode.containerInfo,rn=!0,Li(t,i,a),it=l,rn=h;break;case 0:case 11:case 14:case 15:ht||dr(2,a,i),ht||dr(4,a,i),Li(t,i,a);break;case 1:ht||(si(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&hy(a,i,l)),Li(t,i,a);break;case 21:Li(t,i,a);break;case 22:ht=(l=ht)||a.memoizedState!==null,Li(t,i,a),ht=l;break;default:Li(t,i,a)}}function _y(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{pl(t)}catch(a){We(i,i.return,a)}}function IT(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new gy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new gy),i;default:throw Error(s(435,t.tag))}}function Kd(t,i){var a=IT(t);i.forEach(function(l){var h=jT.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function fn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,b=i,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(br(T.type)){it=T.stateNode,rn=!1;break e}break;case 5:it=T.stateNode,rn=!1;break e;case 3:case 4:it=T.stateNode.containerInfo,rn=!0;break e}T=T.return}if(it===null)throw Error(s(160));vy(f,b,h),it=null,rn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)by(i,t),i=i.sibling}var Ln=null;function by(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:fn(i,t),mn(t),l&4&&(dr(3,t,t.return),Jo(3,t),dr(5,t,t.return));break;case 1:fn(i,t),mn(t),l&512&&(ht||a===null||si(a,a.return)),l&64&&Ui&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ln;if(fn(i,t),mn(t),l&512&&(ht||a===null||si(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[es]||f[Et]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Lt(f,l,a),f[Et]=t,ut(f),l=f;break e;case"link":var b=mv("link","href",h).get(l+(a.href||""));if(b){for(var T=0;T<b.length;T++)if(f=b[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(T,1);break t}}f=h.createElement(l),Lt(f,l,a),h.head.appendChild(f);break;case"meta":if(b=mv("meta","content",h).get(l+(a.content||""))){for(T=0;T<b.length;T++)if(f=b[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(T,1);break t}}f=h.createElement(l),Lt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Et]=t,ut(f),l=f}t.stateNode=l}else gv(h,t.type,t.stateNode);else t.stateNode=fv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?gv(h,t.type,t.stateNode):fv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&qd(t,t.memoizedProps,a.memoizedProps)}break;case 27:fn(i,t),mn(t),l&512&&(ht||a===null||si(a,a.return)),a!==null&&l&4&&qd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(fn(i,t),mn(t),l&512&&(ht||a===null||si(a,a.return)),t.flags&32){h=t.stateNode;try{En(h,"")}catch(F){We(t,t.return,F)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,qd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Fd=!0);break;case 6:if(fn(i,t),mn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(F){We(t,t.return,F)}}break;case 3:if(gc=null,h=Ln,Ln=fc(i.containerInfo),fn(i,t),Ln=h,mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{pl(i.containerInfo)}catch(F){We(t,t.return,F)}Fd&&(Fd=!1,Ey(t));break;case 4:l=Ln,Ln=fc(t.stateNode.containerInfo),fn(i,t),mn(t),Ln=l;break;case 12:fn(i,t),mn(t);break;case 13:fn(i,t),mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Jd=_n()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Kd(t,l)));break;case 22:h=t.memoizedState!==null;var I=a!==null&&a.memoizedState!==null,q=Ui,$=ht;if(Ui=q||h,ht=$||I,fn(i,t),ht=$,Ui=q,mn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||I||Ui||ht||xs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){I=a=i;try{if(f=I.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=I.stateNode;var J=I.memoizedProps.style,H=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(F){We(I,I.return,F)}}}else if(i.tag===6){if(a===null){I=i;try{I.stateNode.nodeValue=h?"":I.memoizedProps}catch(F){We(I,I.return,F)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Kd(t,a))));break;case 19:fn(i,t),mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Kd(t,l)));break;case 30:break;case 21:break;default:fn(i,t),mn(t)}}function mn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(fy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Hd(t);ec(t,f,h);break;case 5:var b=a.stateNode;a.flags&32&&(En(b,""),a.flags&=-33);var T=Hd(t);ec(t,T,b);break;case 3:case 4:var I=a.stateNode.containerInfo,q=Hd(t);Gd(t,q,I);break;default:throw Error(s(161))}}catch($){We(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Ey(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Ey(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function fr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)py(t,i.alternate,i),i=i.sibling}function xs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:dr(4,i,i.return),xs(i);break;case 1:si(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&hy(i,i.return,a),xs(i);break;case 27:ll(i.stateNode);case 26:case 5:si(i,i.return),xs(i);break;case 22:i.memoizedState===null&&xs(i);break;case 30:xs(i);break;default:xs(i)}t=t.sibling}}function mr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,b=f.flags;switch(f.tag){case 0:case 11:case 15:mr(h,f,a),Jo(4,f);break;case 1:if(mr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){We(l,l.return,q)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var I=h.shared.hiddenCallbacks;if(I!==null)for(h.shared.hiddenCallbacks=null,h=0;h<I.length;h++)Xg(I[h],T)}catch(q){We(l,l.return,q)}}a&&b&64&&cy(f),Wo(f,f.return);break;case 27:my(f);case 26:case 5:mr(h,f,a),a&&l===null&&b&4&&dy(f),Wo(f,f.return);break;case 12:mr(h,f,a);break;case 13:mr(h,f,a),a&&b&4&&_y(h,f);break;case 22:f.memoizedState===null&&mr(h,f,a),Wo(f,f.return);break;case 30:break;default:mr(h,f,a)}i=i.sibling}}function Yd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Uo(a))}function Qd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Uo(t))}function ai(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ty(t,i,a,l),i=i.sibling}function Ty(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ai(t,i,a,l),h&2048&&Jo(9,i);break;case 1:ai(t,i,a,l);break;case 3:ai(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Uo(t)));break;case 12:if(h&2048){ai(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,b=f.id,T=f.onPostCommit;typeof T=="function"&&T(b,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){We(i,i.return,I)}}else ai(t,i,a,l);break;case 13:ai(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,b=i.alternate,i.memoizedState!==null?f._visibility&2?ai(t,i,a,l):el(t,i):f._visibility&2?ai(t,i,a,l):(f._visibility|=2,Ta(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Yd(b,i);break;case 24:ai(t,i,a,l),h&2048&&Qd(i.alternate,i);break;default:ai(t,i,a,l)}}function Ta(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,b=i,T=a,I=l,q=b.flags;switch(b.tag){case 0:case 11:case 15:Ta(f,b,T,I,h),Jo(8,b);break;case 23:break;case 22:var $=b.stateNode;b.memoizedState!==null?$._visibility&2?Ta(f,b,T,I,h):el(f,b):($._visibility|=2,Ta(f,b,T,I,h)),h&&q&2048&&Yd(b.alternate,b);break;case 24:Ta(f,b,T,I,h),h&&q&2048&&Qd(b.alternate,b);break;default:Ta(f,b,T,I,h)}i=i.sibling}}function el(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:el(a,l),h&2048&&Yd(l.alternate,l);break;case 24:el(a,l),h&2048&&Qd(l.alternate,l);break;default:el(a,l)}i=i.sibling}}var tl=8192;function Aa(t){if(t.subtreeFlags&tl)for(t=t.child;t!==null;)Ay(t),t=t.sibling}function Ay(t){switch(t.tag){case 26:Aa(t),t.flags&tl&&t.memoizedState!==null&&fA(Ln,t.memoizedState,t.memoizedProps);break;case 5:Aa(t);break;case 3:case 4:var i=Ln;Ln=fc(t.stateNode.containerInfo),Aa(t),Ln=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=tl,tl=16777216,Aa(t),tl=i):Aa(t));break;default:Aa(t)}}function wy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function nl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Dt=l,xy(l,t)}wy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sy(t),t=t.sibling}function Sy(t){switch(t.tag){case 0:case 11:case 15:nl(t),t.flags&2048&&dr(9,t,t.return);break;case 3:nl(t);break;case 12:nl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,tc(t)):nl(t);break;default:nl(t)}}function tc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Dt=l,xy(l,t)}wy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:dr(8,i,i.return),tc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,tc(i));break;default:tc(i)}t=t.sibling}}function xy(t,i){for(;Dt!==null;){var a=Dt;switch(a.tag){case 0:case 11:case 15:dr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Uo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Dt=l;else e:for(a=t;Dt!==null;){l=Dt;var h=l.sibling,f=l.return;if(yy(l),l===a){Dt=null;break e}if(h!==null){h.return=f,Dt=h;break e}Dt=f}}}var CT={getCacheForType:function(t){var i=Gt(wt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},NT=typeof WeakMap=="function"?WeakMap:Map,Ke=0,et=null,ke=null,Le=0,Ye=0,gn=null,gr=!1,wa=!1,$d=!1,zi=0,lt=0,pr=0,Rs=0,Xd=0,Nn=0,Sa=0,il=null,sn=null,Zd=!1,Jd=0,nc=1/0,ic=null,yr=null,Ut=0,vr=null,xa=null,Ra=0,Wd=0,ef=null,Ry=null,rl=0,tf=null;function pn(){if((Ke&2)!==0&&Le!==0)return Le&-Le;if(U.T!==null){var t=ma;return t!==0?t:uf()}return Wi()}function Iy(){Nn===0&&(Nn=(Le&536870912)===0||qe?fo():536870912);var t=Cn.current;return t!==null&&(t.flags|=32),Nn}function yn(t,i,a){(t===et&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&(Ia(t,0),_r(t,Le,Nn,!1)),vi(t,a),((Ke&2)===0||t!==et)&&(t===et&&((Ke&2)===0&&(Rs|=a),lt===4&&_r(t,Le,Nn,!1)),oi(t))}function Cy(t,i,a){if((Ke&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Wr(t,i),h=l?kT(t,i):sf(t,i,!0),f=l;do{if(h===0){wa&&!l&&_r(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!DT(a)){h=sf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var T=t;h=il;var I=T.current.memoizedState.isDehydrated;if(I&&(Ia(T,b).flags|=256),b=sf(T,b,!1),b!==2){if($d&&!I){T.errorRecoveryDisabledLanes|=f,Rs|=f,h=4;break e}f=sn,sn=h,f!==null&&(sn===null?sn=f:sn.push.apply(sn,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){Ia(t,0),_r(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:_r(l,i,Nn,!gr);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Jd+300-_n(),10<h)){if(_r(l,i,Nn,!gr),Fs(l,0,!0)!==0)break e;l.timeoutHandle=rv(Ny.bind(null,l,a,sn,ic,Zd,i,Nn,Rs,Sa,gr,f,2,-0,0),h);break e}Ny(l,a,sn,ic,Zd,i,Nn,Rs,Sa,gr,f,0,-0,0)}}break}while(!0);oi(t)}function Ny(t,i,a,l,h,f,b,T,I,q,$,J,H,F){if(t.timeoutHandle=-1,J=i.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(hl={stylesheets:null,count:0,unsuspend:dA},Ay(i),J=mA(),J!==null)){t.cancelPendingCommit=J(jy.bind(null,t,i,f,a,l,h,b,T,I,$,1,H,F)),_r(t,f,b,!q);return}jy(t,i,f,a,l,h,b,T,I)}function DT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!hn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function _r(t,i,a,l){i&=~Xd,i&=~Rs,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-Ht(h),b=1<<f;l[f]=-1,h&=~b}a!==0&&Kn(t,a,i)}function rc(){return(Ke&6)===0?(sl(0),!1):!0}function nf(){if(ke!==null){if(Ye===0)var t=ke.return;else t=ke,Oi=Es=null,_d(t),ba=null,$o=0,t=ke;for(;t!==null;)uy(t.alternate,t),t=t.return;ke=null}}function Ia(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,$T(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),nf(),et=t,ke=a=Ci(t.current,null),Le=i,Ye=0,gn=null,gr=!1,wa=Wr(t,i),$d=!1,Sa=Nn=Xd=Rs=pr=lt=0,sn=il=null,Zd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Ht(l),f=1<<h;i|=t[h],l&=~f}return zi=i,xu(),a}function Dy(t,i){Ne=null,U.H=Fu,i===zo||i===Mu?(i=Qg(),Ye=3):i===Fg?(i=Qg(),Ye=4):Ye=i===$p?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,ke===null&&(lt=1,Xu(t,Sn(i,t.current)))}function Oy(){var t=U.H;return U.H=Fu,t===null?Fu:t}function ky(){var t=U.A;return U.A=CT,t}function rf(){lt=4,gr||(Le&4194048)!==Le&&Cn.current!==null||(wa=!0),(pr&134217727)===0&&(Rs&134217727)===0||et===null||_r(et,Le,Nn,!1)}function sf(t,i,a){var l=Ke;Ke|=2;var h=Oy(),f=ky();(et!==t||Le!==i)&&(ic=null,Ia(t,i)),i=!1;var b=lt;e:do try{if(Ye!==0&&ke!==null){var T=ke,I=gn;switch(Ye){case 8:nf(),b=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var q=Ye;if(Ye=0,gn=null,Ca(t,T,I,q),a&&wa){b=0;break e}break;default:q=Ye,Ye=0,gn=null,Ca(t,T,I,q)}}OT(),b=lt;break}catch($){Dy(t,$)}while(!0);return i&&t.shellSuspendCounter++,Oi=Es=null,Ke=l,U.H=h,U.A=f,ke===null&&(et=null,Le=0,xu()),b}function OT(){for(;ke!==null;)Vy(ke)}function kT(t,i){var a=Ke;Ke|=2;var l=Oy(),h=ky();et!==t||Le!==i?(ic=null,nc=_n()+500,Ia(t,i)):wa=Wr(t,i);e:do try{if(Ye!==0&&ke!==null){i=ke;var f=gn;t:switch(Ye){case 1:Ye=0,gn=null,Ca(t,i,f,1);break;case 2:case 9:if(Kg(f)){Ye=0,gn=null,My(i);break}i=function(){Ye!==2&&Ye!==9||et!==t||(Ye=7),oi(t)},f.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Kg(f)?(Ye=0,gn=null,My(i)):(Ye=0,gn=null,Ca(t,i,f,7));break;case 5:var b=null;switch(ke.tag){case 26:b=ke.memoizedState;case 5:case 27:var T=ke;if(!b||pv(b)){Ye=0,gn=null;var I=T.sibling;if(I!==null)ke=I;else{var q=T.return;q!==null?(ke=q,sc(q)):ke=null}break t}}Ye=0,gn=null,Ca(t,i,f,5);break;case 6:Ye=0,gn=null,Ca(t,i,f,6);break;case 8:nf(),lt=6;break e;default:throw Error(s(462))}}VT();break}catch($){Dy(t,$)}while(!0);return Oi=Es=null,U.H=l,U.A=h,Ke=a,ke!==null?0:(et=null,Le=0,xu(),lt)}function VT(){for(;ke!==null&&!Qr();)Vy(ke)}function Vy(t){var i=oy(t.alternate,t,zi);t.memoizedProps=t.pendingProps,i===null?sc(t):ke=i}function My(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=ty(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=ty(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:_d(i);default:uy(a,i),i=ke=Pg(i,zi),i=oy(a,i,zi)}t.memoizedProps=t.pendingProps,i===null?sc(t):ke=i}function Ca(t,i,a,l){Oi=Es=null,_d(i),ba=null,$o=0;var h=i.return;try{if(AT(t,h,i,a,Le)){lt=1,Xu(t,Sn(a,t.current)),ke=null;return}}catch(f){if(h!==null)throw ke=h,f;lt=1,Xu(t,Sn(a,t.current)),ke=null;return}i.flags&32768?(qe||l===1?t=!0:wa||(Le&536870912)!==0?t=!1:(gr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Py(i,t)):sc(i)}function sc(t){var i=t;do{if((i.flags&32768)!==0){Py(i,gr);return}t=i.return;var a=ST(i.alternate,i,zi);if(a!==null){ke=a;return}if(i=i.sibling,i!==null){ke=i;return}ke=i=t}while(i!==null);lt===0&&(lt=5)}function Py(t,i){do{var a=xT(t.alternate,t);if(a!==null){a.flags&=32767,ke=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){ke=t;return}ke=t=a}while(t!==null);lt=6,ke=null}function jy(t,i,a,l,h,f,b,T,I){t.cancelPendingCommit=null;do ac();while(Ut!==0);if((Ke&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Qh,go(t,a,f,b,T,I),t===et&&(ke=et=null,Le=0),xa=i,vr=t,Ra=a,Wd=f,ef=h,Ry=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,UT($r,function(){return qy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=U.T,U.T=null,h=ne.p,ne.p=2,b=Ke,Ke|=4;try{RT(t,i,a)}finally{Ke=b,ne.p=h,U.T=l}}Ut=1,Uy(),Ly(),zy()}}function Uy(){if(Ut===1){Ut=0;var t=vr,i=xa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var l=ne.p;ne.p=2;var h=Ke;Ke|=4;try{by(i,t);var f=yf,b=xg(t.containerInfo),T=f.focusedElem,I=f.selectionRange;if(b!==T&&T&&T.ownerDocument&&Sg(T.ownerDocument.documentElement,T)){if(I!==null&&Hh(T)){var q=I.start,$=I.end;if($===void 0&&($=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min($,T.value.length);else{var J=T.ownerDocument||document,H=J&&J.defaultView||window;if(H.getSelection){var F=H.getSelection(),we=T.textContent.length,be=Math.min(I.start,we),Je=I.end===void 0?be:Math.min(I.end,we);!F.extend&&be>Je&&(b=Je,Je=be,be=b);var P=wg(T,be),k=wg(T,Je);if(P&&k&&(F.rangeCount!==1||F.anchorNode!==P.node||F.anchorOffset!==P.offset||F.focusNode!==k.node||F.focusOffset!==k.offset)){var z=J.createRange();z.setStart(P.node,P.offset),F.removeAllRanges(),be>Je?(F.addRange(z),F.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),F.addRange(z))}}}}for(J=[],F=T;F=F.parentNode;)F.nodeType===1&&J.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var X=J[T];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}vc=!!pf,yf=pf=null}finally{Ke=h,ne.p=l,U.T=a}}t.current=i,Ut=2}}function Ly(){if(Ut===2){Ut=0;var t=vr,i=xa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var l=ne.p;ne.p=2;var h=Ke;Ke|=4;try{py(t,i.alternate,i)}finally{Ke=h,ne.p=l,U.T=a}}Ut=3}}function zy(){if(Ut===4||Ut===3){Ut=0,tu();var t=vr,i=xa,a=Ra,l=Ry;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ut=5:(Ut=0,xa=vr=null,By(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(yr=null),Ks(a),i=i.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(at,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=U.T,h=ne.p,ne.p=2,U.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var T=l[b];f(T.value,{componentStack:T.stack})}}finally{U.T=i,ne.p=h}}(Ra&3)!==0&&ac(),oi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===tf?rl++:(rl=0,tf=t):rl=0,sl(0)}}function By(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Uo(i)))}function ac(t){return Uy(),Ly(),zy(),qy()}function qy(){if(Ut!==5)return!1;var t=vr,i=Wd;Wd=0;var a=Ks(Ra),l=U.T,h=ne.p;try{ne.p=32>a?32:a,U.T=null,a=ef,ef=null;var f=vr,b=Ra;if(Ut=0,xa=vr=null,Ra=0,(Ke&6)!==0)throw Error(s(331));var T=Ke;if(Ke|=4,Sy(f.current),Ty(f,f.current,b,a),Ke=T,sl(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(at,f)}catch{}return!0}finally{ne.p=h,U.T=l,By(t,i)}}function Hy(t,i,a){i=Sn(a,i),i=kd(t.stateNode,i,2),t=lr(t,i,2),t!==null&&(vi(t,2),oi(t))}function We(t,i,a){if(t.tag===3)Hy(t,t,a);else for(;i!==null;){if(i.tag===3){Hy(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(yr===null||!yr.has(l))){t=Sn(a,t),a=Yp(2),l=lr(i,a,2),l!==null&&(Qp(a,l,i,t),vi(l,2),oi(l));break}}i=i.return}}function af(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new NT;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||($d=!0,h.add(a),t=MT.bind(null,t,i,a),i.then(t,t))}function MT(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,et===t&&(Le&a)===a&&(lt===4||lt===3&&(Le&62914560)===Le&&300>_n()-Jd?(Ke&2)===0&&Ia(t,0):Xd|=a,Sa===Le&&(Sa=0)),oi(t)}function Gy(t,i){i===0&&(i=mo()),t=ca(t,i),t!==null&&(vi(t,i),oi(t))}function PT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Gy(t,a)}function jT(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Gy(t,a)}function UT(t,i){return gi(t,i)}var oc=null,Na=null,of=!1,lc=!1,lf=!1,Is=0;function oi(t){t!==Na&&t.next===null&&(Na===null?oc=Na=t:Na=Na.next=t),lc=!0,of||(of=!0,zT())}function sl(t,i){if(!lf&&lc){lf=!0;do for(var a=!1,l=oc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var b=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Ht(42|t)+1)-1,f&=h&~(b&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Qy(l,f))}else f=Le,f=Fs(l,l===et?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Wr(l,f)||(a=!0,Qy(l,f));l=l.next}while(a);lf=!1}}function LT(){Fy()}function Fy(){lc=of=!1;var t=0;Is!==0&&(QT()&&(t=Is),Is=0);for(var i=_n(),a=null,l=oc;l!==null;){var h=l.next,f=Ky(l,i);f===0?(l.next=null,a===null?oc=h:a.next=h,h===null&&(Na=a)):(a=l,(t!==0||(f&3)!==0)&&(lc=!0)),l=h}sl(t)}function Ky(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-Ht(f),T=1<<b,I=h[b];I===-1?((T&a)===0||(T&l)!==0)&&(h[b]=ho(T,i)):I<=i&&(t.expiredLanes|=T),f&=~T}if(i=et,a=Le,a=Fs(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&pi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Wr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&pi(l),Ks(a)){case 2:case 8:a=Hs;break;case 32:a=$r;break;case 268435456:a=Gs;break;default:a=$r}return l=Yy.bind(null,t),a=gi(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&pi(l),t.callbackPriority=2,t.callbackNode=null,2}function Yy(t,i){if(Ut!==0&&Ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ac()&&t.callbackNode!==a)return null;var l=Le;return l=Fs(t,t===et?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Cy(t,l,i),Ky(t,_n()),t.callbackNode!=null&&t.callbackNode===a?Yy.bind(null,t):null)}function Qy(t,i){if(ac())return null;Cy(t,i,!0)}function zT(){XT(function(){(Ke&6)!==0?gi(uo,LT):Fy()})}function uf(){return Is===0&&(Is=fo()),Is}function $y(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Js(""+t)}function Xy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function BT(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=$y((h[mt]||null).action),b=l.submitter;b&&(i=(i=b[mt]||null)?$y(i.formAction):b.getAttribute("formAction"),i!==null&&(f=i,b=null));var T=new Ws("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Is!==0){var I=b?Xy(h,b):new FormData(h);Id(a,{pending:!0,data:I,method:h.method,action:f},null,I)}}else typeof f=="function"&&(T.preventDefault(),I=b?Xy(h,b):new FormData(h),Id(a,{pending:!0,data:I,method:h.method,action:f},f,I))},currentTarget:h}]})}}for(var cf=0;cf<Yh.length;cf++){var hf=Yh[cf],qT=hf.toLowerCase(),HT=hf[0].toUpperCase()+hf.slice(1);Un(qT,"on"+HT)}Un(Cg,"onAnimationEnd"),Un(Ng,"onAnimationIteration"),Un(Dg,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(aT,"onTransitionRun"),Un(oT,"onTransitionStart"),Un(lT,"onTransitionCancel"),Un(Og,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(al));function Zy(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var b=l.length-1;0<=b;b--){var T=l[b],I=T.instance,q=T.currentTarget;if(T=T.listener,I!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch($){$u($)}h.currentTarget=null,f=I}else for(b=0;b<l.length;b++){if(T=l[b],I=T.instance,q=T.currentTarget,T=T.listener,I!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch($){$u($)}h.currentTarget=null,f=I}}}}function Ve(t,i){var a=i[yo];a===void 0&&(a=i[yo]=new Set);var l=t+"__bubble";a.has(l)||(Jy(i,t,2,!1),a.add(l))}function df(t,i,a){var l=0;i&&(l|=4),Jy(a,t,l,i)}var uc="_reactListening"+Math.random().toString(36).slice(2);function ff(t){if(!t[uc]){t[uc]=!0,vo.forEach(function(a){a!=="selectionchange"&&(GT.has(a)||df(a,!1,t),df(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[uc]||(i[uc]=!0,df("selectionchange",!1,i))}}function Jy(t,i,a,l){switch(Tv(i)){case 2:var h=yA;break;case 8:h=vA;break;default:h=Rf}a=h.bind(null,i,a,t),h=void 0,!An||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function mf(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===h)break;if(b===4)for(b=l.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;T!==null;){if(b=_i(T),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){l=f=b;continue e}T=T.parentNode}}l=l.return}hu(function(){var q=f,$=Tn(a),J=[];e:{var H=kg.get(t);if(H!==void 0){var F=Ws,we=t;switch(t){case"keypress":if(Jn(a)===0)break e;case"keydown":case"keyup":F=sa;break;case"focusin":we="focus",F=na;break;case"focusout":we="blur",F=na;break;case"beforeblur":case"afterblur":F=na;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Lh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=_u;break;case Cg:case Ng:case Dg:F=ia;break;case Og:F=Eu;break;case"scroll":case"scrollend":F=du;break;case"wheel":F=aa;break;case"copy":case"cut":case"paste":F=ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=No;break;case"toggle":case"beforetoggle":F=Au}var be=(i&4)!==0,Je=!be&&(t==="scroll"||t==="scrollend"),P=be?H!==null?H+"Capture":null:H;be=[];for(var k=q,z;k!==null;){var X=k;if(z=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||z===null||P===null||(X=os(k,P),X!=null&&be.push(ol(k,X,z))),Je)break;k=k.return}0<be.length&&(H=new F(H,we,null,a,$),J.push({event:H,listeners:be}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",H&&a!==Ai&&(we=a.relatedTarget||a.fromElement)&&(_i(we)||we[bn]))break e;if((F||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,F?(we=a.relatedTarget||a.toElement,F=q,we=we?_i(we):null,we!==null&&(Je=u(we),be=we.tag,we!==Je||be!==5&&be!==27&&be!==6)&&(we=null)):(F=null,we=q),F!==we)){if(be=wn,X="onMouseLeave",P="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(be=No,X="onPointerLeave",P="onPointerEnter",k="pointer"),Je=F==null?H:Qn(F),z=we==null?H:Qn(we),H=new be(X,k+"leave",F,a,$),H.target=Je,H.relatedTarget=z,X=null,_i($)===q&&(be=new be(P,k+"enter",we,a,$),be.target=z,be.relatedTarget=Je,X=be),Je=X,F&&we)t:{for(be=F,P=we,k=0,z=be;z;z=Da(z))k++;for(z=0,X=P;X;X=Da(X))z++;for(;0<k-z;)be=Da(be),k--;for(;0<z-k;)P=Da(P),z--;for(;k--;){if(be===P||P!==null&&be===P.alternate)break t;be=Da(be),P=Da(P)}be=null}else be=null;F!==null&&Wy(J,H,F,be,!1),we!==null&&Je!==null&&Wy(J,Je,we,be,!0)}}e:{if(H=q?Qn(q):window,F=H.nodeName&&H.nodeName.toLowerCase(),F==="select"||F==="input"&&H.type==="file")var me=vg;else if(At(H))if(_g)me=iT;else{me=tT;var Oe=eT}else F=H.nodeName,!F||F.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&Ao(q.elementType)&&(me=vg):me=nT;if(me&&(me=me(t,q))){Ii(J,me,a,$);break e}Oe&&Oe(t,H,q),t==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&ir(H,"number",H.value)}switch(Oe=q?Qn(q):window,t){case"focusin":(At(Oe)||Oe.contentEditable==="true")&&(oa=Oe,Gh=q,ko=null);break;case"focusout":ko=Gh=oa=null;break;case"mousedown":Fh=!0;break;case"contextmenu":case"mouseup":case"dragend":Fh=!1,Rg(J,a,$);break;case"selectionchange":if(sT)break;case"keydown":case"keyup":Rg(J,a,$)}var ge;if(ti)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else je?K(t,a)&&(Ee="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(_&&a.locale!=="ko"&&(je||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&je&&(ge=So()):(Zn=$,rr="value"in Zn?Zn.value:Zn.textContent,je=!0)),Oe=cc(q,Ee),0<Oe.length&&(Ee=new Io(Ee,t,null,a,$),J.push({event:Ee,listeners:Oe}),ge?Ee.data=ge:(ge=re(a),ge!==null&&(Ee.data=ge)))),(ge=g?Tt(t,a):Ue(t,a))&&(Ee=cc(q,"onBeforeInput"),0<Ee.length&&(Oe=new Io("onBeforeInput","beforeinput",null,a,$),J.push({event:Oe,listeners:Ee}),Oe.data=ge)),BT(J,t,q,a,$)}Zy(J,i)})}function ol(t,i,a){return{instance:t,listener:i,currentTarget:a}}function cc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=os(t,a),h!=null&&l.unshift(ol(t,h,f)),h=os(t,i),h!=null&&l.push(ol(t,h,f))),t.tag===3)return l;t=t.return}return[]}function Da(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Wy(t,i,a,l,h){for(var f=i._reactName,b=[];a!==null&&a!==l;){var T=a,I=T.alternate,q=T.stateNode;if(T=T.tag,I!==null&&I===l)break;T!==5&&T!==26&&T!==27||q===null||(I=q,h?(q=os(a,f),q!=null&&b.unshift(ol(a,q,I))):h||(q=os(a,f),q!=null&&b.push(ol(a,q,I)))),a=a.return}b.length!==0&&t.push({event:i,listeners:b})}var FT=/\r\n?/g,KT=/\u0000|\uFFFD/g;function ev(t){return(typeof t=="string"?t:""+t).replace(FT,`
`).replace(KT,"")}function tv(t,i){return i=ev(i),ev(t)===i}function hc(){}function Ze(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||En(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&En(t,""+l);break;case"className":$n(t,"class",l);break;case"tabIndex":$n(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(t,a,l);break;case"style":To(t,l,f);break;case"data":if(i!=="object"){$n(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Js(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Ze(t,i,"name",h.name,h,null),Ze(t,i,"formEncType",h.formEncType,h,null),Ze(t,i,"formMethod",h.formMethod,h,null),Ze(t,i,"formTarget",h.formTarget,h,null)):(Ze(t,i,"encType",h.encType,h,null),Ze(t,i,"method",h.method,h,null),Ze(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Js(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=hc);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Js(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),nr(t,"popover",l);break;case"xlinkActuate":Mt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Mt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Mt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Mt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Mt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Mt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Mt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Mt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Mt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":nr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=jh.get(a)||a,nr(t,a,l))}}function gf(t,i,a,l,h,f){switch(a){case"style":To(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?En(t,l):(typeof l=="number"||typeof l=="bigint")&&En(t,""+l);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"onClick":l!=null&&(t.onclick=hc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ys.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[mt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):nr(t,a,l)}}}function Lt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ze(t,i,f,b,a,null)}}h&&Ze(t,i,"srcSet",a.srcSet,a,null),l&&Ze(t,i,"src",a.src,a,null);return;case"input":Ve("invalid",t);var T=f=b=h=null,I=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":h=$;break;case"type":b=$;break;case"checked":I=$;break;case"defaultChecked":q=$;break;case"value":f=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:Ze(t,i,l,$,a,null)}}rs(t,f,T,I,q,b,h,!1),Zs(t);return;case"select":Ve("invalid",t),l=b=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:Ze(t,i,h,T,a,null)}i=f,a=b,t.multiple=!!l,i!=null?Ti(t,!!l,i,!1):a!=null&&Ti(t,!!l,a,!0);return;case"textarea":Ve("invalid",t),f=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(T=a[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Ze(t,i,b,T,a,null)}ss(t,l,h,f),Zs(t);return;case"option":for(I in a)if(a.hasOwnProperty(I)&&(l=a[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(t,i,I,l,a,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(l=0;l<al.length;l++)Ve(al[l],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ze(t,i,q,l,a,null)}return;default:if(Ao(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&gf(t,i,$,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Ze(t,i,T,l,a,null))}function YT(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,T=null,I=null,q=null,$=null;for(F in a){var J=a[F];if(a.hasOwnProperty(F)&&J!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":I=J;default:l.hasOwnProperty(F)||Ze(t,i,F,null,l,J)}}for(var H in l){var F=l[H];if(J=a[H],l.hasOwnProperty(H)&&(F!=null||J!=null))switch(H){case"type":f=F;break;case"name":h=F;break;case"checked":q=F;break;case"defaultChecked":$=F;break;case"value":b=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:F!==J&&Ze(t,i,H,F,l,J)}}cn(t,b,T,I,q,$,f,h);return;case"select":F=b=T=H=null;for(f in a)if(I=a[f],a.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":F=I;default:l.hasOwnProperty(f)||Ze(t,i,f,null,l,I)}for(h in l)if(f=l[h],I=a[h],l.hasOwnProperty(h)&&(f!=null||I!=null))switch(h){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":b=f;default:f!==I&&Ze(t,i,h,f,l,I)}i=T,a=b,l=F,H!=null?Ti(t,!!a,H,!1):!!l!=!!a&&(i!=null?Ti(t,!!a,i,!0):Ti(t,!!a,a?[]:"",!1));return;case"textarea":F=H=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ze(t,i,T,null,l,h)}for(b in l)if(h=l[b],f=a[b],l.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":H=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Ze(t,i,b,h,l,f)}$e(t,H,F);return;case"option":for(var we in a)if(H=a[we],a.hasOwnProperty(we)&&H!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:Ze(t,i,we,null,l,H)}for(I in l)if(H=l[I],F=a[I],l.hasOwnProperty(I)&&H!==F&&(H!=null||F!=null))switch(I){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ze(t,i,I,H,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)H=a[be],a.hasOwnProperty(be)&&H!=null&&!l.hasOwnProperty(be)&&Ze(t,i,be,null,l,H);for(q in l)if(H=l[q],F=a[q],l.hasOwnProperty(q)&&H!==F&&(H!=null||F!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:Ze(t,i,q,H,l,F)}return;default:if(Ao(i)){for(var Je in a)H=a[Je],a.hasOwnProperty(Je)&&H!==void 0&&!l.hasOwnProperty(Je)&&gf(t,i,Je,void 0,l,H);for($ in l)H=l[$],F=a[$],!l.hasOwnProperty($)||H===F||H===void 0&&F===void 0||gf(t,i,$,H,l,F);return}}for(var P in a)H=a[P],a.hasOwnProperty(P)&&H!=null&&!l.hasOwnProperty(P)&&Ze(t,i,P,null,l,H);for(J in l)H=l[J],F=a[J],!l.hasOwnProperty(J)||H===F||H==null&&F==null||Ze(t,i,J,H,l,F)}var pf=null,yf=null;function dc(t){return t.nodeType===9?t:t.ownerDocument}function nv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function vf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var _f=null;function QT(){var t=window.event;return t&&t.type==="popstate"?t===_f?!1:(_f=t,!0):(_f=null,!1)}var rv=typeof setTimeout=="function"?setTimeout:void 0,$T=typeof clearTimeout=="function"?clearTimeout:void 0,sv=typeof Promise=="function"?Promise:void 0,XT=typeof queueMicrotask=="function"?queueMicrotask:typeof sv<"u"?function(t){return sv.resolve(null).then(t).catch(ZT)}:rv;function ZT(t){setTimeout(function(){throw t})}function br(t){return t==="head"}function av(t,i){var a=i,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&ll(b.documentElement),a&2&&ll(b.body),a&4)for(a=b.head,ll(a),b=a.firstChild;b;){var T=b.nextSibling,I=b.nodeName;b[es]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=T}}if(h===0){t.removeChild(f),pl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);pl(i)}function bf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":bf(a),tr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function JT(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[es])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=zn(t.nextSibling),t===null)break}return null}function WT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=zn(t.nextSibling),t===null))return null;return t}function Ef(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function eA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function zn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var Tf=null;function ov(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function lv(t,i,a){switch(i=dc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function ll(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);tr(t)}var Dn=new Map,uv=new Set;function fc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Bi=ne.d;ne.d={f:tA,r:nA,D:iA,C:rA,L:sA,m:aA,X:lA,S:oA,M:uA};function tA(){var t=Bi.f(),i=rc();return t||i}function nA(t){var i=Yn(t);i!==null&&i.tag===5&&i.type==="form"?Cp(i):Bi.r(t)}var Oa=typeof document>"u"?null:document;function cv(t,i,a){var l=Oa;if(l&&typeof i=="string"&&i){var h=gt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),uv.has(h)||(uv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Lt(i,"link",t),ut(i),l.head.appendChild(i)))}}function iA(t){Bi.D(t),cv("dns-prefetch",t,null)}function rA(t,i){Bi.C(t,i),cv("preconnect",t,i)}function sA(t,i,a){Bi.L(t,i,a);var l=Oa;if(l&&t&&i){var h='link[rel="preload"][as="'+gt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+gt(a.imageSizes)+'"]')):h+='[href="'+gt(t)+'"]';var f=h;switch(i){case"style":f=ka(t);break;case"script":f=Va(t)}Dn.has(f)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Dn.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(ul(f))||i==="script"&&l.querySelector(cl(f))||(i=l.createElement("link"),Lt(i,"link",t),ut(i),l.head.appendChild(i)))}}function aA(t,i){Bi.m(t,i);var a=Oa;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+gt(l)+'"][href="'+gt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Va(t)}if(!Dn.has(f)&&(t=E({rel:"modulepreload",href:t},i),Dn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cl(f)))return}l=a.createElement("link"),Lt(l,"link",t),ut(l),a.head.appendChild(l)}}}function oA(t,i,a){Bi.S(t,i,a);var l=Oa;if(l&&t){var h=Xt(l).hoistableStyles,f=ka(t);i=i||"default";var b=h.get(f);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(ul(f)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Dn.get(f))&&Af(t,a);var I=b=l.createElement("link");ut(I),Lt(I,"link",t),I._p=new Promise(function(q,$){I.onload=q,I.onerror=$}),I.addEventListener("load",function(){T.loading|=1}),I.addEventListener("error",function(){T.loading|=2}),T.loading|=4,mc(b,i,l)}b={type:"stylesheet",instance:b,count:1,state:T},h.set(f,b)}}}function lA(t,i){Bi.X(t,i);var a=Oa;if(a&&t){var l=Xt(a).hoistableScripts,h=Va(t),f=l.get(h);f||(f=a.querySelector(cl(h)),f||(t=E({src:t,async:!0},i),(i=Dn.get(h))&&wf(t,i),f=a.createElement("script"),ut(f),Lt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function uA(t,i){Bi.M(t,i);var a=Oa;if(a&&t){var l=Xt(a).hoistableScripts,h=Va(t),f=l.get(h);f||(f=a.querySelector(cl(h)),f||(t=E({src:t,async:!0,type:"module"},i),(i=Dn.get(h))&&wf(t,i),f=a.createElement("script"),ut(f),Lt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function hv(t,i,a,l){var h=(h=_e.current)?fc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ka(a.href),a=Xt(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ka(a.href);var f=Xt(h).hoistableStyles,b=f.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=h.querySelector(ul(t)))&&!f._p&&(b.instance=f,b.state.loading=5),Dn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Dn.set(t,a),f||cA(h,t,a,b.state))),i&&l===null)throw Error(s(528,""));return b}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Va(a),a=Xt(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ka(t){return'href="'+gt(t)+'"'}function ul(t){return'link[rel="stylesheet"]['+t+"]"}function dv(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function cA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Lt(i,"link",a),ut(i),t.head.appendChild(i))}function Va(t){return'[src="'+gt(t)+'"]'}function cl(t){return"script[async]"+t}function fv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+gt(a.href)+'"]');if(l)return i.instance=l,ut(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ut(l),Lt(l,"style",h),mc(l,a.precedence,t),i.instance=l;case"stylesheet":h=ka(a.href);var f=t.querySelector(ul(h));if(f)return i.state.loading|=4,i.instance=f,ut(f),f;l=dv(a),(h=Dn.get(h))&&Af(l,h),f=(t.ownerDocument||t).createElement("link"),ut(f);var b=f;return b._p=new Promise(function(T,I){b.onload=T,b.onerror=I}),Lt(f,"link",l),i.state.loading|=4,mc(f,a.precedence,t),i.instance=f;case"script":return f=Va(a.src),(h=t.querySelector(cl(f)))?(i.instance=h,ut(h),h):(l=a,(h=Dn.get(f))&&(l=E({},a),wf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ut(h),Lt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,mc(l,a.precedence,t));return i.instance}function mc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Af(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function wf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var gc=null;function mv(t,i,a){if(gc===null){var l=new Map,h=gc=new Map;h.set(a,l)}else h=gc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[es]||f[Et]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(i)||"";b=t+b;var T=l.get(b);T?T.push(f):l.set(b,[f])}}return l}function gv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function hA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function pv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var hl=null;function dA(){}function fA(t,i,a){if(hl===null)throw Error(s(475));var l=hl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=ka(a.href),f=t.querySelector(ul(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=pc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,ut(f);return}f=t.ownerDocument||t,a=dv(a),(h=Dn.get(h))&&Af(a,h),f=f.createElement("link"),ut(f);var b=f;b._p=new Promise(function(T,I){b.onload=T,b.onerror=I}),Lt(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=pc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function mA(){if(hl===null)throw Error(s(475));var t=hl;return t.stylesheets&&t.count===0&&Sf(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Sf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function pc(){if(this.count--,this.count===0){if(this.stylesheets)Sf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var yc=null;function Sf(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,yc=new Map,i.forEach(gA,t),yc=null,pc.call(t))}function gA(t,i){if(!(i.state.loading&4)){var a=yc.get(t);if(a)var l=a.get(null);else{a=new Map,yc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=i.instance,b=h.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,h),a.set(b,h),this.count++,l=pc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var dl={$$typeof:le,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function pA(t,i,a,l,h,f,b,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.hiddenUpdates=yi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function yv(t,i,a,l,h,f,b,T,I,q,$,J){return t=new pA(t,i,a,b,T,I,q,J),i=1,f===!0&&(i|=24),f=dn(3,null,null,i),t.current=f,f.stateNode=t,i=sd(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},ud(f),t}function vv(t){return t?(t=ha,t):ha}function _v(t,i,a,l,h,f){h=vv(h),l.context===null?l.context=h:l.pendingContext=h,l=or(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=lr(t,l,i),a!==null&&(yn(a,t,i),qo(a,t,i))}function bv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function xf(t,i){bv(t,i),(t=t.alternate)&&bv(t,i)}function Ev(t){if(t.tag===13){var i=ca(t,67108864);i!==null&&yn(i,t,67108864),xf(t,67108864)}}var vc=!0;function yA(t,i,a,l){var h=U.T;U.T=null;var f=ne.p;try{ne.p=2,Rf(t,i,a,l)}finally{ne.p=f,U.T=h}}function vA(t,i,a,l){var h=U.T;U.T=null;var f=ne.p;try{ne.p=8,Rf(t,i,a,l)}finally{ne.p=f,U.T=h}}function Rf(t,i,a,l){if(vc){var h=If(l);if(h===null)mf(t,i,l,_c,a),Av(t,l);else if(bA(h,t,i,a,l))l.stopPropagation();else if(Av(t,l),i&4&&-1<_A.indexOf(t)){for(;h!==null;){var f=Yn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=Mn(f.pendingLanes);if(b!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var I=1<<31-Ht(b);T.entanglements[1]|=I,b&=~I}oi(f),(Ke&6)===0&&(nc=_n()+500,sl(0))}}break;case 13:T=ca(f,2),T!==null&&yn(T,f,2),rc(),xf(f,2)}if(f=If(l),f===null&&mf(t,i,l,_c,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else mf(t,i,l,null,a)}}function If(t){return t=Tn(t),Cf(t)}var _c=null;function Cf(t){if(_c=null,t=_i(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return _c=t,null}function Tv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dh()){case uo:return 2;case Hs:return 8;case $r:case Oh:return 32;case Gs:return 268435456;default:return 32}default:return 32}}var Nf=!1,Er=null,Tr=null,Ar=null,fl=new Map,ml=new Map,wr=[],_A="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Av(t,i){switch(t){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":fl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(i.pointerId)}}function gl(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Yn(i),i!==null&&Ev(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function bA(t,i,a,l,h){switch(i){case"focusin":return Er=gl(Er,t,i,a,l,h),!0;case"dragenter":return Tr=gl(Tr,t,i,a,l,h),!0;case"mouseover":return Ar=gl(Ar,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return fl.set(f,gl(fl.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,ml.set(f,gl(ml.get(f)||null,t,i,a,l,h)),!0}return!1}function wv(t){var i=_i(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,ru(t.priority,function(){if(a.tag===13){var l=pn();l=Ji(l);var h=ca(a,l);h!==null&&yn(h,a,l),xf(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=If(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ai=l,a.target.dispatchEvent(l),Ai=null}else return i=Yn(a),i!==null&&Ev(i),t.blockedOn=a,!1;i.shift()}return!0}function Sv(t,i,a){bc(t)&&a.delete(i)}function EA(){Nf=!1,Er!==null&&bc(Er)&&(Er=null),Tr!==null&&bc(Tr)&&(Tr=null),Ar!==null&&bc(Ar)&&(Ar=null),fl.forEach(Sv),ml.forEach(Sv)}function Ec(t,i){t.blockedOn===i&&(t.blockedOn=null,Nf||(Nf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,EA)))}var Tc=null;function xv(t){Tc!==t&&(Tc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Tc===t&&(Tc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Cf(l||a)===null)continue;break}var f=Yn(a);f!==null&&(t.splice(i,3),i-=3,Id(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function pl(t){function i(I){return Ec(I,t)}Er!==null&&Ec(Er,t),Tr!==null&&Ec(Tr,t),Ar!==null&&Ec(Ar,t),fl.forEach(i),ml.forEach(i);for(var a=0;a<wr.length;a++){var l=wr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<wr.length&&(a=wr[0],a.blockedOn===null);)wv(a),a.blockedOn===null&&wr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],b=h[mt]||null;if(typeof f=="function")b||xv(a);else if(b){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[mt]||null)T=b.formAction;else if(Cf(h)!==null)continue}else T=b.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),xv(a)}}}function Df(t){this._internalRoot=t}Ac.prototype.render=Df.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=pn();_v(a,l,t,i,null,null)},Ac.prototype.unmount=Df.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;_v(t.current,2,null,t,null,null),rc(),i[bn]=null}};function Ac(t){this._internalRoot=t}Ac.prototype.unstable_scheduleHydration=function(t){if(t){var i=Wi();t={blockedOn:null,target:t,priority:i};for(var a=0;a<wr.length&&i!==0&&i<wr[a].priority;a++);wr.splice(a,0,t),a===0&&wv(t)}};var Rv=e.version;if(Rv!=="19.1.0")throw Error(s(527,Rv,"19.1.0"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var TA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{at=wc.inject(TA),Fe=wc}catch{}}return vl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Hp,f=Gp,b=Fp,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=yv(t,1,!1,null,null,a,l,h,f,b,T,null),t[bn]=i.current,ff(t),new Df(i)},vl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=Hp,b=Gp,T=Fp,I=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(I=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),i=yv(t,1,!0,i,a??null,l,h,f,b,T,I,q),i.context=vv(null),a=i.current,l=pn(),l=Ji(l),h=or(l),h.callback=null,lr(a,h,l),a=l,i.current.lanes=a,vi(i,a),oi(i),t[bn]=i.current,ff(t),new Ac(i)},vl.version="19.1.0",vl}var jv;function OA(){if(jv)return Vf.exports;jv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Vf.exports=DA(),Vf.exports}var kA=OA();const VA="modulepreload",MA=function(r){return"/youtube-bgm-research/"+r},Uv={},La=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let d=function(y){return Promise.all(y.map(E=>Promise.resolve(E).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=d(n.map(y=>{if(y=MA(y),y in Uv)return;Uv[y]=!0;const E=y.endsWith(".css"),w=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const x=document.createElement("link");if(x.rel=E?"stylesheet":VA,E||(x.as="script"),x.crossOrigin="",x.href=y,p&&x.setAttribute("nonce",p),document.head.appendChild(x),E)return new Promise((V,G)=>{x.addEventListener("load",V),x.addEventListener("error",()=>G(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return e().catch(u)})},PA=()=>{};var Lv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},jA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],d=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],d=o+1<r.length,m=d?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,E=u>>2,w=(u&3)<<4|m>>4;let x=(m&15)<<2|y>>6,V=y&63;p||(V=64,d||(x=64)),s.push(n[E],n[w],n[x],n[V])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(p0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):jA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||y==null||w==null)throw new UA;const x=u<<2|m>>4;if(s.push(x),y!==64){const V=m<<4&240|y>>2;if(s.push(V),w!==64){const G=y<<6&192|w;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class UA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const LA=function(r){const e=p0(r);return y0.encodeByteArray(e,!0)},qc=function(r){return LA(r).replace(/\./g,"")},v0=function(r){try{return y0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=()=>zA().__FIREBASE_DEFAULTS__,qA=()=>{if(typeof process>"u"||typeof Lv>"u")return;const r=Lv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},HA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&v0(r[1]);return e&&JSON.parse(e)},oh=()=>{try{return PA()||BA()||qA()||HA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},_0=r=>{var e,n;return(n=(e=oh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},GA=r=>{const e=_0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},b0=()=>{var r;return(r=oh())===null||r===void 0?void 0:r.config},E0=r=>{var e;return(e=oh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(r){return r.endsWith(".cloudworkstations.dev")}async function T0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[qc(JSON.stringify(n)),qc(JSON.stringify(d)),""].join(".")}const xl={};function YA(){const r={prod:[],emulator:[]};for(const e of Object.keys(xl))xl[e]?r.emulator.push(e):r.prod.push(e);return r}function QA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let zv=!1;function A0(r,e){if(typeof window>"u"||typeof document>"u"||!to(window.location.host)||xl[r]===e||xl[r]||zv)return;xl[r]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",u=YA().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function m(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function p(x,V){x.setAttribute("width","24"),x.setAttribute("id",V),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function y(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{zv=!0,d()},x}function E(x,V){x.setAttribute("id",V),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=QA(s),V=n("text"),G=document.getElementById(V)||document.createElement("span"),B=n("learnmore"),Q=document.getElementById(B)||document.createElement("a"),ue=n("preprendIcon"),he=document.getElementById(ue)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const le=x.element;m(le),E(Q,B);const de=y();p(he,ue),le.append(he,G,Q,de),document.body.appendChild(le)}u?(G.innerText="Preview backend disconnected.",he.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(he.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $A(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function XA(){var r;const e=(r=oh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function WA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ew(){const r=$t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function tw(){return!XA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nw(){try{return typeof indexedDB=="object"}catch{return!1}}function iw(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="FirebaseError";class Zi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=rw,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ql.prototype.create)}}class ql{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?sw(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Zi(o,m,s)}}function sw(r,e){return r.replace(aw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const aw=/\{\$([^}]+)}/g;function ow(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ds(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],d=e[o];if(Bv(u)&&Bv(d)){if(!Ds(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Bv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function _l(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function bl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function lw(r,e){const n=new uw(r,e);return n.subscribe.bind(n)}class uw{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");cw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Uf),o.error===void 0&&(o.error=Uf),o.complete===void 0&&(o.complete=Uf);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cw(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Uf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(r){return r&&r._delegate?r._delegate:r}class Os{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new FA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fw(e))try{this.getOrInitializeService({instanceIdentifier:Cs})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Cs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cs){return this.instances.has(e)}getOptions(e=Cs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:dw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Cs){return this.component?this.component.multipleInstances?e:Cs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dw(r){return r===Cs?void 0:r}function fw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const gw={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},pw=Me.INFO,yw={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},vw=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=yw[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sm{constructor(e){this.name=e,this._logLevel=pw,this._logHandler=vw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const _w=(r,e)=>e.some(n=>r instanceof n);let qv,Hv;function bw(){return qv||(qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ew(){return Hv||(Hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const w0=new WeakMap,Xf=new WeakMap,S0=new WeakMap,Lf=new WeakMap,xm=new WeakMap;function Tw(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",d)},u=()=>{n(Or(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&w0.set(n,r)}).catch(()=>{}),xm.set(e,r),e}function Aw(r){if(Xf.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",d),r.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",d),r.addEventListener("abort",d)});Xf.set(r,e)}let Zf={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Xf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||S0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function ww(r){Zf=r(Zf)}function Sw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(zf(this),e,...n);return S0.set(s,e.sort?e.sort():[e]),Or(s)}:Ew().includes(r)?function(...e){return r.apply(zf(this),e),Or(w0.get(this))}:function(...e){return Or(r.apply(zf(this),e))}}function xw(r){return typeof r=="function"?Sw(r):(r instanceof IDBTransaction&&Aw(r),_w(r,bw())?new Proxy(r,Zf):r)}function Or(r){if(r instanceof IDBRequest)return Tw(r);if(Lf.has(r))return Lf.get(r);const e=xw(r);return e!==r&&(Lf.set(r,e),xm.set(e,r)),e}const zf=r=>xm.get(r);function Rw(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(r,e),m=Or(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Or(d.result),p.oldVersion,p.newVersion,Or(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const Iw=["get","getKey","getAll","getAllKeys","count"],Cw=["put","add","delete","clear"],Bf=new Map;function Gv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Bf.get(e))return Bf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Cw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Iw.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return Bf.set(e,u),u}ww(r=>({...r,get:(e,n,s)=>Gv(e,n)||r.get(e,n,s),has:(e,n)=>!!Gv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Dw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Dw(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jf="@firebase/app",Fv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Sm("@firebase/app"),Ow="@firebase/app-compat",kw="@firebase/analytics-compat",Vw="@firebase/analytics",Mw="@firebase/app-check-compat",Pw="@firebase/app-check",jw="@firebase/auth",Uw="@firebase/auth-compat",Lw="@firebase/database",zw="@firebase/data-connect",Bw="@firebase/database-compat",qw="@firebase/functions",Hw="@firebase/functions-compat",Gw="@firebase/installations",Fw="@firebase/installations-compat",Kw="@firebase/messaging",Yw="@firebase/messaging-compat",Qw="@firebase/performance",$w="@firebase/performance-compat",Xw="@firebase/remote-config",Zw="@firebase/remote-config-compat",Jw="@firebase/storage",Ww="@firebase/storage-compat",eS="@firebase/firestore",tS="@firebase/ai",nS="@firebase/firestore-compat",iS="firebase",rS="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="[DEFAULT]",sS={[Jf]:"fire-core",[Ow]:"fire-core-compat",[Vw]:"fire-analytics",[kw]:"fire-analytics-compat",[Pw]:"fire-app-check",[Mw]:"fire-app-check-compat",[jw]:"fire-auth",[Uw]:"fire-auth-compat",[Lw]:"fire-rtdb",[zw]:"fire-data-connect",[Bw]:"fire-rtdb-compat",[qw]:"fire-fn",[Hw]:"fire-fn-compat",[Gw]:"fire-iid",[Fw]:"fire-iid-compat",[Kw]:"fire-fcm",[Yw]:"fire-fcm-compat",[Qw]:"fire-perf",[$w]:"fire-perf-compat",[Xw]:"fire-rc",[Zw]:"fire-rc-compat",[Jw]:"fire-gcs",[Ww]:"fire-gcs-compat",[eS]:"fire-fst",[nS]:"fire-fst-compat",[tS]:"fire-vertex","fire-js":"fire-js",[iS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,aS=new Map,em=new Map;function Kv(r,e){try{r.container.addComponent(e)}catch(n){Yi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ka(r){const e=r.name;if(em.has(e))return Yi.debug(`There were multiple attempts to register component ${e}.`),!1;em.set(e,r);for(const n of Hc.values())Kv(n,r);for(const n of aS.values())Kv(n,r);return!0}function Rm(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function On(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new ql("app","Firebase",oS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=rS;function x0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Wf,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw kr.create("bad-app-name",{appName:String(o)});if(n||(n=b0()),!n)throw kr.create("no-options");const u=Hc.get(o);if(u){if(Ds(n,u.options)&&Ds(s,u.config))return u;throw kr.create("duplicate-app",{appName:o})}const d=new mw(o);for(const p of em.values())d.addComponent(p);const m=new lS(n,s,d);return Hc.set(o,m),m}function R0(r=Wf){const e=Hc.get(r);if(!e&&r===Wf&&b0())return x0();if(!e)throw kr.create("no-app",{appName:r});return e}function Vr(r,e,n){var s;let o=(s=sS[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yi.warn(m.join(" "));return}Ka(new Os(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="firebase-heartbeat-database",cS=1,Ol="firebase-heartbeat-store";let qf=null;function I0(){return qf||(qf=Rw(uS,cS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ol)}catch(n){console.warn(n)}}}}).catch(r=>{throw kr.create("idb-open",{originalErrorMessage:r.message})})),qf}async function hS(r){try{const n=(await I0()).transaction(Ol),s=await n.objectStore(Ol).get(C0(r));return await n.done,s}catch(e){if(e instanceof Zi)Yi.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yi.warn(n.message)}}}async function Yv(r,e){try{const s=(await I0()).transaction(Ol,"readwrite");await s.objectStore(Ol).put(e,C0(r)),await s.done}catch(n){if(n instanceof Zi)Yi.warn(n.message);else{const s=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yi.warn(s.message)}}}function C0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS=1024,fS=30;class mS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pS(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Qv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>fS){const d=yS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Yi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qv(),{heartbeatsToSend:s,unsentEntries:o}=gS(this._heartbeatsCache.heartbeats),u=qc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Yi.warn(n),""}}}function Qv(){return new Date().toISOString().substring(0,10)}function gS(r,e=dS){const n=[];let s=r.slice();for(const o of r){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),$v(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),$v(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class pS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nw()?iw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Yv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function $v(r){return qc(JSON.stringify({version:2,heartbeats:r})).length}function yS(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(r){Ka(new Os("platform-logger",e=>new Nw(e),"PRIVATE")),Ka(new Os("heartbeat",e=>new mS(e),"PRIVATE")),Vr(Jf,Fv,r),Vr(Jf,Fv,"esm2017"),Vr("fire-js","")}vS("");var Xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mr,N0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,S){function R(){}R.prototype=S.prototype,D.D=S.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(O,M,j){for(var C=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)C[bt-2]=arguments[bt];return S.prototype[M].apply(O,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,S,R){R||(R=0);var O=Array(16);if(typeof S=="string")for(var M=0;16>M;++M)O[M]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(M=0;16>M;++M)O[M]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=D.g[0],R=D.g[1],M=D.g[2];var j=D.g[3],C=S+(j^R&(M^j))+O[0]+3614090360&4294967295;S=R+(C<<7&4294967295|C>>>25),C=j+(M^S&(R^M))+O[1]+3905402710&4294967295,j=S+(C<<12&4294967295|C>>>20),C=M+(R^j&(S^R))+O[2]+606105819&4294967295,M=j+(C<<17&4294967295|C>>>15),C=R+(S^M&(j^S))+O[3]+3250441966&4294967295,R=M+(C<<22&4294967295|C>>>10),C=S+(j^R&(M^j))+O[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=j+(M^S&(R^M))+O[5]+1200080426&4294967295,j=S+(C<<12&4294967295|C>>>20),C=M+(R^j&(S^R))+O[6]+2821735955&4294967295,M=j+(C<<17&4294967295|C>>>15),C=R+(S^M&(j^S))+O[7]+4249261313&4294967295,R=M+(C<<22&4294967295|C>>>10),C=S+(j^R&(M^j))+O[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=j+(M^S&(R^M))+O[9]+2336552879&4294967295,j=S+(C<<12&4294967295|C>>>20),C=M+(R^j&(S^R))+O[10]+4294925233&4294967295,M=j+(C<<17&4294967295|C>>>15),C=R+(S^M&(j^S))+O[11]+2304563134&4294967295,R=M+(C<<22&4294967295|C>>>10),C=S+(j^R&(M^j))+O[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=j+(M^S&(R^M))+O[13]+4254626195&4294967295,j=S+(C<<12&4294967295|C>>>20),C=M+(R^j&(S^R))+O[14]+2792965006&4294967295,M=j+(C<<17&4294967295|C>>>15),C=R+(S^M&(j^S))+O[15]+1236535329&4294967295,R=M+(C<<22&4294967295|C>>>10),C=S+(M^j&(R^M))+O[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=j+(R^M&(S^R))+O[6]+3225465664&4294967295,j=S+(C<<9&4294967295|C>>>23),C=M+(S^R&(j^S))+O[11]+643717713&4294967295,M=j+(C<<14&4294967295|C>>>18),C=R+(j^S&(M^j))+O[0]+3921069994&4294967295,R=M+(C<<20&4294967295|C>>>12),C=S+(M^j&(R^M))+O[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=j+(R^M&(S^R))+O[10]+38016083&4294967295,j=S+(C<<9&4294967295|C>>>23),C=M+(S^R&(j^S))+O[15]+3634488961&4294967295,M=j+(C<<14&4294967295|C>>>18),C=R+(j^S&(M^j))+O[4]+3889429448&4294967295,R=M+(C<<20&4294967295|C>>>12),C=S+(M^j&(R^M))+O[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=j+(R^M&(S^R))+O[14]+3275163606&4294967295,j=S+(C<<9&4294967295|C>>>23),C=M+(S^R&(j^S))+O[3]+4107603335&4294967295,M=j+(C<<14&4294967295|C>>>18),C=R+(j^S&(M^j))+O[8]+1163531501&4294967295,R=M+(C<<20&4294967295|C>>>12),C=S+(M^j&(R^M))+O[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=j+(R^M&(S^R))+O[2]+4243563512&4294967295,j=S+(C<<9&4294967295|C>>>23),C=M+(S^R&(j^S))+O[7]+1735328473&4294967295,M=j+(C<<14&4294967295|C>>>18),C=R+(j^S&(M^j))+O[12]+2368359562&4294967295,R=M+(C<<20&4294967295|C>>>12),C=S+(R^M^j)+O[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=j+(S^R^M)+O[8]+2272392833&4294967295,j=S+(C<<11&4294967295|C>>>21),C=M+(j^S^R)+O[11]+1839030562&4294967295,M=j+(C<<16&4294967295|C>>>16),C=R+(M^j^S)+O[14]+4259657740&4294967295,R=M+(C<<23&4294967295|C>>>9),C=S+(R^M^j)+O[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=j+(S^R^M)+O[4]+1272893353&4294967295,j=S+(C<<11&4294967295|C>>>21),C=M+(j^S^R)+O[7]+4139469664&4294967295,M=j+(C<<16&4294967295|C>>>16),C=R+(M^j^S)+O[10]+3200236656&4294967295,R=M+(C<<23&4294967295|C>>>9),C=S+(R^M^j)+O[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=j+(S^R^M)+O[0]+3936430074&4294967295,j=S+(C<<11&4294967295|C>>>21),C=M+(j^S^R)+O[3]+3572445317&4294967295,M=j+(C<<16&4294967295|C>>>16),C=R+(M^j^S)+O[6]+76029189&4294967295,R=M+(C<<23&4294967295|C>>>9),C=S+(R^M^j)+O[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=j+(S^R^M)+O[12]+3873151461&4294967295,j=S+(C<<11&4294967295|C>>>21),C=M+(j^S^R)+O[15]+530742520&4294967295,M=j+(C<<16&4294967295|C>>>16),C=R+(M^j^S)+O[2]+3299628645&4294967295,R=M+(C<<23&4294967295|C>>>9),C=S+(M^(R|~j))+O[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=j+(R^(S|~M))+O[7]+1126891415&4294967295,j=S+(C<<10&4294967295|C>>>22),C=M+(S^(j|~R))+O[14]+2878612391&4294967295,M=j+(C<<15&4294967295|C>>>17),C=R+(j^(M|~S))+O[5]+4237533241&4294967295,R=M+(C<<21&4294967295|C>>>11),C=S+(M^(R|~j))+O[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=j+(R^(S|~M))+O[3]+2399980690&4294967295,j=S+(C<<10&4294967295|C>>>22),C=M+(S^(j|~R))+O[10]+4293915773&4294967295,M=j+(C<<15&4294967295|C>>>17),C=R+(j^(M|~S))+O[1]+2240044497&4294967295,R=M+(C<<21&4294967295|C>>>11),C=S+(M^(R|~j))+O[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=j+(R^(S|~M))+O[15]+4264355552&4294967295,j=S+(C<<10&4294967295|C>>>22),C=M+(S^(j|~R))+O[6]+2734768916&4294967295,M=j+(C<<15&4294967295|C>>>17),C=R+(j^(M|~S))+O[13]+1309151649&4294967295,R=M+(C<<21&4294967295|C>>>11),C=S+(M^(R|~j))+O[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=j+(R^(S|~M))+O[11]+3174756917&4294967295,j=S+(C<<10&4294967295|C>>>22),C=M+(S^(j|~R))+O[2]+718787259&4294967295,M=j+(C<<15&4294967295|C>>>17),C=R+(j^(M|~S))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+S&4294967295,D.g[1]=D.g[1]+(M+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+M&4294967295,D.g[3]=D.g[3]+j&4294967295}s.prototype.u=function(D,S){S===void 0&&(S=D.length);for(var R=S-this.blockSize,O=this.B,M=this.h,j=0;j<S;){if(M==0)for(;j<=R;)o(this,D,j),j+=this.blockSize;if(typeof D=="string"){for(;j<S;)if(O[M++]=D.charCodeAt(j++),M==this.blockSize){o(this,O),M=0;break}}else for(;j<S;)if(O[M++]=D[j++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=S},s.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var S=1;S<D.length-8;++S)D[S]=0;var R=8*this.o;for(S=D.length-8;S<D.length;++S)D[S]=R&255,R/=256;for(this.u(D),D=Array(16),S=R=0;4>S;++S)for(var O=0;32>O;O+=8)D[R++]=this.g[S]>>>O&255;return D};function u(D,S){var R=m;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=S(D)}function d(D,S){this.h=S;for(var R=[],O=!0,M=D.length-1;0<=M;M--){var j=D[M]|0;O&&j==S||(R[M]=j,O=!1)}this.g=R}var m={};function p(D){return-128<=D&&128>D?u(D,function(S){return new d([S|0],0>S?-1:0)}):new d([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return w;if(0>D)return Q(y(-D));for(var S=[],R=1,O=0;D>=R;O++)S[O]=D/R|0,R*=4294967296;return new d(S,0)}function E(D,S){if(D.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(D.charAt(0)=="-")return Q(E(D.substring(1),S));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(S,8)),O=w,M=0;M<D.length;M+=8){var j=Math.min(8,D.length-M),C=parseInt(D.substring(M,M+j),S);8>j?(j=y(Math.pow(S,j)),O=O.j(j).add(y(C))):(O=O.j(R),O=O.add(y(C)))}return O}var w=p(0),x=p(1),V=p(16777216);r=d.prototype,r.m=function(){if(B(this))return-Q(this).m();for(var D=0,S=1,R=0;R<this.g.length;R++){var O=this.i(R);D+=(0<=O?O:4294967296+O)*S,S*=4294967296}return D},r.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(G(this))return"0";if(B(this))return"-"+Q(this).toString(D);for(var S=y(Math.pow(D,6)),R=this,O="";;){var M=de(R,S).g;R=ue(R,M.j(S));var j=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=M,G(R))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},r.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function G(D){if(D.h!=0)return!1;for(var S=0;S<D.g.length;S++)if(D.g[S]!=0)return!1;return!0}function B(D){return D.h==-1}r.l=function(D){return D=ue(this,D),B(D)?-1:G(D)?0:1};function Q(D){for(var S=D.g.length,R=[],O=0;O<S;O++)R[O]=~D.g[O];return new d(R,~D.h).add(x)}r.abs=function(){return B(this)?Q(this):this},r.add=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],O=0,M=0;M<=S;M++){var j=O+(this.i(M)&65535)+(D.i(M)&65535),C=(j>>>16)+(this.i(M)>>>16)+(D.i(M)>>>16);O=C>>>16,j&=65535,C&=65535,R[M]=C<<16|j}return new d(R,R[R.length-1]&-2147483648?-1:0)};function ue(D,S){return D.add(Q(S))}r.j=function(D){if(G(this)||G(D))return w;if(B(this))return B(D)?Q(this).j(Q(D)):Q(Q(this).j(D));if(B(D))return Q(this.j(Q(D)));if(0>this.l(V)&&0>D.l(V))return y(this.m()*D.m());for(var S=this.g.length+D.g.length,R=[],O=0;O<2*S;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<D.g.length;M++){var j=this.i(O)>>>16,C=this.i(O)&65535,bt=D.i(M)>>>16,ae=D.i(M)&65535;R[2*O+2*M]+=C*ae,he(R,2*O+2*M),R[2*O+2*M+1]+=j*ae,he(R,2*O+2*M+1),R[2*O+2*M+1]+=C*bt,he(R,2*O+2*M+1),R[2*O+2*M+2]+=j*bt,he(R,2*O+2*M+2)}for(O=0;O<S;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=S;O<2*S;O++)R[O]=0;return new d(R,0)};function he(D,S){for(;(D[S]&65535)!=D[S];)D[S+1]+=D[S]>>>16,D[S]&=65535,S++}function le(D,S){this.g=D,this.h=S}function de(D,S){if(G(S))throw Error("division by zero");if(G(D))return new le(w,w);if(B(D))return S=de(Q(D),S),new le(Q(S.g),Q(S.h));if(B(S))return S=de(D,Q(S)),new le(Q(S.g),S.h);if(30<D.g.length){if(B(D)||B(S))throw Error("slowDivide_ only works with positive integers.");for(var R=x,O=S;0>=O.l(D);)R=Y(R),O=Y(O);var M=Z(R,1),j=Z(O,1);for(O=Z(O,2),R=Z(R,2);!G(O);){var C=j.add(O);0>=C.l(D)&&(M=M.add(R),j=C),O=Z(O,1),R=Z(R,1)}return S=ue(D,M.j(S)),new le(M,S)}for(M=w;0<=D.l(S);){for(R=Math.max(1,Math.floor(D.m()/S.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=y(R),C=j.j(S);B(C)||0<C.l(D);)R-=O,j=y(R),C=j.j(S);G(j)&&(j=x),M=M.add(j),D=ue(D,C)}return new le(M,D)}r.A=function(D){return de(this,D).h},r.and=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)&D.i(O);return new d(R,this.h&D.h)},r.or=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)|D.i(O);return new d(R,this.h|D.h)},r.xor=function(D){for(var S=Math.max(this.g.length,D.g.length),R=[],O=0;O<S;O++)R[O]=this.i(O)^D.i(O);return new d(R,this.h^D.h)};function Y(D){for(var S=D.g.length+1,R=[],O=0;O<S;O++)R[O]=D.i(O)<<1|D.i(O-1)>>>31;return new d(R,D.h)}function Z(D,S){var R=S>>5;S%=32;for(var O=D.g.length-R,M=[],j=0;j<O;j++)M[j]=0<S?D.i(j+R)>>>S|D.i(j+R+1)<<32-S:D.i(j+R);return new d(M,D.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,N0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=E,Mr=d}).apply(typeof Xv<"u"?Xv:typeof self<"u"?self:typeof window<"u"?window:{});var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var D0,El,O0,Oc,tm,k0,V0,M0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sc=="object"&&Sc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in _))break e;_=_[L]}c=c[c.length-1],A=_[c],g=g(A),g!=A&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,A=!1,L={next:function(){if(!A&&_<c.length){var K=_++;return{value:g(K,c[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function E(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(g,L)}}return function(){return c.apply(g,arguments)}}function x(c,g,_){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:w,x.apply(null,arguments)}function V(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function G(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,L,K){for(var re=Array(arguments.length-2),je=2;je<arguments.length;je++)re[je-2]=arguments[je];return g.prototype[L].apply(A,re)}}function B(c){const g=c.length;if(0<g){const _=Array(g);for(let A=0;A<g;A++)_[A]=c[A];return _}return[]}function Q(c,g){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const L=c.length||0,K=A.length||0;c.length=L+K;for(let re=0;re<K;re++)c[L+re]=A[re]}else c.push(A)}}class ue{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function he(c){return/^[\s\xa0]*$/.test(c)}function le(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function de(c){return de[" "](c),c}de[" "]=function(){};var Y=le().indexOf("Gecko")!=-1&&!(le().toLowerCase().indexOf("webkit")!=-1&&le().indexOf("Edge")==-1)&&!(le().indexOf("Trident")!=-1||le().indexOf("MSIE")!=-1)&&le().indexOf("Edge")==-1;function Z(c,g,_){for(const A in c)g.call(_,c[A],A,c)}function D(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function S(c){const g={};for(const _ in c)g[_]=c[_];return g}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,g){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)c[_]=A[_];for(let K=0;K<R.length;K++)_=R[K],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function M(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function j(c){m.setTimeout(()=>{throw c},0)}function C(){var c=Ce;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class bt{constructor(){this.h=this.g=null}add(g,_){const A=ae.get();A.set(g,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ae=new ue(()=>new U,c=>c.reset());class U{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,oe=!1,Ce=new bt,N=()=>{const c=m.Promise.resolve(void 0);ne=()=>{c.then(W)}};var W=()=>{for(var c;c=C();){try{c.h.call(c.g)}catch(_){j(_)}var g=ae;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}oe=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c}();function Se(c,g){if(ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(Y){e:{try{de(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:_e[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Se.aa.h.call(this)}}G(Se,ie);var _e={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function ln(c,g,_,A,L){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!A,this.ha=L,this.key=++Qe,this.da=this.fa=!1}function Fn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vn(c){this.src=c,this.g={},this.h=0}Vn.prototype.add=function(c,g,_,A,L){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var re=gi(c,g,A,L);return-1<re?(g=c[re],_||(g.fa=!1)):(g=new ln(g,this.src,K,!!A,L),g.fa=_,c.push(g)),g};function mi(c,g){var _=g.type;if(_ in c.g){var A=c.g[_],L=Array.prototype.indexOf.call(A,g,void 0),K;(K=0<=L)&&Array.prototype.splice.call(A,L,1),K&&(Fn(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function gi(c,g,_,A){for(var L=0;L<c.length;++L){var K=c[L];if(!K.da&&K.listener==g&&K.capture==!!_&&K.ha==A)return L}return-1}var pi="closure_lm_"+(1e6*Math.random()|0),Qr={};function tu(c,g,_,A,L){if(Array.isArray(g)){for(var K=0;K<g.length;K++)tu(c,g[K],_,A,L);return null}return _=nu(_),c&&c[ft]?c.K(g,_,y(A)?!!A.capture:!1,L):_n(c,g,_,!1,A,L)}function _n(c,g,_,A,L,K){if(!g)throw Error("Invalid event type");var re=y(L)?!!L.capture:!!L,je=Gs(c);if(je||(c[pi]=je=new Vn(c)),_=je.add(g,_,A,re,K),_.proxy)return _;if(A=Dh(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)ye||(L=re),L===void 0&&(L=!1),c.addEventListener(g.toString(),A,L);else if(c.attachEvent)c.attachEvent($r(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Dh(){function c(_){return g.call(c.src,c.listener,_)}const g=Oh;return c}function uo(c,g,_,A,L){if(Array.isArray(g))for(var K=0;K<g.length;K++)uo(c,g[K],_,A,L);else A=y(A)?!!A.capture:!!A,_=nu(_),c&&c[ft]?(c=c.i,g=String(g).toString(),g in c.g&&(K=c.g[g],_=gi(K,_,A,L),-1<_&&(Fn(K[_]),Array.prototype.splice.call(K,_,1),K.length==0&&(delete c.g[g],c.h--)))):c&&(c=Gs(c))&&(g=c.g[g.toString()],c=-1,g&&(c=gi(g,_,A,L)),(_=-1<c?g[c]:null)&&Hs(_))}function Hs(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ft])mi(g.i,c);else{var _=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(_,A,c.capture):g.detachEvent?g.detachEvent($r(_),A):g.addListener&&g.removeListener&&g.removeListener(A),(_=Gs(g))?(mi(_,c),_.h==0&&(_.src=null,g[pi]=null)):Fn(c)}}}function $r(c){return c in Qr?Qr[c]:Qr[c]="on"+c}function Oh(c,g){if(c.da)c=!0;else{g=new Se(g,this);var _=c.listener,A=c.ha||c.src;c.fa&&Hs(c),c=_.call(A,g)}return c}function Gs(c){return c=c[pi],c instanceof Vn?c:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function nu(c){return typeof c=="function"?c:(c[co]||(c[co]=function(g){return c.handleEvent(g)}),c[co])}function at(){se.call(this),this.i=new Vn(this),this.M=this,this.F=null}G(at,se),at.prototype[ft]=!0,at.prototype.removeEventListener=function(c,g,_,A){uo(this,c,g,_,A)};function Fe(c,g){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new ie(g,c);else if(g instanceof ie)g.target=g.target||c;else{var L=g;g=new ie(A,c),O(g,L)}if(L=!0,_)for(var K=_.length-1;0<=K;K--){var re=g.g=_[K];L=un(re,A,!0,g)&&L}if(re=g.g=c,L=un(re,A,!0,g)&&L,L=un(re,A,!1,g)&&L,_)for(K=0;K<_.length;K++)re=g.g=_[K],L=un(re,A,!1,g)&&L}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],A=0;A<_.length;A++)Fn(_[A]);delete c.g[g],c.h--}}this.F=null},at.prototype.K=function(c,g,_,A){return this.i.add(String(c),g,!1,_,A)},at.prototype.L=function(c,g,_,A){return this.i.add(String(c),g,!0,_,A)};function un(c,g,_,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,K=0;K<g.length;++K){var re=g[K];if(re&&!re.da&&re.capture==_){var je=re.listener,Tt=re.ha||re.src;re.fa&&mi(c.i,re),L=je.call(Tt,A)!==!1&&L}}return L&&!A.defaultPrevented}function Ht(c,g,_){if(typeof c=="function")_&&(c=x(c,_));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function iu(c){c.g=Ht(()=>{c.g=null,c.i&&(c.i=!1,iu(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class kh extends se{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:iu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(c){se.call(this),this.h=c,this.g={}}G(Xr,se);var Zr=[];function Jr(c){Z(c.g,function(g,_){this.g.hasOwnProperty(_)&&Hs(g)},c),c.g={}}Xr.prototype.N=function(){Xr.aa.N.call(this),Jr(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=m.JSON.stringify,Fs=m.JSON.parse,Wr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function ho(){}ho.prototype.h=null;function fo(c){return c.h||(c.h=c.i())}function mo(){}var yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){ie.call(this,"d")}G(vi,ie);function go(){ie.call(this,"c")}G(go,ie);var Kn={},po=null;function Ji(){return po=po||new at}Kn.La="serverreachability";function Ks(c){ie.call(this,Kn.La,c)}G(Ks,ie);function Wi(c){const g=Ji();Fe(g,new Ks(g))}Kn.STAT_EVENT="statevent";function ru(c,g){ie.call(this,Kn.STAT_EVENT,c),this.stat=g}G(ru,ie);function nt(c){const g=Ji();Fe(g,new ru(g,c))}Kn.Ma="timingevent";function Et(c,g){ie.call(this,Kn.Ma,c),this.size=g}G(Et,ie);function mt(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function yo(c,g,_,A,L,K){c.info(function(){if(c.g)if(K)for(var re="",je=K.split("&"),Tt=0;Tt<je.length;Tt++){var Ue=je[Tt].split("=");if(1<Ue.length){var Ct=Ue[0];Ue=Ue[1];var At=Ct.split("_");re=2<=At.length&&At[1]=="type"?re+(Ct+"="+Ue+"&"):re+(Ct+"=redacted&")}}else re=null;else re=K;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+_+`
`+re})}function Vh(c,g,_,A,L,K,re){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+_+`
`+K+" "+re})}function er(c,g,_,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+es(c,_)+(A?" "+A:"")})}function su(c,g){c.info(function(){return"TIMEOUT: "+g})}bn.prototype.info=function(){};function es(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var K=L[0];if(K!="noop"&&K!="stop"&&K!="close")for(var re=1;re<L.length;re++)L[re]=""}}}}return Mn(_)}catch{return g}}var tr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_i={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Yn;function Qn(){}G(Qn,ho),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},Yn=new Qn;function Xt(c,g,_,A){this.j=c,this.i=g,this.l=_,this.R=A||1,this.U=new Xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ut}function ut(){this.i=null,this.g="",this.h=!1}var vo={},Ys={};function Pn(c,g,_){c.L=1,c.v=ss(cn(g)),c.m=_,c.P=!0,bi(c,null)}function bi(c,g){c.F=Date.now(),ts(c),c.A=cn(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),wo(_.i,"t",A),c.C=0,_=c.j.J,c.h=new ut,c.g=Eu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new kh(x(c.Y,c,c.g),c.O)),g=c.U,_=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Zr[0]=L.toString()),L=Zr);for(var K=0;K<L.length;K++){var re=tu(_,L[K],A||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Wi(),yo(c.i,c.u,c.A,c.l,c.R,c.m)}Xt.prototype.ca=function(c){c=c.target;const g=this.M;g&&wn(c)==3?g.j():this.Y(c)},Xt.prototype.Y=function(c){try{if(c==this.g)e:{const At=wn(this.g);var g=this.g.Ba();const Ii=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||fu(this.g)))){this.J||At!=4||g==7||(g==8||0>=Ii?Wi(3):Wi(2)),nr(this);var _=this.g.Z();this.X=_;t:if(au(this)){var A=fu(this.g);c="";var L=A.length,K=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mt(this),$n(this);var re="";break t}this.h.i=new m.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,c+=this.h.i.decode(A[g],{stream:!(K&&g==L-1)});A.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=_==200,Vh(this.i,this.u,this.A,this.l,this.R,At,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Tt=this.g;if((je=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!he(je)){var Ue=je;break t}}Ue=null}if(_=Ue)er(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ns(this,_);else{this.o=!1,this.s=3,nt(12),Mt(this),$n(this);break e}}if(this.P){_=!0;let Pt;for(;!this.J&&this.C<re.length;)if(Pt=ou(this,re),Pt==Ys){At==4&&(this.s=4,nt(14),_=!1),er(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==vo){this.s=4,nt(15),er(this.i,this.l,re,"[Invalid Chunk]"),_=!1;break}else er(this.i,this.l,Pt,null),ns(this,Pt);if(au(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||re.length!=0||this.h.h||(this.s=1,nt(16),_=!1),this.o=this.o&&_,!_)er(this.i,this.l,re,"[Invalid Chunked Response]"),Mt(this),$n(this);else if(0<re.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),fs(Ct),Ct.M=!0,nt(11))}}else er(this.i,this.l,re,null),ns(this,re);At==4&&Mt(this),this.o&&!this.J&&(At==4?vu(this.j,this):(this.o=!1,ts(this)))}else Lh(this.g),_==400&&0<re.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),Mt(this),$n(this)}}}catch{}finally{}};function au(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ou(c,g){var _=c.C,A=g.indexOf(`
`,_);return A==-1?Ys:(_=Number(g.substring(_,A)),isNaN(_)?vo:(A+=1,A+_>g.length?Ys:(g=g.slice(A,A+_),c.C=A+_,g)))}Xt.prototype.cancel=function(){this.J=!0,Mt(this)};function ts(c){c.S=Date.now()+c.I,lu(c,c.I)}function lu(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=mt(x(c.ba,c),g)}function nr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}Xt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(su(this.i,this.A),this.L!=2&&(Wi(),nt(17)),Mt(this),this.s=2,$n(this)):lu(this,this.S-c)};function $n(c){c.j.G==0||c.J||vu(c.j,c)}function Mt(c){nr(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Jr(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function ns(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||_o(_.h,c))){if(!c.K&&_o(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)sa(_),ia(_);else break e;Co(_),nt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=mt(x(_.Za,_),6e3));if(1>=$s(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ri(_,11)}else if((c.K||_.g==c)&&sa(_),!he(g))for(L=_.Da.g.parse(g),g=0;g<L.length;g++){let Ue=L[g];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const Ct=Ue[3];Ct!=null&&(_.la=Ct,_.j.info("VER="+_.la));const At=Ue[4];At!=null&&(_.Aa=At,_.j.info("SVER="+_.Aa));const Ii=Ue[5];Ii!=null&&typeof Ii=="number"&&0<Ii&&(A=1.5*Ii,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Pt=c.g;if(Pt){const ni=Pt.g?Pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var K=A.h;K.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Xs(K,K.h),K.h=null))}if(A.D){const Do=Pt.g?Pt.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(A.ya=Do,$e(A.I,A.D,Do))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var re=c;if(A.qa=bu(A,A.J?A.ia:null,A.W),re.K){Zt(A.h,re);var je=re,Tt=A.L;Tt&&(je.I=Tt),je.B&&(nr(je),ts(je)),A.g=re}else pu(A);0<_.i.length&&ra(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Ri(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Ri(_,7):Ro(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}Wi(4)}catch{}}var uu=class{constructor(c,g){this.g=c,this.map=g}};function Ei(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qs(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function $s(c){return c.h?1:c.g?c.g.size:0}function _o(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Xs(c,g){c.g?c.g.add(g):c.h=g}function Zt(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Ei.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function bo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return B(c.i)}function Mh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],_=c.length,A=0;A<_;A++)g.push(c[A]);return g}g=[],_=0;for(A in c)g[_++]=c[A];return g}function Zs(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const A in c)g[_++]=A;return g}}}function Eo(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=Zs(c),A=Mh(c),L=A.length,K=0;K<L;K++)g.call(void 0,A[K],_&&_[K],c)}var is=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ph(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),L=null;if(0<=A){var K=c[_].substring(0,A);L=c[_].substring(A+1)}else K=c[_];g(K,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function gt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof gt){this.h=c.h,rs(this,c.j),this.o=c.o,this.g=c.g,ir(this,c.s),this.l=c.l;var g=c.i,_=new Ai;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Ti(this,_),this.m=c.m}else c&&(g=String(c).match(is))?(this.h=!1,rs(this,g[1]||"",!0),this.o=En(g[2]||""),this.g=En(g[3]||"",!0),ir(this,g[4]),this.l=En(g[5]||"",!0),Ti(this,g[6]||"",!0),this.m=En(g[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}gt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(as(g,To,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(as(g,To,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(as(_,_.charAt(0)=="/"?jh:Ao,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",as(_,Js)),c.join("")};function cn(c){return new gt(c)}function rs(c,g,_){c.j=_?En(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ir(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Ti(c,g,_){g instanceof Ai?(c.i=g,hu(c.i,c.h)):(_||(g=as(g,Uh)),c.i=new Ai(g,c.h))}function $e(c,g,_){c.i.set(g,_)}function ss(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function En(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function as(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,cu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function cu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var To=/[#\/\?@]/g,Ao=/[#\?:]/g,jh=/[#\?]/g,Uh=/[#\?@]/g,Js=/#/g;function Ai(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Tn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ph(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Ai.prototype,r.add=function(c,g){Tn(this),this.i=null,c=Xn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function wi(c,g){Tn(c),g=Xn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Si(c,g){return Tn(c),g=Xn(c,g),c.g.has(g)}r.forEach=function(c,g){Tn(this),this.g.forEach(function(_,A){_.forEach(function(L){c.call(g,L,A,this)},this)},this)},r.na=function(){Tn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let A=0;A<g.length;A++){const L=c[A];for(let K=0;K<L.length;K++)_.push(g[A])}return _},r.V=function(c){Tn(this);let g=[];if(typeof c=="string")Si(this,c)&&(g=g.concat(this.g.get(Xn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},r.set=function(c,g){return Tn(this),this.i=null,c=Xn(this,c),Si(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function wo(c,g,_){wi(c,g),0<_.length&&(c.i=null,c.g.set(Xn(c,g),B(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var A=g[_];const K=encodeURIComponent(String(A)),re=this.V(A);for(A=0;A<re.length;A++){var L=K;re[A]!==""&&(L+="="+encodeURIComponent(String(re[A]))),c.push(L)}}return this.i=c.join("&")};function Xn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function hu(c,g){g&&!c.j&&(Tn(c),c.i=null,c.g.forEach(function(_,A){var L=A.toLowerCase();A!=L&&(wi(this,A),wo(this,L,_))},c)),c.j=g}function os(c,g){const _=new bn;if(m.Image){const A=new Image;A.onload=V(An,_,"TestLoadImage: loaded",!0,g,A),A.onerror=V(An,_,"TestLoadImage: error",!1,g,A),A.onabort=V(An,_,"TestLoadImage: abort",!1,g,A),A.ontimeout=V(An,_,"TestLoadImage: timeout",!1,g,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function jn(c,g){const _=new bn,A=new AbortController,L=setTimeout(()=>{A.abort(),An(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then(K=>{clearTimeout(L),K.ok?An(_,"TestPingServer: ok",!0,g):An(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),An(_,"TestPingServer: error",!1,g)})}function An(c,g,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function ls(){this.g=new Wr}function Zn(c,g,_){const A=_||"";try{Eo(c,function(L,K){let re=L;y(L)&&(re=Mn(L)),g.push(A+K+"="+encodeURIComponent(re))})}catch(L){throw g.push(A+"type="+encodeURIComponent("_badmap")),L}}function rr(c){this.l=c.Ub||null,this.j=c.eb||!1}G(rr,ho),rr.prototype.g=function(){return new xi(this.l,this.j)},rr.prototype.i=function(c){return function(){return c}}({});function xi(c,g){at.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(xi,at),r=xi.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Wn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;So(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function So(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Jn(this):Wn(this),this.readyState==3&&So(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Jn(this))},r.Qa=function(c){this.g&&(this.response=c,Jn(this))},r.ga=function(){this.g&&Jn(this)};function Jn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Wn(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Wn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xo(c){let g="";return Z(c,function(_,A){g+=A,g+=":",g+=_,g+=`\r
`}),g}function It(c,g,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=xo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):$e(c,g,_))}function He(c){at.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(He,at);var Ws=/^https?$/i,us=["POST","PUT"];r=He.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Yn.g(),this.v=this.o?fo(this.o):fo(Yn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){du(this,K);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())_.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(us,g,void 0))||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,re]of _)this.g.setRequestHeader(K,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cs(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){du(this,K)}};function du(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,ea(c),ei(c)}function ea(c){c.A||(c.A=!0,Fe(c,"complete"),Fe(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Fe(this,"complete"),Fe(this,"abort"),ei(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ei(this,!0)),He.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ta(this):this.bb())},r.bb=function(){ta(this)};function ta(c){if(c.h&&typeof d<"u"&&(!c.v[1]||wn(c)!=4||c.Z()!=2)){if(c.u&&wn(c)==4)Ht(c.Ea,0,c);else if(Fe(c,"readystatechange"),wn(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var A;if(A=re===0){var L=String(c.D).match(is)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),A=!Ws.test(L?L.toLowerCase():"")}_=A}if(_)Fe(c,"complete"),Fe(c,"success");else{c.m=6;try{var K=2<wn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",ea(c)}}finally{ei(c)}}}}function ei(c,g){if(c.g){cs(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Fe(c,"ready");try{_.onreadystatechange=A}catch{}}}function cs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function wn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Fs(g)}};function fu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Lh(c){const g={};c=(c.g&&2<=wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(he(c[A]))continue;var _=M(c[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=g[L]||[];g[L]=K,K.push(_)}D(g,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function na(c){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,c),this.cb=hs("retryDelaySeedMs",1e4,c),this.Wa=hs("forwardChannelMaxRetries",2,c),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ei(c&&c.concurrentRequestLimit),this.Da=new ls,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=na.prototype,r.la=8,r.G=1,r.connect=function(c,g,_,A){nt(0),this.W=c,this.H=g||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=bu(this,null,this.W),ra(this)};function Ro(c){if(mu(c),c.G==3){var g=c.U++,_=cn(c.I);if($e(_,"SID",c.K),$e(_,"RID",g),$e(_,"TYPE","terminate"),ds(c,_),g=new Xt(c,c.j,g),g.L=2,g.v=ss(cn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=Eu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ts(g)}_u(c)}function ia(c){c.g&&(fs(c),c.g.cancel(),c.g=null)}function mu(c){ia(c),c.u&&(m.clearTimeout(c.u),c.u=null),sa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function ra(c){if(!Qs(c.h)&&!c.s){c.s=!0;var g=c.Ga;ne||N(),oe||(ne(),oe=!0),Ce.add(g,c),c.B=0}}function zh(c,g){return $s(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=mt(x(c.Ga,c,g),No(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Xt(this,this.j,c);let K=this.o;if(this.S&&(K?(K=S(K),O(K,this.S)):K=this.S),this.m!==null||this.O||(L.H=K,K=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=gu(this,L,g),_=cn(this.I),$e(_,"RID",c),$e(_,"CVER",22),this.D&&$e(_,"X-HTTP-Session-Id",this.D),ds(this,_),K&&(this.O?g="headers="+encodeURIComponent(String(xo(K)))+"&"+g:this.m&&It(_,this.m,K)),Xs(this.h,L),this.Ua&&$e(_,"TYPE","init"),this.P?($e(_,"$req",g),$e(_,"SID","null"),L.T=!0,Pn(L,_,null)):Pn(L,_,g),this.G=2}}else this.G==3&&(c?Io(this,c):this.i.length==0||Qs(this.h)||Io(this))};function Io(c,g){var _;g?_=g.l:_=c.U++;const A=cn(c.I);$e(A,"SID",c.K),$e(A,"RID",_),$e(A,"AID",c.T),ds(c,A),c.m&&c.o&&It(A,c.m,c.o),_=new Xt(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=gu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Xs(c.h,_),Pn(_,A,g)}function ds(c,g){c.H&&Z(c.H,function(_,A){$e(g,A,_)}),c.l&&Eo({},function(_,A){$e(g,A,_)})}function gu(c,g,_){_=Math.min(c.i.length,_);var A=c.l?x(c.l.Na,c.l,c):null;e:{var L=c.i;let K=-1;for(;;){const re=["count="+_];K==-1?0<_?(K=L[0].g,re.push("ofs="+K)):K=0:re.push("ofs="+K);let je=!0;for(let Tt=0;Tt<_;Tt++){let Ue=L[Tt].g;const Ct=L[Tt].map;if(Ue-=K,0>Ue)K=Math.max(0,L[Tt].g-100),je=!1;else try{Zn(Ct,re,"req"+Ue+"_")}catch{A&&A(Ct)}}if(je){A=re.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,A}function pu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ne||N(),oe||(ne(),oe=!0),Ce.add(g,c),c.v=0}}function Co(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=mt(x(c.Fa,c),No(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,yu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=mt(x(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),ia(this),yu(this))};function fs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function yu(c){c.g=new Xt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=cn(c.qa);$e(g,"RID","rpc"),$e(g,"SID",c.K),$e(g,"AID",c.T),$e(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(g,"TO",c.ja),$e(g,"TYPE","xmlhttp"),ds(c,g),c.m&&c.o&&It(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=ss(cn(g)),_.m=null,_.P=!0,bi(_,c)}r.Za=function(){this.C!=null&&(this.C=null,ia(this),Co(this),nt(19))};function sa(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function vu(c,g){var _=null;if(c.g==g){sa(c),fs(c),c.g=null;var A=2}else if(_o(c.h,g))_=g.D,Zt(c.h,g),A=1;else return;if(c.G!=0){if(g.o)if(A==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var L=c.B;A=Ji(),Fe(A,new Et(A,_)),ra(c)}else pu(c);else if(L=g.s,L==3||L==0&&0<g.X||!(A==1&&zh(c,g)||A==2&&Co(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),L){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function No(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Ri(c,g){if(c.j.info("Error code "+g),g==2){var _=x(c.fb,c),A=c.Xa;const L=!A;A=new gt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||rs(A,"https"),ss(A),L?os(A.toString(),_):jn(A.toString(),_)}else nt(2);c.G=0,c.l&&c.l.sa(g),_u(c),mu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function _u(c){if(c.G=0,c.ka=[],c.l){const g=bo(c.h);(g.length!=0||c.i.length!=0)&&(Q(c.ka,g),Q(c.ka,c.i),c.h.i.length=0,B(c.i),c.i.length=0),c.l.ra()}}function bu(c,g,_){var A=_ instanceof gt?cn(_):new gt(_);if(A.g!="")g&&(A.g=g+"."+A.g),ir(A,A.s);else{var L=m.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var K=new gt(null);A&&rs(K,A),g&&(K.g=g),L&&ir(K,L),_&&(K.l=_),A=K}return _=c.D,g=c.ya,_&&g&&$e(A,_,g),$e(A,"VER",c.la),ds(c,A),A}function Eu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new He(new rr({eb:_})):new He(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}r=Tu.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function aa(){}aa.prototype.g=function(c,g){return new Jt(c,g)};function Jt(c,g){at.call(this),this.g=new na(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!he(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!he(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ti(this)}G(Jt,at),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Ro(this.g)},Jt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Mn(c),c=_);g.i.push(new uu(g.Ya++,c)),g.G==3&&ra(g)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Ro(this.g),delete this.g,Jt.aa.N.call(this)};function Au(c){vi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}G(Au,vi);function wu(){go.call(this),this.status=1}G(wu,go);function ti(c){this.g=c}G(ti,Tu),ti.prototype.ua=function(){Fe(this.g,"a")},ti.prototype.ta=function(c){Fe(this.g,new Au(c))},ti.prototype.sa=function(c){Fe(this.g,new wu)},ti.prototype.ra=function(){Fe(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,M0=function(){return new aa},V0=function(){return Ji()},k0=Kn,tm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tr.NO_ERROR=0,tr.TIMEOUT=8,tr.HTTP_ERROR=6,Oc=tr,_i.COMPLETE="complete",O0=_i,mo.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",at.prototype.listen=at.prototype.K,El=mo,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,D0=He}).apply(typeof Sc<"u"?Sc:typeof self<"u"?self:typeof window<"u"?window:{});const Zv="@firebase/firestore",Jv="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new Sm("@firebase/firestore");function Ma(){return ks.logLevel}function ce(r,...e){if(ks.logLevel<=Me.DEBUG){const n=e.map(Im);ks.debug(`Firestore (${io}): ${r}`,...n)}}function Qi(r,...e){if(ks.logLevel<=Me.ERROR){const n=e.map(Im);ks.error(`Firestore (${io}): ${r}`,...n)}}function Ya(r,...e){if(ks.logLevel<=Me.WARN){const n=e.map(Im);ks.warn(`Firestore (${io}): ${r}`,...n)}}function Im(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,P0(r,s,n)}function P0(r,e,n){let s=`FIRESTORE (${io}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Qi(s),new Error(s)}function Ge(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||P0(e,o,s)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class _S{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class bS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ES{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gi,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gi)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ge(typeof s.accessToken=="string",31837,{l:s}),new j0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class TS{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class AS{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new TS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const s=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=SS(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function De(r,e){return r<e?-1:r>e?1:0}function nm(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return De(s,o);{const u=U0(),d=xS(u.encode(e_(r,n)),u.encode(e_(e,n)));return d!==0?d:De(s,o)}}n+=s>65535?2:1}return De(r.length,e.length)}function e_(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function xS(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return De(r[n],e[n]);return De(r.length,e.length)}function Qa(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=-62135596800,n_=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*n_);return new xt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<t_)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/n_}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-t_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new xt(0,0))}static max(){return new xe(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="__name__";class li{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return li.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof li?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=li.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return De(e.length,n.length)}static compareSegments(e,n){const s=li.isNumericId(e),o=li.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?li.extractNumericId(e).compare(li.extractNumericId(n)):nm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Mr.fromString(e.substring(4,e.length-2))}}class tt extends li{construct(e,n,s){return new tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const RS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends li{construct(e,n,s){return new Bt(e,n,s)}static isValidIdentifier(e){return RS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i_}static keyField(){return new Bt([i_])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new fe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new fe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(tt.fromString(e))}static fromName(e){return new ve(tt.fromString(e).popFirst(5))}static empty(){return new ve(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;function IS(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new xt(n+1,0):new xt(n,s));return new jr(o,ve.empty(),e)}function CS(r){return new jr(r.readTime,r.key,kl)}class jr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new jr(xe.min(),ve.empty(),kl)}static max(){return new jr(xe.max(),ve.empty(),kl)}}function NS(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(r.documentKey,e.documentKey),n!==0?n:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==DS)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,s)=>{n(e)})}static reject(e){return new ee((n,s)=>{s(e)})}static waitFor(e){return new ee((n,s)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&n()},p=>s(p))}),d=!0,u===o&&n()})}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next(o=>o?ee.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ee((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next(E=>{d[y]=E,++m,m===u&&s(d)},E=>o(E))}})}static doWhile(e,n){return new ee((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function kS(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function so(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}lh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm=-1;function uh(r){return r==null}function Gc(r){return r===0&&1/r==-1/0}function VS(r){return typeof r=="number"&&Number.isInteger(r)&&!Gc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="";function MS(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=r_(e)),e=PS(r.get(n),e);return r_(e)}function PS(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case z0:n+="";break;default:n+=u}}return n}function r_(r){return r+z0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Gr(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function B0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xc(this.root,e,this.comparator,!0)}}class xc{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??zt.RED,this.left=o??zt.EMPTY,this.right=u??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new zt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return zt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new a_(this.data.getIterator())}getIteratorFrom(e){return new a_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class a_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new vn([])}unionWith(e){let n=new Rt(Bt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new q0("Invalid base64 string: "+u):u}}(e);return new qt(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const jS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(r){if(Ge(!!r,39018),typeof r=="string"){let e=0;const n=jS.exec(r);if(Ge(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(r.seconds),nanos:dt(r.nanos)}}function dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Lr(r){return typeof r=="string"?qt.fromBase64String(r):qt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="server_timestamp",G0="__type__",F0="__previous_value__",K0="__local_write_time__";function Nm(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[G0])===null||n===void 0?void 0:n.stringValue)===H0}function ch(r){const e=r.mapValue.fields[F0];return Nm(e)?ch(e):e}function Vl(r){const e=Ur(r.mapValue.fields[K0].timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,n,s,o,u,d,m,p,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const Fc="(default)";class Ml{constructor(e,n){this.projectId=e,this.database=n||Fc}static empty(){return new Ml("","")}get isDefaultDatabase(){return this.database===Fc}isEqual(e){return e instanceof Ml&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="__type__",LS="__max__",Rc={mapValue:{}},Q0="__vector__",Kc="value";function zr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Nm(r)?4:BS(r)?9007199254740991:zS(r)?10:11:Ae(28295,{value:r})}function fi(r,e){if(r===e)return!0;const n=zr(r);if(n!==zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Vl(r).isEqual(Vl(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ur(o.timestampValue),m=Ur(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Lr(o.bytesValue).isEqual(Lr(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return dt(o.geoPointValue.latitude)===dt(u.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return dt(o.integerValue)===dt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=dt(o.doubleValue),m=dt(u.doubleValue);return d===m?Gc(d)===Gc(m):isNaN(d)&&isNaN(m)}return!1}(r,e);case 9:return Qa(r.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(s_(d)!==s_(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!fi(d[p],m[p])))return!1;return!0}(r,e);default:return Ae(52216,{left:r})}}function Pl(r,e){return(r.values||[]).find(n=>fi(n,e))!==void 0}function $a(r,e){if(r===e)return 0;const n=zr(r),s=zr(e);if(n!==s)return De(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return function(u,d){const m=dt(u.integerValue||u.doubleValue),p=dt(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return o_(r.timestampValue,e.timestampValue);case 4:return o_(Vl(r),Vl(e));case 5:return nm(r.stringValue,e.stringValue);case 6:return function(u,d){const m=Lr(u),p=Lr(d);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),p=d.split("/");for(let y=0;y<m.length&&y<p.length;y++){const E=De(m[y],p[y]);if(E!==0)return E}return De(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,d){const m=De(dt(u.latitude),dt(d.latitude));return m!==0?m:De(dt(u.longitude),dt(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return l_(r.arrayValue,e.arrayValue);case 10:return function(u,d){var m,p,y,E;const w=u.fields||{},x=d.fields||{},V=(m=w[Kc])===null||m===void 0?void 0:m.arrayValue,G=(p=x[Kc])===null||p===void 0?void 0:p.arrayValue,B=De(((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0,((E=G==null?void 0:G.values)===null||E===void 0?void 0:E.length)||0);return B!==0?B:l_(V,G)}(r.mapValue,e.mapValue);case 11:return function(u,d){if(u===Rc.mapValue&&d===Rc.mapValue)return 0;if(u===Rc.mapValue)return 1;if(d===Rc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=d.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let w=0;w<p.length&&w<E.length;++w){const x=nm(p[w],E[w]);if(x!==0)return x;const V=$a(m[p[w]],y[E[w]]);if(V!==0)return V}return De(p.length,E.length)}(r.mapValue,e.mapValue);default:throw Ae(23264,{Pe:n})}}function o_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const n=Ur(r),s=Ur(e),o=De(n.seconds,s.seconds);return o!==0?o:De(n.nanos,s.nanos)}function l_(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=$a(n[o],s[o]);if(u)return u}return De(n.length,s.length)}function Xa(r){return im(r)}function im(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Ur(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Lr(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return ve.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=im(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${im(n.fields[d])}`;return o+"}"}(r.mapValue):Ae(61005,{value:r})}function kc(r){switch(zr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ch(r);return e?16+kc(e):16;case 5:return 2*r.stringValue.length;case 6:return Lr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+kc(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Gr(s.fields,(u,d)=>{o+=u.length+kc(d)}),o}(r.mapValue);default:throw Ae(13486,{value:r})}}function u_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function rm(r){return!!r&&"integerValue"in r}function Dm(r){return!!r&&"arrayValue"in r}function c_(r){return!!r&&"nullValue"in r}function h_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Vc(r){return!!r&&"mapValue"in r}function zS(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Y0])===null||n===void 0?void 0:n.stringValue)===Q0}function Rl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Gr(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Rl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Rl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function BS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===LS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.value=e}static empty(){return new on({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rl(n)}setAll(e){let n=Bt.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=Rl(d):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Vc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Gr(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new on(Rl(this.value))}}function $0(r){const e=[];return Gr(r.fields,(n,s)=>{const o=new Bt([n]);if(Vc(s)){const u=$0(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Qt(e,0,xe.min(),xe.min(),xe.min(),on.empty(),0)}static newFoundDocument(e,n,s,o){return new Qt(e,1,n,xe.min(),s,o,0)}static newNoDocument(e,n){return new Qt(e,2,n,xe.min(),xe.min(),on.empty(),0)}static newUnknownDocument(e,n){return new Qt(e,3,n,xe.min(),xe.min(),on.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=on.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=on.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n){this.position=e,this.inclusive=n}}function d_(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],d=r.position[o];if(u.field.isKeyField()?s=ve.comparator(ve.fromName(d.referenceValue),n.key):s=$a(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function f_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!fi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,n="asc"){this.field=e,this.dir=n}}function qS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{}class _t extends X0{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new GS(e,n,s):n==="array-contains"?new YS(e,s):n==="in"?new QS(e,s):n==="not-in"?new $S(e,s):n==="array-contains-any"?new XS(e,s):new _t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new FS(e,s):new KS(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($a(n,this.value)):n!==null&&zr(this.value)===zr(n)&&this.matchesComparison($a(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends X0{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new qn(e,n)}matches(e){return Z0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Z0(r){return r.op==="and"}function J0(r){return HS(r)&&Z0(r)}function HS(r){for(const e of r.filters)if(e instanceof qn)return!1;return!0}function sm(r){if(r instanceof _t)return r.field.canonicalString()+r.op.toString()+Xa(r.value);if(J0(r))return r.filters.map(e=>sm(e)).join(",");{const e=r.filters.map(n=>sm(n)).join(",");return`${r.op}(${e})`}}function W0(r,e){return r instanceof _t?function(s,o){return o instanceof _t&&s.op===o.op&&s.field.isEqual(o.field)&&fi(s.value,o.value)}(r,e):r instanceof qn?function(s,o){return o instanceof qn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,d,m)=>u&&W0(d,o.filters[m]),!0):!1}(r,e):void Ae(19439)}function eb(r){return r instanceof _t?function(n){return`${n.field.canonicalString()} ${n.op} ${Xa(n.value)}`}(r):r instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(eb).join(" ,")+"}"}(r):"Filter"}class GS extends _t{constructor(e,n,s){super(e,n,s),this.key=ve.fromName(s.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class FS extends _t{constructor(e,n){super(e,"in",n),this.keys=tb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class KS extends _t{constructor(e,n){super(e,"not-in",n),this.keys=tb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tb(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ve.fromName(s.referenceValue))}class YS extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dm(n)&&Pl(n.arrayValue,this.value)}}class QS extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pl(this.value.arrayValue,n)}}class $S extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pl(this.value.arrayValue,n)}}class XS extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Pl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Ie=null}}function m_(r,e=null,n=[],s=[],o=null,u=null,d=null){return new ZS(r,e,n,s,o,u,d)}function Om(r){const e=Re(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>sm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),uh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Xa(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Xa(s)).join(",")),e.Ie=n}return e.Ie}function km(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!qS(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!W0(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!f_(r.startAt,e.startAt)&&f_(r.endAt,e.endAt)}function am(r){return ve.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function JS(r,e,n,s,o,u,d,m){return new Gl(r,e,n,s,o,u,d,m)}function Vm(r){return new Gl(r)}function g_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function nb(r){return r.collectionGroup!==null}function Il(r){const e=Re(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Rt(Bt.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Qc(u,s))}),n.has(Bt.keyField().canonicalString())||e.Ee.push(new Qc(Bt.keyField(),s))}return e.Ee}function ui(r){const e=Re(r);return e.de||(e.de=WS(e,Il(r))),e.de}function WS(r,e){if(r.limitType==="F")return m_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Qc(o.field,u)});const n=r.endAt?new Yc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Yc(r.startAt.position,r.startAt.inclusive):null;return m_(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function om(r,e){const n=r.filters.concat([e]);return new Gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function lm(r,e,n){return new Gl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function hh(r,e){return km(ui(r),ui(e))&&r.limitType===e.limitType}function ib(r){return`${Om(ui(r))}|lt:${r.limitType}`}function Pa(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>eb(o)).join(", ")}]`),uh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Xa(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Xa(o)).join(",")),`Target(${s})`}(ui(r))}; limitType=${r.limitType})`}function dh(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ve.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of Il(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,m,p){const y=d_(d,m,p);return d.inclusive?y<=0:y<0}(s.startAt,Il(s),o)||s.endAt&&!function(d,m,p){const y=d_(d,m,p);return d.inclusive?y>=0:y>0}(s.endAt,Il(s),o))}(r,e)}function ex(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function rb(r){return(e,n)=>{let s=!1;for(const o of Il(r)){const u=tx(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function tx(r,e,n){const s=r.field.isKeyField()?ve.comparator(e.key,n.key):function(u,d,m){const p=d.data.field(u),y=m.data.field(u);return p!==null&&y!==null?$a(p,y):Ae(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return B0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new st(ve.comparator);function $i(){return nx}const sb=new st(ve.comparator);function Tl(...r){let e=sb;for(const n of r)e=e.insert(n.key,n);return e}function ab(r){let e=sb;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Ns(){return Cl()}function ob(){return Cl()}function Cl(){return new Ls(r=>r.toString(),(r,e)=>r.isEqual(e))}const ix=new st(ve.comparator),rx=new Rt(ve.comparator);function Pe(...r){let e=rx;for(const n of r)e=e.add(n);return e}const sx=new Rt(De);function ax(){return sx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gc(e)?"-0":e}}function lb(r){return{integerValue:""+r}}function ox(r,e){return VS(e)?lb(e):Mm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this._=void 0}}function lx(r,e,n){return r instanceof jl?function(o,u){const d={fields:{[G0]:{stringValue:H0},[K0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Nm(u)&&(u=ch(u)),u&&(d.fields[F0]=u),{mapValue:d}}(n,e):r instanceof Ul?cb(r,e):r instanceof Ll?hb(r,e):function(o,u){const d=ub(o,u),m=p_(d)+p_(o.Re);return rm(d)&&rm(o.Re)?lb(m):Mm(o.serializer,m)}(r,e)}function ux(r,e,n){return r instanceof Ul?cb(r,e):r instanceof Ll?hb(r,e):n}function ub(r,e){return r instanceof $c?function(s){return rm(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class jl extends fh{}class Ul extends fh{constructor(e){super(),this.elements=e}}function cb(r,e){const n=db(e);for(const s of r.elements)n.some(o=>fi(o,s))||n.push(s);return{arrayValue:{values:n}}}class Ll extends fh{constructor(e){super(),this.elements=e}}function hb(r,e){let n=db(e);for(const s of r.elements)n=n.filter(o=>!fi(o,s));return{arrayValue:{values:n}}}class $c extends fh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function p_(r){return dt(r.integerValue||r.doubleValue)}function db(r){return Dm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n){this.field=e,this.transform=n}}function hx(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Ul&&o instanceof Ul||s instanceof Ll&&o instanceof Ll?Qa(s.elements,o.elements,fi):s instanceof $c&&o instanceof $c?fi(s.Re,o.Re):s instanceof jl&&o instanceof jl}(r.transform,e.transform)}class dx{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class mh{}function fb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Pm(r.key,kn.none()):new Fl(r.key,r.data,kn.none());{const n=r.data,s=on.empty();let o=new Rt(Bt.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new Fr(r.key,s,new vn(o.toArray()),kn.none())}}function fx(r,e,n){r instanceof Fl?function(o,u,d){const m=o.value.clone(),p=v_(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,n):r instanceof Fr?function(o,u,d){if(!Mc(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=v_(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(mb(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function Nl(r,e,n,s){return r instanceof Fl?function(u,d,m,p){if(!Mc(u.precondition,d))return m;const y=u.value.clone(),E=__(u.fieldTransforms,p,d);return y.setAll(E),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(r,e,n,s):r instanceof Fr?function(u,d,m,p){if(!Mc(u.precondition,d))return m;const y=__(u.fieldTransforms,p,d),E=d.data;return E.setAll(mb(u)),E.setAll(y),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(r,e,n,s):function(u,d,m){return Mc(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(r,e,n)}function mx(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=ub(s.transform,o||null);u!=null&&(n===null&&(n=on.empty()),n.set(s.field,u))}return n||null}function y_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Qa(s,o,(u,d)=>hx(u,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Fl extends mh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Fr extends mh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function mb(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function v_(r,e,n){const s=new Map;Ge(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const u=r[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,ux(d,m,n[o]))}return s}function __(r,e,n){const s=new Map;for(const o of r){const u=o.transform,d=n.data.field(o.field);s.set(o.field,lx(u,d,e))}return s}class Pm extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gx extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&fx(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Nl(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Nl(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ob();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=fb(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(xe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,(n,s)=>y_(n,s))&&Qa(this.baseMutations,e.baseMutations,(n,s)=>y_(n,s))}}class jm{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ge(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return ix}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new jm(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,ze;function _x(r){switch(r){case te.OK:return Ae(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function gb(r){if(r===void 0)return Qi("GRPC error has no .code"),te.UNKNOWN;switch(r){case vt.OK:return te.OK;case vt.CANCELLED:return te.CANCELLED;case vt.UNKNOWN:return te.UNKNOWN;case vt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case vt.INTERNAL:return te.INTERNAL;case vt.UNAVAILABLE:return te.UNAVAILABLE;case vt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case vt.NOT_FOUND:return te.NOT_FOUND;case vt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case vt.ABORTED:return te.ABORTED;case vt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case vt.DATA_LOSS:return te.DATA_LOSS;default:return Ae(39323,{code:r})}}(ze=vt||(vt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new Mr([4294967295,4294967295],0);function b_(r){const e=U0().encode(r),n=new N0;return n.update(e),new Uint8Array(n.digest())}function E_(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Mr([n,s],0),new Mr([o,u],0)]}class Um{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Al(`Invalid padding: ${n}`);if(s<0)throw new Al(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Al(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Al(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Mr.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(Mr.fromNumber(s)));return o.compare(bx)===1&&(o=new Mr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=b_(e),[s,o]=E_(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);if(!this.be(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Um(u,o,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const n=b_(e),[s,o]=E_(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Kl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new gh(xe.min(),o,new st(De),$i(),Pe())}}class Kl{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Kl(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class pb{constructor(e,n){this.targetId=e,this.Ce=n}}class yb{constructor(e,n,s=qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class T_{constructor(){this.Fe=0,this.Me=A_(),this.xe=qt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Pe(),n=Pe(),s=Pe();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:u})}}),new Kl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=A_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ge(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Ex{constructor(e){this.ze=e,this.je=new Map,this.He=$i(),this.Je=Ic(),this.Ye=Ic(),this.Ze=new st(De)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(am(u))if(s===0){const d=new ve(u.path);this.tt(n,d,Qt.newNoDocument(d,xe.min()))}else Ge(s===1,20013,{expectedCount:s});else{const d=this.ut(n);if(d!==s){const m=this.ct(e),p=m?this.lt(m,e,d):1;if(p!==0){this.st(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=Lr(s).toUint8Array()}catch(p){if(p instanceof q0)return Ya("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Um(d,o,u)}catch(p){return Ya(p instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,d)=>{const m=this._t(d);if(m){if(u.current&&am(m.target)){const p=new ve(m.target.path);this.Et(p).has(d)||this.dt(d,p)||this.tt(d,p,Qt.newNoDocument(p,e))}u.Le&&(n.set(d,u.qe()),u.Qe())}});let s=Pe();this.Ye.forEach((u,d)=>{let m=!0;d.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.He.forEach((u,d)=>d.setReadTime(e));const o=new gh(e,n,this.Ze,this.He,s);return this.He=$i(),this.Je=Ic(),this.Ye=Ic(),this.Ze=new st(De),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new T_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Rt(De),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Rt(De),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new T_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Ic(){return new st(ve.comparator)}function A_(){return new st(ve.comparator)}const Tx={asc:"ASCENDING",desc:"DESCENDING"},Ax={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wx={and:"AND",or:"OR"};class Sx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function um(r,e){return r.useProto3Json||uh(e)?e:{value:e}}function Xc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function xx(r,e){return Xc(r,e.toTimestamp())}function ci(r){return Ge(!!r,49232),xe.fromTimestamp(function(n){const s=Ur(n);return new xt(s.seconds,s.nanos)}(r))}function Lm(r,e){return cm(r,e).canonicalString()}function cm(r,e){const n=function(o){return new tt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function _b(r){const e=tt.fromString(r);return Ge(wb(e),10190,{key:e.toString()}),e}function hm(r,e){return Lm(r.databaseId,e.path)}function Hf(r,e){const n=_b(e);if(n.get(1)!==r.databaseId.projectId)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new fe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ve(Eb(n))}function bb(r,e){return Lm(r.databaseId,e)}function Rx(r){const e=_b(r);return e.length===4?tt.emptyPath():Eb(e)}function dm(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Eb(r){return Ge(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function w_(r,e,n){return{name:hm(r,e),fields:n.value.mapValue.fields}}function Ix(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,E){return y.useProto3Json?(Ge(E===void 0||typeof E=="string",58123),qt.fromBase64String(E||"")):(Ge(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),qt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(y){const E=y.code===void 0?te.UNKNOWN:gb(y.code);return new fe(E,y.message||"")}(d);n=new yb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Hf(r,s.document.name),u=ci(s.document.updateTime),d=s.document.createTime?ci(s.document.createTime):xe.min(),m=new on({mapValue:{fields:s.document.fields}}),p=Qt.newFoundDocument(o,u,d,m),y=s.targetIds||[],E=s.removedTargetIds||[];n=new Pc(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Hf(r,s.document),u=s.readTime?ci(s.readTime):xe.min(),d=Qt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new Pc([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Hf(r,s.document),u=s.removedTargetIds||[];n=new Pc([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new vx(o,u),m=s.targetId;n=new pb(m,d)}}return n}function Cx(r,e){let n;if(e instanceof Fl)n={update:w_(r,e.key,e.value)};else if(e instanceof Pm)n={delete:hm(r,e.key)};else if(e instanceof Fr)n={update:w_(r,e.key,e.data),updateMask:Ux(e.fieldMask)};else{if(!(e instanceof gx))return Ae(16599,{ft:e.type});n={verify:hm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const m=d.transform;if(m instanceof jl)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ul)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ll)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $c)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw Ae(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:xx(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)}(r,e.precondition)),n}function Nx(r,e){return r&&r.length>0?(Ge(e!==void 0,14353),r.map(n=>function(o,u){let d=o.updateTime?ci(o.updateTime):ci(u);return d.isEqual(xe.min())&&(d=ci(u)),new dx(d,o.transformResults||[])}(n,e))):[]}function Dx(r,e){return{documents:[bb(r,e.path)]}}function Ox(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=bb(r,o);const u=function(y){if(y.length!==0)return Ab(qn.create(y,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(y){if(y.length!==0)return y.map(E=>function(x){return{field:ja(x.field),direction:Mx(x.dir)}}(E))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=um(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:n,parent:o}}function kx(r){let e=Rx(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ge(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(w){const x=Tb(w);return x instanceof qn&&J0(x)?x.getFilters():[x]}(n.where));let d=[];n.orderBy&&(d=function(w){return w.map(x=>function(G){return new Qc(Ua(G.field),function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(x))}(n.orderBy));let m=null;n.limit&&(m=function(w){let x;return x=typeof w=="object"?w.value:w,uh(x)?null:x}(n.limit));let p=null;n.startAt&&(p=function(w){const x=!!w.before,V=w.values||[];return new Yc(V,x)}(n.startAt));let y=null;return n.endAt&&(y=function(w){const x=!w.before,V=w.values||[];return new Yc(V,x)}(n.endAt)),JS(e,o,d,u,m,"F",p,y)}function Vx(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Tb(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Ua(n.unaryFilter.field);return _t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Ua(n.unaryFilter.field);return _t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ua(n.unaryFilter.field);return _t.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ua(n.unaryFilter.field);return _t.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(r):r.fieldFilter!==void 0?function(n){return _t.create(Ua(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(s=>Tb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(n.compositeFilter.op))}(r):Ae(30097,{filter:r})}function Mx(r){return Tx[r]}function Px(r){return Ax[r]}function jx(r){return wx[r]}function ja(r){return{fieldPath:r.canonicalString()}}function Ua(r){return Bt.fromServerFormat(r.fieldPath)}function Ab(r){return r instanceof _t?function(n){if(n.op==="=="){if(h_(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NAN"}};if(c_(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(h_(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NAN"}};if(c_(n.value))return{unaryFilter:{field:ja(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(n.field),op:Px(n.op),value:n.value}}}(r):r instanceof qn?function(n){const s=n.getFilters().map(o=>Ab(o));return s.length===1?s[0]:{compositeFilter:{op:jx(n.op),filters:s}}}(r):Ae(54877,{filter:r})}function Ux(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,n,s,o,u=xe.min(),d=xe.min(),m=qt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Dr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.wt=e}}function zx(r){const e=kx({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?lm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.Cn=new qx}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(jr.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class qx{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Rt(tt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Rt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Sb=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(Sb,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Za(0)}static lr(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="LruGarbageCollector",Hx=1048576;function R_([r,e],[n,s]){const o=De(r,n);return o===0?De(e,s):o}class Gx{constructor(e){this.Er=e,this.buffer=new Rt(R_),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();R_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Fx{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ce(x_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){so(n)?ce(x_,"Ignoring IndexedDB error during garbage collection: ",n):await ro(n)}await this.mr(3e5)})}}class Kx{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(lh.le);const s=new Gx(n);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(S_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),S_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,o,u,d,m,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(e,s,n))).next(w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(y=Date.now(),Ma()<=Me.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function Yx(r,e){return new Kx(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.changes=new Ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Nl(s.mutation,o,vn.empty(),xt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Pe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Pe()){const o=Ns();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let d=Tl();return u.forEach((m,p)=>{d=d.insert(m,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=Ns();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Pe()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,o){let u=$i();const d=Cl(),m=function(){return Cl()}();return n.forEach((p,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Fr)?u=u.insert(y.key,y):E!==void 0?(d.set(y.key,E.mutation.getFieldMask()),Nl(E.mutation,y,E.mutation.getFieldMask(),xt.now())):d.set(y.key,vn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((y,E)=>d.set(y,E)),n.forEach((y,E)=>{var w;return m.set(y,new $x(E,(w=d.get(y))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Cl();let o=new st((d,m)=>d-m),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let E=s.get(p)||vn.empty();E=m.applyToLocalView(y,E),s.set(p,E);const w=(o.get(m.batchId)||Pe()).add(p);o=o.insert(m.batchId,w)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,E=p.value,w=ob();E.forEach(x=>{if(!u.has(x)){const V=fb(n.get(x),s.get(x));V!==null&&w.set(x,V),u=u.add(x)}}),d.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ee.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(d){return ve.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ee.resolve(Ns());let m=kl,p=u;return d.next(y=>ee.forEach(y,(E,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next(x=>{p=p.insert(E,x)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,p,y,Pe())).next(E=>({batchId:m,changes:ab(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(s=>{let o=Tl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=Tl();return this.indexManager.getCollectionParents(e,u).next(m=>ee.forEach(m,p=>{const y=function(w,x){return new Gl(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(E=>{E.forEach((w,x)=>{d=d.insert(w,x)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(d=>{u.forEach((p,y)=>{const E=y.getKey();d.get(E)===null&&(d=d.insert(E,Qt.newInvalidDocument(E)))});let m=Tl();return d.forEach((p,y)=>{const E=u.get(p);E!==void 0&&Nl(E.mutation,y,vn.empty(),xt.now()),dh(n,y)&&(m=m.insert(p,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ee.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ci(o.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:zx(o.bundledQuery),readTime:ci(o.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(){this.overlays=new st(ve.comparator),this.Qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Ns();return ee.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.St(e,n,u)}),ee.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const o=Ns(),u=n.length+1,d=new ve(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new st((y,E)=>y-E);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=Ns(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=Ns(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>m.set(y,E)),!(m.size()>=o)););return ee.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new yx(n,s));let u=this.Qr.get(n);u===void 0&&(u=Pe(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(){this.$r=new Rt(kt.Ur),this.Kr=new Rt(kt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new kt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new kt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new ve(new tt([])),s=new kt(n,e),o=new kt(n,e+1),u=[];return this.Kr.forEachInRange([s,o],d=>{this.zr(d),u.push(d.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ve(new tt([])),s=new kt(n,e),o=new kt(n,e+1);let u=Pe();return this.Kr.forEachInRange([s,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new kt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ve.comparator(e.key,n.key)||De(e.Zr,n.Zr)}static Wr(e,n){return De(e.Zr,n.Zr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Rt(kt.Ur)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new px(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Xr=this.Xr.add(new kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,n){return ee.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ti(s),u=o<0?0:o;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Cm:this.nr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new kt(n,0),o=new kt(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],d=>{const m=this.ei(d.Zr);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Rt(De);return n.forEach(o=>{const u=new kt(o,0),d=new kt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,d],m=>{s=s.add(m.Zr)})}),ee.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ve.isDocumentKey(u)||(u=u.child(""));const d=new kt(new ve(u),0);let m=new Rt(De);return this.Xr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Zr)),!0)},d),ee.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ge(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return ee.forEach(n.mutations,o=>{const u=new kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new kt(n,0),o=this.Xr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.ii=e,this.docs=function(){return new st(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():Qt.newInvalidDocument(n))}getEntries(e,n){let s=$i();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Qt.newInvalidDocument(o))}),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=$i();const d=n.path,m=new ve(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||NS(CS(E),s)<=0||(o.has(E.key)||dh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}si(e,n){return ee.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new n1(this)}getSize(e){return ee.resolve(this.size)}}class n1 extends Qx{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),ee.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.persistence=e,this.oi=new Ls(n=>Om(n),km),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this._i=0,this.ai=new zm,this.targetCount=0,this.ui=Za.cr()}forEachTarget(e,n){return this.oi.forEach((s,o)=>n(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),ee.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Za(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Tr(n),ee.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.oi.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ee.waitFor(u).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.ci={},this.overlays={},this.li=new lh(0),this.hi=!1,this.hi=!0,this.Pi=new Wx,this.referenceDelegate=e(this),this.Ti=new i1(this),this.indexManager=new Bx,this.remoteDocumentCache=function(o){return new t1(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new Lx(n),this.Ei=new Zx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new e1(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);const o=new r1(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return ee.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class r1 extends OS{constructor(e){super(),this.currentSequenceNumber=e}}class Bm{constructor(e){this.persistence=e,this.Vi=new zm,this.mi=null}static fi(e){return new Bm(e)}get gi(){if(this.mi)return this.mi;throw Ae(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.gi,s=>{const o=ve.fromPath(s);return this.pi(e,o).next(u=>{u||n.removeEntry(o,xe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ee.or([()=>ee.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Zc{constructor(e,n){this.persistence=e,this.yi=new Ls(s=>MS(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=Yx(this,n)}static fi(e,n){return new Zc(e,n)}di(){}Ai(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return ee.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?ee.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,n).next(m=>{m||(s++,u.removeEntry(d,xe.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=kc(e.data.value)),n}Dr(e,n,s){return ee.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ds=s,this.As=o}static Rs(e,n){let s=Pe(),o=Pe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new qm(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return tw()?8:kS($t())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ws(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.bs(e,n,o,s).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new s1;return this.Ss(e,n,d).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,d,m.size)})}).next(()=>u.result)}Ds(e,n,s,o){return s.documentReadCount<this.gs?(Ma()<=Me.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Pa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ee.resolve()):(Ma()<=Me.DEBUG&&ce("QueryEngine","Query:",Pa(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(Ma()<=Me.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Pa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(n))):ee.resolve())}ws(e,n){if(g_(n))return ee.resolve(null);let s=ui(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=lm(n,null,"F"),s=ui(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const d=Pe(...u);return this.ys.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.vs(n,m);return this.Cs(n,y,d,p.readTime)?this.ws(e,lm(n,null,"F")):this.Fs(e,y,n,p)}))})))}bs(e,n,s,o){return g_(n)||o.isEqual(xe.min())?ee.resolve(null):this.ys.getDocuments(e,s).next(u=>{const d=this.vs(n,u);return this.Cs(n,d,s,o)?ee.resolve(null):(Ma()<=Me.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Pa(n)),this.Fs(e,d,n,IS(o,kl)).next(m=>m))})}vs(e,n){let s=new Rt(rb(e));return n.forEach((o,u)=>{dh(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return Ma()<=Me.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Pa(n)),this.ys.getDocumentsMatchingQuery(e,n,jr.min(),s)}Fs(e,n,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="LocalStore",o1=3e8;class l1{constructor(e,n,s,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new st(De),this.Os=new Ls(u=>Om(u),km),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xx(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function u1(r,e,n,s){return new l1(r,e,n,s)}async function Rb(r,e){const n=Re(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const d=[],m=[];let p=Pe();for(const y of o){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(y=>({ks:y,removedBatchIds:d,addedBatchIds:m}))})})}function c1(r,e){const n=Re(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,p,y,E){const w=y.batch,x=w.keys();let V=ee.resolve();return x.forEach(G=>{V=V.next(()=>E.getEntry(p,G)).next(B=>{const Q=y.docVersions.get(G);Ge(Q!==null,48541),B.version.compareTo(Q)<0&&(w.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),E.addEntry(B)))})}),V.next(()=>m.mutationQueue.removeMutationBatch(p,w))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Pe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function Ib(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function h1(r,e){const n=Re(r),s=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((E,w)=>{const x=o.get(w);if(!x)return;m.push(n.Ti.removeMatchingKeys(u,E.removedDocuments,w).next(()=>n.Ti.addMatchingKeys(u,E.addedDocuments,w)));let V=x.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?V=V.withResumeToken(qt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,s)),o=o.insert(w,V),function(B,Q,ue){return B.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=o1?!0:ue.addedDocuments.size+ue.modifiedDocuments.size+ue.removedDocuments.size>0}(x,V,E)&&m.push(n.Ti.updateTargetData(u,V))});let p=$i(),y=Pe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(d1(u,d,e.documentUpdates).next(E=>{p=E.qs,y=E.Qs})),!s.isEqual(xe.min())){const E=n.Ti.getLastRemoteSnapshotVersion(u).next(w=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return ee.waitFor(m).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,y)).next(()=>p)}).then(u=>(n.xs=o,u))}function d1(r,e,n){let s=Pe(),o=Pe();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let d=$i();return n.forEach((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):ce(Hm,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)}),{qs:d,Qs:o}})}function f1(r,e){const n=Re(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Cm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function m1(r,e){const n=Re(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Ti.getTargetData(s,e).next(u=>u?(o=u,ee.resolve(o)):n.Ti.allocateTargetId(s).next(d=>(o=new Dr(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function fm(r,e,n){const s=Re(r),o=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!so(d))throw d;ce(Hm,`Failed to update sequence numbers for target ${e}: ${d}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function I_(r,e,n){const s=Re(r);let o=xe.min(),u=Pe();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,y,E){const w=Re(p),x=w.Os.get(E);return x!==void 0?ee.resolve(w.xs.get(x)):w.Ti.getTargetData(y,E)}(s,d,ui(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(d,m.targetId).next(p=>{u=p})}).next(()=>s.Ms.getDocumentsMatchingQuery(d,e,n?o:xe.min(),n?u:Pe())).next(m=>(g1(s,ex(e),m),{documents:m,$s:u})))}function g1(r,e,n){let s=r.Ns.get(e)||xe.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Ns.set(e,s)}class C_{constructor(){this.activeTargetIds=ax()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class p1{constructor(){this.xo=new C_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new C_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="ConnectivityMonitor";class D_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ce(N_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ce(N_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc=null;function mm(){return Cc===null?Cc=function(){return 268435456+Math.round(2147483648*Math.random())}():Cc++,"0x"+Cc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="RestConnection",v1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _1{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===Fc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,n,s,o,u){const d=mm(),m=this.jo(e,n.toUriEncodedString());ce(Gf,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:y}=new URL(m),E=to(y);return this.Jo(e,m,p,s,E).then(w=>(ce(Gf,`Received RPC '${e}' ${d}: `,w),w),w=>{throw Ya(Gf,`RPC '${e}' ${d} failed with error: `,w,"url: ",m,"request:",s),w})}Yo(e,n,s,o,u,d){return this.zo(e,n,s,o,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+io}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const s=v1[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class E1 extends _1{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=mm();return new Promise((m,p)=>{const y=new D0;y.setWithCredentials(!0),y.listenOnce(O0.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Oc.NO_ERROR:const w=y.getResponseJson();ce(Kt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),m(w);break;case Oc.TIMEOUT:ce(Kt,`RPC '${e}' ${d} timed out`),p(new fe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Oc.HTTP_ERROR:const x=y.getStatus();if(ce(Kt,`RPC '${e}' ${d} failed with status:`,x,"response text:",y.getResponseText()),x>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const G=V==null?void 0:V.error;if(G&&G.status&&G.message){const B=function(ue){const he=ue.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(he)>=0?he:te.UNKNOWN}(G.status);p(new fe(B,G.message))}else p(new fe(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new fe(te.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{h_:e,streamId:d,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{ce(Kt,`RPC '${e}' ${d} completed.`)}});const E=JSON.stringify(o);ce(Kt,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",E,s,15)})}I_(e,n,s){const o=mm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=M0(),m=V0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ce(Kt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const w=d.createWebChannel(E,p);this.E_(w);let x=!1,V=!1;const G=new b1({Zo:Q=>{V?ce(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,Q):(x||(ce(Kt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),x=!0),ce(Kt,`RPC '${e}' stream ${o} sending:`,Q),w.send(Q))},Xo:()=>w.close()}),B=(Q,ue,he)=>{Q.listen(ue,le=>{try{he(le)}catch(de){setTimeout(()=>{throw de},0)}})};return B(w,El.EventType.OPEN,()=>{V||(ce(Kt,`RPC '${e}' stream ${o} transport opened.`),G.__())}),B(w,El.EventType.CLOSE,()=>{V||(V=!0,ce(Kt,`RPC '${e}' stream ${o} transport closed`),G.u_(),this.d_(w))}),B(w,El.EventType.ERROR,Q=>{V||(V=!0,Ya(Kt,`RPC '${e}' stream ${o} transport errored. Name:`,Q.name,"Message:",Q.message),G.u_(new fe(te.UNAVAILABLE,"The operation could not be completed")))}),B(w,El.EventType.MESSAGE,Q=>{var ue;if(!V){const he=Q.data[0];Ge(!!he,16349);const le=he,de=(le==null?void 0:le.error)||((ue=le[0])===null||ue===void 0?void 0:ue.error);if(de){ce(Kt,`RPC '${e}' stream ${o} received error:`,de);const Y=de.status;let Z=function(R){const O=vt[R];if(O!==void 0)return gb(O)}(Y),D=de.message;Z===void 0&&(Z=te.INTERNAL,D="Unknown error status: "+Y+" with message "+de.message),V=!0,G.u_(new fe(Z,D)),w.close()}else ce(Kt,`RPC '${e}' stream ${o} received:`,he),G.c_(he)}}),B(m,k0.STAT_EVENT,Q=>{Q.stat===tm.PROXY?ce(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):Q.stat===tm.NOPROXY&&ce(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.a_()},0),G}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Ff(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(r){return new Sx(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="PersistentStream";class Nb{constructor(e,n,s,o,u,d,m,p){this.xi=e,this.S_=s,this.D_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Cb(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Qi(n.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===n&&this.z_(s,o)},s=>{e(()=>{const o=new fe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ce(O_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ce(O_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class T1 extends Nb{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=Ix(this.serializer,e),s=function(u){if(!("targetChange"in u))return xe.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?xe.min():d.readTime?ci(d.readTime):xe.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=dm(this.serializer),n.addTarget=function(u,d){let m;const p=d.target;if(m=am(p)?{documents:Dx(u,p)}:{query:Ox(u,p).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=vb(u,d.resumeToken);const y=um(u,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(xe.min())>0){m.readTime=Xc(u,d.snapshotVersion.toTimestamp());const y=um(u,d.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=Vx(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=dm(this.serializer),n.removeTarget=e,this.Q_(n)}}class A1 extends Nb{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=Nx(e.writeResults,e.commitTime),s=ci(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=dm(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Cx(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{}class S1 extends w1{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.zo(e,cm(n,s),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(te.UNKNOWN,u.toString())})}Yo(e,n,s,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Yo(e,cm(n,s),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new fe(te.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class x1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Qi(n),this.ua=!1):ce("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="RemoteStore";class R1{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(d=>{s.enqueueAndForget(async()=>{zs(this)&&(ce(Vs,"Restarting streams for network reachability change."),await async function(p){const y=Re(p);y.da.add(4),await Yl(y),y.Va.set("Unknown"),y.da.delete(4),await yh(y)}(this))})}),this.Va=new x1(s,o)}}async function yh(r){if(zs(r))for(const e of r.Aa)await e(!0)}async function Yl(r){for(const e of r.Aa)await e(!1)}function Db(r,e){const n=Re(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Ym(n)?Km(n):ao(n).N_()&&Fm(n,e))}function Gm(r,e){const n=Re(r),s=ao(n);n.Ea.delete(e),s.N_()&&Ob(n,e),n.Ea.size===0&&(s.N_()?s.k_():zs(n)&&n.Va.set("Unknown"))}function Fm(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ao(r).Z_(e)}function Ob(r,e){r.ma.Ke(e),ao(r).X_(e)}function Km(r){r.ma=new Ex({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),ao(r).start(),r.Va.ca()}function Ym(r){return zs(r)&&!ao(r).O_()&&r.Ea.size>0}function zs(r){return Re(r).da.size===0}function kb(r){r.ma=void 0}async function I1(r){r.Va.set("Online")}async function C1(r){r.Ea.forEach((e,n)=>{Fm(r,e)})}async function N1(r,e){kb(r),Ym(r)?(r.Va.Pa(e),Km(r)):r.Va.set("Unknown")}async function D1(r,e,n){if(r.Va.set("Online"),e instanceof yb&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ea.delete(m),o.ma.removeTarget(m))}(r,e)}catch(s){ce(Vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Jc(r,s)}else if(e instanceof Pc?r.ma.Xe(e):e instanceof pb?r.ma.ot(e):r.ma.nt(e),!n.isEqual(xe.min()))try{const s=await Ib(r.localStore);n.compareTo(s)>=0&&await function(u,d){const m=u.ma.It(d);return m.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ea.get(y);E&&u.Ea.set(y,E.withResumeToken(p.resumeToken,d))}}),m.targetMismatches.forEach((p,y)=>{const E=u.Ea.get(p);if(!E)return;u.Ea.set(p,E.withResumeToken(qt.EMPTY_BYTE_STRING,E.snapshotVersion)),Ob(u,p);const w=new Dr(E.target,p,y,E.sequenceNumber);Fm(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){ce(Vs,"Failed to raise snapshot:",s),await Jc(r,s)}}async function Jc(r,e,n){if(!so(e))throw e;r.da.add(1),await Yl(r),r.Va.set("Offline"),n||(n=()=>Ib(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ce(Vs,"Retrying IndexedDB access"),await n(),r.da.delete(1),await yh(r)})}function Vb(r,e){return e().catch(n=>Jc(r,n,e))}async function vh(r){const e=Re(r),n=Br(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Cm;for(;O1(e);)try{const o=await f1(e.localStore,s);if(o===null){e.Ia.length===0&&n.k_();break}s=o.batchId,k1(e,o)}catch(o){await Jc(e,o)}Mb(e)&&Pb(e)}function O1(r){return zs(r)&&r.Ia.length<10}function k1(r,e){r.Ia.push(e);const n=Br(r);n.N_()&&n.ea&&n.ta(e.mutations)}function Mb(r){return zs(r)&&!Br(r).O_()&&r.Ia.length>0}function Pb(r){Br(r).start()}async function V1(r){Br(r).ia()}async function M1(r){const e=Br(r);for(const n of r.Ia)e.ta(n.mutations)}async function P1(r,e,n){const s=r.Ia.shift(),o=jm.from(s,e,n);await Vb(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await vh(r)}async function j1(r,e){e&&Br(r).ea&&await async function(s,o){if(function(d){return _x(d)&&d!==te.ABORTED}(o.code)){const u=s.Ia.shift();Br(s).L_(),await Vb(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await vh(s)}}(r,e),Mb(r)&&Pb(r)}async function k_(r,e){const n=Re(r);n.asyncQueue.verifyOperationInProgress(),ce(Vs,"RemoteStore received new credentials");const s=zs(n);n.da.add(3),await Yl(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await yh(n)}async function U1(r,e){const n=Re(r);e?(n.da.delete(2),await yh(n)):e||(n.da.add(2),await Yl(n),n.Va.set("Unknown"))}function ao(r){return r.fa||(r.fa=function(n,s,o){const u=Re(n);return u.oa(),new T1(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:I1.bind(null,r),n_:C1.bind(null,r),i_:N1.bind(null,r),Y_:D1.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Ym(r)?Km(r):r.Va.set("Unknown")):(await r.fa.stop(),kb(r))})),r.fa}function Br(r){return r.ga||(r.ga=function(n,s,o){const u=Re(n);return u.oa(),new A1(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:V1.bind(null,r),i_:j1.bind(null,r),na:M1.bind(null,r),ra:P1.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await vh(r)):(await r.ga.stop(),r.Ia.length>0&&(ce(Vs,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new Qm(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $m(r,e){if(Qi("AsyncQueue",`${e}: ${r}`),so(r))return new fe(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{static emptySet(e){return new qa(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ve.comparator(n.key,s.key):(n,s)=>ve.comparator(n.key,s.key),this.keyedMap=Tl(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new qa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(){this.pa=new st(ve.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ae(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ja{constructor(e,n,s,o,u,d,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Ja(e,n,qa.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class z1{constructor(){this.queries=M_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Re(n),u=o.queries;o.queries=M_(),u.forEach((d,m)=>{for(const p of m.Sa)p.onError(s)})})(this,new fe(te.ABORTED,"Firestore shutting down"))}}function M_(){return new Ls(r=>ib(r),hh)}async function jb(r,e){const n=Re(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(s=2):(u=new L1,s=e.va()?0:1);try{switch(s){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=$m(d,`Initialization of query '${Pa(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&Xm(n)}async function Ub(r,e){const n=Re(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function B1(r,e){const n=Re(r);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.Sa)m.Ma(o)&&(s=!0);d.ba=o}}s&&Xm(n)}function q1(r,e,n){const s=Re(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Xm(r){r.Ca.forEach(e=>{e.next()})}var gm,P_;(P_=gm||(gm={})).xa="default",P_.Cache="cache";class Lb{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ja(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==gm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.key=e}}class Bb{constructor(e){this.key=e}}class H1{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Pe(),this.mutatedKeys=Pe(),this.Za=rb(e),this.Xa=new qa(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new V_,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,w)=>{const x=o.get(E),V=dh(this.query,w)?w:null,G=!!x&&this.mutatedKeys.has(x.key),B=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Q=!1;x&&V?x.data.isEqual(V.data)?G!==B&&(s.track({type:3,doc:V}),Q=!0):this.ru(x,V)||(s.track({type:2,doc:V}),Q=!0,(p&&this.Za(V,p)>0||y&&this.Za(V,y)<0)&&(m=!0)):!x&&V?(s.track({type:0,doc:V}),Q=!0):x&&!V&&(s.track({type:1,doc:x}),Q=!0,(p||y)&&(m=!0)),Q&&(V?(d=d.add(V),u=B?u.add(E):u.delete(E)):(d=d.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{Xa:d,nu:s,Cs:m,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((E,w)=>function(V,G){const B=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:Q})}};return B(V)-B(G)}(E.type,w.type)||this.Za(E.doc,w.doc)),this.iu(s),o=o!=null&&o;const m=n&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,y=p!==this.Ja;return this.Ja=p,d.length!==0||y?{snapshot:new Ja(this.query,e.Xa,u,d,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new V_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Pe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new Bb(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new zb(s))}),n}au(e){this.Ha=e.$s,this.Ya=Pe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Ja.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Zm="SyncEngine";class G1{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class F1{constructor(e){this.key=e,this.cu=!1}}class K1{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new Ls(m=>ib(m),hh),this.Pu=new Map,this.Tu=new Set,this.Iu=new st(ve.comparator),this.Eu=new Map,this.du=new zm,this.Au={},this.Ru=new Map,this.Vu=Za.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Y1(r,e,n=!0){const s=Yb(r);let o;const u=s.hu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await qb(s,e,n,!0),o}async function Q1(r,e){const n=Yb(r);await qb(n,e,!0,!1)}async function qb(r,e,n,s){const o=await m1(r.localStore,ui(e)),u=o.targetId,d=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await $1(r,e,u,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&Db(r.remoteStore,o),m}async function $1(r,e,n,s,o){r.fu=(w,x,V)=>async function(B,Q,ue,he){let le=Q.view.tu(ue);le.Cs&&(le=await I_(B.localStore,Q.query,!1).then(({documents:D})=>Q.view.tu(D,le)));const de=he&&he.targetChanges.get(Q.targetId),Y=he&&he.targetMismatches.get(Q.targetId)!=null,Z=Q.view.applyChanges(le,B.isPrimaryClient,de,Y);return U_(B,Q.targetId,Z.ou),Z.snapshot}(r,w,x,V);const u=await I_(r.localStore,e,!0),d=new H1(e,u.$s),m=d.tu(u.documents),p=Kl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=d.applyChanges(m,r.isPrimaryClient,p);U_(r,n,y.ou);const E=new G1(e,n,d);return r.hu.set(e,E),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),y.snapshot}async function X1(r,e,n){const s=Re(r),o=s.hu.get(e),u=s.Pu.get(o.targetId);if(u.length>1)return s.Pu.set(o.targetId,u.filter(d=>!hh(d,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await fm(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Gm(s.remoteStore,o.targetId),pm(s,o.targetId)}).catch(ro)):(pm(s,o.targetId),await fm(s.localStore,o.targetId,!0))}async function Z1(r,e){const n=Re(r),s=n.hu.get(e),o=n.Pu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Gm(n.remoteStore,s.targetId))}async function J1(r,e,n){const s=sR(r);try{const o=await function(d,m){const p=Re(d),y=xt.now(),E=m.reduce((V,G)=>V.add(G.key),Pe());let w,x;return p.persistence.runTransaction("Locally write mutations","readwrite",V=>{let G=$i(),B=Pe();return p.Bs.getEntries(V,E).next(Q=>{G=Q,G.forEach((ue,he)=>{he.isValidDocument()||(B=B.add(ue))})}).next(()=>p.localDocuments.getOverlayedDocuments(V,G)).next(Q=>{w=Q;const ue=[];for(const he of m){const le=mx(he,w.get(he.key).overlayedDocument);le!=null&&ue.push(new Fr(he.key,le,$0(le.value.mapValue),kn.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,ue,m)}).next(Q=>{x=Q;const ue=Q.applyToLocalDocumentSet(w,B);return p.documentOverlayCache.saveOverlays(V,Q.batchId,ue)})}).then(()=>({batchId:x.batchId,changes:ab(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,p){let y=d.Au[d.currentUser.toKey()];y||(y=new st(De)),y=y.insert(m,p),d.Au[d.currentUser.toKey()]=y}(s,o.batchId,n),await Ql(s,o.changes),await vh(s.remoteStore)}catch(o){const u=$m(o,"Failed to persist write");n.reject(u)}}async function Hb(r,e){const n=Re(r);try{const s=await h1(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Eu.get(u);d&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?Ge(d.cu,14607):o.removedDocuments.size>0&&(Ge(d.cu,42227),d.cu=!1))}),await Ql(n,s,e)}catch(s){await ro(s)}}function j_(r,e,n){const s=Re(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.hu.forEach((u,d)=>{const m=d.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const p=Re(d);p.onlineState=m;let y=!1;p.queries.forEach((E,w)=>{for(const x of w.Sa)x.Fa(m)&&(y=!0)}),y&&Xm(p)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function W1(r,e,n){const s=Re(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Eu.get(e),u=o&&o.key;if(u){let d=new st(ve.comparator);d=d.insert(u,Qt.newNoDocument(u,xe.min()));const m=Pe().add(u),p=new gh(xe.min(),new Map,new st(De),d,m);await Hb(s,p),s.Iu=s.Iu.remove(u),s.Eu.delete(e),Jm(s)}else await fm(s.localStore,e,!1).then(()=>pm(s,e,n)).catch(ro)}async function eR(r,e){const n=Re(r),s=e.batch.batchId;try{const o=await c1(n.localStore,e);Fb(n,s,null),Gb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Ql(n,o)}catch(o){await ro(o)}}async function tR(r,e,n){const s=Re(r);try{const o=await function(d,m){const p=Re(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,m).next(w=>(Ge(w!==null,37113),E=w.keys(),p.mutationQueue.removeMutationBatch(y,w))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(s.localStore,e);Fb(s,e,n),Gb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Ql(s,o)}catch(o){await ro(o)}}function Gb(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function Fb(r,e,n){const s=Re(r);let o=s.Au[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function pm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||Kb(r,s)})}function Kb(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(Gm(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),Jm(r))}function U_(r,e,n){for(const s of n)s instanceof zb?(r.du.addReference(s.key,e),nR(r,s)):s instanceof Bb?(ce(Zm,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||Kb(r,s.key)):Ae(19791,{pu:s})}function nR(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(ce(Zm,"New document in limbo: "+n),r.Tu.add(s),Jm(r))}function Jm(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new ve(tt.fromString(e)),s=r.Vu.next();r.Eu.set(s,new F1(n)),r.Iu=r.Iu.insert(n,s),Db(r.remoteStore,new Dr(ui(Vm(n.path)),s,"TargetPurposeLimboResolution",lh.le))}}async function Ql(r,e,n){const s=Re(r),o=[],u=[],d=[];s.hu.isEmpty()||(s.hu.forEach((m,p)=>{d.push(s.fu(p,e,n).then(y=>{var E;if((y||n)&&s.isPrimaryClient){const w=y?!y.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=qm.Rs(p.targetId,y);u.push(w)}}))}),await Promise.all(d),s.lu.Y_(o),await async function(p,y){const E=Re(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ee.forEach(y,x=>ee.forEach(x.ds,V=>E.persistence.referenceDelegate.addReference(w,x.targetId,V)).next(()=>ee.forEach(x.As,V=>E.persistence.referenceDelegate.removeReference(w,x.targetId,V)))))}catch(w){if(!so(w))throw w;ce(Hm,"Failed to update sequence numbers: "+w)}for(const w of y){const x=w.targetId;if(!w.fromCache){const V=E.xs.get(x),G=V.snapshotVersion,B=V.withLastLimboFreeSnapshotVersion(G);E.xs=E.xs.insert(x,B)}}}(s.localStore,u))}async function iR(r,e){const n=Re(r);if(!n.currentUser.isEqual(e)){ce(Zm,"User change. New user:",e.toKey());const s=await Rb(n.localStore,e);n.currentUser=e,function(u,d){u.Ru.forEach(m=>{m.forEach(p=>{p.reject(new fe(te.CANCELLED,d))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Ql(n,s.ks)}}function rR(r,e){const n=Re(r),s=n.Eu.get(e);if(s&&s.cu)return Pe().add(s.key);{let o=Pe();const u=n.Pu.get(e);if(!u)return o;for(const d of u){const m=n.hu.get(d);o=o.unionWith(m.view.eu)}return o}}function Yb(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W1.bind(null,e),e.lu.Y_=B1.bind(null,e.eventManager),e.lu.gu=q1.bind(null,e.eventManager),e}function sR(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tR.bind(null,e),e}class Wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ph(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return u1(this.persistence,new a1,e.initialUser,this.serializer)}Su(e){return new xb(Bm.fi,this.serializer)}bu(e){return new p1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wc.provider={build:()=>new Wc};class aR extends Wc{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Ge(this.persistence.referenceDelegate instanceof Zc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new Fx(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new xb(s=>Zc.fi(s,n),this.serializer)}}class ym{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>j_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=iR.bind(null,this.syncEngine),await U1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new z1}()}createDatastore(e){const n=ph(e.databaseInfo.databaseId),s=function(u){return new E1(u)}(e.databaseInfo);return function(u,d,m,p){return new S1(u,d,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,d,m){return new R1(s,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>j_(this.syncEngine,n,0),function(){return D_.C()?new D_:new y1}())}createSyncEngine(e,n){return function(o,u,d,m,p,y,E){const w=new K1(o,u,d,m,p,y);return E&&(w.mu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Re(o);ce(Vs,"RemoteStore shutting down."),u.da.add(5),await Yl(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ym.provider={build:()=>new ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Qi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class oR{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Yt.UNAUTHENTICATED,this.clientId=L0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async d=>{ce(qr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(ce(qr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=$m(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Kf(r,e){r.asyncQueue.verifyOperationInProgress(),ce(qr,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await Rb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function L_(r,e){r.asyncQueue.verifyOperationInProgress();const n=await lR(r);ce(qr,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>k_(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>k_(e.remoteStore,o)),r._onlineComponents=e}async function lR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(qr,"Using user provided OfflineComponentProvider");try{await Kf(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Ya("Error using user provided cache. Falling back to memory cache: "+n),await Kf(r,new Wc)}}else ce(qr,"Using default OfflineComponentProvider"),await Kf(r,new aR(void 0));return r._offlineComponents}async function $b(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(qr,"Using user provided OnlineComponentProvider"),await L_(r,r._uninitializedComponentsProvider._online)):(ce(qr,"Using default OnlineComponentProvider"),await L_(r,new ym))),r._onlineComponents}function uR(r){return $b(r).then(e=>e.syncEngine)}async function Xb(r){const e=await $b(r),n=e.eventManager;return n.onListen=Y1.bind(null,e.syncEngine),n.onUnlisten=X1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Z1.bind(null,e.syncEngine),n}function cR(r,e,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,y){const E=new Qb({next:x=>{E.xu(),d.enqueueAndForget(()=>Ub(u,w));const V=x.docs.has(m);!V&&x.fromCache?y.reject(new fe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&x.fromCache&&p&&p.source==="server"?y.reject(new fe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(x)},error:x=>y.reject(x)}),w=new Lb(Vm(m.path),E,{includeMetadataChanges:!0,Qa:!0});return jb(u,w)}(await Xb(r),r.asyncQueue,e,n,s)),s.promise}function hR(r,e,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,y){const E=new Qb({next:x=>{E.xu(),d.enqueueAndForget(()=>Ub(u,w)),x.fromCache&&p.source==="server"?y.reject(new fe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(x)},error:x=>y.reject(x)}),w=new Lb(m,E,{includeMetadataChanges:!0,Qa:!0});return jb(u,w)}(await Xb(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(r,e,n){if(!n)throw new fe(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function dR(r,e,n,s){if(e===!0&&s===!0)throw new fe(te.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function B_(r){if(!ve.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function q_(r){if(ve.isDocumentKey(r))throw new fe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function _h(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Hn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_h(r);throw new fe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="firestore.googleapis.com",H_=!0;class G_{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wb,this.ssl=H_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:H_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Sb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Hx)throw new fe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zb((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new fe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new _S;switch(s.type){case"firstParty":return new AS(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=z_.get(n);s&&(ce("ComponentProvider","Removing Datastore"),z_.delete(n),s.terminate())}(this),Promise.resolve()}}function fR(r,e,n,s={}){var o;r=Hn(r,bh);const u=to(e),d=r._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${n}`;u&&(T0(`https://${p}`),A0("Firestore",!0)),d.host!==Wb&&d.host!==p&&Ya("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},d),{host:p,ssl:u,emulatorOptions:s});if(!Ds(y,m)&&(r._setSettings(y),s.mockUserToken)){let E,w;if(typeof s.mockUserToken=="string")E=s.mockUserToken,w=Yt.MOCK_USER;else{E=KA(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new fe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Yt(x)}r._authCredentials=new bS(new j0(E,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new oo(this.firestore,e,this._query)}}class tn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tn(this.firestore,e,this._key)}}class Pr extends oo{constructor(e,n,s){super(e,n,Vm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tn(this.firestore,null,new ve(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function Ms(r,e,...n){if(r=Vt(r),Jb("collection","path",e),r instanceof bh){const s=tt.fromString(e,...n);return q_(s),new Pr(r,null,s)}{if(!(r instanceof tn||r instanceof Pr))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return q_(s),new Pr(r.firestore,null,s)}}function Fi(r,e,...n){if(r=Vt(r),arguments.length===1&&(e=L0.newId()),Jb("doc","path",e),r instanceof bh){const s=tt.fromString(e,...n);return B_(s),new tn(r,null,new ve(s))}{if(!(r instanceof tn||r instanceof Pr))throw new fe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return B_(s),new tn(r.firestore,r instanceof Pr?r.converter:null,new ve(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_="AsyncQueue";class K_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Cb(this,"async_queue_retry"),this.rc=()=>{const s=Ff();s&&ce(F_,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=Ff();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Ff();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Gi;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!so(e))throw e;ce(F_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Qi("INTERNAL UNHANDLED ERROR: ",Y_(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=Qm.createAndSchedule(this,e,n,s,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Ae(47125,{cc:Y_(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function Y_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Bs extends bh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new K_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new K_(e),this._firestoreClient=void 0,await e}}}function mR(r,e){const n=typeof r=="object"?r:R0(),s=typeof r=="string"?r:Fc,o=Rm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=GA("firestore");u&&fR(o,...u)}return o}function Wm(r){if(r._terminated)throw new fe(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||gR(r),r._firestoreClient}function gR(r){var e,n,s;const o=r._freezeSettings(),u=function(m,p,y,E){return new US(m,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,Zb(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new oR(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wa(qt.fromBase64String(e))}catch(n){throw new fe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wa(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=/^__.*__$/;class yR{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fl(e,this.data,n,this.fieldTransforms)}}class eE{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Fr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function tE(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ic:r})}}class ng{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new ng(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return eh(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(tE(this.Ic)&&pR.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class vR{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||ph(e)}bc(e,n,s,o=!1){return new ng({Ic:e,methodName:n,wc:s,path:Bt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ah(r){const e=r._freezeSettings(),n=ph(r._databaseId);return new vR(r._databaseId,!!e.ignoreUndefinedProperties,n)}function nE(r,e,n,s,o,u={}){const d=r.bc(u.merge||u.mergeFields?2:0,e,n,o);rg("Data must be an object, but it was:",d,s);const m=iE(s,d);let p,y;if(u.merge)p=new vn(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const E=[];for(const w of u.mergeFields){const x=vm(e,w,n);if(!d.contains(x))throw new fe(te.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);sE(E,x)||E.push(x)}p=new vn(E),y=d.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,y=d.fieldTransforms;return new yR(new on(m),p,y)}class wh extends Th{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wh}}class ig extends Th{_toFieldTransform(e){return new cx(e.path,new jl)}isEqual(e){return e instanceof ig}}function _R(r,e,n,s){const o=r.bc(1,e,n);rg("Data must be an object, but it was:",o,s);const u=[],d=on.empty();Gr(s,(p,y)=>{const E=sg(e,p,n);y=Vt(y);const w=o.mc(E);if(y instanceof wh)u.push(E);else{const x=$l(y,w);x!=null&&(u.push(E),d.set(E,x))}});const m=new vn(u);return new eE(d,m,o.fieldTransforms)}function bR(r,e,n,s,o,u){const d=r.bc(1,e,n),m=[vm(e,s,n)],p=[o];if(u.length%2!=0)throw new fe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<u.length;x+=2)m.push(vm(e,u[x])),p.push(u[x+1]);const y=[],E=on.empty();for(let x=m.length-1;x>=0;--x)if(!sE(y,m[x])){const V=m[x];let G=p[x];G=Vt(G);const B=d.mc(V);if(G instanceof wh)y.push(V);else{const Q=$l(G,B);Q!=null&&(y.push(V),E.set(V,Q))}}const w=new vn(y);return new eE(E,w,d.fieldTransforms)}function ER(r,e,n,s=!1){return $l(n,r.bc(s?4:3,e))}function $l(r,e){if(rE(r=Vt(r)))return rg("Unsupported field value:",e,r),iE(r,e);if(r instanceof Th)return function(s,o){if(!tE(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const u=[];let d=0;for(const m of s){let p=$l(m,o.fc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=Vt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return ox(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=xt.fromDate(s);return{timestampValue:Xc(o.serializer,u)}}if(s instanceof xt){const u=new xt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xc(o.serializer,u)}}if(s instanceof eg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Wa)return{bytesValue:vb(o.serializer,s._byteString)};if(s instanceof tn){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof tg)return function(d,m){return{mapValue:{fields:{[Y0]:{stringValue:Q0},[Kc]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.gc("VectorValues must only contain numeric values.");return Mm(m.serializer,y)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${_h(s)}`)}(r,e)}function iE(r,e){const n={};return B0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gr(r,(s,o)=>{const u=$l(o,e.Ac(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function rE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof xt||r instanceof eg||r instanceof Wa||r instanceof tn||r instanceof Th||r instanceof tg)}function rg(r,e,n){if(!rE(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=_h(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function vm(r,e,n){if((e=Vt(e))instanceof Eh)return e._internalPath;if(typeof e=="string")return sg(r,e);throw eh("Field path arguments must be of type string or ",r,!1,void 0,n)}const TR=new RegExp("[~\\*/\\[\\]]");function sg(r,e,n){if(e.search(TR)>=0)throw eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Eh(...e.split("."))._internalPath}catch{throw eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function eh(r,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new fe(te.INVALID_ARGUMENT,m+r+p)}function sE(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ag("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AR extends aE{data(){return super.data()}}function ag(r,e){return typeof e=="string"?sg(r,e):e instanceof Eh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class og{}class SR extends og{}function Ps(r,e,...n){let s=[];e instanceof og&&s.push(e),s=s.concat(n),function(u){const d=u.filter(p=>p instanceof lg).length,m=u.filter(p=>p instanceof Sh).length;if(d>1||d>0&&m>0)throw new fe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Sh extends SR{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Sh(e,n,s)}_apply(e){const n=this._parse(e);return oE(e._query,n),new oo(e.firestore,e.converter,om(e._query,n))}_parse(e){const n=Ah(e.firestore);return function(u,d,m,p,y,E,w){let x;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new fe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){$_(w,E);const G=[];for(const B of w)G.push(Q_(p,u,B));x={arrayValue:{values:G}}}else x=Q_(p,u,w)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||$_(w,E),x=ER(m,d,w,E==="in"||E==="not-in");return _t.create(y,E,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Hr(r,e,n){const s=e,o=ag("where",r);return Sh._create(o,s,n)}class lg extends og{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new lg(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)oE(d,p),d=om(d,p)}(e._query,n),new oo(e.firestore,e.converter,om(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Q_(r,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new fe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nb(e)&&n.indexOf("/")!==-1)throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(tt.fromString(n));if(!ve.isDocumentKey(s))throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return u_(r,new ve(s))}if(n instanceof tn)return u_(r,n._key);throw new fe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_h(n)}.`)}function $_(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oE(r,e){const n=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xR{convertValue(e,n="none"){switch(zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Gr(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Kc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>dt(d.doubleValue));return new tg(u)}convertGeoPoint(e){return new eg(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ch(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Vl(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=tt.fromString(e);Ge(wb(s),9688,{name:e});const o=new Ml(s.get(1),s.get(3)),u=new ve(s.popFirst(5));return o.isEqual(n)||Qi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(r,e,n){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uE extends aE{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ag("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class jc extends uE{data(e={}){return super.data(e)}}class RR{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new wl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new jc(this._firestore,this._userDataWriter,s.key,s,new wl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const p=new jc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new wl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new jc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new wl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),E=d.indexOf(m.doc.key)),{type:IR(m.type),doc:p,oldIndex:y,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function IR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(r){r=Hn(r,tn);const e=Hn(r.firestore,Bs);return cR(Wm(e),r._key).then(n=>DR(e,r,n))}class hE extends xR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tn(this.firestore,null,n)}}function eo(r){r=Hn(r,oo);const e=Hn(r.firestore,Bs),n=Wm(e),s=new hE(e);return wR(r._query),hR(n,r._query).then(o=>new RR(e,s,r,o))}function _m(r,e,n){r=Hn(r,tn);const s=Hn(r.firestore,Bs),o=lE(r.converter,e);return xh(s,[nE(Ah(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,kn.none())])}function dE(r,e,n,...s){r=Hn(r,tn);const o=Hn(r.firestore,Bs),u=Ah(o);let d;return d=typeof(e=Vt(e))=="string"||e instanceof Eh?bR(u,"updateDoc",r._key,e,n,s):_R(u,"updateDoc",r._key,e),xh(o,[d.toMutation(r._key,kn.exists(!0))])}function CR(r){return xh(Hn(r.firestore,Bs),[new Pm(r._key,kn.none())])}function NR(r,e){const n=Hn(r.firestore,Bs),s=Fi(r),o=lE(r.converter,e);return xh(n,[nE(Ah(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,kn.exists(!1))]).then(()=>s)}function xh(r,e){return function(s,o){const u=new Gi;return s.asyncQueue.enqueueAndForget(async()=>J1(await uR(s),o,u)),u.promise}(Wm(r),e)}function DR(r,e,n){const s=n.docs.get(e._key),o=new hE(r);return new uE(r,o,e._key,s,new wl(n.hasPendingWrites,n.fromCache),e.converter)}function OR(){return new ig("serverTimestamp")}(function(e,n=!0){(function(o){io=o})(no),Ka(new Os("firestore",(s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new Bs(new ES(s.getProvider("auth-internal")),new wS(d,s.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ml(y.options.projectId,E)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Vr(Zv,Jv,e),Vr(Zv,Jv,"esm2017")})();var kR="firebase",VR="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vr(kR,VR,"app");function ug(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function fE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MR=fE,mE=new ql("auth","Firebase",fE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th=new Sm("@firebase/auth");function PR(r,...e){th.logLevel<=Me.WARN&&th.warn(`Auth (${no}): ${r}`,...e)}function Uc(r,...e){th.logLevel<=Me.ERROR&&th.error(`Auth (${no}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(r,...e){throw cg(r,...e)}function hi(r,...e){return cg(r,...e)}function gE(r,e,n){const s=Object.assign(Object.assign({},MR()),{[e]:n});return new ql("auth","Firebase",s).create(e,{appName:r.name})}function Ki(r){return gE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cg(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return mE.create(r,...e)}function Te(r,e,...n){if(!r)throw cg(e,...n)}function qi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Uc(e),new Error(e)}function Xi(r,e){r||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function jR(){return X_()==="http:"||X_()==="https:"}function X_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jR()||JA()||"connection"in navigator)?navigator.onLine:!0}function LR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xi(n>e,"Short delay should be less than long delay!"),this.isMobile=$A()||WA()}get(){return UR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(r,e){Xi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qR=new Xl(3e4,6e4);function Kr(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Yr(r,e,n,s,o={}){return yE(r,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=Hl(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},u);return ZA()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&to(r.emulatorConfig.host)&&(y.credentials="include"),pE.fetch()(await vE(r,r.config.apiHost,n,m),y)})}async function yE(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},zR),e);try{const o=new GR(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Nc(r,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nc(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Nc(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw Nc(r,"user-disabled",d);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw gE(r,E,y);Gn(r,E)}}catch(o){if(o instanceof Zi)throw o;Gn(r,"network-request-failed",{message:String(o)})}}async function Zl(r,e,n,s,o={}){const u=await Yr(r,e,n,s,o);return"mfaPendingCredential"in u&&Gn(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function vE(r,e,n,s){const o=`${e}${n}?${s}`,u=r,d=u.config.emulator?hg(r.config,o):`${r.config.apiScheme}://${o}`;return BR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function HR(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hi(this.auth,"network-request-failed")),qR.get())})}}function Nc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=hi(r,e,s);return o.customData._tokenResponse=n,o}function Z_(r){return r!==void 0&&r.enterprise!==void 0}class FR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return HR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KR(r,e){return Yr(r,"GET","/v2/recaptchaConfig",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(r,e){return Yr(r,"POST","/v1/accounts:delete",e)}async function nh(r,e){return Yr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QR(r,e=!1){const n=Vt(r),s=await n.getIdToken(e),o=dg(s);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Dl(Yf(o.auth_time)),issuedAtTime:Dl(Yf(o.iat)),expirationTime:Dl(Yf(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Yf(r){return Number(r)*1e3}function dg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Uc("JWT malformed, contained fewer than 3 sections"),null;try{const o=v0(n);return o?JSON.parse(o):(Uc("Failed to decode base64 JWT payload"),null)}catch(o){return Uc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function J_(r){const e=dg(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zl(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Zi&&$R(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function $R({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(r){var e;const n=r.auth,s=await r.getIdToken(),o=await zl(r,nh(n,{idToken:s}));Te(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?_E(u.providerUserInfo):[],m=JR(r.providerData,d),p=r.isAnonymous,y=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?y:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new Em(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,w)}async function ZR(r){const e=Vt(r);await ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JR(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function _E(r){return r.map(e=>{var{providerId:n}=e,s=ug(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(r,e){const n=await yE(r,{},async()=>{const s=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,d=await vE(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&to(r.emulatorConfig.host)&&(p.credentials="include"),pE.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eI(r,e){return Yr(r,"POST","/v2/accounts:revokeToken",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=J_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await WR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Ha;return s&&(Te(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ha,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Bn{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=ug(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new Em(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await zl(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QR(this,e)}reload(){return ZR(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await ih(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(Ki(this.auth));const e=await this.getIdToken();return await zl(this,YR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,d,m,p,y,E;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,x=(o=n.email)!==null&&o!==void 0?o:void 0,V=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,G=(d=n.photoURL)!==null&&d!==void 0?d:void 0,B=(m=n.tenantId)!==null&&m!==void 0?m:void 0,Q=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,ue=(y=n.createdAt)!==null&&y!==void 0?y:void 0,he=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:le,emailVerified:de,isAnonymous:Y,providerData:Z,stsTokenManager:D}=n;Te(le&&D,e,"internal-error");const S=Ha.fromJSON(this.name,D);Te(typeof le=="string",e,"internal-error"),xr(w,e.name),xr(x,e.name),Te(typeof de=="boolean",e,"internal-error"),Te(typeof Y=="boolean",e,"internal-error"),xr(V,e.name),xr(G,e.name),xr(B,e.name),xr(Q,e.name),xr(ue,e.name),xr(he,e.name);const R=new Bn({uid:le,auth:e,email:x,emailVerified:de,displayName:w,isAnonymous:Y,photoURL:G,phoneNumber:V,tenantId:B,stsTokenManager:S,createdAt:ue,lastLoginAt:he});return Z&&Array.isArray(Z)&&(R.providerData=Z.map(O=>Object.assign({},O))),Q&&(R._redirectEventId=Q),R}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ha;o.updateFromServerResponse(n);const u=new Bn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await ih(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?_E(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Ha;m.updateFromIdToken(s);const p=new Bn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Em(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;function Hi(r){Xi(r instanceof Function,"Expected a class definition");let e=W_.get(r);return e?(Xi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,W_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bE.type="NONE";const e0=bE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(r,e,n){return`firebase:${r}:${e}:${n}`}class Ga{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Lc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Lc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await nh(this.auth,{idToken:e}).catch(()=>{});return n?Bn._fromGetAccountInfoResponse(this.auth,n,e):null}return Bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Ga(Hi(e0),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Hi(e0);const d=Lc(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const E=await y._get(d);if(E){let w;if(typeof E=="string"){const x=await nh(e,{idToken:E}).catch(()=>{});if(!x)break;w=await Bn._fromGetAccountInfoResponse(e,x,E)}else w=Bn._fromJSON(e,E);y!==u&&(m=w),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Ga(u,e,s):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new Ga(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xE(e))return"Blackberry";if(RE(e))return"Webos";if(TE(e))return"Safari";if((e.includes("chrome/")||AE(e))&&!e.includes("edge/"))return"Chrome";if(SE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function EE(r=$t()){return/firefox\//i.test(r)}function TE(r=$t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AE(r=$t()){return/crios\//i.test(r)}function wE(r=$t()){return/iemobile/i.test(r)}function SE(r=$t()){return/android/i.test(r)}function xE(r=$t()){return/blackberry/i.test(r)}function RE(r=$t()){return/webos/i.test(r)}function fg(r=$t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function tI(r=$t()){var e;return fg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nI(){return ew()&&document.documentMode===10}function IE(r=$t()){return fg(r)||SE(r)||RE(r)||xE(r)||/windows phone/i.test(r)||wE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(r,e=[]){let n;switch(r){case"Browser":n=t0($t());break;case"Worker":n=`${t0($t())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${no}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rI(r,e={}){return Yr(r,"GET","/v2/passwordPolicy",Kr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=6;class aI{constructor(e){var n,s,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:sI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,d,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new n0(this),this.idTokenSubscription=new n0(this),this.beforeStateQueue=new iI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await Ga.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await nh(this,{idToken:e}),s=await Bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(On(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ih(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(Ki(this));const n=e?Vt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(Ki(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(Ki(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rI(this),n=new aI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ql("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await eI(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hi(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Ga.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qs(r){return Vt(r)}class n0{constructor(e){this.auth=e,this.observer=null,this.addObserver=lw(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lI(r){Rh=r}function NE(r){return Rh.loadJS(r)}function uI(){return Rh.recaptchaEnterpriseScript}function cI(){return Rh.gapiScript}function hI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class dI{constructor(){this.enterprise=new fI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const mI="recaptcha-enterprise",DE="NO_RECAPTCHA";class gI{constructor(e){this.type=mI,this.auth=qs(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{KR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new FR(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;Z_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(DE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dI().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&Z_(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=uI();p.length!==0&&(p+=m),NE(p).then(()=>{o(m,u,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function i0(r,e,n,s=!1,o=!1){const u=new gI(r);let d;if(o)d=DE;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Tm(r,e,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await i0(r,e,n,n==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await i0(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(r,e){const n=Rm(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ds(u,e??{}))return o;Gn(o,"already-initialized")}return n.initialize({options:e})}function yI(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Hi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function vI(r,e,n){const s=qs(r);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=OE(e),{host:d,port:m}=_I(e),p=m===null?"":`:${m}`,y={url:`${u}//${d}${p}/`},E=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(Ds(y,s.config.emulator)&&Ds(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,to(d)?(T0(`${u}//${d}${p}`),A0("Auth",!0)):bI()}function OE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function _I(r){const e=OE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:r0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:r0(d)}}}function r0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function bI(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}async function EI(r,e){return Yr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(r,e){return Zl(r,"POST","/v1/accounts:signInWithPassword",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AI(r,e){return Zl(r,"POST","/v1/accounts:signInWithEmailLink",Kr(r,e))}async function wI(r,e){return Zl(r,"POST","/v1/accounts:signInWithEmailLink",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl extends mg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Bl(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Bl(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tm(e,n,"signInWithPassword",TI);case"emailLink":return AI(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Tm(e,s,"signUpPassword",EI);case"emailLink":return wI(e,{idToken:n,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fa(r,e){return Zl(r,"POST","/v1/accounts:signInWithIdp",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SI="http://localhost";class js extends mg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=ug(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new js(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Fa(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Fa(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fa(e,n)}buildRequest(){const e={requestUri:SI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RI(r){const e=_l(bl(r)).link,n=e?_l(bl(e)).deep_link_id:null,s=_l(bl(r)).deep_link_id;return(s?_l(bl(s)).link:null)||s||n||e||r}class gg{constructor(e){var n,s,o,u,d,m;const p=_l(bl(e)),y=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,w=xI((o=p.mode)!==null&&o!==void 0?o:null);Te(y&&E&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=p.lang)!==null&&d!==void 0?d:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=RI(e);try{return new gg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.providerId=lo.PROVIDER_ID}static credential(e,n){return Bl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=gg.parseLink(n);return Te(s,"argument-error"),Bl._fromEmailAndCode(e,s.code,s.tenantId)}}lo.PROVIDER_ID="password";lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl extends kE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Jl{constructor(){super("facebook.com")}static credential(e){return js._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Jl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return js._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Ir.credential(n,s)}catch{return null}}}Ir.GOOGLE_SIGN_IN_METHOD="google.com";Ir.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Jl{constructor(){super("github.com")}static credential(e){return js._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.GITHUB_SIGN_IN_METHOD="github.com";Cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Jl{constructor(){super("twitter.com")}static credential(e,n){return js._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Nr.credential(n,s)}catch{return null}}}Nr.TWITTER_SIGN_IN_METHOD="twitter.com";Nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function II(r,e){return Zl(r,"POST","/v1/accounts:signUp",Kr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Bn._fromIdTokenResponse(e,s,o),d=s0(s);return new Us({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=s0(s);return new Us({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function s0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends Zi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,rh.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new rh(e,n,s,o)}}function VE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?rh._fromErrorAndOperation(r,u,e,s):u})}async function CI(r,e,n=!1){const s=await zl(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Us._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(r,e,n=!1){const{auth:s}=r;if(On(s.app))return Promise.reject(Ki(s));const o="reauthenticate";try{const u=await zl(r,VE(s,o,e,r),n);Te(u.idToken,s,"internal-error");const d=dg(u.idToken);Te(d,s,"internal-error");const{sub:m}=d;return Te(r.uid===m,s,"user-mismatch"),Us._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Gn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ME(r,e,n=!1){if(On(r.app))return Promise.reject(Ki(r));const s="signIn",o=await VE(r,s,e),u=await Us._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function DI(r,e){return ME(qs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PE(r){const e=qs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OI(r,e,n){if(On(r.app))return Promise.reject(Ki(r));const s=qs(r),d=await Tm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",II).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&PE(r),p}),m=await Us._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function kI(r,e,n){return On(r.app)?Promise.reject(Ki(r)):DI(Vt(r),lo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&PE(r),s})}function VI(r,e,n,s){return Vt(r).onIdTokenChanged(e,n,s)}function MI(r,e,n){return Vt(r).beforeAuthStateChanged(e,n)}function PI(r,e,n,s){return Vt(r).onAuthStateChanged(e,n,s)}function jI(r){return Vt(r).signOut()}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI=1e3,LI=10;class UE extends jE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);nI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,LI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},UI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UE.type="LOCAL";const zI=UE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE extends jE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LE.type="SESSION";const zE=LE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Ih(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,u)),p=await BI(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ih.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const y=pg("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(w){const x=w;if(x.data.eventId===y)switch(x.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(x.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function HI(r){di().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function GI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function FI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function KI(){return BE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="firebaseLocalStorageDb",YI=1,ah="firebaseLocalStorage",HE="fbase_key";class Wl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ch(r,e){return r.transaction([ah],e?"readwrite":"readonly").objectStore(ah)}function QI(){const r=indexedDB.deleteDatabase(qE);return new Wl(r).toPromise()}function Am(){const r=indexedDB.open(qE,YI);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ah,{keyPath:HE})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ah)?e(s):(s.close(),await QI(),e(await Am()))})})}async function a0(r,e,n){const s=Ch(r,!0).put({[HE]:e,value:n});return new Wl(s).toPromise()}async function $I(r,e){const n=Ch(r,!1).get(e),s=await new Wl(n).toPromise();return s===void 0?null:s.value}function o0(r,e){const n=Ch(r,!0).delete(e);return new Wl(n).toPromise()}const XI=800,ZI=3;class GE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>ZI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ih._getInstance(KI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await GI(),!this.activeServiceWorker)return;this.sender=new qI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||FI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Am();return await a0(e,sh,"1"),await o0(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>a0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>$I(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>o0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Ch(o,!1).getAll();return new Wl(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GE.type="LOCAL";const JI=GE;new Xl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(r,e){return e?Hi(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends mg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function eC(r){return ME(r.auth,new yg(r),r.bypassAuthState)}function tC(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),NI(n,new yg(r),r.bypassAuthState)}async function nC(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),CI(n,new yg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eC;case"linkViaPopup":case"linkViaRedirect":return nC;case"reauthViaPopup":case"reauthViaRedirect":return tC;default:Gn(this.auth,"internal-error")}}resolve(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new Xl(2e3,1e4);class za extends FE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,za.currentPopupAction&&za.currentPopupAction.cancel(),za.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Xi(this.filter.length===1,"Popup operations only handle one event");const e=pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,za.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,iC.get())};e()}}za.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="pendingRedirect",zc=new Map;class sC extends FE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=zc.get(this.auth._key());if(!e){try{const s=await aC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}zc.set(this.auth._key(),e)}return this.bypassAuthState||zc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aC(r,e){const n=uC(e),s=lC(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function oC(r,e){zc.set(r._key(),e)}function lC(r){return Hi(r._redirectPersistence)}function uC(r){return Lc(rC,r.config.apiKey,r.name)}async function cC(r,e,n=!1){if(On(r.app))return Promise.reject(Ki(r));const s=qs(r),o=WI(s,e),d=await new sC(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=10*60*1e3;class dC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!KE(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(hi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hC&&this.cachedEventUids.clear(),this.cachedEventUids.has(l0(e))}saveEventToCache(e){this.cachedEventUids.add(l0(e)),this.lastProcessedEventTime=Date.now()}}function l0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function KE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return KE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(r,e={}){return Yr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pC=/^https?/;async function yC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await mC(r);for(const n of e)try{if(vC(n))return}catch{}Gn(r,"unauthorized-domain")}function vC(r){const e=bm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!pC.test(n))return!1;if(gC.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=new Xl(3e4,6e4);function u0(){const r=di().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function bC(r){return new Promise((e,n)=>{var s,o,u;function d(){u0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{u0(),n(hi(r,"network-request-failed"))},timeout:_C.get()})}if(!((o=(s=di().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=di().gapi)===null||u===void 0)&&u.load)d();else{const m=hI("iframefcb");return di()[m]=()=>{gapi.load?d():n(hi(r,"network-request-failed"))},NE(`${cI()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Bc=null,e})}let Bc=null;function EC(r){return Bc=Bc||bC(r),Bc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new Xl(5e3,15e3),AC="__/auth/iframe",wC="emulator/auth/iframe",SC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RC(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?hg(e,wC):`https://${r.config.authDomain}/${AC}`,s={apiKey:e.apiKey,appName:r.name,v:no},o=xC.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Hl(s).slice(1)}`}async function IC(r){const e=await EC(r),n=di().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:RC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=hi(r,"network-request-failed"),m=di().setTimeout(()=>{u(d)},TC.get());function p(){di().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NC=500,DC=600,OC="_blank",kC="http://localhost";class c0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VC(r,e,n,s=NC,o=DC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},CC),{width:s.toString(),height:o.toString(),top:u,left:d}),y=$t().toLowerCase();n&&(m=AE(y)?OC:n),EE(y)&&(e=e||kC,p.scrollbars="yes");const E=Object.entries(p).reduce((x,[V,G])=>`${x}${V}=${G},`,"");if(tI(y)&&m!=="_self")return MC(e||"",m),new c0(null);const w=window.open(e||"",m,E);Te(w,r,"popup-blocked");try{w.focus()}catch{}return new c0(w)}function MC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="__/auth/handler",jC="emulator/auth/handler",UC=encodeURIComponent("fac");async function h0(r,e,n,s,o,u){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:no,eventId:o};if(e instanceof kE){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",ow(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,w]of Object.entries({}))d[E]=w}if(e instanceof Jl){const E=e.getScopes().filter(w=>w!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),y=p?`#${UC}=${encodeURIComponent(p)}`:"";return`${LC(r)}?${Hl(m).slice(1)}${y}`}function LC({config:r}){return r.emulator?hg(r,jC):`https://${r.authDomain}/${PC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="webStorageSupport";class zC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zE,this._completeRedirectFn=cC,this._overrideRedirectResult=oC}async _openPopup(e,n,s,o){var u;Xi((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await h0(e,n,s,bm(),o);return VC(e,d,pg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await h0(e,n,s,bm(),o);return HI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Xi(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await IC(e),s=new dC(e);return n.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qf,{type:Qf},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Qf];d!==void 0&&n(!!d),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IE()||TE()||fg()}}const BC=zC;var d0="@firebase/auth",f0="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GC(r){Ka(new Os("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Te(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CE(r)},y=new oI(s,o,u,p);return yI(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ka(new Os("auth-internal",e=>{const n=qs(e.getProvider("auth").getImmediate());return(s=>new qC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vr(d0,f0,HC(r)),Vr(d0,f0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=5*60,KC=E0("authIdTokenMaxAge")||FC;let m0=null;const YC=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>KC)return;const o=n==null?void 0:n.token;m0!==o&&(m0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function QC(r=R0()){const e=Rm(r,"auth");if(e.isInitialized())return e.getImmediate();const n=pI(r,{popupRedirectResolver:BC,persistence:[JI,zI,zE]}),s=E0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=YC(u.toString());MI(n,d,()=>d(n.currentUser)),VI(n,m=>d(m))}}const o=_0("auth");return o&&vI(n,`http://${o}`),n}function $C(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}lI({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=hi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",$C().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GC("Browser");const XC={apiKey:"AIzaSyDiPG7ecBiVdu2G0SyLaHnzF31K8NRNtyA",authDomain:"summery-23833.firebaseapp.com",projectId:"summery-23833",storageBucket:"summery-23833.firebasestorage.app",messagingSenderId:"816198973728",appId:"1:816198973728:web:176ca98e3e5de114667f45",measurementId:"G-TJ39GVQV67"},YE=x0(XC),en=mR(YE),Dc=QC(YE),QE=pe.createContext(),eu=()=>{const r=pe.useContext(QE);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},ZC=({children:r})=>{const[e,n]=pe.useState(null),[s,o]=pe.useState(!0);pe.useEffect(()=>PI(Dc,E=>{n(E),o(!1)}),[]);const p={user:e,login:async(y,E)=>{try{return(await kI(Dc,y,E)).user}catch(w){throw w}},register:async(y,E)=>{try{return(await OI(Dc,y,E)).user}catch(w){throw w}},logout:async()=>{try{await jI(Dc)}catch(y){throw y}},loading:s};return v.jsx(QE.Provider,{value:p,children:r})},$E="https://api.github.com",JC="harukaze1216",WC="youtube-bgm-research";function e2(){return localStorage.getItem("github_token")||null}function XE(r){return{Authorization:`token ${r}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"}}async function t2(r){const e=e2();if(!e)throw new Error("GitHub Personal Access Tokenが設定されていません。設定ページでトークンを設定してください。");try{const n=n2(r.type,r.severity),s=i2(r),o=await fetch(`${$E}/repos/${JC}/${WC}/issues`,{method:"POST",headers:XE(e),body:JSON.stringify({title:r.title,body:s,labels:n})});if(!o.ok){const d=await o.json();throw new Error(`GitHub API Error: ${d.message||o.statusText}`)}const u=await o.json();return{success:!0,issue:{number:u.number,title:u.title,url:u.html_url,state:u.state,createdAt:u.created_at}}}catch(n){throw console.error("GitHub Issue作成エラー:",n),n}}function n2(r,e){const n=[];switch(r){case"bug":n.push("bug");break;case"feature":n.push("enhancement");break;case"question":n.push("question");break;default:n.push("feedback")}switch(e){case"critical":n.push("priority: critical");break;case"high":n.push("priority: high");break;case"medium":n.push("priority: medium");break;case"low":n.push("priority: low");break}return n.push("user-reported"),n}function i2(r){const n=new Date().toLocaleString("ja-JP",{timeZone:"Asia/Tokyo",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return`## 概要
${r.body}

## Issue詳細

**種別:** ${r2(r.type)}  
**重要度:** ${s2(r.severity)}  
**投稿日時:** ${n}

## 環境情報

**ブラウザ:** ${r.browserInfo||"Unknown"}  
**User Agent:** ${r.userAgent||"Unknown"}  
**URL:** ${window.location.href}

## 再現手順

${r.reproductionSteps||"未記入"}

## 期待する動作

${r.expectedBehavior||"未記入"}

## 実際の動作

${r.actualBehavior||"未記入"}

## 追加情報

${r.additionalInfo||"特になし"}

---
*この Issue は YouTube BGM チャンネル分析アプリから自動投稿されました*`}function r2(r){switch(r){case"bug":return"🐛 バグ報告";case"feature":return"✨ 機能要望";case"question":return"❓ 質問・サポート";default:return"💬 フィードバック"}}function s2(r){switch(r){case"critical":return"🚨 緊急";case"high":return"🔴 高";case"medium":return"🟡 中";case"low":return"🟢 低";default:return"🔵 通常"}}function a2(){const r=navigator.userAgent;let e="Unknown",n="Unknown";if(r.includes("Chrome")){e="Chrome";const s=r.match(/Chrome\/([0-9.]+)/);n=s?s[1]:"Unknown"}else if(r.includes("Firefox")){e="Firefox";const s=r.match(/Firefox\/([0-9.]+)/);n=s?s[1]:"Unknown"}else if(r.includes("Safari")){e="Safari";const s=r.match(/Version\/([0-9.]+)/);n=s?s[1]:"Unknown"}else if(r.includes("Edge")){e="Edge";const s=r.match(/Edge\/([0-9.]+)/);n=s?s[1]:"Unknown"}return`${e} ${n}`}function g0(r){return r&&r.trim()?(localStorage.setItem("github_token",r.trim()),!0):(localStorage.removeItem("github_token"),!1)}function ZE(){const r=localStorage.getItem("github_token");return r&&r.trim().length>0}async function o2(r){try{return(await fetch(`${$E}/user`,{headers:XE(r)})).ok}catch(e){return console.error("GitHub Token validation error:",e),!1}}const l2=({onClose:r})=>{const[e,n]=pe.useState({title:"",body:"",type:"bug",severity:"medium",reproductionSteps:"",expectedBehavior:"",actualBehavior:"",additionalInfo:""}),[s,o]=pe.useState(!1),[u,d]=pe.useState(null),[m,p]=pe.useState(!1),y=(V,G)=>{n(B=>({...B,[V]:G}))},E=async V=>{if(V.preventDefault(),!e.title.trim()){alert("タイトルを入力してください");return}if(!e.body.trim()){alert("内容を入力してください");return}if(!ZE()){alert("GitHub Personal Access Tokenが設定されていません。設定ページでトークンを設定してください。");return}o(!0),d(null);try{const G={...e,browserInfo:a2(),userAgent:navigator.userAgent},B=await t2(G);d({success:!0,message:"Issueが正常に作成されました！",issue:B.issue}),n({title:"",body:"",type:"bug",severity:"medium",reproductionSteps:"",expectedBehavior:"",actualBehavior:"",additionalInfo:""})}catch(G){console.error("Issue作成エラー:",G),d({success:!1,message:`エラーが発生しました: ${G.message}`})}finally{o(!1)}},w=[{value:"bug",label:"🐛 バグ報告",description:"予期しない動作や不具合"},{value:"feature",label:"✨ 機能要望",description:"新機能や改善の提案"},{value:"question",label:"❓ 質問・サポート",description:"使い方やその他の質問"}],x=[{value:"low",label:"🟢 低",description:"軽微な問題"},{value:"medium",label:"🟡 中",description:"通常の問題"},{value:"high",label:"🔴 高",description:"重要な問題"},{value:"critical",label:"🚨 緊急",description:"アプリが使用不可"}];return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 p-6",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"🐛 不具合・要望を報告"}),v.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:"×"})]}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"報告はGitHub Issuesに自動投稿されます"})]}),v.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"種別"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:w.map(V=>v.jsxs("label",{className:`cursor-pointer p-3 rounded-lg border-2 transition-colors ${e.type===V.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[v.jsx("input",{type:"radio",name:"type",value:V.value,checked:e.type===V.value,onChange:G=>y("type",G.target.value),className:"sr-only"}),v.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:V.label}),v.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:V.description})]},V.value))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"重要度"}),v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:x.map(V=>v.jsxs("label",{className:`cursor-pointer p-2 rounded-lg border-2 transition-colors ${e.severity===V.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[v.jsx("input",{type:"radio",name:"severity",value:V.value,checked:e.severity===V.value,onChange:G=>y("severity",G.target.value),className:"sr-only"}),v.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:V.label}),v.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:V.description})]},V.value))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"タイトル *"}),v.jsx("input",{type:"text",value:e.title,onChange:V=>y("title",V.target.value),className:"input-field",placeholder:"問題や要望を簡潔に記述してください",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"内容 *"}),v.jsx("textarea",{value:e.body,onChange:V=>y("body",V.target.value),className:"input-field h-32 resize-none",placeholder:"問題の詳細や要望内容を具体的に記述してください",required:!0})]}),v.jsx("div",{children:v.jsx("button",{type:"button",onClick:()=>p(!m),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium",children:m?"▼ 詳細項目を非表示":"▶ 詳細項目を表示（任意）"})}),m&&v.jsxs("div",{className:"space-y-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"再現手順"}),v.jsx("textarea",{value:e.reproductionSteps,onChange:V=>y("reproductionSteps",V.target.value),className:"input-field h-24 resize-none",placeholder:`1. 〜をクリック
2. 〜を入力
3. 問題が発生`})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"期待する動作"}),v.jsx("textarea",{value:e.expectedBehavior,onChange:V=>y("expectedBehavior",V.target.value),className:"input-field h-20 resize-none",placeholder:"本来どうなるべきかを記述してください"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"実際の動作"}),v.jsx("textarea",{value:e.actualBehavior,onChange:V=>y("actualBehavior",V.target.value),className:"input-field h-20 resize-none",placeholder:"実際に何が起こるかを記述してください"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"追加情報"}),v.jsx("textarea",{value:e.additionalInfo,onChange:V=>y("additionalInfo",V.target.value),className:"input-field h-20 resize-none",placeholder:"スクリーンショットのURL、関連情報など"})]})]}),u&&v.jsxs("div",{className:`p-4 rounded-lg ${u.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[v.jsx("div",{className:"font-medium mb-2",children:u.success?"✅ 成功":"❌ エラー"}),v.jsx("div",{className:"text-sm mb-2",children:u.message}),u.success&&u.issue&&v.jsx("div",{className:"text-sm",children:v.jsxs("a",{href:u.issue.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:["Issue #",u.issue.number," を確認する →"]})})]}),v.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[v.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"キャンセル"}),v.jsx("button",{type:"submit",disabled:s||!e.title.trim()||!e.body.trim(),className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:s?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"投稿中..."]}):v.jsx(v.Fragment,{children:"📤 投稿する"})})]})]})]})})},u2=({currentView:r,onViewChange:e})=>{const{user:n,logout:s}=eu(),[o,u]=pe.useState(!1),[d,m]=pe.useState(!1);pe.useEffect(()=>{const E=localStorage.getItem("theme"),w=window.matchMedia("(prefers-color-scheme: dark)").matches;E==="dark"||!E&&w?(u(!0),document.documentElement.classList.add("dark")):(u(!1),document.documentElement.classList.remove("dark"))},[]);const p=()=>{const E=!o;u(E),E?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},y=[{id:"channels",label:"チャンネル一覧",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"history",label:"履歴",icon:"📋"},{id:"settings",label:"設定",icon:"⚙️"}];return v.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors",children:[v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[v.jsxs("div",{className:"flex justify-between items-center h-16",children:[v.jsx("div",{className:"flex items-center min-w-0 flex-1",children:v.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white truncate",children:"🎵 YouTube BGM分析"})}),v.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[v.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 hidden sm:block truncate max-w-32",children:n==null?void 0:n.email}),v.jsx("button",{onClick:()=>m(!0),className:"p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"不具合・要望を報告",children:"🐛"}),v.jsx("button",{onClick:p,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"ダークモード切り替え",children:o?"☀️":"🌙"}),v.jsx("button",{onClick:s,className:"p-2 text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"ログアウト",children:"🚪"})]})]}),v.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700",children:v.jsx("nav",{className:"flex space-x-0 overflow-x-auto",children:y.map(E=>v.jsxs("button",{onClick:()=>e(E.id),className:`flex-shrink-0 px-4 py-3 text-sm font-medium border-b-2 transition-colors ${r===E.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:border-gray-300 dark:hover:border-gray-600"}`,children:[v.jsx("span",{className:"mr-2",children:E.icon}),v.jsx("span",{className:"whitespace-nowrap",children:E.label})]},E.id))})})]}),d&&v.jsx(l2,{onClose:()=>m(!1)})]})},c2=({onAddChannel:r})=>{const[e,n]=pe.useState(""),[s,o]=pe.useState(!1),u=async d=>{if(d.preventDefault(),!!e.trim()){o(!0);try{await r(e.trim()),n("")}catch(m){console.error("チャンネル追加エラー:",m)}finally{o(!1)}}};return v.jsxs("div",{className:"card mb-8",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"チャンネル検索・追加"}),v.jsxs("form",{onSubmit:u,className:"flex gap-4",children:[v.jsx("input",{type:"text",value:e,onChange:d=>n(d.target.value),placeholder:"チャンネルURL または チャンネルID を入力",className:"input-field flex-1",disabled:s}),v.jsx("button",{type:"submit",disabled:s||!e.trim(),className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:s?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"分析中..."]}):v.jsx(v.Fragment,{children:"📊 分析追加"})})]})]})},h2=({filters:r,onFiltersChange:e})=>{const n=u=>{e({...r,sortBy:u})},s=u=>{e({...r,filterBy:u})},o=u=>{e({...r,search:u})};return v.jsx("div",{className:"card mb-8",children:v.jsxs("div",{className:"flex flex-wrap gap-6 items-center",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"並び替え:"}),v.jsxs("select",{value:r.sortBy,onChange:u=>n(u.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[v.jsx("option",{value:"growth_rate",children:"成長率順"}),v.jsx("option",{value:"subscribers",children:"登録者数順"}),v.jsx("option",{value:"views",children:"再生回数順"}),v.jsx("option",{value:"recent_videos",children:"最新動画数順"}),v.jsx("option",{value:"added_date",children:"追加日順"})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"フィルター:"}),v.jsxs("select",{value:r.filterBy,onChange:u=>s(u.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[v.jsx("option",{value:"unset",children:"未仕分け"}),v.jsx("option",{value:"all",children:"全て"}),v.jsx("option",{value:"tracking",children:"トラッキング中"}),v.jsx("option",{value:"non-tracking",children:"対象外"}),v.jsx("option",{value:"rejected",children:"除外済み"}),v.jsx("option",{value:"growing",children:"成長中"}),v.jsx("option",{value:"large",children:"大規模"}),v.jsx("option",{value:"small",children:"小規模"})]})]}),v.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"検索:"}),v.jsx("input",{type:"text",value:r.search,onChange:u=>o(u.target.value),placeholder:"チャンネル名検索...",className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent flex-1 min-w-0"})]})]})})},d2=({channels:r})=>{const e=r.length,n=r.length>0?Math.round(r.reduce((o,u)=>o+(u.growthRate||0),0)/r.length):0,s=r.length>0?r.reduce((o,u)=>(u.growthRate||0)>(o.growthRate||0)?u:o,r[0]):null;return v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[v.jsxs("div",{className:"stat-card",children:[v.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:e}),v.jsx("div",{className:"text-sm text-gray-600",children:"追跡チャンネル数"})]}),v.jsxs("div",{className:"stat-card",children:[v.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:[n,"%"]}),v.jsx("div",{className:"text-sm text-gray-600",children:"平均成長率"})]}),v.jsxs("div",{className:"stat-card",children:[v.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1 truncate",children:s?s.channelTitle:"-"}),v.jsx("div",{className:"text-sm text-gray-600",children:"トップパフォーマー"})]})]})};async function Nh(r){if(!r)throw new Error("ユーザーIDが必要です");try{const e=await cE(Fi(en,"settings",r));if(!e.exists())throw new Error(`⚠️ 設定が見つかりません。

📋 対処法：
1. 画面右上の「設定」タブをクリック
2. YouTube APIキーを入力して保存
3. 再度お試しください`);const n=e.data().youtubeApiKey;if(!n||n.trim()==="")throw new Error(`🔑 YouTube APIキーが設定されていません。

📋 設定手順：
1. Google Cloud Consoleでプロジェクトを作成
2. YouTube Data API v3を有効化
3. APIキーを作成
4. 設定画面でAPIキーを入力`);if(!n.startsWith("AIza")||n.length<35)throw new Error(`❌ APIキーの形式が正しくありません。

YouTube Data API v3のAPIキーは「AIza」で始まり、39文字の長さである必要があります。`);return n}catch(e){throw console.error("APIキー取得エラー:",e),e}}function f2(r){const e=r.trim(),n=[/youtube\.com\/channel\/([UC][a-zA-Z0-9_-]{22})/,/youtube\.com\/c\/([a-zA-Z0-9_-]+)/,/youtube\.com\/user\/([a-zA-Z0-9_-]+)/,/youtube\.com\/@([a-zA-Z0-9_-]+)/,/^(UC[a-zA-Z0-9_-]{22})$/];for(const s of n){const o=e.match(s);if(o)return o[1]}return e}async function m2(r,e){var n,s,o,u,d,m,p;try{const y=await Nh(e),E="https://www.googleapis.com/youtube/v3/channels",w=new URLSearchParams({key:y,id:r,part:"snippet,statistics,contentDetails"}),x=await fetch(`${E}?${w}`),V=await x.json();if(!x.ok)throw new Error(((n=V.error)==null?void 0:n.message)||"API呼び出しエラー");if(!V.items||V.items.length===0)throw new Error("チャンネルが見つかりません");const G=V.items[0],B=G.snippet,Q=G.statistics;return{channelId:G.id,channelTitle:B.title,description:B.description,thumbnailUrl:((o=(s=B.thumbnails)==null?void 0:s.high)==null?void 0:o.url)||((d=(u=B.thumbnails)==null?void 0:u.default)==null?void 0:d.url),channelUrl:`https://www.youtube.com/channel/${G.id}`,subscriberCount:parseInt(Q.subscriberCount)||0,videoCount:parseInt(Q.videoCount)||0,totalViews:parseInt(Q.viewCount)||0,publishedAt:B.publishedAt,uploadsPlaylistId:(p=(m=G.contentDetails)==null?void 0:m.relatedPlaylists)==null?void 0:p.uploads}}catch(y){throw console.error("チャンネル情報取得エラー:",y),y}}async function g2(r,e){var n;try{const s=await Nh(e),o="https://www.googleapis.com/youtube/v3/playlistItems";let u=null,d="",m=0;const p=10;console.log(`📹 最初の動画を検索中: ${r}`);do{const y=new URLSearchParams({key:s,playlistId:r,part:"snippet",maxResults:50});d&&y.append("pageToken",d);const E=await fetch(`${o}?${y}`),w=await E.json();if(!E.ok)throw new Error(((n=w.error)==null?void 0:n.message)||"API呼び出しエラー");if(w.items&&w.items.length>0){for(const x of w.items){const V=new Date(x.snippet.publishedAt);(!u||V<new Date(u.publishedAt))&&(u={title:x.snippet.title,publishedAt:x.snippet.publishedAt,videoId:x.snippet.resourceId.videoId})}console.log(`   ページ ${m+1}: ${w.items.length}本の動画をチェック`),console.log(`   現在の最古動画: ${u==null?void 0:u.title} (${u==null?void 0:u.publishedAt})`)}d=w.nextPageToken,m++,await new Promise(x=>setTimeout(x,100))}while(d&&m<p);return console.log(`✅ 最初の動画検索完了: ${(u==null?void 0:u.title)||"なし"}`),u}catch(s){return console.error("最初の動画取得エラー:",s),null}}async function p2(r){try{const e=Ms(en,"bgm_channels"),n=Ps(e,Hr("channelId","==",r));return!(await eo(n)).empty}catch(e){return console.error("チャンネル存在チェックエラー:",e),!1}}function y2(r,e){const n=["BGM","instrumental","background music","ambient","lo-fi","lofi","chill","relaxing","study music","meditation","sleep music","インスト","インストゥルメンタル","ヒーリング","リラックス","作業用","勉強用","睡眠用","瞑想","アンビエント"],s=["lyrics","歌詞","vocal","sing","singing","song","rap","talk","podcast","ボーカル","歌","歌い手","トーク","ラップ"],o=`${r} ${e}`.toLowerCase();for(const u of s)if(o.includes(u.toLowerCase()))return!1;for(const u of n)if(o.includes(u.toLowerCase()))return!0;return!1}async function v2(r,e){var n,s,o,u,d,m,p,y;try{if(!r)return console.error("uploadsPlaylistId is required"),null;const E=await Nh(e),w="https://www.googleapis.com/youtube/v3/playlistItems";let x=null,V="",G=0;const B=5;console.log(`🔥 最も人気の動画を検索中: ${r}`);do{const Q=new URLSearchParams({key:E,playlistId:r,part:"snippet",maxResults:50});V&&Q.append("pageToken",V);const ue=new AbortController,he=setTimeout(()=>ue.abort(),1e4),le=await fetch(`${w}?${Q}`,{signal:ue.signal});clearTimeout(he);const de=await le.json();if(!le.ok)throw(s=(n=de.error)==null?void 0:n.message)!=null&&s.includes("quota")?new Error("YouTube API の使用量制限に達しました。しばらく待ってから再試行してください。"):new Error(((o=de.error)==null?void 0:o.message)||"API呼び出しエラー");if(de.items&&de.items.length>0){const Y=de.items.map(D=>D.snippet.resourceId.videoId),Z=await _2(Y,e);for(let D=0;D<de.items.length;D++){const S=de.items[D],R=Z[S.snippet.resourceId.videoId];if(R){const O=parseInt(R.viewCount)||0;(!x||O>x.viewCount)&&(x={title:S.snippet.title,viewCount:O,likeCount:parseInt(R.likeCount)||0,commentCount:parseInt(R.commentCount)||0,publishedAt:S.snippet.publishedAt,thumbnailUrl:((d=(u=S.snippet.thumbnails)==null?void 0:u.high)==null?void 0:d.url)||((p=(m=S.snippet.thumbnails)==null?void 0:m.default)==null?void 0:p.url),videoId:S.snippet.resourceId.videoId,url:`https://www.youtube.com/watch?v=${S.snippet.resourceId.videoId}`})}}console.log(`   ページ ${G+1}: ${de.items.length}本の動画をチェック`),console.log(`   現在の最人気動画: ${x==null?void 0:x.title} (${(y=x==null?void 0:x.viewCount)==null?void 0:y.toLocaleString()}回再生)`)}V=de.nextPageToken,G++,await new Promise(Y=>setTimeout(Y,200))}while(V&&G<B);return console.log(`✅ 最人気動画検索完了: ${(x==null?void 0:x.title)||"なし"}`),x}catch(E){return console.error("最人気動画取得エラー:",E),null}}async function _2(r,e){var n;try{const s=await Nh(e),o="https://www.googleapis.com/youtube/v3/videos",u=new URLSearchParams({key:s,id:r.join(","),part:"statistics"}),d=await fetch(`${o}?${u}`),m=await d.json();if(!d.ok)throw new Error(((n=m.error)==null?void 0:n.message)||"API呼び出しエラー");const p={};return m.items&&m.items.forEach(y=>{p[y.id]=y.statistics}),p}catch(s){return console.error("動画統計取得エラー:",s),{}}}function b2(r,e){try{const n=e?new Date(e.publishedAt):new Date(r.publishedAt),o=(new Date-n)/(1e3*60*60*24*30);if(o<=0)return 0;const d=r.subscriberCount/o/1e3*100;return Math.round(Math.min(d,999))}catch(n){return console.error("成長率計算エラー:",n),0}}async function E2(r,e){try{const n=Ms(en,"bgm_channels");return await NR(n,{...r,userId:e,createdAt:new Date,addedManually:!0}),!0}catch(n){throw console.error("Firestore保存エラー:",n),n}}async function JE(r){try{const e=Fi(en,"bgm_channels",r);await dE(e,{isViewed:!0,viewedAt:OR()}),console.log(`Channel marked as viewed: ${r}`)}catch(e){throw console.error("Error marking channel as viewed:",e),e}}async function T2(r,e,n=null){try{const s=Fi(en,"bgm_channels",r),o={status:e,statusUpdatedAt:new Date,statusUpdatedBy:"user"};return n&&(o.rejectionReason=n),await dE(s,o),console.log(`✅ Updated channel status: ${r} -> ${e}`),!0}catch(s){return console.error(`Error updating channel status for ${r}:`,s),!1}}async function Sl(r="all",e,n={}){try{let s=Ms(en,"bgm_channels");e&&(s=Ps(s,Hr("userId","==",e))),r!=="all"&&r!=="unset"&&(s=Ps(s,Hr("status","==",r)));const o=await eo(s),u=[];o.forEach(m=>{const p=m.data();u.push({id:m.id,...p})});let d=u;return r==="unset"&&(d=u.filter(m=>!m.status||m.status===null||m.status===void 0||m.status==="")),console.log(`📊 Found ${d.length} channels with status: ${r} for user: ${e}`),d}catch(s){return console.error("Error getting channels by status:",s),[]}}const Ba=Object.freeze(Object.defineProperty({__proto__:null,addChannelToFirestore:E2,calculateGrowthRate:b2,checkChannelExists:p2,extractChannelId:f2,fetchChannelFirstVideo:g2,fetchChannelInfo:m2,fetchChannelMostPopularVideo:v2,getChannelsByStatus:Sl,isBGMChannel:y2,markChannelAsViewed:JE,updateChannelStatus:T2},Symbol.toStringTag,{value:"Module"})),A2=({channel:r,onStatusChange:e})=>{const[n,s]=pe.useState(!1),[o,u]=pe.useState(""),d=x=>{switch(x){case"tracking":return{text:"トラッキング中",className:"bg-green-100 text-green-800 border border-green-300"};case"non-tracking":return{text:"対象外",className:"bg-yellow-100 text-yellow-800 border border-yellow-300"};case"rejected":return{text:"除外済み",className:"bg-red-100 text-red-800 border border-red-300"};default:return null}},m=x=>{x.stopPropagation(),e(r.id,"tracking")},p=x=>{x.stopPropagation(),e(r.id,"non-tracking")},y=x=>{x.stopPropagation(),s(!0)},E=()=>{e(r.id,"rejected",o||"手動で除外"),s(!1),u("")},w=d(r.status);return w?v.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${w.className}`,children:w.text}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex gap-1",children:[v.jsx("button",{onClick:m,className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 border border-green-300 rounded hover:bg-green-200 transition-colors min-w-[48px]",title:"トラッキング対象に追加",children:"追跡"}),v.jsx("button",{onClick:p,className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-300 rounded hover:bg-yellow-200 transition-colors min-w-[48px]",title:"トラッキング対象外に設定",children:"対象外"}),v.jsx("button",{onClick:y,className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 border border-red-300 rounded hover:bg-red-200 transition-colors min-w-[48px]",title:"完全に除外",children:"除外"})]}),n&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>s(!1),children:v.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",onClick:x=>x.stopPropagation(),children:[v.jsx("h3",{className:"text-lg font-semibold mb-4",children:"チャンネルを除外"}),v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["「",r.channelTitle,"」を除外します。理由を入力してください（任意）："]}),v.jsx("textarea",{value:o,onChange:x=>u(x.target.value),className:"w-full p-3 border rounded-lg resize-none h-20 text-sm",placeholder:"除外理由（例：BGM以外のコンテンツ、品質が低い、など）"}),v.jsxs("div",{className:"flex gap-3 mt-4",children:[v.jsx("button",{onClick:()=>s(!1),className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"キャンセル"}),v.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"除外する"})]})]})})]})},WE=({channel:r,onChannelClick:e,onAddToTracking:n,onStatusChange:s})=>{const[o,u]=pe.useState(r.isViewed||!1),d=w=>w>=1e6?`${(w/1e6).toFixed(1)}M`:w>=1e3?`${(w/1e3).toFixed(1)}K`:w.toString(),m=w=>w?(w.toDate?w.toDate():new Date(w)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}):"-",p=w=>w>=50?"bg-green-100 text-green-800":w>=20?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",y=w=>{if(o||!w)return!1;const x=w.toDate?w.toDate():new Date(w);return(Date.now()-x.getTime())/(1e3*60*60*24)<=7},E=async()=>{if(!o&&r.id)try{await JE(r.id),u(!0)}catch(w){console.error("Error marking channel as viewed:",w)}e&&e(r)};return v.jsx("div",{className:"channel-card cursor-pointer",onClick:E,children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("img",{src:r.thumbnailUrl||"/default-avatar.png",alt:r.channelTitle,className:"w-16 h-16 rounded-full object-cover flex-shrink-0",onError:w=>{w.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:r.channelTitle}),y(r.createdAt)&&v.jsx("span",{className:"inline-block px-2 py-1 text-xs font-bold bg-red-100 text-red-800 rounded-full animate-pulse",children:"NEW!"})]}),v.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:[d(r.subscriberCount)," 登録者"]}),v.jsx("span",{className:"text-sm text-gray-500",children:"•"}),v.jsxs("span",{className:"text-sm text-gray-600",children:["開設: ",m(r.publishedAt)]})]}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.keywords&&r.keywords.slice(0,3).map((w,x)=>v.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:w},x))}),r.latestVideo&&v.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[v.jsx("span",{className:"font-medium",children:"最新:"})," ",r.latestVideo.title]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${p(r.growthRate||0)}`,children:["成長率 ",r.growthRate||0,"%"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx(A2,{channel:r,onStatusChange:s||(async(w,x,V)=>{const{updateChannelStatus:G}=await La(async()=>{const{updateChannelStatus:B}=await Promise.resolve().then(()=>Ba);return{updateChannelStatus:B}},void 0);await G(w,x,V),window.location.reload()})}),v.jsx("button",{onClick:w=>{w.stopPropagation(),window.open(r.channelUrl,"_blank")},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"訪問 →"})]})]})]})]})})},w2=({channels:r,onChannelClick:e,onAddToTracking:n,onStatusChange:s})=>r.length===0?v.jsxs("div",{className:"text-center py-16",children:[v.jsx("div",{className:"text-6xl mb-4",children:"📈"}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"まだチャンネルが追加されていません"}),v.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"上記の検索欄からYouTubeチャンネルを追加して分析を開始してください"})]}):v.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(o=>v.jsx(WE,{channel:o,onChannelClick:e,onAddToTracking:n,onStatusChange:s},o.channelId))}),S2=({channel:r,isOpen:e,onClose:n,onRemove:s})=>{if(!e||!r)return null;const o=m=>m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(1)}K`:m.toString(),u=m=>m?(m.toDate?m.toDate():new Date(m)).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"-",d=()=>{confirm("このチャンネルを追跡リストから削除しますか？")&&(s(r.id),n())};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"チャンネル詳細"}),v.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]}),v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[v.jsx("img",{src:r.thumbnailUrl||"/default-avatar.png",alt:r.channelTitle,className:"w-24 h-24 rounded-full object-cover",onError:m=>{m.target.src="https://via.placeholder.com/96x96/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.channelTitle}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"登録者数:"}),v.jsx("span",{className:"ml-2 font-semibold",children:o(r.subscriberCount)})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"総再生回数:"}),v.jsx("span",{className:"ml-2 font-semibold",children:o(r.totalViews||0)})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"動画数:"}),v.jsx("span",{className:"ml-2 font-semibold",children:r.videoCount||"-"})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"開設日:"}),v.jsx("span",{className:"ml-2 font-semibold",children:u(r.publishedAt)})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"初投稿:"}),v.jsx("span",{className:"ml-2 font-semibold",children:u(r.firstVideoDate)})]}),v.jsxs("div",{className:"col-span-2",children:[v.jsx("span",{className:"text-gray-600",children:"成長率:"}),v.jsxs("span",{className:"ml-2 font-semibold text-blue-600",children:[r.growthRate||0,"%"]})]})]})]})]}),r.keywords&&r.keywords.length>0&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-2",children:"タグ"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:r.keywords.map((m,p)=>v.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-full",children:m},p))})]}),r.latestVideo&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"最新動画"}),v.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[v.jsx("h6",{className:"font-medium text-gray-900 mb-1",children:r.latestVideo.title}),v.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["投稿日: ",u(r.latestVideo.publishedAt)]}),v.jsx("a",{href:r.latestVideo.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"動画を見る →"})]})]}),r.mostPopularVideo&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"🔥 最も人気の動画"}),v.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:v.jsxs("div",{className:"flex gap-4",children:[r.mostPopularVideo.thumbnailUrl&&v.jsx("img",{src:r.mostPopularVideo.thumbnailUrl,alt:r.mostPopularVideo.title,className:"w-24 h-18 rounded object-cover flex-shrink-0"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h6",{className:"font-medium text-gray-900 mb-2 line-clamp-2",children:r.mostPopularVideo.title}),v.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[v.jsxs("span",{className:"flex items-center gap-1",children:["👁️ ",o(r.mostPopularVideo.viewCount)," 回視聴"]}),r.mostPopularVideo.likeCount>0&&v.jsxs("span",{className:"flex items-center gap-1",children:["👍 ",o(r.mostPopularVideo.likeCount)]}),r.mostPopularVideo.commentCount>0&&v.jsxs("span",{className:"flex items-center gap-1",children:["💬 ",o(r.mostPopularVideo.commentCount)]})]}),v.jsx("a",{href:r.mostPopularVideo.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 text-sm font-medium",children:"動画を見る →"})]})]})})]})]}),v.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[v.jsx("button",{onClick:()=>window.open(r.channelUrl,"_blank"),className:"btn-primary flex-1",children:"チャンネル訪問"}),v.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors",children:"追跡削除"})]})]})})},x2=()=>{const{user:r}=eu(),[e,n]=pe.useState({youtubeApiKey:"",githubToken:"",searchKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music"],collectionFrequency:"daily",keywordCount:8,videosPerKeyword:40,maxChannelsPerRun:150,monthsThreshold:3,minSubscribers:1e3,maxSubscribers:5e5,minVideos:5,minGrowthRate:10,bgmKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music","meditation","sleep music"],bgmExclusions:["lyrics","歌詞","vocal","sing","rap","talk","podcast"],trackingFrequency:"weekly",trackingRetentionDays:365,theme:"light",defaultSort:"growthRate",itemsPerPage:20,enableApiUsageDisplay:!0,maxDailyApiCalls:1e4}),[s,o]=pe.useState(!0),[u,d]=pe.useState(!1),[m,p]=pe.useState(""),[y,E]=pe.useState("basic"),[w,x]=pe.useState("unchecked");pe.useEffect(()=>{r&&V()},[r]);const V=async()=>{if(r)try{const Y=await cE(Fi(en,"settings",r.uid));Y.exists()&&n(Z=>({...Z,...Y.data()})),ZE()&&(x("valid"),n(Z=>({...Z,githubToken:"●●●●●●●●●●●●"})))}catch(Y){console.error("設定の読み込みエラー:",Y),p("設定の読み込みに失敗しました")}finally{o(!1)}},G=async()=>{try{if(d(!0),e.githubToken&&e.githubToken!=="●●●●●●●●●●●●")if(await o2(e.githubToken))g0(e.githubToken),x("valid"),p("設定を保存しました（GitHub Token有効）");else{x("invalid"),p("GitHub Tokenが無効です");return}else e.githubToken===""&&(g0(""),x("unchecked"));const Y={...e};delete Y.githubToken,await _m(Fi(en,"settings",r.uid),Y),(!e.githubToken||e.githubToken==="●●●●●●●●●●●●")&&p("設定を保存しました"),setTimeout(()=>p(""),3e3)}catch(Y){console.error("設定の保存エラー:",Y),p("設定の保存に失敗しました")}finally{d(!1)}},B=async Y=>{if(r)try{const Z=await eo(Ps(Ms(en,"bgm_channels"),Hr("userId","==",r.uid))),D=await eo(Ps(Ms(en,"tracking_data"),Hr("userId","==",r.uid))),S=Z.docs.map(M=>({id:M.id,...M.data()})),R=D.docs.map(M=>({id:M.id,...M.data()})),O={channels:S,tracking:R,exportedAt:new Date().toISOString()};if(Y==="csv"){const M=Q(S);ue(M,"youtube-bgm-channels.csv","text/csv")}else{const M=JSON.stringify(O,null,2);ue(M,"youtube-bgm-data.json","application/json")}p(`${Y.toUpperCase()}でエクスポートしました`)}catch(Z){console.error("エクスポートエラー:",Z),p("エクスポートに失敗しました")}},Q=Y=>{const Z=["チャンネル名","チャンネルID","登録者数","動画数","成長率(%)","開設日","最初の動画日","キーワード","URL"],D=Y.map(S=>[S.channelTitle||"",S.channelId||"",S.subscriberCount||0,S.videoCount||0,S.growthRate||0,S.publishedAt?new Date(S.publishedAt).toLocaleDateString("ja-JP"):"",S.firstVideoDate?new Date(S.firstVideoDate).toLocaleDateString("ja-JP"):"",(S.keywords||[]).join("; "),S.channelUrl||""]);return[Z,...D].map(S=>S.map(R=>`"${String(R).replace(/"/g,'""')}"`).join(",")).join(`
`)},ue=(Y,Z,D)=>{const S=new Blob([Y],{type:D}),R=URL.createObjectURL(S),O=document.createElement("a");O.href=R,O.download=Z,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(R)},he=Y=>{const Z=prompt(`新しい${Y==="search"?"検索":Y==="bgm"?"BGM":"除外"}キーワードを入力してください:`);if(Z&&Z.trim()){const D=Y==="search"?"searchKeywords":Y==="bgm"?"bgmKeywords":"bgmExclusions";n(S=>({...S,[D]:[...S[D],Z.trim()]}))}},le=(Y,Z)=>{const D=Y==="search"?"searchKeywords":Y==="bgm"?"bgmKeywords":"bgmExclusions";n(S=>({...S,[D]:S[D].filter((R,O)=>O!==Z)}))},de=[{id:"basic",label:"基本設定",icon:"⚙️"},{id:"collection",label:"収集設定",icon:"🔍"},{id:"filtering",label:"フィルタリング",icon:"📊"},{id:"bgm",label:"BGM判定",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"display",label:"表示設定",icon:"🎨"},{id:"data",label:"データ管理",icon:"💾"},{id:"security",label:"セキュリティ",icon:"🔒"}];return s?v.jsx("div",{className:"flex items-center justify-center min-h-96",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v.jsx("div",{className:"max-w-6xl mx-auto p-6",children:v.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[v.jsxs("div",{className:"border-b border-gray-200 p-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"設定"}),v.jsx("p",{className:"text-gray-600 mt-1",children:"アプリケーションの動作をカスタマイズできます"}),m&&v.jsx("div",{className:`mt-4 p-3 rounded-md ${m.includes("失敗")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:m})]}),v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"w-64 border-r border-gray-200 p-4",children:v.jsx("nav",{className:"space-y-1",children:de.map(Y=>v.jsxs("button",{onClick:()=>E(Y.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${y===Y.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[v.jsx("span",{className:"mr-2",children:Y.icon}),Y.label]},Y.id))})}),v.jsxs("div",{className:"flex-1 p-6",children:[y==="basic"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"基本設定"}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube API キー"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"password",value:e.youtubeApiKey,onChange:Y=>n(Z=>({...Z,youtubeApiKey:Y.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 pr-10 ${e.youtubeApiKey?"border-green-300":"border-gray-300"}`,placeholder:"YouTube Data API v3 キーを入力"}),v.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.youtubeApiKey&&v.jsx("span",{className:"text-green-500",children:"✓"})})]}),v.jsxs("div",{className:"text-sm text-gray-500 mt-1 space-y-1",children:[v.jsxs("p",{children:["🔑 ",v.jsx("strong",{children:"自分でAPIキーを取得してください："})]}),v.jsxs("ol",{className:"list-decimal list-inside ml-4 space-y-1",children:[v.jsxs("li",{children:[v.jsx("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Google Cloud Console"})," でプロジェクトを作成"]}),v.jsx("li",{children:"「YouTube Data API v3」を有効化"}),v.jsx("li",{children:"認証情報でAPIキーを作成し、API制限を設定"}),v.jsx("li",{children:"作成したAPIキーをここに入力"})]}),v.jsx("p",{className:"text-amber-600 font-medium",children:"⚠️ 各ユーザーが個別にAPIキーを設定する必要があります"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Personal Access Token"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"password",value:e.githubToken,onChange:Y=>n(Z=>({...Z,githubToken:Y.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 pr-10 ${w==="valid"?"border-green-300":w==="invalid"?"border-red-300":"border-gray-300"}`,placeholder:"ghp_xxxxxxxxxxxxxxxxxx"}),v.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:[w==="valid"&&v.jsx("span",{className:"text-green-500",children:"✓"}),w==="invalid"&&v.jsx("span",{className:"text-red-500",children:"✗"})]})]}),v.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"不具合・要望報告機能でGitHub Issuesに投稿するために必要です"}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"GitHub Settings → Developer settings → Personal access tokens で作成"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索キーワード"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.searchKeywords.map((Y,Z)=>v.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[Y,v.jsx("button",{onClick:()=>le("search",Z),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},Z))}),v.jsx("button",{onClick:()=>he("search"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),y==="collection"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"収集設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"収集頻度"}),v.jsxs("select",{value:e.collectionFrequency,onChange:Y=>n(Z=>({...Z,collectionFrequency:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"daily",children:"毎日"}),v.jsx("option",{value:"weekly",children:"毎週"}),v.jsx("option",{value:"monthly",children:"毎月"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"使用キーワード数"}),v.jsx("input",{type:"number",value:e.keywordCount,onChange:Y=>n(Z=>({...Z,keywordCount:parseInt(Y.target.value)||8})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"キーワードあたり動画数"}),v.jsx("input",{type:"number",value:e.videosPerKeyword,onChange:Y=>n(Z=>({...Z,videosPerKeyword:parseInt(Y.target.value)||40})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"10",max:"100"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大チャンネル処理数"}),v.jsx("input",{type:"number",value:e.maxChannelsPerRun,onChange:Y=>n(Z=>({...Z,maxChannelsPerRun:parseInt(Y.target.value)||150})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"50",max:"500"})]})]})]}),y==="filtering"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"フィルタリング設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"チャンネル作成期間（ヶ月）"}),v.jsx("input",{type:"number",value:e.monthsThreshold,onChange:Y=>n(Z=>({...Z,monthsThreshold:parseInt(Y.target.value)||3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"12"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小登録者数"}),v.jsx("input",{type:"number",value:e.minSubscribers,onChange:Y=>n(Z=>({...Z,minSubscribers:parseInt(Y.target.value)||1e3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"100"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大登録者数"}),v.jsx("input",{type:"number",value:e.maxSubscribers,onChange:Y=>n(Z=>({...Z,maxSubscribers:parseInt(Y.target.value)||5e5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小動画数"}),v.jsx("input",{type:"number",value:e.minVideos,onChange:Y=>n(Z=>({...Z,minVideos:parseInt(Y.target.value)||5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小成長率（%）"}),v.jsx("input",{type:"number",value:e.minGrowthRate,onChange:Y=>n(Z=>({...Z,minGrowthRate:parseInt(Y.target.value)||10})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"0"})]})]})]}),y==="bgm"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"BGM判定設定"}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BGM関連キーワード"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.bgmKeywords.map((Y,Z)=>v.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:[Y,v.jsx("button",{onClick:()=>le("bgm",Z),className:"ml-1 text-green-600 hover:text-green-800",children:"×"})]},Z))}),v.jsx("button",{onClick:()=>he("bgm"),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"+ キーワードを追加"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"除外キーワード"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.bgmExclusions.map((Y,Z)=>v.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:[Y,v.jsx("button",{onClick:()=>le("exclusion",Z),className:"ml-1 text-red-600 hover:text-red-800",children:"×"})]},Z))}),v.jsx("button",{onClick:()=>he("exclusion"),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),y==="tracking"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"トラッキング設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"トラッキング頻度"}),v.jsxs("select",{value:e.trackingFrequency,onChange:Y=>n(Z=>({...Z,trackingFrequency:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"daily",children:"毎日"}),v.jsx("option",{value:"weekly",children:"毎週"}),v.jsx("option",{value:"monthly",children:"毎月"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"データ保持期間（日）"}),v.jsx("input",{type:"number",value:e.trackingRetentionDays,onChange:Y=>n(Z=>({...Z,trackingRetentionDays:parseInt(Y.target.value)||365})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"30",max:"1095"})]})]})]}),y==="display"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"表示設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テーマ"}),v.jsxs("select",{value:e.theme,onChange:Y=>n(Z=>({...Z,theme:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"light",children:"ライト"}),v.jsx("option",{value:"dark",children:"ダーク"}),v.jsx("option",{value:"auto",children:"自動"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"デフォルト並び順"}),v.jsxs("select",{value:e.defaultSort,onChange:Y=>n(Z=>({...Z,defaultSort:Y.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"growthRate",children:"成長率順"}),v.jsx("option",{value:"subscriberCount",children:"登録者数順"}),v.jsx("option",{value:"publishedAt",children:"新着順"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1ページの表示件数"}),v.jsxs("select",{value:e.itemsPerPage,onChange:Y=>n(Z=>({...Z,itemsPerPage:parseInt(Y.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:10,children:"10件"}),v.jsx("option",{value:20,children:"20件"}),v.jsx("option",{value:50,children:"50件"}),v.jsx("option",{value:100,children:"100件"})]})]})]})]}),y==="data"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"データ管理"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[v.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データエクスポート"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"収集したチャンネルデータとトラッキングデータをエクスポートできます"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>B("csv"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"CSV形式でエクスポート"}),v.jsx("button",{onClick:()=>B("json"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"JSON形式でエクスポート"})]})]}),v.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[v.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データバックアップ"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"定期的にデータのバックアップを作成することをお勧めします"}),v.jsx("button",{onClick:()=>B("json"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"今すぐバックアップ"})]})]})]}),y==="security"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"セキュリティ設定"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",checked:e.enableApiUsageDisplay,onChange:Y=>n(Z=>({...Z,enableApiUsageDisplay:Y.target.checked})),className:"mr-2"}),v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"API使用量の表示"})]}),v.jsx("p",{className:"text-sm text-gray-500 ml-6",children:"YouTube API使用量をダッシュボードに表示します"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1日のAPI呼び出し制限"}),v.jsx("input",{type:"number",value:e.maxDailyApiCalls,onChange:Y=>n(Z=>({...Z,maxDailyApiCalls:parseInt(Y.target.value)||1e4})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000",max:"1000000"}),v.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"YouTube APIの1日あたりのクォータ制限を設定"})]})]})]}),v.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-gray-200",children:v.jsx("button",{onClick:G,disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:u?"保存中...":"設定を保存"})})]})]})]})})},$f=({trackingData:r,title:e})=>{var o,u,d,m,p;if(console.log(`TrackingChart for ${e}:`,r),!r||r.length===0)return v.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),v.jsx("div",{className:"text-center py-8 text-gray-500",children:"トラッキングデータがありません"})]});const n=Math.max(...r.map(y=>y.value)),s=Math.min(...r.map(y=>y.value));return console.log(`Chart range for ${e}: ${s} - ${n}`),v.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"relative h-32 bg-gray-50 rounded p-4",children:[v.jsxs("svg",{width:"100%",height:"100%",className:"overflow-visible",children:[r.length>1&&r.map((y,E)=>{if(E===0)return null;const w=r[E-1],x=(E-1)/(r.length-1)*100,V=E/(r.length-1)*100,G=n===s?50:100-(w.value-s)/(n-s)*80,B=n===s?50:100-(y.value-s)/(n-s)*80;return v.jsx("line",{x1:`${x}%`,y1:`${G}%`,x2:`${V}%`,y2:`${B}%`,stroke:"#3b82f6",strokeWidth:"2",className:"transition-all duration-300"},E)}),r.map((y,E)=>{const w=E/(r.length-1)*100,x=n===s?50:100-(y.value-s)/(n-s)*80,V=E===r.length-1;return v.jsx("circle",{cx:`${w}%`,cy:`${x}%`,r:"4",fill:V?"#1d4ed8":"#3b82f6",className:"transition-all duration-300"},E)})]}),v.jsx("div",{className:"flex justify-between mt-2",children:r.map((y,E)=>v.jsx("div",{className:"text-xs text-gray-600 text-center flex-1",children:new Date(y.date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})},E))})]})}),v.jsxs("div",{className:"mb-4 max-h-32 overflow-y-auto",children:[v.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"履歴データ"}),v.jsx("div",{className:"space-y-1",children:r.map((y,E)=>v.jsxs("div",{className:"flex justify-between text-xs",children:[v.jsx("span",{className:"text-gray-600",children:new Date(y.date).toLocaleDateString("ja-JP")}),v.jsx("span",{className:"font-medium text-gray-900",children:y.value.toLocaleString()})]},E))})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center border-t pt-4",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-600",children:"最新"}),v.jsx("div",{className:"text-lg font-semibold text-blue-600",children:(o=r[r.length-1])==null?void 0:o.value.toLocaleString()})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-600",children:"最高"}),v.jsx("div",{className:"text-lg font-semibold text-green-600",children:n.toLocaleString()})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-600",children:"成長"}),v.jsx("div",{className:`text-lg font-semibold ${r.length>1?((u=r[r.length-1])==null?void 0:u.value)>((d=r[0])==null?void 0:d.value)?"text-green-600":"text-red-600":"text-gray-600"}`,children:r.length>1?`${((((m=r[r.length-1])==null?void 0:m.value)/((p=r[0])==null?void 0:p.value)-1)*100).toFixed(1)}%`:"N/A"})]})]})]})},R2=({selectedChannelId:r})=>{const{user:e}=eu(),[n,s]=pe.useState({subscriberCount:[],videoCount:[],totalViews:[]}),[o,u]=pe.useState(!1),[d,m]=pe.useState([]),[p,y]=pe.useState(!0),[E,w]=pe.useState(r);pe.useEffect(()=>{e&&x()},[e]),pe.useEffect(()=>{e&&E&&V(E)},[E,e]);const x=async()=>{if(e)try{y(!0);const{getChannelsByStatus:B}=await La(async()=>{const{getChannelsByStatus:ue}=await Promise.resolve().then(()=>Ba);return{getChannelsByStatus:ue}},void 0),Q=await B("tracking",e.uid);m(Q)}catch(B){console.error("追跡チャンネル一覧の取得エラー:",B)}finally{y(!1)}},V=async B=>{if(e)try{u(!0),console.log("Loading tracking data for:",B);try{const he=(await eo(Ps(Ms(en,"tracking_data"),Hr("channelId","==",B),Hr("userId","==",e.uid)))).docs.map(le=>le.data());if(console.log("Found tracking data:",he),he.length>0){const le=he.filter(S=>S.recordedAt).sort((S,R)=>{const O=S.recordedAt.toDate?S.recordedAt.toDate():new Date(S.recordedAt),M=R.recordedAt.toDate?R.recordedAt.toDate():new Date(R.recordedAt);return O-M}),de=le.map(S=>({date:S.recordedAt.toDate?S.recordedAt.toDate():new Date(S.recordedAt),value:S.subscriberCount||0})),Y=le.map(S=>({date:S.recordedAt.toDate?S.recordedAt.toDate():new Date(S.recordedAt),value:S.videoCount||0})),Z=le.map(S=>({date:S.recordedAt.toDate?S.recordedAt.toDate():new Date(S.recordedAt),value:S.totalViews||0})),D={subscriberCount:de,videoCount:Y,totalViews:Z};console.log("Setting real tracking data:",D),s(D);return}}catch(ue){console.log("Failed to fetch real tracking data, using mock data:",ue)}const Q=d.find(ue=>ue.channelId===B);if(console.log("Using channel data for mock tracking:",Q),Q){const ue=new Date,he=new Date(ue-7*24*60*60*1e3),le=new Date(ue-14*24*60*60*1e3),de=Q.subscriberCount||0,Y=Q.videoCount||0,Z=Q.totalViews||0,D={subscriberCount:[{date:le,value:Math.max(0,Math.floor(de*.95))},{date:he,value:Math.max(0,Math.floor(de*.98))},{date:ue,value:de}],videoCount:[{date:le,value:Math.max(0,Y-2)},{date:he,value:Math.max(0,Y-1)},{date:ue,value:Y}],totalViews:[{date:le,value:Math.max(0,Math.floor(Z*.9))},{date:he,value:Math.max(0,Math.floor(Z*.95))},{date:ue,value:Z}]};console.log("Setting simulated tracking data:",D),s(D)}}catch(Q){console.error("トラッキングデータの取得エラー:",Q)}finally{u(!1)}};if(o&&E)return v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"トラッキングデータを読み込み中..."})]});if(p)return v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"トラッキングチャンネルを読み込み中..."})]});if(!E)return v.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4",children:"📊"}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"チャンネルを選択してください"}),v.jsx("p",{className:"text-gray-600 mb-6",children:"追跡中のチャンネルから1つを選択すると、成長データを表示します"}),d.length>0&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(B=>v.jsx("div",{onClick:()=>{console.log("Selecting channel:",B.channelId,B),w(B.channelId),V(B.channelId)},className:"cursor-pointer p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:B.thumbnailUrl||"/default-avatar.png",alt:B.channelTitle,className:"w-12 h-12 rounded-full object-cover",onError:Q=>{Q.target.src="https://via.placeholder.com/48x48/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{className:"text-left",children:[v.jsx("h4",{className:"font-medium text-gray-900 truncate",children:B.channelTitle}),v.jsxs("p",{className:"text-sm text-gray-600",children:["ステータス更新: ",B.statusUpdatedAt?new Date(B.statusUpdatedAt.toDate?B.statusUpdatedAt.toDate():B.statusUpdatedAt).toLocaleDateString("ja-JP"):"Unknown"]})]})]})},B.id))}),d.length===0&&v.jsxs("p",{className:"text-gray-500",children:["まだトラッキング中のチャンネルがありません。",v.jsx("br",{}),"チャンネル一覧からチャンネルを「追跡」ステータスに設定してください。"]})]})});const G=d.find(B=>B.channelId===E);return v.jsxs("div",{className:"space-y-6",children:[G&&v.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("img",{src:G.thumbnailUrl||"/default-avatar.png",alt:G.channelTitle,className:"w-16 h-16 rounded-full object-cover",onError:B=>{B.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:G.channelTitle}),v.jsxs("p",{className:"text-gray-600",children:["ステータス更新: ",G.statusUpdatedAt?new Date(G.statusUpdatedAt.toDate?G.statusUpdatedAt.toDate():G.statusUpdatedAt).toLocaleDateString("ja-JP"):"Unknown"]})]})]}),v.jsx("button",{onClick:()=>w(null),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",children:"← チャンネル一覧に戻る"})]})}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[v.jsx($f,{trackingData:n.subscriberCount,title:"📈 登録者数の推移"}),v.jsx($f,{trackingData:n.videoCount,title:"🎥 動画数の推移"}),v.jsx($f,{trackingData:n.totalViews,title:"👁️ 総再生回数の推移"})]})]})},I2=()=>{var x,V,G;const[r,e]=pe.useState("tracking"),[n,s]=pe.useState([]),[o,u]=pe.useState(!0),[d,m]=pe.useState({tracking:0,"non-tracking":0,rejected:0});pe.useEffect(()=>{p()},[r]),pe.useEffect(()=>{y()},[]);const p=async()=>{try{u(!0);const B=await Sl(r);s(B)}catch(B){console.error("チャンネル履歴読み込みエラー:",B)}finally{u(!1)}},y=async()=>{try{const[B,Q,ue]=await Promise.all([Sl("tracking"),Sl("non-tracking"),Sl("rejected")]);m({tracking:B.length,"non-tracking":Q.length,rejected:ue.length})}catch(B){console.error("統計読み込みエラー:",B)}},E=[{id:"tracking",label:"トラッキング中",icon:"📊",color:"green",count:d.tracking},{id:"non-tracking",label:"対象外",icon:"📋",color:"yellow",count:d["non-tracking"]},{id:"rejected",label:"除外済み",icon:"❌",color:"red",count:d.rejected}],w=B=>B?(B.toDate?B.toDate():new Date(B)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"チャンネル履歴"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"ステータス別にチャンネルの履歴を確認できます"})]}),v.jsx("div",{className:"card",children:v.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(B=>{const Q=r===B.id,ue={green:Q?"bg-green-100 text-green-800 border-green-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-green-50 hover:text-green-700",yellow:Q?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-yellow-50 hover:text-yellow-700",red:Q?"bg-red-100 text-red-800 border-red-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-red-50 hover:text-red-700"};return v.jsxs("button",{onClick:()=>e(B.id),className:`px-4 py-3 rounded-lg border font-medium transition-all duration-200 flex items-center gap-2 ${ue[B.color]}`,children:[v.jsx("span",{className:"text-lg",children:B.icon}),v.jsx("span",{children:B.label}),v.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q?"bg-white bg-opacity-50":"bg-gray-200"}`,children:B.count})]},B.id)})})}),v.jsxs("div",{className:"card",children:[v.jsx("div",{className:"mb-4",children:v.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[((x=E.find(B=>B.id===r))==null?void 0:x.label)||"チャンネル"," (",n.length,"件)"]})}),o?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"読み込み中..."})]}):n.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"text-6xl mb-4",children:((V=E.find(B=>B.id===r))==null?void 0:V.icon)||"📋"}),v.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:[(G=E.find(B=>B.id===r))==null?void 0:G.label,"のチャンネルがありません"]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"チャンネルの仕分けを行うと、ここに表示されます"})]}):v.jsx("div",{className:"space-y-4",children:n.map(B=>{var Q;return v.jsxs("div",{className:"relative",children:[v.jsx(WE,{channel:B,onChannelClick:()=>{},onAddToTracking:()=>{},showStatusHistory:!0}),v.jsxs("div",{className:"mt-2 px-4 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg text-sm",children:[v.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[v.jsxs("span",{children:["ステータス: ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:((Q=E.find(ue=>ue.id===B.status))==null?void 0:Q.label)||B.status||"未設定"})]}),v.jsxs("span",{children:["更新日時: ",w(B.statusUpdatedAt)]})]}),B.status==="rejected"&&B.rejectionReason&&v.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded border-l-4 border-red-300",children:v.jsxs("span",{className:"text-red-700 dark:text-red-300 text-sm",children:[v.jsx("strong",{children:"除外理由:"})," ",B.rejectionReason]})}),B.statusUpdatedBy&&v.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["更新者: ",B.statusUpdatedBy]})]})]},B.id)})})]}),v.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:v.jsxs("p",{children:["合計: ",d.tracking+d["non-tracking"]+d.rejected," チャンネル | トラッキング中: ",d.tracking," | 対象外: ",d["non-tracking"]," | 除外済み: ",d.rejected]})})]})},C2=({isLogin:r,setIsLogin:e})=>{const[n,s]=pe.useState(""),[o,u]=pe.useState(""),[d,m]=pe.useState(""),[p,y]=pe.useState(!1),{login:E,register:w}=eu(),x=async V=>{if(V.preventDefault(),!n||!o){m("メールアドレスとパスワードを入力してください");return}if(o.length<6){m("パスワードは6文字以上で入力してください");return}m(""),y(!0);try{r?await E(n,o):await w(n,o)}catch(G){switch(console.error("認証エラー:",G),G.code){case"auth/user-not-found":m("ユーザーが見つかりません");break;case"auth/wrong-password":m("パスワードが間違っています");break;case"auth/email-already-in-use":m("このメールアドレスは既に使用されています");break;case"auth/invalid-email":m("メールアドレスの形式が正しくありません");break;case"auth/weak-password":m("パスワードが弱すぎます");break;default:m("認証に失敗しました。もう一度お試しください。")}}finally{y(!1)}};return v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"max-w-md w-full space-y-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:r?"ログイン":"アカウント作成"}),v.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"YouTube BGM Research Tool"})]}),v.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[d&&v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:d}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"メールアドレス"}),v.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:n,onChange:V=>s(V.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"your-email@example.com"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"パスワード"}),v.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:o,onChange:V=>u(V.target.value),className:"mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"パスワード（6文字以上）"})]})]}),v.jsx("div",{children:v.jsx("button",{type:"submit",disabled:p,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:p?v.jsxs("div",{className:"flex items-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"処理中..."]}):r?"ログイン":"アカウント作成"})}),v.jsx("div",{className:"text-center",children:v.jsx("button",{type:"button",onClick:()=>e(!r),className:"text-blue-600 hover:text-blue-500 text-sm",children:r?"アカウントを作成する":"ログインに戻る"})})]})]})})};function N2(){const{user:r,loading:e}=eu(),[n,s]=pe.useState(!0),[o,u]=pe.useState([]),[d,m]=pe.useState([]),[p,y]=pe.useState(!0),[E,w]=pe.useState(null),[x,V]=pe.useState(null),[G,B]=pe.useState(new Set),[Q,ue]=pe.useState("channels"),[he,le]=pe.useState(null),[de,Y]=pe.useState({sortBy:"growth_rate",filterBy:"unset",search:""});pe.useEffect(()=>{r&&(Z(),D())},[r]),pe.useEffect(()=>{S()},[o,de,G]),pe.useEffect(()=>{r&&de.filterBy!=="all"&&de.filterBy!=="growing"&&de.filterBy!=="large"&&de.filterBy!=="small"&&Z()},[de.filterBy,r]);const Z=async()=>{if(r)try{y(!0);const{getChannelsByStatus:ae}=await La(async()=>{const{getChannelsByStatus:ne}=await Promise.resolve().then(()=>Ba);return{getChannelsByStatus:ne}},void 0);let U=[];switch(de.filterBy){case"unset":U=await ae("unset",r.uid);break;case"tracking":U=await ae("tracking",r.uid);break;case"non-tracking":U=await ae("non-tracking",r.uid);break;case"rejected":U=await ae("rejected",r.uid);break;case"all":U=await ae("all",r.uid);break;default:U=await ae("unset",r.uid);break}u(U)}catch(ae){console.error("チャンネルデータの読み込みエラー:",ae)}finally{y(!1)}},D=async()=>{if(r)try{const ae=Ps(Ms(en,"tracked_channels"),Hr("userId","==",r.uid)),U=await eo(ae),ne=new Set(U.docs.filter(oe=>oe.data().isActive).map(oe=>oe.id));B(ne)}catch(ae){console.error("追跡チャンネルデータの読み込みエラー:",ae)}},S=()=>{let ae=o.map(U=>({...U,isTracked:G.has(U.channelId)}));switch(de.search&&(ae=ae.filter(U=>U.channelTitle.toLowerCase().includes(de.search.toLowerCase()))),de.filterBy){case"growing":ae=ae.filter(U=>(U.growthRate||0)>20);break;case"large":ae=ae.filter(U=>U.subscriberCount>1e5);break;case"small":ae=ae.filter(U=>U.subscriberCount<1e4);break}switch(de.sortBy){case"growth_rate":ae.sort((U,ne)=>(ne.growthRate||0)-(U.growthRate||0));break;case"subscribers":ae.sort((U,ne)=>ne.subscriberCount-U.subscriberCount);break;case"views":ae.sort((U,ne)=>(ne.totalViews||0)-(U.totalViews||0));break;case"added_date":ae.sort((U,ne)=>{var N,W,se,ie;const oe=((W=(N=U.createdAt)==null?void 0:N.toDate)==null?void 0:W.call(N))||new Date(U.createdAt);return(((ie=(se=ne.createdAt)==null?void 0:se.toDate)==null?void 0:ie.call(se))||new Date(ne.createdAt))-oe});break}m(ae)},R=async ae=>{try{const{extractChannelId:U,fetchChannelInfo:ne,fetchChannelFirstVideo:oe,checkChannelExists:Ce,isBGMChannel:N,calculateGrowthRate:W,addChannelToFirestore:se}=await La(async()=>{const{extractChannelId:ln,fetchChannelInfo:Fn,fetchChannelFirstVideo:Vn,checkChannelExists:mi,isBGMChannel:gi,calculateGrowthRate:pi,addChannelToFirestore:Qr}=await Promise.resolve().then(()=>Ba);return{extractChannelId:ln,fetchChannelInfo:Fn,fetchChannelFirstVideo:Vn,checkChannelExists:mi,isBGMChannel:gi,calculateGrowthRate:pi,addChannelToFirestore:Qr}},void 0),ie=U(ae);if(await Ce(ie)){alert("このチャンネルは既に追加されています");return}const Se=await ne(ie,r.uid);if(!N(Se.channelTitle,Se.description)&&!confirm("このチャンネルはBGM関連ではない可能性があります。追加しますか？"))return;const _e=await oe(Se.uploadsPlaylistId,r.uid),ft=W(Se,_e),Qe={...Se,firstVideoDate:(_e==null?void 0:_e.publishedAt)||Se.publishedAt,growthRate:ft,keywords:[],uploadsPlaylistId:Se.uploadsPlaylistId};await se(Qe,r.uid),await Z(),alert(`✅ チャンネル「${Se.channelTitle}」を追加しました`)}catch(U){console.error("チャンネル追加エラー:",U),alert(`❌ チャンネル追加に失敗しました: ${U.message}`)}},O=async ae=>{try{let U=ae;if(ae.startsWith("UC")&&ae.length===24){const ne=o.find(oe=>oe.channelId===ae);if(ne)U=ne.id;else{console.error("削除対象のチャンネルが見つかりません");return}}await CR(Fi(en,"bgm_channels",U)),await Z(),console.log(`✅ チャンネルを削除しました: ${U}`)}catch(U){console.error("チャンネル削除エラー:",U),alert("チャンネルの削除に失敗しました")}},M=async ae=>{try{if(G.has(ae.channelId))return;await _m(Fi(en,"tracked_channels",ae.channelId),{channelId:ae.channelId,channelTitle:ae.channelTitle,channelUrl:ae.channelUrl,thumbnailUrl:ae.thumbnailUrl,userId:r.uid,addedAt:new Date,isActive:!0}),await _m(Fi(en,"tracking_data",`${ae.channelId}_${new Date().toISOString().split("T")[0]}`),{channelId:ae.channelId,subscriberCount:ae.subscriberCount,videoCount:ae.videoCount,totalViews:ae.totalViews,userId:r.uid,recordedAt:new Date}),B(U=>new Set([...U,ae.channelId])),console.log(`✅ Added to tracking: ${ae.channelTitle}`)}catch(U){console.error("追跡追加エラー:",U)}},j=async ae=>{w(ae),V({...ae,mostPopularVideo:{title:"最も人気の動画（取得中...）",viewCount:0,thumbnailUrl:"",url:""}});try{const{fetchChannelMostPopularVideo:U,fetchChannelInfo:ne}=await La(async()=>{const{fetchChannelMostPopularVideo:N,fetchChannelInfo:W}=await Promise.resolve().then(()=>Ba);return{fetchChannelMostPopularVideo:N,fetchChannelInfo:W}},void 0);let oe=ae.uploadsPlaylistId;oe||(console.log("uploadsPlaylistId not found, fetching channel info..."),oe=(await ne(ae.channelId)).uploadsPlaylistId),console.log("Using uploadsPlaylistId:",oe);const Ce=await U(oe);V(Ce?{...ae,mostPopularVideo:Ce}:{...ae,mostPopularVideo:{title:"人気動画が見つかりませんでした",viewCount:0,thumbnailUrl:"",url:""}})}catch(U){console.error("人気動画取得エラー:",U),V({...ae,mostPopularVideo:{title:"人気動画の取得に失敗しました",viewCount:0,thumbnailUrl:"",url:""}})}},C=()=>{w(null),V(null)};if(e)return v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"認証状態を確認中..."})]})});if(!r)return v.jsx(C2,{isLogin:n,setIsLogin:s});if(p)return v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"チャンネルデータを読み込み中..."})]})});const bt=()=>{switch(Q){case"settings":return v.jsx(x2,{});case"tracking":return v.jsx(R2,{selectedChannelId:he});case"history":return v.jsx(I2,{});default:return v.jsxs(v.Fragment,{children:[v.jsx(c2,{onAddChannel:R}),v.jsx(h2,{filters:de,onFiltersChange:Y}),v.jsx(d2,{channels:d}),v.jsx(w2,{channels:d,onChannelClick:j,onAddToTracking:M,onStatusChange:async(ae,U,ne)=>{const{updateChannelStatus:oe}=await La(async()=>{const{updateChannelStatus:Ce}=await Promise.resolve().then(()=>Ba);return{updateChannelStatus:Ce}},void 0);await oe(ae,U,ne),await Z()}})]})}};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[v.jsx(u2,{currentView:Q,onViewChange:ue}),v.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:bt()}),v.jsx(S2,{channel:x||E,isOpen:!!E,onClose:C,onRemove:O})]})}function D2(){return v.jsx(ZC,{children:v.jsx(N2,{})})}kA.createRoot(document.getElementById("root")).render(v.jsx(pe.StrictMode,{children:v.jsx(D2,{})}));
