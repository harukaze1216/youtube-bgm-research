(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var If={exports:{}},gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xv;function TA(){if(xv)return gl;xv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var d=null;if(u!==void 0&&(d=""+u),o.key!==void 0&&(d=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:u}}return gl.Fragment=e,gl.jsx=n,gl.jsxs=n,gl}var Rv;function AA(){return Rv||(Rv=1,If.exports=TA()),If.exports}var v=AA(),Cf={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function wA(){if(Iv)return Ie;Iv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function S(D){return D===null||typeof D!="object"?null:(D=w&&D[w]||D["@@iterator"],typeof D=="function"?D:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,F={};function Y(D,W,se){this.props=D,this.context=W,this.refs=F,this.updater=se||V}Y.prototype.isReactComponent={},Y.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},Y.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function me(){}me.prototype=Y.prototype;function ue(D,W,se){this.props=D,this.context=W,this.refs=F,this.updater=se||V}var oe=ue.prototype=new me;oe.constructor=ue,B(oe,Y.prototype),oe.isPureReactComponent=!0;var Q=Array.isArray,X={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function R(D,W,se,ie,pe,Se){return se=Se.ref,{$$typeof:r,type:D,key:W,ref:se!==void 0?se:null,props:Se}}function x(D,W){return R(D.type,W,void 0,void 0,void 0,D.props)}function I(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function O(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(se){return W[se]})}var M=/\/+/g;function j(D,W){return typeof D=="object"&&D!==null&&D.key!=null?O(""+D.key):W.toString(36)}function N(){}function bt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(N,N):(D.status="pending",D.then(function(W){D.status==="pending"&&(D.status="fulfilled",D.value=W)},function(W){D.status==="pending"&&(D.status="rejected",D.reason=W)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function ae(D,W,se,ie,pe){var Se=typeof D;(Se==="undefined"||Se==="boolean")&&(D=null);var ve=!1;if(D===null)ve=!0;else switch(Se){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(D.$$typeof){case r:case e:ve=!0;break;case E:return ve=D._init,ae(ve(D._payload),W,se,ie,pe)}}if(ve)return pe=pe(D),ve=ie===""?"."+j(D,0):ie,Q(pe)?(se="",ve!=null&&(se=ve.replace(M,"$&/")+"/"),ae(pe,W,se,"",function(ln){return ln})):pe!=null&&(I(pe)&&(pe=x(pe,se+(pe.key==null||D&&D.key===pe.key?"":(""+pe.key).replace(M,"$&/")+"/")+ve)),W.push(pe)),1;ve=0;var ft=ie===""?".":ie+":";if(Q(D))for(var Ye=0;Ye<D.length;Ye++)ie=D[Ye],Se=ft+j(ie,Ye),ve+=ae(ie,W,se,Se,pe);else if(Ye=S(D),typeof Ye=="function")for(D=Ye.call(D),Ye=0;!(ie=D.next()).done;)ie=ie.value,Se=ft+j(ie,Ye++),ve+=ae(ie,W,se,Se,pe);else if(Se==="object"){if(typeof D.then=="function")return ae(bt(D),W,se,ie,pe);throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ve}function U(D,W,se){if(D==null)return D;var ie=[],pe=0;return ae(D,ie,"","",function(Se){return W.call(se,Se,pe++)}),ie}function ne(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(se){(D._status===0||D._status===-1)&&(D._status=1,D._result=se)},function(se){(D._status===0||D._status===-1)&&(D._status=2,D._result=se)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var le=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Ce(){}return Ie.Children={map:U,forEach:function(D,W,se){U(D,function(){W.apply(this,arguments)},se)},count:function(D){var W=0;return U(D,function(){W++}),W},toArray:function(D){return U(D,function(W){return W})||[]},only:function(D){if(!I(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ie.Component=Y,Ie.Fragment=n,Ie.Profiler=o,Ie.PureComponent=ue,Ie.StrictMode=s,Ie.Suspense=p,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(D){return X.H.useMemoCache(D)}},Ie.cache=function(D){return function(){return D.apply(null,arguments)}},Ie.cloneElement=function(D,W,se){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var ie=B({},D.props),pe=D.key,Se=void 0;if(W!=null)for(ve in W.ref!==void 0&&(Se=void 0),W.key!==void 0&&(pe=""+W.key),W)!de.call(W,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&W.ref===void 0||(ie[ve]=W[ve]);var ve=arguments.length-2;if(ve===1)ie.children=se;else if(1<ve){for(var ft=Array(ve),Ye=0;Ye<ve;Ye++)ft[Ye]=arguments[Ye+2];ie.children=ft}return R(D.type,pe,void 0,void 0,Se,ie)},Ie.createContext=function(D){return D={$$typeof:d,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},Ie.createElement=function(D,W,se){var ie,pe={},Se=null;if(W!=null)for(ie in W.key!==void 0&&(Se=""+W.key),W)de.call(W,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(pe[ie]=W[ie]);var ve=arguments.length-2;if(ve===1)pe.children=se;else if(1<ve){for(var ft=Array(ve),Ye=0;Ye<ve;Ye++)ft[Ye]=arguments[Ye+2];pe.children=ft}if(D&&D.defaultProps)for(ie in ve=D.defaultProps,ve)pe[ie]===void 0&&(pe[ie]=ve[ie]);return R(D,Se,void 0,void 0,null,pe)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(D){return{$$typeof:m,render:D}},Ie.isValidElement=I,Ie.lazy=function(D){return{$$typeof:E,_payload:{_status:-1,_result:D},_init:ne}},Ie.memo=function(D,W){return{$$typeof:y,type:D,compare:W===void 0?null:W}},Ie.startTransition=function(D){var W=X.T,se={};X.T=se;try{var ie=D(),pe=X.S;pe!==null&&pe(se,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(Ce,le)}catch(Se){le(Se)}finally{X.T=W}},Ie.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},Ie.use=function(D){return X.H.use(D)},Ie.useActionState=function(D,W,se){return X.H.useActionState(D,W,se)},Ie.useCallback=function(D,W){return X.H.useCallback(D,W)},Ie.useContext=function(D){return X.H.useContext(D)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(D,W){return X.H.useDeferredValue(D,W)},Ie.useEffect=function(D,W,se){var ie=X.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ie.useEffect(D,W)},Ie.useId=function(){return X.H.useId()},Ie.useImperativeHandle=function(D,W,se){return X.H.useImperativeHandle(D,W,se)},Ie.useInsertionEffect=function(D,W){return X.H.useInsertionEffect(D,W)},Ie.useLayoutEffect=function(D,W){return X.H.useLayoutEffect(D,W)},Ie.useMemo=function(D,W){return X.H.useMemo(D,W)},Ie.useOptimistic=function(D,W){return X.H.useOptimistic(D,W)},Ie.useReducer=function(D,W,se){return X.H.useReducer(D,W,se)},Ie.useRef=function(D){return X.H.useRef(D)},Ie.useState=function(D){return X.H.useState(D)},Ie.useSyncExternalStore=function(D,W,se){return X.H.useSyncExternalStore(D,W,se)},Ie.useTransition=function(){return X.H.useTransition()},Ie.version="19.1.0",Ie}var Cv;function bm(){return Cv||(Cv=1,Cf.exports=wA()),Cf.exports}var be=bm(),Nf={exports:{}},pl={},Df={exports:{}},Of={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function SA(){return Nv||(Nv=1,function(r){function e(U,ne){var le=U.length;U.push(ne);e:for(;0<le;){var Ce=le-1>>>1,D=U[Ce];if(0<o(D,ne))U[Ce]=ne,U[le]=D,le=Ce;else break e}}function n(U){return U.length===0?null:U[0]}function s(U){if(U.length===0)return null;var ne=U[0],le=U.pop();if(le!==ne){U[0]=le;e:for(var Ce=0,D=U.length,W=D>>>1;Ce<W;){var se=2*(Ce+1)-1,ie=U[se],pe=se+1,Se=U[pe];if(0>o(ie,le))pe<D&&0>o(Se,ie)?(U[Ce]=Se,U[pe]=le,Ce=pe):(U[Ce]=ie,U[se]=le,Ce=se);else if(pe<D&&0>o(Se,le))U[Ce]=Se,U[pe]=le,Ce=pe;else break e}}return ne}function o(U,ne){var le=U.sortIndex-ne.sortIndex;return le!==0?le:U.id-ne.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();r.unstable_now=function(){return d.now()-m}}var p=[],y=[],E=1,w=null,S=3,V=!1,B=!1,F=!1,Y=!1,me=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function Q(U){for(var ne=n(y);ne!==null;){if(ne.callback===null)s(y);else if(ne.startTime<=U)s(y),ne.sortIndex=ne.expirationTime,e(p,ne);else break;ne=n(y)}}function X(U){if(F=!1,Q(U),!B)if(n(p)!==null)B=!0,de||(de=!0,j());else{var ne=n(y);ne!==null&&ae(X,ne.startTime-U)}}var de=!1,R=-1,x=5,I=-1;function O(){return Y?!0:!(r.unstable_now()-I<x)}function M(){if(Y=!1,de){var U=r.unstable_now();I=U;var ne=!0;try{e:{B=!1,F&&(F=!1,ue(R),R=-1),V=!0;var le=S;try{t:{for(Q(U),w=n(p);w!==null&&!(w.expirationTime>U&&O());){var Ce=w.callback;if(typeof Ce=="function"){w.callback=null,S=w.priorityLevel;var D=Ce(w.expirationTime<=U);if(U=r.unstable_now(),typeof D=="function"){w.callback=D,Q(U),ne=!0;break t}w===n(p)&&s(p),Q(U)}else s(p);w=n(p)}if(w!==null)ne=!0;else{var W=n(y);W!==null&&ae(X,W.startTime-U),ne=!1}}break e}finally{w=null,S=le,V=!1}ne=void 0}}finally{ne?j():de=!1}}}var j;if(typeof oe=="function")j=function(){oe(M)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,bt=N.port2;N.port1.onmessage=M,j=function(){bt.postMessage(null)}}else j=function(){me(M,0)};function ae(U,ne){R=me(function(){U(r.unstable_now())},ne)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(U){U.callback=null},r.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<U?Math.floor(1e3/U):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(U){switch(S){case 1:case 2:case 3:var ne=3;break;default:ne=S}var le=S;S=ne;try{return U()}finally{S=le}},r.unstable_requestPaint=function(){Y=!0},r.unstable_runWithPriority=function(U,ne){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var le=S;S=U;try{return ne()}finally{S=le}},r.unstable_scheduleCallback=function(U,ne,le){var Ce=r.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ce+le:Ce):le=Ce,U){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=le+D,U={id:E++,callback:ne,priorityLevel:U,startTime:le,expirationTime:D,sortIndex:-1},le>Ce?(U.sortIndex=le,e(y,U),n(p)===null&&U===n(y)&&(F?(ue(R),R=-1):F=!0,ae(X,le-Ce))):(U.sortIndex=D,e(p,U),B||V||(B=!0,de||(de=!0,j()))),U},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(U){var ne=S;return function(){var le=S;S=ne;try{return U.apply(this,arguments)}finally{S=le}}}}(Of)),Of}var Dv;function xA(){return Dv||(Dv=1,Df.exports=SA()),Df.exports}var kf={exports:{}},Ft={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function RA(){if(Ov)return Ft;Ov=1;var r=bm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:y,implementation:E}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ft.createPortal=function(p,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,E)},Ft.flushSync=function(p){var y=d.T,E=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=y,s.p=E,s.d.f()}},Ft.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Ft.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Ft.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var E=y.as,w=m(E,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,V=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:V}):E==="script"&&s.d.X(p,{crossOrigin:w,integrity:S,fetchPriority:V,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Ft.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Ft.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,w=m(E,y.crossOrigin);s.d.L(p,E,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Ft.preloadModule=function(p,y){if(typeof p=="string")if(y){var E=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Ft.requestFormReset=function(p){s.d.r(p)},Ft.unstable_batchedUpdates=function(p,y){return p(y)},Ft.useFormState=function(p,y,E){return d.H.useFormState(p,y,E)},Ft.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ft.version="19.1.0",Ft}var kv;function IA(){if(kv)return kf.exports;kv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),kf.exports=RA(),kf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function CA(){if(Vv)return pl;Vv=1;var r=xA(),e=bm(),n=IA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return m(h),t;if(f===l)return m(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var b=!1,T=h.child;T;){if(T===a){b=!0,a=h,l=f;break}if(T===l){b=!0,l=h,a=f;break}T=T.sibling}if(!b){for(T=f.child;T;){if(T===a){b=!0,a=f,l=h;break}if(T===l){b=!0,l=f,a=h;break}T=T.sibling}if(!b)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),ue=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),M=Symbol.iterator;function j(t){return t===null||typeof t!="object"?null:(t=M&&t[M]||t["@@iterator"],typeof t=="function"?t:null)}var N=Symbol.for("react.client.reference");function bt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===N?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case Y:return"Profiler";case F:return"StrictMode";case X:return"Suspense";case de:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V:return"Portal";case oe:return(t.displayName||"Context")+".Provider";case ue:return(t._context.displayName||"Context")+".Consumer";case Q:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R:return i=t.displayName||null,i!==null?i:bt(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return bt(t(i))}catch{}}return null}var ae=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Ce=[],D=-1;function W(t){return{current:t}}function se(t){0>D||(t.current=Ce[D],Ce[D]=null,D--)}function ie(t,i){D++,Ce[D]=t.current,t.current=i}var pe=W(null),Se=W(null),ve=W(null),ft=W(null);function Ye(t,i){switch(ie(ve,i),ie(Se,t),ie(pe,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?ev(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=ev(i),t=tv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}se(pe),ie(pe,t)}function ln(){se(pe),se(Se),se(ve)}function Fn(t){t.memoizedState!==null&&ie(ft,t);var i=pe.current,a=tv(i,t.type);i!==a&&(ie(Se,t),ie(pe,a))}function Vn(t){Se.current===t&&(se(pe),se(Se)),ft.current===t&&(se(ft),cl._currentValue=le)}var mi=Object.prototype.hasOwnProperty,gi=r.unstable_scheduleCallback,pi=r.unstable_cancelCallback,Qr=r.unstable_shouldYield,Jl=r.unstable_requestPaint,_n=r.unstable_now,Rh=r.unstable_getCurrentPriorityLevel,oo=r.unstable_ImmediatePriority,Bs=r.unstable_UserBlockingPriority,Yr=r.unstable_NormalPriority,Ih=r.unstable_LowPriority,qs=r.unstable_IdlePriority,lo=r.log,Wl=r.unstable_setDisableYieldValue,at=null,Fe=null;function un(t){if(typeof lo=="function"&&Wl(t),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(at,t)}catch{}}var Ht=Math.clz32?Math.clz32:$r,eu=Math.log,Ch=Math.LN2;function $r(t){return t>>>=0,t===0?32:31-(eu(t)/Ch|0)|0}var Xr=256,Zr=4194304;function Mn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Hs(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=Mn(l):(b&=T,b!==0?h=Mn(b):a||(a=T&~t,a!==0&&(h=Mn(a))))):(T=l&~f,T!==0?h=Mn(T):b!==0?h=Mn(b):a||(a=l&~t,a!==0&&(h=Mn(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function Jr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function uo(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function co(){var t=Xr;return Xr<<=1,(Xr&4194048)===0&&(Xr=256),t}function ho(){var t=Zr;return Zr<<=1,(Zr&62914560)===0&&(Zr=4194304),t}function yi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function vi(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function fo(t,i,a,l,h,f){var b=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,C=t.expirationTimes,q=t.hiddenUpdates;for(a=b&~a;0<a;){var $=31-Ht(a),J=1<<$;T[$]=0,C[$]=-1;var H=q[$];if(H!==null)for(q[$]=null,$=0;$<H.length;$++){var G=H[$];G!==null&&(G.lane&=-536870913)}a&=~J}l!==0&&Kn(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~i))}function Kn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Ht(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function mo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Ht(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Zi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ji(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:bv(t.type))}function tu(t,i){var a=ne.p;try{return ne.p=t,i()}finally{ne.p=a}}var nt=Math.random().toString(36).slice(2),Et="__reactFiber$"+nt,mt="__reactProps$"+nt,bn="__reactContainer$"+nt,go="__reactEvents$"+nt,Nh="__reactListeners$"+nt,Wi="__reactHandles$"+nt,nu="__reactResources$"+nt,Wr="__reactMarker$"+nt;function er(t){delete t[Et],delete t[mt],delete t[go],delete t[Nh],delete t[Wi]}function _i(t){var i=t[Et];if(i)return i;for(var a=t.parentNode;a;){if(i=a[bn]||a[Et]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=sv(t);t!==null;){if(a=t[Et])return a;t=sv(t)}return i}t=a,a=t.parentNode}return null}function Qn(t){if(t=t[Et]||t[bn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function Yn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Xt(t){var i=t[nu];return i||(i=t[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function ut(t){t[Wr]=!0}var po=new Set,Fs={};function Pn(t,i){bi(t,i),bi(t+"Capture",i)}function bi(t,i){for(Fs[t]=i,t=0;t<i.length;t++)po.add(i[t])}var iu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ru={},es={};function su(t){return mi.call(es,t)?!0:mi.call(ru,t)?!1:iu.test(t)?es[t]=!0:(ru[t]=!0,!1)}function tr(t,i,a){if(su(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function $n(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Mt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var ts,au;function Ei(t){if(ts===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ts=i&&i[1]||"",au=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ts+t+au}var Ks=!1;function Qs(t,i){if(!t||Ks)return"";Ks=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(G){var H=G}Reflect.construct(t,[],J)}else{try{J.call()}catch(G){H=G}t.call(J.prototype)}}else{try{throw Error()}catch(G){H=G}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],T=f[1];if(b&&T){var C=b.split(`
`),q=T.split(`
`);for(h=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;h<q.length&&!q[h].includes("DetermineComponentFrameRoot");)h++;if(l===C.length||h===q.length)for(l=C.length-1,h=q.length-1;1<=l&&0<=h&&C[l]!==q[h];)h--;for(;1<=l&&0<=h;l--,h--)if(C[l]!==q[h]){if(l!==1||h!==1)do if(l--,h--,0>h||C[l]!==q[h]){var $=`
`+C[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=h);break}}}finally{Ks=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ei(a):""}function yo(t){switch(t.tag){case 26:case 27:case 5:return Ei(t.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 15:return Qs(t.type,!1);case 11:return Qs(t.type.render,!1);case 1:return Qs(t.type,!0);case 31:return Ei("Activity");default:return""}}function Ys(t){try{var i="";do i+=yo(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Zt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Dh(t){var i=vo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,f=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function $s(t){t._valueTracker||(t._valueTracker=Dh(t))}function _o(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=vo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function ns(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Oh=/[\n"\\]/g;function gt(t){return t.replace(Oh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function cn(t,i,a,l,h,f,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),i!=null?b==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Zt(i)):t.value!==""+Zt(i)&&(t.value=""+Zt(i)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),i!=null?nr(t,b,Zt(i)):a!=null?nr(t,b,Zt(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Zt(T):t.removeAttribute("name")}function is(t,i,a,l,h,f,b,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null))return;a=a!=null?""+Zt(a):"",i=i!=null?""+Zt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function nr(t,i,a){i==="number"&&ns(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ti(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Zt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function $e(t,i,a){if(i!=null&&(i=""+Zt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Zt(a):""}function rs(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ae(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Zt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function En(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ss=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ss.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function bo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&ou(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&ou(t,f,i[f])}function Eo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xs(t){return Vh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ai=null;function Tn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var wi=null,Si=null;function To(t){var i=Qn(t);if(i&&(t=i.stateNode)){var a=t[mt]||null;e:switch(t=i.stateNode,i.type){case"input":if(cn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[mt]||null;if(!h)throw Error(s(90));cn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&_o(l)}break e;case"textarea":$e(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ti(t,!!a.multiple,i,!1)}}}var Xn=!1;function lu(t,i,a){if(Xn)return t(i,a);Xn=!0;try{var l=t(i);return l}finally{if(Xn=!1,(wi!==null||Si!==null)&&(tc(),wi&&(i=wi,t=Si,Si=wi=null,To(i),t)))for(i=0;i<t.length;i++)To(t[i])}}function as(t,i){var a=t.stateNode;if(a===null)return null;var l=a[mt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),An=!1;if(jn)try{var os={};Object.defineProperty(os,"passive",{get:function(){An=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{An=!1}var Zn=null,ir=null,xi=null;function Ao(){if(xi)return xi;var t,i=ir,a=i.length,l,h="value"in Zn?Zn.value:Zn.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var b=a-t;for(l=1;l<=b&&i[a-l]===h[f-l];l++);return xi=h.slice(t,1<l?1-l:void 0)}function Jn(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Wn(){return!0}function wo(){return!1}function It(t){function i(a,l,h,f,b){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Wn:wo,this.isPropagationStopped=wo,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wn)},persist:function(){},isPersistent:Wn}),i}var He={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zs=It(He),ls=E({},He,{view:0,detail:0}),uu=It(ls),Js,Ws,ei,us=E({},ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ds,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ei&&(ei&&t.type==="mousemove"?(Js=t.screenX-ei.screenX,Ws=t.screenY-ei.screenY):Ws=Js=0,ei=t),Js)},movementY:function(t){return"movementY"in t?t.movementY:Ws}}),wn=It(us),cu=E({},us,{dataTransfer:0}),Mh=It(cu),cs=E({},ls,{relatedTarget:0}),ea=It(cs),So=E({},He,{animationName:0,elapsedTime:0,pseudoElement:0}),ta=It(So),hu=E({},He,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),na=It(hu),Ph=E({},He,{data:0}),xo=It(Ph),hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},du={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ro(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=fu[t])?!!i[t]:!1}function ds(){return Ro}var mu=E({},ls,{key:function(t){if(t.key){var i=hs[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Jn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?du[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ds,charCode:function(t){return t.type==="keypress"?Jn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ia=It(mu),gu=E({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Io=It(gu),Ri=E({},ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ds}),pu=It(Ri),yu=E({},He,{propertyName:0,elapsedTime:0,pseudoElement:0}),vu=It(yu),_u=E({},us,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ra=It(_u),Jt=E({},He,{newState:0,oldState:0}),bu=It(Jt),Eu=[9,13,27,32],ti=jn&&"CompositionEvent"in window,c=null;jn&&"documentMode"in document&&(c=document.documentMode);var g=jn&&"TextEvent"in window&&!c,_=jn&&(!ti||c&&8<c&&11>=c),A=" ",L=!1;function K(t,i){switch(t){case"keyup":return Eu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function re(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var je=!1;function Tt(t,i){switch(t){case"compositionend":return re(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return t=i.data,t===A&&L?null:t;default:return null}}function Ue(t,i){if(je)return t==="compositionend"||!ti&&K(t,i)?(t=Ao(),xi=ir=Zn=null,je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Ct={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function At(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Ct[t.type]:i==="textarea"}function Ii(t,i,a,l){wi?Si?Si.push(l):Si=[l]:wi=l,i=oc(i,"onChange"),0<i.length&&(a=new Zs("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var Pt=null,ni=null;function Co(t){$y(t,0)}function Tu(t){var i=Yn(t);if(_o(i))return t}function pg(t,i){if(t==="change")return i}var yg=!1;if(jn){var jh;if(jn){var Uh="oninput"in document;if(!Uh){var vg=document.createElement("div");vg.setAttribute("oninput","return;"),Uh=typeof vg.oninput=="function"}jh=Uh}else jh=!1;yg=jh&&(!document.documentMode||9<document.documentMode)}function _g(){Pt&&(Pt.detachEvent("onpropertychange",bg),ni=Pt=null)}function bg(t){if(t.propertyName==="value"&&Tu(ni)){var i=[];Ii(i,ni,t,Tn(t)),lu(Co,i)}}function JE(t,i,a){t==="focusin"?(_g(),Pt=i,ni=a,Pt.attachEvent("onpropertychange",bg)):t==="focusout"&&_g()}function WE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tu(ni)}function eT(t,i){if(t==="click")return Tu(i)}function tT(t,i){if(t==="input"||t==="change")return Tu(i)}function nT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var hn=typeof Object.is=="function"?Object.is:nT;function No(t,i){if(hn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!mi.call(i,h)||!hn(t[h],i[h]))return!1}return!0}function Eg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tg(t,i){var a=Eg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Eg(a)}}function Ag(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Ag(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function wg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=ns(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=ns(t.document)}return i}function Lh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var iT=jn&&"documentMode"in document&&11>=document.documentMode,sa=null,zh=null,Do=null,Bh=!1;function Sg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Bh||sa==null||sa!==ns(l)||(l=sa,"selectionStart"in l&&Lh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Do&&No(Do,l)||(Do=l,l=oc(zh,"onSelect"),0<l.length&&(i=new Zs("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=sa)))}function fs(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var aa={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},qh={},xg={};jn&&(xg=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function ms(t){if(qh[t])return qh[t];if(!aa[t])return t;var i=aa[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in xg)return qh[t]=i[a];return t}var Rg=ms("animationend"),Ig=ms("animationiteration"),Cg=ms("animationstart"),rT=ms("transitionrun"),sT=ms("transitionstart"),aT=ms("transitioncancel"),Ng=ms("transitionend"),Dg=new Map,Hh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hh.push("scrollEnd");function Un(t,i){Dg.set(t,i),Pn(i,[t])}var Og=new WeakMap;function Sn(t,i){if(typeof t=="object"&&t!==null){var a=Og.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Ys(i)},Og.set(t,i),i)}return{value:t,source:i,stack:Ys(i)}}var xn=[],oa=0,Gh=0;function Au(){for(var t=oa,i=Gh=oa=0;i<t;){var a=xn[i];xn[i++]=null;var l=xn[i];xn[i++]=null;var h=xn[i];xn[i++]=null;var f=xn[i];if(xn[i++]=null,l!==null&&h!==null){var b=l.pending;b===null?h.next=h:(h.next=b.next,b.next=h),l.pending=h}f!==0&&kg(a,h,f)}}function wu(t,i,a,l){xn[oa++]=t,xn[oa++]=i,xn[oa++]=a,xn[oa++]=l,Gh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Fh(t,i,a,l){return wu(t,i,a,l),Su(t)}function la(t,i){return wu(t,null,null,i),Su(t)}function kg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Ht(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function Su(t){if(50<nl)throw nl=0,Zd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ua={};function oT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dn(t,i,a,l){return new oT(t,i,a,l)}function Kh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ci(t,i){var a=t.alternate;return a===null?(a=dn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Vg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function xu(t,i,a,l,h,f){var b=0;if(l=t,typeof t=="function")Kh(t)&&(b=1);else if(typeof t=="string")b=uA(t,a,pe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=dn(31,a,i,h),t.elementType=I,t.lanes=f,t;case B:return gs(a.children,h,f,i);case F:b=8,h|=24;break;case Y:return t=dn(12,a,i,h|2),t.elementType=Y,t.lanes=f,t;case X:return t=dn(13,a,i,h),t.elementType=X,t.lanes=f,t;case de:return t=dn(19,a,i,h),t.elementType=de,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:case oe:b=10;break e;case ue:b=9;break e;case Q:b=11;break e;case R:b=14;break e;case x:b=16,l=null;break e}b=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=dn(b,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function gs(t,i,a,l){return t=dn(7,t,l,i),t.lanes=a,t}function Qh(t,i,a){return t=dn(6,t,null,i),t.lanes=a,t}function Yh(t,i,a){return i=dn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ca=[],ha=0,Ru=null,Iu=0,Rn=[],In=0,ps=null,Ni=1,Di="";function ys(t,i){ca[ha++]=Iu,ca[ha++]=Ru,Ru=t,Iu=i}function Mg(t,i,a){Rn[In++]=Ni,Rn[In++]=Di,Rn[In++]=ps,ps=t;var l=Ni;t=Di;var h=32-Ht(l)-1;l&=~(1<<h),a+=1;var f=32-Ht(i)+h;if(30<f){var b=h-h%5;f=(l&(1<<b)-1).toString(32),l>>=b,h-=b,Ni=1<<32-Ht(i)+h|a<<h|l,Di=f+t}else Ni=1<<f|a<<h|l,Di=t}function $h(t){t.return!==null&&(ys(t,1),Mg(t,1,0))}function Xh(t){for(;t===Ru;)Ru=ca[--ha],ca[ha]=null,Iu=ca[--ha],ca[ha]=null;for(;t===ps;)ps=Rn[--In],Rn[In]=null,Di=Rn[--In],Rn[In]=null,Ni=Rn[--In],Rn[In]=null}var Wt=null,ot=null,qe=!1,vs=null,ii=!1,Zh=Error(s(519));function _s(t){var i=Error(s(418,""));throw Vo(Sn(i,t)),Zh}function Pg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Et]=t,i[mt]=l,a){case"dialog":Ve("cancel",i),Ve("close",i);break;case"iframe":case"object":case"embed":Ve("load",i);break;case"video":case"audio":for(a=0;a<rl.length;a++)Ve(rl[a],i);break;case"source":Ve("error",i);break;case"img":case"image":case"link":Ve("error",i),Ve("load",i);break;case"details":Ve("toggle",i);break;case"input":Ve("invalid",i),is(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),$s(i);break;case"select":Ve("invalid",i);break;case"textarea":Ve("invalid",i),rs(i,l.value,l.defaultValue,l.children),$s(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Wy(i.textContent,a)?(l.popover!=null&&(Ve("beforetoggle",i),Ve("toggle",i)),l.onScroll!=null&&Ve("scroll",i),l.onScrollEnd!=null&&Ve("scrollend",i),l.onClick!=null&&(i.onclick=lc),i=!0):i=!1,i||_s(t)}function jg(t){for(Wt=t.return;Wt;)switch(Wt.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:Wt=Wt.return}}function Oo(t){if(t!==Wt)return!1;if(!qe)return jg(t),qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||mf(t.type,t.memoizedProps)),a=!a),a&&ot&&_s(t),jg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ot=zn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ot=null}}else i===27?(i=ot,_r(t.type)?(t=vf,vf=null,ot=t):ot=i):ot=Wt?zn(t.stateNode.nextSibling):null;return!0}function ko(){ot=Wt=null,qe=!1}function Ug(){var t=vs;return t!==null&&(rn===null?rn=t:rn.push.apply(rn,t),vs=null),t}function Vo(t){vs===null?vs=[t]:vs.push(t)}var Jh=W(null),bs=null,Oi=null;function rr(t,i,a){ie(Jh,i._currentValue),i._currentValue=a}function ki(t){t._currentValue=Jh.current,se(Jh)}function Wh(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function ed(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var b=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var C=0;C<i.length;C++)if(T.context===i[C]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Wh(f.return,a,t),l||(b=null);break e}f=T.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(s(341));b.lanes|=a,f=b.alternate,f!==null&&(f.lanes|=a),Wh(b,a,t),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===t){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function Mo(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var T=h.type;hn(h.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(h===ft.current){if(b=h.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(cl):t=[cl])}h=h.return}t!==null&&ed(i,t,a,l),i.flags|=262144}function Cu(t){for(t=t.firstContext;t!==null;){if(!hn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Es(t){bs=t,Oi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Gt(t){return Lg(bs,t)}function Nu(t,i){return bs===null&&Es(t),Lg(t,i)}function Lg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Oi===null){if(t===null)throw Error(s(308));Oi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Oi=Oi.next=i;return a}var lT=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},uT=r.unstable_scheduleCallback,cT=r.unstable_NormalPriority,wt={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function td(){return{controller:new lT,data:new Map,refCount:0}}function Po(t){t.refCount--,t.refCount===0&&uT(cT,function(){t.controller.abort()})}var jo=null,nd=0,da=0,fa=null;function hT(t,i){if(jo===null){var a=jo=[];nd=0,da=sf(),fa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return nd++,i.then(zg,zg),i}function zg(){if(--nd===0&&jo!==null){fa!==null&&(fa.status="fulfilled");var t=jo;jo=null,da=0,fa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function dT(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Bg=U.S;U.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&hT(t,i),Bg!==null&&Bg(t,i)};var Ts=W(null);function id(){var t=Ts.current;return t!==null?t:et.pooledCache}function Du(t,i){i===null?ie(Ts,Ts.current):ie(Ts,i.pool)}function qg(){var t=id();return t===null?null:{parent:wt._currentValue,pool:t}}var Uo=Error(s(460)),Hg=Error(s(474)),Ou=Error(s(542)),rd={then:function(){}};function Gg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ku(){}function Fg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ku,ku),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Qg(t),t;default:if(typeof i.status=="string")i.then(ku,ku);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Qg(t),t}throw Lo=i,Uo}}var Lo=null;function Kg(){if(Lo===null)throw Error(s(459));var t=Lo;return Lo=null,t}function Qg(t){if(t===Uo||t===Ou)throw Error(s(483))}var sr=!1;function sd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ar(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function or(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Su(t),kg(t,null,a),i}return wu(t,l,i,a),Su(t)}function zo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,mo(t,a)}}function od(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=b:f=f.next=b,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var ld=!1;function Bo(){if(ld){var t=fa;if(t!==null)throw t}}function qo(t,i,a,l){ld=!1;var h=t.updateQueue;sr=!1;var f=h.firstBaseUpdate,b=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var C=T,q=C.next;C.next=null,b===null?f=q:b.next=q,b=C;var $=t.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==b&&(T===null?$.firstBaseUpdate=q:T.next=q,$.lastBaseUpdate=C))}if(f!==null){var J=h.baseState;b=0,$=q=C=null,T=f;do{var H=T.lane&-536870913,G=H!==T.lane;if(G?(Le&H)===H:(l&H)===H){H!==0&&H===da&&(ld=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var we=t,_e=T;H=i;var Je=a;switch(_e.tag){case 1:if(we=_e.payload,typeof we=="function"){J=we.call(Je,J,H);break e}J=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=_e.payload,H=typeof we=="function"?we.call(Je,J,H):we,H==null)break e;J=E({},J,H);break e;case 2:sr=!0}}H=T.callback,H!==null&&(t.flags|=64,G&&(t.flags|=8192),G=h.callbacks,G===null?h.callbacks=[H]:G.push(H))}else G={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(q=$=G,C=J):$=$.next=G,b|=H;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;G=T,T=G.next,G.next=null,h.lastBaseUpdate=G,h.shared.pending=null}}while(!0);$===null&&(C=J),h.baseState=C,h.firstBaseUpdate=q,h.lastBaseUpdate=$,f===null&&(h.shared.lanes=0),gr|=b,t.lanes=b,t.memoizedState=J}}function Yg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function $g(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Yg(a[t],i)}var ma=W(null),Vu=W(0);function Xg(t,i){t=zi,ie(Vu,t),ie(ma,i),zi=t|i.baseLanes}function ud(){ie(Vu,zi),ie(ma,ma.current)}function cd(){zi=Vu.current,se(ma),se(Vu)}var lr=0,Ne=null,Xe=null,pt=null,Mu=!1,ga=!1,As=!1,Pu=0,Ho=0,pa=null,fT=0;function ct(){throw Error(s(321))}function hd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!hn(t[a],i[a]))return!1;return!0}function dd(t,i,a,l,h,f){return lr=f,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=t===null||t.memoizedState===null?kp:Vp,As=!1,f=a(l,h),As=!1,ga&&(f=Jg(i,a,l,h)),Zg(t),f}function Zg(t){U.H=qu;var i=Xe!==null&&Xe.next!==null;if(lr=0,pt=Xe=Ne=null,Mu=!1,Ho=0,pa=null,i)throw Error(s(300));t===null||Nt||(t=t.dependencies,t!==null&&Cu(t)&&(Nt=!0))}function Jg(t,i,a,l){Ne=t;var h=0;do{if(ga&&(pa=null),Ho=0,ga=!1,25<=h)throw Error(s(301));if(h+=1,pt=Xe=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}U.H=bT,f=i(a,l)}while(ga);return f}function mT(){var t=U.H,i=t.useState()[0];return i=typeof i.then=="function"?Go(i):i,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(Ne.flags|=1024),i}function fd(){var t=Pu!==0;return Pu=0,t}function md(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function gd(t){if(Mu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Mu=!1}lr=0,pt=Xe=Ne=null,ga=!1,Ho=Pu=0,pa=null}function tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?Ne.memoizedState=pt=t:pt=pt.next=t,pt}function yt(){if(Xe===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var i=pt===null?Ne.memoizedState:pt.next;if(i!==null)pt=i,Xe=t;else{if(t===null)throw Ne.alternate===null?Error(s(467)):Error(s(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},pt===null?Ne.memoizedState=pt=t:pt=pt.next=t}return pt}function pd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Go(t){var i=Ho;return Ho+=1,pa===null&&(pa=[]),t=Fg(pa,t,i),i=Ne,(pt===null?i.memoizedState:pt.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?kp:Vp),t}function ju(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Go(t);if(t.$$typeof===oe)return Gt(t)}throw Error(s(438,String(t)))}function yd(t){var i=null,a=Ne.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ne.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=pd(),Ne.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function Vi(t,i){return typeof i=="function"?i(t):i}function Uu(t){var i=yt();return vd(i,Xe,t)}function vd(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var b=h.next;h.next=f.next,f.next=b}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=b=null,C=null,q=i,$=!1;do{var J=q.lane&-536870913;if(J!==q.lane?(Le&J)===J:(lr&J)===J){var H=q.revertLane;if(H===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),J===da&&($=!0);else if((lr&H)===H){q=q.next,H===da&&($=!0);continue}else J={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},C===null?(T=C=J,b=f):C=C.next=J,Ne.lanes|=H,gr|=H;J=q.action,As&&a(f,J),f=q.hasEagerState?q.eagerState:a(f,J)}else H={lane:J,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},C===null?(T=C=H,b=f):C=C.next=H,Ne.lanes|=J,gr|=J;q=q.next}while(q!==null&&q!==i);if(C===null?b=f:C.next=T,!hn(f,t.memoizedState)&&(Nt=!0,$&&(a=fa,a!==null)))throw a;t.memoizedState=f,t.baseState=b,t.baseQueue=C,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function _d(t){var i=yt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var b=h=h.next;do f=t(f,b.action),b=b.next;while(b!==h);hn(f,i.memoizedState)||(Nt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function Wg(t,i,a){var l=Ne,h=yt(),f=qe;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var b=!hn((Xe||h).memoizedState,a);b&&(h.memoizedState=a,Nt=!0),h=h.queue;var T=np.bind(null,l,h,t);if(Fo(2048,8,T,[t]),h.getSnapshot!==i||b||pt!==null&&pt.memoizedState.tag&1){if(l.flags|=2048,ya(9,Lu(),tp.bind(null,l,h,a,i),null),et===null)throw Error(s(349));f||(lr&124)!==0||ep(l,i,a)}return a}function ep(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ne.updateQueue,i===null?(i=pd(),Ne.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function tp(t,i,a,l){i.value=a,i.getSnapshot=l,ip(i)&&rp(t)}function np(t,i,a){return a(function(){ip(i)&&rp(t)})}function ip(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!hn(t,a)}catch{return!0}}function rp(t){var i=la(t,2);i!==null&&yn(i,t,2)}function bd(t){var i=tn();if(typeof t=="function"){var a=t;if(t=a(),As){un(!0);try{a()}finally{un(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},i}function sp(t,i,a,l){return t.baseState=a,vd(t,Xe,typeof l=="function"?l:Vi)}function gT(t,i,a,l,h){if(Bu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};U.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,ap(i,f)):(f.next=a.next,i.pending=a.next=f)}}function ap(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=U.T,b={};U.T=b;try{var T=a(h,l),C=U.S;C!==null&&C(b,T),op(t,i,T)}catch(q){Ed(t,i,q)}finally{U.T=f}}else try{f=a(h,l),op(t,i,f)}catch(q){Ed(t,i,q)}}function op(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){lp(t,i,l)},function(l){return Ed(t,i,l)}):lp(t,i,a)}function lp(t,i,a){i.status="fulfilled",i.value=a,up(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ap(t,a)))}function Ed(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,up(i),i=i.next;while(i!==l)}t.action=null}function up(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function cp(t,i){return i}function hp(t,i){if(qe){var a=et.formState;if(a!==null){e:{var l=Ne;if(qe){if(ot){t:{for(var h=ot,f=ii;h.nodeType!==8;){if(!f){h=null;break t}if(h=zn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ot=zn(h.nextSibling),l=h.data==="F!";break e}}_s(l)}l=!1}l&&(i=a[0])}}return a=tn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cp,lastRenderedState:i},a.queue=l,a=Np.bind(null,Ne,l),l.dispatch=a,l=bd(!1),f=xd.bind(null,Ne,!1,l.queue),l=tn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=gT.bind(null,Ne,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function dp(t){var i=yt();return fp(i,Xe,t)}function fp(t,i,a){if(i=vd(t,i,cp)[0],t=Uu(Vi)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Go(i)}catch(b){throw b===Uo?Ou:b}else l=i;i=yt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Ne.flags|=2048,ya(9,Lu(),pT.bind(null,h,a),null)),[l,f,t]}function pT(t,i){t.action=i}function mp(t){var i=yt(),a=Xe;if(a!==null)return fp(i,a,t);yt(),i=i.memoizedState,a=yt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function ya(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=pd(),Ne.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Lu(){return{destroy:void 0,resource:void 0}}function gp(){return yt().memoizedState}function zu(t,i,a,l){var h=tn();l=l===void 0?null:l,Ne.flags|=t,h.memoizedState=ya(1|i,Lu(),a,l)}function Fo(t,i,a,l){var h=yt();l=l===void 0?null:l;var f=h.memoizedState.inst;Xe!==null&&l!==null&&hd(l,Xe.memoizedState.deps)?h.memoizedState=ya(i,f,a,l):(Ne.flags|=t,h.memoizedState=ya(1|i,f,a,l))}function pp(t,i){zu(8390656,8,t,i)}function yp(t,i){Fo(2048,8,t,i)}function vp(t,i){return Fo(4,2,t,i)}function _p(t,i){return Fo(4,4,t,i)}function bp(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ep(t,i,a){a=a!=null?a.concat([t]):null,Fo(4,4,bp.bind(null,i,t),a)}function Td(){}function Tp(t,i){var a=yt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&hd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Ap(t,i){var a=yt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&hd(i,l[1]))return l[0];if(l=t(),As){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,i],l}function Ad(t,i,a){return a===void 0||(lr&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=xy(),Ne.lanes|=t,gr|=t,a)}function wp(t,i,a,l){return hn(a,i)?a:ma.current!==null?(t=Ad(t,a,l),hn(t,i)||(Nt=!0),t):(lr&42)===0?(Nt=!0,t.memoizedState=a):(t=xy(),Ne.lanes|=t,gr|=t,i)}function Sp(t,i,a,l,h){var f=ne.p;ne.p=f!==0&&8>f?f:8;var b=U.T,T={};U.T=T,xd(t,!1,i,a);try{var C=h(),q=U.S;if(q!==null&&q(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var $=dT(C,l);Ko(t,i,$,pn(t))}else Ko(t,i,l,pn(t))}catch(J){Ko(t,i,{then:function(){},status:"rejected",reason:J},pn())}finally{ne.p=f,U.T=b}}function yT(){}function wd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=xp(t).queue;Sp(t,h,i,le,a===null?yT:function(){return Rp(t),a(l)})}function xp(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:le},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Rp(t){var i=xp(t).next.queue;Ko(t,i,{},pn())}function Sd(){return Gt(cl)}function Ip(){return yt().memoizedState}function Cp(){return yt().memoizedState}function vT(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=pn();t=ar(a);var l=or(i,t,a);l!==null&&(yn(l,i,a),zo(l,i,a)),i={cache:td()},t.payload=i;return}i=i.return}}function _T(t,i,a){var l=pn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Bu(t)?Dp(i,a):(a=Fh(t,i,a,l),a!==null&&(yn(a,t,l),Op(a,i,l)))}function Np(t,i,a){var l=pn();Ko(t,i,a,l)}function Ko(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bu(t))Dp(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var b=i.lastRenderedState,T=f(b,a);if(h.hasEagerState=!0,h.eagerState=T,hn(T,b))return wu(t,i,h,0),et===null&&Au(),!1}catch{}finally{}if(a=Fh(t,i,h,l),a!==null)return yn(a,t,l),Op(a,i,l),!0}return!1}function xd(t,i,a,l){if(l={lane:2,revertLane:sf(),action:l,hasEagerState:!1,eagerState:null,next:null},Bu(t)){if(i)throw Error(s(479))}else i=Fh(t,a,l,2),i!==null&&yn(i,t,2)}function Bu(t){var i=t.alternate;return t===Ne||i!==null&&i===Ne}function Dp(t,i){ga=Mu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Op(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,mo(t,a)}}var qu={readContext:Gt,use:ju,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct},kp={readContext:Gt,use:ju,useCallback:function(t,i){return tn().memoizedState=[t,i===void 0?null:i],t},useContext:Gt,useEffect:pp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,zu(4194308,4,bp.bind(null,i,t),a)},useLayoutEffect:function(t,i){return zu(4194308,4,t,i)},useInsertionEffect:function(t,i){zu(4,2,t,i)},useMemo:function(t,i){var a=tn();i=i===void 0?null:i;var l=t();if(As){un(!0);try{t()}finally{un(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=tn();if(a!==void 0){var h=a(i);if(As){un(!0);try{a(i)}finally{un(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=_T.bind(null,Ne,t),[l.memoizedState,t]},useRef:function(t){var i=tn();return t={current:t},i.memoizedState=t},useState:function(t){t=bd(t);var i=t.queue,a=Np.bind(null,Ne,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Td,useDeferredValue:function(t,i){var a=tn();return Ad(a,t,i)},useTransition:function(){var t=bd(!1);return t=Sp.bind(null,Ne,t.queue,!0,!1),tn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ne,h=tn();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),et===null)throw Error(s(349));(Le&124)!==0||ep(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,pp(np.bind(null,l,f,t),[t]),l.flags|=2048,ya(9,Lu(),tp.bind(null,l,f,a,i),null),a},useId:function(){var t=tn(),i=et.identifierPrefix;if(qe){var a=Di,l=Ni;a=(l&~(1<<32-Ht(l)-1)).toString(32)+a,i="«"+i+"R"+a,a=Pu++,0<a&&(i+="H"+a.toString(32)),i+="»"}else a=fT++,i="«"+i+"r"+a.toString(32)+"»";return t.memoizedState=i},useHostTransitionStatus:Sd,useFormState:hp,useActionState:hp,useOptimistic:function(t){var i=tn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=xd.bind(null,Ne,!0,a),a.dispatch=i,[t,i]},useMemoCache:yd,useCacheRefresh:function(){return tn().memoizedState=vT.bind(null,Ne)}},Vp={readContext:Gt,use:ju,useCallback:Tp,useContext:Gt,useEffect:yp,useImperativeHandle:Ep,useInsertionEffect:vp,useLayoutEffect:_p,useMemo:Ap,useReducer:Uu,useRef:gp,useState:function(){return Uu(Vi)},useDebugValue:Td,useDeferredValue:function(t,i){var a=yt();return wp(a,Xe.memoizedState,t,i)},useTransition:function(){var t=Uu(Vi)[0],i=yt().memoizedState;return[typeof t=="boolean"?t:Go(t),i]},useSyncExternalStore:Wg,useId:Ip,useHostTransitionStatus:Sd,useFormState:dp,useActionState:dp,useOptimistic:function(t,i){var a=yt();return sp(a,Xe,t,i)},useMemoCache:yd,useCacheRefresh:Cp},bT={readContext:Gt,use:ju,useCallback:Tp,useContext:Gt,useEffect:yp,useImperativeHandle:Ep,useInsertionEffect:vp,useLayoutEffect:_p,useMemo:Ap,useReducer:_d,useRef:gp,useState:function(){return _d(Vi)},useDebugValue:Td,useDeferredValue:function(t,i){var a=yt();return Xe===null?Ad(a,t,i):wp(a,Xe.memoizedState,t,i)},useTransition:function(){var t=_d(Vi)[0],i=yt().memoizedState;return[typeof t=="boolean"?t:Go(t),i]},useSyncExternalStore:Wg,useId:Ip,useHostTransitionStatus:Sd,useFormState:mp,useActionState:mp,useOptimistic:function(t,i){var a=yt();return Xe!==null?sp(a,Xe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:yd,useCacheRefresh:Cp},va=null,Qo=0;function Hu(t){var i=Qo;return Qo+=1,va===null&&(va=[]),Fg(va,t,i)}function Yo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Gu(t,i){throw i.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Mp(t){var i=t._init;return i(t._payload)}function Pp(t){function i(P,k){if(t){var z=P.deletions;z===null?(P.deletions=[k],P.flags|=16):z.push(k)}}function a(P,k){if(!t)return null;for(;k!==null;)i(P,k),k=k.sibling;return null}function l(P){for(var k=new Map;P!==null;)P.key!==null?k.set(P.key,P):k.set(P.index,P),P=P.sibling;return k}function h(P,k){return P=Ci(P,k),P.index=0,P.sibling=null,P}function f(P,k,z){return P.index=z,t?(z=P.alternate,z!==null?(z=z.index,z<k?(P.flags|=67108866,k):z):(P.flags|=67108866,k)):(P.flags|=1048576,k)}function b(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function T(P,k,z,Z){return k===null||k.tag!==6?(k=Qh(z,P.mode,Z),k.return=P,k):(k=h(k,z),k.return=P,k)}function C(P,k,z,Z){var fe=z.type;return fe===B?$(P,k,z.props.children,Z,z.key):k!==null&&(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===x&&Mp(fe)===k.type)?(k=h(k,z.props),Yo(k,z),k.return=P,k):(k=xu(z.type,z.key,z.props,null,P.mode,Z),Yo(k,z),k.return=P,k)}function q(P,k,z,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==z.containerInfo||k.stateNode.implementation!==z.implementation?(k=Yh(z,P.mode,Z),k.return=P,k):(k=h(k,z.children||[]),k.return=P,k)}function $(P,k,z,Z,fe){return k===null||k.tag!==7?(k=gs(z,P.mode,Z,fe),k.return=P,k):(k=h(k,z),k.return=P,k)}function J(P,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Qh(""+k,P.mode,z),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case S:return z=xu(k.type,k.key,k.props,null,P.mode,z),Yo(z,k),z.return=P,z;case V:return k=Yh(k,P.mode,z),k.return=P,k;case x:var Z=k._init;return k=Z(k._payload),J(P,k,z)}if(ae(k)||j(k))return k=gs(k,P.mode,z,null),k.return=P,k;if(typeof k.then=="function")return J(P,Hu(k),z);if(k.$$typeof===oe)return J(P,Nu(P,k),z);Gu(P,k)}return null}function H(P,k,z,Z){var fe=k!==null?k.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return fe!==null?null:T(P,k,""+z,Z);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case S:return z.key===fe?C(P,k,z,Z):null;case V:return z.key===fe?q(P,k,z,Z):null;case x:return fe=z._init,z=fe(z._payload),H(P,k,z,Z)}if(ae(z)||j(z))return fe!==null?null:$(P,k,z,Z,null);if(typeof z.then=="function")return H(P,k,Hu(z),Z);if(z.$$typeof===oe)return H(P,k,Nu(P,z),Z);Gu(P,z)}return null}function G(P,k,z,Z,fe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return P=P.get(z)||null,T(k,P,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case S:return P=P.get(Z.key===null?z:Z.key)||null,C(k,P,Z,fe);case V:return P=P.get(Z.key===null?z:Z.key)||null,q(k,P,Z,fe);case x:var Oe=Z._init;return Z=Oe(Z._payload),G(P,k,z,Z,fe)}if(ae(Z)||j(Z))return P=P.get(z)||null,$(k,P,Z,fe,null);if(typeof Z.then=="function")return G(P,k,z,Hu(Z),fe);if(Z.$$typeof===oe)return G(P,k,z,Nu(k,Z),fe);Gu(k,Z)}return null}function we(P,k,z,Z){for(var fe=null,Oe=null,ge=k,Ee=k=0,Ot=null;ge!==null&&Ee<z.length;Ee++){ge.index>Ee?(Ot=ge,ge=null):Ot=ge.sibling;var Be=H(P,ge,z[Ee],Z);if(Be===null){ge===null&&(ge=Ot);break}t&&ge&&Be.alternate===null&&i(P,ge),k=f(Be,k,Ee),Oe===null?fe=Be:Oe.sibling=Be,Oe=Be,ge=Ot}if(Ee===z.length)return a(P,ge),qe&&ys(P,Ee),fe;if(ge===null){for(;Ee<z.length;Ee++)ge=J(P,z[Ee],Z),ge!==null&&(k=f(ge,k,Ee),Oe===null?fe=ge:Oe.sibling=ge,Oe=ge);return qe&&ys(P,Ee),fe}for(ge=l(ge);Ee<z.length;Ee++)Ot=G(ge,P,Ee,z[Ee],Z),Ot!==null&&(t&&Ot.alternate!==null&&ge.delete(Ot.key===null?Ee:Ot.key),k=f(Ot,k,Ee),Oe===null?fe=Ot:Oe.sibling=Ot,Oe=Ot);return t&&ge.forEach(function(wr){return i(P,wr)}),qe&&ys(P,Ee),fe}function _e(P,k,z,Z){if(z==null)throw Error(s(151));for(var fe=null,Oe=null,ge=k,Ee=k=0,Ot=null,Be=z.next();ge!==null&&!Be.done;Ee++,Be=z.next()){ge.index>Ee?(Ot=ge,ge=null):Ot=ge.sibling;var wr=H(P,ge,Be.value,Z);if(wr===null){ge===null&&(ge=Ot);break}t&&ge&&wr.alternate===null&&i(P,ge),k=f(wr,k,Ee),Oe===null?fe=wr:Oe.sibling=wr,Oe=wr,ge=Ot}if(Be.done)return a(P,ge),qe&&ys(P,Ee),fe;if(ge===null){for(;!Be.done;Ee++,Be=z.next())Be=J(P,Be.value,Z),Be!==null&&(k=f(Be,k,Ee),Oe===null?fe=Be:Oe.sibling=Be,Oe=Be);return qe&&ys(P,Ee),fe}for(ge=l(ge);!Be.done;Ee++,Be=z.next())Be=G(ge,P,Ee,Be.value,Z),Be!==null&&(t&&Be.alternate!==null&&ge.delete(Be.key===null?Ee:Be.key),k=f(Be,k,Ee),Oe===null?fe=Be:Oe.sibling=Be,Oe=Be);return t&&ge.forEach(function(EA){return i(P,EA)}),qe&&ys(P,Ee),fe}function Je(P,k,z,Z){if(typeof z=="object"&&z!==null&&z.type===B&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case S:e:{for(var fe=z.key;k!==null;){if(k.key===fe){if(fe=z.type,fe===B){if(k.tag===7){a(P,k.sibling),Z=h(k,z.props.children),Z.return=P,P=Z;break e}}else if(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===x&&Mp(fe)===k.type){a(P,k.sibling),Z=h(k,z.props),Yo(Z,z),Z.return=P,P=Z;break e}a(P,k);break}else i(P,k);k=k.sibling}z.type===B?(Z=gs(z.props.children,P.mode,Z,z.key),Z.return=P,P=Z):(Z=xu(z.type,z.key,z.props,null,P.mode,Z),Yo(Z,z),Z.return=P,P=Z)}return b(P);case V:e:{for(fe=z.key;k!==null;){if(k.key===fe)if(k.tag===4&&k.stateNode.containerInfo===z.containerInfo&&k.stateNode.implementation===z.implementation){a(P,k.sibling),Z=h(k,z.children||[]),Z.return=P,P=Z;break e}else{a(P,k);break}else i(P,k);k=k.sibling}Z=Yh(z,P.mode,Z),Z.return=P,P=Z}return b(P);case x:return fe=z._init,z=fe(z._payload),Je(P,k,z,Z)}if(ae(z))return we(P,k,z,Z);if(j(z)){if(fe=j(z),typeof fe!="function")throw Error(s(150));return z=fe.call(z),_e(P,k,z,Z)}if(typeof z.then=="function")return Je(P,k,Hu(z),Z);if(z.$$typeof===oe)return Je(P,k,Nu(P,z),Z);Gu(P,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,k!==null&&k.tag===6?(a(P,k.sibling),Z=h(k,z),Z.return=P,P=Z):(a(P,k),Z=Qh(z,P.mode,Z),Z.return=P,P=Z),b(P)):a(P,k)}return function(P,k,z,Z){try{Qo=0;var fe=Je(P,k,z,Z);return va=null,fe}catch(ge){if(ge===Uo||ge===Ou)throw ge;var Oe=dn(29,ge,null,P.mode);return Oe.lanes=Z,Oe.return=P,Oe}finally{}}}var _a=Pp(!0),jp=Pp(!1),Cn=W(null),ri=null;function ur(t){var i=t.alternate;ie(St,St.current&1),ie(Cn,t),ri===null&&(i===null||ma.current!==null||i.memoizedState!==null)&&(ri=t)}function Up(t){if(t.tag===22){if(ie(St,St.current),ie(Cn,t),ri===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(ri=t)}}else cr()}function cr(){ie(St,St.current),ie(Cn,Cn.current)}function Mi(t){se(Cn),ri===t&&(ri=null),se(St)}var St=W(0);function Fu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||yf(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Rd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Id={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=pn(),h=ar(l);h.payload=i,a!=null&&(h.callback=a),i=or(t,h,l),i!==null&&(yn(i,t,l),zo(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=pn(),h=ar(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=or(t,h,l),i!==null&&(yn(i,t,l),zo(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=pn(),l=ar(a);l.tag=2,i!=null&&(l.callback=i),i=or(t,l,a),i!==null&&(yn(i,t,a),zo(i,t,a))}};function Lp(t,i,a,l,h,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):i.prototype&&i.prototype.isPureReactComponent?!No(a,l)||!No(h,f):!0}function zp(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Id.enqueueReplaceState(i,i.state,null)}function ws(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Ku=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Bp(t){Ku(t)}function qp(t){console.error(t)}function Hp(t){Ku(t)}function Qu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Gp(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Cd(t,i,a){return a=ar(a),a.tag=3,a.payload={element:null},a.callback=function(){Qu(t,i)},a}function Fp(t){return t=ar(t),t.tag=3,t}function Kp(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){Gp(i,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Gp(i,a,l),typeof h!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function ET(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Mo(i,a,h,!0),a=Cn.current,a!==null){switch(a.tag){case 13:return ri===null?Wd():a.alternate===null&&lt===0&&(lt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===rd?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),tf(t,l,h)),!1;case 22:return a.flags|=65536,l===rd?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),tf(t,l,h)),!1}throw Error(s(435,a.tag))}return tf(t,l,h),Wd(),!1}if(qe)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Zh&&(t=Error(s(422),{cause:l}),Vo(Sn(t,a)))):(l!==Zh&&(i=Error(s(423),{cause:l}),Vo(Sn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Sn(l,a),h=Cd(t.stateNode,l,h),od(t,h),lt!==4&&(lt=2)),!1;var f=Error(s(520),{cause:l});if(f=Sn(f,a),tl===null?tl=[f]:tl.push(f),lt!==4&&(lt=2),i===null)return!0;l=Sn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=Cd(a.stateNode,l,t),od(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(pr===null||!pr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Fp(h),Kp(h,t,a,l),od(a,h),!1}a=a.return}while(a!==null);return!1}var Qp=Error(s(461)),Nt=!1;function jt(t,i,a,l){i.child=t===null?jp(i,null,a,l):_a(i,t.child,a,l)}function Yp(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var b={};for(var T in l)T!=="ref"&&(b[T]=l[T])}else b=l;return Es(i),l=dd(t,i,a,b,f,h),T=fd(),t!==null&&!Nt?(md(t,i,h),Pi(t,i,h)):(qe&&T&&$h(i),i.flags|=1,jt(t,i,l,h),i.child)}function $p(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Kh(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Xp(t,i,f,l,h)):(t=xu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!jd(t,h)){var b=f.memoizedProps;if(a=a.compare,a=a!==null?a:No,a(b,l)&&t.ref===i.ref)return Pi(t,i,h)}return i.flags|=1,t=Ci(f,l),t.ref=i.ref,t.return=i,i.child=t}function Xp(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(No(f,l)&&t.ref===i.ref)if(Nt=!1,i.pendingProps=l=f,jd(t,h))(t.flags&131072)!==0&&(Nt=!0);else return i.lanes=t.lanes,Pi(t,i,h)}return Nd(t,i,a,l,h)}function Zp(t,i,a){var l=i.pendingProps,h=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(h=i.child=t.child,f=0;h!==null;)f=f|h.lanes|h.childLanes,h=h.sibling;i.childLanes=f&~l}else i.childLanes=0,i.child=null;return Jp(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Du(i,f!==null?f.cachePool:null),f!==null?Xg(i,f):ud(),Up(i);else return i.lanes=i.childLanes=536870912,Jp(t,i,f!==null?f.baseLanes|a:a,a)}else f!==null?(Du(i,f.cachePool),Xg(i,f),cr(),i.memoizedState=null):(t!==null&&Du(i,null),ud(),cr());return jt(t,i,h,a),i.child}function Jp(t,i,a,l){var h=id();return h=h===null?null:{parent:wt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Du(i,null),ud(),Up(i),t!==null&&Mo(t,i,l,!0),null}function Yu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Nd(t,i,a,l,h){return Es(i),a=dd(t,i,a,l,void 0,h),l=fd(),t!==null&&!Nt?(md(t,i,h),Pi(t,i,h)):(qe&&l&&$h(i),i.flags|=1,jt(t,i,a,h),i.child)}function Wp(t,i,a,l,h,f){return Es(i),i.updateQueue=null,a=Jg(i,l,a,h),Zg(t),l=fd(),t!==null&&!Nt?(md(t,i,f),Pi(t,i,f)):(qe&&l&&$h(i),i.flags|=1,jt(t,i,a,f),i.child)}function ey(t,i,a,l,h){if(Es(i),i.stateNode===null){var f=ua,b=a.contextType;typeof b=="object"&&b!==null&&(f=Gt(b)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Id,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},sd(i),b=a.contextType,f.context=typeof b=="object"&&b!==null?Gt(b):ua,f.state=i.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Rd(i,a,b,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Id.enqueueReplaceState(f,f.state,null),qo(i,l,f,h),Bo(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,C=ws(a,T);f.props=C;var q=f.context,$=a.contextType;b=ua,typeof $=="object"&&$!==null&&(b=Gt($));var J=a.getDerivedStateFromProps;$=typeof J=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,$||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||q!==b)&&zp(i,f,l,b),sr=!1;var H=i.memoizedState;f.state=H,qo(i,l,f,h),Bo(),q=i.memoizedState,T||H!==q||sr?(typeof J=="function"&&(Rd(i,a,J,l),q=i.memoizedState),(C=sr||Lp(i,a,C,l,H,q,b))?($||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=q),f.props=l,f.state=q,f.context=b,l=C):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,ad(t,i),b=i.memoizedProps,$=ws(a,b),f.props=$,J=i.pendingProps,H=f.context,q=a.contextType,C=ua,typeof q=="object"&&q!==null&&(C=Gt(q)),T=a.getDerivedStateFromProps,(q=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==J||H!==C)&&zp(i,f,l,C),sr=!1,H=i.memoizedState,f.state=H,qo(i,l,f,h),Bo();var G=i.memoizedState;b!==J||H!==G||sr||t!==null&&t.dependencies!==null&&Cu(t.dependencies)?(typeof T=="function"&&(Rd(i,a,T,l),G=i.memoizedState),($=sr||Lp(i,a,$,l,H,G,C)||t!==null&&t.dependencies!==null&&Cu(t.dependencies))?(q||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,G,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,G,C)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),f.props=l,f.state=G,f.context=C,l=$):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,Yu(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=_a(i,t.child,null,h),i.child=_a(i,null,a,h)):jt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=Pi(t,i,h),t}function ty(t,i,a,l){return ko(),i.flags|=256,jt(t,i,a,l),i.child}var Dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Od(t){return{baseLanes:t,cachePool:qg()}}function kd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Nn),t}function ny(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(St.current&2)!==0),b&&(h=!0,i.flags&=-129),b=(i.flags&32)!==0,i.flags&=-33,t===null){if(qe){if(h?ur(i):cr(),qe){var T=ot,C;if(C=T){e:{for(C=T,T=ii;C.nodeType!==8;){if(!T){T=null;break e}if(C=zn(C.nextSibling),C===null){T=null;break e}}T=C}T!==null?(i.memoizedState={dehydrated:T,treeContext:ps!==null?{id:Ni,overflow:Di}:null,retryLane:536870912,hydrationErrors:null},C=dn(18,null,null,0),C.stateNode=T,C.return=i,i.child=C,Wt=i,ot=null,C=!0):C=!1}C||_s(i)}if(T=i.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return yf(T)?i.lanes=32:i.lanes=536870912,null;Mi(i)}return T=l.children,l=l.fallback,h?(cr(),h=i.mode,T=$u({mode:"hidden",children:T},h),l=gs(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,h=i.child,h.memoizedState=Od(a),h.childLanes=kd(t,b,a),i.memoizedState=Dd,l):(ur(i),Vd(i,T))}if(C=t.memoizedState,C!==null&&(T=C.dehydrated,T!==null)){if(f)i.flags&256?(ur(i),i.flags&=-257,i=Md(t,i,a)):i.memoizedState!==null?(cr(),i.child=t.child,i.flags|=128,i=null):(cr(),h=l.fallback,T=i.mode,l=$u({mode:"visible",children:l.children},T),h=gs(h,T,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,_a(i,t.child,null,a),l=i.child,l.memoizedState=Od(a),l.childLanes=kd(t,b,a),i.memoizedState=Dd,i=h);else if(ur(i),yf(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var q=b.dgst;b=q,l=Error(s(419)),l.stack="",l.digest=b,Vo({value:l,source:null,stack:null}),i=Md(t,i,a)}else if(Nt||Mo(t,i,a,!1),b=(a&t.childLanes)!==0,Nt||b){if(b=et,b!==null&&(l=a&-a,l=(l&42)!==0?1:Zi(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,la(t,l),yn(b,t,l),Qp;T.data==="$?"||Wd(),i=Md(t,i,a)}else T.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=C.treeContext,ot=zn(T.nextSibling),Wt=i,qe=!0,vs=null,ii=!1,t!==null&&(Rn[In++]=Ni,Rn[In++]=Di,Rn[In++]=ps,Ni=t.id,Di=t.overflow,ps=i),i=Vd(i,l.children),i.flags|=4096);return i}return h?(cr(),h=l.fallback,T=i.mode,C=t.child,q=C.sibling,l=Ci(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,q!==null?h=Ci(q,h):(h=gs(h,T,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,T=t.child.memoizedState,T===null?T=Od(a):(C=T.cachePool,C!==null?(q=wt._currentValue,C=C.parent!==q?{parent:q,pool:q}:C):C=qg(),T={baseLanes:T.baseLanes|a,cachePool:C}),h.memoizedState=T,h.childLanes=kd(t,b,a),i.memoizedState=Dd,l):(ur(i),a=t.child,t=a.sibling,a=Ci(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(b=i.deletions,b===null?(i.deletions=[t],i.flags|=16):b.push(t)),i.child=a,i.memoizedState=null,a)}function Vd(t,i){return i=$u({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function $u(t,i){return t=dn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Md(t,i,a){return _a(i,t.child,null,a),t=Vd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function iy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Wh(t.return,i,a)}function Pd(t,i,a,l,h){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(f.isBackwards=i,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=h)}function ry(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;if(jt(t,i,l.children,a),l=St.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iy(t,a,i);else if(t.tag===19)iy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ie(St,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Fu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Pd(i,!1,h,a,f);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Fu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Pd(i,!0,a,null,f);break;case"together":Pd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Pi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),gr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Mo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Ci(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Ci(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function jd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Cu(t)))}function TT(t,i,a){switch(i.tag){case 3:Ye(i,i.stateNode.containerInfo),rr(i,wt,t.memoizedState.cache),ko();break;case 27:case 5:Fn(i);break;case 4:Ye(i,i.stateNode.containerInfo);break;case 10:rr(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(ur(i),i.flags|=128,null):(a&i.child.childLanes)!==0?ny(t,i,a):(ur(i),t=Pi(t,i,a),t!==null?t.sibling:null);ur(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Mo(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return ry(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ie(St,St.current),l)break;return null;case 22:case 23:return i.lanes=0,Zp(t,i,a);case 24:rr(i,wt,t.memoizedState.cache)}return Pi(t,i,a)}function sy(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Nt=!0;else{if(!jd(t,a)&&(i.flags&128)===0)return Nt=!1,TT(t,i,a);Nt=(t.flags&131072)!==0}else Nt=!1,qe&&(i.flags&1048576)!==0&&Mg(i,Iu,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Kh(l)?(t=ws(l,t),i.tag=1,i=ey(null,i,l,t,a)):(i.tag=0,i=Nd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===Q){i.tag=11,i=Yp(null,i,l,t,a);break e}else if(h===R){i.tag=14,i=$p(null,i,l,t,a);break e}}throw i=bt(l)||l,Error(s(306,i,""))}}return i;case 0:return Nd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ws(l,i.pendingProps),ey(t,i,l,h,a);case 3:e:{if(Ye(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,ad(t,i),qo(i,l,null,a);var b=i.memoizedState;if(l=b.cache,rr(i,wt,l),l!==f.cache&&ed(i,[wt],a,!0),Bo(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=ty(t,i,l,a);break e}else if(l!==h){h=Sn(Error(s(424)),i),Vo(h),i=ty(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ot=zn(t.firstChild),Wt=i,qe=!0,vs=null,ii=!0,a=jp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ko(),l===h){i=Pi(t,i,a);break e}jt(t,i,l,a)}i=i.child}return i;case 26:return Yu(t,i),t===null?(a=uv(i.type,null,i.pendingProps,null))?i.memoizedState=a:qe||(a=i.type,t=i.pendingProps,l=uc(ve.current).createElement(a),l[Et]=i,l[mt]=t,Lt(l,a,t),ut(l),i.stateNode=l):i.memoizedState=uv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Fn(i),t===null&&qe&&(l=i.stateNode=av(i.type,i.pendingProps,ve.current),Wt=i,ii=!0,h=ot,_r(i.type)?(vf=h,ot=zn(l.firstChild)):ot=h),jt(t,i,i.pendingProps.children,a),Yu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&qe&&((h=l=ot)&&(l=XT(l,i.type,i.pendingProps,ii),l!==null?(i.stateNode=l,Wt=i,ot=zn(l.firstChild),ii=!1,h=!0):h=!1),h||_s(i)),Fn(i),h=i.type,f=i.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,mf(h,f)?l=null:b!==null&&mf(h,b)&&(i.flags|=32),i.memoizedState!==null&&(h=dd(t,i,mT,null,null,a),cl._currentValue=h),Yu(t,i),jt(t,i,l,a),i.child;case 6:return t===null&&qe&&((t=a=ot)&&(a=ZT(a,i.pendingProps,ii),a!==null?(i.stateNode=a,Wt=i,ot=null,t=!0):t=!1),t||_s(i)),null;case 13:return ny(t,i,a);case 4:return Ye(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=_a(i,null,l,a):jt(t,i,l,a),i.child;case 11:return Yp(t,i,i.type,i.pendingProps,a);case 7:return jt(t,i,i.pendingProps,a),i.child;case 8:return jt(t,i,i.pendingProps.children,a),i.child;case 12:return jt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,rr(i,i.type,l.value),jt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Es(i),h=Gt(h),l=l(h),i.flags|=1,jt(t,i,l,a),i.child;case 14:return $p(t,i,i.type,i.pendingProps,a);case 15:return Xp(t,i,i.type,i.pendingProps,a);case 19:return ry(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=$u(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Ci(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Zp(t,i,a);case 24:return Es(i),l=Gt(wt),t===null?(h=id(),h===null&&(h=et,f=td(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},sd(i),rr(i,wt,h)):((t.lanes&a)!==0&&(ad(t,i),qo(i,null,null,a),Bo()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),rr(i,wt,l)):(l=f.cache,rr(i,wt,l),l!==h.cache&&ed(i,[wt],a,!0))),jt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function ji(t){t.flags|=4}function ay(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!mv(i)){if(i=Cn.current,i!==null&&((Le&4194048)===Le?ri!==null:(Le&62914560)!==Le&&(Le&536870912)===0||i!==ri))throw Lo=rd,Hg;t.flags|=8192}}function Xu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?ho():536870912,t.lanes|=i,Aa|=i)}function $o(t,i){if(!qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function rt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function AT(t,i,a){var l=i.pendingProps;switch(Xh(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(i),null;case 1:return rt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ki(wt),ln(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Oo(i)?ji(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ug())),rt(i),null;case 26:return a=i.memoizedState,t===null?(ji(i),a!==null?(rt(i),ay(i,a)):(rt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(ji(i),rt(i),ay(i,a)):(rt(i),i.flags&=-16777217):(t.memoizedProps!==l&&ji(i),rt(i),i.flags&=-16777217),null;case 27:Vn(i),a=ve.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}t=pe.current,Oo(i)?Pg(i):(t=av(h,l,a),i.stateNode=t,ji(i))}return rt(i),null;case 5:if(Vn(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return rt(i),null}if(t=pe.current,Oo(i))Pg(i);else{switch(h=uc(ve.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Et]=i,t[mt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Lt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&ji(i)}}return rt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&ji(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=ve.current,Oo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Wt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Et]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Wy(t.nodeValue,a)),t||_s(i)}else t=uc(t).createTextNode(l),t[Et]=i,i.stateNode=t}return rt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Oo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Et]=i}else ko(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rt(i),h=!1}else h=Ug(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Mi(i),i):(Mi(i),null)}if(Mi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Xu(i,i.updateQueue),rt(i),null;case 4:return ln(),t===null&&uf(i.stateNode.containerInfo),rt(i),null;case 10:return ki(i.type),rt(i),null;case 19:if(se(St),h=i.memoizedState,h===null)return rt(i),null;if(l=(i.flags&128)!==0,f=h.rendering,f===null)if(l)$o(h,!1);else{if(lt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=Fu(t),f!==null){for(i.flags|=128,$o(h,!1),t=f.updateQueue,i.updateQueue=t,Xu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Vg(a,t),a=a.sibling;return ie(St,St.current&1|2),i.child}t=t.sibling}h.tail!==null&&_n()>Wu&&(i.flags|=128,l=!0,$o(h,!1),i.lanes=4194304)}else{if(!l)if(t=Fu(f),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Xu(i,t),$o(h,!0),h.tail===null&&h.tailMode==="hidden"&&!f.alternate&&!qe)return rt(i),null}else 2*_n()-h.renderingStartTime>Wu&&a!==536870912&&(i.flags|=128,l=!0,$o(h,!1),i.lanes=4194304);h.isBackwards?(f.sibling=i.child,i.child=f):(t=h.last,t!==null?t.sibling=f:i.child=f,h.last=f)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=_n(),i.sibling=null,t=St.current,ie(St,l?t&1|2:t&1),i):(rt(i),null);case 22:case 23:return Mi(i),cd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(rt(i),i.subtreeFlags&6&&(i.flags|=8192)):rt(i),a=i.updateQueue,a!==null&&Xu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&se(Ts),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ki(wt),rt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function wT(t,i){switch(Xh(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ki(wt),ln(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Vn(i),null;case 13:if(Mi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ko()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return se(St),null;case 4:return ln(),null;case 10:return ki(i.type),null;case 22:case 23:return Mi(i),cd(),t!==null&&se(Ts),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ki(wt),null;case 25:return null;default:return null}}function oy(t,i){switch(Xh(i),i.tag){case 3:ki(wt),ln();break;case 26:case 27:case 5:Vn(i);break;case 4:ln();break;case 13:Mi(i);break;case 19:se(St);break;case 10:ki(i.type);break;case 22:case 23:Mi(i),cd(),t!==null&&se(Ts);break;case 24:ki(wt)}}function Xo(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,b=a.inst;l=f(),b.destroy=l}a=a.next}while(a!==h)}}catch(T){We(i,i.return,T)}}function hr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var b=l.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,h=i;var C=a,q=T;try{q()}catch($){We(h,C,$)}}}l=l.next}while(l!==f)}}catch($){We(i,i.return,$)}}function ly(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{$g(i,a)}catch(l){We(t,t.return,l)}}}function uy(t,i,a){a.props=ws(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){We(t,i,l)}}function Zo(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){We(t,i,h)}}function si(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){We(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){We(t,i,h)}else a.current=null}function cy(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){We(t,t.return,h)}}function Ud(t,i,a){try{var l=t.stateNode;FT(l,t.type,a,i),l[mt]=i}catch(h){We(t,t.return,h)}}function hy(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&_r(t.type)||t.tag===4}function Ld(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&_r(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=lc));else if(l!==4&&(l===27&&_r(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(zd(t,i,a),t=t.sibling;t!==null;)zd(t,i,a),t=t.sibling}function Zu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&_r(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Zu(t,i,a),t=t.sibling;t!==null;)Zu(t,i,a),t=t.sibling}function dy(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Lt(i,l,a),i[Et]=t,i[mt]=a}catch(f){We(t,t.return,f)}}var Ui=!1,ht=!1,Bd=!1,fy=typeof WeakSet=="function"?WeakSet:Set,Dt=null;function ST(t,i){if(t=t.containerInfo,df=gc,t=wg(t),Lh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var b=0,T=-1,C=-1,q=0,$=0,J=t,H=null;t:for(;;){for(var G;J!==a||h!==0&&J.nodeType!==3||(T=b+h),J!==f||l!==0&&J.nodeType!==3||(C=b+l),J.nodeType===3&&(b+=J.nodeValue.length),(G=J.firstChild)!==null;)H=J,J=G;for(;;){if(J===t)break t;if(H===a&&++q===h&&(T=b),H===f&&++$===l&&(C=b),(G=J.nextSibling)!==null)break;J=H,H=J.parentNode}J=G}a=T===-1||C===-1?null:{start:T,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(ff={focusedElem:t,selectionRange:a},gc=!1,Dt=i;Dt!==null;)if(i=Dt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Dt=t;else for(;Dt!==null;){switch(i=Dt,f=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var we=ws(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(we,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){We(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)pf(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":pf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Dt=t;break}Dt=i.return}}function my(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:dr(t,a),l&4&&Xo(5,a);break;case 1:if(dr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(b){We(a,a.return,b)}else{var h=ws(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(b){We(a,a.return,b)}}l&64&&ly(a),l&512&&Zo(a,a.return);break;case 3:if(dr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{$g(t,i)}catch(b){We(a,a.return,b)}}break;case 27:i===null&&l&4&&dy(a);case 26:case 5:dr(t,a),i===null&&l&4&&cy(a),l&512&&Zo(a,a.return);break;case 12:dr(t,a);break;case 13:dr(t,a),l&4&&yy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=VT.bind(null,a),JT(t,a))));break;case 22:if(l=a.memoizedState!==null||Ui,!l){i=i!==null&&i.memoizedState!==null||ht,h=Ui;var f=ht;Ui=l,(ht=i)&&!f?fr(t,a,(a.subtreeFlags&8772)!==0):dr(t,a),Ui=h,ht=f}break;case 30:break;default:dr(t,a)}}function gy(t){var i=t.alternate;i!==null&&(t.alternate=null,gy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&er(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,nn=!1;function Li(t,i,a){for(a=a.child;a!==null;)py(t,i,a),a=a.sibling}function py(t,i,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(at,a)}catch{}switch(a.tag){case 26:ht||si(a,i),Li(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ht||si(a,i);var l=it,h=nn;_r(a.type)&&(it=a.stateNode,nn=!1),Li(t,i,a),al(a.stateNode),it=l,nn=h;break;case 5:ht||si(a,i);case 6:if(l=it,h=nn,it=null,Li(t,i,a),it=l,nn=h,it!==null)if(nn)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(a.stateNode)}catch(f){We(a,i,f)}else try{it.removeChild(a.stateNode)}catch(f){We(a,i,f)}break;case 18:it!==null&&(nn?(t=it,rv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ml(t)):rv(it,a.stateNode));break;case 4:l=it,h=nn,it=a.stateNode.containerInfo,nn=!0,Li(t,i,a),it=l,nn=h;break;case 0:case 11:case 14:case 15:ht||hr(2,a,i),ht||hr(4,a,i),Li(t,i,a);break;case 1:ht||(si(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&uy(a,i,l)),Li(t,i,a);break;case 21:Li(t,i,a);break;case 22:ht=(l=ht)||a.memoizedState!==null,Li(t,i,a),ht=l;break;default:Li(t,i,a)}}function yy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ml(t)}catch(a){We(i,i.return,a)}}function xT(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new fy),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new fy),i;default:throw Error(s(435,t.tag))}}function qd(t,i){var a=xT(t);i.forEach(function(l){var h=MT.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function fn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,b=i,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(_r(T.type)){it=T.stateNode,nn=!1;break e}break;case 5:it=T.stateNode,nn=!1;break e;case 3:case 4:it=T.stateNode.containerInfo,nn=!0;break e}T=T.return}if(it===null)throw Error(s(160));py(f,b,h),it=null,nn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)vy(i,t),i=i.sibling}var Ln=null;function vy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:fn(i,t),mn(t),l&4&&(hr(3,t,t.return),Xo(3,t),hr(5,t,t.return));break;case 1:fn(i,t),mn(t),l&512&&(ht||a===null||si(a,a.return)),l&64&&Ui&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Ln;if(fn(i,t),mn(t),l&512&&(ht||a===null||si(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Wr]||f[Et]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Lt(f,l,a),f[Et]=t,ut(f),l=f;break e;case"link":var b=dv("link","href",h).get(l+(a.href||""));if(b){for(var T=0;T<b.length;T++)if(f=b[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(T,1);break t}}f=h.createElement(l),Lt(f,l,a),h.head.appendChild(f);break;case"meta":if(b=dv("meta","content",h).get(l+(a.content||""))){for(T=0;T<b.length;T++)if(f=b[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(T,1);break t}}f=h.createElement(l),Lt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Et]=t,ut(f),l=f}t.stateNode=l}else fv(h,t.type,t.stateNode);else t.stateNode=hv(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?fv(h,t.type,t.stateNode):hv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Ud(t,t.memoizedProps,a.memoizedProps)}break;case 27:fn(i,t),mn(t),l&512&&(ht||a===null||si(a,a.return)),a!==null&&l&4&&Ud(t,t.memoizedProps,a.memoizedProps);break;case 5:if(fn(i,t),mn(t),l&512&&(ht||a===null||si(a,a.return)),t.flags&32){h=t.stateNode;try{En(h,"")}catch(G){We(t,t.return,G)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Ud(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Bd=!0);break;case 6:if(fn(i,t),mn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(G){We(t,t.return,G)}}break;case 3:if(dc=null,h=Ln,Ln=cc(i.containerInfo),fn(i,t),Ln=h,mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ml(i.containerInfo)}catch(G){We(t,t.return,G)}Bd&&(Bd=!1,_y(t));break;case 4:l=Ln,Ln=cc(t.stateNode.containerInfo),fn(i,t),mn(t),Ln=l;break;case 12:fn(i,t),mn(t);break;case 13:fn(i,t),mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Yd=_n()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qd(t,l)));break;case 22:h=t.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,q=Ui,$=ht;if(Ui=q||h,ht=$||C,fn(i,t),ht=$,Ui=q,mn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||C||Ui||ht||Ss(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){C=a=i;try{if(f=C.stateNode,h)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=C.stateNode;var J=C.memoizedProps.style,H=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(G){We(C,C.return,G)}}}else if(i.tag===6){if(a===null){C=i;try{C.stateNode.nodeValue=h?"":C.memoizedProps}catch(G){We(C,C.return,G)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,qd(t,a))));break;case 19:fn(i,t),mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,qd(t,l)));break;case 30:break;case 21:break;default:fn(i,t),mn(t)}}function mn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(hy(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Ld(t);Zu(t,f,h);break;case 5:var b=a.stateNode;a.flags&32&&(En(b,""),a.flags&=-33);var T=Ld(t);Zu(t,T,b);break;case 3:case 4:var C=a.stateNode.containerInfo,q=Ld(t);zd(t,q,C);break;default:throw Error(s(161))}}catch($){We(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function _y(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;_y(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function dr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)my(t,i.alternate,i),i=i.sibling}function Ss(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:hr(4,i,i.return),Ss(i);break;case 1:si(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&uy(i,i.return,a),Ss(i);break;case 27:al(i.stateNode);case 26:case 5:si(i,i.return),Ss(i);break;case 22:i.memoizedState===null&&Ss(i);break;case 30:Ss(i);break;default:Ss(i)}t=t.sibling}}function fr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,b=f.flags;switch(f.tag){case 0:case 11:case 15:fr(h,f,a),Xo(4,f);break;case 1:if(fr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(q){We(l,l.return,q)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var C=h.shared.hiddenCallbacks;if(C!==null)for(h.shared.hiddenCallbacks=null,h=0;h<C.length;h++)Yg(C[h],T)}catch(q){We(l,l.return,q)}}a&&b&64&&ly(f),Zo(f,f.return);break;case 27:dy(f);case 26:case 5:fr(h,f,a),a&&l===null&&b&4&&cy(f),Zo(f,f.return);break;case 12:fr(h,f,a);break;case 13:fr(h,f,a),a&&b&4&&yy(h,f);break;case 22:f.memoizedState===null&&fr(h,f,a),Zo(f,f.return);break;case 30:break;default:fr(h,f,a)}i=i.sibling}}function Hd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Po(a))}function Gd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Po(t))}function ai(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)by(t,i,a,l),i=i.sibling}function by(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ai(t,i,a,l),h&2048&&Xo(9,i);break;case 1:ai(t,i,a,l);break;case 3:ai(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&Po(t)));break;case 12:if(h&2048){ai(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,b=f.id,T=f.onPostCommit;typeof T=="function"&&T(b,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){We(i,i.return,C)}}else ai(t,i,a,l);break;case 13:ai(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,b=i.alternate,i.memoizedState!==null?f._visibility&2?ai(t,i,a,l):Jo(t,i):f._visibility&2?ai(t,i,a,l):(f._visibility|=2,ba(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Hd(b,i);break;case 24:ai(t,i,a,l),h&2048&&Gd(i.alternate,i);break;default:ai(t,i,a,l)}}function ba(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var f=t,b=i,T=a,C=l,q=b.flags;switch(b.tag){case 0:case 11:case 15:ba(f,b,T,C,h),Xo(8,b);break;case 23:break;case 22:var $=b.stateNode;b.memoizedState!==null?$._visibility&2?ba(f,b,T,C,h):Jo(f,b):($._visibility|=2,ba(f,b,T,C,h)),h&&q&2048&&Hd(b.alternate,b);break;case 24:ba(f,b,T,C,h),h&&q&2048&&Gd(b.alternate,b);break;default:ba(f,b,T,C,h)}i=i.sibling}}function Jo(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Jo(a,l),h&2048&&Hd(l.alternate,l);break;case 24:Jo(a,l),h&2048&&Gd(l.alternate,l);break;default:Jo(a,l)}i=i.sibling}}var Wo=8192;function Ea(t){if(t.subtreeFlags&Wo)for(t=t.child;t!==null;)Ey(t),t=t.sibling}function Ey(t){switch(t.tag){case 26:Ea(t),t.flags&Wo&&t.memoizedState!==null&&hA(Ln,t.memoizedState,t.memoizedProps);break;case 5:Ea(t);break;case 3:case 4:var i=Ln;Ln=cc(t.stateNode.containerInfo),Ea(t),Ln=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Wo,Wo=16777216,Ea(t),Wo=i):Ea(t));break;default:Ea(t)}}function Ty(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function el(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Dt=l,wy(l,t)}Ty(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ay(t),t=t.sibling}function Ay(t){switch(t.tag){case 0:case 11:case 15:el(t),t.flags&2048&&hr(9,t,t.return);break;case 3:el(t);break;case 12:el(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ju(t)):el(t);break;default:el(t)}}function Ju(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Dt=l,wy(l,t)}Ty(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:hr(8,i,i.return),Ju(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(i));break;default:Ju(i)}t=t.sibling}}function wy(t,i){for(;Dt!==null;){var a=Dt;switch(a.tag){case 0:case 11:case 15:hr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Po(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Dt=l;else e:for(a=t;Dt!==null;){l=Dt;var h=l.sibling,f=l.return;if(gy(l),l===a){Dt=null;break e}if(h!==null){h.return=f,Dt=h;break e}Dt=f}}}var RT={getCacheForType:function(t){var i=Gt(wt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},IT=typeof WeakMap=="function"?WeakMap:Map,Ke=0,et=null,ke=null,Le=0,Qe=0,gn=null,mr=!1,Ta=!1,Fd=!1,zi=0,lt=0,gr=0,xs=0,Kd=0,Nn=0,Aa=0,tl=null,rn=null,Qd=!1,Yd=0,Wu=1/0,ec=null,pr=null,Ut=0,yr=null,wa=null,Sa=0,$d=0,Xd=null,Sy=null,nl=0,Zd=null;function pn(){if((Ke&2)!==0&&Le!==0)return Le&-Le;if(U.T!==null){var t=da;return t!==0?t:sf()}return Ji()}function xy(){Nn===0&&(Nn=(Le&536870912)===0||qe?co():536870912);var t=Cn.current;return t!==null&&(t.flags|=32),Nn}function yn(t,i,a){(t===et&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(xa(t,0),vr(t,Le,Nn,!1)),vi(t,a),((Ke&2)===0||t!==et)&&(t===et&&((Ke&2)===0&&(xs|=a),lt===4&&vr(t,Le,Nn,!1)),oi(t))}function Ry(t,i,a){if((Ke&6)!==0)throw Error(s(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||Jr(t,i),h=l?DT(t,i):ef(t,i,!0),f=l;do{if(h===0){Ta&&!l&&vr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!CT(a)){h=ef(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){i=b;e:{var T=t;h=tl;var C=T.current.memoizedState.isDehydrated;if(C&&(xa(T,b).flags|=256),b=ef(T,b,!1),b!==2){if(Fd&&!C){T.errorRecoveryDisabledLanes|=f,xs|=f,h=4;break e}f=rn,rn=h,f!==null&&(rn===null?rn=f:rn.push.apply(rn,f))}h=b}if(f=!1,h!==2)continue}}if(h===1){xa(t,0),vr(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:vr(l,i,Nn,!mr);break e;case 2:rn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Yd+300-_n(),10<h)){if(vr(l,i,Nn,!mr),Hs(l,0,!0)!==0)break e;l.timeoutHandle=nv(Iy.bind(null,l,a,rn,ec,Qd,i,Nn,xs,Aa,mr,f,2,-0,0),h);break e}Iy(l,a,rn,ec,Qd,i,Nn,xs,Aa,mr,f,0,-0,0)}}break}while(!0);oi(t)}function Iy(t,i,a,l,h,f,b,T,C,q,$,J,H,G){if(t.timeoutHandle=-1,J=i.subtreeFlags,(J&8192||(J&16785408)===16785408)&&(ul={stylesheets:null,count:0,unsuspend:cA},Ey(i),J=dA(),J!==null)){t.cancelPendingCommit=J(My.bind(null,t,i,f,a,l,h,b,T,C,$,1,H,G)),vr(t,f,b,!q);return}My(t,i,f,a,l,h,b,T,C)}function CT(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!hn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function vr(t,i,a,l){i&=~Kd,i&=~xs,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-Ht(h),b=1<<f;l[f]=-1,h&=~b}a!==0&&Kn(t,a,i)}function tc(){return(Ke&6)===0?(il(0),!1):!0}function Jd(){if(ke!==null){if(Qe===0)var t=ke.return;else t=ke,Oi=bs=null,gd(t),va=null,Qo=0,t=ke;for(;t!==null;)oy(t.alternate,t),t=t.return;ke=null}}function xa(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,QT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Jd(),et=t,ke=a=Ci(t.current,null),Le=i,Qe=0,gn=null,mr=!1,Ta=Jr(t,i),Fd=!1,Aa=Nn=Kd=xs=gr=lt=0,rn=tl=null,Qd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Ht(l),f=1<<h;i|=t[h],l&=~f}return zi=i,Au(),a}function Cy(t,i){Ne=null,U.H=qu,i===Uo||i===Ou?(i=Kg(),Qe=3):i===Hg?(i=Kg(),Qe=4):Qe=i===Qp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,gn=i,ke===null&&(lt=1,Qu(t,Sn(i,t.current)))}function Ny(){var t=U.H;return U.H=qu,t===null?qu:t}function Dy(){var t=U.A;return U.A=RT,t}function Wd(){lt=4,mr||(Le&4194048)!==Le&&Cn.current!==null||(Ta=!0),(gr&134217727)===0&&(xs&134217727)===0||et===null||vr(et,Le,Nn,!1)}function ef(t,i,a){var l=Ke;Ke|=2;var h=Ny(),f=Dy();(et!==t||Le!==i)&&(ec=null,xa(t,i)),i=!1;var b=lt;e:do try{if(Qe!==0&&ke!==null){var T=ke,C=gn;switch(Qe){case 8:Jd(),b=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var q=Qe;if(Qe=0,gn=null,Ra(t,T,C,q),a&&Ta){b=0;break e}break;default:q=Qe,Qe=0,gn=null,Ra(t,T,C,q)}}NT(),b=lt;break}catch($){Cy(t,$)}while(!0);return i&&t.shellSuspendCounter++,Oi=bs=null,Ke=l,U.H=h,U.A=f,ke===null&&(et=null,Le=0,Au()),b}function NT(){for(;ke!==null;)Oy(ke)}function DT(t,i){var a=Ke;Ke|=2;var l=Ny(),h=Dy();et!==t||Le!==i?(ec=null,Wu=_n()+500,xa(t,i)):Ta=Jr(t,i);e:do try{if(Qe!==0&&ke!==null){i=ke;var f=gn;t:switch(Qe){case 1:Qe=0,gn=null,Ra(t,i,f,1);break;case 2:case 9:if(Gg(f)){Qe=0,gn=null,ky(i);break}i=function(){Qe!==2&&Qe!==9||et!==t||(Qe=7),oi(t)},f.then(i,i);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:Gg(f)?(Qe=0,gn=null,ky(i)):(Qe=0,gn=null,Ra(t,i,f,7));break;case 5:var b=null;switch(ke.tag){case 26:b=ke.memoizedState;case 5:case 27:var T=ke;if(!b||mv(b)){Qe=0,gn=null;var C=T.sibling;if(C!==null)ke=C;else{var q=T.return;q!==null?(ke=q,nc(q)):ke=null}break t}}Qe=0,gn=null,Ra(t,i,f,5);break;case 6:Qe=0,gn=null,Ra(t,i,f,6);break;case 8:Jd(),lt=6;break e;default:throw Error(s(462))}}OT();break}catch($){Cy(t,$)}while(!0);return Oi=bs=null,U.H=l,U.A=h,Ke=a,ke!==null?0:(et=null,Le=0,Au(),lt)}function OT(){for(;ke!==null&&!Qr();)Oy(ke)}function Oy(t){var i=sy(t.alternate,t,zi);t.memoizedProps=t.pendingProps,i===null?nc(t):ke=i}function ky(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Wp(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=Wp(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:gd(i);default:oy(a,i),i=ke=Vg(i,zi),i=sy(a,i,zi)}t.memoizedProps=t.pendingProps,i===null?nc(t):ke=i}function Ra(t,i,a,l){Oi=bs=null,gd(i),va=null,Qo=0;var h=i.return;try{if(ET(t,h,i,a,Le)){lt=1,Qu(t,Sn(a,t.current)),ke=null;return}}catch(f){if(h!==null)throw ke=h,f;lt=1,Qu(t,Sn(a,t.current)),ke=null;return}i.flags&32768?(qe||l===1?t=!0:Ta||(Le&536870912)!==0?t=!1:(mr=t=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Vy(i,t)):nc(i)}function nc(t){var i=t;do{if((i.flags&32768)!==0){Vy(i,mr);return}t=i.return;var a=AT(i.alternate,i,zi);if(a!==null){ke=a;return}if(i=i.sibling,i!==null){ke=i;return}ke=i=t}while(i!==null);lt===0&&(lt=5)}function Vy(t,i){do{var a=wT(t.alternate,t);if(a!==null){a.flags&=32767,ke=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){ke=t;return}ke=t=a}while(t!==null);lt=6,ke=null}function My(t,i,a,l,h,f,b,T,C){t.cancelPendingCommit=null;do ic();while(Ut!==0);if((Ke&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Gh,fo(t,a,f,b,T,C),t===et&&(ke=et=null,Le=0),wa=i,yr=t,Sa=a,$d=f,Xd=h,Sy=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,PT(Yr,function(){return zy(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=U.T,U.T=null,h=ne.p,ne.p=2,b=Ke,Ke|=4;try{ST(t,i,a)}finally{Ke=b,ne.p=h,U.T=l}}Ut=1,Py(),jy(),Uy()}}function Py(){if(Ut===1){Ut=0;var t=yr,i=wa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var l=ne.p;ne.p=2;var h=Ke;Ke|=4;try{vy(i,t);var f=ff,b=wg(t.containerInfo),T=f.focusedElem,C=f.selectionRange;if(b!==T&&T&&T.ownerDocument&&Ag(T.ownerDocument.documentElement,T)){if(C!==null&&Lh(T)){var q=C.start,$=C.end;if($===void 0&&($=q),"selectionStart"in T)T.selectionStart=q,T.selectionEnd=Math.min($,T.value.length);else{var J=T.ownerDocument||document,H=J&&J.defaultView||window;if(H.getSelection){var G=H.getSelection(),we=T.textContent.length,_e=Math.min(C.start,we),Je=C.end===void 0?_e:Math.min(C.end,we);!G.extend&&_e>Je&&(b=Je,Je=_e,_e=b);var P=Tg(T,_e),k=Tg(T,Je);if(P&&k&&(G.rangeCount!==1||G.anchorNode!==P.node||G.anchorOffset!==P.offset||G.focusNode!==k.node||G.focusOffset!==k.offset)){var z=J.createRange();z.setStart(P.node,P.offset),G.removeAllRanges(),_e>Je?(G.addRange(z),G.extend(k.node,k.offset)):(z.setEnd(k.node,k.offset),G.addRange(z))}}}}for(J=[],G=T;G=G.parentNode;)G.nodeType===1&&J.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var Z=J[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}gc=!!df,ff=df=null}finally{Ke=h,ne.p=l,U.T=a}}t.current=i,Ut=2}}function jy(){if(Ut===2){Ut=0;var t=yr,i=wa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var l=ne.p;ne.p=2;var h=Ke;Ke|=4;try{my(t,i.alternate,i)}finally{Ke=h,ne.p=l,U.T=a}}Ut=3}}function Uy(){if(Ut===4||Ut===3){Ut=0,Jl();var t=yr,i=wa,a=Sa,l=Sy;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ut=5:(Ut=0,wa=yr=null,Ly(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(pr=null),Gs(a),i=i.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(at,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=U.T,h=ne.p,ne.p=2,U.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var T=l[b];f(T.value,{componentStack:T.stack})}}finally{U.T=i,ne.p=h}}(Sa&3)!==0&&ic(),oi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===Zd?nl++:(nl=0,Zd=t):nl=0,il(0)}}function Ly(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,Po(i)))}function ic(t){return Py(),jy(),Uy(),zy()}function zy(){if(Ut!==5)return!1;var t=yr,i=$d;$d=0;var a=Gs(Sa),l=U.T,h=ne.p;try{ne.p=32>a?32:a,U.T=null,a=Xd,Xd=null;var f=yr,b=Sa;if(Ut=0,wa=yr=null,Sa=0,(Ke&6)!==0)throw Error(s(331));var T=Ke;if(Ke|=4,Ay(f.current),by(f,f.current,b,a),Ke=T,il(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(at,f)}catch{}return!0}finally{ne.p=h,U.T=l,Ly(t,i)}}function By(t,i,a){i=Sn(a,i),i=Cd(t.stateNode,i,2),t=or(t,i,2),t!==null&&(vi(t,2),oi(t))}function We(t,i,a){if(t.tag===3)By(t,t,a);else for(;i!==null;){if(i.tag===3){By(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(pr===null||!pr.has(l))){t=Sn(a,t),a=Fp(2),l=or(i,a,2),l!==null&&(Kp(a,l,i,t),vi(l,2),oi(l));break}}i=i.return}}function tf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new IT;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Fd=!0,h.add(a),t=kT.bind(null,t,i,a),i.then(t,t))}function kT(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,et===t&&(Le&a)===a&&(lt===4||lt===3&&(Le&62914560)===Le&&300>_n()-Yd?(Ke&2)===0&&xa(t,0):Kd|=a,Aa===Le&&(Aa=0)),oi(t)}function qy(t,i){i===0&&(i=ho()),t=la(t,i),t!==null&&(vi(t,i),oi(t))}function VT(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),qy(t,a)}function MT(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),qy(t,a)}function PT(t,i){return gi(t,i)}var rc=null,Ia=null,nf=!1,sc=!1,rf=!1,Rs=0;function oi(t){t!==Ia&&t.next===null&&(Ia===null?rc=Ia=t:Ia=Ia.next=t),sc=!0,nf||(nf=!0,UT())}function il(t,i){if(!rf&&sc){rf=!0;do for(var a=!1,l=rc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var b=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Ht(42|t)+1)-1,f&=h&~(b&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Ky(l,f))}else f=Le,f=Hs(l,l===et?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Jr(l,f)||(a=!0,Ky(l,f));l=l.next}while(a);rf=!1}}function jT(){Hy()}function Hy(){sc=nf=!1;var t=0;Rs!==0&&(KT()&&(t=Rs),Rs=0);for(var i=_n(),a=null,l=rc;l!==null;){var h=l.next,f=Gy(l,i);f===0?(l.next=null,a===null?rc=h:a.next=h,h===null&&(Ia=a)):(a=l,(t!==0||(f&3)!==0)&&(sc=!0)),l=h}il(t)}function Gy(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-Ht(f),T=1<<b,C=h[b];C===-1?((T&a)===0||(T&l)!==0)&&(h[b]=uo(T,i)):C<=i&&(t.expiredLanes|=T),f&=~T}if(i=et,a=Le,a=Hs(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&pi(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Jr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&pi(l),Gs(a)){case 2:case 8:a=Bs;break;case 32:a=Yr;break;case 268435456:a=qs;break;default:a=Yr}return l=Fy.bind(null,t),a=gi(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&pi(l),t.callbackPriority=2,t.callbackNode=null,2}function Fy(t,i){if(Ut!==0&&Ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ic()&&t.callbackNode!==a)return null;var l=Le;return l=Hs(t,t===et?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ry(t,l,i),Gy(t,_n()),t.callbackNode!=null&&t.callbackNode===a?Fy.bind(null,t):null)}function Ky(t,i){if(ic())return null;Ry(t,i,!0)}function UT(){YT(function(){(Ke&6)!==0?gi(oo,jT):Hy()})}function sf(){return Rs===0&&(Rs=co()),Rs}function Qy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Xs(""+t)}function Yy(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function LT(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=Qy((h[mt]||null).action),b=l.submitter;b&&(i=(i=b[mt]||null)?Qy(i.formAction):b.getAttribute("formAction"),i!==null&&(f=i,b=null));var T=new Zs("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Rs!==0){var C=b?Yy(h,b):new FormData(h);wd(a,{pending:!0,data:C,method:h.method,action:f},null,C)}}else typeof f=="function"&&(T.preventDefault(),C=b?Yy(h,b):new FormData(h),wd(a,{pending:!0,data:C,method:h.method,action:f},f,C))},currentTarget:h}]})}}for(var af=0;af<Hh.length;af++){var of=Hh[af],zT=of.toLowerCase(),BT=of[0].toUpperCase()+of.slice(1);Un(zT,"on"+BT)}Un(Rg,"onAnimationEnd"),Un(Ig,"onAnimationIteration"),Un(Cg,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(rT,"onTransitionRun"),Un(sT,"onTransitionStart"),Un(aT,"onTransitionCancel"),Un(Ng,"onTransitionEnd"),bi("onMouseEnter",["mouseout","mouseover"]),bi("onMouseLeave",["mouseout","mouseover"]),bi("onPointerEnter",["pointerout","pointerover"]),bi("onPointerLeave",["pointerout","pointerover"]),Pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(rl));function $y(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var b=l.length-1;0<=b;b--){var T=l[b],C=T.instance,q=T.currentTarget;if(T=T.listener,C!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch($){Ku($)}h.currentTarget=null,f=C}else for(b=0;b<l.length;b++){if(T=l[b],C=T.instance,q=T.currentTarget,T=T.listener,C!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=q;try{f(h)}catch($){Ku($)}h.currentTarget=null,f=C}}}}function Ve(t,i){var a=i[go];a===void 0&&(a=i[go]=new Set);var l=t+"__bubble";a.has(l)||(Xy(i,t,2,!1),a.add(l))}function lf(t,i,a){var l=0;i&&(l|=4),Xy(a,t,l,i)}var ac="_reactListening"+Math.random().toString(36).slice(2);function uf(t){if(!t[ac]){t[ac]=!0,po.forEach(function(a){a!=="selectionchange"&&(qT.has(a)||lf(a,!1,t),lf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[ac]||(i[ac]=!0,lf("selectionchange",!1,i))}}function Xy(t,i,a,l){switch(bv(i)){case 2:var h=gA;break;case 8:h=pA;break;default:h=Af}a=h.bind(null,i,a,t),h=void 0,!An||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function cf(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var T=l.stateNode.containerInfo;if(T===h)break;if(b===4)for(b=l.return;b!==null;){var C=b.tag;if((C===3||C===4)&&b.stateNode.containerInfo===h)return;b=b.return}for(;T!==null;){if(b=_i(T),b===null)return;if(C=b.tag,C===5||C===6||C===26||C===27){l=f=b;continue e}T=T.parentNode}}l=l.return}lu(function(){var q=f,$=Tn(a),J=[];e:{var H=Dg.get(t);if(H!==void 0){var G=Zs,we=t;switch(t){case"keypress":if(Jn(a)===0)break e;case"keydown":case"keyup":G=ia;break;case"focusin":we="focus",G=ea;break;case"focusout":we="blur",G=ea;break;case"beforeblur":case"afterblur":G=ea;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=pu;break;case Rg:case Ig:case Cg:G=ta;break;case Ng:G=vu;break;case"scroll":case"scrollend":G=uu;break;case"wheel":G=ra;break;case"copy":case"cut":case"paste":G=na;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Io;break;case"toggle":case"beforetoggle":G=bu}var _e=(i&4)!==0,Je=!_e&&(t==="scroll"||t==="scrollend"),P=_e?H!==null?H+"Capture":null:H;_e=[];for(var k=q,z;k!==null;){var Z=k;if(z=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||z===null||P===null||(Z=as(k,P),Z!=null&&_e.push(sl(k,Z,z))),Je)break;k=k.return}0<_e.length&&(H=new G(H,we,null,a,$),J.push({event:H,listeners:_e}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",H&&a!==Ai&&(we=a.relatedTarget||a.fromElement)&&(_i(we)||we[bn]))break e;if((G||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,G?(we=a.relatedTarget||a.toElement,G=q,we=we?_i(we):null,we!==null&&(Je=u(we),_e=we.tag,we!==Je||_e!==5&&_e!==27&&_e!==6)&&(we=null)):(G=null,we=q),G!==we)){if(_e=wn,Z="onMouseLeave",P="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(_e=Io,Z="onPointerLeave",P="onPointerEnter",k="pointer"),Je=G==null?H:Yn(G),z=we==null?H:Yn(we),H=new _e(Z,k+"leave",G,a,$),H.target=Je,H.relatedTarget=z,Z=null,_i($)===q&&(_e=new _e(P,k+"enter",we,a,$),_e.target=z,_e.relatedTarget=Je,Z=_e),Je=Z,G&&we)t:{for(_e=G,P=we,k=0,z=_e;z;z=Ca(z))k++;for(z=0,Z=P;Z;Z=Ca(Z))z++;for(;0<k-z;)_e=Ca(_e),k--;for(;0<z-k;)P=Ca(P),z--;for(;k--;){if(_e===P||P!==null&&_e===P.alternate)break t;_e=Ca(_e),P=Ca(P)}_e=null}else _e=null;G!==null&&Zy(J,H,G,_e,!1),we!==null&&Je!==null&&Zy(J,Je,we,_e,!0)}}e:{if(H=q?Yn(q):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var fe=pg;else if(At(H))if(yg)fe=tT;else{fe=WE;var Oe=JE}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?q&&Eo(q.elementType)&&(fe=pg):fe=eT;if(fe&&(fe=fe(t,q))){Ii(J,fe,a,$);break e}Oe&&Oe(t,H,q),t==="focusout"&&q&&H.type==="number"&&q.memoizedProps.value!=null&&nr(H,"number",H.value)}switch(Oe=q?Yn(q):window,t){case"focusin":(At(Oe)||Oe.contentEditable==="true")&&(sa=Oe,zh=q,Do=null);break;case"focusout":Do=zh=sa=null;break;case"mousedown":Bh=!0;break;case"contextmenu":case"mouseup":case"dragend":Bh=!1,Sg(J,a,$);break;case"selectionchange":if(iT)break;case"keydown":case"keyup":Sg(J,a,$)}var ge;if(ti)e:{switch(t){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else je?K(t,a)&&(Ee="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ee="onCompositionStart");Ee&&(_&&a.locale!=="ko"&&(je||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&je&&(ge=Ao()):(Zn=$,ir="value"in Zn?Zn.value:Zn.textContent,je=!0)),Oe=oc(q,Ee),0<Oe.length&&(Ee=new xo(Ee,t,null,a,$),J.push({event:Ee,listeners:Oe}),ge?Ee.data=ge:(ge=re(a),ge!==null&&(Ee.data=ge)))),(ge=g?Tt(t,a):Ue(t,a))&&(Ee=oc(q,"onBeforeInput"),0<Ee.length&&(Oe=new xo("onBeforeInput","beforeinput",null,a,$),J.push({event:Oe,listeners:Ee}),Oe.data=ge)),LT(J,t,q,a,$)}$y(J,i)})}function sl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function oc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=as(t,a),h!=null&&l.unshift(sl(t,h,f)),h=as(t,i),h!=null&&l.push(sl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function Ca(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Zy(t,i,a,l,h){for(var f=i._reactName,b=[];a!==null&&a!==l;){var T=a,C=T.alternate,q=T.stateNode;if(T=T.tag,C!==null&&C===l)break;T!==5&&T!==26&&T!==27||q===null||(C=q,h?(q=as(a,f),q!=null&&b.unshift(sl(a,q,C))):h||(q=as(a,f),q!=null&&b.push(sl(a,q,C)))),a=a.return}b.length!==0&&t.push({event:i,listeners:b})}var HT=/\r\n?/g,GT=/\u0000|\uFFFD/g;function Jy(t){return(typeof t=="string"?t:""+t).replace(HT,`
`).replace(GT,"")}function Wy(t,i){return i=Jy(i),Jy(t)===i}function lc(){}function Ze(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||En(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&En(t,""+l);break;case"className":$n(t,"class",l);break;case"tabIndex":$n(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":$n(t,a,l);break;case"style":bo(t,l,f);break;case"data":if(i!=="object"){$n(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Xs(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&Ze(t,i,"name",h.name,h,null),Ze(t,i,"formEncType",h.formEncType,h,null),Ze(t,i,"formMethod",h.formMethod,h,null),Ze(t,i,"formTarget",h.formTarget,h,null)):(Ze(t,i,"encType",h.encType,h,null),Ze(t,i,"method",h.method,h,null),Ze(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Xs(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=lc);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Xs(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ve("beforetoggle",t),Ve("toggle",t),tr(t,"popover",l);break;case"xlinkActuate":Mt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Mt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Mt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Mt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Mt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Mt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Mt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Mt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Mt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":tr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=kh.get(a)||a,tr(t,a,l))}}function hf(t,i,a,l,h,f){switch(a){case"style":bo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?En(t,l):(typeof l=="number"||typeof l=="bigint")&&En(t,""+l);break;case"onScroll":l!=null&&Ve("scroll",t);break;case"onScrollEnd":l!=null&&Ve("scrollend",t);break;case"onClick":l!=null&&(t.onclick=lc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[mt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):tr(t,a,l)}}}function Lt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ve("error",t),Ve("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var b=a[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ze(t,i,f,b,a,null)}}h&&Ze(t,i,"srcSet",a.srcSet,a,null),l&&Ze(t,i,"src",a.src,a,null);return;case"input":Ve("invalid",t);var T=f=b=h=null,C=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":h=$;break;case"type":b=$;break;case"checked":C=$;break;case"defaultChecked":q=$;break;case"value":f=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,i));break;default:Ze(t,i,l,$,a,null)}}is(t,f,T,C,q,b,h,!1),$s(t);return;case"select":Ve("invalid",t),l=b=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":b=T;break;case"multiple":l=T;default:Ze(t,i,h,T,a,null)}i=f,a=b,t.multiple=!!l,i!=null?Ti(t,!!l,i,!1):a!=null&&Ti(t,!!l,a,!0);return;case"textarea":Ve("invalid",t),f=h=l=null;for(b in a)if(a.hasOwnProperty(b)&&(T=a[b],T!=null))switch(b){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:Ze(t,i,b,T,a,null)}rs(t,l,h,f),$s(t);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(l=a[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(t,i,C,l,a,null)}return;case"dialog":Ve("beforetoggle",t),Ve("toggle",t),Ve("cancel",t),Ve("close",t);break;case"iframe":case"object":Ve("load",t);break;case"video":case"audio":for(l=0;l<rl.length;l++)Ve(rl[l],t);break;case"image":Ve("error",t),Ve("load",t);break;case"details":Ve("toggle",t);break;case"embed":case"source":case"link":Ve("error",t),Ve("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:Ze(t,i,q,l,a,null)}return;default:if(Eo(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&hf(t,i,$,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&Ze(t,i,T,l,a,null))}function FT(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,b=null,T=null,C=null,q=null,$=null;for(G in a){var J=a[G];if(a.hasOwnProperty(G)&&J!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":C=J;default:l.hasOwnProperty(G)||Ze(t,i,G,null,l,J)}}for(var H in l){var G=l[H];if(J=a[H],l.hasOwnProperty(H)&&(G!=null||J!=null))switch(H){case"type":f=G;break;case"name":h=G;break;case"checked":q=G;break;case"defaultChecked":$=G;break;case"value":b=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,i));break;default:G!==J&&Ze(t,i,H,G,l,J)}}cn(t,b,T,C,q,$,f,h);return;case"select":G=b=T=H=null;for(f in a)if(C=a[f],a.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":G=C;default:l.hasOwnProperty(f)||Ze(t,i,f,null,l,C)}for(h in l)if(f=l[h],C=a[h],l.hasOwnProperty(h)&&(f!=null||C!=null))switch(h){case"value":H=f;break;case"defaultValue":T=f;break;case"multiple":b=f;default:f!==C&&Ze(t,i,h,f,l,C)}i=T,a=b,l=G,H!=null?Ti(t,!!a,H,!1):!!l!=!!a&&(i!=null?Ti(t,!!a,i,!0):Ti(t,!!a,a?[]:"",!1));return;case"textarea":G=H=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Ze(t,i,T,null,l,h)}for(b in l)if(h=l[b],f=a[b],l.hasOwnProperty(b)&&(h!=null||f!=null))switch(b){case"value":H=h;break;case"defaultValue":G=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&Ze(t,i,b,h,l,f)}$e(t,H,G);return;case"option":for(var we in a)if(H=a[we],a.hasOwnProperty(we)&&H!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:Ze(t,i,we,null,l,H)}for(C in l)if(H=l[C],G=a[C],l.hasOwnProperty(C)&&H!==G&&(H!=null||G!=null))switch(C){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:Ze(t,i,C,H,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)H=a[_e],a.hasOwnProperty(_e)&&H!=null&&!l.hasOwnProperty(_e)&&Ze(t,i,_e,null,l,H);for(q in l)if(H=l[q],G=a[q],l.hasOwnProperty(q)&&H!==G&&(H!=null||G!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,i));break;default:Ze(t,i,q,H,l,G)}return;default:if(Eo(i)){for(var Je in a)H=a[Je],a.hasOwnProperty(Je)&&H!==void 0&&!l.hasOwnProperty(Je)&&hf(t,i,Je,void 0,l,H);for($ in l)H=l[$],G=a[$],!l.hasOwnProperty($)||H===G||H===void 0&&G===void 0||hf(t,i,$,H,l,G);return}}for(var P in a)H=a[P],a.hasOwnProperty(P)&&H!=null&&!l.hasOwnProperty(P)&&Ze(t,i,P,null,l,H);for(J in l)H=l[J],G=a[J],!l.hasOwnProperty(J)||H===G||H==null&&G==null||Ze(t,i,J,H,l,G)}var df=null,ff=null;function uc(t){return t.nodeType===9?t:t.ownerDocument}function ev(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function mf(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var gf=null;function KT(){var t=window.event;return t&&t.type==="popstate"?t===gf?!1:(gf=t,!0):(gf=null,!1)}var nv=typeof setTimeout=="function"?setTimeout:void 0,QT=typeof clearTimeout=="function"?clearTimeout:void 0,iv=typeof Promise=="function"?Promise:void 0,YT=typeof queueMicrotask=="function"?queueMicrotask:typeof iv<"u"?function(t){return iv.resolve(null).then(t).catch($T)}:nv;function $T(t){setTimeout(function(){throw t})}function _r(t){return t==="head"}function rv(t,i){var a=i,l=0,h=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var b=t.ownerDocument;if(a&1&&al(b.documentElement),a&2&&al(b.body),a&4)for(a=b.head,al(a),b=a.firstChild;b;){var T=b.nextSibling,C=b.nodeName;b[Wr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=T}}if(h===0){t.removeChild(f),ml(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);ml(i)}function pf(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":pf(a),er(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function XT(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Wr])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=zn(t.nextSibling),t===null)break}return null}function ZT(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=zn(t.nextSibling),t===null))return null;return t}function yf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function JT(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function zn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var vf=null;function sv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function av(t,i,a){switch(i=uc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function al(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);er(t)}var Dn=new Map,ov=new Set;function cc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Bi=ne.d;ne.d={f:WT,r:eA,D:tA,C:nA,L:iA,m:rA,X:aA,S:sA,M:oA};function WT(){var t=Bi.f(),i=tc();return t||i}function eA(t){var i=Qn(t);i!==null&&i.tag===5&&i.type==="form"?Rp(i):Bi.r(t)}var Na=typeof document>"u"?null:document;function lv(t,i,a){var l=Na;if(l&&typeof i=="string"&&i){var h=gt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),ov.has(h)||(ov.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Lt(i,"link",t),ut(i),l.head.appendChild(i)))}}function tA(t){Bi.D(t),lv("dns-prefetch",t,null)}function nA(t,i){Bi.C(t,i),lv("preconnect",t,i)}function iA(t,i,a){Bi.L(t,i,a);var l=Na;if(l&&t&&i){var h='link[rel="preload"][as="'+gt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+gt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+gt(a.imageSizes)+'"]')):h+='[href="'+gt(t)+'"]';var f=h;switch(i){case"style":f=Da(t);break;case"script":f=Oa(t)}Dn.has(f)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Dn.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(ol(f))||i==="script"&&l.querySelector(ll(f))||(i=l.createElement("link"),Lt(i,"link",t),ut(i),l.head.appendChild(i)))}}function rA(t,i){Bi.m(t,i);var a=Na;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+gt(l)+'"][href="'+gt(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=Oa(t)}if(!Dn.has(f)&&(t=E({rel:"modulepreload",href:t},i),Dn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ll(f)))return}l=a.createElement("link"),Lt(l,"link",t),ut(l),a.head.appendChild(l)}}}function sA(t,i,a){Bi.S(t,i,a);var l=Na;if(l&&t){var h=Xt(l).hoistableStyles,f=Da(t);i=i||"default";var b=h.get(f);if(!b){var T={loading:0,preload:null};if(b=l.querySelector(ol(f)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Dn.get(f))&&_f(t,a);var C=b=l.createElement("link");ut(C),Lt(C,"link",t),C._p=new Promise(function(q,$){C.onload=q,C.onerror=$}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,hc(b,i,l)}b={type:"stylesheet",instance:b,count:1,state:T},h.set(f,b)}}}function aA(t,i){Bi.X(t,i);var a=Na;if(a&&t){var l=Xt(a).hoistableScripts,h=Oa(t),f=l.get(h);f||(f=a.querySelector(ll(h)),f||(t=E({src:t,async:!0},i),(i=Dn.get(h))&&bf(t,i),f=a.createElement("script"),ut(f),Lt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function oA(t,i){Bi.M(t,i);var a=Na;if(a&&t){var l=Xt(a).hoistableScripts,h=Oa(t),f=l.get(h);f||(f=a.querySelector(ll(h)),f||(t=E({src:t,async:!0,type:"module"},i),(i=Dn.get(h))&&bf(t,i),f=a.createElement("script"),ut(f),Lt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function uv(t,i,a,l){var h=(h=ve.current)?cc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Da(a.href),a=Xt(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Da(a.href);var f=Xt(h).hoistableStyles,b=f.get(t);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=h.querySelector(ol(t)))&&!f._p&&(b.instance=f,b.state.loading=5),Dn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Dn.set(t,a),f||lA(h,t,a,b.state))),i&&l===null)throw Error(s(528,""));return b}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Oa(a),a=Xt(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Da(t){return'href="'+gt(t)+'"'}function ol(t){return'link[rel="stylesheet"]['+t+"]"}function cv(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function lA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Lt(i,"link",a),ut(i),t.head.appendChild(i))}function Oa(t){return'[src="'+gt(t)+'"]'}function ll(t){return"script[async]"+t}function hv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+gt(a.href)+'"]');if(l)return i.instance=l,ut(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ut(l),Lt(l,"style",h),hc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Da(a.href);var f=t.querySelector(ol(h));if(f)return i.state.loading|=4,i.instance=f,ut(f),f;l=cv(a),(h=Dn.get(h))&&_f(l,h),f=(t.ownerDocument||t).createElement("link"),ut(f);var b=f;return b._p=new Promise(function(T,C){b.onload=T,b.onerror=C}),Lt(f,"link",l),i.state.loading|=4,hc(f,a.precedence,t),i.instance=f;case"script":return f=Oa(a.src),(h=t.querySelector(ll(f)))?(i.instance=h,ut(h),h):(l=a,(h=Dn.get(f))&&(l=E({},a),bf(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),ut(h),Lt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,hc(l,a.precedence,t));return i.instance}function hc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,b=0;b<l.length;b++){var T=l[b];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function _f(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function bf(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var dc=null;function dv(t,i,a){if(dc===null){var l=new Map,h=dc=new Map;h.set(a,l)}else h=dc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Wr]||f[Et]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(i)||"";b=t+b;var T=l.get(b);T?T.push(f):l.set(b,[f])}}return l}function fv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function uA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function mv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ul=null;function cA(){}function hA(t,i,a){if(ul===null)throw Error(s(475));var l=ul;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Da(a.href),f=t.querySelector(ol(h));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=fc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=f,ut(f);return}f=t.ownerDocument||t,a=cv(a),(h=Dn.get(h))&&_f(a,h),f=f.createElement("link"),ut(f);var b=f;b._p=new Promise(function(T,C){b.onload=T,b.onerror=C}),Lt(f,"link",a),i.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=fc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function dA(){if(ul===null)throw Error(s(475));var t=ul;return t.stylesheets&&t.count===0&&Ef(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Ef(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function fc(){if(this.count--,this.count===0){if(this.stylesheets)Ef(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var mc=null;function Ef(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,mc=new Map,i.forEach(fA,t),mc=null,fc.call(t))}function fA(t,i){if(!(i.state.loading&4)){var a=mc.get(t);if(a)var l=a.get(null);else{a=new Map,mc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var b=h[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}h=i.instance,b=h.getAttribute("data-precedence"),f=a.get(b)||l,f===l&&a.set(null,h),a.set(b,h),this.count++,l=fc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var cl={$$typeof:oe,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function mA(t,i,a,l,h,f,b,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yi(0),this.hiddenUpdates=yi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function gv(t,i,a,l,h,f,b,T,C,q,$,J){return t=new mA(t,i,a,b,T,C,q,J),i=1,f===!0&&(i|=24),f=dn(3,null,null,i),t.current=f,f.stateNode=t,i=td(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},sd(f),t}function pv(t){return t?(t=ua,t):ua}function yv(t,i,a,l,h,f){h=pv(h),l.context===null?l.context=h:l.pendingContext=h,l=ar(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=or(t,l,i),a!==null&&(yn(a,t,i),zo(a,t,i))}function vv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Tf(t,i){vv(t,i),(t=t.alternate)&&vv(t,i)}function _v(t){if(t.tag===13){var i=la(t,67108864);i!==null&&yn(i,t,67108864),Tf(t,67108864)}}var gc=!0;function gA(t,i,a,l){var h=U.T;U.T=null;var f=ne.p;try{ne.p=2,Af(t,i,a,l)}finally{ne.p=f,U.T=h}}function pA(t,i,a,l){var h=U.T;U.T=null;var f=ne.p;try{ne.p=8,Af(t,i,a,l)}finally{ne.p=f,U.T=h}}function Af(t,i,a,l){if(gc){var h=wf(l);if(h===null)cf(t,i,l,pc,a),Ev(t,l);else if(vA(h,t,i,a,l))l.stopPropagation();else if(Ev(t,l),i&4&&-1<yA.indexOf(t)){for(;h!==null;){var f=Qn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=Mn(f.pendingLanes);if(b!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var C=1<<31-Ht(b);T.entanglements[1]|=C,b&=~C}oi(f),(Ke&6)===0&&(Wu=_n()+500,il(0))}}break;case 13:T=la(f,2),T!==null&&yn(T,f,2),tc(),Tf(f,2)}if(f=wf(l),f===null&&cf(t,i,l,pc,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else cf(t,i,l,null,a)}}function wf(t){return t=Tn(t),Sf(t)}var pc=null;function Sf(t){if(pc=null,t=_i(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return pc=t,null}function bv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rh()){case oo:return 2;case Bs:return 8;case Yr:case Ih:return 32;case qs:return 268435456;default:return 32}default:return 32}}var xf=!1,br=null,Er=null,Tr=null,hl=new Map,dl=new Map,Ar=[],yA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ev(t,i){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":hl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(i.pointerId)}}function fl(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=Qn(i),i!==null&&_v(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function vA(t,i,a,l,h){switch(i){case"focusin":return br=fl(br,t,i,a,l,h),!0;case"dragenter":return Er=fl(Er,t,i,a,l,h),!0;case"mouseover":return Tr=fl(Tr,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return hl.set(f,fl(hl.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,dl.set(f,fl(dl.get(f)||null,t,i,a,l,h)),!0}return!1}function Tv(t){var i=_i(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,tu(t.priority,function(){if(a.tag===13){var l=pn();l=Zi(l);var h=la(a,l);h!==null&&yn(h,a,l),Tf(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=wf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ai=l,a.target.dispatchEvent(l),Ai=null}else return i=Qn(a),i!==null&&_v(i),t.blockedOn=a,!1;i.shift()}return!0}function Av(t,i,a){yc(t)&&a.delete(i)}function _A(){xf=!1,br!==null&&yc(br)&&(br=null),Er!==null&&yc(Er)&&(Er=null),Tr!==null&&yc(Tr)&&(Tr=null),hl.forEach(Av),dl.forEach(Av)}function vc(t,i){t.blockedOn===i&&(t.blockedOn=null,xf||(xf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,_A)))}var _c=null;function wv(t){_c!==t&&(_c=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_c===t&&(_c=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(Sf(l||a)===null)continue;break}var f=Qn(a);f!==null&&(t.splice(i,3),i-=3,wd(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function ml(t){function i(C){return vc(C,t)}br!==null&&vc(br,t),Er!==null&&vc(Er,t),Tr!==null&&vc(Tr,t),hl.forEach(i),dl.forEach(i);for(var a=0;a<Ar.length;a++){var l=Ar[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ar.length&&(a=Ar[0],a.blockedOn===null);)Tv(a),a.blockedOn===null&&Ar.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],b=h[mt]||null;if(typeof f=="function")b||wv(a);else if(b){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,b=f[mt]||null)T=b.formAction;else if(Sf(h)!==null)continue}else T=b.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),wv(a)}}}function Rf(t){this._internalRoot=t}bc.prototype.render=Rf.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=pn();yv(a,l,t,i,null,null)},bc.prototype.unmount=Rf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;yv(t.current,2,null,t,null,null),tc(),i[bn]=null}};function bc(t){this._internalRoot=t}bc.prototype.unstable_scheduleHydration=function(t){if(t){var i=Ji();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Ar.length&&i!==0&&i<Ar[a].priority;a++);Ar.splice(a,0,t),a===0&&Tv(t)}};var Sv=e.version;if(Sv!=="19.1.0")throw Error(s(527,Sv,"19.1.0"));ne.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var bA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{at=Ec.inject(bA),Fe=Ec}catch{}}return pl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Bp,f=qp,b=Hp,T=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(b=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(T=i.unstable_transitionCallbacks)),i=gv(t,1,!1,null,null,a,l,h,f,b,T,null),t[bn]=i.current,uf(t),new Rf(i)},pl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=Bp,b=qp,T=Hp,C=null,q=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(q=a.formState)),i=gv(t,1,!0,i,a??null,l,h,f,b,T,C,q),i.context=pv(null),a=i.current,l=pn(),l=Zi(l),h=ar(l),h.callback=null,or(a,h,l),a=l,i.current.lanes=a,vi(i,a),oi(i),t[bn]=i.current,uf(t),new bc(i)},pl.version="19.1.0",pl}var Mv;function NA(){if(Mv)return Nf.exports;Mv=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Nf.exports=CA(),Nf.exports}var DA=NA();const OA="modulepreload",kA=function(r){return"/youtube-bgm-research/"+r},Pv={},ja=function(e,n,s){let o=Promise.resolve();if(n&&n.length>0){let d=function(y){return Promise.all(y.map(E=>Promise.resolve(E).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),p=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));o=d(n.map(y=>{if(y=kA(y),y in Pv)return;Pv[y]=!0;const E=y.endsWith(".css"),w=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const S=document.createElement("link");if(S.rel=E?"stylesheet":OA,E||(S.as="script"),S.crossOrigin="",S.href=y,p&&S.setAttribute("nonce",p),document.head.appendChild(S),E)return new Promise((V,B)=>{S.addEventListener("load",V),S.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${y}`)))})}))}function u(d){const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=d,window.dispatchEvent(m),!m.defaultPrevented)throw d}return o.then(d=>{for(const m of d||[])m.status==="rejected"&&u(m.reason);return e().catch(u)})},VA=()=>{};var jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},MA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],d=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},g0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],d=o+1<r.length,m=d?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,E=u>>2,w=(u&3)<<4|m>>4;let S=(m&15)<<2|y>>6,V=y&63;p||(V=64,d||(S=64)),s.push(n[E],n[w],n[S],n[V])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(m0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):MA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const w=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||y==null||w==null)throw new PA;const S=u<<2|m>>4;if(s.push(S),y!==64){const V=m<<4&240|y>>2;if(s.push(V),w!==64){const B=y<<6&192|w;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class PA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jA=function(r){const e=m0(r);return g0.encodeByteArray(e,!0)},Lc=function(r){return jA(r).replace(/\./g,"")},p0=function(r){try{return g0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=()=>UA().__FIREBASE_DEFAULTS__,zA=()=>{if(typeof process>"u"||typeof jv>"u")return;const r=jv.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},BA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&p0(r[1]);return e&&JSON.parse(e)},rh=()=>{try{return VA()||LA()||zA()||BA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},y0=r=>{var e,n;return(n=(e=rh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[r]},qA=r=>{const e=y0(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},v0=()=>{var r;return(r=rh())===null||r===void 0?void 0:r.config},_0=r=>{var e;return(e=rh())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(r){return r.endsWith(".cloudworkstations.dev")}async function b0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Lc(JSON.stringify(n)),Lc(JSON.stringify(d)),""].join(".")}const wl={};function FA(){const r={prod:[],emulator:[]};for(const e of Object.keys(wl))wl[e]?r.emulator.push(e):r.prod.push(e);return r}function KA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Uv=!1;function E0(r,e){if(typeof window>"u"||typeof document>"u"||!Wa(window.location.host)||wl[r]===e||wl[r]||Uv)return;wl[r]=e;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=FA().prod.length>0;function d(){const S=document.getElementById(s);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,V){S.setAttribute("width","24"),S.setAttribute("id",V),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Uv=!0,d()},S}function E(S,V){S.setAttribute("id",V),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=KA(s),V=n("text"),B=document.getElementById(V)||document.createElement("span"),F=n("learnmore"),Y=document.getElementById(F)||document.createElement("a"),me=n("preprendIcon"),ue=document.getElementById(me)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const oe=S.element;m(oe),E(Y,F);const Q=y();p(ue,me),oe.append(ue,B,Y,Q),document.body.appendChild(oe)}u?(B.innerText="Preview backend disconnected.",ue.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ue.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function YA(){var r;const e=(r=rh())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $A(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function ZA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JA(){const r=$t();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function WA(){return!YA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ew(){try{return typeof indexedDB=="object"}catch{return!1}}function tw(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="FirebaseError";class Xi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=nw,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?iw(u,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Xi(o,m,s)}}function iw(r,e){return r.replace(rw,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const rw=/\{\$([^}]+)}/g;function sw(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ns(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],d=e[o];if(Lv(u)&&Lv(d)){if(!Ns(u,d))return!1}else if(u!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Lv(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function yl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function vl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function aw(r,e){const n=new ow(r,e);return n.subscribe.bind(n)}class ow{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");lw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Vf),o.error===void 0&&(o.error=Vf),o.complete===void 0&&(o.complete=Vf);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lw(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Vf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(r){return r&&r._delegate?r._delegate:r}class Ds{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new HA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hw(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),u=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:cw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cw(r){return r===Is?void 0:r}function hw(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Me||(Me={}));const fw={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},mw=Me.INFO,gw={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},pw=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=gw[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Em{constructor(e){this.name=e,this._logLevel=mw,this._logHandler=pw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const yw=(r,e)=>e.some(n=>r instanceof n);let zv,Bv;function vw(){return zv||(zv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _w(){return Bv||(Bv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const T0=new WeakMap,Kf=new WeakMap,A0=new WeakMap,Mf=new WeakMap,Tm=new WeakMap;function bw(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",d)},u=()=>{n(Dr(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&T0.set(n,r)}).catch(()=>{}),Tm.set(e,r),e}function Ew(r){if(Kf.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",d),r.removeEventListener("abort",d)},u=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",d),r.addEventListener("abort",d)});Kf.set(r,e)}let Qf={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Kf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||A0.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Tw(r){Qf=r(Qf)}function Aw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Pf(this),e,...n);return A0.set(s,e.sort?e.sort():[e]),Dr(s)}:_w().includes(r)?function(...e){return r.apply(Pf(this),e),Dr(T0.get(this))}:function(...e){return Dr(r.apply(Pf(this),e))}}function ww(r){return typeof r=="function"?Aw(r):(r instanceof IDBTransaction&&Ew(r),yw(r,vw())?new Proxy(r,Qf):r)}function Dr(r){if(r instanceof IDBRequest)return bw(r);if(Mf.has(r))return Mf.get(r);const e=ww(r);return e!==r&&(Mf.set(r,e),Tm.set(e,r)),e}const Pf=r=>Tm.get(r);function Sw(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const d=indexedDB.open(r,e),m=Dr(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Dr(d.result),p.oldVersion,p.newVersion,Dr(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const xw=["get","getKey","getAll","getAllKeys","count"],Rw=["put","add","delete","clear"],jf=new Map;function qv(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(jf.get(e))return jf.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Rw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||xw.includes(n)))return;const u=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&p.done]))[0]};return jf.set(e,u),u}Tw(r=>({...r,get:(e,n,s)=>qv(e,n)||r.get(e,n,s),has:(e,n)=>!!qv(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Cw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Cw(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yf="@firebase/app",Hv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new Em("@firebase/app"),Nw="@firebase/app-compat",Dw="@firebase/analytics-compat",Ow="@firebase/analytics",kw="@firebase/app-check-compat",Vw="@firebase/app-check",Mw="@firebase/auth",Pw="@firebase/auth-compat",jw="@firebase/database",Uw="@firebase/data-connect",Lw="@firebase/database-compat",zw="@firebase/functions",Bw="@firebase/functions-compat",qw="@firebase/installations",Hw="@firebase/installations-compat",Gw="@firebase/messaging",Fw="@firebase/messaging-compat",Kw="@firebase/performance",Qw="@firebase/performance-compat",Yw="@firebase/remote-config",$w="@firebase/remote-config-compat",Xw="@firebase/storage",Zw="@firebase/storage-compat",Jw="@firebase/firestore",Ww="@firebase/ai",eS="@firebase/firestore-compat",tS="firebase",nS="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="[DEFAULT]",iS={[Yf]:"fire-core",[Nw]:"fire-core-compat",[Ow]:"fire-analytics",[Dw]:"fire-analytics-compat",[Vw]:"fire-app-check",[kw]:"fire-app-check-compat",[Mw]:"fire-auth",[Pw]:"fire-auth-compat",[jw]:"fire-rtdb",[Uw]:"fire-data-connect",[Lw]:"fire-rtdb-compat",[zw]:"fire-fn",[Bw]:"fire-fn-compat",[qw]:"fire-iid",[Hw]:"fire-iid-compat",[Gw]:"fire-fcm",[Fw]:"fire-fcm-compat",[Kw]:"fire-perf",[Qw]:"fire-perf-compat",[Yw]:"fire-rc",[$w]:"fire-rc-compat",[Xw]:"fire-gcs",[Zw]:"fire-gcs-compat",[Jw]:"fire-fst",[eS]:"fire-fst-compat",[Ww]:"fire-vertex","fire-js":"fire-js",[tS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map,rS=new Map,Xf=new Map;function Gv(r,e){try{r.container.addComponent(e)}catch(n){Ki.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Ga(r){const e=r.name;if(Xf.has(e))return Ki.debug(`There were multiple attempts to register component ${e}.`),!1;Xf.set(e,r);for(const n of zc.values())Gv(n,r);for(const n of rS.values())Gv(n,r);return!0}function Am(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function On(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Or=new zl("app","Firebase",sS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=nS;function w0(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:$f,automaticDataCollectionEnabled:!0},e),o=s.name;if(typeof o!="string"||!o)throw Or.create("bad-app-name",{appName:String(o)});if(n||(n=v0()),!n)throw Or.create("no-options");const u=zc.get(o);if(u){if(Ns(n,u.options)&&Ns(s,u.config))return u;throw Or.create("duplicate-app",{appName:o})}const d=new dw(o);for(const p of Xf.values())d.addComponent(p);const m=new aS(n,s,d);return zc.set(o,m),m}function S0(r=$f){const e=zc.get(r);if(!e&&r===$f&&v0())return w0();if(!e)throw Or.create("no-app",{appName:r});return e}function kr(r,e,n){var s;let o=(s=iS[r])!==null&&s!==void 0?s:r;n&&(o+=`-${n}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ki.warn(m.join(" "));return}Ga(new Ds(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS="firebase-heartbeat-database",lS=1,Nl="firebase-heartbeat-store";let Uf=null;function x0(){return Uf||(Uf=Sw(oS,lS,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Nl)}catch(n){console.warn(n)}}}}).catch(r=>{throw Or.create("idb-open",{originalErrorMessage:r.message})})),Uf}async function uS(r){try{const n=(await x0()).transaction(Nl),s=await n.objectStore(Nl).get(R0(r));return await n.done,s}catch(e){if(e instanceof Xi)Ki.warn(e.message);else{const n=Or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ki.warn(n.message)}}}async function Fv(r,e){try{const s=(await x0()).transaction(Nl,"readwrite");await s.objectStore(Nl).put(e,R0(r)),await s.done}catch(n){if(n instanceof Xi)Ki.warn(n.message);else{const s=Or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ki.warn(s.message)}}}function R0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS=1024,hS=30;class dS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mS(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Kv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>hS){const d=gS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Ki.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Kv(),{heartbeatsToSend:s,unsentEntries:o}=fS(this._heartbeatsCache.heartbeats),u=Lc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Ki.warn(n),""}}}function Kv(){return new Date().toISOString().substring(0,10)}function fS(r,e=cS){const n=[];let s=r.slice();for(const o of r){const u=n.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),Qv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Qv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class mS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ew()?tw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Fv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Qv(r){return Lc(JSON.stringify({version:2,heartbeats:r})).length}function gS(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(r){Ga(new Ds("platform-logger",e=>new Iw(e),"PRIVATE")),Ga(new Ds("heartbeat",e=>new dS(e),"PRIVATE")),kr(Yf,Hv,r),kr(Yf,Hv,"esm2017"),kr("fire-js","")}pS("");var Yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vr,I0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,x){function I(){}I.prototype=x.prototype,R.D=x.prototype,R.prototype=new I,R.prototype.constructor=R,R.C=function(O,M,j){for(var N=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)N[bt-2]=arguments[bt];return x.prototype[M].apply(O,N)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,x,I){I||(I=0);var O=Array(16);if(typeof x=="string")for(var M=0;16>M;++M)O[M]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(M=0;16>M;++M)O[M]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=R.g[0],I=R.g[1],M=R.g[2];var j=R.g[3],N=x+(j^I&(M^j))+O[0]+3614090360&4294967295;x=I+(N<<7&4294967295|N>>>25),N=j+(M^x&(I^M))+O[1]+3905402710&4294967295,j=x+(N<<12&4294967295|N>>>20),N=M+(I^j&(x^I))+O[2]+606105819&4294967295,M=j+(N<<17&4294967295|N>>>15),N=I+(x^M&(j^x))+O[3]+3250441966&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(j^I&(M^j))+O[4]+4118548399&4294967295,x=I+(N<<7&4294967295|N>>>25),N=j+(M^x&(I^M))+O[5]+1200080426&4294967295,j=x+(N<<12&4294967295|N>>>20),N=M+(I^j&(x^I))+O[6]+2821735955&4294967295,M=j+(N<<17&4294967295|N>>>15),N=I+(x^M&(j^x))+O[7]+4249261313&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(j^I&(M^j))+O[8]+1770035416&4294967295,x=I+(N<<7&4294967295|N>>>25),N=j+(M^x&(I^M))+O[9]+2336552879&4294967295,j=x+(N<<12&4294967295|N>>>20),N=M+(I^j&(x^I))+O[10]+4294925233&4294967295,M=j+(N<<17&4294967295|N>>>15),N=I+(x^M&(j^x))+O[11]+2304563134&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(j^I&(M^j))+O[12]+1804603682&4294967295,x=I+(N<<7&4294967295|N>>>25),N=j+(M^x&(I^M))+O[13]+4254626195&4294967295,j=x+(N<<12&4294967295|N>>>20),N=M+(I^j&(x^I))+O[14]+2792965006&4294967295,M=j+(N<<17&4294967295|N>>>15),N=I+(x^M&(j^x))+O[15]+1236535329&4294967295,I=M+(N<<22&4294967295|N>>>10),N=x+(M^j&(I^M))+O[1]+4129170786&4294967295,x=I+(N<<5&4294967295|N>>>27),N=j+(I^M&(x^I))+O[6]+3225465664&4294967295,j=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(j^x))+O[11]+643717713&4294967295,M=j+(N<<14&4294967295|N>>>18),N=I+(j^x&(M^j))+O[0]+3921069994&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(M^j&(I^M))+O[5]+3593408605&4294967295,x=I+(N<<5&4294967295|N>>>27),N=j+(I^M&(x^I))+O[10]+38016083&4294967295,j=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(j^x))+O[15]+3634488961&4294967295,M=j+(N<<14&4294967295|N>>>18),N=I+(j^x&(M^j))+O[4]+3889429448&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(M^j&(I^M))+O[9]+568446438&4294967295,x=I+(N<<5&4294967295|N>>>27),N=j+(I^M&(x^I))+O[14]+3275163606&4294967295,j=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(j^x))+O[3]+4107603335&4294967295,M=j+(N<<14&4294967295|N>>>18),N=I+(j^x&(M^j))+O[8]+1163531501&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(M^j&(I^M))+O[13]+2850285829&4294967295,x=I+(N<<5&4294967295|N>>>27),N=j+(I^M&(x^I))+O[2]+4243563512&4294967295,j=x+(N<<9&4294967295|N>>>23),N=M+(x^I&(j^x))+O[7]+1735328473&4294967295,M=j+(N<<14&4294967295|N>>>18),N=I+(j^x&(M^j))+O[12]+2368359562&4294967295,I=M+(N<<20&4294967295|N>>>12),N=x+(I^M^j)+O[5]+4294588738&4294967295,x=I+(N<<4&4294967295|N>>>28),N=j+(x^I^M)+O[8]+2272392833&4294967295,j=x+(N<<11&4294967295|N>>>21),N=M+(j^x^I)+O[11]+1839030562&4294967295,M=j+(N<<16&4294967295|N>>>16),N=I+(M^j^x)+O[14]+4259657740&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(I^M^j)+O[1]+2763975236&4294967295,x=I+(N<<4&4294967295|N>>>28),N=j+(x^I^M)+O[4]+1272893353&4294967295,j=x+(N<<11&4294967295|N>>>21),N=M+(j^x^I)+O[7]+4139469664&4294967295,M=j+(N<<16&4294967295|N>>>16),N=I+(M^j^x)+O[10]+3200236656&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(I^M^j)+O[13]+681279174&4294967295,x=I+(N<<4&4294967295|N>>>28),N=j+(x^I^M)+O[0]+3936430074&4294967295,j=x+(N<<11&4294967295|N>>>21),N=M+(j^x^I)+O[3]+3572445317&4294967295,M=j+(N<<16&4294967295|N>>>16),N=I+(M^j^x)+O[6]+76029189&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(I^M^j)+O[9]+3654602809&4294967295,x=I+(N<<4&4294967295|N>>>28),N=j+(x^I^M)+O[12]+3873151461&4294967295,j=x+(N<<11&4294967295|N>>>21),N=M+(j^x^I)+O[15]+530742520&4294967295,M=j+(N<<16&4294967295|N>>>16),N=I+(M^j^x)+O[2]+3299628645&4294967295,I=M+(N<<23&4294967295|N>>>9),N=x+(M^(I|~j))+O[0]+4096336452&4294967295,x=I+(N<<6&4294967295|N>>>26),N=j+(I^(x|~M))+O[7]+1126891415&4294967295,j=x+(N<<10&4294967295|N>>>22),N=M+(x^(j|~I))+O[14]+2878612391&4294967295,M=j+(N<<15&4294967295|N>>>17),N=I+(j^(M|~x))+O[5]+4237533241&4294967295,I=M+(N<<21&4294967295|N>>>11),N=x+(M^(I|~j))+O[12]+1700485571&4294967295,x=I+(N<<6&4294967295|N>>>26),N=j+(I^(x|~M))+O[3]+2399980690&4294967295,j=x+(N<<10&4294967295|N>>>22),N=M+(x^(j|~I))+O[10]+4293915773&4294967295,M=j+(N<<15&4294967295|N>>>17),N=I+(j^(M|~x))+O[1]+2240044497&4294967295,I=M+(N<<21&4294967295|N>>>11),N=x+(M^(I|~j))+O[8]+1873313359&4294967295,x=I+(N<<6&4294967295|N>>>26),N=j+(I^(x|~M))+O[15]+4264355552&4294967295,j=x+(N<<10&4294967295|N>>>22),N=M+(x^(j|~I))+O[6]+2734768916&4294967295,M=j+(N<<15&4294967295|N>>>17),N=I+(j^(M|~x))+O[13]+1309151649&4294967295,I=M+(N<<21&4294967295|N>>>11),N=x+(M^(I|~j))+O[4]+4149444226&4294967295,x=I+(N<<6&4294967295|N>>>26),N=j+(I^(x|~M))+O[11]+3174756917&4294967295,j=x+(N<<10&4294967295|N>>>22),N=M+(x^(j|~I))+O[2]+718787259&4294967295,M=j+(N<<15&4294967295|N>>>17),N=I+(j^(M|~x))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+x&4294967295,R.g[1]=R.g[1]+(M+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+M&4294967295,R.g[3]=R.g[3]+j&4294967295}s.prototype.u=function(R,x){x===void 0&&(x=R.length);for(var I=x-this.blockSize,O=this.B,M=this.h,j=0;j<x;){if(M==0)for(;j<=I;)o(this,R,j),j+=this.blockSize;if(typeof R=="string"){for(;j<x;)if(O[M++]=R.charCodeAt(j++),M==this.blockSize){o(this,O),M=0;break}}else for(;j<x;)if(O[M++]=R[j++],M==this.blockSize){o(this,O),M=0;break}}this.h=M,this.o+=x},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var x=1;x<R.length-8;++x)R[x]=0;var I=8*this.o;for(x=R.length-8;x<R.length;++x)R[x]=I&255,I/=256;for(this.u(R),R=Array(16),x=I=0;4>x;++x)for(var O=0;32>O;O+=8)R[I++]=this.g[x]>>>O&255;return R};function u(R,x){var I=m;return Object.prototype.hasOwnProperty.call(I,R)?I[R]:I[R]=x(R)}function d(R,x){this.h=x;for(var I=[],O=!0,M=R.length-1;0<=M;M--){var j=R[M]|0;O&&j==x||(I[M]=j,O=!1)}this.g=I}var m={};function p(R){return-128<=R&&128>R?u(R,function(x){return new d([x|0],0>x?-1:0)}):new d([R|0],0>R?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return w;if(0>R)return Y(y(-R));for(var x=[],I=1,O=0;R>=I;O++)x[O]=R/I|0,I*=4294967296;return new d(x,0)}function E(R,x){if(R.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(R.charAt(0)=="-")return Y(E(R.substring(1),x));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(x,8)),O=w,M=0;M<R.length;M+=8){var j=Math.min(8,R.length-M),N=parseInt(R.substring(M,M+j),x);8>j?(j=y(Math.pow(x,j)),O=O.j(j).add(y(N))):(O=O.j(I),O=O.add(y(N)))}return O}var w=p(0),S=p(1),V=p(16777216);r=d.prototype,r.m=function(){if(F(this))return-Y(this).m();for(var R=0,x=1,I=0;I<this.g.length;I++){var O=this.i(I);R+=(0<=O?O:4294967296+O)*x,x*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(B(this))return"0";if(F(this))return"-"+Y(this).toString(R);for(var x=y(Math.pow(R,6)),I=this,O="";;){var M=Q(I,x).g;I=me(I,M.j(x));var j=((0<I.g.length?I.g[0]:I.h)>>>0).toString(R);if(I=M,B(I))return j+O;for(;6>j.length;)j="0"+j;O=j+O}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function B(R){if(R.h!=0)return!1;for(var x=0;x<R.g.length;x++)if(R.g[x]!=0)return!1;return!0}function F(R){return R.h==-1}r.l=function(R){return R=me(this,R),F(R)?-1:B(R)?0:1};function Y(R){for(var x=R.g.length,I=[],O=0;O<x;O++)I[O]=~R.g[O];return new d(I,~R.h).add(S)}r.abs=function(){return F(this)?Y(this):this},r.add=function(R){for(var x=Math.max(this.g.length,R.g.length),I=[],O=0,M=0;M<=x;M++){var j=O+(this.i(M)&65535)+(R.i(M)&65535),N=(j>>>16)+(this.i(M)>>>16)+(R.i(M)>>>16);O=N>>>16,j&=65535,N&=65535,I[M]=N<<16|j}return new d(I,I[I.length-1]&-2147483648?-1:0)};function me(R,x){return R.add(Y(x))}r.j=function(R){if(B(this)||B(R))return w;if(F(this))return F(R)?Y(this).j(Y(R)):Y(Y(this).j(R));if(F(R))return Y(this.j(Y(R)));if(0>this.l(V)&&0>R.l(V))return y(this.m()*R.m());for(var x=this.g.length+R.g.length,I=[],O=0;O<2*x;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var M=0;M<R.g.length;M++){var j=this.i(O)>>>16,N=this.i(O)&65535,bt=R.i(M)>>>16,ae=R.i(M)&65535;I[2*O+2*M]+=N*ae,ue(I,2*O+2*M),I[2*O+2*M+1]+=j*ae,ue(I,2*O+2*M+1),I[2*O+2*M+1]+=N*bt,ue(I,2*O+2*M+1),I[2*O+2*M+2]+=j*bt,ue(I,2*O+2*M+2)}for(O=0;O<x;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=x;O<2*x;O++)I[O]=0;return new d(I,0)};function ue(R,x){for(;(R[x]&65535)!=R[x];)R[x+1]+=R[x]>>>16,R[x]&=65535,x++}function oe(R,x){this.g=R,this.h=x}function Q(R,x){if(B(x))throw Error("division by zero");if(B(R))return new oe(w,w);if(F(R))return x=Q(Y(R),x),new oe(Y(x.g),Y(x.h));if(F(x))return x=Q(R,Y(x)),new oe(Y(x.g),x.h);if(30<R.g.length){if(F(R)||F(x))throw Error("slowDivide_ only works with positive integers.");for(var I=S,O=x;0>=O.l(R);)I=X(I),O=X(O);var M=de(I,1),j=de(O,1);for(O=de(O,2),I=de(I,2);!B(O);){var N=j.add(O);0>=N.l(R)&&(M=M.add(I),j=N),O=de(O,1),I=de(I,1)}return x=me(R,M.j(x)),new oe(M,x)}for(M=w;0<=R.l(x);){for(I=Math.max(1,Math.floor(R.m()/x.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),j=y(I),N=j.j(x);F(N)||0<N.l(R);)I-=O,j=y(I),N=j.j(x);B(j)&&(j=S),M=M.add(j),R=me(R,N)}return new oe(M,R)}r.A=function(R){return Q(this,R).h},r.and=function(R){for(var x=Math.max(this.g.length,R.g.length),I=[],O=0;O<x;O++)I[O]=this.i(O)&R.i(O);return new d(I,this.h&R.h)},r.or=function(R){for(var x=Math.max(this.g.length,R.g.length),I=[],O=0;O<x;O++)I[O]=this.i(O)|R.i(O);return new d(I,this.h|R.h)},r.xor=function(R){for(var x=Math.max(this.g.length,R.g.length),I=[],O=0;O<x;O++)I[O]=this.i(O)^R.i(O);return new d(I,this.h^R.h)};function X(R){for(var x=R.g.length+1,I=[],O=0;O<x;O++)I[O]=R.i(O)<<1|R.i(O-1)>>>31;return new d(I,R.h)}function de(R,x){var I=x>>5;x%=32;for(var O=R.g.length-I,M=[],j=0;j<O;j++)M[j]=0<x?R.i(j+I)>>>x|R.i(j+I+1)<<32-x:R.i(j+I);return new d(M,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,I0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=E,Vr=d}).apply(typeof Yv<"u"?Yv:typeof self<"u"?self:typeof window<"u"?window:{});var Tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var C0,_l,N0,Cc,Zf,D0,O0,k0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tc=="object"&&Tc];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=n(this);function o(c,g){if(g)e:{var _=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in _))break e;_=_[L]}c=c[c.length-1],A=_[c],g=g(A),g!=A&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function u(c,g){c instanceof String&&(c+="");var _=0,A=!1,L={next:function(){if(!A&&_<c.length){var K=_++;return{value:g(K,c[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function y(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function E(c,g,_){return c.call.apply(c.bind,arguments)}function w(c,g,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(g,L)}}return function(){return c.apply(g,arguments)}}function S(c,g,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:w,S.apply(null,arguments)}function V(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function B(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,L,K){for(var re=Array(arguments.length-2),je=2;je<arguments.length;je++)re[je-2]=arguments[je];return g.prototype[L].apply(A,re)}}function F(c){const g=c.length;if(0<g){const _=Array(g);for(let A=0;A<g;A++)_[A]=c[A];return _}return[]}function Y(c,g){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(p(A)){const L=c.length||0,K=A.length||0;c.length=L+K;for(let re=0;re<K;re++)c[L+re]=A[re]}else c.push(A)}}class me{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ue(c){return/^[\s\xa0]*$/.test(c)}function oe(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function Q(c){return Q[" "](c),c}Q[" "]=function(){};var X=oe().indexOf("Gecko")!=-1&&!(oe().toLowerCase().indexOf("webkit")!=-1&&oe().indexOf("Edge")==-1)&&!(oe().indexOf("Trident")!=-1||oe().indexOf("MSIE")!=-1)&&oe().indexOf("Edge")==-1;function de(c,g,_){for(const A in c)g.call(_,c[A],A,c)}function R(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function x(c){const g={};for(const _ in c)g[_]=c[_];return g}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,g){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)c[_]=A[_];for(let K=0;K<I.length;K++)_=I[K],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function M(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function j(c){m.setTimeout(()=>{throw c},0)}function N(){var c=Ce;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class bt{constructor(){this.h=this.g=null}add(g,_){const A=ae.get();A.set(g,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ae=new me(()=>new U,c=>c.reset());class U{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,le=!1,Ce=new bt,D=()=>{const c=m.Promise.resolve(void 0);ne=()=>{c.then(W)}};var W=()=>{for(var c;c=N();){try{c.h.call(c.g)}catch(_){j(_)}var g=ae;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}le=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var pe=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,g),m.removeEventListener("test",_,g)}catch{}return c}();function Se(c,g){if(ie.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(X){e:{try{Q(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ve[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Se.aa.h.call(this)}}B(Se,ie);var ve={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function ln(c,g,_,A,L){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!A,this.ha=L,this.key=++Ye,this.da=this.fa=!1}function Fn(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vn(c){this.src=c,this.g={},this.h=0}Vn.prototype.add=function(c,g,_,A,L){var K=c.toString();c=this.g[K],c||(c=this.g[K]=[],this.h++);var re=gi(c,g,A,L);return-1<re?(g=c[re],_||(g.fa=!1)):(g=new ln(g,this.src,K,!!A,L),g.fa=_,c.push(g)),g};function mi(c,g){var _=g.type;if(_ in c.g){var A=c.g[_],L=Array.prototype.indexOf.call(A,g,void 0),K;(K=0<=L)&&Array.prototype.splice.call(A,L,1),K&&(Fn(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function gi(c,g,_,A){for(var L=0;L<c.length;++L){var K=c[L];if(!K.da&&K.listener==g&&K.capture==!!_&&K.ha==A)return L}return-1}var pi="closure_lm_"+(1e6*Math.random()|0),Qr={};function Jl(c,g,_,A,L){if(Array.isArray(g)){for(var K=0;K<g.length;K++)Jl(c,g[K],_,A,L);return null}return _=Wl(_),c&&c[ft]?c.K(g,_,y(A)?!!A.capture:!1,L):_n(c,g,_,!1,A,L)}function _n(c,g,_,A,L,K){if(!g)throw Error("Invalid event type");var re=y(L)?!!L.capture:!!L,je=qs(c);if(je||(c[pi]=je=new Vn(c)),_=je.add(g,_,A,re,K),_.proxy)return _;if(A=Rh(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)pe||(L=re),L===void 0&&(L=!1),c.addEventListener(g.toString(),A,L);else if(c.attachEvent)c.attachEvent(Yr(g.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Rh(){function c(_){return g.call(c.src,c.listener,_)}const g=Ih;return c}function oo(c,g,_,A,L){if(Array.isArray(g))for(var K=0;K<g.length;K++)oo(c,g[K],_,A,L);else A=y(A)?!!A.capture:!!A,_=Wl(_),c&&c[ft]?(c=c.i,g=String(g).toString(),g in c.g&&(K=c.g[g],_=gi(K,_,A,L),-1<_&&(Fn(K[_]),Array.prototype.splice.call(K,_,1),K.length==0&&(delete c.g[g],c.h--)))):c&&(c=qs(c))&&(g=c.g[g.toString()],c=-1,g&&(c=gi(g,_,A,L)),(_=-1<c?g[c]:null)&&Bs(_))}function Bs(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[ft])mi(g.i,c);else{var _=c.type,A=c.proxy;g.removeEventListener?g.removeEventListener(_,A,c.capture):g.detachEvent?g.detachEvent(Yr(_),A):g.addListener&&g.removeListener&&g.removeListener(A),(_=qs(g))?(mi(_,c),_.h==0&&(_.src=null,g[pi]=null)):Fn(c)}}}function Yr(c){return c in Qr?Qr[c]:Qr[c]="on"+c}function Ih(c,g){if(c.da)c=!0;else{g=new Se(g,this);var _=c.listener,A=c.ha||c.src;c.fa&&Bs(c),c=_.call(A,g)}return c}function qs(c){return c=c[pi],c instanceof Vn?c:null}var lo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wl(c){return typeof c=="function"?c:(c[lo]||(c[lo]=function(g){return c.handleEvent(g)}),c[lo])}function at(){se.call(this),this.i=new Vn(this),this.M=this,this.F=null}B(at,se),at.prototype[ft]=!0,at.prototype.removeEventListener=function(c,g,_,A){oo(this,c,g,_,A)};function Fe(c,g){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=g.type||g,typeof g=="string")g=new ie(g,c);else if(g instanceof ie)g.target=g.target||c;else{var L=g;g=new ie(A,c),O(g,L)}if(L=!0,_)for(var K=_.length-1;0<=K;K--){var re=g.g=_[K];L=un(re,A,!0,g)&&L}if(re=g.g=c,L=un(re,A,!0,g)&&L,L=un(re,A,!1,g)&&L,_)for(K=0;K<_.length;K++)re=g.g=_[K],L=un(re,A,!1,g)&&L}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],A=0;A<_.length;A++)Fn(_[A]);delete c.g[g],c.h--}}this.F=null},at.prototype.K=function(c,g,_,A){return this.i.add(String(c),g,!1,_,A)},at.prototype.L=function(c,g,_,A){return this.i.add(String(c),g,!0,_,A)};function un(c,g,_,A){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,K=0;K<g.length;++K){var re=g[K];if(re&&!re.da&&re.capture==_){var je=re.listener,Tt=re.ha||re.src;re.fa&&mi(c.i,re),L=je.call(Tt,A)!==!1&&L}}return L&&!A.defaultPrevented}function Ht(c,g,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:m.setTimeout(c,g||0)}function eu(c){c.g=Ht(()=>{c.g=null,c.i&&(c.i=!1,eu(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Ch extends se{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:eu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $r(c){se.call(this),this.h=c,this.g={}}B($r,se);var Xr=[];function Zr(c){de(c.g,function(g,_){this.g.hasOwnProperty(_)&&Bs(g)},c),c.g={}}$r.prototype.N=function(){$r.aa.N.call(this),Zr(this)},$r.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mn=m.JSON.stringify,Hs=m.JSON.parse,Jr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function uo(){}uo.prototype.h=null;function co(c){return c.h||(c.h=c.i())}function ho(){}var yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){ie.call(this,"d")}B(vi,ie);function fo(){ie.call(this,"c")}B(fo,ie);var Kn={},mo=null;function Zi(){return mo=mo||new at}Kn.La="serverreachability";function Gs(c){ie.call(this,Kn.La,c)}B(Gs,ie);function Ji(c){const g=Zi();Fe(g,new Gs(g))}Kn.STAT_EVENT="statevent";function tu(c,g){ie.call(this,Kn.STAT_EVENT,c),this.stat=g}B(tu,ie);function nt(c){const g=Zi();Fe(g,new tu(g,c))}Kn.Ma="timingevent";function Et(c,g){ie.call(this,Kn.Ma,c),this.size=g}B(Et,ie);function mt(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},g)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function go(c,g,_,A,L,K){c.info(function(){if(c.g)if(K)for(var re="",je=K.split("&"),Tt=0;Tt<je.length;Tt++){var Ue=je[Tt].split("=");if(1<Ue.length){var Ct=Ue[0];Ue=Ue[1];var At=Ct.split("_");re=2<=At.length&&At[1]=="type"?re+(Ct+"="+Ue+"&"):re+(Ct+"=redacted&")}}else re=null;else re=K;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+_+`
`+re})}function Nh(c,g,_,A,L,K,re){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+_+`
`+K+" "+re})}function Wi(c,g,_,A){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+Wr(c,_)+(A?" "+A:"")})}function nu(c,g){c.info(function(){return"TIMEOUT: "+g})}bn.prototype.info=function(){};function Wr(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var K=L[0];if(K!="noop"&&K!="stop"&&K!="close")for(var re=1;re<L.length;re++)L[re]=""}}}}return Mn(_)}catch{return g}}var er={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_i={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qn;function Yn(){}B(Yn,uo),Yn.prototype.g=function(){return new XMLHttpRequest},Yn.prototype.i=function(){return{}},Qn=new Yn;function Xt(c,g,_,A){this.j=c,this.i=g,this.l=_,this.R=A||1,this.U=new $r(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ut}function ut(){this.i=null,this.g="",this.h=!1}var po={},Fs={};function Pn(c,g,_){c.L=1,c.v=rs(cn(g)),c.m=_,c.P=!0,bi(c,null)}function bi(c,g){c.F=Date.now(),es(c),c.A=cn(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),To(_.i,"t",A),c.C=0,_=c.j.J,c.h=new ut,c.g=vu(c.j,_?g:null,!c.m),0<c.O&&(c.M=new Ch(S(c.Y,c,c.g),c.O)),g=c.U,_=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(Xr[0]=L.toString()),L=Xr);for(var K=0;K<L.length;K++){var re=Jl(_,L[K],A||g.handleEvent,!1,g.h||g);if(!re)break;g.g[re.key]=re}g=c.H?x(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),Ji(),go(c.i,c.u,c.A,c.l,c.R,c.m)}Xt.prototype.ca=function(c){c=c.target;const g=this.M;g&&wn(c)==3?g.j():this.Y(c)},Xt.prototype.Y=function(c){try{if(c==this.g)e:{const At=wn(this.g);var g=this.g.Ba();const Ii=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||cu(this.g)))){this.J||At!=4||g==7||(g==8||0>=Ii?Ji(3):Ji(2)),tr(this);var _=this.g.Z();this.X=_;t:if(iu(this)){var A=cu(this.g);c="";var L=A.length,K=wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mt(this),$n(this);var re="";break t}this.h.i=new m.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,c+=this.h.i.decode(A[g],{stream:!(K&&g==L-1)});A.length=0,this.h.g+=c,this.C=0,re=this.h.g}else re=this.g.oa();if(this.o=_==200,Nh(this.i,this.u,this.A,this.l,this.R,At,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Tt=this.g;if((je=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ue(je)){var Ue=je;break t}}Ue=null}if(_=Ue)Wi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ts(this,_);else{this.o=!1,this.s=3,nt(12),Mt(this),$n(this);break e}}if(this.P){_=!0;let Pt;for(;!this.J&&this.C<re.length;)if(Pt=ru(this,re),Pt==Fs){At==4&&(this.s=4,nt(14),_=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==po){this.s=4,nt(15),Wi(this.i,this.l,re,"[Invalid Chunk]"),_=!1;break}else Wi(this.i,this.l,Pt,null),ts(this,Pt);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||re.length!=0||this.h.h||(this.s=1,nt(16),_=!1),this.o=this.o&&_,!_)Wi(this.i,this.l,re,"[Invalid Chunked Response]"),Mt(this),$n(this);else if(0<re.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+re.length),ds(Ct),Ct.M=!0,nt(11))}}else Wi(this.i,this.l,re,null),ts(this,re);At==4&&Mt(this),this.o&&!this.J&&(At==4?gu(this.j,this):(this.o=!1,es(this)))}else Mh(this.g),_==400&&0<re.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),Mt(this),$n(this)}}}catch{}finally{}};function iu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ru(c,g){var _=c.C,A=g.indexOf(`
`,_);return A==-1?Fs:(_=Number(g.substring(_,A)),isNaN(_)?po:(A+=1,A+_>g.length?Fs:(g=g.slice(A,A+_),c.C=A+_,g)))}Xt.prototype.cancel=function(){this.J=!0,Mt(this)};function es(c){c.S=Date.now()+c.I,su(c,c.I)}function su(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=mt(S(c.ba,c),g)}function tr(c){c.B&&(m.clearTimeout(c.B),c.B=null)}Xt.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(nu(this.i,this.A),this.L!=2&&(Ji(),nt(17)),Mt(this),this.s=2,$n(this)):su(this,this.S-c)};function $n(c){c.j.G==0||c.J||gu(c.j,c)}function Mt(c){tr(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,Zr(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function ts(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||yo(_.h,c))){if(!c.K&&yo(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)ia(_),ta(_);else break e;Ro(_),nt(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=mt(S(_.Za,_),6e3));if(1>=Qs(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Ri(_,11)}else if((c.K||_.g==c)&&ia(_),!ue(g))for(L=_.Da.g.parse(g),g=0;g<L.length;g++){let Ue=L[g];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const Ct=Ue[3];Ct!=null&&(_.la=Ct,_.j.info("VER="+_.la));const At=Ue[4];At!=null&&(_.Aa=At,_.j.info("SVER="+_.Aa));const Ii=Ue[5];Ii!=null&&typeof Ii=="number"&&0<Ii&&(A=1.5*Ii,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Pt=c.g;if(Pt){const ni=Pt.g?Pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ni){var K=A.h;K.g||ni.indexOf("spdy")==-1&&ni.indexOf("quic")==-1&&ni.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(Ys(K,K.h),K.h=null))}if(A.D){const Co=Pt.g?Pt.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(A.ya=Co,$e(A.I,A.D,Co))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var re=c;if(A.qa=yu(A,A.J?A.ia:null,A.W),re.K){Zt(A.h,re);var je=re,Tt=A.L;Tt&&(je.I=Tt),je.B&&(tr(je),es(je)),A.g=re}else fu(A);0<_.i.length&&na(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Ri(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Ri(_,7):So(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}Ji(4)}catch{}}var au=class{constructor(c,g){this.g=c,this.map=g}};function Ei(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ks(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Qs(c){return c.h?1:c.g?c.g.size:0}function yo(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Ys(c,g){c.g?c.g.add(g):c.h=g}function Zt(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Ei.prototype.cancel=function(){if(this.i=vo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function vo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return F(c.i)}function Dh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var g=[],_=c.length,A=0;A<_;A++)g.push(c[A]);return g}g=[],_=0;for(A in c)g[_++]=c[A];return g}function $s(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const A in c)g[_++]=A;return g}}}function _o(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=$s(c),A=Dh(c),L=A.length,K=0;K<L;K++)g.call(void 0,A[K],_&&_[K],c)}var ns=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Oh(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),L=null;if(0<=A){var K=c[_].substring(0,A);L=c[_].substring(A+1)}else K=c[_];g(K,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function gt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof gt){this.h=c.h,is(this,c.j),this.o=c.o,this.g=c.g,nr(this,c.s),this.l=c.l;var g=c.i,_=new Ai;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Ti(this,_),this.m=c.m}else c&&(g=String(c).match(ns))?(this.h=!1,is(this,g[1]||"",!0),this.o=En(g[2]||""),this.g=En(g[3]||"",!0),nr(this,g[4]),this.l=En(g[5]||"",!0),Ti(this,g[6]||"",!0),this.m=En(g[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}gt.prototype.toString=function(){var c=[],g=this.j;g&&c.push(ss(g,bo,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(ss(g,bo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(ss(_,_.charAt(0)=="/"?kh:Eo,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",ss(_,Xs)),c.join("")};function cn(c){return new gt(c)}function is(c,g,_){c.j=_?En(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function nr(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Ti(c,g,_){g instanceof Ai?(c.i=g,lu(c.i,c.h)):(_||(g=ss(g,Vh)),c.i=new Ai(g,c.h))}function $e(c,g,_){c.i.set(g,_)}function rs(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function En(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ss(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,ou),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ou(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bo=/[#\/\?@]/g,Eo=/[#\?:]/g,kh=/[#\?]/g,Vh=/[#\?@]/g,Xs=/#/g;function Ai(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Tn(c){c.g||(c.g=new Map,c.h=0,c.i&&Oh(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}r=Ai.prototype,r.add=function(c,g){Tn(this),this.i=null,c=Xn(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function wi(c,g){Tn(c),g=Xn(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Si(c,g){return Tn(c),g=Xn(c,g),c.g.has(g)}r.forEach=function(c,g){Tn(this),this.g.forEach(function(_,A){_.forEach(function(L){c.call(g,L,A,this)},this)},this)},r.na=function(){Tn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let A=0;A<g.length;A++){const L=c[A];for(let K=0;K<L.length;K++)_.push(g[A])}return _},r.V=function(c){Tn(this);let g=[];if(typeof c=="string")Si(this,c)&&(g=g.concat(this.g.get(Xn(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},r.set=function(c,g){return Tn(this),this.i=null,c=Xn(this,c),Si(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},r.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function To(c,g,_){wi(c,g),0<_.length&&(c.i=null,c.g.set(Xn(c,g),F(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var A=g[_];const K=encodeURIComponent(String(A)),re=this.V(A);for(A=0;A<re.length;A++){var L=K;re[A]!==""&&(L+="="+encodeURIComponent(String(re[A]))),c.push(L)}}return this.i=c.join("&")};function Xn(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function lu(c,g){g&&!c.j&&(Tn(c),c.i=null,c.g.forEach(function(_,A){var L=A.toLowerCase();A!=L&&(wi(this,A),To(this,L,_))},c)),c.j=g}function as(c,g){const _=new bn;if(m.Image){const A=new Image;A.onload=V(An,_,"TestLoadImage: loaded",!0,g,A),A.onerror=V(An,_,"TestLoadImage: error",!1,g,A),A.onabort=V(An,_,"TestLoadImage: abort",!1,g,A),A.ontimeout=V(An,_,"TestLoadImage: timeout",!1,g,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else g(!1)}function jn(c,g){const _=new bn,A=new AbortController,L=setTimeout(()=>{A.abort(),An(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:A.signal}).then(K=>{clearTimeout(L),K.ok?An(_,"TestPingServer: ok",!0,g):An(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),An(_,"TestPingServer: error",!1,g)})}function An(c,g,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function os(){this.g=new Jr}function Zn(c,g,_){const A=_||"";try{_o(c,function(L,K){let re=L;y(L)&&(re=Mn(L)),g.push(A+K+"="+encodeURIComponent(re))})}catch(L){throw g.push(A+"type="+encodeURIComponent("_badmap")),L}}function ir(c){this.l=c.Ub||null,this.j=c.eb||!1}B(ir,uo),ir.prototype.g=function(){return new xi(this.l,this.j)},ir.prototype.i=function(c){return function(){return c}}({});function xi(c,g){at.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(xi,at),r=xi.prototype,r.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,Wn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||m).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ao(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ao(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Jn(this):Wn(this),this.readyState==3&&Ao(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Jn(this))},r.Qa=function(c){this.g&&(this.response=c,Jn(this))},r.ga=function(){this.g&&Jn(this)};function Jn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Wn(c)}r.setRequestHeader=function(c,g){this.u.append(c,g)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function Wn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(xi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function wo(c){let g="";return de(c,function(_,A){g+=A,g+=":",g+=_,g+=`\r
`}),g}function It(c,g,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=wo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):$e(c,g,_))}function He(c){at.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(He,at);var Zs=/^https?$/i,ls=["POST","PUT"];r=He.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,g,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qn.g(),this.v=this.o?co(this.o):co(Qn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(K){uu(this,K);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())_.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(K=>K.toLowerCase()=="content-type"),L=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(ls,g,void 0))||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,re]of _)this.g.setRequestHeader(K,re);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{us(this),this.u=!0,this.g.send(c),this.u=!1}catch(K){uu(this,K)}};function uu(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,Js(c),ei(c)}function Js(c){c.A||(c.A=!0,Fe(c,"complete"),Fe(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Fe(this,"complete"),Fe(this,"abort"),ei(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ei(this,!0)),He.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Ws(this):this.bb())},r.bb=function(){Ws(this)};function Ws(c){if(c.h&&typeof d<"u"&&(!c.v[1]||wn(c)!=4||c.Z()!=2)){if(c.u&&wn(c)==4)Ht(c.Ea,0,c);else if(Fe(c,"readystatechange"),wn(c)==4){c.h=!1;try{const re=c.Z();e:switch(re){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var A;if(A=re===0){var L=String(c.D).match(ns)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),A=!Zs.test(L?L.toLowerCase():"")}_=A}if(_)Fe(c,"complete"),Fe(c,"success");else{c.m=6;try{var K=2<wn(c)?c.g.statusText:""}catch{K=""}c.l=K+" ["+c.Z()+"]",Js(c)}}finally{ei(c)}}}}function ei(c,g){if(c.g){us(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Fe(c,"ready");try{_.onreadystatechange=A}catch{}}}function us(c){c.I&&(m.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function wn(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<wn(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Hs(g)}};function cu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Mh(c){const g={};c=(c.g&&2<=wn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(ue(c[A]))continue;var _=M(c[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const K=g[L]||[];g[L]=K,K.push(_)}R(g,function(A){return A.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cs(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function ea(c){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cs("baseRetryDelayMs",5e3,c),this.cb=cs("retryDelaySeedMs",1e4,c),this.Wa=cs("forwardChannelMaxRetries",2,c),this.wa=cs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ei(c&&c.concurrentRequestLimit),this.Da=new os,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ea.prototype,r.la=8,r.G=1,r.connect=function(c,g,_,A){nt(0),this.W=c,this.H=g||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=yu(this,null,this.W),na(this)};function So(c){if(hu(c),c.G==3){var g=c.U++,_=cn(c.I);if($e(_,"SID",c.K),$e(_,"RID",g),$e(_,"TYPE","terminate"),hs(c,_),g=new Xt(c,c.j,g),g.L=2,g.v=rs(cn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=g.v,_=!0),_||(g.g=vu(g.j,null),g.g.ea(g.v)),g.F=Date.now(),es(g)}pu(c)}function ta(c){c.g&&(ds(c),c.g.cancel(),c.g=null)}function hu(c){ta(c),c.u&&(m.clearTimeout(c.u),c.u=null),ia(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function na(c){if(!Ks(c.h)&&!c.s){c.s=!0;var g=c.Ga;ne||D(),le||(ne(),le=!0),Ce.add(g,c),c.B=0}}function Ph(c,g){return Qs(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=mt(S(c.Ga,c,g),Io(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new Xt(this,this.j,c);let K=this.o;if(this.S&&(K?(K=x(K),O(K,this.S)):K=this.S),this.m!==null||this.O||(L.H=K,K=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=du(this,L,g),_=cn(this.I),$e(_,"RID",c),$e(_,"CVER",22),this.D&&$e(_,"X-HTTP-Session-Id",this.D),hs(this,_),K&&(this.O?g="headers="+encodeURIComponent(String(wo(K)))+"&"+g:this.m&&It(_,this.m,K)),Ys(this.h,L),this.Ua&&$e(_,"TYPE","init"),this.P?($e(_,"$req",g),$e(_,"SID","null"),L.T=!0,Pn(L,_,null)):Pn(L,_,g),this.G=2}}else this.G==3&&(c?xo(this,c):this.i.length==0||Ks(this.h)||xo(this))};function xo(c,g){var _;g?_=g.l:_=c.U++;const A=cn(c.I);$e(A,"SID",c.K),$e(A,"RID",_),$e(A,"AID",c.T),hs(c,A),c.m&&c.o&&It(A,c.m,c.o),_=new Xt(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=du(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ys(c.h,_),Pn(_,A,g)}function hs(c,g){c.H&&de(c.H,function(_,A){$e(g,A,_)}),c.l&&_o({},function(_,A){$e(g,A,_)})}function du(c,g,_){_=Math.min(c.i.length,_);var A=c.l?S(c.l.Na,c.l,c):null;e:{var L=c.i;let K=-1;for(;;){const re=["count="+_];K==-1?0<_?(K=L[0].g,re.push("ofs="+K)):K=0:re.push("ofs="+K);let je=!0;for(let Tt=0;Tt<_;Tt++){let Ue=L[Tt].g;const Ct=L[Tt].map;if(Ue-=K,0>Ue)K=Math.max(0,L[Tt].g-100),je=!1;else try{Zn(Ct,re,"req"+Ue+"_")}catch{A&&A(Ct)}}if(je){A=re.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,A}function fu(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;ne||D(),le||(ne(),le=!0),Ce.add(g,c),c.v=0}}function Ro(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=mt(S(c.Fa,c),Io(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=mt(S(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),ta(this),mu(this))};function ds(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function mu(c){c.g=new Xt(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=cn(c.qa);$e(g,"RID","rpc"),$e(g,"SID",c.K),$e(g,"AID",c.T),$e(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(g,"TO",c.ja),$e(g,"TYPE","xmlhttp"),hs(c,g),c.m&&c.o&&It(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=rs(cn(g)),_.m=null,_.P=!0,bi(_,c)}r.Za=function(){this.C!=null&&(this.C=null,ta(this),Ro(this),nt(19))};function ia(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function gu(c,g){var _=null;if(c.g==g){ia(c),ds(c),c.g=null;var A=2}else if(yo(c.h,g))_=g.D,Zt(c.h,g),A=1;else return;if(c.G!=0){if(g.o)if(A==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var L=c.B;A=Zi(),Fe(A,new Et(A,_)),na(c)}else fu(c);else if(L=g.s,L==3||L==0&&0<g.X||!(A==1&&Ph(c,g)||A==2&&Ro(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),L){case 1:Ri(c,5);break;case 4:Ri(c,10);break;case 3:Ri(c,6);break;default:Ri(c,2)}}}function Io(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Ri(c,g){if(c.j.info("Error code "+g),g==2){var _=S(c.fb,c),A=c.Xa;const L=!A;A=new gt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||is(A,"https"),rs(A),L?as(A.toString(),_):jn(A.toString(),_)}else nt(2);c.G=0,c.l&&c.l.sa(g),pu(c),hu(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function pu(c){if(c.G=0,c.ka=[],c.l){const g=vo(c.h);(g.length!=0||c.i.length!=0)&&(Y(c.ka,g),Y(c.ka,c.i),c.h.i.length=0,F(c.i),c.i.length=0),c.l.ra()}}function yu(c,g,_){var A=_ instanceof gt?cn(_):new gt(_);if(A.g!="")g&&(A.g=g+"."+A.g),nr(A,A.s);else{var L=m.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var K=new gt(null);A&&is(K,A),g&&(K.g=g),L&&nr(K,L),_&&(K.l=_),A=K}return _=c.D,g=c.ya,_&&g&&$e(A,_,g),$e(A,"VER",c.la),hs(c,A),A}function vu(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new He(new ir({eb:_})):new He(c.pa),g.Ha(c.J),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}r=_u.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ra(){}ra.prototype.g=function(c,g){return new Jt(c,g)};function Jt(c,g){at.call(this),this.g=new ea(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!ue(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ue(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new ti(this)}B(Jt,at),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){So(this.g)},Jt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Mn(c),c=_);g.i.push(new au(g.Ya++,c)),g.G==3&&na(g)},Jt.prototype.N=function(){this.g.l=null,delete this.j,So(this.g),delete this.g,Jt.aa.N.call(this)};function bu(c){vi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}B(bu,vi);function Eu(){fo.call(this),this.status=1}B(Eu,fo);function ti(c){this.g=c}B(ti,_u),ti.prototype.ua=function(){Fe(this.g,"a")},ti.prototype.ta=function(c){Fe(this.g,new bu(c))},ti.prototype.sa=function(c){Fe(this.g,new Eu)},ti.prototype.ra=function(){Fe(this.g,"b")},ra.prototype.createWebChannel=ra.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,k0=function(){return new ra},O0=function(){return Zi()},D0=Kn,Zf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},er.NO_ERROR=0,er.TIMEOUT=8,er.HTTP_ERROR=6,Cc=er,_i.COMPLETE="complete",N0=_i,ho.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",at.prototype.listen=at.prototype.K,_l=ho,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,C0=He}).apply(typeof Tc<"u"?Tc:typeof self<"u"?self:typeof window<"u"?window:{});const $v="@firebase/firestore",Xv="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let to="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Em("@firebase/firestore");function ka(){return Os.logLevel}function ce(r,...e){if(Os.logLevel<=Me.DEBUG){const n=e.map(wm);Os.debug(`Firestore (${to}): ${r}`,...n)}}function Qi(r,...e){if(Os.logLevel<=Me.ERROR){const n=e.map(wm);Os.error(`Firestore (${to}): ${r}`,...n)}}function Fa(r,...e){if(Os.logLevel<=Me.WARN){const n=e.map(wm);Os.warn(`Firestore (${to}): ${r}`,...n)}}function wm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,V0(r,s,n)}function V0(r,e,n){let s=`FIRESTORE (${to}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Qi(s),new Error(s)}function Ge(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||V0(e,o,s)}function Re(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class vS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _S{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,n(p)):Promise.resolve();let u=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Gi,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},m=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(p=>m(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Gi)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ge(typeof s.accessToken=="string",31837,{l:s}),new M0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class bS{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ES{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new bS(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TS{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,On(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const s=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.m;return this.m=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>s(u))};const o=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=AS(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function De(r,e){return r<e?-1:r>e?1:0}function Jf(r,e){let n=0;for(;n<r.length&&n<e.length;){const s=r.codePointAt(n),o=e.codePointAt(n);if(s!==o){if(s<128&&o<128)return De(s,o);{const u=P0(),d=wS(u.encode(Jv(r,n)),u.encode(Jv(e,n)));return d!==0?d:De(s,o)}}n+=s>65535?2:1}return De(r.length,e.length)}function Jv(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function wS(r,e){for(let n=0;n<r.length&&n<e.length;++n)if(r[n]!==e[n])return De(r[n],e[n]);return De(r.length,e.length)}function Ka(r,e,n){return r.length===e.length&&r.every((s,o)=>n(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=-62135596800,e_=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(e){return xt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*e_);return new xt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Wv)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/e_}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Wv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{static fromTimestamp(e){return new xe(e)}static min(){return new xe(new xt(0,0))}static max(){return new xe(new xt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="__name__";class li{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Ae(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return li.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof li?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=li.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return De(e.length,n.length)}static compareSegments(e,n){const s=li.isNumericId(e),o=li.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?li.extractNumericId(e).compare(li.extractNumericId(n)):Jf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vr.fromString(e.substring(4,e.length-2))}}class tt extends li{construct(e,n,s){return new tt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(o=>o.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const SS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends li{construct(e,n,s){return new Bt(e,n,s)}static isValidIdentifier(e){return SS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t_}static keyField(){return new Bt([t_])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(u(),o++)}if(u(),d)throw new he(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(tt.fromString(e))}static fromName(e){return new ye(tt.fromString(e).popFirst(5))}static empty(){return new ye(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new tt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=-1;function xS(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=xe.fromTimestamp(s===1e9?new xt(n+1,0):new xt(n,s));return new jr(o,ye.empty(),e)}function RS(r){return new jr(r.readTime,r.key,Dl)}class jr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new jr(xe.min(),ye.empty(),Dl)}static max(){return new jr(xe.max(),ye.empty(),Dl)}}function IS(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(r.documentKey,e.documentKey),n!==0?n:De(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==CS)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,s)=>{n(e)})}static reject(e){return new ee((n,s)=>{s(e)})}static waitFor(e){return new ee((n,s)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&n()},p=>s(p))}),d=!0,u===o&&n()})}static or(e){let n=ee.resolve(!1);for(const s of e)n=n.next(o=>o?ee.resolve(o):s());return n}static forEach(e,n){const s=[];return e.forEach((o,u)=>{s.push(n.call(this,o,u))}),this.waitFor(s)}static mapArray(e,n){return new ee((s,o)=>{const u=e.length,d=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next(E=>{d[y]=E,++m,m===u&&s(d)},E=>o(E))}})}static doWhile(e,n){return new ee((s,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):s()};u()})}}function DS(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function io(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>n.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}sh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm=-1;function ah(r){return r==null}function Bc(r){return r===0&&1/r==-1/0}function OS(r){return typeof r=="number"&&Number.isInteger(r)&&!Bc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="";function kS(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=n_(e)),e=VS(r.get(n),e);return n_(e)}function VS(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case U0:n+="";break;default:n+=u}}return n}function n_(r){return r+U0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i_(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Hr(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function L0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new st(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ac(this.root,e,this.comparator,!0)}}class Ac{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??zt.RED,this.left=o??zt.EMPTY,this.right=u??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new zt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return zt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new r_(this.data.getIterator())}getIteratorFrom(e){return new r_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rt(this.comparator);return n.data=e,n}}class r_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new vn([])}unionWith(e){let n=new Rt(Bt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ka(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new z0("Invalid base64 string: "+u):u}}(e);return new qt(n)}static fromUint8Array(e){const n=function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u}(e);return new qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qt.EMPTY_BYTE_STRING=new qt("");const MS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(r){if(Ge(!!r,39018),typeof r=="string"){let e=0;const n=MS.exec(r);if(Ge(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:dt(r.seconds),nanos:dt(r.nanos)}}function dt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Lr(r){return typeof r=="string"?qt.fromBase64String(r):qt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="server_timestamp",q0="__type__",H0="__previous_value__",G0="__local_write_time__";function xm(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[q0])===null||n===void 0?void 0:n.stringValue)===B0}function oh(r){const e=r.mapValue.fields[H0];return xm(e)?oh(e):e}function Ol(r){const e=Ur(r.mapValue.fields[G0].timestampValue);return new xt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,n,s,o,u,d,m,p,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=E}}const qc="(default)";class kl{constructor(e,n){this.projectId=e,this.database=n||qc}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===qc}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="__type__",jS="__max__",wc={mapValue:{}},K0="__vector__",Hc="value";function zr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?xm(r)?4:LS(r)?9007199254740991:US(r)?10:11:Ae(28295,{value:r})}function fi(r,e){if(r===e)return!0;const n=zr(r);if(n!==zr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Ol(r).isEqual(Ol(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ur(o.timestampValue),m=Ur(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,u){return Lr(o.bytesValue).isEqual(Lr(u.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,u){return dt(o.geoPointValue.latitude)===dt(u.geoPointValue.latitude)&&dt(o.geoPointValue.longitude)===dt(u.geoPointValue.longitude)}(r,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return dt(o.integerValue)===dt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=dt(o.doubleValue),m=dt(u.doubleValue);return d===m?Bc(d)===Bc(m):isNaN(d)&&isNaN(m)}return!1}(r,e);case 9:return Ka(r.arrayValue.values||[],e.arrayValue.values||[],fi);case 10:case 11:return function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(i_(d)!==i_(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!fi(d[p],m[p])))return!1;return!0}(r,e);default:return Ae(52216,{left:r})}}function Vl(r,e){return(r.values||[]).find(n=>fi(n,e))!==void 0}function Qa(r,e){if(r===e)return 0;const n=zr(r),s=zr(e);if(n!==s)return De(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(r.booleanValue,e.booleanValue);case 2:return function(u,d){const m=dt(u.integerValue||u.doubleValue),p=dt(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1}(r,e);case 3:return s_(r.timestampValue,e.timestampValue);case 4:return s_(Ol(r),Ol(e));case 5:return Jf(r.stringValue,e.stringValue);case 6:return function(u,d){const m=Lr(u),p=Lr(d);return m.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(u,d){const m=u.split("/"),p=d.split("/");for(let y=0;y<m.length&&y<p.length;y++){const E=De(m[y],p[y]);if(E!==0)return E}return De(m.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(u,d){const m=De(dt(u.latitude),dt(d.latitude));return m!==0?m:De(dt(u.longitude),dt(d.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return a_(r.arrayValue,e.arrayValue);case 10:return function(u,d){var m,p,y,E;const w=u.fields||{},S=d.fields||{},V=(m=w[Hc])===null||m===void 0?void 0:m.arrayValue,B=(p=S[Hc])===null||p===void 0?void 0:p.arrayValue,F=De(((y=V==null?void 0:V.values)===null||y===void 0?void 0:y.length)||0,((E=B==null?void 0:B.values)===null||E===void 0?void 0:E.length)||0);return F!==0?F:a_(V,B)}(r.mapValue,e.mapValue);case 11:return function(u,d){if(u===wc.mapValue&&d===wc.mapValue)return 0;if(u===wc.mapValue)return 1;if(d===wc.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=d.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let w=0;w<p.length&&w<E.length;++w){const S=Jf(p[w],E[w]);if(S!==0)return S;const V=Qa(m[p[w]],y[E[w]]);if(V!==0)return V}return De(p.length,E.length)}(r.mapValue,e.mapValue);default:throw Ae(23264,{Pe:n})}}function s_(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return De(r,e);const n=Ur(r),s=Ur(e),o=De(n.seconds,s.seconds);return o!==0?o:De(n.nanos,s.nanos)}function a_(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Qa(n[o],s[o]);if(u)return u}return De(n.length,s.length)}function Ya(r){return Wf(r)}function Wf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(n){const s=Ur(n);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(n){return Lr(n).toBase64()}(r.bytesValue):"referenceValue"in r?function(n){return ye.fromName(n).toString()}(r.referenceValue):"geoPointValue"in r?function(n){return`geo(${n.latitude},${n.longitude})`}(r.geoPointValue):"arrayValue"in r?function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Wf(u);return s+"]"}(r.arrayValue):"mapValue"in r?function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const d of s)u?u=!1:o+=",",o+=`${d}:${Wf(n.fields[d])}`;return o+"}"}(r.mapValue):Ae(61005,{value:r})}function Nc(r){switch(zr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oh(r);return e?16+Nc(e):16;case 5:return 2*r.stringValue.length;case 6:return Lr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,u)=>o+Nc(u),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Hr(s.fields,(u,d)=>{o+=u.length+Nc(d)}),o}(r.mapValue);default:throw Ae(13486,{value:r})}}function o_(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function em(r){return!!r&&"integerValue"in r}function Rm(r){return!!r&&"arrayValue"in r}function l_(r){return!!r&&"nullValue"in r}function u_(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Dc(r){return!!r&&"mapValue"in r}function US(r){var e,n;return((n=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[F0])===null||n===void 0?void 0:n.stringValue)===K0}function Sl(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Hr(r.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Sl(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Sl(r.arrayValue.values[n]);return e}return Object.assign({},r)}function LS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===jS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.value=e}static empty(){return new an({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Dc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(n)}setAll(e){let n=Bt.emptyPath(),s={},o=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,s,o),s={},o=[],n=m.popLast()}d?s[m.lastSegment()]=Sl(d):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Dc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Dc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Hr(n,(o,u)=>e[o]=u);for(const o of s)delete e[o]}clone(){return new an(Sl(this.value))}}function Q0(r){const e=[];return Hr(r.fields,(n,s)=>{const o=new Bt([n]);if(Dc(s)){const u=Q0(s.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e,n,s,o,u,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Yt(e,0,xe.min(),xe.min(),xe.min(),an.empty(),0)}static newFoundDocument(e,n,s,o){return new Yt(e,1,n,xe.min(),s,o,0)}static newNoDocument(e,n){return new Yt(e,2,n,xe.min(),xe.min(),an.empty(),0)}static newUnknownDocument(e,n){return new Yt(e,3,n,xe.min(),xe.min(),an.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=an.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=an.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.position=e,this.inclusive=n}}function c_(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],d=r.position[o];if(u.field.isKeyField()?s=ye.comparator(ye.fromName(d.referenceValue),n.key):s=Qa(d,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function h_(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!fi(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,n="asc"){this.field=e,this.dir=n}}function zS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{}class _t extends Y0{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new qS(e,n,s):n==="array-contains"?new FS(e,s):n==="in"?new KS(e,s):n==="not-in"?new QS(e,s):n==="array-contains-any"?new YS(e,s):new _t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new HS(e,s):new GS(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Qa(n,this.value)):n!==null&&zr(this.value)===zr(n)&&this.matchesComparison(Qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qn extends Y0{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new qn(e,n)}matches(e){return $0(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function $0(r){return r.op==="and"}function X0(r){return BS(r)&&$0(r)}function BS(r){for(const e of r.filters)if(e instanceof qn)return!1;return!0}function tm(r){if(r instanceof _t)return r.field.canonicalString()+r.op.toString()+Ya(r.value);if(X0(r))return r.filters.map(e=>tm(e)).join(",");{const e=r.filters.map(n=>tm(n)).join(",");return`${r.op}(${e})`}}function Z0(r,e){return r instanceof _t?function(s,o){return o instanceof _t&&s.op===o.op&&s.field.isEqual(o.field)&&fi(s.value,o.value)}(r,e):r instanceof qn?function(s,o){return o instanceof qn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((u,d,m)=>u&&Z0(d,o.filters[m]),!0):!1}(r,e):void Ae(19439)}function J0(r){return r instanceof _t?function(n){return`${n.field.canonicalString()} ${n.op} ${Ya(n.value)}`}(r):r instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(J0).join(" ,")+"}"}(r):"Filter"}class qS extends _t{constructor(e,n,s){super(e,n,s),this.key=ye.fromName(s.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class HS extends _t{constructor(e,n){super(e,"in",n),this.keys=W0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GS extends _t{constructor(e,n){super(e,"not-in",n),this.keys=W0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function W0(r,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ye.fromName(s.referenceValue))}class FS extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rm(n)&&Vl(n.arrayValue,this.value)}}class KS extends _t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vl(this.value.arrayValue,n)}}class QS extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vl(this.value.arrayValue,n)}}class YS extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Vl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n=null,s=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.Ie=null}}function d_(r,e=null,n=[],s=[],o=null,u=null,d=null){return new $S(r,e,n,s,o,u,d)}function Im(r){const e=Re(r);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>tm(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(u){return u.field.canonicalString()+u.dir}(s)).join(","),ah(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ya(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ya(s)).join(",")),e.Ie=n}return e.Ie}function Cm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!zS(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!Z0(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!h_(r.startAt,e.startAt)&&h_(r.endAt,e.endAt)}function nm(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n=null,s=[],o=[],u=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function XS(r,e,n,s,o,u,d,m){return new ql(r,e,n,s,o,u,d,m)}function Nm(r){return new ql(r)}function f_(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function eb(r){return r.collectionGroup!==null}function xl(r){const e=Re(r);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Rt(Bt.comparator);return d.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Fc(u,s))}),n.has(Bt.keyField().canonicalString())||e.Ee.push(new Fc(Bt.keyField(),s))}return e.Ee}function ui(r){const e=Re(r);return e.de||(e.de=ZS(e,xl(r))),e.de}function ZS(r,e){if(r.limitType==="F")return d_(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Fc(o.field,u)});const n=r.endAt?new Gc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Gc(r.startAt.position,r.startAt.inclusive):null;return d_(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function im(r,e){const n=r.filters.concat([e]);return new ql(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function rm(r,e,n){return new ql(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function lh(r,e){return Cm(ui(r),ui(e))&&r.limitType===e.limitType}function tb(r){return`${Im(ui(r))}|lt:${r.limitType}`}function Va(r){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(o=>J0(o)).join(", ")}]`),ah(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(o=>Ya(o)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(o=>Ya(o)).join(",")),`Target(${s})`}(ui(r))}; limitType=${r.limitType})`}function uh(r,e){return e.isFoundDocument()&&function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):ye.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)}(r,e)&&function(s,o){for(const u of xl(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(d,m,p){const y=c_(d,m,p);return d.inclusive?y<=0:y<0}(s.startAt,xl(s),o)||s.endAt&&!function(d,m,p){const y=c_(d,m,p);return d.inclusive?y>=0:y>0}(s.endAt,xl(s),o))}(r,e)}function JS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function nb(r){return(e,n)=>{let s=!1;for(const o of xl(r)){const u=WS(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function WS(r,e,n){const s=r.field.isKeyField()?ye.comparator(e.key,n.key):function(u,d,m){const p=d.data.field(u),y=m.data.field(u);return p!==null&&y!==null?Qa(p,y):Ae(42886)}(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Hr(this.inner,(n,s)=>{for(const[o,u]of s)e(o,u)})}isEmpty(){return L0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new st(ye.comparator);function Yi(){return e1}const ib=new st(ye.comparator);function bl(...r){let e=ib;for(const n of r)e=e.insert(n.key,n);return e}function rb(r){let e=ib;return r.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Cs(){return Rl()}function sb(){return Rl()}function Rl(){return new js(r=>r.toString(),(r,e)=>r.isEqual(e))}const t1=new st(ye.comparator),n1=new Rt(ye.comparator);function Pe(...r){let e=n1;for(const n of r)e=e.add(n);return e}const i1=new Rt(De);function r1(){return i1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bc(e)?"-0":e}}function ab(r){return{integerValue:""+r}}function s1(r,e){return OS(e)?ab(e):Dm(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this._=void 0}}function a1(r,e,n){return r instanceof Ml?function(o,u){const d={fields:{[q0]:{stringValue:B0},[G0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&xm(u)&&(u=oh(u)),u&&(d.fields[H0]=u),{mapValue:d}}(n,e):r instanceof Pl?lb(r,e):r instanceof jl?ub(r,e):function(o,u){const d=ob(o,u),m=m_(d)+m_(o.Re);return em(d)&&em(o.Re)?ab(m):Dm(o.serializer,m)}(r,e)}function o1(r,e,n){return r instanceof Pl?lb(r,e):r instanceof jl?ub(r,e):n}function ob(r,e){return r instanceof Kc?function(s){return em(s)||function(u){return!!u&&"doubleValue"in u}(s)}(e)?e:{integerValue:0}:null}class Ml extends ch{}class Pl extends ch{constructor(e){super(),this.elements=e}}function lb(r,e){const n=cb(e);for(const s of r.elements)n.some(o=>fi(o,s))||n.push(s);return{arrayValue:{values:n}}}class jl extends ch{constructor(e){super(),this.elements=e}}function ub(r,e){let n=cb(e);for(const s of r.elements)n=n.filter(o=>!fi(o,s));return{arrayValue:{values:n}}}class Kc extends ch{constructor(e,n){super(),this.serializer=e,this.Re=n}}function m_(r){return dt(r.integerValue||r.doubleValue)}function cb(r){return Rm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.field=e,this.transform=n}}function u1(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Pl&&o instanceof Pl||s instanceof jl&&o instanceof jl?Ka(s.elements,o.elements,fi):s instanceof Kc&&o instanceof Kc?fi(s.Re,o.Re):s instanceof Ml&&o instanceof Ml}(r.transform,e.transform)}class c1{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class hh{}function hb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Om(r.key,kn.none()):new Hl(r.key,r.data,kn.none());{const n=r.data,s=an.empty();let o=new Rt(Bt.comparator);for(let u of e.fields)if(!o.has(u)){let d=n.field(u);d===null&&u.length>1&&(u=u.popLast(),d=n.field(u)),d===null?s.delete(u):s.set(u,d),o=o.add(u)}return new Gr(r.key,s,new vn(o.toArray()),kn.none())}}function h1(r,e,n){r instanceof Hl?function(o,u,d){const m=o.value.clone(),p=p_(o.fieldTransforms,u,d.transformResults);m.setAll(p),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(r,e,n):r instanceof Gr?function(o,u,d){if(!Oc(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=p_(o.fieldTransforms,u,d.transformResults),p=u.data;p.setAll(db(o)),p.setAll(m),u.convertToFoundDocument(d.version,p).setHasCommittedMutations()}(r,e,n):function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function Il(r,e,n,s){return r instanceof Hl?function(u,d,m,p){if(!Oc(u.precondition,d))return m;const y=u.value.clone(),E=y_(u.fieldTransforms,p,d);return y.setAll(E),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null}(r,e,n,s):r instanceof Gr?function(u,d,m,p){if(!Oc(u.precondition,d))return m;const y=y_(u.fieldTransforms,p,d),E=d.data;return E.setAll(db(u)),E.setAll(y),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(r,e,n,s):function(u,d,m){return Oc(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(r,e,n)}function d1(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=ob(s.transform,o||null);u!=null&&(n===null&&(n=an.empty()),n.set(s.field,u))}return n||null}function g_(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ka(s,o,(u,d)=>u1(u,d))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Hl extends hh{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gr extends hh{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function db(r){const e=new Map;return r.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}}),e}function p_(r,e,n){const s=new Map;Ge(r.length===n.length,32656,{Ve:n.length,me:r.length});for(let o=0;o<n.length;o++){const u=r[o],d=u.transform,m=e.data.field(u.field);s.set(u.field,o1(d,m,n[o]))}return s}function y_(r,e,n){const s=new Map;for(const o of r){const u=o.transform,d=n.data.field(o.field);s.set(o.field,a1(u,d,e))}return s}class Om extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f1 extends hh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&h1(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Il(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Il(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=sb();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=n.has(o.key)?null:m;const p=hb(d,m);p!==null&&s.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(xe.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Ka(this.mutations,e.mutations,(n,s)=>g_(n,s))&&Ka(this.baseMutations,e.baseMutations,(n,s)=>g_(n,s))}}class km{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ge(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let o=function(){return t1}();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,s[d].version);return new km(e,n,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt,ze;function y1(r){switch(r){case te.OK:return Ae(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ae(15467,{code:r})}}function fb(r){if(r===void 0)return Qi("GRPC error has no .code"),te.UNKNOWN;switch(r){case vt.OK:return te.OK;case vt.CANCELLED:return te.CANCELLED;case vt.UNKNOWN:return te.UNKNOWN;case vt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case vt.INTERNAL:return te.INTERNAL;case vt.UNAVAILABLE:return te.UNAVAILABLE;case vt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case vt.NOT_FOUND:return te.NOT_FOUND;case vt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case vt.ABORTED:return te.ABORTED;case vt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case vt.DATA_LOSS:return te.DATA_LOSS;default:return Ae(39323,{code:r})}}(ze=vt||(vt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new Vr([4294967295,4294967295],0);function v_(r){const e=P0().encode(r),n=new I0;return n.update(e),new Uint8Array(n.digest())}function __(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Vr([n,s],0),new Vr([o,u],0)]}class Vm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new El(`Invalid padding: ${n}`);if(s<0)throw new El(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new El(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new El(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Vr.fromNumber(this.pe)}we(e,n,s){let o=e.add(n.multiply(Vr.fromNumber(s)));return o.compare(v1)===1&&(o=new Vr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=v_(e),[s,o]=__(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);if(!this.be(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Vm(u,o,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.pe===0)return;const n=v_(e),[s,o]=__(n);for(let u=0;u<this.hashCount;u++){const d=this.we(s,o,u);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class El extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Gl.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new dh(xe.min(),o,new st(De),Yi(),Pe())}}class Gl{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Gl(s,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,s,o){this.De=e,this.removedTargetIds=n,this.key=s,this.ve=o}}class mb{constructor(e,n){this.targetId=e,this.Ce=n}}class gb{constructor(e,n,s=qt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class b_{constructor(){this.Fe=0,this.Me=E_(),this.xe=qt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Pe(),n=Pe(),s=Pe();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Ae(38017,{changeType:u})}}),new Gl(this.xe,this.Oe,e,n,s)}Qe(){this.Ne=!1,this.Me=E_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ge(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class _1{constructor(e){this.ze=e,this.je=new Map,this.He=Yi(),this.Je=Sc(),this.Ye=Sc(),this.Ze=new st(De)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const s=this.rt(n);switch(e.state){case 0:this.it(n)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(n);break;case 3:this.it(n)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),s.ke(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((s,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,s=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(nm(u))if(s===0){const d=new ye(u.path);this.tt(n,d,Yt.newNoDocument(d,xe.min()))}else Ge(s===1,20013,{expectedCount:s});else{const d=this.ut(n);if(d!==s){const m=this.ct(e),p=m?this.lt(m,e,d):1;if(p!==0){this.st(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let d,m;try{d=Lr(s).toUint8Array()}catch(p){if(p instanceof z0)return Fa("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Vm(d,o,u)}catch(p){return Fa(p instanceof El?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.pe===0?null:m}lt(e,n,s){return n.Ce.count===s-this.Tt(e,n.targetId)?0:2}Tt(e,n){const s=this.ze.getRemoteKeysForTarget(n);let o=0;return s.forEach(u=>{const d=this.ze.Pt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,d)=>{const m=this._t(d);if(m){if(u.current&&nm(m.target)){const p=new ye(m.target.path);this.Et(p).has(d)||this.dt(d,p)||this.tt(d,p,Yt.newNoDocument(p,e))}u.Le&&(n.set(d,u.qe()),u.Qe())}});let s=Pe();this.Ye.forEach((u,d)=>{let m=!0;d.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(u))}),this.He.forEach((u,d)=>d.setReadTime(e));const o=new dh(e,n,this.Ze,this.He,s);return this.He=Yi(),this.Je=Sc(),this.Ye=Sc(),this.Ze=new st(De),o}et(e,n){if(!this.it(e))return;const s=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,s),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,s){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),s&&(this.He=this.He.insert(n,s))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new b_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Rt(De),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Rt(De),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new b_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function Sc(){return new st(ye.comparator)}function E_(){return new st(ye.comparator)}const b1={asc:"ASCENDING",desc:"DESCENDING"},E1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T1={and:"AND",or:"OR"};class A1{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sm(r,e){return r.useProto3Json||ah(e)?e:{value:e}}function Qc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function w1(r,e){return Qc(r,e.toTimestamp())}function ci(r){return Ge(!!r,49232),xe.fromTimestamp(function(n){const s=Ur(n);return new xt(s.seconds,s.nanos)}(r))}function Mm(r,e){return am(r,e).canonicalString()}function am(r,e){const n=function(o){return new tt(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?n:n.child(e)}function yb(r){const e=tt.fromString(r);return Ge(Tb(e),10190,{key:e.toString()}),e}function om(r,e){return Mm(r.databaseId,e.path)}function Lf(r,e){const n=yb(e);if(n.get(1)!==r.databaseId.projectId)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new he(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new ye(_b(n))}function vb(r,e){return Mm(r.databaseId,e)}function S1(r){const e=yb(r);return e.length===4?tt.emptyPath():_b(e)}function lm(r){return new tt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function _b(r){return Ge(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function T_(r,e,n){return{name:om(r,e),fields:n.value.mapValue.fields}}function x1(r,e){let n;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ae(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,E){return y.useProto3Json?(Ge(E===void 0||typeof E=="string",58123),qt.fromBase64String(E||"")):(Ge(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),qt.fromUint8Array(E||new Uint8Array))}(r,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(y){const E=y.code===void 0?te.UNKNOWN:fb(y.code);return new he(E,y.message||"")}(d);n=new gb(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Lf(r,s.document.name),u=ci(s.document.updateTime),d=s.document.createTime?ci(s.document.createTime):xe.min(),m=new an({mapValue:{fields:s.document.fields}}),p=Yt.newFoundDocument(o,u,d,m),y=s.targetIds||[],E=s.removedTargetIds||[];n=new kc(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Lf(r,s.document),u=s.readTime?ci(s.readTime):xe.min(),d=Yt.newNoDocument(o,u),m=s.removedTargetIds||[];n=new kc([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Lf(r,s.document),u=s.removedTargetIds||[];n=new kc([],u,o,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,d=new p1(o,u),m=s.targetId;n=new mb(m,d)}}return n}function R1(r,e){let n;if(e instanceof Hl)n={update:T_(r,e.key,e.value)};else if(e instanceof Om)n={delete:om(r,e.key)};else if(e instanceof Gr)n={update:T_(r,e.key,e.data),updateMask:P1(e.fieldMask)};else{if(!(e instanceof f1))return Ae(16599,{ft:e.type});n={verify:om(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(u,d){const m=d.transform;if(m instanceof Ml)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Pl)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof jl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Kc)return{fieldPath:d.field.canonicalString(),increment:m.Re};throw Ae(20930,{transform:d.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:w1(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ae(27497)}(r,e.precondition)),n}function I1(r,e){return r&&r.length>0?(Ge(e!==void 0,14353),r.map(n=>function(o,u){let d=o.updateTime?ci(o.updateTime):ci(u);return d.isEqual(xe.min())&&(d=ci(u)),new c1(d,o.transformResults||[])}(n,e))):[]}function C1(r,e){return{documents:[vb(r,e.path)]}}function N1(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=vb(r,o);const u=function(y){if(y.length!==0)return Eb(qn.create(y,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const d=function(y){if(y.length!==0)return y.map(E=>function(S){return{field:Ma(S.field),direction:k1(S.dir)}}(E))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=sm(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:n,parent:o}}function D1(r){let e=S1(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ge(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=function(w){const S=bb(w);return S instanceof qn&&X0(S)?S.getFilters():[S]}(n.where));let d=[];n.orderBy&&(d=function(w){return w.map(S=>function(B){return new Fc(Pa(B.field),function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(S))}(n.orderBy));let m=null;n.limit&&(m=function(w){let S;return S=typeof w=="object"?w.value:w,ah(S)?null:S}(n.limit));let p=null;n.startAt&&(p=function(w){const S=!!w.before,V=w.values||[];return new Gc(V,S)}(n.startAt));let y=null;return n.endAt&&(y=function(w){const S=!w.before,V=w.values||[];return new Gc(V,S)}(n.endAt)),XS(e,o,d,u,m,"F",p,y)}function O1(r,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bb(r){return r.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Pa(n.unaryFilter.field);return _t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Pa(n.unaryFilter.field);return _t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Pa(n.unaryFilter.field);return _t.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Pa(n.unaryFilter.field);return _t.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(r):r.fieldFilter!==void 0?function(n){return _t.create(Pa(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(s=>bb(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(n.compositeFilter.op))}(r):Ae(30097,{filter:r})}function k1(r){return b1[r]}function V1(r){return E1[r]}function M1(r){return T1[r]}function Ma(r){return{fieldPath:r.canonicalString()}}function Pa(r){return Bt.fromServerFormat(r.fieldPath)}function Eb(r){return r instanceof _t?function(n){if(n.op==="=="){if(u_(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NAN"}};if(l_(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(u_(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NAN"}};if(l_(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(n.field),op:V1(n.op),value:n.value}}}(r):r instanceof qn?function(n){const s=n.getFilters().map(o=>Eb(o));return s.length===1?s[0]:{compositeFilter:{op:M1(n.op),filters:s}}}(r):Ae(54877,{filter:r})}function P1(r){const e=[];return r.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,s,o,u=xe.min(),d=xe.min(),m=qt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e){this.wt=e}}function U1(r){const e=D1({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?rm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.Cn=new z1}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(jr.min())}updateCollectionGroup(e,n,s){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class z1{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Rt(tt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Rt(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ab=41943040;class sn{static withCacheSize(e){return new sn(e,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(Ab,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new $a(0)}static lr(){return new $a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="LruGarbageCollector",B1=1048576;function S_([r,e],[n,s]){const o=De(r,n);return o===0?De(e,s):o}class q1{constructor(e){this.Er=e,this.buffer=new Rt(S_),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();S_(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H1{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ce(w_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){io(n)?ce(w_,"Ignoring IndexedDB error during garbage collection: ",n):await no(n)}await this.mr(3e5)})}}class G1{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(sh.le);const s=new q1(n);return this.gr.forEachTarget(e,o=>s.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>s.Rr(o))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.gr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(A_)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let s,o,u,d,m,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(s=w,m=Date.now(),this.removeTargets(e,s,n))).next(w=>(u=w,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(w=>(y=Date.now(),ka()<=Me.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${w} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function F1(r,e){return new G1(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.changes=new js(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Yt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ee.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(s!==null&&Il(s.mutation,o,vn.empty(),xt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Pe()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Pe()){const o=Cs();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,s).next(u=>{let d=bl();return u.forEach((m,p)=>{d=d.insert(m,p.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=Cs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Pe()))}populateOverlays(e,n,s){const o=[];return s.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,o){let u=Yi();const d=Rl(),m=function(){return Rl()}();return n.forEach((p,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Gr)?u=u.insert(y.key,y):E!==void 0?(d.set(y.key,E.mutation.getFieldMask()),Il(E.mutation,y,E.mutation.getFieldMask(),xt.now())):d.set(y.key,vn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((y,E)=>d.set(y,E)),n.forEach((y,E)=>{var w;return m.set(y,new Q1(E,(w=d.get(y))!==null&&w!==void 0?w:null))}),m))}recalculateAndSaveOverlays(e,n){const s=Rl();let o=new st((d,m)=>d-m),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let E=s.get(p)||vn.empty();E=m.applyToLocalView(y,E),s.set(p,E);const w=(o.get(m.batchId)||Pe()).add(p);o=o.insert(m.batchId,w)})}).next(()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,E=p.value,w=sb();E.forEach(S=>{if(!u.has(S)){const V=hb(n.get(S),s.get(S));V!==null&&w.set(S,V),u=u.add(S)}}),d.push(this.documentOverlayCache.saveOverlays(e,y,w))}return ee.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,o){return function(d){return ye.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ee.resolve(Cs());let m=Dl,p=u;return d.next(y=>ee.forEach(y,(E,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(E)?ee.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{p=p.insert(E,S)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,p,y,Pe())).next(E=>({batchId:m,changes:rb(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(s=>{let o=bl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let d=bl();return this.indexManager.getCollectionParents(e,u).next(m=>ee.forEach(m,p=>{const y=function(w,S){return new ql(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(E=>{E.forEach((w,S)=>{d=d.insert(w,S)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o))).next(d=>{u.forEach((p,y)=>{const E=y.getKey();d.get(E)===null&&(d=d.insert(E,Yt.newInvalidDocument(E)))});let m=bl();return d.forEach((p,y)=>{const E=u.get(p);E!==void 0&&Il(E.mutation,y,vn.empty(),xt.now()),uh(n,y)&&(m=m.insert(p,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ee.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:ci(o.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:U1(o.bundledQuery),readTime:ci(o.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.overlays=new st(ye.comparator),this.Qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Cs();return ee.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&s.set(o,u)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((o,u)=>{this.St(e,n,u)}),ee.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Qr.get(s);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(s)),ee.resolve()}getOverlaysForCollection(e,n,s){const o=Cs(),u=n.length+1,d=new ye(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new st((y,E)=>y-E);const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=Cs(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=Cs(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>m.set(y,E)),!(m.size()>=o)););return ee.resolve(m)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(s.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new g1(n,s));let u=this.Qr.get(n);u===void 0&&(u=Pe(),this.Qr.set(n,u)),this.Qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.$r=new Rt(kt.Ur),this.Kr=new Rt(kt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const s=new kt(e,n);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.zr(new kt(e,n))}jr(e,n){e.forEach(s=>this.removeReference(s,n))}Hr(e){const n=new ye(new tt([])),s=new kt(n,e),o=new kt(n,e+1),u=[];return this.Kr.forEachInRange([s,o],d=>{this.zr(d),u.push(d.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new ye(new tt([])),s=new kt(n,e),o=new kt(n,e+1);let u=Pe();return this.Kr.forEachInRange([s,o],d=>{u=u.add(d.key)}),u}containsKey(e){const n=new kt(e,0),s=this.$r.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class kt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return ye.comparator(e.key,n.key)||De(e.Zr,n.Zr)}static Wr(e,n){return De(e.Zr,n.Zr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Rt(kt.Ur)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new m1(u,n,s,o);this.mutationQueue.push(d);for(const m of o)this.Xr=this.Xr.add(new kt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(d)}lookupMutationBatch(e,n){return ee.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ti(s),u=o<0?0:o;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Sm:this.nr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new kt(n,0),o=new kt(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([s,o],d=>{const m=this.ei(d.Zr);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Rt(De);return n.forEach(o=>{const u=new kt(o,0),d=new kt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,d],m=>{s=s.add(m.Zr)})}),ee.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;ye.isDocumentKey(u)||(u=u.child(""));const d=new kt(new ye(u),0);let m=new Rt(De);return this.Xr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Zr)),!0)},d),ee.resolve(this.ni(m))}ni(e){const n=[];return e.forEach(s=>{const o=this.ei(s);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ge(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return ee.forEach(n.mutations,o=>{const u=new kt(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,n){const s=new kt(n,0),o=this.Xr.firstAfterOrEqual(s);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this.ii=e,this.docs=function(){return new st(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,d=this.ii(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ee.resolve(s?s.document.mutableCopy():Yt.newInvalidDocument(n))}getEntries(e,n){let s=Yi();return n.forEach(o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Yt.newInvalidDocument(o))}),ee.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Yi();const d=n.path,m=new ye(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||IS(RS(E),s)<=0||(o.has(E.key)||uh(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,n,s,o){Ae(9500)}si(e,n){return ee.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new ex(this)}getSize(e){return ee.resolve(this.size)}}class ex extends K1{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(s)}),ee.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.persistence=e,this.oi=new js(n=>Im(n),Cm),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this._i=0,this.ai=new Pm,this.targetCount=0,this.ui=$a.cr()}forEachTarget(e,n){return this.oi.forEach((s,o)=>n(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this._i&&(this._i=n),ee.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new $a(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Tr(n),ee.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.oi.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.oi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ee.waitFor(u).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const s=this.oi.get(n)||null;return ee.resolve(s)}addMatchingKeys(e,n,s){return this.ai.Gr(n,s),ee.resolve()}removeMatchingKeys(e,n,s){this.ai.jr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const s=this.ai.Yr(n);return ee.resolve(s)}containsKey(e,n){return ee.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,n){this.ci={},this.overlays={},this.li=new sh(0),this.hi=!1,this.hi=!0,this.Pi=new Z1,this.referenceDelegate=e(this),this.Ti=new tx(this),this.indexManager=new L1,this.remoteDocumentCache=function(o){return new W1(o)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new j1(n),this.Ei=new $1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new X1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ci[e.toKey()];return s||(s=new J1(n,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,s){ce("MemoryPersistence","Starting transaction:",e);const o=new nx(this.li.next());return this.referenceDelegate.di(),s(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return ee.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,n)))}}class nx extends NS{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Vi=new Pm,this.mi=null}static fi(e){return new jm(e)}get gi(){if(this.mi)return this.mi;throw Ae(60996)}addReference(e,n,s){return this.Vi.addReference(s,n),this.gi.delete(s.toString()),ee.resolve()}removeReference(e,n,s){return this.Vi.removeReference(s,n),this.gi.add(s.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>s.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.gi,s=>{const o=ye.fromPath(s);return this.pi(e,o).next(u=>{u||n.removeEntry(o,xe.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(s=>{s?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ee.or([()=>ee.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class Yc{constructor(e,n){this.persistence=e,this.yi=new js(s=>kS(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=F1(this,n)}static fi(e,n){return new Yc(e,n)}di(){}Ai(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(o=>s+o))}br(e){let n=0;return this.yr(e,s=>{n++}).next(()=>n)}yr(e,n){return ee.forEach(this.yi,(s,o)=>this.Dr(e,s,o).next(u=>u?ee.resolve():n(o)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,n).next(m=>{m||(s++,u.removeEntry(d,xe.min()))})).next(()=>u.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,s){return this.yi.set(s,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Nc(e.data.value)),n}Dr(e,n,s){return ee.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return ee.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.ds=s,this.As=o}static Rs(e,n){let s=Pe(),o=Pe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Um(e,n.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return WA()?8:DS($t())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.ws(e,n).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.bs(e,n,o,s).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new ix;return this.Ss(e,n,d).next(m=>{if(u.result=m,this.fs)return this.Ds(e,n,d,m.size)})}).next(()=>u.result)}Ds(e,n,s,o){return s.documentReadCount<this.gs?(ka()<=Me.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Va(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ee.resolve()):(ka()<=Me.DEBUG&&ce("QueryEngine","Query:",Va(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ps*o?(ka()<=Me.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Va(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ui(n))):ee.resolve())}ws(e,n){if(f_(n))return ee.resolve(null);let s=ui(n);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=rm(n,null,"F"),s=ui(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(u=>{const d=Pe(...u);return this.ys.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.vs(n,m);return this.Cs(n,y,d,p.readTime)?this.ws(e,rm(n,null,"F")):this.Fs(e,y,n,p)}))})))}bs(e,n,s,o){return f_(n)||o.isEqual(xe.min())?ee.resolve(null):this.ys.getDocuments(e,s).next(u=>{const d=this.vs(n,u);return this.Cs(n,d,s,o)?ee.resolve(null):(ka()<=Me.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Va(n)),this.Fs(e,d,n,xS(o,Dl)).next(m=>m))})}vs(e,n){let s=new Rt(nb(e));return n.forEach((o,u)=>{uh(e,u)&&(s=s.add(u))}),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,s){return ka()<=Me.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Va(n)),this.ys.getDocumentsMatchingQuery(e,n,jr.min(),s)}Fs(e,n,s,o){return this.ys.getDocumentsMatchingQuery(e,s,o).next(u=>(n.forEach(d=>{u=u.insert(d.key,d)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="LocalStore",sx=3e8;class ax{constructor(e,n,s,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new st(De),this.Os=new js(u=>Im(u),Cm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Y1(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function ox(r,e,n,s){return new ax(r,e,n,s)}async function Sb(r,e){const n=Re(r);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(s))).next(u=>{const d=[],m=[];let p=Pe();for(const y of o){d.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return n.localDocuments.getDocuments(s,p).next(y=>({ks:y,removedBatchIds:d,addedBatchIds:m}))})})}function lx(r,e){const n=Re(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(m,p,y,E){const w=y.batch,S=w.keys();let V=ee.resolve();return S.forEach(B=>{V=V.next(()=>E.getEntry(p,B)).next(F=>{const Y=y.docVersions.get(B);Ge(Y!==null,48541),F.version.compareTo(Y)<0&&(w.applyToRemoteDocument(F,y),F.isValidDocument()&&(F.setReadTime(y.commitVersion),E.addEntry(F)))})}),V.next(()=>m.mutationQueue.removeMutationBatch(p,w))}(n,s,e,u).next(()=>u.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let p=Pe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(s,o))})}function xb(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function ux(r,e){const n=Re(r),s=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const m=[];e.targetChanges.forEach((E,w)=>{const S=o.get(w);if(!S)return;m.push(n.Ti.removeMatchingKeys(u,E.removedDocuments,w).next(()=>n.Ti.addMatchingKeys(u,E.addedDocuments,w)));let V=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?V=V.withResumeToken(qt.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):E.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(E.resumeToken,s)),o=o.insert(w,V),function(F,Y,me){return F.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=sx?!0:me.addedDocuments.size+me.modifiedDocuments.size+me.removedDocuments.size>0}(S,V,E)&&m.push(n.Ti.updateTargetData(u,V))});let p=Yi(),y=Pe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(cx(u,d,e.documentUpdates).next(E=>{p=E.qs,y=E.Qs})),!s.isEqual(xe.min())){const E=n.Ti.getLastRemoteSnapshotVersion(u).next(w=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,s));m.push(E)}return ee.waitFor(m).next(()=>d.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,y)).next(()=>p)}).then(u=>(n.xs=o,u))}function cx(r,e,n){let s=Pe(),o=Pe();return n.forEach(u=>s=s.add(u)),e.getEntries(r,s).next(u=>{let d=Yi();return n.forEach((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(xe.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):ce(Lm,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)}),{qs:d,Qs:o}})}function hx(r,e){const n=Re(r);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=Sm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function dx(r,e){const n=Re(r);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return n.Ti.getTargetData(s,e).next(u=>u?(o=u,ee.resolve(o)):n.Ti.allocateTargetId(s).next(d=>(o=new Nr(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Ti.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=n.xs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(s.targetId,s),n.Os.set(e,s.targetId)),s})}async function um(r,e,n){const s=Re(r),o=s.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,d=>s.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!io(d))throw d;ce(Lm,`Failed to update sequence numbers for target ${e}: ${d}`)}s.xs=s.xs.remove(e),s.Os.delete(o.target)}function x_(r,e,n){const s=Re(r);let o=xe.min(),u=Pe();return s.persistence.runTransaction("Execute query","readwrite",d=>function(p,y,E){const w=Re(p),S=w.Os.get(E);return S!==void 0?ee.resolve(w.xs.get(S)):w.Ti.getTargetData(y,E)}(s,d,ui(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(d,m.targetId).next(p=>{u=p})}).next(()=>s.Ms.getDocumentsMatchingQuery(d,e,n?o:xe.min(),n?u:Pe())).next(m=>(fx(s,JS(e),m),{documents:m,$s:u})))}function fx(r,e,n){let s=r.Ns.get(e)||xe.min();n.forEach((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)}),r.Ns.set(e,s)}class R_{constructor(){this.activeTargetIds=r1()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mx{constructor(){this.xo=new R_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,s){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new R_,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="ConnectivityMonitor";class C_{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ce(I_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ce(I_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc=null;function cm(){return xc===null?xc=function(){return 268435456+Math.round(2147483648*Math.random())}():xc++,"0x"+xc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="RestConnection",px={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yx{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${s}/databases/${o}`,this.Go=this.databaseId.database===qc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}zo(e,n,s,o,u){const d=cm(),m=this.jo(e,n.toUriEncodedString());ce(zf,`Sending RPC '${e}' ${d}:`,m,s);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:y}=new URL(m),E=Wa(y);return this.Jo(e,m,p,s,E).then(w=>(ce(zf,`Received RPC '${e}' ${d}: `,w),w),w=>{throw Fa(zf,`RPC '${e}' ${d} failed with error: `,w,"url: ",m,"request:",s),w})}Yo(e,n,s,o,u,d){return this.zo(e,n,s,o,u)}Ho(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+to}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),s&&s.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const s=px[e];return`${this.Ko}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class _x extends yx{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,u){const d=cm();return new Promise((m,p)=>{const y=new C0;y.setWithCredentials(!0),y.listenOnce(N0.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Cc.NO_ERROR:const w=y.getResponseJson();ce(Kt,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),m(w);break;case Cc.TIMEOUT:ce(Kt,`RPC '${e}' ${d} timed out`),p(new he(te.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const S=y.getStatus();if(ce(Kt,`RPC '${e}' ${d} failed with status:`,S,"response text:",y.getResponseText()),S>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const B=V==null?void 0:V.error;if(B&&B.status&&B.message){const F=function(me){const ue=me.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(ue)>=0?ue:te.UNKNOWN}(B.status);p(new he(F,B.message))}else p(new he(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new he(te.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{h_:e,streamId:d,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{ce(Kt,`RPC '${e}' ${d} completed.`)}});const E=JSON.stringify(o);ce(Kt,`RPC '${e}' ${d} sending request:`,o),y.send(n,"POST",E,s,15)})}I_(e,n,s){const o=cm(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=k0(),m=O0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const E=u.join("");ce(Kt,`Creating RPC '${e}' stream ${o}: ${E}`,p);const w=d.createWebChannel(E,p);this.E_(w);let S=!1,V=!1;const B=new vx({Zo:Y=>{V?ce(Kt,`Not sending because RPC '${e}' stream ${o} is closed:`,Y):(S||(ce(Kt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),S=!0),ce(Kt,`RPC '${e}' stream ${o} sending:`,Y),w.send(Y))},Xo:()=>w.close()}),F=(Y,me,ue)=>{Y.listen(me,oe=>{try{ue(oe)}catch(Q){setTimeout(()=>{throw Q},0)}})};return F(w,_l.EventType.OPEN,()=>{V||(ce(Kt,`RPC '${e}' stream ${o} transport opened.`),B.__())}),F(w,_l.EventType.CLOSE,()=>{V||(V=!0,ce(Kt,`RPC '${e}' stream ${o} transport closed`),B.u_(),this.d_(w))}),F(w,_l.EventType.ERROR,Y=>{V||(V=!0,Fa(Kt,`RPC '${e}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),B.u_(new he(te.UNAVAILABLE,"The operation could not be completed")))}),F(w,_l.EventType.MESSAGE,Y=>{var me;if(!V){const ue=Y.data[0];Ge(!!ue,16349);const oe=ue,Q=(oe==null?void 0:oe.error)||((me=oe[0])===null||me===void 0?void 0:me.error);if(Q){ce(Kt,`RPC '${e}' stream ${o} received error:`,Q);const X=Q.status;let de=function(I){const O=vt[I];if(O!==void 0)return fb(O)}(X),R=Q.message;de===void 0&&(de=te.INTERNAL,R="Unknown error status: "+X+" with message "+Q.message),V=!0,B.u_(new he(de,R)),w.close()}else ce(Kt,`RPC '${e}' stream ${o} received:`,ue),B.c_(ue)}}),F(m,D0.STAT_EVENT,Y=>{Y.stat===Zf.PROXY?ce(Kt,`RPC '${e}' stream ${o} detected buffering proxy`):Y.stat===Zf.NOPROXY&&ce(Kt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{B.a_()},0),B}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Bf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(r){return new A1(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=s,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="PersistentStream";class Ib{constructor(e,n,s,o,u,d,m,p){this.xi=e,this.S_=s,this.D_=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Rb(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Qi(n.toString()),Qi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.v_===n&&this.z_(s,o)},s=>{e(()=>{const o=new he(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(o)})})}z_(e,n){const s=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{s(()=>this.j_(o))}),this.stream.onMessage(o=>{s(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ce(N_,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ce(N_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bx extends Ib{constructor(e,n,s,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=x1(this.serializer,e),s=function(u){if(!("targetChange"in u))return xe.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?xe.min():d.readTime?ci(d.readTime):xe.min()}(e);return this.listener.Y_(n,s)}Z_(e){const n={};n.database=lm(this.serializer),n.addTarget=function(u,d){let m;const p=d.target;if(m=nm(p)?{documents:C1(u,p)}:{query:N1(u,p).gt},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=pb(u,d.resumeToken);const y=sm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(xe.min())>0){m.readTime=Qc(u,d.snapshotVersion.toTimestamp());const y=sm(u,d.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const s=O1(this.serializer,e);s&&(n.labels=s),this.Q_(n)}X_(e){const n={};n.database=lm(this.serializer),n.removeTarget=e,this.Q_(n)}}class Ex extends Ib{constructor(e,n,s,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=I1(e.writeResults,e.commitTime),s=ci(e.commitTime);return this.listener.ra(s,n)}ia(){const e={};e.database=lm(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>R1(this.serializer,s))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{}class Ax extends Tx{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.zo(e,am(n,s),o,u,d)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(te.UNKNOWN,u.toString())})}Yo(e,n,s,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Yo(e,am(n,s),o,d,m,u)).catch(d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(te.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class wx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Qi(n),this.ua=!1):ce("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="RemoteStore";class Sx{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(d=>{s.enqueueAndForget(async()=>{Us(this)&&(ce(ks,"Restarting streams for network reachability change."),await async function(p){const y=Re(p);y.da.add(4),await Fl(y),y.Va.set("Unknown"),y.da.delete(4),await mh(y)}(this))})}),this.Va=new wx(s,o)}}async function mh(r){if(Us(r))for(const e of r.Aa)await e(!0)}async function Fl(r){for(const e of r.Aa)await e(!1)}function Cb(r,e){const n=Re(r);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),Hm(n)?qm(n):ro(n).N_()&&Bm(n,e))}function zm(r,e){const n=Re(r),s=ro(n);n.Ea.delete(e),s.N_()&&Nb(n,e),n.Ea.size===0&&(s.N_()?s.k_():Us(n)&&n.Va.set("Unknown"))}function Bm(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xe.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ro(r).Z_(e)}function Nb(r,e){r.ma.Ke(e),ro(r).X_(e)}function qm(r){r.ma=new _1({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),ro(r).start(),r.Va.ca()}function Hm(r){return Us(r)&&!ro(r).O_()&&r.Ea.size>0}function Us(r){return Re(r).da.size===0}function Db(r){r.ma=void 0}async function xx(r){r.Va.set("Online")}async function Rx(r){r.Ea.forEach((e,n)=>{Bm(r,e)})}async function Ix(r,e){Db(r),Hm(r)?(r.Va.Pa(e),qm(r)):r.Va.set("Unknown")}async function Cx(r,e,n){if(r.Va.set("Online"),e instanceof gb&&e.state===2&&e.cause)try{await async function(o,u){const d=u.cause;for(const m of u.targetIds)o.Ea.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ea.delete(m),o.ma.removeTarget(m))}(r,e)}catch(s){ce(ks,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await $c(r,s)}else if(e instanceof kc?r.ma.Xe(e):e instanceof mb?r.ma.ot(e):r.ma.nt(e),!n.isEqual(xe.min()))try{const s=await xb(r.localStore);n.compareTo(s)>=0&&await function(u,d){const m=u.ma.It(d);return m.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=u.Ea.get(y);E&&u.Ea.set(y,E.withResumeToken(p.resumeToken,d))}}),m.targetMismatches.forEach((p,y)=>{const E=u.Ea.get(p);if(!E)return;u.Ea.set(p,E.withResumeToken(qt.EMPTY_BYTE_STRING,E.snapshotVersion)),Nb(u,p);const w=new Nr(E.target,p,y,E.sequenceNumber);Bm(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(r,n)}catch(s){ce(ks,"Failed to raise snapshot:",s),await $c(r,s)}}async function $c(r,e,n){if(!io(e))throw e;r.da.add(1),await Fl(r),r.Va.set("Offline"),n||(n=()=>xb(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{ce(ks,"Retrying IndexedDB access"),await n(),r.da.delete(1),await mh(r)})}function Ob(r,e){return e().catch(n=>$c(r,n,e))}async function gh(r){const e=Re(r),n=Br(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Sm;for(;Nx(e);)try{const o=await hx(e.localStore,s);if(o===null){e.Ia.length===0&&n.k_();break}s=o.batchId,Dx(e,o)}catch(o){await $c(e,o)}kb(e)&&Vb(e)}function Nx(r){return Us(r)&&r.Ia.length<10}function Dx(r,e){r.Ia.push(e);const n=Br(r);n.N_()&&n.ea&&n.ta(e.mutations)}function kb(r){return Us(r)&&!Br(r).O_()&&r.Ia.length>0}function Vb(r){Br(r).start()}async function Ox(r){Br(r).ia()}async function kx(r){const e=Br(r);for(const n of r.Ia)e.ta(n.mutations)}async function Vx(r,e,n){const s=r.Ia.shift(),o=km.from(s,e,n);await Ob(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await gh(r)}async function Mx(r,e){e&&Br(r).ea&&await async function(s,o){if(function(d){return y1(d)&&d!==te.ABORTED}(o.code)){const u=s.Ia.shift();Br(s).L_(),await Ob(s,()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o)),await gh(s)}}(r,e),kb(r)&&Vb(r)}async function D_(r,e){const n=Re(r);n.asyncQueue.verifyOperationInProgress(),ce(ks,"RemoteStore received new credentials");const s=Us(n);n.da.add(3),await Fl(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await mh(n)}async function Px(r,e){const n=Re(r);e?(n.da.delete(2),await mh(n)):e||(n.da.add(2),await Fl(n),n.Va.set("Unknown"))}function ro(r){return r.fa||(r.fa=function(n,s,o){const u=Re(n);return u.oa(),new bx(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:xx.bind(null,r),n_:Rx.bind(null,r),i_:Ix.bind(null,r),Y_:Cx.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Hm(r)?qm(r):r.Va.set("Unknown")):(await r.fa.stop(),Db(r))})),r.fa}function Br(r){return r.ga||(r.ga=function(n,s,o){const u=Re(n);return u.oa(),new Ex(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:Ox.bind(null,r),i_:Mx.bind(null,r),na:kx.bind(null,r),ra:Vx.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await gh(r)):(await r.ga.stop(),r.Ia.length>0&&(ce(ks,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const d=Date.now()+s,m=new Gm(e,n,d,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fm(r,e){if(Qi("AsyncQueue",`${e}: ${r}`),io(r))return new he(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{static emptySet(e){return new za(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ye.comparator(n.key,s.key):(n,s)=>ye.comparator(n.key,s.key),this.keyedMap=bl(),this.sortedSet=new st(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof za)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new za;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.pa=new st(ye.comparator)}track(e){const n=e.doc.key,s=this.pa.get(n);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(n,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(n):e.type===1&&s.type===2?this.pa=this.pa.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Ae(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,s)=>{e.push(s)}),e}}class Xa{constructor(e,n,s,o,u,d,m,p,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Xa(e,n,za.emptySet(n),d,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class Ux{constructor(){this.queries=k_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Re(n),u=o.queries;o.queries=k_(),u.forEach((d,m)=>{for(const p of m.Sa)p.onError(s)})})(this,new he(te.ABORTED,"Firestore shutting down"))}}function k_(){return new js(r=>tb(r),lh)}async function Mb(r,e){const n=Re(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(s=2):(u=new jx,s=e.va()?0:1);try{switch(s){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const m=Fm(d,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&Km(n)}async function Pb(r,e){const n=Re(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const d=u.Sa.indexOf(e);d>=0&&(u.Sa.splice(d,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Lx(r,e){const n=Re(r);let s=!1;for(const o of e){const u=o.query,d=n.queries.get(u);if(d){for(const m of d.Sa)m.Ma(o)&&(s=!0);d.ba=o}}s&&Km(n)}function zx(r,e,n){const s=Re(r),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);s.queries.delete(e)}function Km(r){r.Ca.forEach(e=>{e.next()})}var hm,V_;(V_=hm||(hm={})).xa="default",V_.Cache="cache";class jb{constructor(e,n,s){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Xa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const s=n!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==hm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ub{constructor(e){this.key=e}}class Lb{constructor(e){this.key=e}}class Bx{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Pe(),this.mutatedKeys=Pe(),this.Za=nb(e),this.Xa=new za(this.Za)}get eu(){return this.Ha}tu(e,n){const s=n?n.nu:new O_,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,w)=>{const S=o.get(E),V=uh(this.query,w)?w:null,B=!!S&&this.mutatedKeys.has(S.key),F=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let Y=!1;S&&V?S.data.isEqual(V.data)?B!==F&&(s.track({type:3,doc:V}),Y=!0):this.ru(S,V)||(s.track({type:2,doc:V}),Y=!0,(p&&this.Za(V,p)>0||y&&this.Za(V,y)<0)&&(m=!0)):!S&&V?(s.track({type:0,doc:V}),Y=!0):S&&!V&&(s.track({type:1,doc:S}),Y=!0,(p||y)&&(m=!0)),Y&&(V?(d=d.add(V),u=F?u.add(E):u.delete(E)):(d=d.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{Xa:d,nu:s,Cs:m,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((E,w)=>function(V,B){const F=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:Y})}};return F(V)-F(B)}(E.type,w.type)||this.Za(E.doc,w.doc)),this.iu(s),o=o!=null&&o;const m=n&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,y=p!==this.Ja;return this.Ja=p,d.length!==0||y?{snapshot:new Xa(this.query,e.Xa,u,d,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:m}:{ou:m}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new O_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Pe(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const n=[];return e.forEach(s=>{this.Ya.has(s)||n.push(new Lb(s))}),this.Ya.forEach(s=>{e.has(s)||n.push(new Ub(s))}),n}au(e){this.Ha=e.$s,this.Ya=Pe();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Xa.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Qm="SyncEngine";class qx{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Hx{constructor(e){this.key=e,this.cu=!1}}class Gx{constructor(e,n,s,o,u,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new js(m=>tb(m),lh),this.Pu=new Map,this.Tu=new Set,this.Iu=new st(ye.comparator),this.Eu=new Map,this.du=new Pm,this.Au={},this.Ru=new Map,this.Vu=$a.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Fx(r,e,n=!0){const s=Fb(r);let o;const u=s.hu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await zb(s,e,n,!0),o}async function Kx(r,e){const n=Fb(r);await zb(n,e,!0,!1)}async function zb(r,e,n,s){const o=await dx(r.localStore,ui(e)),u=o.targetId,d=r.sharedClientState.addLocalQueryTarget(u,n);let m;return s&&(m=await Qx(r,e,u,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&Cb(r.remoteStore,o),m}async function Qx(r,e,n,s,o){r.fu=(w,S,V)=>async function(F,Y,me,ue){let oe=Y.view.tu(me);oe.Cs&&(oe=await x_(F.localStore,Y.query,!1).then(({documents:R})=>Y.view.tu(R,oe)));const Q=ue&&ue.targetChanges.get(Y.targetId),X=ue&&ue.targetMismatches.get(Y.targetId)!=null,de=Y.view.applyChanges(oe,F.isPrimaryClient,Q,X);return P_(F,Y.targetId,de.ou),de.snapshot}(r,w,S,V);const u=await x_(r.localStore,e,!0),d=new Bx(e,u.$s),m=d.tu(u.documents),p=Gl.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=d.applyChanges(m,r.isPrimaryClient,p);P_(r,n,y.ou);const E=new qx(e,n,d);return r.hu.set(e,E),r.Pu.has(n)?r.Pu.get(n).push(e):r.Pu.set(n,[e]),y.snapshot}async function Yx(r,e,n){const s=Re(r),o=s.hu.get(e),u=s.Pu.get(o.targetId);if(u.length>1)return s.Pu.set(o.targetId,u.filter(d=>!lh(d,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await um(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),n&&zm(s.remoteStore,o.targetId),dm(s,o.targetId)}).catch(no)):(dm(s,o.targetId),await um(s.localStore,o.targetId,!0))}async function $x(r,e){const n=Re(r),s=n.hu.get(e),o=n.Pu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),zm(n.remoteStore,s.targetId))}async function Xx(r,e,n){const s=iR(r);try{const o=await function(d,m){const p=Re(d),y=xt.now(),E=m.reduce((V,B)=>V.add(B.key),Pe());let w,S;return p.persistence.runTransaction("Locally write mutations","readwrite",V=>{let B=Yi(),F=Pe();return p.Bs.getEntries(V,E).next(Y=>{B=Y,B.forEach((me,ue)=>{ue.isValidDocument()||(F=F.add(me))})}).next(()=>p.localDocuments.getOverlayedDocuments(V,B)).next(Y=>{w=Y;const me=[];for(const ue of m){const oe=d1(ue,w.get(ue.key).overlayedDocument);oe!=null&&me.push(new Gr(ue.key,oe,Q0(oe.value.mapValue),kn.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,me,m)}).next(Y=>{S=Y;const me=Y.applyToLocalDocumentSet(w,F);return p.documentOverlayCache.saveOverlays(V,Y.batchId,me)})}).then(()=>({batchId:S.batchId,changes:rb(w)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(d,m,p){let y=d.Au[d.currentUser.toKey()];y||(y=new st(De)),y=y.insert(m,p),d.Au[d.currentUser.toKey()]=y}(s,o.batchId,n),await Kl(s,o.changes),await gh(s.remoteStore)}catch(o){const u=Fm(o,"Failed to persist write");n.reject(u)}}async function Bb(r,e){const n=Re(r);try{const s=await ux(n.localStore,e);e.targetChanges.forEach((o,u)=>{const d=n.Eu.get(u);d&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?Ge(d.cu,14607):o.removedDocuments.size>0&&(Ge(d.cu,42227),d.cu=!1))}),await Kl(n,s,e)}catch(s){await no(s)}}function M_(r,e,n){const s=Re(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.hu.forEach((u,d)=>{const m=d.view.Fa(e);m.snapshot&&o.push(m.snapshot)}),function(d,m){const p=Re(d);p.onlineState=m;let y=!1;p.queries.forEach((E,w)=>{for(const S of w.Sa)S.Fa(m)&&(y=!0)}),y&&Km(p)}(s.eventManager,e),o.length&&s.lu.Y_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Zx(r,e,n){const s=Re(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Eu.get(e),u=o&&o.key;if(u){let d=new st(ye.comparator);d=d.insert(u,Yt.newNoDocument(u,xe.min()));const m=Pe().add(u),p=new dh(xe.min(),new Map,new st(De),d,m);await Bb(s,p),s.Iu=s.Iu.remove(u),s.Eu.delete(e),Ym(s)}else await um(s.localStore,e,!1).then(()=>dm(s,e,n)).catch(no)}async function Jx(r,e){const n=Re(r),s=e.batch.batchId;try{const o=await lx(n.localStore,e);Hb(n,s,null),qb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Kl(n,o)}catch(o){await no(o)}}async function Wx(r,e,n){const s=Re(r);try{const o=await function(d,m){const p=Re(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,m).next(w=>(Ge(w!==null,37113),E=w.keys(),p.mutationQueue.removeMutationBatch(y,w))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,m)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(s.localStore,e);Hb(s,e,n),qb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Kl(s,o)}catch(o){await no(o)}}function qb(r,e){(r.Ru.get(e)||[]).forEach(n=>{n.resolve()}),r.Ru.delete(e)}function Hb(r,e,n){const s=Re(r);let o=s.Au[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.Au[s.currentUser.toKey()]=o}}function dm(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),n&&r.lu.gu(s,n);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||Gb(r,s)})}function Gb(r,e){r.Tu.delete(e.path.canonicalString());const n=r.Iu.get(e);n!==null&&(zm(r.remoteStore,n),r.Iu=r.Iu.remove(e),r.Eu.delete(n),Ym(r))}function P_(r,e,n){for(const s of n)s instanceof Ub?(r.du.addReference(s.key,e),eR(r,s)):s instanceof Lb?(ce(Qm,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||Gb(r,s.key)):Ae(19791,{pu:s})}function eR(r,e){const n=e.key,s=n.path.canonicalString();r.Iu.get(n)||r.Tu.has(s)||(ce(Qm,"New document in limbo: "+n),r.Tu.add(s),Ym(r))}function Ym(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const n=new ye(tt.fromString(e)),s=r.Vu.next();r.Eu.set(s,new Hx(n)),r.Iu=r.Iu.insert(n,s),Cb(r.remoteStore,new Nr(ui(Nm(n.path)),s,"TargetPurposeLimboResolution",sh.le))}}async function Kl(r,e,n){const s=Re(r),o=[],u=[],d=[];s.hu.isEmpty()||(s.hu.forEach((m,p)=>{d.push(s.fu(p,e,n).then(y=>{var E;if((y||n)&&s.isPrimaryClient){const w=y?!y.fromCache:(E=n==null?void 0:n.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Um.Rs(p.targetId,y);u.push(w)}}))}),await Promise.all(d),s.lu.Y_(o),await async function(p,y){const E=Re(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>ee.forEach(y,S=>ee.forEach(S.ds,V=>E.persistence.referenceDelegate.addReference(w,S.targetId,V)).next(()=>ee.forEach(S.As,V=>E.persistence.referenceDelegate.removeReference(w,S.targetId,V)))))}catch(w){if(!io(w))throw w;ce(Lm,"Failed to update sequence numbers: "+w)}for(const w of y){const S=w.targetId;if(!w.fromCache){const V=E.xs.get(S),B=V.snapshotVersion,F=V.withLastLimboFreeSnapshotVersion(B);E.xs=E.xs.insert(S,F)}}}(s.localStore,u))}async function tR(r,e){const n=Re(r);if(!n.currentUser.isEqual(e)){ce(Qm,"User change. New user:",e.toKey());const s=await Sb(n.localStore,e);n.currentUser=e,function(u,d){u.Ru.forEach(m=>{m.forEach(p=>{p.reject(new he(te.CANCELLED,d))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Kl(n,s.ks)}}function nR(r,e){const n=Re(r),s=n.Eu.get(e);if(s&&s.cu)return Pe().add(s.key);{let o=Pe();const u=n.Pu.get(e);if(!u)return o;for(const d of u){const m=n.hu.get(d);o=o.unionWith(m.view.eu)}return o}}function Fb(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Zx.bind(null,e),e.lu.Y_=Lx.bind(null,e.eventManager),e.lu.gu=zx.bind(null,e.eventManager),e}function iR(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Wx.bind(null,e),e}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return ox(this.persistence,new rx,e.initialUser,this.serializer)}Su(e){return new wb(jm.fi,this.serializer)}bu(e){return new mx}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class rR extends Xc{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Ge(this.persistence.referenceDelegate instanceof Yc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new H1(s,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new wb(s=>Yc.fi(s,n),this.serializer)}}class fm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>M_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tR.bind(null,this.syncEngine),await Px(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ux}()}createDatastore(e){const n=fh(e.databaseInfo.databaseId),s=function(u){return new _x(u)}(e.databaseInfo);return function(u,d,m,p){return new Ax(u,d,m,p)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,o,u,d,m){return new Sx(s,o,u,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>M_(this.syncEngine,n,0),function(){return C_.C()?new C_:new gx}())}createSyncEngine(e,n){return function(o,u,d,m,p,y,E){const w=new Gx(o,u,d,m,p,y);return E&&(w.mu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Re(o);ce(ks,"RemoteStore shutting down."),u.da.add(5),await Fl(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fm.provider={build:()=>new fm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Qi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="FirestoreClient";class sR{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=Qt.UNAUTHENTICATED,this.clientId=j0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,async d=>{ce(qr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(ce(qr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Fm(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function qf(r,e){r.asyncQueue.verifyOperationInProgress(),ce(qr,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await Sb(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function j_(r,e){r.asyncQueue.verifyOperationInProgress();const n=await aR(r);ce(qr,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener(s=>D_(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>D_(e.remoteStore,o)),r._onlineComponents=e}async function aR(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(qr,"Using user provided OfflineComponentProvider");try{await qf(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;Fa("Error using user provided cache. Falling back to memory cache: "+n),await qf(r,new Xc)}}else ce(qr,"Using default OfflineComponentProvider"),await qf(r,new rR(void 0));return r._offlineComponents}async function Qb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(qr,"Using user provided OnlineComponentProvider"),await j_(r,r._uninitializedComponentsProvider._online)):(ce(qr,"Using default OnlineComponentProvider"),await j_(r,new fm))),r._onlineComponents}function oR(r){return Qb(r).then(e=>e.syncEngine)}async function Yb(r){const e=await Qb(r),n=e.eventManager;return n.onListen=Fx.bind(null,e.syncEngine),n.onUnlisten=Yx.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Kx.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$x.bind(null,e.syncEngine),n}function lR(r,e,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,y){const E=new Kb({next:S=>{E.xu(),d.enqueueAndForget(()=>Pb(u,w));const V=S.docs.has(m);!V&&S.fromCache?y.reject(new he(te.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&S.fromCache&&p&&p.source==="server"?y.reject(new he(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new jb(Nm(m.path),E,{includeMetadataChanges:!0,Qa:!0});return Mb(u,w)}(await Yb(r),r.asyncQueue,e,n,s)),s.promise}function uR(r,e,n={}){const s=new Gi;return r.asyncQueue.enqueueAndForget(async()=>function(u,d,m,p,y){const E=new Kb({next:S=>{E.xu(),d.enqueueAndForget(()=>Pb(u,w)),S.fromCache&&p.source==="server"?y.reject(new he(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new jb(m,E,{includeMetadataChanges:!0,Qa:!0});return Mb(u,w)}(await Yb(r),r.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(r,e,n){if(!n)throw new he(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function cR(r,e,n,s){if(e===!0&&s===!0)throw new he(te.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function L_(r){if(!ye.isDocumentKey(r))throw new he(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function z_(r){if(ye.isDocumentKey(r))throw new he(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ph(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ae(12329,{type:typeof r})}function Hn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new he(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ph(r);throw new he(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="firestore.googleapis.com",B_=!0;class q_{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zb,this.ssl=B_}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:B_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ab;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B1)throw new he(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$b((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new he(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yh{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new yS;switch(s.type){case"firstParty":return new ES(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=U_.get(n);s&&(ce("ComponentProvider","Removing Datastore"),U_.delete(n),s.terminate())}(this),Promise.resolve()}}function hR(r,e,n,s={}){var o;r=Hn(r,yh);const u=Wa(e),d=r._getSettings(),m=Object.assign(Object.assign({},d),{emulatorOptions:r._getEmulatorOptions()}),p=`${e}:${n}`;u&&(b0(`https://${p}`),E0("Firestore",!0)),d.host!==Zb&&d.host!==p&&Fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},d),{host:p,ssl:u,emulatorOptions:s});if(!Ns(y,m)&&(r._setSettings(y),s.mockUserToken)){let E,w;if(typeof s.mockUserToken=="string")E=s.mockUserToken,w=Qt.MOCK_USER;else{E=GA(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new he(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Qt(S)}r._authCredentials=new vS(new M0(E,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new so(this.firestore,e,this._query)}}class en{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}}class Mr extends so{constructor(e,n,s){super(e,n,Nm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new ye(e))}withConverter(e){return new Mr(this.firestore,e,this._path)}}function Vs(r,e,...n){if(r=Vt(r),Xb("collection","path",e),r instanceof yh){const s=tt.fromString(e,...n);return z_(s),new Mr(r,null,s)}{if(!(r instanceof en||r instanceof Mr))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return z_(s),new Mr(r.firestore,null,s)}}function Pr(r,e,...n){if(r=Vt(r),arguments.length===1&&(e=j0.newId()),Xb("doc","path",e),r instanceof yh){const s=tt.fromString(e,...n);return L_(s),new en(r,null,new ye(s))}{if(!(r instanceof en||r instanceof Mr))throw new he(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(tt.fromString(e,...n));return L_(s),new en(r.firestore,r instanceof Mr?r.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="AsyncQueue";class G_{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Rb(this,"async_queue_retry"),this.rc=()=>{const s=Bf();s&&ce(H_,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const n=Bf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Bf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new Gi;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!io(e))throw e;ce(H_,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Qi("INTERNAL UNHANDLED ERROR: ",F_(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=n,n}enqueueAfterDelay(e,n,s){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=Gm.createAndSchedule(this,e,n,s,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Ae(47125,{cc:F_(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function F_(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ls extends yh{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new G_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G_(e),this._firestoreClient=void 0,await e}}}function dR(r,e){const n=typeof r=="object"?r:S0(),s=typeof r=="string"?r:qc,o=Am(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=qA("firestore");u&&hR(o,...u)}return o}function $m(r){if(r._terminated)throw new he(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||fR(r),r._firestoreClient}function fR(r){var e,n,s;const o=r._freezeSettings(),u=function(m,p,y,E){return new PS(m,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,$b(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new sR(r._authCredentials,r._appCheckCredentials,r._queue,u,r._componentsProvider&&function(m){const p=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Za(qt.fromBase64String(e))}catch(n){throw new he(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Za(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=/^__.*__$/;class gR{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hl(e,this.data,n,this.fieldTransforms)}}class Jb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Gr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Wb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ic:r})}}class Jm{constructor(e,n,s,o,u,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Jm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Vc(e),o}mc(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:s,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return Zc(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(Wb(this.Ic)&&mR.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class pR{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||fh(e)}bc(e,n,s,o=!1){return new Jm({Ic:e,methodName:n,wc:s,path:Bt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bh(r){const e=r._freezeSettings(),n=fh(r._databaseId);return new pR(r._databaseId,!!e.ignoreUndefinedProperties,n)}function eE(r,e,n,s,o,u={}){const d=r.bc(u.merge||u.mergeFields?2:0,e,n,o);eg("Data must be an object, but it was:",d,s);const m=tE(s,d);let p,y;if(u.merge)p=new vn(d.fieldMask),y=d.fieldTransforms;else if(u.mergeFields){const E=[];for(const w of u.mergeFields){const S=mm(e,w,n);if(!d.contains(S))throw new he(te.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);iE(E,S)||E.push(S)}p=new vn(E),y=d.fieldTransforms.filter(w=>p.covers(w.field))}else p=null,y=d.fieldTransforms;return new gR(new an(m),p,y)}class Eh extends _h{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Eh}}class Wm extends _h{_toFieldTransform(e){return new l1(e.path,new Ml)}isEqual(e){return e instanceof Wm}}function yR(r,e,n,s){const o=r.bc(1,e,n);eg("Data must be an object, but it was:",o,s);const u=[],d=an.empty();Hr(s,(p,y)=>{const E=tg(e,p,n);y=Vt(y);const w=o.mc(E);if(y instanceof Eh)u.push(E);else{const S=Ql(y,w);S!=null&&(u.push(E),d.set(E,S))}});const m=new vn(u);return new Jb(d,m,o.fieldTransforms)}function vR(r,e,n,s,o,u){const d=r.bc(1,e,n),m=[mm(e,s,n)],p=[o];if(u.length%2!=0)throw new he(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(mm(e,u[S])),p.push(u[S+1]);const y=[],E=an.empty();for(let S=m.length-1;S>=0;--S)if(!iE(y,m[S])){const V=m[S];let B=p[S];B=Vt(B);const F=d.mc(V);if(B instanceof Eh)y.push(V);else{const Y=Ql(B,F);Y!=null&&(y.push(V),E.set(V,Y))}}const w=new vn(y);return new Jb(E,w,d.fieldTransforms)}function _R(r,e,n,s=!1){return Ql(n,r.bc(s?4:3,e))}function Ql(r,e){if(nE(r=Vt(r)))return eg("Unsupported field value:",e,r),tE(r,e);if(r instanceof _h)return function(s,o){if(!Wb(o.Ic))throw o.gc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,o){const u=[];let d=0;for(const m of s){let p=Ql(m,o.fc(d));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),d++}return{arrayValue:{values:u}}}(r,e)}return function(s,o){if((s=Vt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return s1(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=xt.fromDate(s);return{timestampValue:Qc(o.serializer,u)}}if(s instanceof xt){const u=new xt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Qc(o.serializer,u)}}if(s instanceof Xm)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Za)return{bytesValue:pb(o.serializer,s._byteString)};if(s instanceof en){const u=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(u))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Mm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Zm)return function(d,m){return{mapValue:{fields:{[F0]:{stringValue:K0},[Hc]:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.gc("VectorValues must only contain numeric values.");return Dm(m.serializer,y)})}}}}}}(s,o);throw o.gc(`Unsupported field value: ${ph(s)}`)}(r,e)}function tE(r,e){const n={};return L0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hr(r,(s,o)=>{const u=Ql(o,e.Ac(s));u!=null&&(n[s]=u)}),{mapValue:{fields:n}}}function nE(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof xt||r instanceof Xm||r instanceof Za||r instanceof en||r instanceof _h||r instanceof Zm)}function eg(r,e,n){if(!nE(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const s=ph(n);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function mm(r,e,n){if((e=Vt(e))instanceof vh)return e._internalPath;if(typeof e=="string")return tg(r,e);throw Zc("Field path arguments must be of type string or ",r,!1,void 0,n)}const bR=new RegExp("[~\\*/\\[\\]]");function tg(r,e,n){if(e.search(bR)>=0)throw Zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new vh(...e.split("."))._internalPath}catch{throw Zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Zc(r,e,n,s,o){const u=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||d)&&(p+=" (found",u&&(p+=` in field ${s}`),d&&(p+=` in document ${o}`),p+=")"),new he(te.INVALID_ARGUMENT,m+r+p)}function iE(r,e){return r.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ER(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ng("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ER extends rE{data(){return super.data()}}function ng(r,e){return typeof e=="string"?tg(r,e):e instanceof vh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new he(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ig{}class AR extends ig{}function rg(r,e,...n){let s=[];e instanceof ig&&s.push(e),s=s.concat(n),function(u){const d=u.filter(p=>p instanceof ag).length,m=u.filter(p=>p instanceof Th).length;if(d>1||d>0&&m>0)throw new he(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const o of s)r=o._apply(r);return r}class Th extends AR{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new Th(e,n,s)}_apply(e){const n=this._parse(e);return sE(e._query,n),new so(e.firestore,e.converter,im(e._query,n))}_parse(e){const n=bh(e.firestore);return function(u,d,m,p,y,E,w){let S;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new he(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Q_(w,E);const B=[];for(const F of w)B.push(K_(p,u,F));S={arrayValue:{values:B}}}else S=K_(p,u,w)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Q_(w,E),S=_R(m,d,w,E==="in"||E==="not-in");return _t.create(y,E,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sg(r,e,n){const s=e,o=ng("where",r);return Th._create(o,s,n)}class ag extends ig{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ag(e,n)}_parse(e){const n=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return n.length===1?n[0]:qn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let d=o;const m=u.getFlattenedFilters();for(const p of m)sE(d,p),d=im(d,p)}(e._query,n),new so(e.firestore,e.converter,im(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function K_(r,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new he(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eb(e)&&n.indexOf("/")!==-1)throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(tt.fromString(n));if(!ye.isDocumentKey(s))throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return o_(r,new ye(s))}if(n instanceof en)return o_(r,n._key);throw new he(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ph(n)}.`)}function Q_(r,e){if(!Array.isArray(r)||r.length===0)throw new he(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sE(r,e){const n=function(o,u){for(const d of o)for(const m of d.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(r.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wR{convertValue(e,n="none"){switch(zr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Hr(e,(o,u)=>{s[o]=this.convertValue(u,n)}),s}convertVectorValue(e){var n,s,o;const u=(o=(s=(n=e.fields)===null||n===void 0?void 0:n[Hc].arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(d=>dt(d.doubleValue));return new Zm(u)}convertGeoPoint(e){return new Xm(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=oh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ol(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=tt.fromString(e);Ge(Tb(s),9688,{name:e});const o=new kl(s.get(1),s.get(3)),u=new ye(s.popFirst(5));return o.isEqual(n)||Qi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(r,e,n){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oE extends rE{constructor(e,n,s,o,u,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ng("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class Vc extends oE{data(e={}){return super.data(e)}}class SR{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Tl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Vc(this._firestore,this._userDataWriter,s.key,s,new Tl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(m=>{const p=new Vc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Tl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const p=new Vc(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Tl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),E=d.indexOf(m.doc.key)),{type:xR(m.type),doc:p,oldIndex:y,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xR(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(r){r=Hn(r,en);const e=Hn(r.firestore,Ls);return lR($m(e),r._key).then(n=>NR(e,r,n))}class lE extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Za(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,n)}}function Ja(r){r=Hn(r,so);const e=Hn(r.firestore,Ls),n=$m(e),s=new lE(e);return TR(r._query),uR(n,r._query).then(o=>new SR(e,s,r,o))}function gm(r,e,n){r=Hn(r,en);const s=Hn(r.firestore,Ls),o=aE(r.converter,e);return Ah(s,[eE(bh(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,kn.none())])}function uE(r,e,n,...s){r=Hn(r,en);const o=Hn(r.firestore,Ls),u=bh(o);let d;return d=typeof(e=Vt(e))=="string"||e instanceof vh?vR(u,"updateDoc",r._key,e,n,s):yR(u,"updateDoc",r._key,e),Ah(o,[d.toMutation(r._key,kn.exists(!0))])}function IR(r){return Ah(Hn(r.firestore,Ls),[new Om(r._key,kn.none())])}function CR(r,e){const n=Hn(r.firestore,Ls),s=Pr(r),o=aE(r.converter,e);return Ah(n,[eE(bh(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,kn.exists(!1))]).then(()=>s)}function Ah(r,e){return function(s,o){const u=new Gi;return s.asyncQueue.enqueueAndForget(async()=>Xx(await oR(s),o,u)),u.promise}($m(r),e)}function NR(r,e,n){const s=n.docs.get(e._key),o=new lE(r);return new oE(r,o,e._key,s,new Tl(n.hasPendingWrites,n.fromCache),e.converter)}function DR(){return new Wm("serverTimestamp")}(function(e,n=!0){(function(o){to=o})(eo),Ga(new Ds("firestore",(s,{instanceIdentifier:o,options:u})=>{const d=s.getProvider("app").getImmediate(),m=new Ls(new _S(s.getProvider("auth-internal")),new TS(d,s.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new he(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(y.options.projectId,E)}(d,o),d);return u=Object.assign({useFetchStreams:n},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),kr($v,Xv,e),kr($v,Xv,"esm2017")})();var OR="firebase",kR="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(OR,kR,"app");function og(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function cE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VR=cE,hE=new zl("auth","Firebase",cE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc=new Em("@firebase/auth");function MR(r,...e){Jc.logLevel<=Me.WARN&&Jc.warn(`Auth (${eo}): ${r}`,...e)}function Mc(r,...e){Jc.logLevel<=Me.ERROR&&Jc.error(`Auth (${eo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(r,...e){throw lg(r,...e)}function hi(r,...e){return lg(r,...e)}function dE(r,e,n){const s=Object.assign(Object.assign({},VR()),{[e]:n});return new zl("auth","Firebase",s).create(e,{appName:r.name})}function Fi(r){return dE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function lg(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return hE.create(r,...e)}function Te(r,e,...n){if(!r)throw lg(e,...n)}function qi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mc(e),new Error(e)}function $i(r,e){r||qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function PR(){return Y_()==="http:"||Y_()==="https:"}function Y_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(PR()||XA()||"connection"in navigator)?navigator.onLine:!0}function UR(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n){this.shortDelay=e,this.longDelay=n,$i(n>e,"Short delay should be less than long delay!"),this.isMobile=QA()||ZA()}get(){return jR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(r,e){$i(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BR=new Yl(3e4,6e4);function Fr(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Kr(r,e,n,s,o={}){return mE(r,o,async()=>{let u={},d={};s&&(e==="GET"?d=s:u={body:JSON.stringify(s)});const m=Bl(Object.assign({key:r.config.apiKey},d)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},u);return $A()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(y.credentials="include"),fE.fetch()(await gE(r,r.config.apiHost,n,m),y)})}async function mE(r,e,n){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},LR),e);try{const o=new HR(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw Rc(r,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rc(r,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Rc(r,"email-already-in-use",d);if(p==="USER_DISABLED")throw Rc(r,"user-disabled",d);const E=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw dE(r,E,y);Gn(r,E)}}catch(o){if(o instanceof Xi)throw o;Gn(r,"network-request-failed",{message:String(o)})}}async function $l(r,e,n,s,o={}){const u=await Kr(r,e,n,s,o);return"mfaPendingCredential"in u&&Gn(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function gE(r,e,n,s){const o=`${e}${n}?${s}`,u=r,d=u.config.emulator?ug(r.config,o):`${r.config.apiScheme}://${o}`;return zR.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(d).toString():d}function qR(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(hi(this.auth,"network-request-failed")),BR.get())})}}function Rc(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=hi(r,e,s);return o.customData._tokenResponse=n,o}function $_(r){return r!==void 0&&r.enterprise!==void 0}class GR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return qR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function FR(r,e){return Kr(r,"GET","/v2/recaptchaConfig",Fr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(r,e){return Kr(r,"POST","/v1/accounts:delete",e)}async function Wc(r,e){return Kr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function QR(r,e=!1){const n=Vt(r),s=await n.getIdToken(e),o=cg(s);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u==null?void 0:u.sign_in_provider;return{claims:o,token:s,authTime:Cl(Hf(o.auth_time)),issuedAtTime:Cl(Hf(o.iat)),expirationTime:Cl(Hf(o.exp)),signInProvider:d||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Hf(r){return Number(r)*1e3}function cg(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return Mc("JWT malformed, contained fewer than 3 sections"),null;try{const o=p0(n);return o?JSON.parse(o):(Mc("Failed to decode base64 JWT payload"),null)}catch(o){return Mc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function X_(r){const e=cg(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ul(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Xi&&YR(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function YR({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cl(this.lastLoginAt),this.creationTime=Cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eh(r){var e;const n=r.auth,s=await r.getIdToken(),o=await Ul(r,Wc(n,{idToken:s}));Te(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];r._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?pE(u.providerUserInfo):[],m=ZR(r.providerData,d),p=r.isAnonymous,y=!(r.email&&u.passwordHash)&&!(m!=null&&m.length),E=p?y:!1,w={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new ym(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(r,w)}async function XR(r){const e=Vt(r);await eh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZR(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function pE(r){return r.map(e=>{var{providerId:n}=e,s=og(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(r,e){const n=await mE(r,{},async()=>{const s=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,d=await gE(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return r.emulatorConfig&&Wa(r.emulatorConfig.host)&&(p.credentials="include"),fE.fetch()(d,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WR(r,e){return Kr(r,"POST","/v2/accounts:revokeToken",Fr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=X_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await JR(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,d=new Ba;return s&&(Te(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Bn{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,u=og(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $R(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new ym(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Ul(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return QR(this,e)}reload(){return XR(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await eh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(On(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await Ul(this,KR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,u,d,m,p,y,E;const w=(s=n.displayName)!==null&&s!==void 0?s:void 0,S=(o=n.email)!==null&&o!==void 0?o:void 0,V=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,B=(d=n.photoURL)!==null&&d!==void 0?d:void 0,F=(m=n.tenantId)!==null&&m!==void 0?m:void 0,Y=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,me=(y=n.createdAt)!==null&&y!==void 0?y:void 0,ue=(E=n.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:oe,emailVerified:Q,isAnonymous:X,providerData:de,stsTokenManager:R}=n;Te(oe&&R,e,"internal-error");const x=Ba.fromJSON(this.name,R);Te(typeof oe=="string",e,"internal-error"),Sr(w,e.name),Sr(S,e.name),Te(typeof Q=="boolean",e,"internal-error"),Te(typeof X=="boolean",e,"internal-error"),Sr(V,e.name),Sr(B,e.name),Sr(F,e.name),Sr(Y,e.name),Sr(me,e.name),Sr(ue,e.name);const I=new Bn({uid:oe,auth:e,email:S,emailVerified:Q,displayName:w,isAnonymous:X,photoURL:B,phoneNumber:V,tenantId:F,stsTokenManager:x,createdAt:me,lastLoginAt:ue});return de&&Array.isArray(de)&&(I.providerData=de.map(O=>Object.assign({},O))),Y&&(I._redirectEventId=Y),I}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ba;o.updateFromServerResponse(n);const u=new Bn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await eh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?pE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new Ba;m.updateFromIdToken(s);const p=new Bn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ym(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=new Map;function Hi(r){$i(r instanceof Function,"Expected a class definition");let e=Z_.get(r);return e?($i(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Z_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yE.type="NONE";const J_=yE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(r,e,n){return`firebase:${r}:${e}:${n}`}class qa{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Pc(this.userKey,o.apiKey,u),this.fullPersistenceKey=Pc("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wc(this.auth,{idToken:e}).catch(()=>{});return n?Bn._fromGetAccountInfoResponse(this.auth,n,e):null}return Bn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new qa(Hi(J_),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Hi(J_);const d=Pc(s,e.config.apiKey,e.name);let m=null;for(const y of n)try{const E=await y._get(d);if(E){let w;if(typeof E=="string"){const S=await Wc(e,{idToken:E}).catch(()=>{});if(!S)break;w=await Bn._fromGetAccountInfoResponse(e,S,E)}else w=Bn._fromJSON(e,E);y!==u&&(m=w),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new qa(u,e,s):(u=p[0],m&&await u._set(d,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(d)}catch{}})),new qa(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(EE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AE(e))return"Blackberry";if(wE(e))return"Webos";if(_E(e))return"Safari";if((e.includes("chrome/")||bE(e))&&!e.includes("edge/"))return"Chrome";if(TE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function vE(r=$t()){return/firefox\//i.test(r)}function _E(r=$t()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bE(r=$t()){return/crios\//i.test(r)}function EE(r=$t()){return/iemobile/i.test(r)}function TE(r=$t()){return/android/i.test(r)}function AE(r=$t()){return/blackberry/i.test(r)}function wE(r=$t()){return/webos/i.test(r)}function hg(r=$t()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function eI(r=$t()){var e;return hg(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tI(){return JA()&&document.documentMode===10}function SE(r=$t()){return hg(r)||TE(r)||wE(r)||AE(r)||/windows phone/i.test(r)||EE(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(r,e=[]){let n;switch(r){case"Browser":n=W_($t());break;case"Worker":n=`${W_($t())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((d,m)=>{try{const p=e(u);d(p)}catch(p){m(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(r,e={}){return Kr(r,"GET","/v2/passwordPolicy",Fr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=6;class sI{constructor(e){var n,s,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:rI,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,u,d,m;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(m=p.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e0(this),this.idTokenSubscription=new e0(this),this.beforeStateQueue=new nI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Hi(n)),this._initializationPromise=this.queue(async()=>{var s,o,u;if(!this._deleted&&(this.persistenceManager=await qa.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wc(this,{idToken:e}),s=await Bn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(On(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,m=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===m)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await eh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(On(this.app))return Promise.reject(Fi(this));const n=e?Vt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return On(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return On(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await iI(this),n=new sI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zl("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await WR(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Hi(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[Hi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(On(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&MR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function zs(r){return Vt(r)}class e0{constructor(e){this.auth=e,this.observer=null,this.addObserver=aw(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oI(r){wh=r}function RE(r){return wh.loadJS(r)}function lI(){return wh.recaptchaEnterpriseScript}function uI(){return wh.gapiScript}function cI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class hI{constructor(){this.enterprise=new dI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const fI="recaptcha-enterprise",IE="NO_RECAPTCHA";class mI{constructor(e){this.type=fI,this.auth=zs(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{FR(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new GR(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,d(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,d,m){const p=window.grecaptcha;$_(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{d(y)}).catch(()=>{d(IE)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new hI().execute("siteKey",{action:"verify"}):new Promise((u,d)=>{s(this.auth).then(m=>{if(!n&&$_(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=lI();p.length!==0&&(p+=m),RE(p).then(()=>{o(m,u,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function t0(r,e,n,s=!1,o=!1){const u=new mI(r);let d;if(o)d=IE;else try{d=await u.verify(n)}catch{d=await u.verify(n,!0)}const m=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function vm(r,e,n,s,o){var u;if(!((u=r._getRecaptchaConfig())===null||u===void 0)&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const d=await t0(r,e,n,n==="getOobCode");return s(r,d)}else return s(r,e).catch(async d=>{if(d.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await t0(r,e,n,n==="getOobCode");return s(r,m)}else return Promise.reject(d)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(r,e){const n=Am(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ns(u,e??{}))return o;Gn(o,"already-initialized")}return n.initialize({options:e})}function pI(r,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(Hi);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function yI(r,e,n){const s=zs(r);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=CE(e),{host:d,port:m}=vI(e),p=m===null?"":`:${m}`,y={url:`${u}//${d}${p}/`},E=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(Ns(y,s.config.emulator)&&Ns(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,Wa(d)?(b0(`${u}//${d}${p}`),E0("Auth",!0)):_I()}function CE(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function vI(r){const e=CE(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:n0(s.substr(u.length+1))}}else{const[u,d]=s.split(":");return{host:u,port:n0(d)}}}function n0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function _I(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,n){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}}async function bI(r,e){return Kr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(r,e){return $l(r,"POST","/v1/accounts:signInWithPassword",Fr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(r,e){return $l(r,"POST","/v1/accounts:signInWithEmailLink",Fr(r,e))}async function AI(r,e){return $l(r,"POST","/v1/accounts:signInWithEmailLink",Fr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends dg{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Ll(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Ll(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,n,"signInWithPassword",EI);case"emailLink":return TI(e,{email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vm(e,s,"signUpPassword",bI);case"emailLink":return AI(e,{idToken:n,email:this._email,oobCode:this._password});default:Gn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(r,e){return $l(r,"POST","/v1/accounts:signInWithIdp",Fr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="http://localhost";class Ms extends dg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Gn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,u=og(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new Ms(s,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return Ha(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,Ha(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ha(e,n)}buildRequest(){const e={requestUri:wI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function xI(r){const e=yl(vl(r)).link,n=e?yl(vl(e)).deep_link_id:null,s=yl(vl(r)).deep_link_id;return(s?yl(vl(s)).link:null)||s||n||e||r}class fg{constructor(e){var n,s,o,u,d,m;const p=yl(vl(e)),y=(n=p.apiKey)!==null&&n!==void 0?n:null,E=(s=p.oobCode)!==null&&s!==void 0?s:null,w=SI((o=p.mode)!==null&&o!==void 0?o:null);Te(y&&E&&w,"argument-error"),this.apiKey=y,this.operation=w,this.code=E,this.continueUrl=(u=p.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=p.lang)!==null&&d!==void 0?d:null,this.tenantId=(m=p.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const n=xI(e);try{return new fg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.providerId=ao.PROVIDER_ID}static credential(e,n){return Ll._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=fg.parseLink(n);return Te(s,"argument-error"),Ll._fromEmailAndCode(e,s.code,s.tenantId)}}ao.PROVIDER_ID="password";ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl extends NE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Xl{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Xl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Rr.credential(n,s)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Xl{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.GITHUB_SIGN_IN_METHOD="github.com";Ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Xl{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Cr.credential(n,s)}catch{return null}}}Cr.TWITTER_SIGN_IN_METHOD="twitter.com";Cr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RI(r,e){return $l(r,"POST","/v1/accounts:signUp",Fr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Bn._fromIdTokenResponse(e,s,o),d=i0(s);return new Ps({user:u,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=i0(s);return new Ps({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function i0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th extends Xi{constructor(e,n,s,o){var u;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,th.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new th(e,n,s,o)}}function DE(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?th._fromErrorAndOperation(r,u,e,s):u})}async function II(r,e,n=!1){const s=await Ul(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Ps._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(r,e,n=!1){const{auth:s}=r;if(On(s.app))return Promise.reject(Fi(s));const o="reauthenticate";try{const u=await Ul(r,DE(s,o,e,r),n);Te(u.idToken,s,"internal-error");const d=cg(u.idToken);Te(d,s,"internal-error");const{sub:m}=d;return Te(r.uid===m,s,"user-mismatch"),Ps._forOperation(r,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Gn(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(r,e,n=!1){if(On(r.app))return Promise.reject(Fi(r));const s="signIn",o=await DE(r,s,e),u=await Ps._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function NI(r,e){return OE(zs(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(r){const e=zs(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function DI(r,e,n){if(On(r.app))return Promise.reject(Fi(r));const s=zs(r),d=await vm(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RI).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&kE(r),p}),m=await Ps._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function OI(r,e,n){return On(r.app)?Promise.reject(Fi(r)):NI(Vt(r),ao.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&kE(r),s})}function kI(r,e,n,s){return Vt(r).onIdTokenChanged(e,n,s)}function VI(r,e,n){return Vt(r).beforeAuthStateChanged(e,n)}function MI(r,e,n,s){return Vt(r).onAuthStateChanged(e,n,s)}function PI(r){return Vt(r).signOut()}const nh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(nh,"1"),this.storage.removeItem(nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI=1e3,UI=10;class ME extends VE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},u=this.storage.getItem(s);tI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,UI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},jI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ME.type="LOCAL";const LI=ME;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE extends VE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}PE.type="SESSION";const jE=PE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Sh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(n.origin,u)),p=await zI(m);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mg(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,p)=>{const y=mg("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(E),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function qI(r){di().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function HI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function FI(){return UE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firebaseLocalStorageDb",KI=1,ih="firebaseLocalStorage",zE="fbase_key";class Zl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xh(r,e){return r.transaction([ih],e?"readwrite":"readonly").objectStore(ih)}function QI(){const r=indexedDB.deleteDatabase(LE);return new Zl(r).toPromise()}function _m(){const r=indexedDB.open(LE,KI);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(ih,{keyPath:zE})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(ih)?e(s):(s.close(),await QI(),e(await _m()))})})}async function r0(r,e,n){const s=xh(r,!0).put({[zE]:e,value:n});return new Zl(s).toPromise()}async function YI(r,e){const n=xh(r,!1).get(e),s=await new Zl(n).toPromise();return s===void 0?null:s.value}function s0(r,e){const n=xh(r,!0).delete(e);return new Zl(n).toPromise()}const $I=800,XI=3;class BE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _m(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>XI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return UE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sh._getInstance(FI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await HI(),!this.activeServiceWorker)return;this.sender=new BI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _m();return await r0(e,nh,"1"),await s0(e,nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>r0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>YI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>s0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=xh(o,!1).getAll();return new Zl(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$I)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BE.type="LOCAL";const ZI=BE;new Yl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(r,e){return e?Hi(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg extends dg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ha(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ha(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function WI(r){return OE(r.auth,new gg(r),r.bypassAuthState)}function eC(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),CI(n,new gg(r),r.bypassAuthState)}async function tC(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),II(n,new gg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WI;case"linkViaPopup":case"linkViaRedirect":return tC;case"reauthViaPopup":case"reauthViaRedirect":return eC;default:Gn(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=new Yl(2e3,1e4);class Ua extends qE{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=mg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nC.get())};e()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC="pendingRedirect",jc=new Map;class rC extends qE{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=jc.get(this.auth._key());if(!e){try{const s=await sC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}jc.set(this.auth._key(),e)}return this.bypassAuthState||jc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sC(r,e){const n=lC(e),s=oC(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function aC(r,e){jc.set(r._key(),e)}function oC(r){return Hi(r._redirectPersistence)}function lC(r){return Pc(iC,r.config.apiKey,r.name)}async function uC(r,e,n=!1){if(On(r.app))return Promise.reject(Fi(r));const s=zs(r),o=JI(s,e),d=await new rC(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=10*60*1e3;class hC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!HE(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError(hi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cC&&this.cachedEventUids.clear(),this.cachedEventUids.has(a0(e))}saveEventToCache(e){this.cachedEventUids.add(a0(e)),this.lastProcessedEventTime=Date.now()}}function a0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function HE({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HE(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(r,e={}){return Kr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gC=/^https?/;async function pC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await fC(r);for(const n of e)try{if(yC(n))return}catch{}Gn(r,"unauthorized-domain")}function yC(r){const e=pm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!gC.test(n))return!1;if(mC.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=new Yl(3e4,6e4);function o0(){const r=di().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function _C(r){return new Promise((e,n)=>{var s,o,u;function d(){o0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o0(),n(hi(r,"network-request-failed"))},timeout:vC.get()})}if(!((o=(s=di().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=di().gapi)===null||u===void 0)&&u.load)d();else{const m=cI("iframefcb");return di()[m]=()=>{gapi.load?d():n(hi(r,"network-request-failed"))},RE(`${uI()}?onload=${m}`).catch(p=>n(p))}}).catch(e=>{throw Uc=null,e})}let Uc=null;function bC(r){return Uc=Uc||_C(r),Uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Yl(5e3,15e3),TC="__/auth/iframe",AC="emulator/auth/iframe",wC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xC(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?ug(e,AC):`https://${r.config.authDomain}/${TC}`,s={apiKey:e.apiKey,appName:r.name,v:eo},o=SC.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Bl(s).slice(1)}`}async function RC(r){const e=await bC(r),n=di().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:xC(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wC,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const d=hi(r,"network-request-failed"),m=di().setTimeout(()=>{u(d)},EC.get());function p(){di().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CC=500,NC=600,DC="_blank",OC="http://localhost";class l0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kC(r,e,n,s=CC,o=NC){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p=Object.assign(Object.assign({},IC),{width:s.toString(),height:o.toString(),top:u,left:d}),y=$t().toLowerCase();n&&(m=bE(y)?DC:n),vE(y)&&(e=e||OC,p.scrollbars="yes");const E=Object.entries(p).reduce((S,[V,B])=>`${S}${V}=${B},`,"");if(eI(y)&&m!=="_self")return VC(e||"",m),new l0(null);const w=window.open(e||"",m,E);Te(w,r,"popup-blocked");try{w.focus()}catch{}return new l0(w)}function VC(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="__/auth/handler",PC="emulator/auth/handler",jC=encodeURIComponent("fac");async function u0(r,e,n,s,o,u){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:eo,eventId:o};if(e instanceof NE){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",sw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,w]of Object.entries({}))d[E]=w}if(e instanceof Xl){const E=e.getScopes().filter(w=>w!=="");E.length>0&&(d.scopes=E.join(","))}r.tenantId&&(d.tid=r.tenantId);const m=d;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const p=await r._getAppCheckToken(),y=p?`#${jC}=${encodeURIComponent(p)}`:"";return`${UC(r)}?${Bl(m).slice(1)}${y}`}function UC({config:r}){return r.emulator?ug(r,PC):`https://${r.authDomain}/${MC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="webStorageSupport";class LC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jE,this._completeRedirectFn=uC,this._overrideRedirectResult=aC}async _openPopup(e,n,s,o){var u;$i((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await u0(e,n,s,pm(),o);return kC(e,d,mg())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await u0(e,n,s,pm(),o);return qI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):($i(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await RC(e),s=new hC(e);return n.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gf,{type:Gf},o=>{var u;const d=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Gf];d!==void 0&&n(!!d),Gn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SE()||_E()||hg()}}const zC=LC;var c0="@firebase/auth",h0="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HC(r){Ga(new Ds("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;Te(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xE(r)},y=new aI(s,o,u,p);return pI(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Ga(new Ds("auth-internal",e=>{const n=zs(e.getProvider("auth").getImmediate());return(s=>new BC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(c0,h0,qC(r)),kr(c0,h0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=5*60,FC=_0("authIdTokenMaxAge")||GC;let d0=null;const KC=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>FC)return;const o=n==null?void 0:n.token;d0!==o&&(d0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function QC(r=S0()){const e=Am(r,"auth");if(e.isInitialized())return e.getImmediate();const n=gI(r,{popupRedirectResolver:zC,persistence:[ZI,LI,jE]}),s=_0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const d=KC(u.toString());VI(n,d,()=>d(n.currentUser)),kI(n,m=>d(m))}}const o=y0("auth");return o&&yI(n,`http://${o}`),n}function YC(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}oI({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=hi("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",YC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HC("Browser");const $C={apiKey:"AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",authDomain:"summery-23833.firebaseapp.com",projectId:"summery-23833",storageBucket:"summery-23833.firebasestorage.app",messagingSenderId:"123456789",appId:"1:123456789:web:abcdefghijklmnop"},GE=w0($C),on=dR(GE),Ic=QC(GE),FE=be.createContext(),KE=()=>{const r=be.useContext(FE);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},XC=({children:r})=>{const[e,n]=be.useState(null),[s,o]=be.useState(!0);be.useEffect(()=>MI(Ic,E=>{n(E),o(!1)}),[]);const p={user:e,login:async(y,E)=>{try{return(await OI(Ic,y,E)).user}catch(w){throw w}},register:async(y,E)=>{try{return(await DI(Ic,y,E)).user}catch(w){throw w}},logout:async()=>{try{await PI(Ic)}catch(y){throw y}},loading:s};return v.jsx(FE.Provider,{value:p,children:r})},QE="https://api.github.com",ZC="harukaze1216",JC="youtube-bgm-research";function WC(){return localStorage.getItem("github_token")||null}function YE(r){return{Authorization:`token ${r}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"}}async function e2(r){const e=WC();if(!e)throw new Error("GitHub Personal Access Tokenが設定されていません。設定ページでトークンを設定してください。");try{const n=t2(r.type,r.severity),s=n2(r),o=await fetch(`${QE}/repos/${ZC}/${JC}/issues`,{method:"POST",headers:YE(e),body:JSON.stringify({title:r.title,body:s,labels:n})});if(!o.ok){const d=await o.json();throw new Error(`GitHub API Error: ${d.message||o.statusText}`)}const u=await o.json();return{success:!0,issue:{number:u.number,title:u.title,url:u.html_url,state:u.state,createdAt:u.created_at}}}catch(n){throw console.error("GitHub Issue作成エラー:",n),n}}function t2(r,e){const n=[];switch(r){case"bug":n.push("bug");break;case"feature":n.push("enhancement");break;case"question":n.push("question");break;default:n.push("feedback")}switch(e){case"critical":n.push("priority: critical");break;case"high":n.push("priority: high");break;case"medium":n.push("priority: medium");break;case"low":n.push("priority: low");break}return n.push("user-reported"),n}function n2(r){const n=new Date().toLocaleString("ja-JP",{timeZone:"Asia/Tokyo",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return`## 概要
${r.body}

## Issue詳細

**種別:** ${i2(r.type)}  
**重要度:** ${r2(r.severity)}  
**投稿日時:** ${n}

## 環境情報

**ブラウザ:** ${r.browserInfo||"Unknown"}  
**User Agent:** ${r.userAgent||"Unknown"}  
**URL:** ${window.location.href}

## 再現手順

${r.reproductionSteps||"未記入"}

## 期待する動作

${r.expectedBehavior||"未記入"}

## 実際の動作

${r.actualBehavior||"未記入"}

## 追加情報

${r.additionalInfo||"特になし"}

---
*この Issue は YouTube BGM チャンネル分析アプリから自動投稿されました*`}function i2(r){switch(r){case"bug":return"🐛 バグ報告";case"feature":return"✨ 機能要望";case"question":return"❓ 質問・サポート";default:return"💬 フィードバック"}}function r2(r){switch(r){case"critical":return"🚨 緊急";case"high":return"🔴 高";case"medium":return"🟡 中";case"low":return"🟢 低";default:return"🔵 通常"}}function s2(){const r=navigator.userAgent;let e="Unknown",n="Unknown";if(r.includes("Chrome")){e="Chrome";const s=r.match(/Chrome\/([0-9.]+)/);n=s?s[1]:"Unknown"}else if(r.includes("Firefox")){e="Firefox";const s=r.match(/Firefox\/([0-9.]+)/);n=s?s[1]:"Unknown"}else if(r.includes("Safari")){e="Safari";const s=r.match(/Version\/([0-9.]+)/);n=s?s[1]:"Unknown"}else if(r.includes("Edge")){e="Edge";const s=r.match(/Edge\/([0-9.]+)/);n=s?s[1]:"Unknown"}return`${e} ${n}`}function f0(r){return r&&r.trim()?(localStorage.setItem("github_token",r.trim()),!0):(localStorage.removeItem("github_token"),!1)}function $E(){const r=localStorage.getItem("github_token");return r&&r.trim().length>0}async function a2(r){try{return(await fetch(`${QE}/user`,{headers:YE(r)})).ok}catch(e){return console.error("GitHub Token validation error:",e),!1}}const o2=({onClose:r})=>{const[e,n]=be.useState({title:"",body:"",type:"bug",severity:"medium",reproductionSteps:"",expectedBehavior:"",actualBehavior:"",additionalInfo:""}),[s,o]=be.useState(!1),[u,d]=be.useState(null),[m,p]=be.useState(!1),y=(V,B)=>{n(F=>({...F,[V]:B}))},E=async V=>{if(V.preventDefault(),!e.title.trim()){alert("タイトルを入力してください");return}if(!e.body.trim()){alert("内容を入力してください");return}if(!$E()){alert("GitHub Personal Access Tokenが設定されていません。設定ページでトークンを設定してください。");return}o(!0),d(null);try{const B={...e,browserInfo:s2(),userAgent:navigator.userAgent},F=await e2(B);d({success:!0,message:"Issueが正常に作成されました！",issue:F.issue}),n({title:"",body:"",type:"bug",severity:"medium",reproductionSteps:"",expectedBehavior:"",actualBehavior:"",additionalInfo:""})}catch(B){console.error("Issue作成エラー:",B),d({success:!1,message:`エラーが発生しました: ${B.message}`})}finally{o(!1)}},w=[{value:"bug",label:"🐛 バグ報告",description:"予期しない動作や不具合"},{value:"feature",label:"✨ 機能要望",description:"新機能や改善の提案"},{value:"question",label:"❓ 質問・サポート",description:"使い方やその他の質問"}],S=[{value:"low",label:"🟢 低",description:"軽微な問題"},{value:"medium",label:"🟡 中",description:"通常の問題"},{value:"high",label:"🔴 高",description:"重要な問題"},{value:"critical",label:"🚨 緊急",description:"アプリが使用不可"}];return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 p-6",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"🐛 不具合・要望を報告"}),v.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:"×"})]}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"報告はGitHub Issuesに自動投稿されます"})]}),v.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"種別"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:w.map(V=>v.jsxs("label",{className:`cursor-pointer p-3 rounded-lg border-2 transition-colors ${e.type===V.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[v.jsx("input",{type:"radio",name:"type",value:V.value,checked:e.type===V.value,onChange:B=>y("type",B.target.value),className:"sr-only"}),v.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:V.label}),v.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:V.description})]},V.value))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"重要度"}),v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:S.map(V=>v.jsxs("label",{className:`cursor-pointer p-2 rounded-lg border-2 transition-colors ${e.severity===V.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[v.jsx("input",{type:"radio",name:"severity",value:V.value,checked:e.severity===V.value,onChange:B=>y("severity",B.target.value),className:"sr-only"}),v.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:V.label}),v.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:V.description})]},V.value))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"タイトル *"}),v.jsx("input",{type:"text",value:e.title,onChange:V=>y("title",V.target.value),className:"input-field",placeholder:"問題や要望を簡潔に記述してください",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"内容 *"}),v.jsx("textarea",{value:e.body,onChange:V=>y("body",V.target.value),className:"input-field h-32 resize-none",placeholder:"問題の詳細や要望内容を具体的に記述してください",required:!0})]}),v.jsx("div",{children:v.jsx("button",{type:"button",onClick:()=>p(!m),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium",children:m?"▼ 詳細項目を非表示":"▶ 詳細項目を表示（任意）"})}),m&&v.jsxs("div",{className:"space-y-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"再現手順"}),v.jsx("textarea",{value:e.reproductionSteps,onChange:V=>y("reproductionSteps",V.target.value),className:"input-field h-24 resize-none",placeholder:`1. 〜をクリック
2. 〜を入力
3. 問題が発生`})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"期待する動作"}),v.jsx("textarea",{value:e.expectedBehavior,onChange:V=>y("expectedBehavior",V.target.value),className:"input-field h-20 resize-none",placeholder:"本来どうなるべきかを記述してください"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"実際の動作"}),v.jsx("textarea",{value:e.actualBehavior,onChange:V=>y("actualBehavior",V.target.value),className:"input-field h-20 resize-none",placeholder:"実際に何が起こるかを記述してください"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"追加情報"}),v.jsx("textarea",{value:e.additionalInfo,onChange:V=>y("additionalInfo",V.target.value),className:"input-field h-20 resize-none",placeholder:"スクリーンショットのURL、関連情報など"})]})]}),u&&v.jsxs("div",{className:`p-4 rounded-lg ${u.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[v.jsx("div",{className:"font-medium mb-2",children:u.success?"✅ 成功":"❌ エラー"}),v.jsx("div",{className:"text-sm mb-2",children:u.message}),u.success&&u.issue&&v.jsx("div",{className:"text-sm",children:v.jsxs("a",{href:u.issue.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:["Issue #",u.issue.number," を確認する →"]})})]}),v.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[v.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"キャンセル"}),v.jsx("button",{type:"submit",disabled:s||!e.title.trim()||!e.body.trim(),className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:s?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"投稿中..."]}):v.jsx(v.Fragment,{children:"📤 投稿する"})})]})]})]})})},l2=({currentView:r,onViewChange:e})=>{const{user:n,logout:s}=KE(),[o,u]=be.useState(!1),[d,m]=be.useState(!1);be.useEffect(()=>{const E=localStorage.getItem("theme"),w=window.matchMedia("(prefers-color-scheme: dark)").matches;E==="dark"||!E&&w?(u(!0),document.documentElement.classList.add("dark")):(u(!1),document.documentElement.classList.remove("dark"))},[]);const p=()=>{const E=!o;u(E),E?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},y=[{id:"channels",label:"チャンネル一覧",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"history",label:"履歴",icon:"📋"},{id:"settings",label:"設定",icon:"⚙️"}];return v.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors",children:[v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex justify-between items-center h-16",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mr-8",children:"🎵 YouTube BGMチャンネル分析"}),v.jsx("nav",{className:"flex space-x-1",children:y.map(E=>v.jsxs("button",{onClick:()=>e(E.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${r===E.id?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[v.jsx("span",{className:"mr-2",children:E.icon}),E.label]},E.id))})]}),v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"👤 認証無効モード"}),v.jsx("button",{onClick:()=>m(!0),className:"px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"不具合・要望を報告",children:"🐛 フィードバック"}),v.jsx("button",{onClick:p,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"ダークモード切り替え",children:o?"☀️":"🌙"})]})]})}),d&&v.jsx(o2,{onClose:()=>m(!1)})]})},u2=({onAddChannel:r})=>{const[e,n]=be.useState(""),[s,o]=be.useState(!1),u=async d=>{if(d.preventDefault(),!!e.trim()){o(!0);try{await r(e.trim()),n("")}catch(m){console.error("チャンネル追加エラー:",m)}finally{o(!1)}}};return v.jsxs("div",{className:"card mb-8",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"チャンネル検索・追加"}),v.jsxs("form",{onSubmit:u,className:"flex gap-4",children:[v.jsx("input",{type:"text",value:e,onChange:d=>n(d.target.value),placeholder:"チャンネルURL または チャンネルID を入力",className:"input-field flex-1",disabled:s}),v.jsx("button",{type:"submit",disabled:s||!e.trim(),className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:s?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"分析中..."]}):v.jsx(v.Fragment,{children:"📊 分析追加"})})]})]})},c2=({filters:r,onFiltersChange:e})=>{const n=u=>{e({...r,sortBy:u})},s=u=>{e({...r,filterBy:u})},o=u=>{e({...r,search:u})};return v.jsx("div",{className:"card mb-8",children:v.jsxs("div",{className:"flex flex-wrap gap-6 items-center",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"並び替え:"}),v.jsxs("select",{value:r.sortBy,onChange:u=>n(u.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[v.jsx("option",{value:"growth_rate",children:"成長率順"}),v.jsx("option",{value:"subscribers",children:"登録者数順"}),v.jsx("option",{value:"views",children:"再生回数順"}),v.jsx("option",{value:"recent_videos",children:"最新動画数順"}),v.jsx("option",{value:"added_date",children:"追加日順"})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"フィルター:"}),v.jsxs("select",{value:r.filterBy,onChange:u=>s(u.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[v.jsx("option",{value:"unset",children:"未仕分け"}),v.jsx("option",{value:"all",children:"全て"}),v.jsx("option",{value:"tracking",children:"トラッキング中"}),v.jsx("option",{value:"non-tracking",children:"対象外"}),v.jsx("option",{value:"rejected",children:"除外済み"}),v.jsx("option",{value:"growing",children:"成長中"}),v.jsx("option",{value:"large",children:"大規模"}),v.jsx("option",{value:"small",children:"小規模"})]})]}),v.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"検索:"}),v.jsx("input",{type:"text",value:r.search,onChange:u=>o(u.target.value),placeholder:"チャンネル名検索...",className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent flex-1 min-w-0"})]})]})})},h2=({channels:r})=>{const e=r.length,n=r.length>0?Math.round(r.reduce((o,u)=>o+(u.growthRate||0),0)/r.length):0,s=r.length>0?r.reduce((o,u)=>(u.growthRate||0)>(o.growthRate||0)?u:o,r[0]):null;return v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[v.jsxs("div",{className:"stat-card",children:[v.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:e}),v.jsx("div",{className:"text-sm text-gray-600",children:"追跡チャンネル数"})]}),v.jsxs("div",{className:"stat-card",children:[v.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:[n,"%"]}),v.jsx("div",{className:"text-sm text-gray-600",children:"平均成長率"})]}),v.jsxs("div",{className:"stat-card",children:[v.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1 truncate",children:s?s.channelTitle:"-"}),v.jsx("div",{className:"text-sm text-gray-600",children:"トップパフォーマー"})]})]})};function d2(r){const e=r.trim(),n=[/youtube\.com\/channel\/([UC][a-zA-Z0-9_-]{22})/,/youtube\.com\/c\/([a-zA-Z0-9_-]+)/,/youtube\.com\/user\/([a-zA-Z0-9_-]+)/,/youtube\.com\/@([a-zA-Z0-9_-]+)/,/^(UC[a-zA-Z0-9_-]{22})$/];for(const s of n){const o=e.match(s);if(o)return o[1]}return e}async function f2(r){var e,n,s,o,u,d,m;try{const p="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",y="https://www.googleapis.com/youtube/v3/channels",E=new URLSearchParams({key:p,id:r,part:"snippet,statistics,contentDetails"}),w=await fetch(`${y}?${E}`),S=await w.json();if(!w.ok)throw new Error(((e=S.error)==null?void 0:e.message)||"API呼び出しエラー");if(!S.items||S.items.length===0)throw new Error("チャンネルが見つかりません");const V=S.items[0],B=V.snippet,F=V.statistics;return{channelId:V.id,channelTitle:B.title,description:B.description,thumbnailUrl:((s=(n=B.thumbnails)==null?void 0:n.high)==null?void 0:s.url)||((u=(o=B.thumbnails)==null?void 0:o.default)==null?void 0:u.url),channelUrl:`https://www.youtube.com/channel/${V.id}`,subscriberCount:parseInt(F.subscriberCount)||0,videoCount:parseInt(F.videoCount)||0,totalViews:parseInt(F.viewCount)||0,publishedAt:B.publishedAt,uploadsPlaylistId:(m=(d=V.contentDetails)==null?void 0:d.relatedPlaylists)==null?void 0:m.uploads}}catch(p){throw console.error("チャンネル情報取得エラー:",p),p}}async function m2(r){var e;try{const n="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",s="https://www.googleapis.com/youtube/v3/playlistItems";let o=null,u="",d=0;const m=10;console.log(`📹 最初の動画を検索中: ${r}`);do{const p=new URLSearchParams({key:n,playlistId:r,part:"snippet",maxResults:50});u&&p.append("pageToken",u);const y=await fetch(`${s}?${p}`),E=await y.json();if(!y.ok)throw new Error(((e=E.error)==null?void 0:e.message)||"API呼び出しエラー");if(E.items&&E.items.length>0){for(const w of E.items){const S=new Date(w.snippet.publishedAt);(!o||S<new Date(o.publishedAt))&&(o={title:w.snippet.title,publishedAt:w.snippet.publishedAt,videoId:w.snippet.resourceId.videoId})}console.log(`   ページ ${d+1}: ${E.items.length}本の動画をチェック`),console.log(`   現在の最古動画: ${o==null?void 0:o.title} (${o==null?void 0:o.publishedAt})`)}u=E.nextPageToken,d++,await new Promise(w=>setTimeout(w,100))}while(u&&d<m);return console.log(`✅ 最初の動画検索完了: ${(o==null?void 0:o.title)||"なし"}`),o}catch(n){return console.error("最初の動画取得エラー:",n),null}}async function g2(r){try{const e=Vs(on,"bgm_channels"),n=rg(e,sg("channelId","==",r));return!(await Ja(n)).empty}catch(e){return console.error("チャンネル存在チェックエラー:",e),!1}}function p2(r,e){const n=["BGM","instrumental","background music","ambient","lo-fi","lofi","chill","relaxing","study music","meditation","sleep music","インスト","インストゥルメンタル","ヒーリング","リラックス","作業用","勉強用","睡眠用","瞑想","アンビエント"],s=["lyrics","歌詞","vocal","sing","singing","song","rap","talk","podcast","ボーカル","歌","歌い手","トーク","ラップ"],o=`${r} ${e}`.toLowerCase();for(const u of s)if(o.includes(u.toLowerCase()))return!1;for(const u of n)if(o.includes(u.toLowerCase()))return!0;return!1}async function y2(r){var e,n,s,o,u,d,m,p;try{if(!r)return console.error("uploadsPlaylistId is required"),null;const y="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",E="https://www.googleapis.com/youtube/v3/playlistItems";let w=null,S="",V=0;const B=5;console.log(`🔥 最も人気の動画を検索中: ${r}`);do{const F=new URLSearchParams({key:y,playlistId:r,part:"snippet",maxResults:50});S&&F.append("pageToken",S);const Y=new AbortController,me=setTimeout(()=>Y.abort(),1e4),ue=await fetch(`${E}?${F}`,{signal:Y.signal});clearTimeout(me);const oe=await ue.json();if(!ue.ok)throw(n=(e=oe.error)==null?void 0:e.message)!=null&&n.includes("quota")?new Error("YouTube API の使用量制限に達しました。しばらく待ってから再試行してください。"):new Error(((s=oe.error)==null?void 0:s.message)||"API呼び出しエラー");if(oe.items&&oe.items.length>0){const Q=oe.items.map(de=>de.snippet.resourceId.videoId),X=await v2(Q);for(let de=0;de<oe.items.length;de++){const R=oe.items[de],x=X[R.snippet.resourceId.videoId];if(x){const I=parseInt(x.viewCount)||0;(!w||I>w.viewCount)&&(w={title:R.snippet.title,viewCount:I,likeCount:parseInt(x.likeCount)||0,commentCount:parseInt(x.commentCount)||0,publishedAt:R.snippet.publishedAt,thumbnailUrl:((u=(o=R.snippet.thumbnails)==null?void 0:o.high)==null?void 0:u.url)||((m=(d=R.snippet.thumbnails)==null?void 0:d.default)==null?void 0:m.url),videoId:R.snippet.resourceId.videoId,url:`https://www.youtube.com/watch?v=${R.snippet.resourceId.videoId}`})}}console.log(`   ページ ${V+1}: ${oe.items.length}本の動画をチェック`),console.log(`   現在の最人気動画: ${w==null?void 0:w.title} (${(p=w==null?void 0:w.viewCount)==null?void 0:p.toLocaleString()}回再生)`)}S=oe.nextPageToken,V++,await new Promise(Q=>setTimeout(Q,200))}while(S&&V<B);return console.log(`✅ 最人気動画検索完了: ${(w==null?void 0:w.title)||"なし"}`),w}catch(y){return console.error("最人気動画取得エラー:",y),null}}async function v2(r){var e;try{const n="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",s="https://www.googleapis.com/youtube/v3/videos",o=new URLSearchParams({key:n,id:r.join(","),part:"statistics"}),u=await fetch(`${s}?${o}`),d=await u.json();if(!u.ok)throw new Error(((e=d.error)==null?void 0:e.message)||"API呼び出しエラー");const m={};return d.items&&d.items.forEach(p=>{m[p.id]=p.statistics}),m}catch(n){return console.error("動画統計取得エラー:",n),{}}}function _2(r,e){try{const n=e?new Date(e.publishedAt):new Date(r.publishedAt),o=(new Date-n)/(1e3*60*60*24*30);if(o<=0)return 0;const d=r.subscriberCount/o/1e3*100;return Math.round(Math.min(d,999))}catch(n){return console.error("成長率計算エラー:",n),0}}async function b2(r,e){try{const n=Vs(on,"bgm_channels");return await CR(n,{...r,userId:e||"temp-user",createdAt:new Date,addedManually:!0}),!0}catch(n){throw console.error("Firestore保存エラー:",n),n}}async function XE(r){try{const e=Pr(on,"bgm_channels",r);await uE(e,{isViewed:!0,viewedAt:DR()}),console.log(`Channel marked as viewed: ${r}`)}catch(e){throw console.error("Error marking channel as viewed:",e),e}}async function E2(r,e,n=null){try{const s=Pr(on,"bgm_channels",r),o={status:e,statusUpdatedAt:new Date,statusUpdatedBy:"user"};return n&&(o.rejectionReason=n),await uE(s,o),console.log(`✅ Updated channel status: ${r} -> ${e}`),!0}catch(s){return console.error(`Error updating channel status for ${r}:`,s),!1}}async function Al(r="all",e,n={}){try{let s=Vs(on,"bgm_channels");r!=="all"&&r!=="unset"&&(s=rg(s,sg("status","==",r)));const o=await Ja(s),u=[];o.forEach(m=>{const p=m.data();u.push({id:m.id,...p})});let d=u;return r==="unset"&&(d=u.filter(m=>!m.status||m.status===null||m.status===void 0||m.status==="")),console.log(`📊 Found ${d.length} channels with status: ${r} for user: ${e}`),d}catch(s){return console.error("Error getting channels by status:",s),[]}}const La=Object.freeze(Object.defineProperty({__proto__:null,addChannelToFirestore:b2,calculateGrowthRate:_2,checkChannelExists:g2,extractChannelId:d2,fetchChannelFirstVideo:m2,fetchChannelInfo:f2,fetchChannelMostPopularVideo:y2,getChannelsByStatus:Al,isBGMChannel:p2,markChannelAsViewed:XE,updateChannelStatus:E2},Symbol.toStringTag,{value:"Module"})),T2=({channel:r,onStatusChange:e})=>{const[n,s]=be.useState(!1),[o,u]=be.useState(""),d=S=>{switch(S){case"tracking":return{text:"トラッキング中",className:"bg-green-100 text-green-800 border border-green-300"};case"non-tracking":return{text:"対象外",className:"bg-yellow-100 text-yellow-800 border border-yellow-300"};case"rejected":return{text:"除外済み",className:"bg-red-100 text-red-800 border border-red-300"};default:return null}},m=S=>{S.stopPropagation(),e(r.id,"tracking")},p=S=>{S.stopPropagation(),e(r.id,"non-tracking")},y=S=>{S.stopPropagation(),s(!0)},E=()=>{e(r.id,"rejected",o||"手動で除外"),s(!1),u("")},w=d(r.status);return w?v.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${w.className}`,children:w.text}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex gap-1",children:[v.jsx("button",{onClick:m,className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 border border-green-300 rounded hover:bg-green-200 transition-colors min-w-[48px]",title:"トラッキング対象に追加",children:"追跡"}),v.jsx("button",{onClick:p,className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-300 rounded hover:bg-yellow-200 transition-colors min-w-[48px]",title:"トラッキング対象外に設定",children:"対象外"}),v.jsx("button",{onClick:y,className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 border border-red-300 rounded hover:bg-red-200 transition-colors min-w-[48px]",title:"完全に除外",children:"除外"})]}),n&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>s(!1),children:v.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",onClick:S=>S.stopPropagation(),children:[v.jsx("h3",{className:"text-lg font-semibold mb-4",children:"チャンネルを除外"}),v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["「",r.channelTitle,"」を除外します。理由を入力してください（任意）："]}),v.jsx("textarea",{value:o,onChange:S=>u(S.target.value),className:"w-full p-3 border rounded-lg resize-none h-20 text-sm",placeholder:"除外理由（例：BGM以外のコンテンツ、品質が低い、など）"}),v.jsxs("div",{className:"flex gap-3 mt-4",children:[v.jsx("button",{onClick:()=>s(!1),className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"キャンセル"}),v.jsx("button",{onClick:E,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"除外する"})]})]})})]})},ZE=({channel:r,onChannelClick:e,onAddToTracking:n,onStatusChange:s})=>{const[o,u]=be.useState(r.isViewed||!1),d=w=>w>=1e6?`${(w/1e6).toFixed(1)}M`:w>=1e3?`${(w/1e3).toFixed(1)}K`:w.toString(),m=w=>w?(w.toDate?w.toDate():new Date(w)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}):"-",p=w=>w>=50?"bg-green-100 text-green-800":w>=20?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",y=w=>{if(o||!w)return!1;const S=w.toDate?w.toDate():new Date(w);return(Date.now()-S.getTime())/(1e3*60*60*24)<=7},E=async()=>{if(!o&&r.id)try{await XE(r.id),u(!0)}catch(w){console.error("Error marking channel as viewed:",w)}e&&e(r)};return v.jsx("div",{className:"channel-card cursor-pointer",onClick:E,children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("img",{src:r.thumbnailUrl||"/default-avatar.png",alt:r.channelTitle,className:"w-16 h-16 rounded-full object-cover flex-shrink-0",onError:w=>{w.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:r.channelTitle}),y(r.createdAt)&&v.jsx("span",{className:"inline-block px-2 py-1 text-xs font-bold bg-red-100 text-red-800 rounded-full animate-pulse",children:"NEW!"})]}),v.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:[d(r.subscriberCount)," 登録者"]}),v.jsx("span",{className:"text-sm text-gray-500",children:"•"}),v.jsxs("span",{className:"text-sm text-gray-600",children:["開設: ",m(r.publishedAt)]})]}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:r.keywords&&r.keywords.slice(0,3).map((w,S)=>v.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:w},S))}),r.latestVideo&&v.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[v.jsx("span",{className:"font-medium",children:"最新:"})," ",r.latestVideo.title]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${p(r.growthRate||0)}`,children:["成長率 ",r.growthRate||0,"%"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx(T2,{channel:r,onStatusChange:s||(async(w,S,V)=>{const{updateChannelStatus:B}=await ja(async()=>{const{updateChannelStatus:F}=await Promise.resolve().then(()=>La);return{updateChannelStatus:F}},void 0);await B(w,S,V),window.location.reload()})}),v.jsx("button",{onClick:w=>{w.stopPropagation(),window.open(r.channelUrl,"_blank")},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"訪問 →"})]})]})]})]})})},A2=({channels:r,onChannelClick:e,onAddToTracking:n,onStatusChange:s})=>r.length===0?v.jsxs("div",{className:"text-center py-16",children:[v.jsx("div",{className:"text-6xl mb-4",children:"📈"}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"まだチャンネルが追加されていません"}),v.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"上記の検索欄からYouTubeチャンネルを追加して分析を開始してください"})]}):v.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:r.map(o=>v.jsx(ZE,{channel:o,onChannelClick:e,onAddToTracking:n,onStatusChange:s},o.channelId))}),w2=({channel:r,isOpen:e,onClose:n,onRemove:s})=>{if(!e||!r)return null;const o=m=>m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(1)}K`:m.toString(),u=m=>m?(m.toDate?m.toDate():new Date(m)).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"-",d=()=>{confirm("このチャンネルを追跡リストから削除しますか？")&&(s(r.id),n())};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"チャンネル詳細"}),v.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]}),v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[v.jsx("img",{src:r.thumbnailUrl||"/default-avatar.png",alt:r.channelTitle,className:"w-24 h-24 rounded-full object-cover",onError:m=>{m.target.src="https://via.placeholder.com/96x96/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.channelTitle}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"登録者数:"}),v.jsx("span",{className:"ml-2 font-semibold",children:o(r.subscriberCount)})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"総再生回数:"}),v.jsx("span",{className:"ml-2 font-semibold",children:o(r.totalViews||0)})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"動画数:"}),v.jsx("span",{className:"ml-2 font-semibold",children:r.videoCount||"-"})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"開設日:"}),v.jsx("span",{className:"ml-2 font-semibold",children:u(r.publishedAt)})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"初投稿:"}),v.jsx("span",{className:"ml-2 font-semibold",children:u(r.firstVideoDate)})]}),v.jsxs("div",{className:"col-span-2",children:[v.jsx("span",{className:"text-gray-600",children:"成長率:"}),v.jsxs("span",{className:"ml-2 font-semibold text-blue-600",children:[r.growthRate||0,"%"]})]})]})]})]}),r.keywords&&r.keywords.length>0&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-2",children:"タグ"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:r.keywords.map((m,p)=>v.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-full",children:m},p))})]}),r.latestVideo&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"最新動画"}),v.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[v.jsx("h6",{className:"font-medium text-gray-900 mb-1",children:r.latestVideo.title}),v.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["投稿日: ",u(r.latestVideo.publishedAt)]}),v.jsx("a",{href:r.latestVideo.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"動画を見る →"})]})]}),r.mostPopularVideo&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"🔥 最も人気の動画"}),v.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:v.jsxs("div",{className:"flex gap-4",children:[r.mostPopularVideo.thumbnailUrl&&v.jsx("img",{src:r.mostPopularVideo.thumbnailUrl,alt:r.mostPopularVideo.title,className:"w-24 h-18 rounded object-cover flex-shrink-0"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h6",{className:"font-medium text-gray-900 mb-2 line-clamp-2",children:r.mostPopularVideo.title}),v.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[v.jsxs("span",{className:"flex items-center gap-1",children:["👁️ ",o(r.mostPopularVideo.viewCount)," 回視聴"]}),r.mostPopularVideo.likeCount>0&&v.jsxs("span",{className:"flex items-center gap-1",children:["👍 ",o(r.mostPopularVideo.likeCount)]}),r.mostPopularVideo.commentCount>0&&v.jsxs("span",{className:"flex items-center gap-1",children:["💬 ",o(r.mostPopularVideo.commentCount)]})]}),v.jsx("a",{href:r.mostPopularVideo.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 text-sm font-medium",children:"動画を見る →"})]})]})})]})]}),v.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[v.jsx("button",{onClick:()=>window.open(r.channelUrl,"_blank"),className:"btn-primary flex-1",children:"チャンネル訪問"}),v.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors",children:"追跡削除"})]})]})})},S2=()=>{const[r,e]=be.useState({youtubeApiKey:"",githubToken:"",searchKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music"],collectionFrequency:"daily",keywordCount:8,videosPerKeyword:40,maxChannelsPerRun:150,monthsThreshold:3,minSubscribers:1e3,maxSubscribers:5e5,minVideos:5,minGrowthRate:10,bgmKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music","meditation","sleep music"],bgmExclusions:["lyrics","歌詞","vocal","sing","rap","talk","podcast"],trackingFrequency:"weekly",trackingRetentionDays:365,theme:"light",defaultSort:"growthRate",itemsPerPage:20,enableApiUsageDisplay:!0,maxDailyApiCalls:1e4}),[n,s]=be.useState(!0),[o,u]=be.useState(!1),[d,m]=be.useState(""),[p,y]=be.useState("basic"),[E,w]=be.useState("unchecked");be.useEffect(()=>{S()},[]);const S=async()=>{try{const Q=await RR(Pr(on,"settings","app_config"));Q.exists()&&e(X=>({...X,...Q.data()})),$E()&&(w("valid"),e(X=>({...X,githubToken:"●●●●●●●●●●●●"})))}catch(Q){console.error("設定の読み込みエラー:",Q),m("設定の読み込みに失敗しました")}finally{s(!1)}},V=async()=>{try{if(u(!0),r.githubToken&&r.githubToken!=="●●●●●●●●●●●●")if(await a2(r.githubToken))f0(r.githubToken),w("valid"),m("設定を保存しました（GitHub Token有効）");else{w("invalid"),m("GitHub Tokenが無効です");return}else r.githubToken===""&&(f0(""),w("unchecked"));const Q={...r};delete Q.githubToken,await gm(Pr(on,"settings","app_config"),Q),(!r.githubToken||r.githubToken==="●●●●●●●●●●●●")&&m("設定を保存しました"),setTimeout(()=>m(""),3e3)}catch(Q){console.error("設定の保存エラー:",Q),m("設定の保存に失敗しました")}finally{u(!1)}},B=async Q=>{try{const X=await Ja(Vs(on,"channels")),de=await Ja(Vs(on,"tracking_data")),R=X.docs.map(O=>({id:O.id,...O.data()})),x=de.docs.map(O=>({id:O.id,...O.data()})),I={channels:R,tracking:x,exportedAt:new Date().toISOString()};if(Q==="csv"){const O=F(R);Y(O,"youtube-bgm-channels.csv","text/csv")}else{const O=JSON.stringify(I,null,2);Y(O,"youtube-bgm-data.json","application/json")}m(`${Q.toUpperCase()}でエクスポートしました`)}catch(X){console.error("エクスポートエラー:",X),m("エクスポートに失敗しました")}},F=Q=>{const X=["チャンネル名","チャンネルID","登録者数","動画数","成長率(%)","開設日","最初の動画日","キーワード","URL"],de=Q.map(R=>[R.channelTitle||"",R.channelId||"",R.subscriberCount||0,R.videoCount||0,R.growthRate||0,R.publishedAt?new Date(R.publishedAt).toLocaleDateString("ja-JP"):"",R.firstVideoDate?new Date(R.firstVideoDate).toLocaleDateString("ja-JP"):"",(R.keywords||[]).join("; "),R.channelUrl||""]);return[X,...de].map(R=>R.map(x=>`"${String(x).replace(/"/g,'""')}"`).join(",")).join(`
`)},Y=(Q,X,de)=>{const R=new Blob([Q],{type:de}),x=URL.createObjectURL(R),I=document.createElement("a");I.href=x,I.download=X,document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(x)},me=Q=>{const X=prompt(`新しい${Q==="search"?"検索":Q==="bgm"?"BGM":"除外"}キーワードを入力してください:`);if(X&&X.trim()){const de=Q==="search"?"searchKeywords":Q==="bgm"?"bgmKeywords":"bgmExclusions";e(R=>({...R,[de]:[...R[de],X.trim()]}))}},ue=(Q,X)=>{const de=Q==="search"?"searchKeywords":Q==="bgm"?"bgmKeywords":"bgmExclusions";e(R=>({...R,[de]:R[de].filter((x,I)=>I!==X)}))},oe=[{id:"basic",label:"基本設定",icon:"⚙️"},{id:"collection",label:"収集設定",icon:"🔍"},{id:"filtering",label:"フィルタリング",icon:"📊"},{id:"bgm",label:"BGM判定",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"display",label:"表示設定",icon:"🎨"},{id:"data",label:"データ管理",icon:"💾"},{id:"security",label:"セキュリティ",icon:"🔒"}];return n?v.jsx("div",{className:"flex items-center justify-center min-h-96",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v.jsx("div",{className:"max-w-6xl mx-auto p-6",children:v.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[v.jsxs("div",{className:"border-b border-gray-200 p-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"設定"}),v.jsx("p",{className:"text-gray-600 mt-1",children:"アプリケーションの動作をカスタマイズできます"}),d&&v.jsx("div",{className:`mt-4 p-3 rounded-md ${d.includes("失敗")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:d})]}),v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"w-64 border-r border-gray-200 p-4",children:v.jsx("nav",{className:"space-y-1",children:oe.map(Q=>v.jsxs("button",{onClick:()=>y(Q.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${p===Q.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[v.jsx("span",{className:"mr-2",children:Q.icon}),Q.label]},Q.id))})}),v.jsxs("div",{className:"flex-1 p-6",children:[p==="basic"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"基本設定"}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube API キー"}),v.jsx("input",{type:"password",value:r.youtubeApiKey,onChange:Q=>e(X=>({...X,youtubeApiKey:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"YouTube Data API v3 キーを入力"}),v.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Google Cloud Consoleで取得したAPIキーを設定してください"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Personal Access Token"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"password",value:r.githubToken,onChange:Q=>e(X=>({...X,githubToken:Q.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 pr-10 ${E==="valid"?"border-green-300":E==="invalid"?"border-red-300":"border-gray-300"}`,placeholder:"ghp_xxxxxxxxxxxxxxxxxx"}),v.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:[E==="valid"&&v.jsx("span",{className:"text-green-500",children:"✓"}),E==="invalid"&&v.jsx("span",{className:"text-red-500",children:"✗"})]})]}),v.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"不具合・要望報告機能でGitHub Issuesに投稿するために必要です"}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"GitHub Settings → Developer settings → Personal access tokens で作成"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索キーワード"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:r.searchKeywords.map((Q,X)=>v.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[Q,v.jsx("button",{onClick:()=>ue("search",X),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},X))}),v.jsx("button",{onClick:()=>me("search"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),p==="collection"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"収集設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"収集頻度"}),v.jsxs("select",{value:r.collectionFrequency,onChange:Q=>e(X=>({...X,collectionFrequency:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"daily",children:"毎日"}),v.jsx("option",{value:"weekly",children:"毎週"}),v.jsx("option",{value:"monthly",children:"毎月"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"使用キーワード数"}),v.jsx("input",{type:"number",value:r.keywordCount,onChange:Q=>e(X=>({...X,keywordCount:parseInt(Q.target.value)||8})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"キーワードあたり動画数"}),v.jsx("input",{type:"number",value:r.videosPerKeyword,onChange:Q=>e(X=>({...X,videosPerKeyword:parseInt(Q.target.value)||40})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"10",max:"100"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大チャンネル処理数"}),v.jsx("input",{type:"number",value:r.maxChannelsPerRun,onChange:Q=>e(X=>({...X,maxChannelsPerRun:parseInt(Q.target.value)||150})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"50",max:"500"})]})]})]}),p==="filtering"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"フィルタリング設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"チャンネル作成期間（ヶ月）"}),v.jsx("input",{type:"number",value:r.monthsThreshold,onChange:Q=>e(X=>({...X,monthsThreshold:parseInt(Q.target.value)||3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"12"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小登録者数"}),v.jsx("input",{type:"number",value:r.minSubscribers,onChange:Q=>e(X=>({...X,minSubscribers:parseInt(Q.target.value)||1e3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"100"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大登録者数"}),v.jsx("input",{type:"number",value:r.maxSubscribers,onChange:Q=>e(X=>({...X,maxSubscribers:parseInt(Q.target.value)||5e5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小動画数"}),v.jsx("input",{type:"number",value:r.minVideos,onChange:Q=>e(X=>({...X,minVideos:parseInt(Q.target.value)||5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小成長率（%）"}),v.jsx("input",{type:"number",value:r.minGrowthRate,onChange:Q=>e(X=>({...X,minGrowthRate:parseInt(Q.target.value)||10})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"0"})]})]})]}),p==="bgm"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"BGM判定設定"}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BGM関連キーワード"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:r.bgmKeywords.map((Q,X)=>v.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:[Q,v.jsx("button",{onClick:()=>ue("bgm",X),className:"ml-1 text-green-600 hover:text-green-800",children:"×"})]},X))}),v.jsx("button",{onClick:()=>me("bgm"),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"+ キーワードを追加"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"除外キーワード"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:r.bgmExclusions.map((Q,X)=>v.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:[Q,v.jsx("button",{onClick:()=>ue("exclusion",X),className:"ml-1 text-red-600 hover:text-red-800",children:"×"})]},X))}),v.jsx("button",{onClick:()=>me("exclusion"),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),p==="tracking"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"トラッキング設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"トラッキング頻度"}),v.jsxs("select",{value:r.trackingFrequency,onChange:Q=>e(X=>({...X,trackingFrequency:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"daily",children:"毎日"}),v.jsx("option",{value:"weekly",children:"毎週"}),v.jsx("option",{value:"monthly",children:"毎月"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"データ保持期間（日）"}),v.jsx("input",{type:"number",value:r.trackingRetentionDays,onChange:Q=>e(X=>({...X,trackingRetentionDays:parseInt(Q.target.value)||365})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"30",max:"1095"})]})]})]}),p==="display"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"表示設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テーマ"}),v.jsxs("select",{value:r.theme,onChange:Q=>e(X=>({...X,theme:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"light",children:"ライト"}),v.jsx("option",{value:"dark",children:"ダーク"}),v.jsx("option",{value:"auto",children:"自動"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"デフォルト並び順"}),v.jsxs("select",{value:r.defaultSort,onChange:Q=>e(X=>({...X,defaultSort:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"growthRate",children:"成長率順"}),v.jsx("option",{value:"subscriberCount",children:"登録者数順"}),v.jsx("option",{value:"publishedAt",children:"新着順"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1ページの表示件数"}),v.jsxs("select",{value:r.itemsPerPage,onChange:Q=>e(X=>({...X,itemsPerPage:parseInt(Q.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:10,children:"10件"}),v.jsx("option",{value:20,children:"20件"}),v.jsx("option",{value:50,children:"50件"}),v.jsx("option",{value:100,children:"100件"})]})]})]})]}),p==="data"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"データ管理"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[v.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データエクスポート"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"収集したチャンネルデータとトラッキングデータをエクスポートできます"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>B("csv"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"CSV形式でエクスポート"}),v.jsx("button",{onClick:()=>B("json"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"JSON形式でエクスポート"})]})]}),v.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[v.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データバックアップ"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"定期的にデータのバックアップを作成することをお勧めします"}),v.jsx("button",{onClick:()=>B("json"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"今すぐバックアップ"})]})]})]}),p==="security"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"セキュリティ設定"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",checked:r.enableApiUsageDisplay,onChange:Q=>e(X=>({...X,enableApiUsageDisplay:Q.target.checked})),className:"mr-2"}),v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"API使用量の表示"})]}),v.jsx("p",{className:"text-sm text-gray-500 ml-6",children:"YouTube API使用量をダッシュボードに表示します"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1日のAPI呼び出し制限"}),v.jsx("input",{type:"number",value:r.maxDailyApiCalls,onChange:Q=>e(X=>({...X,maxDailyApiCalls:parseInt(Q.target.value)||1e4})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000",max:"1000000"}),v.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"YouTube APIの1日あたりのクォータ制限を設定"})]})]})]}),v.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-gray-200",children:v.jsx("button",{onClick:V,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:o?"保存中...":"設定を保存"})})]})]})]})})},Ff=({trackingData:r,title:e})=>{var o,u,d,m,p;if(console.log(`TrackingChart for ${e}:`,r),!r||r.length===0)return v.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),v.jsx("div",{className:"text-center py-8 text-gray-500",children:"トラッキングデータがありません"})]});const n=Math.max(...r.map(y=>y.value)),s=Math.min(...r.map(y=>y.value));return console.log(`Chart range for ${e}: ${s} - ${n}`),v.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"relative h-32 bg-gray-50 rounded p-4",children:[v.jsxs("svg",{width:"100%",height:"100%",className:"overflow-visible",children:[r.length>1&&r.map((y,E)=>{if(E===0)return null;const w=r[E-1],S=(E-1)/(r.length-1)*100,V=E/(r.length-1)*100,B=n===s?50:100-(w.value-s)/(n-s)*80,F=n===s?50:100-(y.value-s)/(n-s)*80;return v.jsx("line",{x1:`${S}%`,y1:`${B}%`,x2:`${V}%`,y2:`${F}%`,stroke:"#3b82f6",strokeWidth:"2",className:"transition-all duration-300"},E)}),r.map((y,E)=>{const w=E/(r.length-1)*100,S=n===s?50:100-(y.value-s)/(n-s)*80,V=E===r.length-1;return v.jsx("circle",{cx:`${w}%`,cy:`${S}%`,r:"4",fill:V?"#1d4ed8":"#3b82f6",className:"transition-all duration-300"},E)})]}),v.jsx("div",{className:"flex justify-between mt-2",children:r.map((y,E)=>v.jsx("div",{className:"text-xs text-gray-600 text-center flex-1",children:new Date(y.date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})},E))})]})}),v.jsxs("div",{className:"mb-4 max-h-32 overflow-y-auto",children:[v.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"履歴データ"}),v.jsx("div",{className:"space-y-1",children:r.map((y,E)=>v.jsxs("div",{className:"flex justify-between text-xs",children:[v.jsx("span",{className:"text-gray-600",children:new Date(y.date).toLocaleDateString("ja-JP")}),v.jsx("span",{className:"font-medium text-gray-900",children:y.value.toLocaleString()})]},E))})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center border-t pt-4",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-600",children:"最新"}),v.jsx("div",{className:"text-lg font-semibold text-blue-600",children:(o=r[r.length-1])==null?void 0:o.value.toLocaleString()})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-600",children:"最高"}),v.jsx("div",{className:"text-lg font-semibold text-green-600",children:n.toLocaleString()})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-600",children:"成長"}),v.jsx("div",{className:`text-lg font-semibold ${r.length>1?((u=r[r.length-1])==null?void 0:u.value)>((d=r[0])==null?void 0:d.value)?"text-green-600":"text-red-600":"text-gray-600"}`,children:r.length>1?`${((((m=r[r.length-1])==null?void 0:m.value)/((p=r[0])==null?void 0:p.value)-1)*100).toFixed(1)}%`:"N/A"})]})]})]})},x2=({selectedChannelId:r})=>{const[e,n]=be.useState({subscriberCount:[],videoCount:[],totalViews:[]}),[s,o]=be.useState(!1),[u,d]=be.useState([]),[m,p]=be.useState(!0),[y,E]=be.useState(r);be.useEffect(()=>{w()},[]),be.useEffect(()=>{y&&S(y)},[y]);const w=async()=>{try{p(!0);const{getChannelsByStatus:B}=await ja(async()=>{const{getChannelsByStatus:Y}=await Promise.resolve().then(()=>La);return{getChannelsByStatus:Y}},void 0),F=await B("tracking");d(F)}catch(B){console.error("追跡チャンネル一覧の取得エラー:",B)}finally{p(!1)}},S=async B=>{try{o(!0),console.log("Loading tracking data for:",B);try{const me=(await Ja(rg(Vs(on,"tracking_data"),sg("channelId","==",B)))).docs.map(ue=>ue.data());if(console.log("Found tracking data:",me),me.length>0){const ue=me.filter(R=>R.recordedAt).sort((R,x)=>{const I=R.recordedAt.toDate?R.recordedAt.toDate():new Date(R.recordedAt),O=x.recordedAt.toDate?x.recordedAt.toDate():new Date(x.recordedAt);return I-O}),oe=ue.map(R=>({date:R.recordedAt.toDate?R.recordedAt.toDate():new Date(R.recordedAt),value:R.subscriberCount||0})),Q=ue.map(R=>({date:R.recordedAt.toDate?R.recordedAt.toDate():new Date(R.recordedAt),value:R.videoCount||0})),X=ue.map(R=>({date:R.recordedAt.toDate?R.recordedAt.toDate():new Date(R.recordedAt),value:R.totalViews||0})),de={subscriberCount:oe,videoCount:Q,totalViews:X};console.log("Setting real tracking data:",de),n(de);return}}catch(Y){console.log("Failed to fetch real tracking data, using mock data:",Y)}const F=u.find(Y=>Y.channelId===B);if(console.log("Using channel data for mock tracking:",F),F){const Y=new Date,me=new Date(Y-7*24*60*60*1e3),ue=new Date(Y-14*24*60*60*1e3),oe=F.subscriberCount||0,Q=F.videoCount||0,X=F.totalViews||0,de={subscriberCount:[{date:ue,value:Math.max(0,Math.floor(oe*.95))},{date:me,value:Math.max(0,Math.floor(oe*.98))},{date:Y,value:oe}],videoCount:[{date:ue,value:Math.max(0,Q-2)},{date:me,value:Math.max(0,Q-1)},{date:Y,value:Q}],totalViews:[{date:ue,value:Math.max(0,Math.floor(X*.9))},{date:me,value:Math.max(0,Math.floor(X*.95))},{date:Y,value:X}]};console.log("Setting simulated tracking data:",de),n(de)}}catch(F){console.error("トラッキングデータの取得エラー:",F)}finally{o(!1)}};if(s&&y)return v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"トラッキングデータを読み込み中..."})]});if(m)return v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"トラッキングチャンネルを読み込み中..."})]});if(!y)return v.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4",children:"📊"}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"チャンネルを選択してください"}),v.jsx("p",{className:"text-gray-600 mb-6",children:"追跡中のチャンネルから1つを選択すると、成長データを表示します"}),u.length>0&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map(B=>v.jsx("div",{onClick:()=>{console.log("Selecting channel:",B.channelId,B),E(B.channelId),S(B.channelId)},className:"cursor-pointer p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:B.thumbnailUrl||"/default-avatar.png",alt:B.channelTitle,className:"w-12 h-12 rounded-full object-cover",onError:F=>{F.target.src="https://via.placeholder.com/48x48/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{className:"text-left",children:[v.jsx("h4",{className:"font-medium text-gray-900 truncate",children:B.channelTitle}),v.jsxs("p",{className:"text-sm text-gray-600",children:["ステータス更新: ",B.statusUpdatedAt?new Date(B.statusUpdatedAt.toDate?B.statusUpdatedAt.toDate():B.statusUpdatedAt).toLocaleDateString("ja-JP"):"Unknown"]})]})]})},B.id))}),u.length===0&&v.jsxs("p",{className:"text-gray-500",children:["まだトラッキング中のチャンネルがありません。",v.jsx("br",{}),"チャンネル一覧からチャンネルを「追跡」ステータスに設定してください。"]})]})});const V=u.find(B=>B.channelId===y);return v.jsxs("div",{className:"space-y-6",children:[V&&v.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("img",{src:V.thumbnailUrl||"/default-avatar.png",alt:V.channelTitle,className:"w-16 h-16 rounded-full object-cover",onError:B=>{B.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:V.channelTitle}),v.jsxs("p",{className:"text-gray-600",children:["ステータス更新: ",V.statusUpdatedAt?new Date(V.statusUpdatedAt.toDate?V.statusUpdatedAt.toDate():V.statusUpdatedAt).toLocaleDateString("ja-JP"):"Unknown"]})]})]}),v.jsx("button",{onClick:()=>E(null),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",children:"← チャンネル一覧に戻る"})]})}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[v.jsx(Ff,{trackingData:e.subscriberCount,title:"📈 登録者数の推移"}),v.jsx(Ff,{trackingData:e.videoCount,title:"🎥 動画数の推移"}),v.jsx(Ff,{trackingData:e.totalViews,title:"👁️ 総再生回数の推移"})]})]})},R2=()=>{var S,V,B;const[r,e]=be.useState("tracking"),[n,s]=be.useState([]),[o,u]=be.useState(!0),[d,m]=be.useState({tracking:0,"non-tracking":0,rejected:0});be.useEffect(()=>{p()},[r]),be.useEffect(()=>{y()},[]);const p=async()=>{try{u(!0);const F=await Al(r);s(F)}catch(F){console.error("チャンネル履歴読み込みエラー:",F)}finally{u(!1)}},y=async()=>{try{const[F,Y,me]=await Promise.all([Al("tracking"),Al("non-tracking"),Al("rejected")]);m({tracking:F.length,"non-tracking":Y.length,rejected:me.length})}catch(F){console.error("統計読み込みエラー:",F)}},E=[{id:"tracking",label:"トラッキング中",icon:"📊",color:"green",count:d.tracking},{id:"non-tracking",label:"対象外",icon:"📋",color:"yellow",count:d["non-tracking"]},{id:"rejected",label:"除外済み",icon:"❌",color:"red",count:d.rejected}],w=F=>F?(F.toDate?F.toDate():new Date(F)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"チャンネル履歴"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"ステータス別にチャンネルの履歴を確認できます"})]}),v.jsx("div",{className:"card",children:v.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(F=>{const Y=r===F.id,me={green:Y?"bg-green-100 text-green-800 border-green-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-green-50 hover:text-green-700",yellow:Y?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-yellow-50 hover:text-yellow-700",red:Y?"bg-red-100 text-red-800 border-red-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-red-50 hover:text-red-700"};return v.jsxs("button",{onClick:()=>e(F.id),className:`px-4 py-3 rounded-lg border font-medium transition-all duration-200 flex items-center gap-2 ${me[F.color]}`,children:[v.jsx("span",{className:"text-lg",children:F.icon}),v.jsx("span",{children:F.label}),v.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Y?"bg-white bg-opacity-50":"bg-gray-200"}`,children:F.count})]},F.id)})})}),v.jsxs("div",{className:"card",children:[v.jsx("div",{className:"mb-4",children:v.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[((S=E.find(F=>F.id===r))==null?void 0:S.label)||"チャンネル"," (",n.length,"件)"]})}),o?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"読み込み中..."})]}):n.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"text-6xl mb-4",children:((V=E.find(F=>F.id===r))==null?void 0:V.icon)||"📋"}),v.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:[(B=E.find(F=>F.id===r))==null?void 0:B.label,"のチャンネルがありません"]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"チャンネルの仕分けを行うと、ここに表示されます"})]}):v.jsx("div",{className:"space-y-4",children:n.map(F=>{var Y;return v.jsxs("div",{className:"relative",children:[v.jsx(ZE,{channel:F,onChannelClick:()=>{},onAddToTracking:()=>{},showStatusHistory:!0}),v.jsxs("div",{className:"mt-2 px-4 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg text-sm",children:[v.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[v.jsxs("span",{children:["ステータス: ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:((Y=E.find(me=>me.id===F.status))==null?void 0:Y.label)||F.status||"未設定"})]}),v.jsxs("span",{children:["更新日時: ",w(F.statusUpdatedAt)]})]}),F.status==="rejected"&&F.rejectionReason&&v.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded border-l-4 border-red-300",children:v.jsxs("span",{className:"text-red-700 dark:text-red-300 text-sm",children:[v.jsx("strong",{children:"除外理由:"})," ",F.rejectionReason]})}),F.statusUpdatedBy&&v.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["更新者: ",F.statusUpdatedBy]})]})]},F.id)})})]}),v.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:v.jsxs("p",{children:["合計: ",d.tracking+d["non-tracking"]+d.rejected," チャンネル | トラッキング中: ",d.tracking," | 対象外: ",d["non-tracking"]," | 除外済み: ",d.rejected]})})]})};function I2(){const{user:r,loading:e}=KE(),[n,s]=be.useState(!0),[o,u]=be.useState([]),[d,m]=be.useState([]),[p,y]=be.useState(!0),[E,w]=be.useState(null),[S,V]=be.useState(null),[B,F]=be.useState(new Set),[Y,me]=be.useState("channels"),[ue,oe]=be.useState(null),[Q,X]=be.useState({sortBy:"growth_rate",filterBy:"unset",search:""});be.useEffect(()=>{de(),R()},[]),be.useEffect(()=>{x()},[o,Q,B]),be.useEffect(()=>{Q.filterBy!=="all"&&Q.filterBy!=="growing"&&Q.filterBy!=="large"&&Q.filterBy!=="small"&&de()},[Q.filterBy]);const de=async()=>{try{y(!0);const{getChannelsByStatus:ae}=await ja(async()=>{const{getChannelsByStatus:ne}=await Promise.resolve().then(()=>La);return{getChannelsByStatus:ne}},void 0);let U=[];switch(Q.filterBy){case"unset":U=await ae("unset",null);break;case"tracking":U=await ae("tracking",null);break;case"non-tracking":U=await ae("non-tracking",null);break;case"rejected":U=await ae("rejected",null);break;case"all":U=await ae("all",null);break;default:U=await ae("unset",null);break}u(U)}catch(ae){console.error("チャンネルデータの読み込みエラー:",ae)}finally{y(!1)}},R=async()=>{try{const ae=Vs(on,"tracked_channels"),U=await Ja(ae),ne=new Set(U.docs.filter(le=>le.data().isActive).map(le=>le.id));F(ne)}catch(ae){console.error("追跡チャンネルデータの読み込みエラー:",ae)}},x=()=>{let ae=o.map(U=>({...U,isTracked:B.has(U.channelId)}));switch(Q.search&&(ae=ae.filter(U=>U.channelTitle.toLowerCase().includes(Q.search.toLowerCase()))),Q.filterBy){case"growing":ae=ae.filter(U=>(U.growthRate||0)>20);break;case"large":ae=ae.filter(U=>U.subscriberCount>1e5);break;case"small":ae=ae.filter(U=>U.subscriberCount<1e4);break}switch(Q.sortBy){case"growth_rate":ae.sort((U,ne)=>(ne.growthRate||0)-(U.growthRate||0));break;case"subscribers":ae.sort((U,ne)=>ne.subscriberCount-U.subscriberCount);break;case"views":ae.sort((U,ne)=>(ne.totalViews||0)-(U.totalViews||0));break;case"added_date":ae.sort((U,ne)=>{var D,W,se,ie;const le=((W=(D=U.createdAt)==null?void 0:D.toDate)==null?void 0:W.call(D))||new Date(U.createdAt);return(((ie=(se=ne.createdAt)==null?void 0:se.toDate)==null?void 0:ie.call(se))||new Date(ne.createdAt))-le});break}m(ae)},I=async ae=>{try{const{extractChannelId:U,fetchChannelInfo:ne,fetchChannelFirstVideo:le,checkChannelExists:Ce,isBGMChannel:D,calculateGrowthRate:W,addChannelToFirestore:se}=await ja(async()=>{const{extractChannelId:ln,fetchChannelInfo:Fn,fetchChannelFirstVideo:Vn,checkChannelExists:mi,isBGMChannel:gi,calculateGrowthRate:pi,addChannelToFirestore:Qr}=await Promise.resolve().then(()=>La);return{extractChannelId:ln,fetchChannelInfo:Fn,fetchChannelFirstVideo:Vn,checkChannelExists:mi,isBGMChannel:gi,calculateGrowthRate:pi,addChannelToFirestore:Qr}},void 0),ie=U(ae);if(await Ce(ie)){alert("このチャンネルは既に追加されています");return}const Se=await ne(ie);if(!D(Se.channelTitle,Se.description)&&!confirm("このチャンネルはBGM関連ではない可能性があります。追加しますか？"))return;const ve=await le(Se.uploadsPlaylistId),ft=W(Se,ve),Ye={...Se,firstVideoDate:(ve==null?void 0:ve.publishedAt)||Se.publishedAt,growthRate:ft,keywords:[],uploadsPlaylistId:Se.uploadsPlaylistId};await se(Ye,null),await de(),alert(`✅ チャンネル「${Se.channelTitle}」を追加しました`)}catch(U){console.error("チャンネル追加エラー:",U),alert(`❌ チャンネル追加に失敗しました: ${U.message}`)}},O=async ae=>{try{let U=ae;if(ae.startsWith("UC")&&ae.length===24){const ne=o.find(le=>le.channelId===ae);if(ne)U=ne.id;else{console.error("削除対象のチャンネルが見つかりません");return}}await IR(Pr(on,"bgm_channels",U)),await de(),console.log(`✅ チャンネルを削除しました: ${U}`)}catch(U){console.error("チャンネル削除エラー:",U),alert("チャンネルの削除に失敗しました")}},M=async ae=>{try{if(B.has(ae.channelId))return;await gm(Pr(on,"tracked_channels",ae.channelId),{channelId:ae.channelId,channelTitle:ae.channelTitle,channelUrl:ae.channelUrl,thumbnailUrl:ae.thumbnailUrl,userId:"temp-user",addedAt:new Date,isActive:!0}),await gm(Pr(on,"tracking_data",`${ae.channelId}_${new Date().toISOString().split("T")[0]}`),{channelId:ae.channelId,subscriberCount:ae.subscriberCount,videoCount:ae.videoCount,totalViews:ae.totalViews,userId:"temp-user",recordedAt:new Date}),F(U=>new Set([...U,ae.channelId])),console.log(`✅ Added to tracking: ${ae.channelTitle}`)}catch(U){console.error("追跡追加エラー:",U)}},j=async ae=>{w(ae),V({...ae,mostPopularVideo:{title:"最も人気の動画（取得中...）",viewCount:0,thumbnailUrl:"",url:""}});try{const{fetchChannelMostPopularVideo:U,fetchChannelInfo:ne}=await ja(async()=>{const{fetchChannelMostPopularVideo:D,fetchChannelInfo:W}=await Promise.resolve().then(()=>La);return{fetchChannelMostPopularVideo:D,fetchChannelInfo:W}},void 0);let le=ae.uploadsPlaylistId;le||(console.log("uploadsPlaylistId not found, fetching channel info..."),le=(await ne(ae.channelId)).uploadsPlaylistId),console.log("Using uploadsPlaylistId:",le);const Ce=await U(le);V(Ce?{...ae,mostPopularVideo:Ce}:{...ae,mostPopularVideo:{title:"人気動画が見つかりませんでした",viewCount:0,thumbnailUrl:"",url:""}})}catch(U){console.error("人気動画取得エラー:",U),V({...ae,mostPopularVideo:{title:"人気動画の取得に失敗しました",viewCount:0,thumbnailUrl:"",url:""}})}},N=()=>{w(null),V(null)};if(e)return v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"認証状態を確認中..."})]})});if(p)return v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"チャンネルデータを読み込み中..."})]})});const bt=()=>{switch(Y){case"settings":return v.jsx(S2,{});case"tracking":return v.jsx(x2,{selectedChannelId:ue});case"history":return v.jsx(R2,{});default:return v.jsxs(v.Fragment,{children:[v.jsx(u2,{onAddChannel:I}),v.jsx(c2,{filters:Q,onFiltersChange:X}),v.jsx(h2,{channels:d}),v.jsx(A2,{channels:d,onChannelClick:j,onAddToTracking:M,onStatusChange:async(ae,U,ne)=>{const{updateChannelStatus:le}=await ja(async()=>{const{updateChannelStatus:Ce}=await Promise.resolve().then(()=>La);return{updateChannelStatus:Ce}},void 0);await le(ae,U,ne),await de()}})]})}};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[v.jsx(l2,{currentView:Y,onViewChange:me}),v.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:bt()}),v.jsx(w2,{channel:S||E,isOpen:!!E,onClose:N,onRemove:O})]})}function C2(){return v.jsx(XC,{children:v.jsx(I2,{})})}DA.createRoot(document.getElementById("root")).render(v.jsx(be.StrictMode,{children:v.jsx(C2,{})}));
