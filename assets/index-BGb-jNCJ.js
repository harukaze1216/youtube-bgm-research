(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(o){if(o.ep)return;o.ep=!0;const h=i(o);fetch(o.href,h)}})();var Sf={exports:{}},Ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ly;function Wb(){if(ly)return Ul;ly=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,h){var d=null;if(h!==void 0&&(d=""+h),o.key!==void 0&&(d=""+o.key),"key"in o){h={};for(var g in o)g!=="key"&&(h[g]=o[g])}else h=o;return o=h.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:h}}return Ul.Fragment=e,Ul.jsx=i,Ul.jsxs=i,Ul}var oy;function tE(){return oy||(oy=1,Sf.exports=Wb()),Sf.exports}var b=tE(),wf={exports:{}},St={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function eE(){if(uy)return St;uy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),w=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,et={};function K(O,X,st){this.props=O,this.context=X,this.refs=et,this.updater=st||k}K.prototype.isReactComponent={},K.prototype.setState=function(O,X){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,X,"setState")},K.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function bt(){}bt.prototype=K.prototype;function ct(O,X,st){this.props=O,this.context=X,this.refs=et,this.updater=st||k}var ht=ct.prototype=new bt;ht.constructor=ct,Q(ht,K.prototype),ht.isPureReactComponent=!0;var $=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},Et=Object.prototype.hasOwnProperty;function V(O,X,st,nt,dt,xt){return st=xt.ref,{$$typeof:s,type:O,key:X,ref:st!==void 0?st:null,props:xt}}function x(O,X){return V(O.type,X,void 0,void 0,void 0,O.props)}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function M(O){var X={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(st){return X[st]})}var D=/\/+/g;function I(O,X){return typeof O=="object"&&O!==null&&O.key!=null?M(""+O.key):X.toString(36)}function S(){}function Wt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(S,S):(O.status="pending",O.then(function(X){O.status==="pending"&&(O.status="fulfilled",O.value=X)},function(X){O.status==="pending"&&(O.status="rejected",O.reason=X)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function te(O,X,st,nt,dt){var xt=typeof O;(xt==="undefined"||xt==="boolean")&&(O=null);var vt=!1;if(O===null)vt=!0;else switch(xt){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(O.$$typeof){case s:case e:vt=!0;break;case E:return vt=O._init,te(vt(O._payload),X,st,nt,dt)}}if(vt)return dt=dt(O),vt=nt===""?"."+I(O,0):nt,$(dt)?(st="",vt!=null&&(st=vt.replace(D,"$&/")+"/"),te(dt,X,st,"",function(gn){return gn})):dt!=null&&(N(dt)&&(dt=x(dt,st+(dt.key==null||O&&O.key===dt.key?"":(""+dt.key).replace(D,"$&/")+"/")+vt)),X.push(dt)),1;vt=0;var de=nt===""?".":nt+":";if($(O))for(var Ft=0;Ft<O.length;Ft++)nt=O[Ft],xt=de+I(nt,Ft),vt+=te(nt,X,st,xt,dt);else if(Ft=R(O),typeof Ft=="function")for(O=Ft.call(O),Ft=0;!(nt=O.next()).done;)nt=nt.value,xt=de+I(nt,Ft++),vt+=te(nt,X,st,xt,dt);else if(xt==="object"){if(typeof O.then=="function")return te(Wt(O),X,st,nt,dt);throw X=String(O),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return vt}function G(O,X,st){if(O==null)return O;var nt=[],dt=0;return te(O,nt,"","",function(xt){return X.call(st,xt,dt++)}),nt}function rt(O){if(O._status===-1){var X=O._result;X=X(),X.then(function(st){(O._status===0||O._status===-1)&&(O._status=1,O._result=st)},function(st){(O._status===0||O._status===-1)&&(O._status=2,O._result=st)}),O._status===-1&&(O._status=0,O._result=X)}if(O._status===1)return O._result.default;throw O._result}var ut=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function Nt(){}return St.Children={map:G,forEach:function(O,X,st){G(O,function(){X.apply(this,arguments)},st)},count:function(O){var X=0;return G(O,function(){X++}),X},toArray:function(O){return G(O,function(X){return X})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},St.Component=K,St.Fragment=i,St.Profiler=o,St.PureComponent=ct,St.StrictMode=a,St.Suspense=v,St.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,St.__COMPILER_RUNTIME={__proto__:null,c:function(O){return W.H.useMemoCache(O)}},St.cache=function(O){return function(){return O.apply(null,arguments)}},St.cloneElement=function(O,X,st){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var nt=Q({},O.props),dt=O.key,xt=void 0;if(X!=null)for(vt in X.ref!==void 0&&(xt=void 0),X.key!==void 0&&(dt=""+X.key),X)!Et.call(X,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&X.ref===void 0||(nt[vt]=X[vt]);var vt=arguments.length-2;if(vt===1)nt.children=st;else if(1<vt){for(var de=Array(vt),Ft=0;Ft<vt;Ft++)de[Ft]=arguments[Ft+2];nt.children=de}return V(O.type,dt,void 0,void 0,xt,nt)},St.createContext=function(O){return O={$$typeof:d,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:h,_context:O},O},St.createElement=function(O,X,st){var nt,dt={},xt=null;if(X!=null)for(nt in X.key!==void 0&&(xt=""+X.key),X)Et.call(X,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(dt[nt]=X[nt]);var vt=arguments.length-2;if(vt===1)dt.children=st;else if(1<vt){for(var de=Array(vt),Ft=0;Ft<vt;Ft++)de[Ft]=arguments[Ft+2];dt.children=de}if(O&&O.defaultProps)for(nt in vt=O.defaultProps,vt)dt[nt]===void 0&&(dt[nt]=vt[nt]);return V(O,xt,void 0,void 0,null,dt)},St.createRef=function(){return{current:null}},St.forwardRef=function(O){return{$$typeof:g,render:O}},St.isValidElement=N,St.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:rt}},St.memo=function(O,X){return{$$typeof:p,type:O,compare:X===void 0?null:X}},St.startTransition=function(O){var X=W.T,st={};W.T=st;try{var nt=O(),dt=W.S;dt!==null&&dt(st,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(Nt,ut)}catch(xt){ut(xt)}finally{W.T=X}},St.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},St.use=function(O){return W.H.use(O)},St.useActionState=function(O,X,st){return W.H.useActionState(O,X,st)},St.useCallback=function(O,X){return W.H.useCallback(O,X)},St.useContext=function(O){return W.H.useContext(O)},St.useDebugValue=function(){},St.useDeferredValue=function(O,X){return W.H.useDeferredValue(O,X)},St.useEffect=function(O,X,st){var nt=W.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return nt.useEffect(O,X)},St.useId=function(){return W.H.useId()},St.useImperativeHandle=function(O,X,st){return W.H.useImperativeHandle(O,X,st)},St.useInsertionEffect=function(O,X){return W.H.useInsertionEffect(O,X)},St.useLayoutEffect=function(O,X){return W.H.useLayoutEffect(O,X)},St.useMemo=function(O,X){return W.H.useMemo(O,X)},St.useOptimistic=function(O,X){return W.H.useOptimistic(O,X)},St.useReducer=function(O,X,st){return W.H.useReducer(O,X,st)},St.useRef=function(O){return W.H.useRef(O)},St.useState=function(O){return W.H.useState(O)},St.useSyncExternalStore=function(O,X,st){return W.H.useSyncExternalStore(O,X,st)},St.useTransition=function(){return W.H.useTransition()},St.version="19.1.0",St}var cy;function fd(){return cy||(cy=1,wf.exports=eE()),wf.exports}var kt=fd(),Rf={exports:{}},kl={},Cf={exports:{}},Nf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function nE(){return hy||(hy=1,function(s){function e(G,rt){var ut=G.length;G.push(rt);t:for(;0<ut;){var Nt=ut-1>>>1,O=G[Nt];if(0<o(O,rt))G[Nt]=rt,G[ut]=O,ut=Nt;else break t}}function i(G){return G.length===0?null:G[0]}function a(G){if(G.length===0)return null;var rt=G[0],ut=G.pop();if(ut!==rt){G[0]=ut;t:for(var Nt=0,O=G.length,X=O>>>1;Nt<X;){var st=2*(Nt+1)-1,nt=G[st],dt=st+1,xt=G[dt];if(0>o(nt,ut))dt<O&&0>o(xt,nt)?(G[Nt]=xt,G[dt]=ut,Nt=dt):(G[Nt]=nt,G[st]=ut,Nt=st);else if(dt<O&&0>o(xt,ut))G[Nt]=xt,G[dt]=ut,Nt=dt;else break t}}return rt}function o(G,rt){var ut=G.sortIndex-rt.sortIndex;return ut!==0?ut:G.id-rt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var v=[],p=[],E=1,w=null,R=3,k=!1,Q=!1,et=!1,K=!1,bt=typeof setTimeout=="function"?setTimeout:null,ct=typeof clearTimeout=="function"?clearTimeout:null,ht=typeof setImmediate<"u"?setImmediate:null;function $(G){for(var rt=i(p);rt!==null;){if(rt.callback===null)a(p);else if(rt.startTime<=G)a(p),rt.sortIndex=rt.expirationTime,e(v,rt);else break;rt=i(p)}}function W(G){if(et=!1,$(G),!Q)if(i(v)!==null)Q=!0,Et||(Et=!0,I());else{var rt=i(p);rt!==null&&te(W,rt.startTime-G)}}var Et=!1,V=-1,x=5,N=-1;function M(){return K?!0:!(s.unstable_now()-N<x)}function D(){if(K=!1,Et){var G=s.unstable_now();N=G;var rt=!0;try{t:{Q=!1,et&&(et=!1,ct(V),V=-1),k=!0;var ut=R;try{e:{for($(G),w=i(v);w!==null&&!(w.expirationTime>G&&M());){var Nt=w.callback;if(typeof Nt=="function"){w.callback=null,R=w.priorityLevel;var O=Nt(w.expirationTime<=G);if(G=s.unstable_now(),typeof O=="function"){w.callback=O,$(G),rt=!0;break e}w===i(v)&&a(v),$(G)}else a(v);w=i(v)}if(w!==null)rt=!0;else{var X=i(p);X!==null&&te(W,X.startTime-G),rt=!1}}break t}finally{w=null,R=ut,k=!1}rt=void 0}}finally{rt?I():Et=!1}}}var I;if(typeof ht=="function")I=function(){ht(D)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,Wt=S.port2;S.port1.onmessage=D,I=function(){Wt.postMessage(null)}}else I=function(){bt(D,0)};function te(G,rt){V=bt(function(){G(s.unstable_now())},rt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_next=function(G){switch(R){case 1:case 2:case 3:var rt=3;break;default:rt=R}var ut=R;R=rt;try{return G()}finally{R=ut}},s.unstable_requestPaint=function(){K=!0},s.unstable_runWithPriority=function(G,rt){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ut=R;R=G;try{return rt()}finally{R=ut}},s.unstable_scheduleCallback=function(G,rt,ut){var Nt=s.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Nt+ut:Nt):ut=Nt,G){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ut+O,G={id:E++,callback:rt,priorityLevel:G,startTime:ut,expirationTime:O,sortIndex:-1},ut>Nt?(G.sortIndex=ut,e(p,G),i(v)===null&&G===i(p)&&(et?(ct(V),V=-1):et=!0,te(W,ut-Nt))):(G.sortIndex=O,e(v,G),Q||k||(Q=!0,Et||(Et=!0,I()))),G},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(G){var rt=R;return function(){var ut=R;R=rt;try{return G.apply(this,arguments)}finally{R=ut}}}}(Nf)),Nf}var fy;function iE(){return fy||(fy=1,Cf.exports=nE()),Cf.exports}var Df={exports:{}},He={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function rE(){if(dy)return He;dy=1;var s=fd();function e(v){var p="https://react.dev/errors/"+v;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)p+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+v+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(v,p,E){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:v,containerInfo:p,implementation:E}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,p){if(v==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return He.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,He.createPortal=function(v,p){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return h(v,p,null,E)},He.flushSync=function(v){var p=d.T,E=a.p;try{if(d.T=null,a.p=2,v)return v()}finally{d.T=p,a.p=E,a.d.f()}},He.preconnect=function(v,p){typeof v=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(v,p))},He.prefetchDNS=function(v){typeof v=="string"&&a.d.D(v)},He.preinit=function(v,p){if(typeof v=="string"&&p&&typeof p.as=="string"){var E=p.as,w=g(E,p.crossOrigin),R=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;E==="style"?a.d.S(v,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:w,integrity:R,fetchPriority:k}):E==="script"&&a.d.X(v,{crossOrigin:w,integrity:R,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},He.preinitModule=function(v,p){if(typeof v=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var E=g(p.as,p.crossOrigin);a.d.M(v,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(v)},He.preload=function(v,p){if(typeof v=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var E=p.as,w=g(E,p.crossOrigin);a.d.L(v,E,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},He.preloadModule=function(v,p){if(typeof v=="string")if(p){var E=g(p.as,p.crossOrigin);a.d.m(v,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(v)},He.requestFormReset=function(v){a.d.r(v)},He.unstable_batchedUpdates=function(v,p){return v(p)},He.useFormState=function(v,p,E){return d.H.useFormState(v,p,E)},He.useFormStatus=function(){return d.H.useHostTransitionStatus()},He.version="19.1.0",He}var my;function sE(){if(my)return Df.exports;my=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Df.exports=rE(),Df.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function aE(){if(gy)return kl;gy=1;var s=iE(),e=fd(),i=sE();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(h(t)!==t)throw Error(a(188))}function v(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(a(188));return n!==t?null:t}for(var r=t,l=n;;){var c=r.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){r=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===r)return g(c),t;if(f===l)return g(c),n;f=f.sibling}throw Error(a(188))}if(r.return!==l.return)r=c,l=f;else{for(var _=!1,T=c.child;T;){if(T===r){_=!0,r=c,l=f;break}if(T===l){_=!0,l=c,r=f;break}T=T.sibling}if(!_){for(T=f.child;T;){if(T===r){_=!0,r=f,l=c;break}if(T===l){_=!0,l=f,r=c;break}T=T.sibling}if(!_)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:n}function p(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=p(t),n!==null)return n;t=t.sibling}return null}var E=Object.assign,w=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),et=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),bt=Symbol.for("react.provider"),ct=Symbol.for("react.consumer"),ht=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Et=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var S=Symbol.for("react.client.reference");function Wt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===S?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Q:return"Fragment";case K:return"Profiler";case et:return"StrictMode";case W:return"Suspense";case Et:return"SuspenseList";case N:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case ht:return(t.displayName||"Context")+".Provider";case ct:return(t._context.displayName||"Context")+".Consumer";case $:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return n=t.displayName||null,n!==null?n:Wt(t.type)||"Memo";case x:n=t._payload,t=t._init;try{return Wt(t(n))}catch{}}return null}var te=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},Nt=[],O=-1;function X(t){return{current:t}}function st(t){0>O||(t.current=Nt[O],Nt[O]=null,O--)}function nt(t,n){O++,Nt[O]=t.current,t.current=n}var dt=X(null),xt=X(null),vt=X(null),de=X(null);function Ft(t,n){switch(nt(vt,n),nt(xt,t),nt(dt,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?jp(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=jp(n),t=Up(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}st(dt),nt(dt,t)}function gn(){st(dt),st(xt),st(vt)}function Pn(t){t.memoizedState!==null&&nt(de,t);var n=dt.current,r=Up(n,t.type);n!==r&&(nt(xt,t),nt(dt,r))}function Dn(t){xt.current===t&&(st(dt),st(xt)),de.current===t&&(st(de),Il._currentValue=ut)}var xr=Object.prototype.hasOwnProperty,Sr=s.unstable_scheduleCallback,wr=s.unstable_cancelCallback,Ca=s.unstable_shouldYield,oo=s.unstable_requestPaint,pn=s.unstable_now,xc=s.unstable_getCurrentPriorityLevel,Na=s.unstable_ImmediatePriority,ys=s.unstable_UserBlockingPriority,Rr=s.unstable_NormalPriority,Sc=s.unstable_LowPriority,vs=s.unstable_IdlePriority,Da=s.log,uo=s.unstable_setDisableYieldValue,ae=null,Ht=null;function sn(t){if(typeof Da=="function"&&uo(t),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(ae,t)}catch{}}var Be=Math.clz32?Math.clz32:Cr,co=Math.log,wc=Math.LN2;function Cr(t){return t>>>=0,t===0?32:31-(co(t)/wc|0)|0}var Nr=256,Dr=4194304;function In(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function _s(t,n,r){var l=t.pendingLanes;if(l===0)return 0;var c=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?c=In(l):(_&=T,_!==0?c=In(_):r||(r=T&~t,r!==0&&(c=In(r))))):(T=l&~f,T!==0?c=In(T):_!==0?c=In(_):r||(r=l&~t,r!==0&&(c=In(r)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,r=n&-n,f>=r||f===32&&(r&4194048)!==0)?n:c}function Ir(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Ia(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Va(){var t=Nr;return Nr<<=1,(Nr&4194048)===0&&(Nr=256),t}function Oa(){var t=Dr;return Dr<<=1,(Dr&62914560)===0&&(Dr=4194304),t}function ai(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function li(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Ma(t,n,r,l,c,f){var _=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var T=t.entanglements,C=t.expirationTimes,z=t.hiddenUpdates;for(r=_&~r;0<r;){var F=31-Be(r),Z=1<<F;T[F]=0,C[F]=-1;var B=z[F];if(B!==null)for(z[F]=null,F=0;F<B.length;F++){var q=B[F];q!==null&&(q.lane&=-536870913)}r&=~Z}l!==0&&zn(t,l,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~n))}function zn(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Be(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|r&4194090}function ja(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var l=31-Be(r),c=1<<l;c&n|t[l]&n&&(t[l]|=n),r&=~c}}function Ui(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function bs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ki(){var t=rt.p;return t!==0?t:(t=window.event,t===void 0?32:ey(t.type))}function ho(t,n){var r=rt.p;try{return rt.p=t,n()}finally{rt.p=r}}var ne=Math.random().toString(36).slice(2),be="__reactFiber$"+ne,me="__reactProps$"+ne,yn="__reactContainer$"+ne,Ua="__reactEvents$"+ne,Rc="__reactListeners$"+ne,Li="__reactHandles$"+ne,fo="__reactResources$"+ne,Vr="__reactMarker$"+ne;function Pi(t){delete t[be],delete t[me],delete t[Ua],delete t[Rc],delete t[Li]}function oi(t){var n=t[be];if(n)return n;for(var r=t.parentNode;r;){if(n=r[yn]||r[be]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=zp(t);t!==null;){if(r=t[be])return r;t=zp(t)}return n}t=r,r=t.parentNode}return null}function Bn(t){if(t=t[be]||t[yn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function qn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Ye(t){var n=t[fo];return n||(n=t[fo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ue(t){t[Vr]=!0}var ka=new Set,Es={};function Vn(t,n){ui(t,n),ui(t+"Capture",n)}function ui(t,n){for(Es[t]=n,t=0;t<n.length;t++)ka.add(n[t])}var mo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),go={},Or={};function po(t){return xr.call(Or,t)?!0:xr.call(go,t)?!1:mo.test(t)?Or[t]=!0:(go[t]=!0,!1)}function zi(t,n,r){if(po(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function Hn(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Oe(t,n,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+l)}}var Mr,yo;function ci(t){if(Mr===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Mr=n&&n[1]||"",yo=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mr+t+yo}var Ts=!1;function As(t,n){if(!t||Ts)return"";Ts=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(q){var B=q}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(q){B=q}t.call(Z.prototype)}}else{try{throw Error()}catch(q){B=q}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(q){if(q&&B&&typeof q.stack=="string")return[q.stack,B.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],T=f[1];if(_&&T){var C=_.split(`
`),z=T.split(`
`);for(c=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;if(l===C.length||c===z.length)for(l=C.length-1,c=z.length-1;1<=l&&0<=c&&C[l]!==z[c];)c--;for(;1<=l&&0<=c;l--,c--)if(C[l]!==z[c]){if(l!==1||c!==1)do if(l--,c--,0>c||C[l]!==z[c]){var F=`
`+C[l].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=l&&0<=c);break}}}finally{Ts=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ci(r):""}function La(t){switch(t.tag){case 26:case 27:case 5:return ci(t.type);case 16:return ci("Lazy");case 13:return ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return As(t.type,!1);case 11:return As(t.type.render,!1);case 1:return As(t.type,!0);case 31:return ci("Activity");default:return""}}function xs(t){try{var n="";do n+=La(t),t=t.return;while(t);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Ke(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pa(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Cc(t){var n=Pa(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(_){l=""+_,f.call(this,_)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Ss(t){t._valueTracker||(t._valueTracker=Cc(t))}function za(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return t&&(l=Pa(t)?t.checked?"true":"false":t.value),t=l,t!==r?(n.setValue(t),!0):!1}function jr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Nc=/[\n"\\]/g;function ge(t){return t.replace(Nc,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function an(t,n,r,l,c,f,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),n!=null?_==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ke(n)):t.value!==""+Ke(n)&&(t.value=""+Ke(n)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),n!=null?Bi(t,_,Ke(n)):r!=null?Bi(t,_,Ke(r)):l!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Ke(T):t.removeAttribute("name")}function Ur(t,n,r,l,c,f,_,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;r=r!=null?""+Ke(r):"",n=n!=null?""+Ke(n):r,T||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function Bi(t,n,r){n==="number"&&jr(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function hi(t,n,r,l){if(t=t.options,n){n={};for(var c=0;c<r.length;c++)n["$"+r[c]]=!0;for(r=0;r<t.length;r++)c=n.hasOwnProperty("$"+t[r].value),t[r].selected!==c&&(t[r].selected=c),c&&l&&(t[r].defaultSelected=!0)}else{for(r=""+Ke(r),n=null,c=0;c<t.length;c++){if(t[c].value===r){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Yt(t,n,r){if(n!=null&&(n=""+Ke(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+Ke(r):""}function kr(t,n,r,l){if(n==null){if(l!=null){if(r!=null)throw Error(a(92));if(te(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),n=r}r=Ke(n),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l)}function vn(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var Lr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vo(t,n,r){var l=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,r):typeof r!="number"||r===0||Lr.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function Ba(t,n,r){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&r[c]!==l&&vo(t,c,l)}else for(var f in n)n.hasOwnProperty(f)&&vo(t,f,n[f])}function qa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ws(t){return Ic.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var fi=null;function _n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var di=null,mi=null;function Ha(t){var n=Bn(t);if(n&&(t=n.stateNode)){var r=t[me]||null;t:switch(t=n.stateNode,n.type){case"input":if(an(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ge(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==t&&l.form===t.form){var c=l[me]||null;if(!c)throw Error(a(90));an(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<r.length;n++)l=r[n],l.form===t.form&&za(l)}break t;case"textarea":Yt(t,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&hi(t,!!r.multiple,n,!1)}}}var Gn=!1;function _o(t,n,r){if(Gn)return t(n,r);Gn=!0;try{var l=t(n);return l}finally{if(Gn=!1,(di!==null||mi!==null)&&(fu(),di&&(n=di,t=mi,mi=di=null,Ha(n),t)))for(n=0;n<t.length;n++)Ha(t[n])}}function Pr(t,n){var r=t.stateNode;if(r===null)return null;var l=r[me]||null;if(l===null)return null;r=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,n,typeof r));return r}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bn=!1;if(On)try{var zr={};Object.defineProperty(zr,"passive",{get:function(){bn=!0}}),window.addEventListener("test",zr,zr),window.removeEventListener("test",zr,zr)}catch{bn=!1}var Qn=null,qi=null,gi=null;function Ga(){if(gi)return gi;var t,n=qi,r=n.length,l,c="value"in Qn?Qn.value:Qn.textContent,f=c.length;for(t=0;t<r&&n[t]===c[t];t++);var _=r-t;for(l=1;l<=_&&n[r-l]===c[f-l];l++);return gi=c.slice(t,1<l?1-l:void 0)}function Fn(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Yn(){return!0}function Qa(){return!1}function Re(t){function n(r,l,c,f,_){this._reactName=r,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(r=t[T],this[T]=r?r(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Yn:Qa,this.isPropagationStopped=Qa,this}return E(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),n}var Bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rs=Re(Bt),Br=E({},Bt,{view:0,detail:0}),bo=Re(Br),Cs,Ns,Kn,qr=E({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kn&&(Kn&&t.type==="mousemove"?(Cs=t.screenX-Kn.screenX,Ns=t.screenY-Kn.screenY):Ns=Cs=0,Kn=t),Cs)},movementY:function(t){return"movementY"in t?t.movementY:Ns}}),En=Re(qr),Eo=E({},qr,{dataTransfer:0}),Vc=Re(Eo),Hr=E({},Br,{relatedTarget:0}),Ds=Re(Hr),Fa=E({},Bt,{animationName:0,elapsedTime:0,pseudoElement:0}),Is=Re(Fa),To=E({},Bt,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vs=Re(To),Oc=E({},Bt,{data:0}),Ya=Re(Oc),Gr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ao={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ka(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=xo[t])?!!n[t]:!1}function Qr(){return Ka}var So=E({},Br,{key:function(t){if(t.key){var n=Gr[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Fn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ao[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(t){return t.type==="keypress"?Fn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Os=Re(So),wo=E({},qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xa=Re(wo),pi=E({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),Ro=Re(pi),Co=E({},Bt,{propertyName:0,elapsedTime:0,pseudoElement:0}),No=Re(Co),Do=E({},qr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ms=Re(Do),Xe=E({},Bt,{newState:0,oldState:0}),Io=Re(Xe),Vo=[9,13,27,32],Xn=On&&"CompositionEvent"in window,u=null;On&&"documentMode"in document&&(u=document.documentMode);var m=On&&"TextEvent"in window&&!u,y=On&&(!Xn||u&&8<u&&11>=u),A=" ",L=!1;function H(t,n){switch(t){case"keyup":return Vo.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function it(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ot=!1;function Ee(t,n){switch(t){case"compositionend":return it(n);case"keypress":return n.which!==32?null:(L=!0,A);case"textInput":return t=n.data,t===A&&L?null:t;default:return null}}function Mt(t,n){if(Ot)return t==="compositionend"||!Xn&&H(t,n)?(t=Ga(),gi=qi=Qn=null,Ot=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return y&&n.locale!=="ko"?null:n.data;default:return null}}var Ce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Te(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Ce[t.type]:n==="textarea"}function yi(t,n,r,l){di?mi?mi.push(l):mi=[l]:di=l,n=vu(n,"onChange"),0<n.length&&(r=new Rs("onChange","change",null,r,l),t.push({event:r,listeners:n}))}var Me=null,$n=null;function $a(t){Dp(t,0)}function Oo(t){var n=qn(t);if(za(n))return t}function Zd(t,n){if(t==="change")return n}var Jd=!1;if(On){var Mc;if(On){var jc="oninput"in document;if(!jc){var Wd=document.createElement("div");Wd.setAttribute("oninput","return;"),jc=typeof Wd.oninput=="function"}Mc=jc}else Mc=!1;Jd=Mc&&(!document.documentMode||9<document.documentMode)}function tm(){Me&&(Me.detachEvent("onpropertychange",em),$n=Me=null)}function em(t){if(t.propertyName==="value"&&Oo($n)){var n=[];yi(n,$n,t,_n(t)),_o($a,n)}}function N_(t,n,r){t==="focusin"?(tm(),Me=n,$n=r,Me.attachEvent("onpropertychange",em)):t==="focusout"&&tm()}function D_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Oo($n)}function I_(t,n){if(t==="click")return Oo(n)}function V_(t,n){if(t==="input"||t==="change")return Oo(n)}function O_(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var ln=typeof Object.is=="function"?Object.is:O_;function Za(t,n){if(ln(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var c=r[l];if(!xr.call(n,c)||!ln(t[c],n[c]))return!1}return!0}function nm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function im(t,n){var r=nm(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=n&&l>=n)return{node:r,offset:n-t};t=l}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=nm(r)}}function rm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?rm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function sm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=jr(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=jr(t.document)}return n}function Uc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var M_=On&&"documentMode"in document&&11>=document.documentMode,js=null,kc=null,Ja=null,Lc=!1;function am(t,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lc||js==null||js!==jr(l)||(l=js,"selectionStart"in l&&Uc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Ja&&Za(Ja,l)||(Ja=l,l=vu(kc,"onSelect"),0<l.length&&(n=new Rs("onSelect","select",null,n,r),t.push({event:n,listeners:l}),n.target=js)))}function Fr(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var Us={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},Pc={},lm={};On&&(lm=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Yr(t){if(Pc[t])return Pc[t];if(!Us[t])return t;var n=Us[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in lm)return Pc[t]=n[r];return t}var om=Yr("animationend"),um=Yr("animationiteration"),cm=Yr("animationstart"),j_=Yr("transitionrun"),U_=Yr("transitionstart"),k_=Yr("transitioncancel"),hm=Yr("transitionend"),fm=new Map,zc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zc.push("scrollEnd");function Mn(t,n){fm.set(t,n),Vn(n,[t])}var dm=new WeakMap;function Tn(t,n){if(typeof t=="object"&&t!==null){var r=dm.get(t);return r!==void 0?r:(n={value:t,source:n,stack:xs(n)},dm.set(t,n),n)}return{value:t,source:n,stack:xs(n)}}var An=[],ks=0,Bc=0;function Mo(){for(var t=ks,n=Bc=ks=0;n<t;){var r=An[n];An[n++]=null;var l=An[n];An[n++]=null;var c=An[n];An[n++]=null;var f=An[n];if(An[n++]=null,l!==null&&c!==null){var _=l.pending;_===null?c.next=c:(c.next=_.next,_.next=c),l.pending=c}f!==0&&mm(r,c,f)}}function jo(t,n,r,l){An[ks++]=t,An[ks++]=n,An[ks++]=r,An[ks++]=l,Bc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function qc(t,n,r,l){return jo(t,n,r,l),Uo(t)}function Ls(t,n){return jo(t,null,null,n),Uo(t)}function mm(t,n,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var c=!1,f=t.return;f!==null;)f.childLanes|=r,l=f.alternate,l!==null&&(l.childLanes|=r),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&n!==null&&(c=31-Be(r),t=f.hiddenUpdates,l=t[c],l===null?t[c]=[n]:l.push(n),n.lane=r|536870912),f):null}function Uo(t){if(50<Al)throw Al=0,Kh=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Ps={};function L_(t,n,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,n,r,l){return new L_(t,n,r,l)}function Hc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vi(t,n){var r=t.alternate;return r===null?(r=on(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function gm(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function ko(t,n,r,l,c,f){var _=0;if(l=t,typeof t=="function")Hc(t)&&(_=1);else if(typeof t=="string")_=zb(t,r,dt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case N:return t=on(31,r,n,c),t.elementType=N,t.lanes=f,t;case Q:return Kr(r.children,c,f,n);case et:_=8,c|=24;break;case K:return t=on(12,r,n,c|2),t.elementType=K,t.lanes=f,t;case W:return t=on(13,r,n,c),t.elementType=W,t.lanes=f,t;case Et:return t=on(19,r,n,c),t.elementType=Et,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bt:case ht:_=10;break t;case ct:_=9;break t;case $:_=11;break t;case V:_=14;break t;case x:_=16,l=null;break t}_=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=on(_,r,n,c),n.elementType=t,n.type=l,n.lanes=f,n}function Kr(t,n,r,l){return t=on(7,t,l,n),t.lanes=r,t}function Gc(t,n,r){return t=on(6,t,null,n),t.lanes=r,t}function Qc(t,n,r){return n=on(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var zs=[],Bs=0,Lo=null,Po=0,xn=[],Sn=0,Xr=null,_i=1,bi="";function $r(t,n){zs[Bs++]=Po,zs[Bs++]=Lo,Lo=t,Po=n}function pm(t,n,r){xn[Sn++]=_i,xn[Sn++]=bi,xn[Sn++]=Xr,Xr=t;var l=_i;t=bi;var c=32-Be(l)-1;l&=~(1<<c),r+=1;var f=32-Be(n)+c;if(30<f){var _=c-c%5;f=(l&(1<<_)-1).toString(32),l>>=_,c-=_,_i=1<<32-Be(n)+c|r<<c|l,bi=f+t}else _i=1<<f|r<<c|l,bi=t}function Fc(t){t.return!==null&&($r(t,1),pm(t,1,0))}function Yc(t){for(;t===Lo;)Lo=zs[--Bs],zs[Bs]=null,Po=zs[--Bs],zs[Bs]=null;for(;t===Xr;)Xr=xn[--Sn],xn[Sn]=null,bi=xn[--Sn],xn[Sn]=null,_i=xn[--Sn],xn[Sn]=null}var $e=null,le=null,zt=!1,Zr=null,Zn=!1,Kc=Error(a(519));function Jr(t){var n=Error(a(418,""));throw el(Tn(n,t)),Kc}function ym(t){var n=t.stateNode,r=t.type,l=t.memoizedProps;switch(n[be]=t,n[me]=l,r){case"dialog":It("cancel",n),It("close",n);break;case"iframe":case"object":case"embed":It("load",n);break;case"video":case"audio":for(r=0;r<Sl.length;r++)It(Sl[r],n);break;case"source":It("error",n);break;case"img":case"image":case"link":It("error",n),It("load",n);break;case"details":It("toggle",n);break;case"input":It("invalid",n),Ur(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Ss(n);break;case"select":It("invalid",n);break;case"textarea":It("invalid",n),kr(n,l.value,l.defaultValue,l.children),Ss(n)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||l.suppressHydrationWarning===!0||Mp(n.textContent,r)?(l.popover!=null&&(It("beforetoggle",n),It("toggle",n)),l.onScroll!=null&&It("scroll",n),l.onScrollEnd!=null&&It("scrollend",n),l.onClick!=null&&(n.onclick=_u),n=!0):n=!1,n||Jr(t)}function vm(t){for($e=t.return;$e;)switch($e.tag){case 5:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:$e=$e.return}}function Wa(t){if(t!==$e)return!1;if(!zt)return vm(t),zt=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||hf(t.type,t.memoizedProps)),r=!r),r&&le&&Jr(t),vm(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(r=t.data,r==="/$"){if(n===0){le=Un(t.nextSibling);break t}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;t=t.nextSibling}le=null}}else n===27?(n=le,rr(t.type)?(t=gf,gf=null,le=t):le=n):le=$e?Un(t.stateNode.nextSibling):null;return!0}function tl(){le=$e=null,zt=!1}function _m(){var t=Zr;return t!==null&&(tn===null?tn=t:tn.push.apply(tn,t),Zr=null),t}function el(t){Zr===null?Zr=[t]:Zr.push(t)}var Xc=X(null),Wr=null,Ei=null;function Hi(t,n,r){nt(Xc,n._currentValue),n._currentValue=r}function Ti(t){t._currentValue=Xc.current,st(Xc)}function $c(t,n,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===r)break;t=t.return}}function Zc(t,n,r,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var _=c.child;f=f.firstContext;t:for(;f!==null;){var T=f;f=c;for(var C=0;C<n.length;C++)if(T.context===n[C]){f.lanes|=r,T=f.alternate,T!==null&&(T.lanes|=r),$c(f.return,r,t),l||(_=null);break t}f=T.next}}else if(c.tag===18){if(_=c.return,_===null)throw Error(a(341));_.lanes|=r,f=_.alternate,f!==null&&(f.lanes|=r),$c(_,r,t),_=null}else _=c.child;if(_!==null)_.return=c;else for(_=c;_!==null;){if(_===t){_=null;break}if(c=_.sibling,c!==null){c.return=_.return,_=c;break}_=_.return}c=_}}function nl(t,n,r,l){t=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var _=c.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var T=c.type;ln(c.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(c===de.current){if(_=c.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Il):t=[Il])}c=c.return}t!==null&&Zc(n,t,r,l),n.flags|=262144}function zo(t){for(t=t.firstContext;t!==null;){if(!ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ts(t){Wr=t,Ei=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function qe(t){return bm(Wr,t)}function Bo(t,n){return Wr===null&&ts(t),bm(t,n)}function bm(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Ei===null){if(t===null)throw Error(a(308));Ei=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Ei=Ei.next=n;return r}var P_=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},z_=s.unstable_scheduleCallback,B_=s.unstable_NormalPriority,Ae={$$typeof:ht,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jc(){return{controller:new P_,data:new Map,refCount:0}}function il(t){t.refCount--,t.refCount===0&&z_(B_,function(){t.controller.abort()})}var rl=null,Wc=0,qs=0,Hs=null;function q_(t,n){if(rl===null){var r=rl=[];Wc=0,qs=ef(),Hs={status:"pending",value:void 0,then:function(l){r.push(l)}}}return Wc++,n.then(Em,Em),n}function Em(){if(--Wc===0&&rl!==null){Hs!==null&&(Hs.status="fulfilled");var t=rl;rl=null,qs=0,Hs=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function H_(t,n){var r=[],l={status:"pending",value:null,reason:null,then:function(c){r.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<r.length;c++)(0,r[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<r.length;c++)(0,r[c])(void 0)}),l}var Tm=G.S;G.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&q_(t,n),Tm!==null&&Tm(t,n)};var es=X(null);function th(){var t=es.current;return t!==null?t:Jt.pooledCache}function qo(t,n){n===null?nt(es,es.current):nt(es,n.pool)}function Am(){var t=th();return t===null?null:{parent:Ae._currentValue,pool:t}}var sl=Error(a(460)),xm=Error(a(474)),Ho=Error(a(542)),eh={then:function(){}};function Sm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Go(){}function wm(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(Go,Go),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Cm(t),t;default:if(typeof n.status=="string")n.then(Go,Go);else{if(t=Jt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Cm(t),t}throw al=n,sl}}var al=null;function Rm(){if(al===null)throw Error(a(459));var t=al;return al=null,t}function Cm(t){if(t===sl||t===Ho)throw Error(a(483))}var Gi=!1;function nh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ih(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Qi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(t,n,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Gt&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=Uo(t),mm(t,null,r),n}return jo(t,l,n,r),Uo(t)}function ll(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,r|=l,n.lanes=r,ja(t,r)}}function rh(t,n){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var c=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var _={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?c=f=_:f=f.next=_,r=r.next}while(r!==null);f===null?c=f=n:f=f.next=n}else c=f=n;r={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var sh=!1;function ol(){if(sh){var t=Hs;if(t!==null)throw t}}function ul(t,n,r,l){sh=!1;var c=t.updateQueue;Gi=!1;var f=c.firstBaseUpdate,_=c.lastBaseUpdate,T=c.shared.pending;if(T!==null){c.shared.pending=null;var C=T,z=C.next;C.next=null,_===null?f=z:_.next=z,_=C;var F=t.alternate;F!==null&&(F=F.updateQueue,T=F.lastBaseUpdate,T!==_&&(T===null?F.firstBaseUpdate=z:T.next=z,F.lastBaseUpdate=C))}if(f!==null){var Z=c.baseState;_=0,F=z=C=null,T=f;do{var B=T.lane&-536870913,q=B!==T.lane;if(q?(jt&B)===B:(l&B)===B){B!==0&&B===qs&&(sh=!0),F!==null&&(F=F.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var _t=t,gt=T;B=n;var $t=r;switch(gt.tag){case 1:if(_t=gt.payload,typeof _t=="function"){Z=_t.call($t,Z,B);break t}Z=_t;break t;case 3:_t.flags=_t.flags&-65537|128;case 0:if(_t=gt.payload,B=typeof _t=="function"?_t.call($t,Z,B):_t,B==null)break t;Z=E({},Z,B);break t;case 2:Gi=!0}}B=T.callback,B!==null&&(t.flags|=64,q&&(t.flags|=8192),q=c.callbacks,q===null?c.callbacks=[B]:q.push(B))}else q={lane:B,tag:T.tag,payload:T.payload,callback:T.callback,next:null},F===null?(z=F=q,C=Z):F=F.next=q,_|=B;if(T=T.next,T===null){if(T=c.shared.pending,T===null)break;q=T,T=q.next,q.next=null,c.lastBaseUpdate=q,c.shared.pending=null}}while(!0);F===null&&(C=Z),c.baseState=C,c.firstBaseUpdate=z,c.lastBaseUpdate=F,f===null&&(c.shared.lanes=0),tr|=_,t.lanes=_,t.memoizedState=Z}}function Nm(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function Dm(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Nm(r[t],n)}var Gs=X(null),Qo=X(0);function Im(t,n){t=Ni,nt(Qo,t),nt(Gs,n),Ni=t|n.baseLanes}function ah(){nt(Qo,Ni),nt(Gs,Gs.current)}function lh(){Ni=Qo.current,st(Gs),st(Qo)}var Yi=0,wt=null,Kt=null,pe=null,Fo=!1,Qs=!1,ns=!1,Yo=0,cl=0,Fs=null,G_=0;function ce(){throw Error(a(321))}function oh(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!ln(t[r],n[r]))return!1;return!0}function uh(t,n,r,l,c,f){return Yi=f,wt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,G.H=t===null||t.memoizedState===null?mg:gg,ns=!1,f=r(l,c),ns=!1,Qs&&(f=Om(n,r,l,c)),Vm(t),f}function Vm(t){G.H=Wo;var n=Kt!==null&&Kt.next!==null;if(Yi=0,pe=Kt=wt=null,Fo=!1,cl=0,Fs=null,n)throw Error(a(300));t===null||Ne||(t=t.dependencies,t!==null&&zo(t)&&(Ne=!0))}function Om(t,n,r,l){wt=t;var c=0;do{if(Qs&&(Fs=null),cl=0,Qs=!1,25<=c)throw Error(a(301));if(c+=1,pe=Kt=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=Z_,f=n(r,l)}while(Qs);return f}function Q_(){var t=G.H,n=t.useState()[0];return n=typeof n.then=="function"?hl(n):n,t=t.useState()[0],(Kt!==null?Kt.memoizedState:null)!==t&&(wt.flags|=1024),n}function ch(){var t=Yo!==0;return Yo=0,t}function hh(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function fh(t){if(Fo){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Fo=!1}Yi=0,pe=Kt=wt=null,Qs=!1,cl=Yo=0,Fs=null}function Je(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?wt.memoizedState=pe=t:pe=pe.next=t,pe}function ye(){if(Kt===null){var t=wt.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var n=pe===null?wt.memoizedState:pe.next;if(n!==null)pe=n,Kt=t;else{if(t===null)throw wt.alternate===null?Error(a(467)):Error(a(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},pe===null?wt.memoizedState=pe=t:pe=pe.next=t}return pe}function dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hl(t){var n=cl;return cl+=1,Fs===null&&(Fs=[]),t=wm(Fs,t,n),n=wt,(pe===null?n.memoizedState:pe.next)===null&&(n=n.alternate,G.H=n===null||n.memoizedState===null?mg:gg),t}function Ko(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return hl(t);if(t.$$typeof===ht)return qe(t)}throw Error(a(438,String(t)))}function mh(t){var n=null,r=wt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var l=wt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=dh(),wt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),l=0;l<t;l++)r[l]=M;return n.index++,r}function Ai(t,n){return typeof n=="function"?n(t):n}function Xo(t){var n=ye();return gh(n,Kt,t)}function gh(t,n,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var c=t.baseQueue,f=l.pending;if(f!==null){if(c!==null){var _=c.next;c.next=f.next,f.next=_}n.baseQueue=c=f,l.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{n=c.next;var T=_=null,C=null,z=n,F=!1;do{var Z=z.lane&-536870913;if(Z!==z.lane?(jt&Z)===Z:(Yi&Z)===Z){var B=z.revertLane;if(B===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),Z===qs&&(F=!0);else if((Yi&B)===B){z=z.next,B===qs&&(F=!0);continue}else Z={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(T=C=Z,_=f):C=C.next=Z,wt.lanes|=B,tr|=B;Z=z.action,ns&&r(f,Z),f=z.hasEagerState?z.eagerState:r(f,Z)}else B={lane:Z,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},C===null?(T=C=B,_=f):C=C.next=B,wt.lanes|=Z,tr|=Z;z=z.next}while(z!==null&&z!==n);if(C===null?_=f:C.next=T,!ln(f,t.memoizedState)&&(Ne=!0,F&&(r=Hs,r!==null)))throw r;t.memoizedState=f,t.baseState=_,t.baseQueue=C,l.lastRenderedState=f}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function ph(t){var n=ye(),r=n.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,c=r.pending,f=n.memoizedState;if(c!==null){r.pending=null;var _=c=c.next;do f=t(f,_.action),_=_.next;while(_!==c);ln(f,n.memoizedState)||(Ne=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),r.lastRenderedState=f}return[f,l]}function Mm(t,n,r){var l=wt,c=ye(),f=zt;if(f){if(r===void 0)throw Error(a(407));r=r()}else r=n();var _=!ln((Kt||c).memoizedState,r);_&&(c.memoizedState=r,Ne=!0),c=c.queue;var T=km.bind(null,l,c,t);if(fl(2048,8,T,[t]),c.getSnapshot!==n||_||pe!==null&&pe.memoizedState.tag&1){if(l.flags|=2048,Ys(9,$o(),Um.bind(null,l,c,r,n),null),Jt===null)throw Error(a(349));f||(Yi&124)!==0||jm(l,n,r)}return r}function jm(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=wt.updateQueue,n===null?(n=dh(),wt.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function Um(t,n,r,l){n.value=r,n.getSnapshot=l,Lm(n)&&Pm(t)}function km(t,n,r){return r(function(){Lm(n)&&Pm(t)})}function Lm(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!ln(t,r)}catch{return!0}}function Pm(t){var n=Ls(t,2);n!==null&&dn(n,t,2)}function yh(t){var n=Je();if(typeof t=="function"){var r=t;if(t=r(),ns){sn(!0);try{r()}finally{sn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},n}function zm(t,n,r,l){return t.baseState=r,gh(t,Kt,typeof l=="function"?l:Ai)}function F_(t,n,r,l,c){if(Jo(t))throw Error(a(485));if(t=n.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};G.T!==null?r(!0):f.isTransition=!1,l(f),r=n.pending,r===null?(f.next=n.pending=f,Bm(n,f)):(f.next=r.next,n.pending=r.next=f)}}function Bm(t,n){var r=n.action,l=n.payload,c=t.state;if(n.isTransition){var f=G.T,_={};G.T=_;try{var T=r(c,l),C=G.S;C!==null&&C(_,T),qm(t,n,T)}catch(z){vh(t,n,z)}finally{G.T=f}}else try{f=r(c,l),qm(t,n,f)}catch(z){vh(t,n,z)}}function qm(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Hm(t,n,l)},function(l){return vh(t,n,l)}):Hm(t,n,r)}function Hm(t,n,r){n.status="fulfilled",n.value=r,Gm(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,Bm(t,r)))}function vh(t,n,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=r,Gm(n),n=n.next;while(n!==l)}t.action=null}function Gm(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Qm(t,n){return n}function Fm(t,n){if(zt){var r=Jt.formState;if(r!==null){t:{var l=wt;if(zt){if(le){e:{for(var c=le,f=Zn;c.nodeType!==8;){if(!f){c=null;break e}if(c=Un(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){le=Un(c.nextSibling),l=c.data==="F!";break t}}Jr(l)}l=!1}l&&(n=r[0])}}return r=Je(),r.memoizedState=r.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qm,lastRenderedState:n},r.queue=l,r=hg.bind(null,wt,l),l.dispatch=r,l=yh(!1),f=Ah.bind(null,wt,!1,l.queue),l=Je(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,r=F_.bind(null,wt,c,f,r),c.dispatch=r,l.memoizedState=t,[n,r,!1]}function Ym(t){var n=ye();return Km(n,Kt,t)}function Km(t,n,r){if(n=gh(t,n,Qm)[0],t=Xo(Ai)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=hl(n)}catch(_){throw _===sl?Ho:_}else l=n;n=ye();var c=n.queue,f=c.dispatch;return r!==n.memoizedState&&(wt.flags|=2048,Ys(9,$o(),Y_.bind(null,c,r),null)),[l,f,t]}function Y_(t,n){t.action=n}function Xm(t){var n=ye(),r=Kt;if(r!==null)return Km(n,r,t);ye(),n=n.memoizedState,r=ye();var l=r.queue.dispatch;return r.memoizedState=t,[n,l,!1]}function Ys(t,n,r,l){return t={tag:t,create:r,deps:l,inst:n,next:null},n=wt.updateQueue,n===null&&(n=dh(),wt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,n.lastEffect=t),t}function $o(){return{destroy:void 0,resource:void 0}}function $m(){return ye().memoizedState}function Zo(t,n,r,l){var c=Je();l=l===void 0?null:l,wt.flags|=t,c.memoizedState=Ys(1|n,$o(),r,l)}function fl(t,n,r,l){var c=ye();l=l===void 0?null:l;var f=c.memoizedState.inst;Kt!==null&&l!==null&&oh(l,Kt.memoizedState.deps)?c.memoizedState=Ys(n,f,r,l):(wt.flags|=t,c.memoizedState=Ys(1|n,f,r,l))}function Zm(t,n){Zo(8390656,8,t,n)}function Jm(t,n){fl(2048,8,t,n)}function Wm(t,n){return fl(4,2,t,n)}function tg(t,n){return fl(4,4,t,n)}function eg(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function ng(t,n,r){r=r!=null?r.concat([t]):null,fl(4,4,eg.bind(null,n,t),r)}function _h(){}function ig(t,n){var r=ye();n=n===void 0?null:n;var l=r.memoizedState;return n!==null&&oh(n,l[1])?l[0]:(r.memoizedState=[t,n],t)}function rg(t,n){var r=ye();n=n===void 0?null:n;var l=r.memoizedState;if(n!==null&&oh(n,l[1]))return l[0];if(l=t(),ns){sn(!0);try{t()}finally{sn(!1)}}return r.memoizedState=[l,n],l}function bh(t,n,r){return r===void 0||(Yi&1073741824)!==0?t.memoizedState=n:(t.memoizedState=r,t=lp(),wt.lanes|=t,tr|=t,r)}function sg(t,n,r,l){return ln(r,n)?r:Gs.current!==null?(t=bh(t,r,l),ln(t,n)||(Ne=!0),t):(Yi&42)===0?(Ne=!0,t.memoizedState=r):(t=lp(),wt.lanes|=t,tr|=t,n)}function ag(t,n,r,l,c){var f=rt.p;rt.p=f!==0&&8>f?f:8;var _=G.T,T={};G.T=T,Ah(t,!1,n,r);try{var C=c(),z=G.S;if(z!==null&&z(T,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var F=H_(C,l);dl(t,n,F,fn(t))}else dl(t,n,l,fn(t))}catch(Z){dl(t,n,{then:function(){},status:"rejected",reason:Z},fn())}finally{rt.p=f,G.T=_}}function K_(){}function Eh(t,n,r,l){if(t.tag!==5)throw Error(a(476));var c=lg(t).queue;ag(t,c,n,ut,r===null?K_:function(){return og(t),r(l)})}function lg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:ut},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function og(t){var n=lg(t).next.queue;dl(t,n,{},fn())}function Th(){return qe(Il)}function ug(){return ye().memoizedState}function cg(){return ye().memoizedState}function X_(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=fn();t=Qi(r);var l=Fi(n,t,r);l!==null&&(dn(l,n,r),ll(l,n,r)),n={cache:Jc()},t.payload=n;return}n=n.return}}function $_(t,n,r){var l=fn();r={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},Jo(t)?fg(n,r):(r=qc(t,n,r,l),r!==null&&(dn(r,t,l),dg(r,n,l)))}function hg(t,n,r){var l=fn();dl(t,n,r,l)}function dl(t,n,r,l){var c={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jo(t))fg(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var _=n.lastRenderedState,T=f(_,r);if(c.hasEagerState=!0,c.eagerState=T,ln(T,_))return jo(t,n,c,0),Jt===null&&Mo(),!1}catch{}finally{}if(r=qc(t,n,c,l),r!==null)return dn(r,t,l),dg(r,n,l),!0}return!1}function Ah(t,n,r,l){if(l={lane:2,revertLane:ef(),action:l,hasEagerState:!1,eagerState:null,next:null},Jo(t)){if(n)throw Error(a(479))}else n=qc(t,r,l,2),n!==null&&dn(n,t,2)}function Jo(t){var n=t.alternate;return t===wt||n!==null&&n===wt}function fg(t,n){Qs=Fo=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function dg(t,n,r){if((r&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,r|=l,n.lanes=r,ja(t,r)}}var Wo={readContext:qe,use:Ko,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce,useHostTransitionStatus:ce,useFormState:ce,useActionState:ce,useOptimistic:ce,useMemoCache:ce,useCacheRefresh:ce},mg={readContext:qe,use:Ko,useCallback:function(t,n){return Je().memoizedState=[t,n===void 0?null:n],t},useContext:qe,useEffect:Zm,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,Zo(4194308,4,eg.bind(null,n,t),r)},useLayoutEffect:function(t,n){return Zo(4194308,4,t,n)},useInsertionEffect:function(t,n){Zo(4,2,t,n)},useMemo:function(t,n){var r=Je();n=n===void 0?null:n;var l=t();if(ns){sn(!0);try{t()}finally{sn(!1)}}return r.memoizedState=[l,n],l},useReducer:function(t,n,r){var l=Je();if(r!==void 0){var c=r(n);if(ns){sn(!0);try{r(n)}finally{sn(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=$_.bind(null,wt,t),[l.memoizedState,t]},useRef:function(t){var n=Je();return t={current:t},n.memoizedState=t},useState:function(t){t=yh(t);var n=t.queue,r=hg.bind(null,wt,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:_h,useDeferredValue:function(t,n){var r=Je();return bh(r,t,n)},useTransition:function(){var t=yh(!1);return t=ag.bind(null,wt,t.queue,!0,!1),Je().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var l=wt,c=Je();if(zt){if(r===void 0)throw Error(a(407));r=r()}else{if(r=n(),Jt===null)throw Error(a(349));(jt&124)!==0||jm(l,n,r)}c.memoizedState=r;var f={value:r,getSnapshot:n};return c.queue=f,Zm(km.bind(null,l,f,t),[t]),l.flags|=2048,Ys(9,$o(),Um.bind(null,l,f,r,n),null),r},useId:function(){var t=Je(),n=Jt.identifierPrefix;if(zt){var r=bi,l=_i;r=(l&~(1<<32-Be(l)-1)).toString(32)+r,n="«"+n+"R"+r,r=Yo++,0<r&&(n+="H"+r.toString(32)),n+="»"}else r=G_++,n="«"+n+"r"+r.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:Th,useFormState:Fm,useActionState:Fm,useOptimistic:function(t){var n=Je();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Ah.bind(null,wt,!0,r),r.dispatch=n,[t,n]},useMemoCache:mh,useCacheRefresh:function(){return Je().memoizedState=X_.bind(null,wt)}},gg={readContext:qe,use:Ko,useCallback:ig,useContext:qe,useEffect:Jm,useImperativeHandle:ng,useInsertionEffect:Wm,useLayoutEffect:tg,useMemo:rg,useReducer:Xo,useRef:$m,useState:function(){return Xo(Ai)},useDebugValue:_h,useDeferredValue:function(t,n){var r=ye();return sg(r,Kt.memoizedState,t,n)},useTransition:function(){var t=Xo(Ai)[0],n=ye().memoizedState;return[typeof t=="boolean"?t:hl(t),n]},useSyncExternalStore:Mm,useId:ug,useHostTransitionStatus:Th,useFormState:Ym,useActionState:Ym,useOptimistic:function(t,n){var r=ye();return zm(r,Kt,t,n)},useMemoCache:mh,useCacheRefresh:cg},Z_={readContext:qe,use:Ko,useCallback:ig,useContext:qe,useEffect:Jm,useImperativeHandle:ng,useInsertionEffect:Wm,useLayoutEffect:tg,useMemo:rg,useReducer:ph,useRef:$m,useState:function(){return ph(Ai)},useDebugValue:_h,useDeferredValue:function(t,n){var r=ye();return Kt===null?bh(r,t,n):sg(r,Kt.memoizedState,t,n)},useTransition:function(){var t=ph(Ai)[0],n=ye().memoizedState;return[typeof t=="boolean"?t:hl(t),n]},useSyncExternalStore:Mm,useId:ug,useHostTransitionStatus:Th,useFormState:Xm,useActionState:Xm,useOptimistic:function(t,n){var r=ye();return Kt!==null?zm(r,Kt,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:mh,useCacheRefresh:cg},Ks=null,ml=0;function tu(t){var n=ml;return ml+=1,Ks===null&&(Ks=[]),wm(Ks,t,n)}function gl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function eu(t,n){throw n.$$typeof===w?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function pg(t){var n=t._init;return n(t._payload)}function yg(t){function n(U,j){if(t){var P=U.deletions;P===null?(U.deletions=[j],U.flags|=16):P.push(j)}}function r(U,j){if(!t)return null;for(;j!==null;)n(U,j),j=j.sibling;return null}function l(U){for(var j=new Map;U!==null;)U.key!==null?j.set(U.key,U):j.set(U.index,U),U=U.sibling;return j}function c(U,j){return U=vi(U,j),U.index=0,U.sibling=null,U}function f(U,j,P){return U.index=P,t?(P=U.alternate,P!==null?(P=P.index,P<j?(U.flags|=67108866,j):P):(U.flags|=67108866,j)):(U.flags|=1048576,j)}function _(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function T(U,j,P,Y){return j===null||j.tag!==6?(j=Gc(P,U.mode,Y),j.return=U,j):(j=c(j,P),j.return=U,j)}function C(U,j,P,Y){var ot=P.type;return ot===Q?F(U,j,P.props.children,Y,P.key):j!==null&&(j.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===x&&pg(ot)===j.type)?(j=c(j,P.props),gl(j,P),j.return=U,j):(j=ko(P.type,P.key,P.props,null,U.mode,Y),gl(j,P),j.return=U,j)}function z(U,j,P,Y){return j===null||j.tag!==4||j.stateNode.containerInfo!==P.containerInfo||j.stateNode.implementation!==P.implementation?(j=Qc(P,U.mode,Y),j.return=U,j):(j=c(j,P.children||[]),j.return=U,j)}function F(U,j,P,Y,ot){return j===null||j.tag!==7?(j=Kr(P,U.mode,Y,ot),j.return=U,j):(j=c(j,P),j.return=U,j)}function Z(U,j,P){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Gc(""+j,U.mode,P),j.return=U,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case R:return P=ko(j.type,j.key,j.props,null,U.mode,P),gl(P,j),P.return=U,P;case k:return j=Qc(j,U.mode,P),j.return=U,j;case x:var Y=j._init;return j=Y(j._payload),Z(U,j,P)}if(te(j)||I(j))return j=Kr(j,U.mode,P,null),j.return=U,j;if(typeof j.then=="function")return Z(U,tu(j),P);if(j.$$typeof===ht)return Z(U,Bo(U,j),P);eu(U,j)}return null}function B(U,j,P,Y){var ot=j!==null?j.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return ot!==null?null:T(U,j,""+P,Y);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case R:return P.key===ot?C(U,j,P,Y):null;case k:return P.key===ot?z(U,j,P,Y):null;case x:return ot=P._init,P=ot(P._payload),B(U,j,P,Y)}if(te(P)||I(P))return ot!==null?null:F(U,j,P,Y,null);if(typeof P.then=="function")return B(U,j,tu(P),Y);if(P.$$typeof===ht)return B(U,j,Bo(U,P),Y);eu(U,P)}return null}function q(U,j,P,Y,ot){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return U=U.get(P)||null,T(j,U,""+Y,ot);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case R:return U=U.get(Y.key===null?P:Y.key)||null,C(j,U,Y,ot);case k:return U=U.get(Y.key===null?P:Y.key)||null,z(j,U,Y,ot);case x:var Ct=Y._init;return Y=Ct(Y._payload),q(U,j,P,Y,ot)}if(te(Y)||I(Y))return U=U.get(P)||null,F(j,U,Y,ot,null);if(typeof Y.then=="function")return q(U,j,P,tu(Y),ot);if(Y.$$typeof===ht)return q(U,j,P,Bo(j,Y),ot);eu(j,Y)}return null}function _t(U,j,P,Y){for(var ot=null,Ct=null,ft=j,pt=j=0,Ie=null;ft!==null&&pt<P.length;pt++){ft.index>pt?(Ie=ft,ft=null):Ie=ft.sibling;var Pt=B(U,ft,P[pt],Y);if(Pt===null){ft===null&&(ft=Ie);break}t&&ft&&Pt.alternate===null&&n(U,ft),j=f(Pt,j,pt),Ct===null?ot=Pt:Ct.sibling=Pt,Ct=Pt,ft=Ie}if(pt===P.length)return r(U,ft),zt&&$r(U,pt),ot;if(ft===null){for(;pt<P.length;pt++)ft=Z(U,P[pt],Y),ft!==null&&(j=f(ft,j,pt),Ct===null?ot=ft:Ct.sibling=ft,Ct=ft);return zt&&$r(U,pt),ot}for(ft=l(ft);pt<P.length;pt++)Ie=q(ft,U,pt,P[pt],Y),Ie!==null&&(t&&Ie.alternate!==null&&ft.delete(Ie.key===null?pt:Ie.key),j=f(Ie,j,pt),Ct===null?ot=Ie:Ct.sibling=Ie,Ct=Ie);return t&&ft.forEach(function(ur){return n(U,ur)}),zt&&$r(U,pt),ot}function gt(U,j,P,Y){if(P==null)throw Error(a(151));for(var ot=null,Ct=null,ft=j,pt=j=0,Ie=null,Pt=P.next();ft!==null&&!Pt.done;pt++,Pt=P.next()){ft.index>pt?(Ie=ft,ft=null):Ie=ft.sibling;var ur=B(U,ft,Pt.value,Y);if(ur===null){ft===null&&(ft=Ie);break}t&&ft&&ur.alternate===null&&n(U,ft),j=f(ur,j,pt),Ct===null?ot=ur:Ct.sibling=ur,Ct=ur,ft=Ie}if(Pt.done)return r(U,ft),zt&&$r(U,pt),ot;if(ft===null){for(;!Pt.done;pt++,Pt=P.next())Pt=Z(U,Pt.value,Y),Pt!==null&&(j=f(Pt,j,pt),Ct===null?ot=Pt:Ct.sibling=Pt,Ct=Pt);return zt&&$r(U,pt),ot}for(ft=l(ft);!Pt.done;pt++,Pt=P.next())Pt=q(ft,U,pt,Pt.value,Y),Pt!==null&&(t&&Pt.alternate!==null&&ft.delete(Pt.key===null?pt:Pt.key),j=f(Pt,j,pt),Ct===null?ot=Pt:Ct.sibling=Pt,Ct=Pt);return t&&ft.forEach(function(Jb){return n(U,Jb)}),zt&&$r(U,pt),ot}function $t(U,j,P,Y){if(typeof P=="object"&&P!==null&&P.type===Q&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case R:t:{for(var ot=P.key;j!==null;){if(j.key===ot){if(ot=P.type,ot===Q){if(j.tag===7){r(U,j.sibling),Y=c(j,P.props.children),Y.return=U,U=Y;break t}}else if(j.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===x&&pg(ot)===j.type){r(U,j.sibling),Y=c(j,P.props),gl(Y,P),Y.return=U,U=Y;break t}r(U,j);break}else n(U,j);j=j.sibling}P.type===Q?(Y=Kr(P.props.children,U.mode,Y,P.key),Y.return=U,U=Y):(Y=ko(P.type,P.key,P.props,null,U.mode,Y),gl(Y,P),Y.return=U,U=Y)}return _(U);case k:t:{for(ot=P.key;j!==null;){if(j.key===ot)if(j.tag===4&&j.stateNode.containerInfo===P.containerInfo&&j.stateNode.implementation===P.implementation){r(U,j.sibling),Y=c(j,P.children||[]),Y.return=U,U=Y;break t}else{r(U,j);break}else n(U,j);j=j.sibling}Y=Qc(P,U.mode,Y),Y.return=U,U=Y}return _(U);case x:return ot=P._init,P=ot(P._payload),$t(U,j,P,Y)}if(te(P))return _t(U,j,P,Y);if(I(P)){if(ot=I(P),typeof ot!="function")throw Error(a(150));return P=ot.call(P),gt(U,j,P,Y)}if(typeof P.then=="function")return $t(U,j,tu(P),Y);if(P.$$typeof===ht)return $t(U,j,Bo(U,P),Y);eu(U,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,j!==null&&j.tag===6?(r(U,j.sibling),Y=c(j,P),Y.return=U,U=Y):(r(U,j),Y=Gc(P,U.mode,Y),Y.return=U,U=Y),_(U)):r(U,j)}return function(U,j,P,Y){try{ml=0;var ot=$t(U,j,P,Y);return Ks=null,ot}catch(ft){if(ft===sl||ft===Ho)throw ft;var Ct=on(29,ft,null,U.mode);return Ct.lanes=Y,Ct.return=U,Ct}finally{}}}var Xs=yg(!0),vg=yg(!1),wn=X(null),Jn=null;function Ki(t){var n=t.alternate;nt(xe,xe.current&1),nt(wn,t),Jn===null&&(n===null||Gs.current!==null||n.memoizedState!==null)&&(Jn=t)}function _g(t){if(t.tag===22){if(nt(xe,xe.current),nt(wn,t),Jn===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Jn=t)}}else Xi()}function Xi(){nt(xe,xe.current),nt(wn,wn.current)}function xi(t){st(wn),Jn===t&&(Jn=null),st(xe)}var xe=X(0);function nu(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||mf(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function xh(t,n,r,l){n=t.memoizedState,r=r(l,n),r=r==null?n:E({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Sh={enqueueSetState:function(t,n,r){t=t._reactInternals;var l=fn(),c=Qi(l);c.payload=n,r!=null&&(c.callback=r),n=Fi(t,c,l),n!==null&&(dn(n,t,l),ll(n,t,l))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var l=fn(),c=Qi(l);c.tag=1,c.payload=n,r!=null&&(c.callback=r),n=Fi(t,c,l),n!==null&&(dn(n,t,l),ll(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=fn(),l=Qi(r);l.tag=2,n!=null&&(l.callback=n),n=Fi(t,l,r),n!==null&&(dn(n,t,r),ll(n,t,r))}};function bg(t,n,r,l,c,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):n.prototype&&n.prototype.isPureReactComponent?!Za(r,l)||!Za(c,f):!0}function Eg(t,n,r,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==t&&Sh.enqueueReplaceState(n,n.state,null)}function is(t,n){var r=n;if("ref"in n){r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}if(t=t.defaultProps){r===n&&(r=E({},r));for(var c in t)r[c]===void 0&&(r[c]=t[c])}return r}var iu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Tg(t){iu(t)}function Ag(t){console.error(t)}function xg(t){iu(t)}function ru(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Sg(t,n,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function wh(t,n,r){return r=Qi(r),r.tag=3,r.payload={element:null},r.callback=function(){ru(t,n)},r}function wg(t){return t=Qi(t),t.tag=3,t}function Rg(t,n,r,l){var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var f=l.value;t.payload=function(){return c(f)},t.callback=function(){Sg(n,r,l)}}var _=r.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Sg(n,r,l),typeof c!="function"&&(er===null?er=new Set([this]):er.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function J_(t,n,r,l,c){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=r.alternate,n!==null&&nl(n,r,c,!0),r=wn.current,r!==null){switch(r.tag){case 13:return Jn===null?$h():r.alternate===null&&oe===0&&(oe=3),r.flags&=-257,r.flags|=65536,r.lanes=c,l===eh?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([l]):n.add(l),Jh(t,l,c)),!1;case 22:return r.flags|=65536,l===eh?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([l]):r.add(l)),Jh(t,l,c)),!1}throw Error(a(435,r.tag))}return Jh(t,l,c),$h(),!1}if(zt)return n=wn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==Kc&&(t=Error(a(422),{cause:l}),el(Tn(t,r)))):(l!==Kc&&(n=Error(a(423),{cause:l}),el(Tn(n,r))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=Tn(l,r),c=wh(t.stateNode,l,c),rh(t,c),oe!==4&&(oe=2)),!1;var f=Error(a(520),{cause:l});if(f=Tn(f,r),Tl===null?Tl=[f]:Tl.push(f),oe!==4&&(oe=2),n===null)return!0;l=Tn(l,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=c&-c,r.lanes|=t,t=wh(r.stateNode,l,t),rh(r,t),!1;case 1:if(n=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(er===null||!er.has(f))))return r.flags|=65536,c&=-c,r.lanes|=c,c=wg(c),Rg(c,t,r,l),rh(r,c),!1}r=r.return}while(r!==null);return!1}var Cg=Error(a(461)),Ne=!1;function je(t,n,r,l){n.child=t===null?vg(n,null,r,l):Xs(n,t.child,r,l)}function Ng(t,n,r,l,c){r=r.render;var f=n.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return ts(n),l=uh(t,n,r,_,f,c),T=ch(),t!==null&&!Ne?(hh(t,n,c),Si(t,n,c)):(zt&&T&&Fc(n),n.flags|=1,je(t,n,l,c),n.child)}function Dg(t,n,r,l,c){if(t===null){var f=r.type;return typeof f=="function"&&!Hc(f)&&f.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=f,Ig(t,n,f,l,c)):(t=ko(r.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!Mh(t,c)){var _=f.memoizedProps;if(r=r.compare,r=r!==null?r:Za,r(_,l)&&t.ref===n.ref)return Si(t,n,c)}return n.flags|=1,t=vi(f,l),t.ref=n.ref,t.return=n,n.child=t}function Ig(t,n,r,l,c){if(t!==null){var f=t.memoizedProps;if(Za(f,l)&&t.ref===n.ref)if(Ne=!1,n.pendingProps=l=f,Mh(t,c))(t.flags&131072)!==0&&(Ne=!0);else return n.lanes=t.lanes,Si(t,n,c)}return Rh(t,n,r,l,c)}function Vg(t,n,r){var l=n.pendingProps,c=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=f!==null?f.baseLanes|r:r,t!==null){for(c=n.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~l}else n.childLanes=0,n.child=null;return Og(t,n,l,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&qo(n,f!==null?f.cachePool:null),f!==null?Im(n,f):ah(),_g(n);else return n.lanes=n.childLanes=536870912,Og(t,n,f!==null?f.baseLanes|r:r,r)}else f!==null?(qo(n,f.cachePool),Im(n,f),Xi(),n.memoizedState=null):(t!==null&&qo(n,null),ah(),Xi());return je(t,n,c,r),n.child}function Og(t,n,r,l){var c=th();return c=c===null?null:{parent:Ae._currentValue,pool:c},n.memoizedState={baseLanes:r,cachePool:c},t!==null&&qo(n,null),ah(),_g(n),t!==null&&nl(t,n,l,!0),null}function su(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Rh(t,n,r,l,c){return ts(n),r=uh(t,n,r,l,void 0,c),l=ch(),t!==null&&!Ne?(hh(t,n,c),Si(t,n,c)):(zt&&l&&Fc(n),n.flags|=1,je(t,n,r,c),n.child)}function Mg(t,n,r,l,c,f){return ts(n),n.updateQueue=null,r=Om(n,l,r,c),Vm(t),l=ch(),t!==null&&!Ne?(hh(t,n,f),Si(t,n,f)):(zt&&l&&Fc(n),n.flags|=1,je(t,n,r,f),n.child)}function jg(t,n,r,l,c){if(ts(n),n.stateNode===null){var f=Ps,_=r.contextType;typeof _=="object"&&_!==null&&(f=qe(_)),f=new r(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Sh,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},nh(n),_=r.contextType,f.context=typeof _=="object"&&_!==null?qe(_):Ps,f.state=n.memoizedState,_=r.getDerivedStateFromProps,typeof _=="function"&&(xh(n,r,_,l),f.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&Sh.enqueueReplaceState(f,f.state,null),ul(n,l,f,c),ol(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var T=n.memoizedProps,C=is(r,T);f.props=C;var z=f.context,F=r.contextType;_=Ps,typeof F=="object"&&F!==null&&(_=qe(F));var Z=r.getDerivedStateFromProps;F=typeof Z=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,F||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||z!==_)&&Eg(n,f,l,_),Gi=!1;var B=n.memoizedState;f.state=B,ul(n,l,f,c),ol(),z=n.memoizedState,T||B!==z||Gi?(typeof Z=="function"&&(xh(n,r,Z,l),z=n.memoizedState),(C=Gi||bg(n,r,C,l,B,z,_))?(F||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=z),f.props=l,f.state=z,f.context=_,l=C):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,ih(t,n),_=n.memoizedProps,F=is(r,_),f.props=F,Z=n.pendingProps,B=f.context,z=r.contextType,C=Ps,typeof z=="object"&&z!==null&&(C=qe(z)),T=r.getDerivedStateFromProps,(z=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==Z||B!==C)&&Eg(n,f,l,C),Gi=!1,B=n.memoizedState,f.state=B,ul(n,l,f,c),ol();var q=n.memoizedState;_!==Z||B!==q||Gi||t!==null&&t.dependencies!==null&&zo(t.dependencies)?(typeof T=="function"&&(xh(n,r,T,l),q=n.memoizedState),(F=Gi||bg(n,r,F,l,B,q,C)||t!==null&&t.dependencies!==null&&zo(t.dependencies))?(z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,q,C),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,q,C)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=q),f.props=l,f.state=q,f.context=C,l=F):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&B===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,su(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=Xs(n,t.child,null,c),n.child=Xs(n,null,r,c)):je(t,n,r,c),n.memoizedState=f.state,t=n.child):t=Si(t,n,c),t}function Ug(t,n,r,l){return tl(),n.flags|=256,je(t,n,r,l),n.child}var Ch={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nh(t){return{baseLanes:t,cachePool:Am()}}function Dh(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Rn),t}function kg(t,n,r){var l=n.pendingProps,c=!1,f=(n.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(xe.current&2)!==0),_&&(c=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,t===null){if(zt){if(c?Ki(n):Xi(),zt){var T=le,C;if(C=T){t:{for(C=T,T=Zn;C.nodeType!==8;){if(!T){T=null;break t}if(C=Un(C.nextSibling),C===null){T=null;break t}}T=C}T!==null?(n.memoizedState={dehydrated:T,treeContext:Xr!==null?{id:_i,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},C=on(18,null,null,0),C.stateNode=T,C.return=n,n.child=C,$e=n,le=null,C=!0):C=!1}C||Jr(n)}if(T=n.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return mf(T)?n.lanes=32:n.lanes=536870912,null;xi(n)}return T=l.children,l=l.fallback,c?(Xi(),c=n.mode,T=au({mode:"hidden",children:T},c),l=Kr(l,c,r,null),T.return=n,l.return=n,T.sibling=l,n.child=T,c=n.child,c.memoizedState=Nh(r),c.childLanes=Dh(t,_,r),n.memoizedState=Ch,l):(Ki(n),Ih(n,T))}if(C=t.memoizedState,C!==null&&(T=C.dehydrated,T!==null)){if(f)n.flags&256?(Ki(n),n.flags&=-257,n=Vh(t,n,r)):n.memoizedState!==null?(Xi(),n.child=t.child,n.flags|=128,n=null):(Xi(),c=l.fallback,T=n.mode,l=au({mode:"visible",children:l.children},T),c=Kr(c,T,r,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,Xs(n,t.child,null,r),l=n.child,l.memoizedState=Nh(r),l.childLanes=Dh(t,_,r),n.memoizedState=Ch,n=c);else if(Ki(n),mf(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var z=_.dgst;_=z,l=Error(a(419)),l.stack="",l.digest=_,el({value:l,source:null,stack:null}),n=Vh(t,n,r)}else if(Ne||nl(t,n,r,!1),_=(r&t.childLanes)!==0,Ne||_){if(_=Jt,_!==null&&(l=r&-r,l=(l&42)!==0?1:Ui(l),l=(l&(_.suspendedLanes|r))!==0?0:l,l!==0&&l!==C.retryLane))throw C.retryLane=l,Ls(t,l),dn(_,t,l),Cg;T.data==="$?"||$h(),n=Vh(t,n,r)}else T.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=C.treeContext,le=Un(T.nextSibling),$e=n,zt=!0,Zr=null,Zn=!1,t!==null&&(xn[Sn++]=_i,xn[Sn++]=bi,xn[Sn++]=Xr,_i=t.id,bi=t.overflow,Xr=n),n=Ih(n,l.children),n.flags|=4096);return n}return c?(Xi(),c=l.fallback,T=n.mode,C=t.child,z=C.sibling,l=vi(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,z!==null?c=vi(z,c):(c=Kr(c,T,r,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,T=t.child.memoizedState,T===null?T=Nh(r):(C=T.cachePool,C!==null?(z=Ae._currentValue,C=C.parent!==z?{parent:z,pool:z}:C):C=Am(),T={baseLanes:T.baseLanes|r,cachePool:C}),c.memoizedState=T,c.childLanes=Dh(t,_,r),n.memoizedState=Ch,l):(Ki(n),r=t.child,t=r.sibling,r=vi(r,{mode:"visible",children:l.children}),r.return=n,r.sibling=null,t!==null&&(_=n.deletions,_===null?(n.deletions=[t],n.flags|=16):_.push(t)),n.child=r,n.memoizedState=null,r)}function Ih(t,n){return n=au({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function au(t,n){return t=on(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Vh(t,n,r){return Xs(n,t.child,null,r),t=Ih(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Lg(t,n,r){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),$c(t.return,n,r)}function Oh(t,n,r,l,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=r,f.tailMode=c)}function Pg(t,n,r){var l=n.pendingProps,c=l.revealOrder,f=l.tail;if(je(t,n,l.children,r),l=xe.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lg(t,r,n);else if(t.tag===19)Lg(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(nt(xe,l),c){case"forwards":for(r=n.child,c=null;r!==null;)t=r.alternate,t!==null&&nu(t)===null&&(c=r),r=r.sibling;r=c,r===null?(c=n.child,n.child=null):(c=r.sibling,r.sibling=null),Oh(n,!1,c,r,f);break;case"backwards":for(r=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&nu(t)===null){n.child=c;break}t=c.sibling,c.sibling=r,r=c,c=t}Oh(n,!0,r,null,f);break;case"together":Oh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Si(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),tr|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(nl(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,r=vi(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=vi(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Mh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&zo(t)))}function W_(t,n,r){switch(n.tag){case 3:Ft(n,n.stateNode.containerInfo),Hi(n,Ae,t.memoizedState.cache),tl();break;case 27:case 5:Pn(n);break;case 4:Ft(n,n.stateNode.containerInfo);break;case 10:Hi(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Ki(n),n.flags|=128,null):(r&n.child.childLanes)!==0?kg(t,n,r):(Ki(n),t=Si(t,n,r),t!==null?t.sibling:null);Ki(n);break;case 19:var c=(t.flags&128)!==0;if(l=(r&n.childLanes)!==0,l||(nl(t,n,r,!1),l=(r&n.childLanes)!==0),c){if(l)return Pg(t,n,r);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),nt(xe,xe.current),l)break;return null;case 22:case 23:return n.lanes=0,Vg(t,n,r);case 24:Hi(n,Ae,t.memoizedState.cache)}return Si(t,n,r)}function zg(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ne=!0;else{if(!Mh(t,r)&&(n.flags&128)===0)return Ne=!1,W_(t,n,r);Ne=(t.flags&131072)!==0}else Ne=!1,zt&&(n.flags&1048576)!==0&&pm(n,Po,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")Hc(l)?(t=is(l,t),n.tag=1,n=jg(null,n,l,t,r)):(n.tag=0,n=Rh(null,n,l,t,r));else{if(l!=null){if(c=l.$$typeof,c===$){n.tag=11,n=Ng(null,n,l,t,r);break t}else if(c===V){n.tag=14,n=Dg(null,n,l,t,r);break t}}throw n=Wt(l)||l,Error(a(306,n,""))}}return n;case 0:return Rh(t,n,n.type,n.pendingProps,r);case 1:return l=n.type,c=is(l,n.pendingProps),jg(t,n,l,c,r);case 3:t:{if(Ft(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var f=n.memoizedState;c=f.element,ih(t,n),ul(n,l,null,r);var _=n.memoizedState;if(l=_.cache,Hi(n,Ae,l),l!==f.cache&&Zc(n,[Ae],r,!0),ol(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Ug(t,n,l,r);break t}else if(l!==c){c=Tn(Error(a(424)),n),el(c),n=Ug(t,n,l,r);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(le=Un(t.firstChild),$e=n,zt=!0,Zr=null,Zn=!0,r=vg(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(tl(),l===c){n=Si(t,n,r);break t}je(t,n,l,r)}n=n.child}return n;case 26:return su(t,n),t===null?(r=Gp(n.type,null,n.pendingProps,null))?n.memoizedState=r:zt||(r=n.type,t=n.pendingProps,l=bu(vt.current).createElement(r),l[be]=n,l[me]=t,ke(l,r,t),ue(l),n.stateNode=l):n.memoizedState=Gp(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Pn(n),t===null&&zt&&(l=n.stateNode=Bp(n.type,n.pendingProps,vt.current),$e=n,Zn=!0,c=le,rr(n.type)?(gf=c,le=Un(l.firstChild)):le=c),je(t,n,n.pendingProps.children,r),su(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&zt&&((c=l=le)&&(l=Rb(l,n.type,n.pendingProps,Zn),l!==null?(n.stateNode=l,$e=n,le=Un(l.firstChild),Zn=!1,c=!0):c=!1),c||Jr(n)),Pn(n),c=n.type,f=n.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,hf(c,f)?l=null:_!==null&&hf(c,_)&&(n.flags|=32),n.memoizedState!==null&&(c=uh(t,n,Q_,null,null,r),Il._currentValue=c),su(t,n),je(t,n,l,r),n.child;case 6:return t===null&&zt&&((t=r=le)&&(r=Cb(r,n.pendingProps,Zn),r!==null?(n.stateNode=r,$e=n,le=null,t=!0):t=!1),t||Jr(n)),null;case 13:return kg(t,n,r);case 4:return Ft(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Xs(n,null,l,r):je(t,n,l,r),n.child;case 11:return Ng(t,n,n.type,n.pendingProps,r);case 7:return je(t,n,n.pendingProps,r),n.child;case 8:return je(t,n,n.pendingProps.children,r),n.child;case 12:return je(t,n,n.pendingProps.children,r),n.child;case 10:return l=n.pendingProps,Hi(n,n.type,l.value),je(t,n,l.children,r),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,ts(n),c=qe(c),l=l(c),n.flags|=1,je(t,n,l,r),n.child;case 14:return Dg(t,n,n.type,n.pendingProps,r);case 15:return Ig(t,n,n.type,n.pendingProps,r);case 19:return Pg(t,n,r);case 31:return l=n.pendingProps,r=n.mode,l={mode:l.mode,children:l.children},t===null?(r=au(l,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=vi(t.child,l),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return Vg(t,n,r);case 24:return ts(n),l=qe(Ae),t===null?(c=th(),c===null&&(c=Jt,f=Jc(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=r),c=f),n.memoizedState={parent:l,cache:c},nh(n),Hi(n,Ae,c)):((t.lanes&r)!==0&&(ih(t,n),ul(n,null,null,r),ol()),c=t.memoizedState,f=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),Hi(n,Ae,l)):(l=f.cache,Hi(n,Ae,l),l!==c.cache&&Zc(n,[Ae],r,!0))),je(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function wi(t){t.flags|=4}function Bg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Xp(n)){if(n=wn.current,n!==null&&((jt&4194048)===jt?Jn!==null:(jt&62914560)!==jt&&(jt&536870912)===0||n!==Jn))throw al=eh,xm;t.flags|=8192}}function lu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Oa():536870912,t.lanes|=n,Ws|=n)}function pl(t,n){if(!zt)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function re(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(n)for(var c=t.child;c!==null;)r|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)r|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=r,n}function tb(t,n,r){var l=n.pendingProps;switch(Yc(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(n),null;case 1:return re(n),null;case 3:return r=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Ti(Ae),gn(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Wa(n)?wi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,_m())),re(n),null;case 26:return r=n.memoizedState,t===null?(wi(n),r!==null?(re(n),Bg(n,r)):(re(n),n.flags&=-16777217)):r?r!==t.memoizedState?(wi(n),re(n),Bg(n,r)):(re(n),n.flags&=-16777217):(t.memoizedProps!==l&&wi(n),re(n),n.flags&=-16777217),null;case 27:Dn(n),r=vt.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&wi(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return re(n),null}t=dt.current,Wa(n)?ym(n):(t=Bp(c,l,r),n.stateNode=t,wi(n))}return re(n),null;case 5:if(Dn(n),r=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&wi(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return re(n),null}if(t=dt.current,Wa(n))ym(n);else{switch(c=bu(vt.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?c.createElement(r,{is:l.is}):c.createElement(r)}}t[be]=n,t[me]=l;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(ke(t,r,l),r){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&wi(n)}}return re(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&wi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=vt.current,Wa(n)){if(t=n.stateNode,r=n.memoizedProps,l=null,c=$e,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[be]=n,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||Mp(t.nodeValue,r)),t||Jr(n)}else t=bu(t).createTextNode(l),t[be]=n,n.stateNode=t}return re(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=Wa(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[be]=n}else tl(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;re(n),c=!1}else c=_m(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(xi(n),n):(xi(n),null)}if(xi(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=l!==null,t=t!==null&&t.memoizedState!==null,r){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==c&&(l.flags|=2048)}return r!==t&&r&&(n.child.flags|=8192),lu(n,n.updateQueue),re(n),null;case 4:return gn(),t===null&&af(n.stateNode.containerInfo),re(n),null;case 10:return Ti(n.type),re(n),null;case 19:if(st(xe),c=n.memoizedState,c===null)return re(n),null;if(l=(n.flags&128)!==0,f=c.rendering,f===null)if(l)pl(c,!1);else{if(oe!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=nu(t),f!==null){for(n.flags|=128,pl(c,!1),t=f.updateQueue,n.updateQueue=t,lu(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)gm(r,t),r=r.sibling;return nt(xe,xe.current&1|2),n.child}t=t.sibling}c.tail!==null&&pn()>cu&&(n.flags|=128,l=!0,pl(c,!1),n.lanes=4194304)}else{if(!l)if(t=nu(f),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,lu(n,t),pl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!zt)return re(n),null}else 2*pn()-c.renderingStartTime>cu&&r!==536870912&&(n.flags|=128,l=!0,pl(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(t=c.last,t!==null?t.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=pn(),n.sibling=null,t=xe.current,nt(xe,l?t&1|2:t&1),n):(re(n),null);case 22:case 23:return xi(n),lh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(r&536870912)!==0&&(n.flags&128)===0&&(re(n),n.subtreeFlags&6&&(n.flags|=8192)):re(n),r=n.updateQueue,r!==null&&lu(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048),t!==null&&st(es),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Ti(Ae),re(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function eb(t,n){switch(Yc(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Ti(Ae),gn(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Dn(n),null;case 13:if(xi(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));tl()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return st(xe),null;case 4:return gn(),null;case 10:return Ti(n.type),null;case 22:case 23:return xi(n),lh(),t!==null&&st(es),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Ti(Ae),null;case 25:return null;default:return null}}function qg(t,n){switch(Yc(n),n.tag){case 3:Ti(Ae),gn();break;case 26:case 27:case 5:Dn(n);break;case 4:gn();break;case 13:xi(n);break;case 19:st(xe);break;case 10:Ti(n.type);break;case 22:case 23:xi(n),lh(),t!==null&&st(es);break;case 24:Ti(Ae)}}function yl(t,n){try{var r=n.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var c=l.next;r=c;do{if((r.tag&t)===t){l=void 0;var f=r.create,_=r.inst;l=f(),_.destroy=l}r=r.next}while(r!==c)}}catch(T){Zt(n,n.return,T)}}function $i(t,n,r){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,c=n;var C=r,z=T;try{z()}catch(F){Zt(c,C,F)}}}l=l.next}while(l!==f)}}catch(F){Zt(n,n.return,F)}}function Hg(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{Dm(n,r)}catch(l){Zt(t,t.return,l)}}}function Gg(t,n,r){r.props=is(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){Zt(t,n,l)}}function vl(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(c){Zt(t,n,c)}}function Wn(t,n){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(c){Zt(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(c){Zt(t,n,c)}else r.current=null}function Qg(t){var n=t.type,r=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break t;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(c){Zt(t,t.return,c)}}function jh(t,n,r){try{var l=t.stateNode;Tb(l,t.type,r,n),l[me]=n}catch(c){Zt(t,t.return,c)}}function Fg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&rr(t.type)||t.tag===4}function Uh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Fg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&rr(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kh(t,n,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=_u));else if(l!==4&&(l===27&&rr(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(kh(t,n,r),t=t.sibling;t!==null;)kh(t,n,r),t=t.sibling}function ou(t,n,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(l!==4&&(l===27&&rr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(ou(t,n,r),t=t.sibling;t!==null;)ou(t,n,r),t=t.sibling}function Yg(t){var n=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);ke(n,l,r),n[be]=t,n[me]=r}catch(f){Zt(t,t.return,f)}}var Ri=!1,he=!1,Lh=!1,Kg=typeof WeakSet=="function"?WeakSet:Set,De=null;function nb(t,n){if(t=t.containerInfo,uf=wu,t=sm(t),Uc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break t}var _=0,T=-1,C=-1,z=0,F=0,Z=t,B=null;e:for(;;){for(var q;Z!==r||c!==0&&Z.nodeType!==3||(T=_+c),Z!==f||l!==0&&Z.nodeType!==3||(C=_+l),Z.nodeType===3&&(_+=Z.nodeValue.length),(q=Z.firstChild)!==null;)B=Z,Z=q;for(;;){if(Z===t)break e;if(B===r&&++z===c&&(T=_),B===f&&++F===l&&(C=_),(q=Z.nextSibling)!==null)break;Z=B,B=Z.parentNode}Z=q}r=T===-1||C===-1?null:{start:T,end:C}}else r=null}r=r||{start:0,end:0}}else r=null;for(cf={focusedElem:t,selectionRange:r},wu=!1,De=n;De!==null;)if(n=De,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,De=t;else for(;De!==null;){switch(n=De,f=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,r=n,c=f.memoizedProps,f=f.memoizedState,l=r.stateNode;try{var _t=is(r.type,c,r.elementType===r.type);t=l.getSnapshotBeforeUpdate(_t,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(gt){Zt(r,r.return,gt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)df(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":df(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,De=t;break}De=n.return}}function Xg(t,n,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Zi(t,r),l&4&&yl(5,r);break;case 1:if(Zi(t,r),l&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(_){Zt(r,r.return,_)}else{var c=is(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(_){Zt(r,r.return,_)}}l&64&&Hg(r),l&512&&vl(r,r.return);break;case 3:if(Zi(t,r),l&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Dm(t,n)}catch(_){Zt(r,r.return,_)}}break;case 27:n===null&&l&4&&Yg(r);case 26:case 5:Zi(t,r),n===null&&l&4&&Qg(r),l&512&&vl(r,r.return);break;case 12:Zi(t,r);break;case 13:Zi(t,r),l&4&&Jg(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=hb.bind(null,r),Nb(t,r))));break;case 22:if(l=r.memoizedState!==null||Ri,!l){n=n!==null&&n.memoizedState!==null||he,c=Ri;var f=he;Ri=l,(he=n)&&!f?Ji(t,r,(r.subtreeFlags&8772)!==0):Zi(t,r),Ri=c,he=f}break;case 30:break;default:Zi(t,r)}}function $g(t){var n=t.alternate;n!==null&&(t.alternate=null,$g(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Pi(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ie=null,We=!1;function Ci(t,n,r){for(r=r.child;r!==null;)Zg(t,n,r),r=r.sibling}function Zg(t,n,r){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(ae,r)}catch{}switch(r.tag){case 26:he||Wn(r,n),Ci(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:he||Wn(r,n);var l=ie,c=We;rr(r.type)&&(ie=r.stateNode,We=!1),Ci(t,n,r),Rl(r.stateNode),ie=l,We=c;break;case 5:he||Wn(r,n);case 6:if(l=ie,c=We,ie=null,Ci(t,n,r),ie=l,We=c,ie!==null)if(We)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(r.stateNode)}catch(f){Zt(r,n,f)}else try{ie.removeChild(r.stateNode)}catch(f){Zt(r,n,f)}break;case 18:ie!==null&&(We?(t=ie,Pp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),jl(t)):Pp(ie,r.stateNode));break;case 4:l=ie,c=We,ie=r.stateNode.containerInfo,We=!0,Ci(t,n,r),ie=l,We=c;break;case 0:case 11:case 14:case 15:he||$i(2,r,n),he||$i(4,r,n),Ci(t,n,r);break;case 1:he||(Wn(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Gg(r,n,l)),Ci(t,n,r);break;case 21:Ci(t,n,r);break;case 22:he=(l=he)||r.memoizedState!==null,Ci(t,n,r),he=l;break;default:Ci(t,n,r)}}function Jg(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{jl(t)}catch(r){Zt(n,n.return,r)}}function ib(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new Kg),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new Kg),n;default:throw Error(a(435,t.tag))}}function Ph(t,n){var r=ib(t);n.forEach(function(l){var c=fb.bind(null,t,l);r.has(l)||(r.add(l),l.then(c,c))})}function un(t,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var c=r[l],f=t,_=n,T=_;t:for(;T!==null;){switch(T.tag){case 27:if(rr(T.type)){ie=T.stateNode,We=!1;break t}break;case 5:ie=T.stateNode,We=!1;break t;case 3:case 4:ie=T.stateNode.containerInfo,We=!0;break t}T=T.return}if(ie===null)throw Error(a(160));Zg(f,_,c),ie=null,We=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)Wg(n,t),n=n.sibling}var jn=null;function Wg(t,n){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:un(n,t),cn(t),l&4&&($i(3,t,t.return),yl(3,t),$i(5,t,t.return));break;case 1:un(n,t),cn(t),l&512&&(he||r===null||Wn(r,r.return)),l&64&&Ri&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var c=jn;if(un(n,t),cn(t),l&512&&(he||r===null||Wn(r,r.return)),l&4){var f=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){t:{l=t.type,r=t.memoizedProps,c=c.ownerDocument||c;e:switch(l){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Vr]||f[be]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(l),c.head.insertBefore(f,c.querySelector("head > title"))),ke(f,l,r),f[be]=t,ue(f),l=f;break t;case"link":var _=Yp("link","href",c).get(l+(r.href||""));if(_){for(var T=0;T<_.length;T++)if(f=_[T],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){_.splice(T,1);break e}}f=c.createElement(l),ke(f,l,r),c.head.appendChild(f);break;case"meta":if(_=Yp("meta","content",c).get(l+(r.content||""))){for(T=0;T<_.length;T++)if(f=_[T],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){_.splice(T,1);break e}}f=c.createElement(l),ke(f,l,r),c.head.appendChild(f);break;default:throw Error(a(468,l))}f[be]=t,ue(f),l=f}t.stateNode=l}else Kp(c,t.type,t.stateNode);else t.stateNode=Fp(c,l,t.memoizedProps);else f!==l?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,l===null?Kp(c,t.type,t.stateNode):Fp(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&jh(t,t.memoizedProps,r.memoizedProps)}break;case 27:un(n,t),cn(t),l&512&&(he||r===null||Wn(r,r.return)),r!==null&&l&4&&jh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(un(n,t),cn(t),l&512&&(he||r===null||Wn(r,r.return)),t.flags&32){c=t.stateNode;try{vn(c,"")}catch(q){Zt(t,t.return,q)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,jh(t,c,r!==null?r.memoizedProps:c)),l&1024&&(Lh=!0);break;case 6:if(un(n,t),cn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(q){Zt(t,t.return,q)}}break;case 3:if(Au=null,c=jn,jn=Eu(n.containerInfo),un(n,t),jn=c,cn(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{jl(n.containerInfo)}catch(q){Zt(t,t.return,q)}Lh&&(Lh=!1,tp(t));break;case 4:l=jn,jn=Eu(t.stateNode.containerInfo),un(n,t),cn(t),jn=l;break;case 12:un(n,t),cn(t);break;case 13:un(n,t),cn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Qh=pn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ph(t,l)));break;case 22:c=t.memoizedState!==null;var C=r!==null&&r.memoizedState!==null,z=Ri,F=he;if(Ri=z||c,he=F||C,un(n,t),he=F,Ri=z,cn(t),l&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(r===null||C||Ri||he||rs(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){C=r=n;try{if(f=C.stateNode,c)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=C.stateNode;var Z=C.memoizedProps.style,B=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;T.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(q){Zt(C,C.return,q)}}}else if(n.tag===6){if(r===null){C=n;try{C.stateNode.nodeValue=c?"":C.memoizedProps}catch(q){Zt(C,C.return,q)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Ph(t,r))));break;case 19:un(n,t),cn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ph(t,l)));break;case 30:break;case 21:break;default:un(n,t),cn(t)}}function cn(t){var n=t.flags;if(n&2){try{for(var r,l=t.return;l!==null;){if(Fg(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var c=r.stateNode,f=Uh(t);ou(t,f,c);break;case 5:var _=r.stateNode;r.flags&32&&(vn(_,""),r.flags&=-33);var T=Uh(t);ou(t,T,_);break;case 3:case 4:var C=r.stateNode.containerInfo,z=Uh(t);kh(t,z,C);break;default:throw Error(a(161))}}catch(F){Zt(t,t.return,F)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function tp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;tp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Zi(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Xg(t,n.alternate,n),n=n.sibling}function rs(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:$i(4,n,n.return),rs(n);break;case 1:Wn(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Gg(n,n.return,r),rs(n);break;case 27:Rl(n.stateNode);case 26:case 5:Wn(n,n.return),rs(n);break;case 22:n.memoizedState===null&&rs(n);break;case 30:rs(n);break;default:rs(n)}t=t.sibling}}function Ji(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,f=n,_=f.flags;switch(f.tag){case 0:case 11:case 15:Ji(c,f,r),yl(4,f);break;case 1:if(Ji(c,f,r),l=f,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(z){Zt(l,l.return,z)}if(l=f,c=l.updateQueue,c!==null){var T=l.stateNode;try{var C=c.shared.hiddenCallbacks;if(C!==null)for(c.shared.hiddenCallbacks=null,c=0;c<C.length;c++)Nm(C[c],T)}catch(z){Zt(l,l.return,z)}}r&&_&64&&Hg(f),vl(f,f.return);break;case 27:Yg(f);case 26:case 5:Ji(c,f,r),r&&l===null&&_&4&&Qg(f),vl(f,f.return);break;case 12:Ji(c,f,r);break;case 13:Ji(c,f,r),r&&_&4&&Jg(c,f);break;case 22:f.memoizedState===null&&Ji(c,f,r),vl(f,f.return);break;case 30:break;default:Ji(c,f,r)}n=n.sibling}}function zh(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&il(r))}function Bh(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&il(t))}function ti(t,n,r,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ep(t,n,r,l),n=n.sibling}function ep(t,n,r,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:ti(t,n,r,l),c&2048&&yl(9,n);break;case 1:ti(t,n,r,l);break;case 3:ti(t,n,r,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&il(t)));break;case 12:if(c&2048){ti(t,n,r,l),t=n.stateNode;try{var f=n.memoizedProps,_=f.id,T=f.onPostCommit;typeof T=="function"&&T(_,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(C){Zt(n,n.return,C)}}else ti(t,n,r,l);break;case 13:ti(t,n,r,l);break;case 23:break;case 22:f=n.stateNode,_=n.alternate,n.memoizedState!==null?f._visibility&2?ti(t,n,r,l):_l(t,n):f._visibility&2?ti(t,n,r,l):(f._visibility|=2,$s(t,n,r,l,(n.subtreeFlags&10256)!==0)),c&2048&&zh(_,n);break;case 24:ti(t,n,r,l),c&2048&&Bh(n.alternate,n);break;default:ti(t,n,r,l)}}function $s(t,n,r,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=t,_=n,T=r,C=l,z=_.flags;switch(_.tag){case 0:case 11:case 15:$s(f,_,T,C,c),yl(8,_);break;case 23:break;case 22:var F=_.stateNode;_.memoizedState!==null?F._visibility&2?$s(f,_,T,C,c):_l(f,_):(F._visibility|=2,$s(f,_,T,C,c)),c&&z&2048&&zh(_.alternate,_);break;case 24:$s(f,_,T,C,c),c&&z&2048&&Bh(_.alternate,_);break;default:$s(f,_,T,C,c)}n=n.sibling}}function _l(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,l=n,c=l.flags;switch(l.tag){case 22:_l(r,l),c&2048&&zh(l.alternate,l);break;case 24:_l(r,l),c&2048&&Bh(l.alternate,l);break;default:_l(r,l)}n=n.sibling}}var bl=8192;function Zs(t){if(t.subtreeFlags&bl)for(t=t.child;t!==null;)np(t),t=t.sibling}function np(t){switch(t.tag){case 26:Zs(t),t.flags&bl&&t.memoizedState!==null&&qb(jn,t.memoizedState,t.memoizedProps);break;case 5:Zs(t);break;case 3:case 4:var n=jn;jn=Eu(t.stateNode.containerInfo),Zs(t),jn=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=bl,bl=16777216,Zs(t),bl=n):Zs(t));break;default:Zs(t)}}function ip(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function El(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];De=l,sp(l,t)}ip(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)rp(t),t=t.sibling}function rp(t){switch(t.tag){case 0:case 11:case 15:El(t),t.flags&2048&&$i(9,t,t.return);break;case 3:El(t);break;case 12:El(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,uu(t)):El(t);break;default:El(t)}}function uu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];De=l,sp(l,t)}ip(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:$i(8,n,n.return),uu(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,uu(n));break;default:uu(n)}t=t.sibling}}function sp(t,n){for(;De!==null;){var r=De;switch(r.tag){case 0:case 11:case 15:$i(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:il(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,De=l;else t:for(r=t;De!==null;){l=De;var c=l.sibling,f=l.return;if($g(l),l===r){De=null;break t}if(c!==null){c.return=f,De=c;break t}De=f}}}var rb={getCacheForType:function(t){var n=qe(Ae),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r}},sb=typeof WeakMap=="function"?WeakMap:Map,Gt=0,Jt=null,Dt=null,jt=0,Qt=0,hn=null,Wi=!1,Js=!1,qh=!1,Ni=0,oe=0,tr=0,ss=0,Hh=0,Rn=0,Ws=0,Tl=null,tn=null,Gh=!1,Qh=0,cu=1/0,hu=null,er=null,Ue=0,nr=null,ta=null,ea=0,Fh=0,Yh=null,ap=null,Al=0,Kh=null;function fn(){if((Gt&2)!==0&&jt!==0)return jt&-jt;if(G.T!==null){var t=qs;return t!==0?t:ef()}return ki()}function lp(){Rn===0&&(Rn=(jt&536870912)===0||zt?Va():536870912);var t=wn.current;return t!==null&&(t.flags|=32),Rn}function dn(t,n,r){(t===Jt&&(Qt===2||Qt===9)||t.cancelPendingCommit!==null)&&(na(t,0),ir(t,jt,Rn,!1)),li(t,r),((Gt&2)===0||t!==Jt)&&(t===Jt&&((Gt&2)===0&&(ss|=r),oe===4&&ir(t,jt,Rn,!1)),ei(t))}function op(t,n,r){if((Gt&6)!==0)throw Error(a(327));var l=!r&&(n&124)===0&&(n&t.expiredLanes)===0||Ir(t,n),c=l?ob(t,n):Zh(t,n,!0),f=l;do{if(c===0){Js&&!l&&ir(t,n,0,!1);break}else{if(r=t.current.alternate,f&&!ab(r)){c=Zh(t,n,!1),f=!1;continue}if(c===2){if(f=n,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;t:{var T=t;c=Tl;var C=T.current.memoizedState.isDehydrated;if(C&&(na(T,_).flags|=256),_=Zh(T,_,!1),_!==2){if(qh&&!C){T.errorRecoveryDisabledLanes|=f,ss|=f,c=4;break t}f=tn,tn=c,f!==null&&(tn===null?tn=f:tn.push.apply(tn,f))}c=_}if(f=!1,c!==2)continue}}if(c===1){na(t,0),ir(t,n,0,!0);break}t:{switch(l=t,f=c,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:ir(l,n,Rn,!Wi);break t;case 2:tn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=Qh+300-pn(),10<c)){if(ir(l,n,Rn,!Wi),_s(l,0,!0)!==0)break t;l.timeoutHandle=kp(up.bind(null,l,r,tn,hu,Gh,n,Rn,ss,Ws,Wi,f,2,-0,0),c);break t}up(l,r,tn,hu,Gh,n,Rn,ss,Ws,Wi,f,0,-0,0)}}break}while(!0);ei(t)}function up(t,n,r,l,c,f,_,T,C,z,F,Z,B,q){if(t.timeoutHandle=-1,Z=n.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(Dl={stylesheets:null,count:0,unsuspend:Bb},np(n),Z=Hb(),Z!==null)){t.cancelPendingCommit=Z(pp.bind(null,t,n,f,r,l,c,_,T,C,F,1,B,q)),ir(t,f,_,!z);return}pp(t,n,f,r,l,c,_,T,C)}function ab(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var c=r[l],f=c.getSnapshot;c=c.value;try{if(!ln(f(),c))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ir(t,n,r,l){n&=~Hh,n&=~ss,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var f=31-Be(c),_=1<<f;l[f]=-1,c&=~_}r!==0&&zn(t,r,n)}function fu(){return(Gt&6)===0?(xl(0),!1):!0}function Xh(){if(Dt!==null){if(Qt===0)var t=Dt.return;else t=Dt,Ei=Wr=null,fh(t),Ks=null,ml=0,t=Dt;for(;t!==null;)qg(t.alternate,t),t=t.return;Dt=null}}function na(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,xb(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Xh(),Jt=t,Dt=r=vi(t.current,null),jt=n,Qt=0,hn=null,Wi=!1,Js=Ir(t,n),qh=!1,Ws=Rn=Hh=ss=tr=oe=0,tn=Tl=null,Gh=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-Be(l),f=1<<c;n|=t[c],l&=~f}return Ni=n,Mo(),r}function cp(t,n){wt=null,G.H=Wo,n===sl||n===Ho?(n=Rm(),Qt=3):n===xm?(n=Rm(),Qt=4):Qt=n===Cg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,hn=n,Dt===null&&(oe=1,ru(t,Tn(n,t.current)))}function hp(){var t=G.H;return G.H=Wo,t===null?Wo:t}function fp(){var t=G.A;return G.A=rb,t}function $h(){oe=4,Wi||(jt&4194048)!==jt&&wn.current!==null||(Js=!0),(tr&134217727)===0&&(ss&134217727)===0||Jt===null||ir(Jt,jt,Rn,!1)}function Zh(t,n,r){var l=Gt;Gt|=2;var c=hp(),f=fp();(Jt!==t||jt!==n)&&(hu=null,na(t,n)),n=!1;var _=oe;t:do try{if(Qt!==0&&Dt!==null){var T=Dt,C=hn;switch(Qt){case 8:Xh(),_=6;break t;case 3:case 2:case 9:case 6:wn.current===null&&(n=!0);var z=Qt;if(Qt=0,hn=null,ia(t,T,C,z),r&&Js){_=0;break t}break;default:z=Qt,Qt=0,hn=null,ia(t,T,C,z)}}lb(),_=oe;break}catch(F){cp(t,F)}while(!0);return n&&t.shellSuspendCounter++,Ei=Wr=null,Gt=l,G.H=c,G.A=f,Dt===null&&(Jt=null,jt=0,Mo()),_}function lb(){for(;Dt!==null;)dp(Dt)}function ob(t,n){var r=Gt;Gt|=2;var l=hp(),c=fp();Jt!==t||jt!==n?(hu=null,cu=pn()+500,na(t,n)):Js=Ir(t,n);t:do try{if(Qt!==0&&Dt!==null){n=Dt;var f=hn;e:switch(Qt){case 1:Qt=0,hn=null,ia(t,n,f,1);break;case 2:case 9:if(Sm(f)){Qt=0,hn=null,mp(n);break}n=function(){Qt!==2&&Qt!==9||Jt!==t||(Qt=7),ei(t)},f.then(n,n);break t;case 3:Qt=7;break t;case 4:Qt=5;break t;case 7:Sm(f)?(Qt=0,hn=null,mp(n)):(Qt=0,hn=null,ia(t,n,f,7));break;case 5:var _=null;switch(Dt.tag){case 26:_=Dt.memoizedState;case 5:case 27:var T=Dt;if(!_||Xp(_)){Qt=0,hn=null;var C=T.sibling;if(C!==null)Dt=C;else{var z=T.return;z!==null?(Dt=z,du(z)):Dt=null}break e}}Qt=0,hn=null,ia(t,n,f,5);break;case 6:Qt=0,hn=null,ia(t,n,f,6);break;case 8:Xh(),oe=6;break t;default:throw Error(a(462))}}ub();break}catch(F){cp(t,F)}while(!0);return Ei=Wr=null,G.H=l,G.A=c,Gt=r,Dt!==null?0:(Jt=null,jt=0,Mo(),oe)}function ub(){for(;Dt!==null&&!Ca();)dp(Dt)}function dp(t){var n=zg(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,n===null?du(t):Dt=n}function mp(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=Mg(r,n,n.pendingProps,n.type,void 0,jt);break;case 11:n=Mg(r,n,n.pendingProps,n.type.render,n.ref,jt);break;case 5:fh(n);default:qg(r,n),n=Dt=gm(n,Ni),n=zg(r,n,Ni)}t.memoizedProps=t.pendingProps,n===null?du(t):Dt=n}function ia(t,n,r,l){Ei=Wr=null,fh(n),Ks=null,ml=0;var c=n.return;try{if(J_(t,c,n,r,jt)){oe=1,ru(t,Tn(r,t.current)),Dt=null;return}}catch(f){if(c!==null)throw Dt=c,f;oe=1,ru(t,Tn(r,t.current)),Dt=null;return}n.flags&32768?(zt||l===1?t=!0:Js||(jt&536870912)!==0?t=!1:(Wi=t=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),gp(n,t)):du(n)}function du(t){var n=t;do{if((n.flags&32768)!==0){gp(n,Wi);return}t=n.return;var r=tb(n.alternate,n,Ni);if(r!==null){Dt=r;return}if(n=n.sibling,n!==null){Dt=n;return}Dt=n=t}while(n!==null);oe===0&&(oe=5)}function gp(t,n){do{var r=eb(t.alternate,t);if(r!==null){r.flags&=32767,Dt=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){Dt=t;return}Dt=t=r}while(t!==null);oe=6,Dt=null}function pp(t,n,r,l,c,f,_,T,C){t.cancelPendingCommit=null;do mu();while(Ue!==0);if((Gt&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=Bc,Ma(t,r,f,_,T,C),t===Jt&&(Dt=Jt=null,jt=0),ta=n,nr=t,ea=r,Fh=f,Yh=c,ap=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,db(Rr,function(){return Ep(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,c=rt.p,rt.p=2,_=Gt,Gt|=4;try{nb(t,n,r)}finally{Gt=_,rt.p=c,G.T=l}}Ue=1,yp(),vp(),_p()}}function yp(){if(Ue===1){Ue=0;var t=nr,n=ta,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=G.T,G.T=null;var l=rt.p;rt.p=2;var c=Gt;Gt|=4;try{Wg(n,t);var f=cf,_=sm(t.containerInfo),T=f.focusedElem,C=f.selectionRange;if(_!==T&&T&&T.ownerDocument&&rm(T.ownerDocument.documentElement,T)){if(C!==null&&Uc(T)){var z=C.start,F=C.end;if(F===void 0&&(F=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min(F,T.value.length);else{var Z=T.ownerDocument||document,B=Z&&Z.defaultView||window;if(B.getSelection){var q=B.getSelection(),_t=T.textContent.length,gt=Math.min(C.start,_t),$t=C.end===void 0?gt:Math.min(C.end,_t);!q.extend&&gt>$t&&(_=$t,$t=gt,gt=_);var U=im(T,gt),j=im(T,$t);if(U&&j&&(q.rangeCount!==1||q.anchorNode!==U.node||q.anchorOffset!==U.offset||q.focusNode!==j.node||q.focusOffset!==j.offset)){var P=Z.createRange();P.setStart(U.node,U.offset),q.removeAllRanges(),gt>$t?(q.addRange(P),q.extend(j.node,j.offset)):(P.setEnd(j.node,j.offset),q.addRange(P))}}}}for(Z=[],q=T;q=q.parentNode;)q.nodeType===1&&Z.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<Z.length;T++){var Y=Z[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}wu=!!uf,cf=uf=null}finally{Gt=c,rt.p=l,G.T=r}}t.current=n,Ue=2}}function vp(){if(Ue===2){Ue=0;var t=nr,n=ta,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=G.T,G.T=null;var l=rt.p;rt.p=2;var c=Gt;Gt|=4;try{Xg(t,n.alternate,n)}finally{Gt=c,rt.p=l,G.T=r}}Ue=3}}function _p(){if(Ue===4||Ue===3){Ue=0,oo();var t=nr,n=ta,r=ea,l=ap;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ue=5:(Ue=0,ta=nr=null,bp(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(er=null),bs(r),n=n.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(ae,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=G.T,c=rt.p,rt.p=2,G.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];f(T.value,{componentStack:T.stack})}}finally{G.T=n,rt.p=c}}(ea&3)!==0&&mu(),ei(t),c=t.pendingLanes,(r&4194090)!==0&&(c&42)!==0?t===Kh?Al++:(Al=0,Kh=t):Al=0,xl(0)}}function bp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,il(n)))}function mu(t){return yp(),vp(),_p(),Ep()}function Ep(){if(Ue!==5)return!1;var t=nr,n=Fh;Fh=0;var r=bs(ea),l=G.T,c=rt.p;try{rt.p=32>r?32:r,G.T=null,r=Yh,Yh=null;var f=nr,_=ea;if(Ue=0,ta=nr=null,ea=0,(Gt&6)!==0)throw Error(a(331));var T=Gt;if(Gt|=4,rp(f.current),ep(f,f.current,_,r),Gt=T,xl(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(ae,f)}catch{}return!0}finally{rt.p=c,G.T=l,bp(t,n)}}function Tp(t,n,r){n=Tn(r,n),n=wh(t.stateNode,n,2),t=Fi(t,n,2),t!==null&&(li(t,2),ei(t))}function Zt(t,n,r){if(t.tag===3)Tp(t,t,r);else for(;n!==null;){if(n.tag===3){Tp(n,t,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(er===null||!er.has(l))){t=Tn(r,t),r=wg(2),l=Fi(n,r,2),l!==null&&(Rg(r,l,n,t),li(l,2),ei(l));break}}n=n.return}}function Jh(t,n,r){var l=t.pingCache;if(l===null){l=t.pingCache=new sb;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(r)||(qh=!0,c.add(r),t=cb.bind(null,t,n,r),n.then(t,t))}function cb(t,n,r){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,Jt===t&&(jt&r)===r&&(oe===4||oe===3&&(jt&62914560)===jt&&300>pn()-Qh?(Gt&2)===0&&na(t,0):Hh|=r,Ws===jt&&(Ws=0)),ei(t)}function Ap(t,n){n===0&&(n=Oa()),t=Ls(t,n),t!==null&&(li(t,n),ei(t))}function hb(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Ap(t,r)}function fb(t,n){var r=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(r=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),Ap(t,r)}function db(t,n){return Sr(t,n)}var gu=null,ra=null,Wh=!1,pu=!1,tf=!1,as=0;function ei(t){t!==ra&&t.next===null&&(ra===null?gu=ra=t:ra=ra.next=t),pu=!0,Wh||(Wh=!0,gb())}function xl(t,n){if(!tf&&pu){tf=!0;do for(var r=!1,l=gu;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var f=0;else{var _=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Be(42|t)+1)-1,f&=c&~(_&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,Rp(l,f))}else f=jt,f=_s(l,l===Jt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ir(l,f)||(r=!0,Rp(l,f));l=l.next}while(r);tf=!1}}function mb(){xp()}function xp(){pu=Wh=!1;var t=0;as!==0&&(Ab()&&(t=as),as=0);for(var n=pn(),r=null,l=gu;l!==null;){var c=l.next,f=Sp(l,n);f===0?(l.next=null,r===null?gu=c:r.next=c,c===null&&(ra=r)):(r=l,(t!==0||(f&3)!==0)&&(pu=!0)),l=c}xl(t)}function Sp(t,n){for(var r=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-Be(f),T=1<<_,C=c[_];C===-1?((T&r)===0||(T&l)!==0)&&(c[_]=Ia(T,n)):C<=n&&(t.expiredLanes|=T),f&=~T}if(n=Jt,r=jt,r=_s(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===n&&(Qt===2||Qt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&wr(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Ir(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(l!==null&&wr(l),bs(r)){case 2:case 8:r=ys;break;case 32:r=Rr;break;case 268435456:r=vs;break;default:r=Rr}return l=wp.bind(null,t),r=Sr(r,l),t.callbackPriority=n,t.callbackNode=r,n}return l!==null&&l!==null&&wr(l),t.callbackPriority=2,t.callbackNode=null,2}function wp(t,n){if(Ue!==0&&Ue!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(mu()&&t.callbackNode!==r)return null;var l=jt;return l=_s(t,t===Jt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(op(t,l,n),Sp(t,pn()),t.callbackNode!=null&&t.callbackNode===r?wp.bind(null,t):null)}function Rp(t,n){if(mu())return null;op(t,n,!0)}function gb(){Sb(function(){(Gt&6)!==0?Sr(Na,mb):xp()})}function ef(){return as===0&&(as=Va()),as}function Cp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ws(""+t)}function Np(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function pb(t,n,r,l,c){if(n==="submit"&&r&&r.stateNode===c){var f=Cp((c[me]||null).action),_=l.submitter;_&&(n=(n=_[me]||null)?Cp(n.formAction):_.getAttribute("formAction"),n!==null&&(f=n,_=null));var T=new Rs("action","action",null,l,c);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(as!==0){var C=_?Np(c,_):new FormData(c);Eh(r,{pending:!0,data:C,method:c.method,action:f},null,C)}}else typeof f=="function"&&(T.preventDefault(),C=_?Np(c,_):new FormData(c),Eh(r,{pending:!0,data:C,method:c.method,action:f},f,C))},currentTarget:c}]})}}for(var nf=0;nf<zc.length;nf++){var rf=zc[nf],yb=rf.toLowerCase(),vb=rf[0].toUpperCase()+rf.slice(1);Mn(yb,"on"+vb)}Mn(om,"onAnimationEnd"),Mn(um,"onAnimationIteration"),Mn(cm,"onAnimationStart"),Mn("dblclick","onDoubleClick"),Mn("focusin","onFocus"),Mn("focusout","onBlur"),Mn(j_,"onTransitionRun"),Mn(U_,"onTransitionStart"),Mn(k_,"onTransitionCancel"),Mn(hm,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_b=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function Dp(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],c=l.event;l=l.listeners;t:{var f=void 0;if(n)for(var _=l.length-1;0<=_;_--){var T=l[_],C=T.instance,z=T.currentTarget;if(T=T.listener,C!==f&&c.isPropagationStopped())break t;f=T,c.currentTarget=z;try{f(c)}catch(F){iu(F)}c.currentTarget=null,f=C}else for(_=0;_<l.length;_++){if(T=l[_],C=T.instance,z=T.currentTarget,T=T.listener,C!==f&&c.isPropagationStopped())break t;f=T,c.currentTarget=z;try{f(c)}catch(F){iu(F)}c.currentTarget=null,f=C}}}}function It(t,n){var r=n[Ua];r===void 0&&(r=n[Ua]=new Set);var l=t+"__bubble";r.has(l)||(Ip(n,t,2,!1),r.add(l))}function sf(t,n,r){var l=0;n&&(l|=4),Ip(r,t,l,n)}var yu="_reactListening"+Math.random().toString(36).slice(2);function af(t){if(!t[yu]){t[yu]=!0,ka.forEach(function(r){r!=="selectionchange"&&(_b.has(r)||sf(r,!1,t),sf(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[yu]||(n[yu]=!0,sf("selectionchange",!1,n))}}function Ip(t,n,r,l){switch(ey(n)){case 2:var c=Fb;break;case 8:c=Yb;break;default:c=bf}r=c.bind(null,n,r,t),c=void 0,!bn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,r,{capture:!0,passive:c}):t.addEventListener(n,r,!0):c!==void 0?t.addEventListener(n,r,{passive:c}):t.addEventListener(n,r,!1)}function lf(t,n,r,l,c){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===c)break;if(_===4)for(_=l.return;_!==null;){var C=_.tag;if((C===3||C===4)&&_.stateNode.containerInfo===c)return;_=_.return}for(;T!==null;){if(_=oi(T),_===null)return;if(C=_.tag,C===5||C===6||C===26||C===27){l=f=_;continue t}T=T.parentNode}}l=l.return}_o(function(){var z=f,F=_n(r),Z=[];t:{var B=fm.get(t);if(B!==void 0){var q=Rs,_t=t;switch(t){case"keypress":if(Fn(r)===0)break t;case"keydown":case"keyup":q=Os;break;case"focusin":_t="focus",q=Ds;break;case"focusout":_t="blur",q=Ds;break;case"beforeblur":case"afterblur":q=Ds;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=En;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Vc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=Ro;break;case om:case um:case cm:q=Is;break;case hm:q=No;break;case"scroll":case"scrollend":q=bo;break;case"wheel":q=Ms;break;case"copy":case"cut":case"paste":q=Vs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Xa;break;case"toggle":case"beforetoggle":q=Io}var gt=(n&4)!==0,$t=!gt&&(t==="scroll"||t==="scrollend"),U=gt?B!==null?B+"Capture":null:B;gt=[];for(var j=z,P;j!==null;){var Y=j;if(P=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||P===null||U===null||(Y=Pr(j,U),Y!=null&&gt.push(wl(j,Y,P))),$t)break;j=j.return}0<gt.length&&(B=new q(B,_t,null,r,F),Z.push({event:B,listeners:gt}))}}if((n&7)===0){t:{if(B=t==="mouseover"||t==="pointerover",q=t==="mouseout"||t==="pointerout",B&&r!==fi&&(_t=r.relatedTarget||r.fromElement)&&(oi(_t)||_t[yn]))break t;if((q||B)&&(B=F.window===F?F:(B=F.ownerDocument)?B.defaultView||B.parentWindow:window,q?(_t=r.relatedTarget||r.toElement,q=z,_t=_t?oi(_t):null,_t!==null&&($t=h(_t),gt=_t.tag,_t!==$t||gt!==5&&gt!==27&&gt!==6)&&(_t=null)):(q=null,_t=z),q!==_t)){if(gt=En,Y="onMouseLeave",U="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(gt=Xa,Y="onPointerLeave",U="onPointerEnter",j="pointer"),$t=q==null?B:qn(q),P=_t==null?B:qn(_t),B=new gt(Y,j+"leave",q,r,F),B.target=$t,B.relatedTarget=P,Y=null,oi(F)===z&&(gt=new gt(U,j+"enter",_t,r,F),gt.target=P,gt.relatedTarget=$t,Y=gt),$t=Y,q&&_t)e:{for(gt=q,U=_t,j=0,P=gt;P;P=sa(P))j++;for(P=0,Y=U;Y;Y=sa(Y))P++;for(;0<j-P;)gt=sa(gt),j--;for(;0<P-j;)U=sa(U),P--;for(;j--;){if(gt===U||U!==null&&gt===U.alternate)break e;gt=sa(gt),U=sa(U)}gt=null}else gt=null;q!==null&&Vp(Z,B,q,gt,!1),_t!==null&&$t!==null&&Vp(Z,$t,_t,gt,!0)}}t:{if(B=z?qn(z):window,q=B.nodeName&&B.nodeName.toLowerCase(),q==="select"||q==="input"&&B.type==="file")var ot=Zd;else if(Te(B))if(Jd)ot=V_;else{ot=D_;var Ct=N_}else q=B.nodeName,!q||q.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?z&&qa(z.elementType)&&(ot=Zd):ot=I_;if(ot&&(ot=ot(t,z))){yi(Z,ot,r,F);break t}Ct&&Ct(t,B,z),t==="focusout"&&z&&B.type==="number"&&z.memoizedProps.value!=null&&Bi(B,"number",B.value)}switch(Ct=z?qn(z):window,t){case"focusin":(Te(Ct)||Ct.contentEditable==="true")&&(js=Ct,kc=z,Ja=null);break;case"focusout":Ja=kc=js=null;break;case"mousedown":Lc=!0;break;case"contextmenu":case"mouseup":case"dragend":Lc=!1,am(Z,r,F);break;case"selectionchange":if(M_)break;case"keydown":case"keyup":am(Z,r,F)}var ft;if(Xn)t:{switch(t){case"compositionstart":var pt="onCompositionStart";break t;case"compositionend":pt="onCompositionEnd";break t;case"compositionupdate":pt="onCompositionUpdate";break t}pt=void 0}else Ot?H(t,r)&&(pt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(pt="onCompositionStart");pt&&(y&&r.locale!=="ko"&&(Ot||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Ot&&(ft=Ga()):(Qn=F,qi="value"in Qn?Qn.value:Qn.textContent,Ot=!0)),Ct=vu(z,pt),0<Ct.length&&(pt=new Ya(pt,t,null,r,F),Z.push({event:pt,listeners:Ct}),ft?pt.data=ft:(ft=it(r),ft!==null&&(pt.data=ft)))),(ft=m?Ee(t,r):Mt(t,r))&&(pt=vu(z,"onBeforeInput"),0<pt.length&&(Ct=new Ya("onBeforeInput","beforeinput",null,r,F),Z.push({event:Ct,listeners:pt}),Ct.data=ft)),pb(Z,t,z,r,F)}Dp(Z,n)})}function wl(t,n,r){return{instance:t,listener:n,currentTarget:r}}function vu(t,n){for(var r=n+"Capture",l=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=Pr(t,r),c!=null&&l.unshift(wl(t,c,f)),c=Pr(t,n),c!=null&&l.push(wl(t,c,f))),t.tag===3)return l;t=t.return}return[]}function sa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Vp(t,n,r,l,c){for(var f=n._reactName,_=[];r!==null&&r!==l;){var T=r,C=T.alternate,z=T.stateNode;if(T=T.tag,C!==null&&C===l)break;T!==5&&T!==26&&T!==27||z===null||(C=z,c?(z=Pr(r,f),z!=null&&_.unshift(wl(r,z,C))):c||(z=Pr(r,f),z!=null&&_.push(wl(r,z,C)))),r=r.return}_.length!==0&&t.push({event:n,listeners:_})}var bb=/\r\n?/g,Eb=/\u0000|\uFFFD/g;function Op(t){return(typeof t=="string"?t:""+t).replace(bb,`
`).replace(Eb,"")}function Mp(t,n){return n=Op(n),Op(t)===n}function _u(){}function Xt(t,n,r,l,c,f){switch(r){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||vn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&vn(t,""+l);break;case"className":Hn(t,"class",l);break;case"tabIndex":Hn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(t,r,l);break;case"style":Ba(t,l,f);break;case"data":if(n!=="object"){Hn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=ws(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(n!=="input"&&Xt(t,n,"name",c.name,c,null),Xt(t,n,"formEncType",c.formEncType,c,null),Xt(t,n,"formMethod",c.formMethod,c,null),Xt(t,n,"formTarget",c.formTarget,c,null)):(Xt(t,n,"encType",c.encType,c,null),Xt(t,n,"method",c.method,c,null),Xt(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=ws(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=_u);break;case"onScroll":l!=null&&It("scroll",t);break;case"onScrollEnd":l!=null&&It("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=ws(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":It("beforetoggle",t),It("toggle",t),zi(t,"popover",l);break;case"xlinkActuate":Oe(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Oe(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Oe(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Oe(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Oe(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Oe(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Oe(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Oe(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Oe(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":zi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Dc.get(r)||r,zi(t,r,l))}}function of(t,n,r,l,c,f){switch(r){case"style":Ba(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?vn(t,l):(typeof l=="number"||typeof l=="bigint")&&vn(t,""+l);break;case"onScroll":l!=null&&It("scroll",t);break;case"onScrollEnd":l!=null&&It("scrollend",t);break;case"onClick":l!=null&&(t.onclick=_u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Es.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(c=r.endsWith("Capture"),n=r.slice(2,c?r.length-7:void 0),f=t[me]||null,f=f!=null?f[r]:null,typeof f=="function"&&t.removeEventListener(n,f,c),typeof l=="function")){typeof f!="function"&&f!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,l,c);break t}r in t?t[r]=l:l===!0?t.setAttribute(r,""):zi(t,r,l)}}}function ke(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",t),It("load",t);var l=!1,c=!1,f;for(f in r)if(r.hasOwnProperty(f)){var _=r[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Xt(t,n,f,_,r,null)}}c&&Xt(t,n,"srcSet",r.srcSet,r,null),l&&Xt(t,n,"src",r.src,r,null);return;case"input":It("invalid",t);var T=f=_=c=null,C=null,z=null;for(l in r)if(r.hasOwnProperty(l)){var F=r[l];if(F!=null)switch(l){case"name":c=F;break;case"type":_=F;break;case"checked":C=F;break;case"defaultChecked":z=F;break;case"value":f=F;break;case"defaultValue":T=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(a(137,n));break;default:Xt(t,n,l,F,r,null)}}Ur(t,f,T,C,z,_,c,!1),Ss(t);return;case"select":It("invalid",t),l=_=f=null;for(c in r)if(r.hasOwnProperty(c)&&(T=r[c],T!=null))switch(c){case"value":f=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:Xt(t,n,c,T,r,null)}n=f,r=_,t.multiple=!!l,n!=null?hi(t,!!l,n,!1):r!=null&&hi(t,!!l,r,!0);return;case"textarea":It("invalid",t),f=c=l=null;for(_ in r)if(r.hasOwnProperty(_)&&(T=r[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":c=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:Xt(t,n,_,T,r,null)}kr(t,l,c,f),Ss(t);return;case"option":for(C in r)if(r.hasOwnProperty(C)&&(l=r[C],l!=null))switch(C){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Xt(t,n,C,l,r,null)}return;case"dialog":It("beforetoggle",t),It("toggle",t),It("cancel",t),It("close",t);break;case"iframe":case"object":It("load",t);break;case"video":case"audio":for(l=0;l<Sl.length;l++)It(Sl[l],t);break;case"image":It("error",t),It("load",t);break;case"details":It("toggle",t);break;case"embed":case"source":case"link":It("error",t),It("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in r)if(r.hasOwnProperty(z)&&(l=r[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Xt(t,n,z,l,r,null)}return;default:if(qa(n)){for(F in r)r.hasOwnProperty(F)&&(l=r[F],l!==void 0&&of(t,n,F,l,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(l=r[T],l!=null&&Xt(t,n,T,l,r,null))}function Tb(t,n,r,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,_=null,T=null,C=null,z=null,F=null;for(q in r){var Z=r[q];if(r.hasOwnProperty(q)&&Z!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":C=Z;default:l.hasOwnProperty(q)||Xt(t,n,q,null,l,Z)}}for(var B in l){var q=l[B];if(Z=r[B],l.hasOwnProperty(B)&&(q!=null||Z!=null))switch(B){case"type":f=q;break;case"name":c=q;break;case"checked":z=q;break;case"defaultChecked":F=q;break;case"value":_=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(a(137,n));break;default:q!==Z&&Xt(t,n,B,q,l,Z)}}an(t,_,T,C,z,F,f,c);return;case"select":q=_=T=B=null;for(f in r)if(C=r[f],r.hasOwnProperty(f)&&C!=null)switch(f){case"value":break;case"multiple":q=C;default:l.hasOwnProperty(f)||Xt(t,n,f,null,l,C)}for(c in l)if(f=l[c],C=r[c],l.hasOwnProperty(c)&&(f!=null||C!=null))switch(c){case"value":B=f;break;case"defaultValue":T=f;break;case"multiple":_=f;default:f!==C&&Xt(t,n,c,f,l,C)}n=T,r=_,l=q,B!=null?hi(t,!!r,B,!1):!!l!=!!r&&(n!=null?hi(t,!!r,n,!0):hi(t,!!r,r?[]:"",!1));return;case"textarea":q=B=null;for(T in r)if(c=r[T],r.hasOwnProperty(T)&&c!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Xt(t,n,T,null,l,c)}for(_ in l)if(c=l[_],f=r[_],l.hasOwnProperty(_)&&(c!=null||f!=null))switch(_){case"value":B=c;break;case"defaultValue":q=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==f&&Xt(t,n,_,c,l,f)}Yt(t,B,q);return;case"option":for(var _t in r)if(B=r[_t],r.hasOwnProperty(_t)&&B!=null&&!l.hasOwnProperty(_t))switch(_t){case"selected":t.selected=!1;break;default:Xt(t,n,_t,null,l,B)}for(C in l)if(B=l[C],q=r[C],l.hasOwnProperty(C)&&B!==q&&(B!=null||q!=null))switch(C){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Xt(t,n,C,B,l,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in r)B=r[gt],r.hasOwnProperty(gt)&&B!=null&&!l.hasOwnProperty(gt)&&Xt(t,n,gt,null,l,B);for(z in l)if(B=l[z],q=r[z],l.hasOwnProperty(z)&&B!==q&&(B!=null||q!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(a(137,n));break;default:Xt(t,n,z,B,l,q)}return;default:if(qa(n)){for(var $t in r)B=r[$t],r.hasOwnProperty($t)&&B!==void 0&&!l.hasOwnProperty($t)&&of(t,n,$t,void 0,l,B);for(F in l)B=l[F],q=r[F],!l.hasOwnProperty(F)||B===q||B===void 0&&q===void 0||of(t,n,F,B,l,q);return}}for(var U in r)B=r[U],r.hasOwnProperty(U)&&B!=null&&!l.hasOwnProperty(U)&&Xt(t,n,U,null,l,B);for(Z in l)B=l[Z],q=r[Z],!l.hasOwnProperty(Z)||B===q||B==null&&q==null||Xt(t,n,Z,B,l,q)}var uf=null,cf=null;function bu(t){return t.nodeType===9?t:t.ownerDocument}function jp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Up(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function hf(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ff=null;function Ab(){var t=window.event;return t&&t.type==="popstate"?t===ff?!1:(ff=t,!0):(ff=null,!1)}var kp=typeof setTimeout=="function"?setTimeout:void 0,xb=typeof clearTimeout=="function"?clearTimeout:void 0,Lp=typeof Promise=="function"?Promise:void 0,Sb=typeof queueMicrotask=="function"?queueMicrotask:typeof Lp<"u"?function(t){return Lp.resolve(null).then(t).catch(wb)}:kp;function wb(t){setTimeout(function(){throw t})}function rr(t){return t==="head"}function Pp(t,n){var r=n,l=0,c=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"){if(0<l&&8>l){r=l;var _=t.ownerDocument;if(r&1&&Rl(_.documentElement),r&2&&Rl(_.body),r&4)for(r=_.head,Rl(r),_=r.firstChild;_;){var T=_.nextSibling,C=_.nodeName;_[Vr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&_.rel.toLowerCase()==="stylesheet"||r.removeChild(_),_=T}}if(c===0){t.removeChild(f),jl(n);return}c--}else r==="$"||r==="$?"||r==="$!"?c++:l=r.charCodeAt(0)-48;else l=0;r=f}while(r);jl(n)}function df(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":df(r),Pi(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Rb(t,n,r,l){for(;t.nodeType===1;){var c=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Vr])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Un(t.nextSibling),t===null)break}return null}function Cb(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Un(t.nextSibling),t===null))return null;return t}function mf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Nb(t,n){var r=t.ownerDocument;if(t.data!=="$?"||r.readyState==="complete")n();else{var l=function(){n(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Un(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var gf=null;function zp(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return t;n--}else r==="/$"&&n++}t=t.previousSibling}return null}function Bp(t,n,r){switch(n=bu(r),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Rl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Pi(t)}var Cn=new Map,qp=new Set;function Eu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Di=rt.d;rt.d={f:Db,r:Ib,D:Vb,C:Ob,L:Mb,m:jb,X:kb,S:Ub,M:Lb};function Db(){var t=Di.f(),n=fu();return t||n}function Ib(t){var n=Bn(t);n!==null&&n.tag===5&&n.type==="form"?og(n):Di.r(t)}var aa=typeof document>"u"?null:document;function Hp(t,n,r){var l=aa;if(l&&typeof n=="string"&&n){var c=ge(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof r=="string"&&(c+='[crossorigin="'+r+'"]'),qp.has(c)||(qp.add(c),t={rel:t,crossOrigin:r,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),ke(n,"link",t),ue(n),l.head.appendChild(n)))}}function Vb(t){Di.D(t),Hp("dns-prefetch",t,null)}function Ob(t,n){Di.C(t,n),Hp("preconnect",t,n)}function Mb(t,n,r){Di.L(t,n,r);var l=aa;if(l&&t&&n){var c='link[rel="preload"][as="'+ge(n)+'"]';n==="image"&&r&&r.imageSrcSet?(c+='[imagesrcset="'+ge(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(c+='[imagesizes="'+ge(r.imageSizes)+'"]')):c+='[href="'+ge(t)+'"]';var f=c;switch(n){case"style":f=la(t);break;case"script":f=oa(t)}Cn.has(f)||(t=E({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Cn.set(f,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(Cl(f))||n==="script"&&l.querySelector(Nl(f))||(n=l.createElement("link"),ke(n,"link",t),ue(n),l.head.appendChild(n)))}}function jb(t,n){Di.m(t,n);var r=aa;if(r&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+ge(l)+'"][href="'+ge(t)+'"]',f=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=oa(t)}if(!Cn.has(f)&&(t=E({rel:"modulepreload",href:t},n),Cn.set(f,t),r.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Nl(f)))return}l=r.createElement("link"),ke(l,"link",t),ue(l),r.head.appendChild(l)}}}function Ub(t,n,r){Di.S(t,n,r);var l=aa;if(l&&t){var c=Ye(l).hoistableStyles,f=la(t);n=n||"default";var _=c.get(f);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Cl(f)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Cn.get(f))&&pf(t,r);var C=_=l.createElement("link");ue(C),ke(C,"link",t),C._p=new Promise(function(z,F){C.onload=z,C.onerror=F}),C.addEventListener("load",function(){T.loading|=1}),C.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Tu(_,n,l)}_={type:"stylesheet",instance:_,count:1,state:T},c.set(f,_)}}}function kb(t,n){Di.X(t,n);var r=aa;if(r&&t){var l=Ye(r).hoistableScripts,c=oa(t),f=l.get(c);f||(f=r.querySelector(Nl(c)),f||(t=E({src:t,async:!0},n),(n=Cn.get(c))&&yf(t,n),f=r.createElement("script"),ue(f),ke(f,"link",t),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Lb(t,n){Di.M(t,n);var r=aa;if(r&&t){var l=Ye(r).hoistableScripts,c=oa(t),f=l.get(c);f||(f=r.querySelector(Nl(c)),f||(t=E({src:t,async:!0,type:"module"},n),(n=Cn.get(c))&&yf(t,n),f=r.createElement("script"),ue(f),ke(f,"link",t),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Gp(t,n,r,l){var c=(c=vt.current)?Eu(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=la(r.href),r=Ye(c).hoistableStyles,l=r.get(n),l||(l={type:"style",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=la(r.href);var f=Ye(c).hoistableStyles,_=f.get(t);if(_||(c=c.ownerDocument||c,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=c.querySelector(Cl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),Cn.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Cn.set(t,r),f||Pb(c,t,r,_.state))),n&&l===null)throw Error(a(528,""));return _}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=oa(r),r=Ye(c).hoistableScripts,l=r.get(n),l||(l={type:"script",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function la(t){return'href="'+ge(t)+'"'}function Cl(t){return'link[rel="stylesheet"]['+t+"]"}function Qp(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function Pb(t,n,r,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),ke(n,"link",r),ue(n),t.head.appendChild(n))}function oa(t){return'[src="'+ge(t)+'"]'}function Nl(t){return"script[async]"+t}function Fp(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+ge(r.href)+'"]');if(l)return n.instance=l,ue(l),l;var c=E({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ue(l),ke(l,"style",c),Tu(l,r.precedence,t),n.instance=l;case"stylesheet":c=la(r.href);var f=t.querySelector(Cl(c));if(f)return n.state.loading|=4,n.instance=f,ue(f),f;l=Qp(r),(c=Cn.get(c))&&pf(l,c),f=(t.ownerDocument||t).createElement("link"),ue(f);var _=f;return _._p=new Promise(function(T,C){_.onload=T,_.onerror=C}),ke(f,"link",l),n.state.loading|=4,Tu(f,r.precedence,t),n.instance=f;case"script":return f=oa(r.src),(c=t.querySelector(Nl(f)))?(n.instance=c,ue(c),c):(l=r,(c=Cn.get(f))&&(l=E({},r),yf(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),ue(c),ke(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Tu(l,r.precedence,t));return n.instance}function Tu(t,n,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,f=c,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===n)f=T;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function pf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function yf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Au=null;function Yp(t,n,r){if(Au===null){var l=new Map,c=Au=new Map;c.set(r,l)}else c=Au,l=c.get(r),l||(l=new Map,c.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),c=0;c<r.length;c++){var f=r[c];if(!(f[Vr]||f[be]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(n)||"";_=t+_;var T=l.get(_);T?T.push(f):l.set(_,[f])}}return l}function Kp(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function zb(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Xp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Dl=null;function Bb(){}function qb(t,n,r){if(Dl===null)throw Error(a(475));var l=Dl;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=la(r.href),f=t.querySelector(Cl(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=xu.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=f,ue(f);return}f=t.ownerDocument||t,r=Qp(r),(c=Cn.get(c))&&pf(r,c),f=f.createElement("link"),ue(f);var _=f;_._p=new Promise(function(T,C){_.onload=T,_.onerror=C}),ke(f,"link",r),n.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=xu.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function Hb(){if(Dl===null)throw Error(a(475));var t=Dl;return t.stylesheets&&t.count===0&&vf(t,t.stylesheets),0<t.count?function(n){var r=setTimeout(function(){if(t.stylesheets&&vf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r)}}:null}function xu(){if(this.count--,this.count===0){if(this.stylesheets)vf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Su=null;function vf(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Su=new Map,n.forEach(Gb,t),Su=null,xu.call(t))}function Gb(t,n){if(!(n.state.loading&4)){var r=Su.get(t);if(r)var l=r.get(null);else{r=new Map,Su.set(t,r);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var _=c[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(r.set(_.dataset.precedence,_),l=_)}l&&r.set(null,l)}c=n.instance,_=c.getAttribute("data-precedence"),f=r.get(_)||l,f===l&&r.set(null,c),r.set(_,c),this.count++,l=xu.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var Il={$$typeof:ht,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function Qb(t,n,r,l,c,f,_,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.hiddenUpdates=ai(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function $p(t,n,r,l,c,f,_,T,C,z,F,Z){return t=new Qb(t,n,r,_,T,C,z,Z),n=1,f===!0&&(n|=24),f=on(3,null,null,n),t.current=f,f.stateNode=t,n=Jc(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:r,cache:n},nh(f),t}function Zp(t){return t?(t=Ps,t):Ps}function Jp(t,n,r,l,c,f){c=Zp(c),l.context===null?l.context=c:l.pendingContext=c,l=Qi(n),l.payload={element:r},f=f===void 0?null:f,f!==null&&(l.callback=f),r=Fi(t,l,n),r!==null&&(dn(r,t,n),ll(r,t,n))}function Wp(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function _f(t,n){Wp(t,n),(t=t.alternate)&&Wp(t,n)}function ty(t){if(t.tag===13){var n=Ls(t,67108864);n!==null&&dn(n,t,67108864),_f(t,67108864)}}var wu=!0;function Fb(t,n,r,l){var c=G.T;G.T=null;var f=rt.p;try{rt.p=2,bf(t,n,r,l)}finally{rt.p=f,G.T=c}}function Yb(t,n,r,l){var c=G.T;G.T=null;var f=rt.p;try{rt.p=8,bf(t,n,r,l)}finally{rt.p=f,G.T=c}}function bf(t,n,r,l){if(wu){var c=Ef(l);if(c===null)lf(t,n,l,Ru,r),ny(t,l);else if(Xb(c,t,n,r,l))l.stopPropagation();else if(ny(t,l),n&4&&-1<Kb.indexOf(t)){for(;c!==null;){var f=Bn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=In(f.pendingLanes);if(_!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var C=1<<31-Be(_);T.entanglements[1]|=C,_&=~C}ei(f),(Gt&6)===0&&(cu=pn()+500,xl(0))}}break;case 13:T=Ls(f,2),T!==null&&dn(T,f,2),fu(),_f(f,2)}if(f=Ef(l),f===null&&lf(t,n,l,Ru,r),f===c)break;c=f}c!==null&&l.stopPropagation()}else lf(t,n,l,null,r)}}function Ef(t){return t=_n(t),Tf(t)}var Ru=null;function Tf(t){if(Ru=null,t=oi(t),t!==null){var n=h(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=d(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Ru=t,null}function ey(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xc()){case Na:return 2;case ys:return 8;case Rr:case Sc:return 32;case vs:return 268435456;default:return 32}default:return 32}}var Af=!1,sr=null,ar=null,lr=null,Vl=new Map,Ol=new Map,or=[],Kb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ny(t,n){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":Vl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(n.pointerId)}}function Ml(t,n,r,l,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Bn(n),n!==null&&ty(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function Xb(t,n,r,l,c){switch(n){case"focusin":return sr=Ml(sr,t,n,r,l,c),!0;case"dragenter":return ar=Ml(ar,t,n,r,l,c),!0;case"mouseover":return lr=Ml(lr,t,n,r,l,c),!0;case"pointerover":var f=c.pointerId;return Vl.set(f,Ml(Vl.get(f)||null,t,n,r,l,c)),!0;case"gotpointercapture":return f=c.pointerId,Ol.set(f,Ml(Ol.get(f)||null,t,n,r,l,c)),!0}return!1}function iy(t){var n=oi(t.target);if(n!==null){var r=h(n);if(r!==null){if(n=r.tag,n===13){if(n=d(r),n!==null){t.blockedOn=n,ho(t.priority,function(){if(r.tag===13){var l=fn();l=Ui(l);var c=Ls(r,l);c!==null&&dn(c,r,l),_f(r,l)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Ef(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);fi=l,r.target.dispatchEvent(l),fi=null}else return n=Bn(r),n!==null&&ty(n),t.blockedOn=r,!1;n.shift()}return!0}function ry(t,n,r){Cu(t)&&r.delete(n)}function $b(){Af=!1,sr!==null&&Cu(sr)&&(sr=null),ar!==null&&Cu(ar)&&(ar=null),lr!==null&&Cu(lr)&&(lr=null),Vl.forEach(ry),Ol.forEach(ry)}function Nu(t,n){t.blockedOn===n&&(t.blockedOn=null,Af||(Af=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,$b)))}var Du=null;function sy(t){Du!==t&&(Du=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Du===t&&(Du=null);for(var n=0;n<t.length;n+=3){var r=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(Tf(l||r)===null)continue;break}var f=Bn(r);f!==null&&(t.splice(n,3),n-=3,Eh(f,{pending:!0,data:c,method:r.method,action:l},l,c))}}))}function jl(t){function n(C){return Nu(C,t)}sr!==null&&Nu(sr,t),ar!==null&&Nu(ar,t),lr!==null&&Nu(lr,t),Vl.forEach(n),Ol.forEach(n);for(var r=0;r<or.length;r++){var l=or[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<or.length&&(r=or[0],r.blockedOn===null);)iy(r),r.blockedOn===null&&or.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var c=r[l],f=r[l+1],_=c[me]||null;if(typeof f=="function")_||sy(r);else if(_){var T=null;if(f&&f.hasAttribute("formAction")){if(c=f,_=f[me]||null)T=_.formAction;else if(Tf(c)!==null)continue}else T=_.action;typeof T=="function"?r[l+1]=T:(r.splice(l,3),l-=3),sy(r)}}}function xf(t){this._internalRoot=t}Iu.prototype.render=xf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var r=n.current,l=fn();Jp(r,l,t,n,null,null)},Iu.prototype.unmount=xf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Jp(t.current,2,null,t,null,null),fu(),n[yn]=null}};function Iu(t){this._internalRoot=t}Iu.prototype.unstable_scheduleHydration=function(t){if(t){var n=ki();t={blockedOn:null,target:t,priority:n};for(var r=0;r<or.length&&n!==0&&n<or[r].priority;r++);or.splice(r,0,t),r===0&&iy(t)}};var ay=e.version;if(ay!=="19.1.0")throw Error(a(527,ay,"19.1.0"));rt.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=v(n),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var Zb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vu.isDisabled&&Vu.supportsFiber)try{ae=Vu.inject(Zb),Ht=Vu}catch{}}return kl.createRoot=function(t,n){if(!o(t))throw Error(a(299));var r=!1,l="",c=Tg,f=Ag,_=xg,T=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(T=n.unstable_transitionCallbacks)),n=$p(t,1,!1,null,null,r,l,c,f,_,T,null),t[yn]=n.current,af(t),new xf(n)},kl.hydrateRoot=function(t,n,r){if(!o(t))throw Error(a(299));var l=!1,c="",f=Tg,_=Ag,T=xg,C=null,z=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(_=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(C=r.unstable_transitionCallbacks),r.formState!==void 0&&(z=r.formState)),n=$p(t,1,!0,n,r??null,l,c,f,_,T,C,z),n.context=Zp(null),r=n.current,l=fn(),l=Ui(l),c=Qi(l),c.callback=null,Fi(r,c,l),r=l,n.current.lanes=r,li(n,r),ei(n),t[yn]=n.current,af(t),new Iu(n)},kl.version="19.1.0",kl}var py;function lE(){if(py)return Rf.exports;py=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Rf.exports=aE(),Rf.exports}var oE=lE();const uE="modulepreload",cE=function(s){return"/youtube-bgm-research/"+s},yy={},vy=function(e,i,a){let o=Promise.resolve();if(i&&i.length>0){let d=function(p){return Promise.all(p.map(E=>Promise.resolve(E).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),v=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=d(i.map(p=>{if(p=cE(p),p in yy)return;yy[p]=!0;const E=p.endsWith(".css"),w=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const R=document.createElement("link");if(R.rel=E?"stylesheet":uE,E||(R.as="script"),R.crossOrigin="",R.href=p,v&&R.setAttribute("nonce",v),document.head.appendChild(R),E)return new Promise((k,Q)=>{R.addEventListener("load",k),R.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${p}`)))})}))}function h(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return o.then(d=>{for(const g of d||[])g.status==="rejected"&&h(g.reason);return e().catch(h)})},hE=()=>{};var _y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=function(s){const e=[];let i=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},fE=function(s){const e=[];let i=0,a=0;for(;i<s.length;){const o=s[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const h=s[i++];e[a++]=String.fromCharCode((o&31)<<6|h&63)}else if(o>239&&o<365){const h=s[i++],d=s[i++],g=s[i++],v=((o&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(v>>10)),e[a++]=String.fromCharCode(56320+(v&1023))}else{const h=s[i++],d=s[i++];e[a++]=String.fromCharCode((o&15)<<12|(h&63)<<6|d&63)}}return e.join("")},M0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const h=s[o],d=o+1<s.length,g=d?s[o+1]:0,v=o+2<s.length,p=v?s[o+2]:0,E=h>>2,w=(h&3)<<4|g>>4;let R=(g&15)<<2|p>>6,k=p&63;v||(k=64,d||(R=64)),a.push(i[E],i[w],i[R],i[k])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(O0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):fE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const h=i[s.charAt(o++)],g=o<s.length?i[s.charAt(o)]:0;++o;const p=o<s.length?i[s.charAt(o)]:64;++o;const w=o<s.length?i[s.charAt(o)]:64;if(++o,h==null||g==null||p==null||w==null)throw new dE;const R=h<<2|g>>4;if(a.push(R),p!==64){const k=g<<4&240|p>>2;if(a.push(k),w!==64){const Q=p<<6&192|w;a.push(Q)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class dE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mE=function(s){const e=O0(s);return M0.encodeByteArray(e,!0)},Gu=function(s){return mE(s).replace(/\./g,"")},gE=function(s){try{return M0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=()=>pE().__FIREBASE_DEFAULTS__,vE=()=>{if(typeof process>"u"||typeof _y>"u")return;const s=_y.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},_E=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&gE(s[1]);return e&&JSON.parse(e)},dd=()=>{try{return hE()||yE()||vE()||_E()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},bE=s=>{var e,i;return(i=(e=dd())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[s]},EE=s=>{const e=bE(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},j0=()=>{var s;return(s=dd())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(s){return s.endsWith(".cloudworkstations.dev")}async function AE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,h=s.sub||s.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Gu(JSON.stringify(i)),Gu(JSON.stringify(d)),""].join(".")}const ql={};function SE(){const s={prod:[],emulator:[]};for(const e of Object.keys(ql))ql[e]?s.emulator.push(e):s.prod.push(e);return s}function wE(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let by=!1;function RE(s,e){if(typeof window>"u"||typeof document>"u"||!md(window.location.host)||ql[s]===e||ql[s]||by)return;ql[s]=e;function i(R){return`__firebase__banner__${R}`}const a="__firebase__banner",h=SE().prod.length>0;function d(){const R=document.getElementById(a);R&&R.remove()}function g(R){R.style.display="flex",R.style.background="#7faaf0",R.style.position="fixed",R.style.bottom="5px",R.style.left="5px",R.style.padding=".5em",R.style.borderRadius="5px",R.style.alignItems="center"}function v(R,k){R.setAttribute("width","24"),R.setAttribute("id",k),R.setAttribute("height","24"),R.setAttribute("viewBox","0 0 24 24"),R.setAttribute("fill","none"),R.style.marginLeft="-6px"}function p(){const R=document.createElement("span");return R.style.cursor="pointer",R.style.marginLeft="16px",R.style.fontSize="24px",R.innerHTML=" &times;",R.onclick=()=>{by=!0,d()},R}function E(R,k){R.setAttribute("id",k),R.innerText="Learn more",R.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",R.setAttribute("target","__blank"),R.style.paddingLeft="5px",R.style.textDecoration="underline"}function w(){const R=wE(a),k=i("text"),Q=document.getElementById(k)||document.createElement("span"),et=i("learnmore"),K=document.getElementById(et)||document.createElement("a"),bt=i("preprendIcon"),ct=document.getElementById(bt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(R.created){const ht=R.element;g(ht),E(K,et);const $=p();v(ct,bt),ht.append(ct,Q,K,$),document.body.appendChild(ht)}h?(Q.innerText="Preview backend disconnected.",ct.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ct.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Q.innerText="Preview backend running in this workspace."),Q.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NE(){var s;const e=(s=dd())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DE(){return!NE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IE(){try{return typeof indexedDB=="object"}catch{return!1}}function VE(){return new Promise((s,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var h;e(((h=o.error)===null||h===void 0?void 0:h.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="FirebaseError";class Ta extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=OE,Object.setPrototypeOf(this,Ta.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,U0.prototype.create)}}class U0{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,h=this.errors[e],d=h?ME(h,a):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new Ta(o,g,a)}}function ME(s,e){return s.replace(jE,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const jE=/\{\$([^}]+)}/g;function Qu(s,e){if(s===e)return!0;const i=Object.keys(s),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const h=s[o],d=e[o];if(Ey(h)&&Ey(d)){if(!Qu(h,d))return!1}else if(h!==d)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function Ey(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(s){return s&&s._delegate?s._delegate:s}class Yl{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new TE;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LE(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:o});a.resolve(h)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);a===g&&d.resolve(o)}return o}onInit(e,i){var a;const o=this.normalizeInstanceIdentifier(i),h=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;h.add(e),this.onInitCallbacks.set(o,h);const d=this.instances.get(o);return d&&e(d,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:kE(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function kE(s){return s===ls?void 0:s}function LE(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new UE(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Lt||(Lt={}));const zE={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},BE=Lt.INFO,qE={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},HE=(s,e,...i)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=qE[e];if(o)console[o](`[${a}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class k0{constructor(e){this.name=e,this._logLevel=BE,this._logHandler=HE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}const GE=(s,e)=>e.some(i=>s instanceof i);let Ty,Ay;function QE(){return Ty||(Ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FE(){return Ay||(Ay=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const L0=new WeakMap,zf=new WeakMap,P0=new WeakMap,If=new WeakMap,gd=new WeakMap;function YE(s){const e=new Promise((i,a)=>{const o=()=>{s.removeEventListener("success",h),s.removeEventListener("error",d)},h=()=>{i(hr(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",h),s.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&L0.set(i,s)}).catch(()=>{}),gd.set(e,s),e}function KE(s){if(zf.has(s))return;const e=new Promise((i,a)=>{const o=()=>{s.removeEventListener("complete",h),s.removeEventListener("error",d),s.removeEventListener("abort",d)},h=()=>{i(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",h),s.addEventListener("error",d),s.addEventListener("abort",d)});zf.set(s,e)}let Bf={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return zf.get(s);if(e==="objectStoreNames")return s.objectStoreNames||P0.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return hr(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function XE(s){Bf=s(Bf)}function $E(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=s.call(Vf(this),e,...i);return P0.set(a,e.sort?e.sort():[e]),hr(a)}:FE().includes(s)?function(...e){return s.apply(Vf(this),e),hr(L0.get(this))}:function(...e){return hr(s.apply(Vf(this),e))}}function ZE(s){return typeof s=="function"?$E(s):(s instanceof IDBTransaction&&KE(s),GE(s,QE())?new Proxy(s,Bf):s)}function hr(s){if(s instanceof IDBRequest)return YE(s);if(If.has(s))return If.get(s);const e=ZE(s);return e!==s&&(If.set(s,e),gd.set(e,s)),e}const Vf=s=>gd.get(s);function JE(s,e,{blocked:i,upgrade:a,blocking:o,terminated:h}={}){const d=indexedDB.open(s,e),g=hr(d);return a&&d.addEventListener("upgradeneeded",v=>{a(hr(d.result),v.oldVersion,v.newVersion,hr(d.transaction),v)}),i&&d.addEventListener("blocked",v=>i(v.oldVersion,v.newVersion,v)),g.then(v=>{h&&v.addEventListener("close",()=>h()),o&&v.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const WE=["get","getKey","getAll","getAllKeys","count"],tT=["put","add","delete","clear"],Of=new Map;function xy(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Of.get(e))return Of.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=tT.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||WE.includes(i)))return;const h=async function(d,...g){const v=this.transaction(d,o?"readwrite":"readonly");let p=v.store;return a&&(p=p.index(g.shift())),(await Promise.all([p[i](...g),o&&v.done]))[0]};return Of.set(e,h),h}XE(s=>({...s,get:(e,i,a)=>xy(e,i)||s.get(e,i,a),has:(e,i)=>!!xy(e,i)||s.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(nT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function nT(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qf="@firebase/app",Sy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new k0("@firebase/app"),iT="@firebase/app-compat",rT="@firebase/analytics-compat",sT="@firebase/analytics",aT="@firebase/app-check-compat",lT="@firebase/app-check",oT="@firebase/auth",uT="@firebase/auth-compat",cT="@firebase/database",hT="@firebase/data-connect",fT="@firebase/database-compat",dT="@firebase/functions",mT="@firebase/functions-compat",gT="@firebase/installations",pT="@firebase/installations-compat",yT="@firebase/messaging",vT="@firebase/messaging-compat",_T="@firebase/performance",bT="@firebase/performance-compat",ET="@firebase/remote-config",TT="@firebase/remote-config-compat",AT="@firebase/storage",xT="@firebase/storage-compat",ST="@firebase/firestore",wT="@firebase/ai",RT="@firebase/firestore-compat",CT="firebase",NT="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hf="[DEFAULT]",DT={[qf]:"fire-core",[iT]:"fire-core-compat",[sT]:"fire-analytics",[rT]:"fire-analytics-compat",[lT]:"fire-app-check",[aT]:"fire-app-check-compat",[oT]:"fire-auth",[uT]:"fire-auth-compat",[cT]:"fire-rtdb",[hT]:"fire-data-connect",[fT]:"fire-rtdb-compat",[dT]:"fire-fn",[mT]:"fire-fn-compat",[gT]:"fire-iid",[pT]:"fire-iid-compat",[yT]:"fire-fcm",[vT]:"fire-fcm-compat",[_T]:"fire-perf",[bT]:"fire-perf-compat",[ET]:"fire-rc",[TT]:"fire-rc-compat",[AT]:"fire-gcs",[xT]:"fire-gcs-compat",[ST]:"fire-fst",[RT]:"fire-fst-compat",[wT]:"fire-vertex","fire-js":"fire-js",[CT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Map,IT=new Map,Gf=new Map;function wy(s,e){try{s.container.addComponent(e)}catch(i){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function Yu(s){const e=s.name;if(Gf.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;Gf.set(e,s);for(const i of Fu.values())wy(i,s);for(const i of IT.values())wy(i,s);return!0}function VT(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function OT(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new U0("app","Firebase",MT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,i,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Yl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=NT;function z0(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const a=Object.assign({name:Hf,automaticDataCollectionEnabled:!0},e),o=a.name;if(typeof o!="string"||!o)throw fr.create("bad-app-name",{appName:String(o)});if(i||(i=j0()),!i)throw fr.create("no-options");const h=Fu.get(o);if(h){if(Qu(i,h.options)&&Qu(a,h.config))return h;throw fr.create("duplicate-app",{appName:o})}const d=new PE(o);for(const v of Gf.values())d.addComponent(v);const g=new jT(i,a,d);return Fu.set(o,g),g}function kT(s=Hf){const e=Fu.get(s);if(!e&&s===Hf&&j0())return z0();if(!e)throw fr.create("no-app",{appName:s});return e}function da(s,e,i){var a;let o=(a=DT[s])!==null&&a!==void 0?a:s;i&&(o+=`-${i}`);const h=o.match(/\s|\//),d=e.match(/\s|\//);if(h||d){const g=[`Unable to register library "${o}" with version "${e}":`];h&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(g.join(" "));return}Yu(new Yl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firebase-heartbeat-database",PT=1,Kl="firebase-heartbeat-store";let Mf=null;function B0(){return Mf||(Mf=JE(LT,PT,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Kl)}catch(i){console.warn(i)}}}}).catch(s=>{throw fr.create("idb-open",{originalErrorMessage:s.message})})),Mf}async function zT(s){try{const i=(await B0()).transaction(Kl),a=await i.objectStore(Kl).get(q0(s));return await i.done,a}catch(e){if(e instanceof Ta)Oi.warn(e.message);else{const i=fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(i.message)}}}async function Ry(s,e){try{const a=(await B0()).transaction(Kl,"readwrite");await a.objectStore(Kl).put(e,q0(s)),await a.done}catch(i){if(i instanceof Ta)Oi.warn(i.message);else{const a=fr.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Oi.warn(a.message)}}}function q0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=1024,qT=30;class HT{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new QT(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=Cy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(d=>d.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:o}),this._heartbeatsCache.heartbeats.length>qT){const d=FT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Oi.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Cy(),{heartbeatsToSend:a,unsentEntries:o}=GT(this._heartbeatsCache.heartbeats),h=Gu(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(i){return Oi.warn(i),""}}}function Cy(){return new Date().toISOString().substring(0,10)}function GT(s,e=BT){const i=[];let a=s.slice();for(const o of s){const h=i.find(d=>d.agent===o.agent);if(h){if(h.dates.push(o.date),Ny(i)>e){h.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Ny(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class QT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IE()?VE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await zT(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Ry(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Ny(s){return Gu(JSON.stringify({version:2,heartbeats:s})).length}function FT(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let a=1;a<s.length;a++)s[a].date<i&&(i=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(s){Yu(new Yl("platform-logger",e=>new eT(e),"PRIVATE")),Yu(new Yl("heartbeat",e=>new HT(e),"PRIVATE")),da(qf,Sy,s),da(qf,Sy,"esm2017"),da("fire-js","")}YT("");var Dy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dr,H0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,x){function N(){}N.prototype=x.prototype,V.D=x.prototype,V.prototype=new N,V.prototype.constructor=V,V.C=function(M,D,I){for(var S=Array(arguments.length-2),Wt=2;Wt<arguments.length;Wt++)S[Wt-2]=arguments[Wt];return x.prototype[D].apply(M,S)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,i),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,x,N){N||(N=0);var M=Array(16);if(typeof x=="string")for(var D=0;16>D;++D)M[D]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(D=0;16>D;++D)M[D]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=V.g[0],N=V.g[1],D=V.g[2];var I=V.g[3],S=x+(I^N&(D^I))+M[0]+3614090360&4294967295;x=N+(S<<7&4294967295|S>>>25),S=I+(D^x&(N^D))+M[1]+3905402710&4294967295,I=x+(S<<12&4294967295|S>>>20),S=D+(N^I&(x^N))+M[2]+606105819&4294967295,D=I+(S<<17&4294967295|S>>>15),S=N+(x^D&(I^x))+M[3]+3250441966&4294967295,N=D+(S<<22&4294967295|S>>>10),S=x+(I^N&(D^I))+M[4]+4118548399&4294967295,x=N+(S<<7&4294967295|S>>>25),S=I+(D^x&(N^D))+M[5]+1200080426&4294967295,I=x+(S<<12&4294967295|S>>>20),S=D+(N^I&(x^N))+M[6]+2821735955&4294967295,D=I+(S<<17&4294967295|S>>>15),S=N+(x^D&(I^x))+M[7]+4249261313&4294967295,N=D+(S<<22&4294967295|S>>>10),S=x+(I^N&(D^I))+M[8]+1770035416&4294967295,x=N+(S<<7&4294967295|S>>>25),S=I+(D^x&(N^D))+M[9]+2336552879&4294967295,I=x+(S<<12&4294967295|S>>>20),S=D+(N^I&(x^N))+M[10]+4294925233&4294967295,D=I+(S<<17&4294967295|S>>>15),S=N+(x^D&(I^x))+M[11]+2304563134&4294967295,N=D+(S<<22&4294967295|S>>>10),S=x+(I^N&(D^I))+M[12]+1804603682&4294967295,x=N+(S<<7&4294967295|S>>>25),S=I+(D^x&(N^D))+M[13]+4254626195&4294967295,I=x+(S<<12&4294967295|S>>>20),S=D+(N^I&(x^N))+M[14]+2792965006&4294967295,D=I+(S<<17&4294967295|S>>>15),S=N+(x^D&(I^x))+M[15]+1236535329&4294967295,N=D+(S<<22&4294967295|S>>>10),S=x+(D^I&(N^D))+M[1]+4129170786&4294967295,x=N+(S<<5&4294967295|S>>>27),S=I+(N^D&(x^N))+M[6]+3225465664&4294967295,I=x+(S<<9&4294967295|S>>>23),S=D+(x^N&(I^x))+M[11]+643717713&4294967295,D=I+(S<<14&4294967295|S>>>18),S=N+(I^x&(D^I))+M[0]+3921069994&4294967295,N=D+(S<<20&4294967295|S>>>12),S=x+(D^I&(N^D))+M[5]+3593408605&4294967295,x=N+(S<<5&4294967295|S>>>27),S=I+(N^D&(x^N))+M[10]+38016083&4294967295,I=x+(S<<9&4294967295|S>>>23),S=D+(x^N&(I^x))+M[15]+3634488961&4294967295,D=I+(S<<14&4294967295|S>>>18),S=N+(I^x&(D^I))+M[4]+3889429448&4294967295,N=D+(S<<20&4294967295|S>>>12),S=x+(D^I&(N^D))+M[9]+568446438&4294967295,x=N+(S<<5&4294967295|S>>>27),S=I+(N^D&(x^N))+M[14]+3275163606&4294967295,I=x+(S<<9&4294967295|S>>>23),S=D+(x^N&(I^x))+M[3]+4107603335&4294967295,D=I+(S<<14&4294967295|S>>>18),S=N+(I^x&(D^I))+M[8]+1163531501&4294967295,N=D+(S<<20&4294967295|S>>>12),S=x+(D^I&(N^D))+M[13]+2850285829&4294967295,x=N+(S<<5&4294967295|S>>>27),S=I+(N^D&(x^N))+M[2]+4243563512&4294967295,I=x+(S<<9&4294967295|S>>>23),S=D+(x^N&(I^x))+M[7]+1735328473&4294967295,D=I+(S<<14&4294967295|S>>>18),S=N+(I^x&(D^I))+M[12]+2368359562&4294967295,N=D+(S<<20&4294967295|S>>>12),S=x+(N^D^I)+M[5]+4294588738&4294967295,x=N+(S<<4&4294967295|S>>>28),S=I+(x^N^D)+M[8]+2272392833&4294967295,I=x+(S<<11&4294967295|S>>>21),S=D+(I^x^N)+M[11]+1839030562&4294967295,D=I+(S<<16&4294967295|S>>>16),S=N+(D^I^x)+M[14]+4259657740&4294967295,N=D+(S<<23&4294967295|S>>>9),S=x+(N^D^I)+M[1]+2763975236&4294967295,x=N+(S<<4&4294967295|S>>>28),S=I+(x^N^D)+M[4]+1272893353&4294967295,I=x+(S<<11&4294967295|S>>>21),S=D+(I^x^N)+M[7]+4139469664&4294967295,D=I+(S<<16&4294967295|S>>>16),S=N+(D^I^x)+M[10]+3200236656&4294967295,N=D+(S<<23&4294967295|S>>>9),S=x+(N^D^I)+M[13]+681279174&4294967295,x=N+(S<<4&4294967295|S>>>28),S=I+(x^N^D)+M[0]+3936430074&4294967295,I=x+(S<<11&4294967295|S>>>21),S=D+(I^x^N)+M[3]+3572445317&4294967295,D=I+(S<<16&4294967295|S>>>16),S=N+(D^I^x)+M[6]+76029189&4294967295,N=D+(S<<23&4294967295|S>>>9),S=x+(N^D^I)+M[9]+3654602809&4294967295,x=N+(S<<4&4294967295|S>>>28),S=I+(x^N^D)+M[12]+3873151461&4294967295,I=x+(S<<11&4294967295|S>>>21),S=D+(I^x^N)+M[15]+530742520&4294967295,D=I+(S<<16&4294967295|S>>>16),S=N+(D^I^x)+M[2]+3299628645&4294967295,N=D+(S<<23&4294967295|S>>>9),S=x+(D^(N|~I))+M[0]+4096336452&4294967295,x=N+(S<<6&4294967295|S>>>26),S=I+(N^(x|~D))+M[7]+1126891415&4294967295,I=x+(S<<10&4294967295|S>>>22),S=D+(x^(I|~N))+M[14]+2878612391&4294967295,D=I+(S<<15&4294967295|S>>>17),S=N+(I^(D|~x))+M[5]+4237533241&4294967295,N=D+(S<<21&4294967295|S>>>11),S=x+(D^(N|~I))+M[12]+1700485571&4294967295,x=N+(S<<6&4294967295|S>>>26),S=I+(N^(x|~D))+M[3]+2399980690&4294967295,I=x+(S<<10&4294967295|S>>>22),S=D+(x^(I|~N))+M[10]+4293915773&4294967295,D=I+(S<<15&4294967295|S>>>17),S=N+(I^(D|~x))+M[1]+2240044497&4294967295,N=D+(S<<21&4294967295|S>>>11),S=x+(D^(N|~I))+M[8]+1873313359&4294967295,x=N+(S<<6&4294967295|S>>>26),S=I+(N^(x|~D))+M[15]+4264355552&4294967295,I=x+(S<<10&4294967295|S>>>22),S=D+(x^(I|~N))+M[6]+2734768916&4294967295,D=I+(S<<15&4294967295|S>>>17),S=N+(I^(D|~x))+M[13]+1309151649&4294967295,N=D+(S<<21&4294967295|S>>>11),S=x+(D^(N|~I))+M[4]+4149444226&4294967295,x=N+(S<<6&4294967295|S>>>26),S=I+(N^(x|~D))+M[11]+3174756917&4294967295,I=x+(S<<10&4294967295|S>>>22),S=D+(x^(I|~N))+M[2]+718787259&4294967295,D=I+(S<<15&4294967295|S>>>17),S=N+(I^(D|~x))+M[9]+3951481745&4294967295,V.g[0]=V.g[0]+x&4294967295,V.g[1]=V.g[1]+(D+(S<<21&4294967295|S>>>11))&4294967295,V.g[2]=V.g[2]+D&4294967295,V.g[3]=V.g[3]+I&4294967295}a.prototype.u=function(V,x){x===void 0&&(x=V.length);for(var N=x-this.blockSize,M=this.B,D=this.h,I=0;I<x;){if(D==0)for(;I<=N;)o(this,V,I),I+=this.blockSize;if(typeof V=="string"){for(;I<x;)if(M[D++]=V.charCodeAt(I++),D==this.blockSize){o(this,M),D=0;break}}else for(;I<x;)if(M[D++]=V[I++],D==this.blockSize){o(this,M),D=0;break}}this.h=D,this.o+=x},a.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var x=1;x<V.length-8;++x)V[x]=0;var N=8*this.o;for(x=V.length-8;x<V.length;++x)V[x]=N&255,N/=256;for(this.u(V),V=Array(16),x=N=0;4>x;++x)for(var M=0;32>M;M+=8)V[N++]=this.g[x]>>>M&255;return V};function h(V,x){var N=g;return Object.prototype.hasOwnProperty.call(N,V)?N[V]:N[V]=x(V)}function d(V,x){this.h=x;for(var N=[],M=!0,D=V.length-1;0<=D;D--){var I=V[D]|0;M&&I==x||(N[D]=I,M=!1)}this.g=N}var g={};function v(V){return-128<=V&&128>V?h(V,function(x){return new d([x|0],0>x?-1:0)}):new d([V|0],0>V?-1:0)}function p(V){if(isNaN(V)||!isFinite(V))return w;if(0>V)return K(p(-V));for(var x=[],N=1,M=0;V>=N;M++)x[M]=V/N|0,N*=4294967296;return new d(x,0)}function E(V,x){if(V.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(V.charAt(0)=="-")return K(E(V.substring(1),x));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=p(Math.pow(x,8)),M=w,D=0;D<V.length;D+=8){var I=Math.min(8,V.length-D),S=parseInt(V.substring(D,D+I),x);8>I?(I=p(Math.pow(x,I)),M=M.j(I).add(p(S))):(M=M.j(N),M=M.add(p(S)))}return M}var w=v(0),R=v(1),k=v(16777216);s=d.prototype,s.m=function(){if(et(this))return-K(this).m();for(var V=0,x=1,N=0;N<this.g.length;N++){var M=this.i(N);V+=(0<=M?M:4294967296+M)*x,x*=4294967296}return V},s.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(Q(this))return"0";if(et(this))return"-"+K(this).toString(V);for(var x=p(Math.pow(V,6)),N=this,M="";;){var D=$(N,x).g;N=bt(N,D.j(x));var I=((0<N.g.length?N.g[0]:N.h)>>>0).toString(V);if(N=D,Q(N))return I+M;for(;6>I.length;)I="0"+I;M=I+M}},s.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function Q(V){if(V.h!=0)return!1;for(var x=0;x<V.g.length;x++)if(V.g[x]!=0)return!1;return!0}function et(V){return V.h==-1}s.l=function(V){return V=bt(this,V),et(V)?-1:Q(V)?0:1};function K(V){for(var x=V.g.length,N=[],M=0;M<x;M++)N[M]=~V.g[M];return new d(N,~V.h).add(R)}s.abs=function(){return et(this)?K(this):this},s.add=function(V){for(var x=Math.max(this.g.length,V.g.length),N=[],M=0,D=0;D<=x;D++){var I=M+(this.i(D)&65535)+(V.i(D)&65535),S=(I>>>16)+(this.i(D)>>>16)+(V.i(D)>>>16);M=S>>>16,I&=65535,S&=65535,N[D]=S<<16|I}return new d(N,N[N.length-1]&-2147483648?-1:0)};function bt(V,x){return V.add(K(x))}s.j=function(V){if(Q(this)||Q(V))return w;if(et(this))return et(V)?K(this).j(K(V)):K(K(this).j(V));if(et(V))return K(this.j(K(V)));if(0>this.l(k)&&0>V.l(k))return p(this.m()*V.m());for(var x=this.g.length+V.g.length,N=[],M=0;M<2*x;M++)N[M]=0;for(M=0;M<this.g.length;M++)for(var D=0;D<V.g.length;D++){var I=this.i(M)>>>16,S=this.i(M)&65535,Wt=V.i(D)>>>16,te=V.i(D)&65535;N[2*M+2*D]+=S*te,ct(N,2*M+2*D),N[2*M+2*D+1]+=I*te,ct(N,2*M+2*D+1),N[2*M+2*D+1]+=S*Wt,ct(N,2*M+2*D+1),N[2*M+2*D+2]+=I*Wt,ct(N,2*M+2*D+2)}for(M=0;M<x;M++)N[M]=N[2*M+1]<<16|N[2*M];for(M=x;M<2*x;M++)N[M]=0;return new d(N,0)};function ct(V,x){for(;(V[x]&65535)!=V[x];)V[x+1]+=V[x]>>>16,V[x]&=65535,x++}function ht(V,x){this.g=V,this.h=x}function $(V,x){if(Q(x))throw Error("division by zero");if(Q(V))return new ht(w,w);if(et(V))return x=$(K(V),x),new ht(K(x.g),K(x.h));if(et(x))return x=$(V,K(x)),new ht(K(x.g),x.h);if(30<V.g.length){if(et(V)||et(x))throw Error("slowDivide_ only works with positive integers.");for(var N=R,M=x;0>=M.l(V);)N=W(N),M=W(M);var D=Et(N,1),I=Et(M,1);for(M=Et(M,2),N=Et(N,2);!Q(M);){var S=I.add(M);0>=S.l(V)&&(D=D.add(N),I=S),M=Et(M,1),N=Et(N,1)}return x=bt(V,D.j(x)),new ht(D,x)}for(D=w;0<=V.l(x);){for(N=Math.max(1,Math.floor(V.m()/x.m())),M=Math.ceil(Math.log(N)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),I=p(N),S=I.j(x);et(S)||0<S.l(V);)N-=M,I=p(N),S=I.j(x);Q(I)&&(I=R),D=D.add(I),V=bt(V,S)}return new ht(D,V)}s.A=function(V){return $(this,V).h},s.and=function(V){for(var x=Math.max(this.g.length,V.g.length),N=[],M=0;M<x;M++)N[M]=this.i(M)&V.i(M);return new d(N,this.h&V.h)},s.or=function(V){for(var x=Math.max(this.g.length,V.g.length),N=[],M=0;M<x;M++)N[M]=this.i(M)|V.i(M);return new d(N,this.h|V.h)},s.xor=function(V){for(var x=Math.max(this.g.length,V.g.length),N=[],M=0;M<x;M++)N[M]=this.i(M)^V.i(M);return new d(N,this.h^V.h)};function W(V){for(var x=V.g.length+1,N=[],M=0;M<x;M++)N[M]=V.i(M)<<1|V.i(M-1)>>>31;return new d(N,V.h)}function Et(V,x){var N=x>>5;x%=32;for(var M=V.g.length-N,D=[],I=0;I<M;I++)D[I]=0<x?V.i(I+N)>>>x|V.i(I+N+1)<<32-x:V.i(I+N);return new d(D,V.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,H0=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=E,dr=d}).apply(typeof Dy<"u"?Dy:typeof self<"u"?self:typeof window<"u"?window:{});var Ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var G0,Ll,Q0,Lu,Qf,F0,Y0,K0;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ou=="object"&&Ou];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var a=i(this);function o(u,m){if(m)t:{var y=a;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in y))break t;y=y[L]}u=u[u.length-1],A=y[u],m=m(A),m!=A&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function h(u,m){u instanceof String&&(u+="");var y=0,A=!1,L={next:function(){if(!A&&y<u.length){var H=y++;return{value:m(H,u[H]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(u){return u||function(){return h(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function v(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,y){return u.call.apply(u.bind,arguments)}function w(u,m,y){if(!u)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function R(u,m,y){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:w,R.apply(null,arguments)}function k(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var A=y.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function Q(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(A,L,H){for(var it=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)it[Ot-2]=arguments[Ot];return m.prototype[L].apply(A,it)}}function et(u){const m=u.length;if(0<m){const y=Array(m);for(let A=0;A<m;A++)y[A]=u[A];return y}return[]}function K(u,m){for(let y=1;y<arguments.length;y++){const A=arguments[y];if(v(A)){const L=u.length||0,H=A.length||0;u.length=L+H;for(let it=0;it<H;it++)u[L+it]=A[it]}else u.push(A)}}class bt{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ct(u){return/^[\s\xa0]*$/.test(u)}function ht(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function $(u){return $[" "](u),u}$[" "]=function(){};var W=ht().indexOf("Gecko")!=-1&&!(ht().toLowerCase().indexOf("webkit")!=-1&&ht().indexOf("Edge")==-1)&&!(ht().indexOf("Trident")!=-1||ht().indexOf("MSIE")!=-1)&&ht().indexOf("Edge")==-1;function Et(u,m,y){for(const A in u)m.call(y,u[A],A,u)}function V(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function x(u){const m={};for(const y in u)m[y]=u[y];return m}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,m){let y,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(y in A)u[y]=A[y];for(let H=0;H<N.length;H++)y=N[H],Object.prototype.hasOwnProperty.call(A,y)&&(u[y]=A[y])}}function D(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function I(u){g.setTimeout(()=>{throw u},0)}function S(){var u=Nt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Wt{constructor(){this.h=this.g=null}add(m,y){const A=te.get();A.set(m,y),this.h?this.h.next=A:this.g=A,this.h=A}}var te=new bt(()=>new G,u=>u.reset());class G{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,ut=!1,Nt=new Wt,O=()=>{const u=g.Promise.resolve(void 0);rt=()=>{u.then(X)}};var X=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(y){I(y)}var m=te;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ut=!1};function st(){this.s=this.s,this.C=this.C}st.prototype.s=!1,st.prototype.ma=function(){this.s||(this.s=!0,this.N())},st.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var dt=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};g.addEventListener("test",y,m),g.removeEventListener("test",y,m)}catch{}return u}();function xt(u,m){if(nt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(W){t:{try{$(m.nodeName);var L=!0;break t}catch{}L=!1}L||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xt.aa.h.call(this)}}Q(xt,nt);var vt={2:"touch",3:"pen",4:"mouse"};xt.prototype.h=function(){xt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function gn(u,m,y,A,L){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!A,this.ha=L,this.key=++Ft,this.da=this.fa=!1}function Pn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Dn(u){this.src=u,this.g={},this.h=0}Dn.prototype.add=function(u,m,y,A,L){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var it=Sr(u,m,A,L);return-1<it?(m=u[it],y||(m.fa=!1)):(m=new gn(m,this.src,H,!!A,L),m.fa=y,u.push(m)),m};function xr(u,m){var y=m.type;if(y in u.g){var A=u.g[y],L=Array.prototype.indexOf.call(A,m,void 0),H;(H=0<=L)&&Array.prototype.splice.call(A,L,1),H&&(Pn(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Sr(u,m,y,A){for(var L=0;L<u.length;++L){var H=u[L];if(!H.da&&H.listener==m&&H.capture==!!y&&H.ha==A)return L}return-1}var wr="closure_lm_"+(1e6*Math.random()|0),Ca={};function oo(u,m,y,A,L){if(Array.isArray(m)){for(var H=0;H<m.length;H++)oo(u,m[H],y,A,L);return null}return y=uo(y),u&&u[de]?u.K(m,y,p(A)?!!A.capture:!1,L):pn(u,m,y,!1,A,L)}function pn(u,m,y,A,L,H){if(!m)throw Error("Invalid event type");var it=p(L)?!!L.capture:!!L,Ot=vs(u);if(Ot||(u[wr]=Ot=new Dn(u)),y=Ot.add(m,y,A,it,H),y.proxy)return y;if(A=xc(),y.proxy=A,A.src=u,A.listener=y,u.addEventListener)dt||(L=it),L===void 0&&(L=!1),u.addEventListener(m.toString(),A,L);else if(u.attachEvent)u.attachEvent(Rr(m.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return y}function xc(){function u(y){return m.call(u.src,u.listener,y)}const m=Sc;return u}function Na(u,m,y,A,L){if(Array.isArray(m))for(var H=0;H<m.length;H++)Na(u,m[H],y,A,L);else A=p(A)?!!A.capture:!!A,y=uo(y),u&&u[de]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],y=Sr(H,y,A,L),-1<y&&(Pn(H[y]),Array.prototype.splice.call(H,y,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=vs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Sr(m,y,A,L)),(y=-1<u?m[u]:null)&&ys(y))}function ys(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[de])xr(m.i,u);else{var y=u.type,A=u.proxy;m.removeEventListener?m.removeEventListener(y,A,u.capture):m.detachEvent?m.detachEvent(Rr(y),A):m.addListener&&m.removeListener&&m.removeListener(A),(y=vs(m))?(xr(y,u),y.h==0&&(y.src=null,m[wr]=null)):Pn(u)}}}function Rr(u){return u in Ca?Ca[u]:Ca[u]="on"+u}function Sc(u,m){if(u.da)u=!0;else{m=new xt(m,this);var y=u.listener,A=u.ha||u.src;u.fa&&ys(u),u=y.call(A,m)}return u}function vs(u){return u=u[wr],u instanceof Dn?u:null}var Da="__closure_events_fn_"+(1e9*Math.random()>>>0);function uo(u){return typeof u=="function"?u:(u[Da]||(u[Da]=function(m){return u.handleEvent(m)}),u[Da])}function ae(){st.call(this),this.i=new Dn(this),this.M=this,this.F=null}Q(ae,st),ae.prototype[de]=!0,ae.prototype.removeEventListener=function(u,m,y,A){Na(this,u,m,y,A)};function Ht(u,m){var y,A=u.F;if(A)for(y=[];A;A=A.F)y.push(A);if(u=u.M,A=m.type||m,typeof m=="string")m=new nt(m,u);else if(m instanceof nt)m.target=m.target||u;else{var L=m;m=new nt(A,u),M(m,L)}if(L=!0,y)for(var H=y.length-1;0<=H;H--){var it=m.g=y[H];L=sn(it,A,!0,m)&&L}if(it=m.g=u,L=sn(it,A,!0,m)&&L,L=sn(it,A,!1,m)&&L,y)for(H=0;H<y.length;H++)it=m.g=y[H],L=sn(it,A,!1,m)&&L}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],A=0;A<y.length;A++)Pn(y[A]);delete u.g[m],u.h--}}this.F=null},ae.prototype.K=function(u,m,y,A){return this.i.add(String(u),m,!1,y,A)},ae.prototype.L=function(u,m,y,A){return this.i.add(String(u),m,!0,y,A)};function sn(u,m,y,A){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,H=0;H<m.length;++H){var it=m[H];if(it&&!it.da&&it.capture==y){var Ot=it.listener,Ee=it.ha||it.src;it.fa&&xr(u.i,it),L=Ot.call(Ee,A)!==!1&&L}}return L&&!A.defaultPrevented}function Be(u,m,y){if(typeof u=="function")y&&(u=R(u,y));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function co(u){u.g=Be(()=>{u.g=null,u.i&&(u.i=!1,co(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class wc extends st{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:co(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(u){st.call(this),this.h=u,this.g={}}Q(Cr,st);var Nr=[];function Dr(u){Et(u.g,function(m,y){this.g.hasOwnProperty(y)&&ys(m)},u),u.g={}}Cr.prototype.N=function(){Cr.aa.N.call(this),Dr(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=g.JSON.stringify,_s=g.JSON.parse,Ir=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function Ia(){}Ia.prototype.h=null;function Va(u){return u.h||(u.h=u.i())}function Oa(){}var ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function li(){nt.call(this,"d")}Q(li,nt);function Ma(){nt.call(this,"c")}Q(Ma,nt);var zn={},ja=null;function Ui(){return ja=ja||new ae}zn.La="serverreachability";function bs(u){nt.call(this,zn.La,u)}Q(bs,nt);function ki(u){const m=Ui();Ht(m,new bs(m))}zn.STAT_EVENT="statevent";function ho(u,m){nt.call(this,zn.STAT_EVENT,u),this.stat=m}Q(ho,nt);function ne(u){const m=Ui();Ht(m,new ho(m,u))}zn.Ma="timingevent";function be(u,m){nt.call(this,zn.Ma,u),this.size=m}Q(be,nt);function me(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function yn(){this.g=!0}yn.prototype.xa=function(){this.g=!1};function Ua(u,m,y,A,L,H){u.info(function(){if(u.g)if(H)for(var it="",Ot=H.split("&"),Ee=0;Ee<Ot.length;Ee++){var Mt=Ot[Ee].split("=");if(1<Mt.length){var Ce=Mt[0];Mt=Mt[1];var Te=Ce.split("_");it=2<=Te.length&&Te[1]=="type"?it+(Ce+"="+Mt+"&"):it+(Ce+"=redacted&")}}else it=null;else it=H;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+m+`
`+y+`
`+it})}function Rc(u,m,y,A,L,H,it){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+m+`
`+y+`
`+H+" "+it})}function Li(u,m,y,A){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Vr(u,y)+(A?" "+A:"")})}function fo(u,m){u.info(function(){return"TIMEOUT: "+m})}yn.prototype.info=function(){};function Vr(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var A=y[u];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var H=L[0];if(H!="noop"&&H!="stop"&&H!="close")for(var it=1;it<L.length;it++)L[it]=""}}}}return In(y)}catch{return m}}var Pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bn;function qn(){}Q(qn,Ia),qn.prototype.g=function(){return new XMLHttpRequest},qn.prototype.i=function(){return{}},Bn=new qn;function Ye(u,m,y,A){this.j=u,this.i=m,this.l=y,this.R=A||1,this.U=new Cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ue}function ue(){this.i=null,this.g="",this.h=!1}var ka={},Es={};function Vn(u,m,y){u.L=1,u.v=kr(an(m)),u.m=y,u.P=!0,ui(u,null)}function ui(u,m){u.F=Date.now(),Or(u),u.A=an(u.v);var y=u.A,A=u.R;Array.isArray(A)||(A=[String(A)]),Ha(y.i,"t",A),u.C=0,y=u.j.J,u.h=new ue,u.g=No(u.j,y?m:null,!u.m),0<u.O&&(u.M=new wc(R(u.Y,u,u.g),u.O)),m=u.U,y=u.g,A=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Nr[0]=L.toString()),L=Nr);for(var H=0;H<L.length;H++){var it=oo(y,L[H],A||m.handleEvent,!1,m.h||m);if(!it)break;m.g[it.key]=it}m=u.H?x(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),ki(),Ua(u.i,u.u,u.A,u.l,u.R,u.m)}Ye.prototype.ca=function(u){u=u.target;const m=this.M;m&&En(u)==3?m.j():this.Y(u)},Ye.prototype.Y=function(u){try{if(u==this.g)t:{const Te=En(this.g);var m=this.g.Ba();const yi=this.g.Z();if(!(3>Te)&&(Te!=3||this.g&&(this.h.h||this.g.oa()||Eo(this.g)))){this.J||Te!=4||m==7||(m==8||0>=yi?ki(3):ki(2)),zi(this);var y=this.g.Z();this.X=y;e:if(mo(this)){var A=Eo(this.g);u="";var L=A.length,H=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oe(this),Hn(this);var it="";break e}this.h.i=new g.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(A[m],{stream:!(H&&m==L-1)});A.length=0,this.h.g+=u,this.C=0,it=this.h.g}else it=this.g.oa();if(this.o=y==200,Rc(this.i,this.u,this.A,this.l,this.R,Te,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Ot,Ee=this.g;if((Ot=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ct(Ot)){var Mt=Ot;break e}}Mt=null}if(y=Mt)Li(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mr(this,y);else{this.o=!1,this.s=3,ne(12),Oe(this),Hn(this);break t}}if(this.P){y=!0;let Me;for(;!this.J&&this.C<it.length;)if(Me=go(this,it),Me==Es){Te==4&&(this.s=4,ne(14),y=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(Me==ka){this.s=4,ne(15),Li(this.i,this.l,it,"[Invalid Chunk]"),y=!1;break}else Li(this.i,this.l,Me,null),Mr(this,Me);if(mo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||it.length!=0||this.h.h||(this.s=1,ne(16),y=!1),this.o=this.o&&y,!y)Li(this.i,this.l,it,"[Invalid Chunked Response]"),Oe(this),Hn(this);else if(0<it.length&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.ba&&!Ce.M&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+it.length),Qr(Ce),Ce.M=!0,ne(11))}}else Li(this.i,this.l,it,null),Mr(this,it);Te==4&&Oe(this),this.o&&!this.J&&(Te==4?wo(this.j,this):(this.o=!1,Or(this)))}else Vc(this.g),y==400&&0<it.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Oe(this),Hn(this)}}}catch{}finally{}};function mo(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function go(u,m){var y=u.C,A=m.indexOf(`
`,y);return A==-1?Es:(y=Number(m.substring(y,A)),isNaN(y)?ka:(A+=1,A+y>m.length?Es:(m=m.slice(A,A+y),u.C=A+y,m)))}Ye.prototype.cancel=function(){this.J=!0,Oe(this)};function Or(u){u.S=Date.now()+u.I,po(u,u.I)}function po(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=me(R(u.ba,u),m)}function zi(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Ye.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(fo(this.i,this.A),this.L!=2&&(ki(),ne(17)),Oe(this),this.s=2,Hn(this)):po(this,this.S-u)};function Hn(u){u.j.G==0||u.J||wo(u.j,u)}function Oe(u){zi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Dr(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Mr(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||La(y.h,u))){if(!u.K&&La(y.h,u)&&y.G==3){try{var A=y.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Os(y),Is(y);else break t;Ka(y),ne(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=me(R(y.Za,y),6e3));if(1>=As(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else pi(y,11)}else if((u.K||y.g==u)&&Os(y),!ct(m))for(L=y.Da.g.parse(m),m=0;m<L.length;m++){let Mt=L[m];if(y.T=Mt[0],Mt=Mt[1],y.G==2)if(Mt[0]=="c"){y.K=Mt[1],y.ia=Mt[2];const Ce=Mt[3];Ce!=null&&(y.la=Ce,y.j.info("VER="+y.la));const Te=Mt[4];Te!=null&&(y.Aa=Te,y.j.info("SVER="+y.Aa));const yi=Mt[5];yi!=null&&typeof yi=="number"&&0<yi&&(A=1.5*yi,y.L=A,y.j.info("backChannelRequestTimeoutMs_="+A)),A=y;const Me=u.g;if(Me){const $n=Me.g?Me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($n){var H=A.h;H.g||$n.indexOf("spdy")==-1&&$n.indexOf("quic")==-1&&$n.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(xs(H,H.h),H.h=null))}if(A.D){const $a=Me.g?Me.g.getResponseHeader("X-HTTP-Session-Id"):null;$a&&(A.ya=$a,Yt(A.I,A.D,$a))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),A=y;var it=u;if(A.qa=Co(A,A.J?A.ia:null,A.W),it.K){Ke(A.h,it);var Ot=it,Ee=A.L;Ee&&(Ot.I=Ee),Ot.B&&(zi(Ot),Or(Ot)),A.g=it}else xo(A);0<y.i.length&&Vs(y)}else Mt[0]!="stop"&&Mt[0]!="close"||pi(y,7);else y.G==3&&(Mt[0]=="stop"||Mt[0]=="close"?Mt[0]=="stop"?pi(y,7):Fa(y):Mt[0]!="noop"&&y.l&&y.l.ta(Mt),y.v=0)}}ki(4)}catch{}}var yo=class{constructor(u,m){this.g=u,this.map=m}};function ci(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ts(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function As(u){return u.h?1:u.g?u.g.size:0}function La(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function xs(u,m){u.g?u.g.add(m):u.h=m}function Ke(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ci.prototype.cancel=function(){if(this.i=Pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Pa(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return et(u.i)}function Cc(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(v(u)){for(var m=[],y=u.length,A=0;A<y;A++)m.push(u[A]);return m}m=[],y=0;for(A in u)m[y++]=u[A];return m}function Ss(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(v(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const A in u)m[y++]=A;return m}}}function za(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(v(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=Ss(u),A=Cc(u),L=A.length,H=0;H<L;H++)m.call(void 0,A[H],y&&y[H],u)}var jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Nc(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var A=u[y].indexOf("="),L=null;if(0<=A){var H=u[y].substring(0,A);L=u[y].substring(A+1)}else H=u[y];m(H,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ge(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ge){this.h=u.h,Ur(this,u.j),this.o=u.o,this.g=u.g,Bi(this,u.s),this.l=u.l;var m=u.i,y=new fi;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),hi(this,y),this.m=u.m}else u&&(m=String(u).match(jr))?(this.h=!1,Ur(this,m[1]||"",!0),this.o=vn(m[2]||""),this.g=vn(m[3]||"",!0),Bi(this,m[4]),this.l=vn(m[5]||"",!0),hi(this,m[6]||"",!0),this.m=vn(m[7]||"")):(this.h=!1,this.i=new fi(null,this.h))}ge.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Lr(m,Ba,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Lr(m,Ba,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Lr(y,y.charAt(0)=="/"?Dc:qa,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Lr(y,ws)),u.join("")};function an(u){return new ge(u)}function Ur(u,m,y){u.j=y?vn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Bi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function hi(u,m,y){m instanceof fi?(u.i=m,_o(u.i,u.h)):(y||(m=Lr(m,Ic)),u.i=new fi(m,u.h))}function Yt(u,m,y){u.i.set(m,y)}function kr(u){return Yt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function vn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Lr(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,vo),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function vo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ba=/[#\/\?@]/g,qa=/[#\?:]/g,Dc=/[#\?]/g,Ic=/[#\?@]/g,ws=/#/g;function fi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function _n(u){u.g||(u.g=new Map,u.h=0,u.i&&Nc(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}s=fi.prototype,s.add=function(u,m){_n(this),this.i=null,u=Gn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function di(u,m){_n(u),m=Gn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function mi(u,m){return _n(u),m=Gn(u,m),u.g.has(m)}s.forEach=function(u,m){_n(this),this.g.forEach(function(y,A){y.forEach(function(L){u.call(m,L,A,this)},this)},this)},s.na=function(){_n(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let A=0;A<m.length;A++){const L=u[A];for(let H=0;H<L.length;H++)y.push(m[A])}return y},s.V=function(u){_n(this);let m=[];if(typeof u=="string")mi(this,u)&&(m=m.concat(this.g.get(Gn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},s.set=function(u,m){return _n(this),this.i=null,u=Gn(this,u),mi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ha(u,m,y){di(u,m),0<y.length&&(u.i=null,u.g.set(Gn(u,m),et(y)),u.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var A=m[y];const H=encodeURIComponent(String(A)),it=this.V(A);for(A=0;A<it.length;A++){var L=H;it[A]!==""&&(L+="="+encodeURIComponent(String(it[A]))),u.push(L)}}return this.i=u.join("&")};function Gn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function _o(u,m){m&&!u.j&&(_n(u),u.i=null,u.g.forEach(function(y,A){var L=A.toLowerCase();A!=L&&(di(this,A),Ha(this,L,y))},u)),u.j=m}function Pr(u,m){const y=new yn;if(g.Image){const A=new Image;A.onload=k(bn,y,"TestLoadImage: loaded",!0,m,A),A.onerror=k(bn,y,"TestLoadImage: error",!1,m,A),A.onabort=k(bn,y,"TestLoadImage: abort",!1,m,A),A.ontimeout=k(bn,y,"TestLoadImage: timeout",!1,m,A),g.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else m(!1)}function On(u,m){const y=new yn,A=new AbortController,L=setTimeout(()=>{A.abort(),bn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:A.signal}).then(H=>{clearTimeout(L),H.ok?bn(y,"TestPingServer: ok",!0,m):bn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),bn(y,"TestPingServer: error",!1,m)})}function bn(u,m,y,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(y)}catch{}}function zr(){this.g=new Ir}function Qn(u,m,y){const A=y||"";try{za(u,function(L,H){let it=L;p(L)&&(it=In(L)),m.push(A+H+"="+encodeURIComponent(it))})}catch(L){throw m.push(A+"type="+encodeURIComponent("_badmap")),L}}function qi(u){this.l=u.Ub||null,this.j=u.eb||!1}Q(qi,Ia),qi.prototype.g=function(){return new gi(this.l,this.j)},qi.prototype.i=function(u){return function(){return u}}({});function gi(u,m){ae.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(gi,ae),s=gi.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Yn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ga(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ga(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Fn(this):Yn(this),this.readyState==3&&Ga(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Fn(this))},s.Qa=function(u){this.g&&(this.response=u,Fn(this))},s.ga=function(){this.g&&Fn(this)};function Fn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Yn(u)}s.setRequestHeader=function(u,m){this.u.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Yn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Qa(u){let m="";return Et(u,function(y,A){m+=A,m+=":",m+=y,m+=`\r
`}),m}function Re(u,m,y){t:{for(A in y){var A=!1;break t}A=!0}A||(y=Qa(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Yt(u,m,y))}function Bt(u){ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(Bt,ae);var Rs=/^https?$/i,Br=["POST","PUT"];s=Bt.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,m,y,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bn.g(),this.v=this.o?Va(this.o):Va(Bn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){bo(this,H);return}if(u=y||"",y=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)y.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())y.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(y.keys()).find(H=>H.toLowerCase()=="content-type"),L=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Br,m,void 0))||A||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,it]of y)this.g.setRequestHeader(H,it);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qr(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){bo(this,H)}};function bo(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Cs(u),Kn(u)}function Cs(u){u.A||(u.A=!0,Ht(u,"complete"),Ht(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Ht(this,"complete"),Ht(this,"abort"),Kn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kn(this,!0)),Bt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ns(this):this.bb())},s.bb=function(){Ns(this)};function Ns(u){if(u.h&&typeof d<"u"&&(!u.v[1]||En(u)!=4||u.Z()!=2)){if(u.u&&En(u)==4)Be(u.Ea,0,u);else if(Ht(u,"readystatechange"),En(u)==4){u.h=!1;try{const it=u.Z();t:switch(it){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var y;if(!(y=m)){var A;if(A=it===0){var L=String(u.D).match(jr)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),A=!Rs.test(L?L.toLowerCase():"")}y=A}if(y)Ht(u,"complete"),Ht(u,"success");else{u.m=6;try{var H=2<En(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",Cs(u)}}finally{Kn(u)}}}}function Kn(u,m){if(u.g){qr(u);const y=u.g,A=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Ht(u,"ready");try{y.onreadystatechange=A}catch{}}}function qr(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function En(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),_s(m)}};function Eo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Vc(u){const m={};u=(u.g&&2<=En(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(ct(u[A]))continue;var y=D(u[A]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const H=m[L]||[];m[L]=H,H.push(y)}V(m,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Ds(u){this.Aa=0,this.i=[],this.j=new yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hr("baseRetryDelayMs",5e3,u),this.cb=Hr("retryDelaySeedMs",1e4,u),this.Wa=Hr("forwardChannelMaxRetries",2,u),this.wa=Hr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ci(u&&u.concurrentRequestLimit),this.Da=new zr,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Ds.prototype,s.la=8,s.G=1,s.connect=function(u,m,y,A){ne(0),this.W=u,this.H=m||{},y&&A!==void 0&&(this.H.OSID=y,this.H.OAID=A),this.F=this.X,this.I=Co(this,null,this.W),Vs(this)};function Fa(u){if(To(u),u.G==3){var m=u.U++,y=an(u.I);if(Yt(y,"SID",u.K),Yt(y,"RID",m),Yt(y,"TYPE","terminate"),Gr(u,y),m=new Ye(u,u.j,m),m.L=2,m.v=kr(an(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=m.v,y=!0),y||(m.g=No(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Or(m)}Ro(u)}function Is(u){u.g&&(Qr(u),u.g.cancel(),u.g=null)}function To(u){Is(u),u.u&&(g.clearTimeout(u.u),u.u=null),Os(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function Vs(u){if(!Ts(u.h)&&!u.s){u.s=!0;var m=u.Ga;rt||O(),ut||(rt(),ut=!0),Nt.add(m,u),u.B=0}}function Oc(u,m){return As(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=me(R(u.Ga,u,m),Xa(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Ye(this,this.j,u);let H=this.o;if(this.S&&(H?(H=x(H),M(H,this.S)):H=this.S),this.m!==null||this.O||(L.H=H,H=null),this.P)t:{for(var m=0,y=0;y<this.i.length;y++){e:{var A=this.i[y];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break e}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=y;break t}if(m===4096||y===this.i.length-1){m=y+1;break t}}m=1e3}else m=1e3;m=Ao(this,L,m),y=an(this.I),Yt(y,"RID",u),Yt(y,"CVER",22),this.D&&Yt(y,"X-HTTP-Session-Id",this.D),Gr(this,y),H&&(this.O?m="headers="+encodeURIComponent(String(Qa(H)))+"&"+m:this.m&&Re(y,this.m,H)),xs(this.h,L),this.Ua&&Yt(y,"TYPE","init"),this.P?(Yt(y,"$req",m),Yt(y,"SID","null"),L.T=!0,Vn(L,y,null)):Vn(L,y,m),this.G=2}}else this.G==3&&(u?Ya(this,u):this.i.length==0||Ts(this.h)||Ya(this))};function Ya(u,m){var y;m?y=m.l:y=u.U++;const A=an(u.I);Yt(A,"SID",u.K),Yt(A,"RID",y),Yt(A,"AID",u.T),Gr(u,A),u.m&&u.o&&Re(A,u.m,u.o),y=new Ye(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Ao(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),xs(u.h,y),Vn(y,A,m)}function Gr(u,m){u.H&&Et(u.H,function(y,A){Yt(m,A,y)}),u.l&&za({},function(y,A){Yt(m,A,y)})}function Ao(u,m,y){y=Math.min(u.i.length,y);var A=u.l?R(u.l.Na,u.l,u):null;t:{var L=u.i;let H=-1;for(;;){const it=["count="+y];H==-1?0<y?(H=L[0].g,it.push("ofs="+H)):H=0:it.push("ofs="+H);let Ot=!0;for(let Ee=0;Ee<y;Ee++){let Mt=L[Ee].g;const Ce=L[Ee].map;if(Mt-=H,0>Mt)H=Math.max(0,L[Ee].g-100),Ot=!1;else try{Qn(Ce,it,"req"+Mt+"_")}catch{A&&A(Ce)}}if(Ot){A=it.join("&");break t}}}return u=u.i.splice(0,y),m.D=u,A}function xo(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;rt||O(),ut||(rt(),ut=!0),Nt.add(m,u),u.v=0}}function Ka(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=me(R(u.Fa,u),Xa(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,So(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=me(R(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),Is(this),So(this))};function Qr(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function So(u){u.g=new Ye(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=an(u.qa);Yt(m,"RID","rpc"),Yt(m,"SID",u.K),Yt(m,"AID",u.T),Yt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Yt(m,"TO",u.ja),Yt(m,"TYPE","xmlhttp"),Gr(u,m),u.m&&u.o&&Re(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=kr(an(m)),y.m=null,y.P=!0,ui(y,u)}s.Za=function(){this.C!=null&&(this.C=null,Is(this),Ka(this),ne(19))};function Os(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function wo(u,m){var y=null;if(u.g==m){Os(u),Qr(u),u.g=null;var A=2}else if(La(u.h,m))y=m.D,Ke(u.h,m),A=1;else return;if(u.G!=0){if(m.o)if(A==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;A=Ui(),Ht(A,new be(A,y)),Vs(u)}else xo(u);else if(L=m.s,L==3||L==0&&0<m.X||!(A==1&&Oc(u,m)||A==2&&Ka(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),L){case 1:pi(u,5);break;case 4:pi(u,10);break;case 3:pi(u,6);break;default:pi(u,2)}}}function Xa(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function pi(u,m){if(u.j.info("Error code "+m),m==2){var y=R(u.fb,u),A=u.Xa;const L=!A;A=new ge(A||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Ur(A,"https"),kr(A),L?Pr(A.toString(),y):On(A.toString(),y)}else ne(2);u.G=0,u.l&&u.l.sa(m),Ro(u),To(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function Ro(u){if(u.G=0,u.ka=[],u.l){const m=Pa(u.h);(m.length!=0||u.i.length!=0)&&(K(u.ka,m),K(u.ka,u.i),u.h.i.length=0,et(u.i),u.i.length=0),u.l.ra()}}function Co(u,m,y){var A=y instanceof ge?an(y):new ge(y);if(A.g!="")m&&(A.g=m+"."+A.g),Bi(A,A.s);else{var L=g.location;A=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var H=new ge(null);A&&Ur(H,A),m&&(H.g=m),L&&Bi(H,L),y&&(H.l=y),A=H}return y=u.D,m=u.ya,y&&m&&Yt(A,y,m),Yt(A,"VER",u.la),Gr(u,A),A}function No(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Bt(new qi({eb:y})):new Bt(u.pa),m.Ha(u.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Do(){}s=Do.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ms(){}Ms.prototype.g=function(u,m){return new Xe(u,m)};function Xe(u,m){ae.call(this),this.g=new Ds(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!ct(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ct(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Xn(this)}Q(Xe,ae),Xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xe.prototype.close=function(){Fa(this.g)},Xe.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=In(u),u=y);m.i.push(new yo(m.Ya++,u)),m.G==3&&Vs(m)},Xe.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,Xe.aa.N.call(this)};function Io(u){li.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const y in m){u=y;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Q(Io,li);function Vo(){Ma.call(this),this.status=1}Q(Vo,Ma);function Xn(u){this.g=u}Q(Xn,Do),Xn.prototype.ua=function(){Ht(this.g,"a")},Xn.prototype.ta=function(u){Ht(this.g,new Io(u))},Xn.prototype.sa=function(u){Ht(this.g,new Vo)},Xn.prototype.ra=function(){Ht(this.g,"b")},Ms.prototype.createWebChannel=Ms.prototype.g,Xe.prototype.send=Xe.prototype.o,Xe.prototype.open=Xe.prototype.m,Xe.prototype.close=Xe.prototype.close,K0=function(){return new Ms},Y0=function(){return Ui()},F0=zn,Qf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,Lu=Pi,oi.COMPLETE="complete",Q0=oi,Oa.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",ae.prototype.listen=ae.prototype.K,Ll=Oa,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,G0=Bt}).apply(typeof Ou<"u"?Ou:typeof self<"u"?self:typeof window<"u"?window:{});const Iy="@firebase/firestore",Vy="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new k0("@firebase/firestore");function ua(){return cs.logLevel}function at(s,...e){if(cs.logLevel<=Lt.DEBUG){const i=e.map(pd);cs.debug(`Firestore (${Aa}): ${s}`,...i)}}function Mi(s,...e){if(cs.logLevel<=Lt.ERROR){const i=e.map(pd);cs.error(`Firestore (${Aa}): ${s}`,...i)}}function ga(s,...e){if(cs.logLevel<=Lt.WARN){const i=e.map(pd);cs.warn(`Firestore (${Aa}): ${s}`,...i)}}function pd(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(s,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,X0(s,a,i)}function X0(s,e,i){let a=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw Mi(a),new Error(a)}function qt(s,e,i,a){let o="Unexpected state";typeof i=="string"?o=i:a=i,s||X0(e,o,a)}function At(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends Ta{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(Qe.UNAUTHENTICATED))}shutdown(){}}class XT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class $T{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){qt(this.o===void 0,42304);let a=this.i;const o=v=>this.i!==a?(a=this.i,i(v)):Promise.resolve();let h=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ii,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const v=h;e.enqueueRetryable(async()=>{await v.promise,await o(this.currentUser)})},g=v=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(v=>g(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?g(v):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ii)}},0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(qt(typeof a.accessToken=="string",31837,{l:a}),new $0(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qt(e===null||typeof e=="string",2055,{h:e}),new Qe(e)}}class ZT{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JT{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new ZT(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable(()=>i(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WT{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,OT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){qt(this.o===void 0,3512);const a=h=>{h.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,at("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>a(h))};const o=h=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(h=>o(h)),setTimeout(()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?o(h):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(qt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Oy(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=t1(40);for(let h=0;h<o.length;++h)a.length<20&&o[h]<i&&(a+=e.charAt(o[h]%62))}return a}}function Rt(s,e){return s<e?-1:s>e?1:0}function Ff(s,e){let i=0;for(;i<s.length&&i<e.length;){const a=s.codePointAt(i),o=e.codePointAt(i);if(a!==o){if(a<128&&o<128)return Rt(a,o);{const h=Z0(),d=e1(h.encode(My(s,i)),h.encode(My(e,i)));return d!==0?d:Rt(a,o)}}i+=a>65535?2:1}return Rt(s.length,e.length)}function My(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function e1(s,e){for(let i=0;i<s.length&&i<e.length;++i)if(s[i]!==e[i])return Rt(s[i],e[i]);return Rt(s.length,e.length)}function pa(s,e,i){return s.length===e.length&&s.every((a,o)=>i(a,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=-62135596800,Uy=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*Uy);return new Se(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new lt(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new lt(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<jy)throw new lt(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uy}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-jy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{static fromTimestamp(e){return new Tt(e)}static min(){return new Tt(new Se(0,0))}static max(){return new Tt(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky="__name__";class ni{constructor(e,i,a){i===void 0?i=0:i>e.length&&yt(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&yt(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return ni.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach(a=>{i.push(a)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const h=ni.compareSegments(e.get(o),i.get(o));if(h!==0)return h}return Rt(e.length,i.length)}static compareSegments(e,i){const a=ni.isNumericId(e),o=ni.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?ni.extractNumericId(e).compare(ni.extractNumericId(i)):Ff(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dr.fromString(e.substring(4,e.length-2))}}class ee extends ni{construct(e,i,a){return new ee(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new lt(J.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(o=>o.length>0))}return new ee(i)}static emptyPath(){return new ee([])}}const n1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pe extends ni{construct(e,i,a){return new Pe(e,i,a)}static isValidIdentifier(e){return n1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ky}static keyField(){return new Pe([ky])}static fromServerFormat(e){const i=[];let a="",o=0;const h=()=>{if(a.length===0)throw new lt(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new lt(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if(v!=="\\"&&v!=="."&&v!=="`")throw new lt(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=v,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(a+=g,o++):(h(),o++)}if(h(),d)throw new lt(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pe(i)}static emptyPath(){return new Pe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.path=e}static fromPath(e){return new mt(ee.fromString(e))}static fromName(e){return new mt(ee.fromString(e).popFirst(5))}static empty(){return new mt(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return ee.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mt(new ee(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=-1;function i1(s,e){const i=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=Tt.fromTimestamp(a===1e9?new Se(i+1,0):new Se(i,a));return new gr(o,mt.empty(),e)}function r1(s){return new gr(s.readTime,s.key,Xl)}class gr{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new gr(Tt.min(),mt.empty(),Xl)}static max(){return new gr(Tt.max(),mt.empty(),Xl)}}function s1(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=mt.comparator(s.documentKey,e.documentKey),i!==0?i:Rt(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(s){if(s.code!==J.FAILED_PRECONDITION||s.message!==a1)throw s;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&yt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new tt((a,o)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(a,o)},this.catchCallback=h=>{this.wrapFailure(i,h).next(a,o)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof tt?i:tt.resolve(i)}catch(i){return tt.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):tt.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):tt.reject(i)}static resolve(e){return new tt((i,a)=>{i(e)})}static reject(e){return new tt((i,a)=>{a(e)})}static waitFor(e){return new tt((i,a)=>{let o=0,h=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++h,d&&h===o&&i()},v=>a(v))}),d=!0,h===o&&i()})}static or(e){let i=tt.resolve(!1);for(const a of e)i=i.next(o=>o?tt.resolve(o):a());return i}static forEach(e,i){const a=[];return e.forEach((o,h)=>{a.push(i.call(this,o,h))}),this.waitFor(a)}static mapArray(e,i){return new tt((a,o)=>{const h=e.length,d=new Array(h);let g=0;for(let v=0;v<h;v++){const p=v;i(e[p]).next(E=>{d[p]=E,++g,g===h&&a(d)},E=>o(E))}})}static doWhile(e,i){return new tt((a,o)=>{const h=()=>{e()===!0?i().next(()=>{h()},o):a()};h()})}}function o1(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function Sa(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ue(a),this.ce=a=>i.writeSequenceNumber(a))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}rc.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=-1;function sc(s){return s==null}function Ku(s){return s===0&&1/s==-1/0}function u1(s){return typeof s=="number"&&Number.isInteger(s)&&!Ku(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="";function c1(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=Ly(e)),e=h1(s.get(i),e);return Ly(e)}function h1(s,e){let i=e;const a=s.length;for(let o=0;o<a;o++){const h=s.charAt(o);switch(h){case"\0":i+="";break;case W0:i+="";break;default:i+=h}}return i}function Ly(s){return s+W0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function Tr(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function tv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e,i){this.comparator=e,this.root=i||Le.EMPTY}insert(e,i){return new se(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Le.BLACK,null,null))}remove(e){return new se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Le.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,a)=>(e(i,a),!1))}toString(){const e=[];return this.inorderTraversal((i,a)=>(e.push(`${i}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?a(e.key,i):1,i&&o&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Le{constructor(e,i,a,o,h){this.key=e,this.value=i,this.color=a??Le.RED,this.left=o??Le.EMPTY,this.right=h??Le.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,h){return new Le(e??this.key,i??this.value,a??this.color,o??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const h=a(e,o.key);return o=h<0?o.copy(null,null,null,o.left.insert(e,i,a),null):h===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Le.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return Le.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Le.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw yt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw yt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw yt(27949);return e+(this.isRed()?0:1)}}Le.EMPTY=null,Le.RED=!0,Le.BLACK=!1;Le.EMPTY=new class{constructor(){this.size=0}get key(){throw yt(57766)}get value(){throw yt(16141)}get color(){throw yt(16727)}get left(){throw yt(29726)}get right(){throw yt(36894)}copy(e,i,a,o,h){return this}insert(e,i,a){return new Le(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.comparator=e,this.data=new se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,a)=>(e(i),!1))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(a=>{i=i.add(a)}),i}isEqual(e){if(!(e instanceof we)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(this.comparator(o,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new we(this.comparator);return i.data=e,i}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Pe.comparator)}static empty(){return new mn([])}unionWith(e){let i=new we(Pe.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new mn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,(i,a)=>i.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(o){try{return atob(o)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new ev("Invalid base64 string: "+h):h}}(e);return new ze(i)}static fromUint8Array(e){const i=function(o){let h="";for(let d=0;d<o.length;++d)h+=String.fromCharCode(o[d]);return h}(e);return new ze(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ze.EMPTY_BYTE_STRING=new ze("");const f1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(s){if(qt(!!s,39018),typeof s=="string"){let e=0;const i=f1.exec(s);if(qt(!!i,46558,{timestamp:s}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:fe(s.seconds),nanos:fe(s.nanos)}}function fe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yr(s){return typeof s=="string"?ze.fromBase64String(s):ze.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv="server_timestamp",iv="__type__",rv="__previous_value__",sv="__local_write_time__";function vd(s){var e,i;return((i=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[iv])===null||i===void 0?void 0:i.stringValue)===nv}function ac(s){const e=s.mapValue.fields[rv];return vd(e)?ac(e):e}function $l(s){const e=pr(s.mapValue.fields[sv].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,i,a,o,h,d,g,v,p,E){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=v,this.useFetchStreams=p,this.isUsingEmulator=E}}const Xu="(default)";class Zl{constructor(e,i){this.projectId=e,this.database=i||Xu}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===Xu}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="__type__",m1="__max__",ju={mapValue:{}},lv="__vector__",$u="value";function vr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?vd(s)?4:p1(s)?9007199254740991:g1(s)?10:11:yt(28295,{value:s})}function si(s,e){if(s===e)return!0;const i=vr(s);if(i!==vr(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return $l(s).isEqual($l(e));case 3:return function(o,h){if(typeof o.timestampValue=="string"&&typeof h.timestampValue=="string"&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const d=pr(o.timestampValue),g=pr(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,h){return yr(o.bytesValue).isEqual(yr(h.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,h){return fe(o.geoPointValue.latitude)===fe(h.geoPointValue.latitude)&&fe(o.geoPointValue.longitude)===fe(h.geoPointValue.longitude)}(s,e);case 2:return function(o,h){if("integerValue"in o&&"integerValue"in h)return fe(o.integerValue)===fe(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const d=fe(o.doubleValue),g=fe(h.doubleValue);return d===g?Ku(d)===Ku(g):isNaN(d)&&isNaN(g)}return!1}(s,e);case 9:return pa(s.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(o,h){const d=o.mapValue.fields||{},g=h.mapValue.fields||{};if(Py(d)!==Py(g))return!1;for(const v in d)if(d.hasOwnProperty(v)&&(g[v]===void 0||!si(d[v],g[v])))return!1;return!0}(s,e);default:return yt(52216,{left:s})}}function Jl(s,e){return(s.values||[]).find(i=>si(i,e))!==void 0}function ya(s,e){if(s===e)return 0;const i=vr(s),a=vr(e);if(i!==a)return Rt(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Rt(s.booleanValue,e.booleanValue);case 2:return function(h,d){const g=fe(h.integerValue||h.doubleValue),v=fe(d.integerValue||d.doubleValue);return g<v?-1:g>v?1:g===v?0:isNaN(g)?isNaN(v)?0:-1:1}(s,e);case 3:return By(s.timestampValue,e.timestampValue);case 4:return By($l(s),$l(e));case 5:return Ff(s.stringValue,e.stringValue);case 6:return function(h,d){const g=yr(h),v=yr(d);return g.compareTo(v)}(s.bytesValue,e.bytesValue);case 7:return function(h,d){const g=h.split("/"),v=d.split("/");for(let p=0;p<g.length&&p<v.length;p++){const E=Rt(g[p],v[p]);if(E!==0)return E}return Rt(g.length,v.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,d){const g=Rt(fe(h.latitude),fe(d.latitude));return g!==0?g:Rt(fe(h.longitude),fe(d.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return qy(s.arrayValue,e.arrayValue);case 10:return function(h,d){var g,v,p,E;const w=h.fields||{},R=d.fields||{},k=(g=w[$u])===null||g===void 0?void 0:g.arrayValue,Q=(v=R[$u])===null||v===void 0?void 0:v.arrayValue,et=Rt(((p=k==null?void 0:k.values)===null||p===void 0?void 0:p.length)||0,((E=Q==null?void 0:Q.values)===null||E===void 0?void 0:E.length)||0);return et!==0?et:qy(k,Q)}(s.mapValue,e.mapValue);case 11:return function(h,d){if(h===ju.mapValue&&d===ju.mapValue)return 0;if(h===ju.mapValue)return 1;if(d===ju.mapValue)return-1;const g=h.fields||{},v=Object.keys(g),p=d.fields||{},E=Object.keys(p);v.sort(),E.sort();for(let w=0;w<v.length&&w<E.length;++w){const R=Ff(v[w],E[w]);if(R!==0)return R;const k=ya(g[v[w]],p[E[w]]);if(k!==0)return k}return Rt(v.length,E.length)}(s.mapValue,e.mapValue);default:throw yt(23264,{Pe:i})}}function By(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Rt(s,e);const i=pr(s),a=pr(e),o=Rt(i.seconds,a.seconds);return o!==0?o:Rt(i.nanos,a.nanos)}function qy(s,e){const i=s.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const h=ya(i[o],a[o]);if(h)return h}return Rt(i.length,a.length)}function va(s){return Yf(s)}function Yf(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(i){const a=pr(i);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(i){return yr(i).toBase64()}(s.bytesValue):"referenceValue"in s?function(i){return mt.fromName(i).toString()}(s.referenceValue):"geoPointValue"in s?function(i){return`geo(${i.latitude},${i.longitude})`}(s.geoPointValue):"arrayValue"in s?function(i){let a="[",o=!0;for(const h of i.values||[])o?o=!1:a+=",",a+=Yf(h);return a+"]"}(s.arrayValue):"mapValue"in s?function(i){const a=Object.keys(i.fields||{}).sort();let o="{",h=!0;for(const d of a)h?h=!1:o+=",",o+=`${d}:${Yf(i.fields[d])}`;return o+"}"}(s.mapValue):yt(61005,{value:s})}function Pu(s){switch(vr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ac(s);return e?16+Pu(e):16;case 5:return 2*s.stringValue.length;case 6:return yr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((o,h)=>o+Pu(h),0)}(s.arrayValue);case 10:case 11:return function(a){let o=0;return Tr(a.fields,(h,d)=>{o+=h.length+Pu(d)}),o}(s.mapValue);default:throw yt(13486,{value:s})}}function Hy(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Kf(s){return!!s&&"integerValue"in s}function _d(s){return!!s&&"arrayValue"in s}function Gy(s){return!!s&&"nullValue"in s}function Qy(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function zu(s){return!!s&&"mapValue"in s}function g1(s){var e,i;return((i=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[av])===null||i===void 0?void 0:i.stringValue)===lv}function Hl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Tr(s.mapValue.fields,(i,a)=>e.mapValue.fields[i]=Hl(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Hl(s.arrayValue.values[i]);return e}return Object.assign({},s)}function p1(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===m1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!zu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hl(i)}setAll(e){let i=Pe.emptyPath(),a={},o=[];e.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const v=this.getFieldsMap(i);this.applyChanges(v,a,o),a={},o=[],i=g.popLast()}d?a[g.lastSegment()]=Hl(d):o.push(g.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,a,o)}delete(e){const i=this.field(e.popLast());zu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];zu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){Tr(i,(o,h)=>e[o]=h);for(const o of a)delete e[o]}clone(){return new nn(Hl(this.value))}}function ov(s){const e=[];return Tr(s.fields,(i,a)=>{const o=new Pe([i]);if(zu(a)){const h=ov(a.mapValue).fields;if(h.length===0)e.push(o);else for(const d of h)e.push(o.child(d))}else e.push(o)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,i,a,o,h,d,g){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Fe(e,0,Tt.min(),Tt.min(),Tt.min(),nn.empty(),0)}static newFoundDocument(e,i,a,o){return new Fe(e,1,i,Tt.min(),a,o,0)}static newNoDocument(e,i){return new Fe(e,2,i,Tt.min(),Tt.min(),nn.empty(),0)}static newUnknownDocument(e,i){return new Fe(e,3,i,Tt.min(),Tt.min(),nn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(Tt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,i){this.position=e,this.inclusive=i}}function Fy(s,e,i){let a=0;for(let o=0;o<s.position.length;o++){const h=e[o],d=s.position[o];if(h.field.isKeyField()?a=mt.comparator(mt.fromName(d.referenceValue),i.key):a=ya(d,i.data.field(h.field)),h.dir==="desc"&&(a*=-1),a!==0)break}return a}function Yy(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!si(s.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,i="asc"){this.field=e,this.dir=i}}function y1(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{}class _e extends uv{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new _1(e,i,a):i==="array-contains"?new T1(e,a):i==="in"?new A1(e,a):i==="not-in"?new x1(e,a):i==="array-contains-any"?new S1(e,a):new _e(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new b1(e,a):new E1(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(ya(i,this.value)):i!==null&&vr(this.value)===vr(i)&&this.matchesComparison(ya(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return yt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends uv{constructor(e,i){super(),this.filters=e,this.op=i,this.Te=null}static create(e,i){return new kn(e,i)}matches(e){return cv(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function cv(s){return s.op==="and"}function hv(s){return v1(s)&&cv(s)}function v1(s){for(const e of s.filters)if(e instanceof kn)return!1;return!0}function Xf(s){if(s instanceof _e)return s.field.canonicalString()+s.op.toString()+va(s.value);if(hv(s))return s.filters.map(e=>Xf(e)).join(",");{const e=s.filters.map(i=>Xf(i)).join(",");return`${s.op}(${e})`}}function fv(s,e){return s instanceof _e?function(a,o){return o instanceof _e&&a.op===o.op&&a.field.isEqual(o.field)&&si(a.value,o.value)}(s,e):s instanceof kn?function(a,o){return o instanceof kn&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce((h,d,g)=>h&&fv(d,o.filters[g]),!0):!1}(s,e):void yt(19439)}function dv(s){return s instanceof _e?function(i){return`${i.field.canonicalString()} ${i.op} ${va(i.value)}`}(s):s instanceof kn?function(i){return i.op.toString()+" {"+i.getFilters().map(dv).join(" ,")+"}"}(s):"Filter"}class _1 extends _e{constructor(e,i,a){super(e,i,a),this.key=mt.fromName(a.referenceValue)}matches(e){const i=mt.comparator(e.key,this.key);return this.matchesComparison(i)}}class b1 extends _e{constructor(e,i){super(e,"in",i),this.keys=mv("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class E1 extends _e{constructor(e,i){super(e,"not-in",i),this.keys=mv("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function mv(s,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(a=>mt.fromName(a.referenceValue))}class T1 extends _e{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return _d(i)&&Jl(i.arrayValue,this.value)}}class A1 extends _e{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Jl(this.value.arrayValue,i)}}class x1 extends _e{constructor(e,i){super(e,"not-in",i)}matches(e){if(Jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Jl(this.value.arrayValue,i)}}class S1 extends _e{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!_d(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>Jl(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,i=null,a=[],o=[],h=null,d=null,g=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=h,this.startAt=d,this.endAt=g,this.Ie=null}}function Ky(s,e=null,i=[],a=[],o=null,h=null,d=null){return new w1(s,e,i,a,o,h,d)}function bd(s){const e=At(s);if(e.Ie===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(a=>Xf(a)).join(","),i+="|ob:",i+=e.orderBy.map(a=>function(h){return h.field.canonicalString()+h.dir}(a)).join(","),sc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>va(a)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>va(a)).join(",")),e.Ie=i}return e.Ie}function Ed(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!y1(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!fv(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Yy(s.startAt,e.startAt)&&Yy(s.endAt,e.endAt)}function $f(s){return mt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,i=null,a=[],o=[],h=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=v,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function R1(s,e,i,a,o,h,d,g){return new wa(s,e,i,a,o,h,d,g)}function Td(s){return new wa(s)}function Xy(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function gv(s){return s.collectionGroup!==null}function Gl(s){const e=At(s);if(e.Ee===null){e.Ee=[];const i=new Set;for(const h of e.explicitOrderBy)e.Ee.push(h),i.add(h.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new we(Pe.comparator);return d.filters.forEach(v=>{v.getFlattenedFilters().forEach(p=>{p.isInequality()&&(g=g.add(p.field))})}),g})(e).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||e.Ee.push(new Wl(h,a))}),i.has(Pe.keyField().canonicalString())||e.Ee.push(new Wl(Pe.keyField(),a))}return e.Ee}function ii(s){const e=At(s);return e.de||(e.de=C1(e,Gl(s))),e.de}function C1(s,e){if(s.limitType==="F")return Ky(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const h=o.dir==="desc"?"asc":"desc";return new Wl(o.field,h)});const i=s.endAt?new Zu(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Zu(s.startAt.position,s.startAt.inclusive):null;return Ky(s.path,s.collectionGroup,e,s.filters,s.limit,i,a)}}function Zf(s,e){const i=s.filters.concat([e]);return new wa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function Jf(s,e,i){return new wa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function lc(s,e){return Ed(ii(s),ii(e))&&s.limitType===e.limitType}function pv(s){return`${bd(ii(s))}|lt:${s.limitType}`}function ca(s){return`Query(target=${function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map(o=>dv(o)).join(", ")}]`),sc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map(o=>va(o)).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map(o=>va(o)).join(",")),`Target(${a})`}(ii(s))}; limitType=${s.limitType})`}function oc(s,e){return e.isFoundDocument()&&function(a,o){const h=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(h):mt.isDocumentKey(a.path)?a.path.isEqual(h):a.path.isImmediateParentOf(h)}(s,e)&&function(a,o){for(const h of Gl(a))if(!h.field.isKeyField()&&o.data.field(h.field)===null)return!1;return!0}(s,e)&&function(a,o){for(const h of a.filters)if(!h.matches(o))return!1;return!0}(s,e)&&function(a,o){return!(a.startAt&&!function(d,g,v){const p=Fy(d,g,v);return d.inclusive?p<=0:p<0}(a.startAt,Gl(a),o)||a.endAt&&!function(d,g,v){const p=Fy(d,g,v);return d.inclusive?p>=0:p>0}(a.endAt,Gl(a),o))}(s,e)}function N1(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function yv(s){return(e,i)=>{let a=!1;for(const o of Gl(s)){const h=D1(o,e,i);if(h!==0)return h;a=a||o.field.isKeyField()}return 0}}function D1(s,e,i){const a=s.field.isKeyField()?mt.comparator(e.key,i.key):function(h,d,g){const v=d.data.field(h),p=g.data.field(h);return v!==null&&p!==null?ya(v,p):yt(42886)}(s.field,e,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return yt(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,h]of a)if(this.equalsFn(o,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return void(o[h]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Tr(this.inner,(i,a)=>{for(const[o,h]of a)e(o,h)})}isEmpty(){return tv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new se(mt.comparator);function ji(){return I1}const vv=new se(mt.comparator);function Pl(...s){let e=vv;for(const i of s)e=e.insert(i.key,i);return e}function _v(s){let e=vv;return s.forEach((i,a)=>e=e.insert(i,a.overlayedDocument)),e}function os(){return Ql()}function bv(){return Ql()}function Ql(){return new ds(s=>s.toString(),(s,e)=>s.isEqual(e))}const V1=new se(mt.comparator),O1=new we(mt.comparator);function Vt(...s){let e=O1;for(const i of s)e=e.add(i);return e}const M1=new we(Rt);function j1(){return M1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ku(e)?"-0":e}}function Ev(s){return{integerValue:""+s}}function U1(s,e){return u1(e)?Ev(e):Ad(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this._=void 0}}function k1(s,e,i){return s instanceof to?function(o,h){const d={fields:{[iv]:{stringValue:nv},[sv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&vd(h)&&(h=ac(h)),h&&(d.fields[rv]=h),{mapValue:d}}(i,e):s instanceof eo?Av(s,e):s instanceof no?xv(s,e):function(o,h){const d=Tv(o,h),g=$y(d)+$y(o.Re);return Kf(d)&&Kf(o.Re)?Ev(g):Ad(o.serializer,g)}(s,e)}function L1(s,e,i){return s instanceof eo?Av(s,e):s instanceof no?xv(s,e):i}function Tv(s,e){return s instanceof Ju?function(a){return Kf(a)||function(h){return!!h&&"doubleValue"in h}(a)}(e)?e:{integerValue:0}:null}class to extends uc{}class eo extends uc{constructor(e){super(),this.elements=e}}function Av(s,e){const i=Sv(e);for(const a of s.elements)i.some(o=>si(o,a))||i.push(a);return{arrayValue:{values:i}}}class no extends uc{constructor(e){super(),this.elements=e}}function xv(s,e){let i=Sv(e);for(const a of s.elements)i=i.filter(o=>!si(o,a));return{arrayValue:{values:i}}}class Ju extends uc{constructor(e,i){super(),this.serializer=e,this.Re=i}}function $y(s){return fe(s.integerValue||s.doubleValue)}function Sv(s){return _d(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,i){this.field=e,this.transform=i}}function z1(s,e){return s.field.isEqual(e.field)&&function(a,o){return a instanceof eo&&o instanceof eo||a instanceof no&&o instanceof no?pa(a.elements,o.elements,si):a instanceof Ju&&o instanceof Ju?si(a.Re,o.Re):a instanceof to&&o instanceof to}(s.transform,e.transform)}class B1{constructor(e,i){this.version=e,this.transformResults=i}}class Nn{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class cc{}function wv(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new xd(s.key,Nn.none()):new io(s.key,s.data,Nn.none());{const i=s.data,a=nn.empty();let o=new we(Pe.comparator);for(let h of e.fields)if(!o.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?a.delete(h):a.set(h,d),o=o.add(h)}return new Ar(s.key,a,new mn(o.toArray()),Nn.none())}}function q1(s,e,i){s instanceof io?function(o,h,d){const g=o.value.clone(),v=Jy(o.fieldTransforms,h,d.transformResults);g.setAll(v),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(s,e,i):s instanceof Ar?function(o,h,d){if(!Bu(o.precondition,h))return void h.convertToUnknownDocument(d.version);const g=Jy(o.fieldTransforms,h,d.transformResults),v=h.data;v.setAll(Rv(o)),v.setAll(g),h.convertToFoundDocument(d.version,v).setHasCommittedMutations()}(s,e,i):function(o,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,i)}function Fl(s,e,i,a){return s instanceof io?function(h,d,g,v){if(!Bu(h.precondition,d))return g;const p=h.value.clone(),E=Wy(h.fieldTransforms,v,d);return p.setAll(E),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null}(s,e,i,a):s instanceof Ar?function(h,d,g,v){if(!Bu(h.precondition,d))return g;const p=Wy(h.fieldTransforms,v,d),E=d.data;return E.setAll(Rv(h)),E.setAll(p),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(w=>w.field))}(s,e,i,a):function(h,d,g){return Bu(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(s,e,i)}function H1(s,e){let i=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),h=Tv(a.transform,o||null);h!=null&&(i===null&&(i=nn.empty()),i.set(a.field,h))}return i||null}function Zy(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&pa(a,o,(h,d)=>z1(h,d))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class io extends cc{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ar extends cc{constructor(e,i,a,o,h=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Rv(s){const e=new Map;return s.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=s.data.field(i);e.set(i,a)}}),e}function Jy(s,e,i){const a=new Map;qt(s.length===i.length,32656,{Ve:i.length,me:s.length});for(let o=0;o<i.length;o++){const h=s[o],d=h.transform,g=e.data.field(h.field);a.set(h.field,L1(d,g,i[o]))}return a}function Wy(s,e,i){const a=new Map;for(const o of s){const h=o.transform,d=i.data.field(o.field);a.set(o.field,k1(h,d,e))}return a}class xd extends cc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G1 extends cc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const h=this.mutations[o];h.key.isEqual(e.key)&&q1(h,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=Fl(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=Fl(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=bv();return this.mutations.forEach(o=>{const h=e.get(o.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(o.key)?null:g;const v=wv(d,g);v!==null&&a.set(o.key,v),d.isValidDocument()||d.convertToNoDocument(Tt.min())}),a}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Vt())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,(i,a)=>Zy(i,a))&&pa(this.baseMutations,e.baseMutations,(i,a)=>Zy(i,a))}}class Sd{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){qt(e.mutations.length===a.length,58842,{fe:e.mutations.length,ge:a.length});let o=function(){return V1}();const h=e.mutations;for(let d=0;d<h.length;d++)o=o.insert(h[d].key,a[d].version);return new Sd(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,Ut;function K1(s){switch(s){case J.OK:return yt(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return yt(15467,{code:s})}}function Cv(s){if(s===void 0)return Mi("GRPC error has no .code"),J.UNKNOWN;switch(s){case ve.OK:return J.OK;case ve.CANCELLED:return J.CANCELLED;case ve.UNKNOWN:return J.UNKNOWN;case ve.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case ve.INTERNAL:return J.INTERNAL;case ve.UNAVAILABLE:return J.UNAVAILABLE;case ve.UNAUTHENTICATED:return J.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case ve.NOT_FOUND:return J.NOT_FOUND;case ve.ALREADY_EXISTS:return J.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return J.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case ve.ABORTED:return J.ABORTED;case ve.OUT_OF_RANGE:return J.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return J.UNIMPLEMENTED;case ve.DATA_LOSS:return J.DATA_LOSS;default:return yt(39323,{code:s})}}(Ut=ve||(ve={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new dr([4294967295,4294967295],0);function t0(s){const e=Z0().encode(s),i=new H0;return i.update(e),new Uint8Array(i.digest())}function e0(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new dr([i,a],0),new dr([o,h],0)]}class wd{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new zl(`Invalid padding: ${i}`);if(a<0)throw new zl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new zl(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new zl(`Invalid padding when bitmap length is 0: ${i}`);this.pe=8*e.length-i,this.ye=dr.fromNumber(this.pe)}we(e,i,a){let o=e.add(i.multiply(dr.fromNumber(a)));return o.compare(X1)===1&&(o=new dr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const i=t0(e),[a,o]=e0(i);for(let h=0;h<this.hashCount;h++){const d=this.we(a,o,h);if(!this.be(d))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),d=new wd(h,o,i);return a.forEach(g=>d.insert(g)),d}insert(e){if(this.pe===0)return;const i=t0(e),[a,o]=e0(i);for(let h=0;h<this.hashCount;h++){const d=this.we(a,o,h);this.Se(d)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,i,a,o,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,ro.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new hc(Tt.min(),o,new se(Rt),ji(),Vt())}}class ro{constructor(e,i,a,o,h){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new ro(a,i,Vt(),Vt(),Vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,i,a,o){this.De=e,this.removedTargetIds=i,this.key=a,this.ve=o}}class Nv{constructor(e,i){this.targetId=e,this.Ce=i}}class Dv{constructor(e,i,a=ze.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class n0{constructor(){this.Fe=0,this.Me=i0(),this.xe=ze.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Vt(),i=Vt(),a=Vt();return this.Me.forEach((o,h)=>{switch(h){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:yt(38017,{changeType:h})}}),new ro(this.xe,this.Oe,e,i,a)}Qe(){this.Ne=!1,this.Me=i0()}$e(e,i){this.Ne=!0,this.Me=this.Me.insert(e,i)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,qt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class $1{constructor(e){this.ze=e,this.je=new Map,this.He=ji(),this.Je=Uu(),this.Ye=Uu(),this.Ze=new se(Rt)}Xe(e){for(const i of e.De)e.ve&&e.ve.isFoundDocument()?this.et(i,e.ve):this.tt(i,e.key,e.ve);for(const i of e.removedTargetIds)this.tt(i,e.key,e.ve)}nt(e){this.forEachTarget(e,i=>{const a=this.rt(i);switch(e.state){case 0:this.it(i)&&a.ke(e.resumeToken);break;case 1:a.We(),a.Be||a.Qe(),a.ke(e.resumeToken);break;case 2:a.We(),a.Be||this.removeTarget(i);break;case 3:this.it(i)&&(a.Ge(),a.ke(e.resumeToken));break;case 4:this.it(i)&&(this.st(i),a.ke(e.resumeToken));break;default:yt(56790,{state:e.state})}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.je.forEach((a,o)=>{this.it(o)&&i(o)})}ot(e){const i=e.targetId,a=e.Ce.count,o=this._t(i);if(o){const h=o.target;if($f(h))if(a===0){const d=new mt(h.path);this.tt(i,d,Fe.newNoDocument(d,Tt.min()))}else qt(a===1,20013,{expectedCount:a});else{const d=this.ut(i);if(d!==a){const g=this.ct(e),v=g?this.lt(g,e,d):1;if(v!==0){this.st(i);const p=v===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,p)}}}}}ct(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:h=0}=i;let d,g;try{d=yr(a).toUint8Array()}catch(v){if(v instanceof ev)return ga("Decoding the base64 bloom filter in existence filter failed ("+v.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw v}try{g=new wd(d,o,h)}catch(v){return ga(v instanceof zl?"BloomFilter error: ":"Applying bloom filter failed: ",v),null}return g.pe===0?null:g}lt(e,i,a){return i.Ce.count===a-this.Tt(e,i.targetId)?0:2}Tt(e,i){const a=this.ze.getRemoteKeysForTarget(i);let o=0;return a.forEach(h=>{const d=this.ze.Pt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;e.mightContain(g)||(this.tt(i,h,null),o++)}),o}It(e){const i=new Map;this.je.forEach((h,d)=>{const g=this._t(d);if(g){if(h.current&&$f(g.target)){const v=new mt(g.target.path);this.Et(v).has(d)||this.dt(d,v)||this.tt(d,v,Fe.newNoDocument(v,e))}h.Le&&(i.set(d,h.qe()),h.Qe())}});let a=Vt();this.Ye.forEach((h,d)=>{let g=!0;d.forEachWhile(v=>{const p=this._t(v);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(a=a.add(h))}),this.He.forEach((h,d)=>d.setReadTime(e));const o=new hc(e,i,this.Ze,this.He,a);return this.He=ji(),this.Je=Uu(),this.Ye=Uu(),this.Ze=new se(Rt),o}et(e,i){if(!this.it(e))return;const a=this.dt(e,i.key)?2:0;this.rt(e).$e(i.key,a),this.He=this.He.insert(i.key,i),this.Je=this.Je.insert(i.key,this.Et(i.key).add(e)),this.Ye=this.Ye.insert(i.key,this.At(i.key).add(e))}tt(e,i,a){if(!this.it(e))return;const o=this.rt(e);this.dt(e,i)?o.$e(i,1):o.Ue(i),this.Ye=this.Ye.insert(i,this.At(i).delete(e)),this.Ye=this.Ye.insert(i,this.At(i).add(e)),a&&(this.He=this.He.insert(i,a))}removeTarget(e){this.je.delete(e)}ut(e){const i=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let i=this.je.get(e);return i||(i=new n0,this.je.set(e,i)),i}At(e){let i=this.Ye.get(e);return i||(i=new we(Rt),this.Ye=this.Ye.insert(e,i)),i}Et(e){let i=this.Je.get(e);return i||(i=new we(Rt),this.Je=this.Je.insert(e,i)),i}it(e){const i=this._t(e)!==null;return i||at("WatchChangeAggregator","Detected inactive target",e),i}_t(e){const i=this.je.get(e);return i&&i.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new n0),this.ze.getRemoteKeysForTarget(e).forEach(i=>{this.tt(e,i,null)})}dt(e,i){return this.ze.getRemoteKeysForTarget(e).has(i)}}function Uu(){return new se(mt.comparator)}function i0(){return new se(mt.comparator)}const Z1={asc:"ASCENDING",desc:"DESCENDING"},J1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W1={and:"AND",or:"OR"};class tA{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Wf(s,e){return s.useProto3Json||sc(e)?e:{value:e}}function Wu(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Iv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function eA(s,e){return Wu(s,e.toTimestamp())}function ri(s){return qt(!!s,49232),Tt.fromTimestamp(function(i){const a=pr(i);return new Se(a.seconds,a.nanos)}(s))}function Rd(s,e){return td(s,e).canonicalString()}function td(s,e){const i=function(o){return new ee(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?i:i.child(e)}function Vv(s){const e=ee.fromString(s);return qt(kv(e),10190,{key:e.toString()}),e}function ed(s,e){return Rd(s.databaseId,e.path)}function jf(s,e){const i=Vv(e);if(i.get(1)!==s.databaseId.projectId)throw new lt(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new lt(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new mt(Mv(i))}function Ov(s,e){return Rd(s.databaseId,e)}function nA(s){const e=Vv(s);return e.length===4?ee.emptyPath():Mv(e)}function nd(s){return new ee(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Mv(s){return qt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function r0(s,e,i){return{name:ed(s,e),fields:i.value.mapValue.fields}}function iA(s,e){let i;if("targetChange"in e){e.targetChange;const a=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:yt(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],h=function(p,E){return p.useProto3Json?(qt(E===void 0||typeof E=="string",58123),ze.fromBase64String(E||"")):(qt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),ze.fromUint8Array(E||new Uint8Array))}(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(p){const E=p.code===void 0?J.UNKNOWN:Cv(p.code);return new lt(E,p.message||"")}(d);i=new Dv(a,o,h,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=jf(s,a.document.name),h=ri(a.document.updateTime),d=a.document.createTime?ri(a.document.createTime):Tt.min(),g=new nn({mapValue:{fields:a.document.fields}}),v=Fe.newFoundDocument(o,h,d,g),p=a.targetIds||[],E=a.removedTargetIds||[];i=new qu(p,E,v.key,v)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=jf(s,a.document),h=a.readTime?ri(a.readTime):Tt.min(),d=Fe.newNoDocument(o,h),g=a.removedTargetIds||[];i=new qu([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=jf(s,a.document),h=a.removedTargetIds||[];i=new qu([],h,o,null)}else{if(!("filter"in e))return yt(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:h}=a,d=new Y1(o,h),g=a.targetId;i=new Nv(g,d)}}return i}function rA(s,e){let i;if(e instanceof io)i={update:r0(s,e.key,e.value)};else if(e instanceof xd)i={delete:ed(s,e.key)};else if(e instanceof Ar)i={update:r0(s,e.key,e.data),updateMask:dA(e.fieldMask)};else{if(!(e instanceof G1))return yt(16599,{ft:e.type});i={verify:ed(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(a=>function(h,d){const g=d.transform;if(g instanceof to)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof eo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof no)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Ju)return{fieldPath:d.field.canonicalString(),increment:g.Re};throw yt(20930,{transform:d.transform})}(0,a))),e.precondition.isNone||(i.currentDocument=function(o,h){return h.updateTime!==void 0?{updateTime:eA(o,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:yt(27497)}(s,e.precondition)),i}function sA(s,e){return s&&s.length>0?(qt(e!==void 0,14353),s.map(i=>function(o,h){let d=o.updateTime?ri(o.updateTime):ri(h);return d.isEqual(Tt.min())&&(d=ri(h)),new B1(d,o.transformResults||[])}(i,e))):[]}function aA(s,e){return{documents:[Ov(s,e.path)]}}function lA(s,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=Ov(s,o);const h=function(p){if(p.length!==0)return Uv(kn.create(p,"and"))}(e.filters);h&&(i.structuredQuery.where=h);const d=function(p){if(p.length!==0)return p.map(E=>function(R){return{field:ha(R.field),direction:cA(R.dir)}}(E))}(e.orderBy);d&&(i.structuredQuery.orderBy=d);const g=Wf(s,e.limit);return g!==null&&(i.structuredQuery.limit=g),e.startAt&&(i.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:i,parent:o}}function oA(s){let e=nA(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){qt(a===1,65062);const E=i.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let h=[];i.where&&(h=function(w){const R=jv(w);return R instanceof kn&&hv(R)?R.getFilters():[R]}(i.where));let d=[];i.orderBy&&(d=function(w){return w.map(R=>function(Q){return new Wl(fa(Q.field),function(K){switch(K){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Q.direction))}(R))}(i.orderBy));let g=null;i.limit&&(g=function(w){let R;return R=typeof w=="object"?w.value:w,sc(R)?null:R}(i.limit));let v=null;i.startAt&&(v=function(w){const R=!!w.before,k=w.values||[];return new Zu(k,R)}(i.startAt));let p=null;return i.endAt&&(p=function(w){const R=!w.before,k=w.values||[];return new Zu(k,R)}(i.endAt)),R1(e,o,d,h,g,"F",v,p)}function uA(s,e){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return yt(28987,{purpose:o})}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function jv(s){return s.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=fa(i.unaryFilter.field);return _e.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=fa(i.unaryFilter.field);return _e.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=fa(i.unaryFilter.field);return _e.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=fa(i.unaryFilter.field);return _e.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return yt(61313);default:return yt(60726)}}(s):s.fieldFilter!==void 0?function(i){return _e.create(fa(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return yt(58110);default:return yt(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(i){return kn.create(i.compositeFilter.filters.map(a=>jv(a)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return yt(1026)}}(i.compositeFilter.op))}(s):yt(30097,{filter:s})}function cA(s){return Z1[s]}function hA(s){return J1[s]}function fA(s){return W1[s]}function ha(s){return{fieldPath:s.canonicalString()}}function fa(s){return Pe.fromServerFormat(s.fieldPath)}function Uv(s){return s instanceof _e?function(i){if(i.op==="=="){if(Qy(i.value))return{unaryFilter:{field:ha(i.field),op:"IS_NAN"}};if(Gy(i.value))return{unaryFilter:{field:ha(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Qy(i.value))return{unaryFilter:{field:ha(i.field),op:"IS_NOT_NAN"}};if(Gy(i.value))return{unaryFilter:{field:ha(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(i.field),op:hA(i.op),value:i.value}}}(s):s instanceof kn?function(i){const a=i.getFilters().map(o=>Uv(o));return a.length===1?a[0]:{compositeFilter:{op:fA(i.op),filters:a}}}(s):yt(54877,{filter:s})}function dA(s){const e=[];return s.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function kv(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,i,a,o,h=Tt.min(),d=Tt.min(),g=ze.EMPTY_BYTE_STRING,v=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=v}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.wt=e}}function gA(s){const e=oA({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Jf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.Cn=new yA}addToCollectionParentIndex(e,i){return this.Cn.add(i),tt.resolve()}getCollectionParents(e,i){return tt.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return tt.resolve()}deleteFieldIndex(e,i){return tt.resolve()}deleteAllFieldIndexes(e){return tt.resolve()}createTargetIndexes(e,i){return tt.resolve()}getDocumentsMatchingTarget(e,i){return tt.resolve(null)}getIndexType(e,i){return tt.resolve(0)}getFieldIndexes(e,i){return tt.resolve([])}getNextCollectionGroupToUpdate(e){return tt.resolve(null)}getMinOffset(e,i){return tt.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,i){return tt.resolve(gr.min())}updateCollectionGroup(e,i,a){return tt.resolve()}updateIndexEntries(e,i){return tt.resolve()}}class yA{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new we(ee.comparator),h=!o.has(a);return this.index[i]=o.add(a),h}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new we(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lv=41943040;class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(Lv,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new _a(0)}static lr(){return new _a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="LruGarbageCollector",vA=1048576;function l0([s,e],[i,a]){const o=Rt(s,i);return o===0?Rt(e,a):o}class _A{constructor(e){this.Er=e,this.buffer=new we(l0),this.dr=0}Ar(){return++this.dr}Rr(e){const i=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();l0(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class bA{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){at(a0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){Sa(i)?at(a0,"Ignoring IndexedDB error during garbage collection: ",i):await xa(i)}await this.mr(3e5)})}}class EA{constructor(e,i){this.gr=e,this.params=i}calculateTargetCount(e,i){return this.gr.pr(e).next(a=>Math.floor(i/100*a))}nthSequenceNumber(e,i){if(i===0)return tt.resolve(rc.le);const a=new _A(i);return this.gr.forEachTarget(e,o=>a.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>a.Rr(o))).next(()=>a.maxValue)}removeTargets(e,i,a){return this.gr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.gr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(s0)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s0):this.wr(e,i))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,i){let a,o,h,d,g,v,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,d=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(a=w,g=Date.now(),this.removeTargets(e,a,i))).next(w=>(h=w,v=Date.now(),this.removeOrphanedDocuments(e,a))).next(w=>(p=Date.now(),ua()<=Lt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-E}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${h} targets in `+(v-g)+`ms
	Removed ${w} documents in `+(p-v)+`ms
Total Duration: ${p-E}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:h,documentsRemoved:w})))}}function TA(s,e){return new EA(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.changes=new ds(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Fe.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?tt.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next(o=>(a=o,this.remoteDocumentCache.getEntry(e,i))).next(o=>(a!==null&&Fl(a.mutation,o,mn.empty(),Se.now()),o))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.getLocalViewOfDocuments(e,a,Vt()).next(()=>a))}getLocalViewOfDocuments(e,i,a=Vt()){const o=os();return this.populateOverlays(e,o,i).next(()=>this.computeViews(e,i,o,a).next(h=>{let d=Pl();return h.forEach((g,v)=>{d=d.insert(g,v.overlayedDocument)}),d}))}getOverlayedDocuments(e,i){const a=os();return this.populateOverlays(e,a,i).next(()=>this.computeViews(e,i,a,Vt()))}populateOverlays(e,i,a){const o=[];return a.forEach(h=>{i.has(h)||o.push(h)}),this.documentOverlayCache.getOverlays(e,o).next(h=>{h.forEach((d,g)=>{i.set(d,g)})})}computeViews(e,i,a,o){let h=ji();const d=Ql(),g=function(){return Ql()}();return i.forEach((v,p)=>{const E=a.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Ar)?h=h.insert(p.key,p):E!==void 0?(d.set(p.key,E.mutation.getFieldMask()),Fl(E.mutation,p,E.mutation.getFieldMask(),Se.now())):d.set(p.key,mn.empty())}),this.recalculateAndSaveOverlays(e,h).next(v=>(v.forEach((p,E)=>d.set(p,E)),i.forEach((p,E)=>{var w;return g.set(p,new xA(E,(w=d.get(p))!==null&&w!==void 0?w:null))}),g))}recalculateAndSaveOverlays(e,i){const a=Ql();let o=new se((d,g)=>d-g),h=Vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(d=>{for(const g of d)g.keys().forEach(v=>{const p=i.get(v);if(p===null)return;let E=a.get(v)||mn.empty();E=g.applyToLocalView(p,E),a.set(v,E);const w=(o.get(g.batchId)||Vt()).add(v);o=o.insert(g.batchId,w)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),p=v.key,E=v.value,w=bv();E.forEach(R=>{if(!h.has(R)){const k=wv(i.get(R),a.get(R));k!==null&&w.set(R,k),h=h.add(R)}}),d.push(this.documentOverlayCache.saveOverlays(e,p,w))}return tt.waitFor(d)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,i,a,o){return function(d){return mt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):gv(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next(h=>{const d=o-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-h.size):tt.resolve(os());let g=Xl,v=h;return d.next(p=>tt.forEach(p,(E,w)=>(g<w.largestBatchId&&(g=w.largestBatchId),h.get(E)?tt.resolve():this.remoteDocumentCache.getEntry(e,E).next(R=>{v=v.insert(E,R)}))).next(()=>this.populateOverlays(e,p,h)).next(()=>this.computeViews(e,v,p,Vt())).next(E=>({batchId:g,changes:_v(E)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new mt(i)).next(a=>{let o=Pl();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const h=i.collectionGroup;let d=Pl();return this.indexManager.getCollectionParents(e,h).next(g=>tt.forEach(g,v=>{const p=function(w,R){return new wa(R,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(i,v.child(h));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next(E=>{E.forEach((w,R)=>{d=d.insert(w,R)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,i,a,o){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next(d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,h,o))).next(d=>{h.forEach((v,p)=>{const E=p.getKey();d.get(E)===null&&(d=d.insert(E,Fe.newInvalidDocument(E)))});let g=Pl();return d.forEach((v,p)=>{const E=h.get(v);E!==void 0&&Fl(E.mutation,p,mn.empty(),Se.now()),oc(i,p)&&(g=g.insert(v,p))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,i){return tt.resolve(this.kr.get(i))}saveBundleMetadata(e,i){return this.kr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:ri(o.createTime)}}(i)),tt.resolve()}getNamedQuery(e,i){return tt.resolve(this.qr.get(i))}saveNamedQuery(e,i){return this.qr.set(i.name,function(o){return{name:o.name,query:gA(o.bundledQuery),readTime:ri(o.readTime)}}(i)),tt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.overlays=new se(mt.comparator),this.Qr=new Map}getOverlay(e,i){return tt.resolve(this.overlays.get(i))}getOverlays(e,i){const a=os();return tt.forEach(i,o=>this.getOverlay(e,o).next(h=>{h!==null&&a.set(o,h)})).next(()=>a)}saveOverlays(e,i,a){return a.forEach((o,h)=>{this.St(e,i,h)}),tt.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.Qr.get(a);return o!==void 0&&(o.forEach(h=>this.overlays=this.overlays.remove(h)),this.Qr.delete(a)),tt.resolve()}getOverlaysForCollection(e,i,a){const o=os(),h=i.length+1,d=new mt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,p=v.getKey();if(!i.isPrefixOf(p.path))break;p.path.length===h&&v.largestBatchId>a&&o.set(v.getKey(),v)}return tt.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let h=new se((p,E)=>p-E);const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===i&&p.largestBatchId>a){let E=h.get(p.largestBatchId);E===null&&(E=os(),h=h.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const g=os(),v=h.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((p,E)=>g.set(p,E)),!(g.size()>=o)););return tt.resolve(g)}St(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(a.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new F1(i,a));let h=this.Qr.get(i);h===void 0&&(h=Vt(),this.Qr.set(i,h)),this.Qr.set(i,h.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.sessionToken=ze.EMPTY_BYTE_STRING}getSessionToken(e){return tt.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,tt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this.$r=new we(Ve.Ur),this.Kr=new we(Ve.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,i){const a=new Ve(e,i);this.$r=this.$r.add(a),this.Kr=this.Kr.add(a)}Gr(e,i){e.forEach(a=>this.addReference(a,i))}removeReference(e,i){this.zr(new Ve(e,i))}jr(e,i){e.forEach(a=>this.removeReference(a,i))}Hr(e){const i=new mt(new ee([])),a=new Ve(i,e),o=new Ve(i,e+1),h=[];return this.Kr.forEachInRange([a,o],d=>{this.zr(d),h.push(d.key)}),h}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const i=new mt(new ee([])),a=new Ve(i,e),o=new Ve(i,e+1);let h=Vt();return this.Kr.forEachInRange([a,o],d=>{h=h.add(d.key)}),h}containsKey(e){const i=new Ve(e,0),a=this.$r.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class Ve{constructor(e,i){this.key=e,this.Zr=i}static Ur(e,i){return mt.comparator(e.key,i.key)||Rt(e.Zr,i.Zr)}static Wr(e,i){return Rt(e.Zr,i.Zr)||mt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.nr=1,this.Xr=new we(Ve.Ur)}checkEmpty(e){return tt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const h=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Q1(h,i,a,o);this.mutationQueue.push(d);for(const g of o)this.Xr=this.Xr.add(new Ve(g.key,h)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return tt.resolve(d)}lookupMutationBatch(e,i){return tt.resolve(this.ei(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.ti(a),h=o<0?0:o;return tt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(this.mutationQueue.length===0?yd:this.nr-1)}getAllMutationBatches(e){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new Ve(i,0),o=new Ve(i,Number.POSITIVE_INFINITY),h=[];return this.Xr.forEachInRange([a,o],d=>{const g=this.ei(d.Zr);h.push(g)}),tt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new we(Rt);return i.forEach(o=>{const h=new Ve(o,0),d=new Ve(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([h,d],g=>{a=a.add(g.Zr)})}),tt.resolve(this.ni(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let h=a;mt.isDocumentKey(h)||(h=h.child(""));const d=new Ve(new mt(h),0);let g=new we(Rt);return this.Xr.forEachWhile(v=>{const p=v.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(g=g.add(v.Zr)),!0)},d),tt.resolve(this.ni(g))}ni(e){const i=[];return e.forEach(a=>{const o=this.ei(a);o!==null&&i.push(o)}),i}removeMutationBatch(e,i){qt(this.ri(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Xr;return tt.forEach(i.mutations,o=>{const h=new Ve(o.key,i.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=a})}sr(e){}containsKey(e,i){const a=new Ve(i,0),o=this.Xr.firstAfterOrEqual(a);return tt.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,tt.resolve()}ri(e,i){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const i=this.ti(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.ii=e,this.docs=function(){return new se(mt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),h=o?o.size:0,d=this.ii(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return tt.resolve(a?a.document.mutableCopy():Fe.newInvalidDocument(i))}getEntries(e,i){let a=ji();return i.forEach(o=>{const h=this.docs.get(o);a=a.insert(o,h?h.document.mutableCopy():Fe.newInvalidDocument(o))}),tt.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let h=ji();const d=i.path,g=new mt(d.child("__id-9223372036854775808__")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:p,value:{document:E}}=v.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||s1(r1(E),a)<=0||(o.has(E.key)||oc(i,E))&&(h=h.insert(E.key,E.mutableCopy()))}return tt.resolve(h)}getAllFromCollectionGroup(e,i,a,o){yt(9500)}si(e,i){return tt.forEach(this.docs,a=>i(a))}newChangeBuffer(e){return new IA(this)}getSize(e){return tt.resolve(this.size)}}class IA extends AA{constructor(e){super(),this.Br=e}applyChanges(e){const i=[];return this.changes.forEach((a,o)=>{o.isValidDocument()?i.push(this.Br.addEntry(e,o)):this.Br.removeEntry(a)}),tt.waitFor(i)}getFromCache(e,i){return this.Br.getEntry(e,i)}getAllFromCache(e,i){return this.Br.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.persistence=e,this.oi=new ds(i=>bd(i),Ed),this.lastRemoteSnapshotVersion=Tt.min(),this.highestTargetId=0,this._i=0,this.ai=new Cd,this.targetCount=0,this.ui=_a.cr()}forEachTarget(e,i){return this.oi.forEach((a,o)=>i(o)),tt.resolve()}getLastRemoteSnapshotVersion(e){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tt.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this._i&&(this._i=i),tt.resolve()}Tr(e){this.oi.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ui=new _a(i),this.highestTargetId=i),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,i){return this.Tr(i),this.targetCount+=1,tt.resolve()}updateTargetData(e,i){return this.Tr(i),tt.resolve()}removeTargetData(e,i){return this.oi.delete(i.target),this.ai.Hr(i.targetId),this.targetCount-=1,tt.resolve()}removeTargets(e,i,a){let o=0;const h=[];return this.oi.forEach((d,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.oi.delete(d),h.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),tt.waitFor(h).next(()=>o)}getTargetCount(e){return tt.resolve(this.targetCount)}getTargetData(e,i){const a=this.oi.get(i)||null;return tt.resolve(a)}addMatchingKeys(e,i,a){return this.ai.Gr(i,a),tt.resolve()}removeMatchingKeys(e,i,a){this.ai.jr(i,a);const o=this.persistence.referenceDelegate,h=[];return o&&i.forEach(d=>{h.push(o.markPotentiallyOrphaned(e,d))}),tt.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this.ai.Hr(i),tt.resolve()}getMatchingKeysForTargetId(e,i){const a=this.ai.Yr(i);return tt.resolve(a)}containsKey(e,i){return tt.resolve(this.ai.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,i){this.ci={},this.overlays={},this.li=new rc(0),this.hi=!1,this.hi=!0,this.Pi=new CA,this.referenceDelegate=e(this),this.Ti=new VA(this),this.indexManager=new pA,this.remoteDocumentCache=function(o){return new DA(o)}(a=>this.referenceDelegate.Ii(a)),this.serializer=new mA(i),this.Ei=new wA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new RA,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ci[e.toKey()];return a||(a=new NA(i,this.referenceDelegate),this.ci[e.toKey()]=a),a}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,i,a){at("MemoryPersistence","Starting transaction:",e);const o=new OA(this.li.next());return this.referenceDelegate.di(),a(o).next(h=>this.referenceDelegate.Ai(o).next(()=>h)).toPromise().then(h=>(o.raiseOnCommittedEvent(),h))}Ri(e,i){return tt.or(Object.values(this.ci).map(a=>()=>a.containsKey(e,i)))}}class OA extends l1{constructor(e){super(),this.currentSequenceNumber=e}}class Nd{constructor(e){this.persistence=e,this.Vi=new Cd,this.mi=null}static fi(e){return new Nd(e)}get gi(){if(this.mi)return this.mi;throw yt(60996)}addReference(e,i,a){return this.Vi.addReference(a,i),this.gi.delete(a.toString()),tt.resolve()}removeReference(e,i,a){return this.Vi.removeReference(a,i),this.gi.add(a.toString()),tt.resolve()}markPotentiallyOrphaned(e,i){return this.gi.add(i.toString()),tt.resolve()}removeTarget(e,i){this.Vi.Hr(i.targetId).forEach(o=>this.gi.add(o.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next(o=>{o.forEach(h=>this.gi.add(h.toString()))}).next(()=>a.removeTargetData(e,i))}di(){this.mi=new Set}Ai(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.gi,a=>{const o=mt.fromPath(a);return this.pi(e,o).next(h=>{h||i.removeEntry(o,Tt.min())})}).next(()=>(this.mi=null,i.apply(e)))}updateLimboDocument(e,i){return this.pi(e,i).next(a=>{a?this.gi.delete(i.toString()):this.gi.add(i.toString())})}Ii(e){return 0}pi(e,i){return tt.or([()=>tt.resolve(this.Vi.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ri(e,i)])}}class tc{constructor(e,i){this.persistence=e,this.yi=new ds(a=>c1(a.path),(a,o)=>a.isEqual(o)),this.garbageCollector=TA(this,i)}static fi(e,i){return new tc(e,i)}di(){}Ai(e){return tt.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}pr(e){const i=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>i.next(o=>a+o))}br(e){let i=0;return this.yr(e,a=>{i++}).next(()=>i)}yr(e,i){return tt.forEach(this.yi,(a,o)=>this.Dr(e,a,o).next(h=>h?tt.resolve():i(o)))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),h=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,i).next(g=>{g||(a++,h.removeEntry(d,Tt.min()))})).next(()=>h.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,i){return this.yi.set(i,e.currentSequenceNumber),tt.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.yi.set(a,e.currentSequenceNumber),tt.resolve()}removeReference(e,i,a){return this.yi.set(a,e.currentSequenceNumber),tt.resolve()}updateLimboDocument(e,i){return this.yi.set(i,e.currentSequenceNumber),tt.resolve()}Ii(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Pu(e.data.value)),i}Dr(e,i,a){return tt.or([()=>this.persistence.Ri(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.yi.get(i);return tt.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.ds=a,this.As=o}static Rs(e,i){let a=Vt(),o=Vt();for(const h of i.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}return new Dd(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return DE()?8:o1(CE())>0?6:4}()}initialize(e,i){this.ys=e,this.indexManager=i,this.Vs=!0}getDocumentsMatchingQuery(e,i,a,o){const h={result:null};return this.ws(e,i).next(d=>{h.result=d}).next(()=>{if(!h.result)return this.bs(e,i,o,a).next(d=>{h.result=d})}).next(()=>{if(h.result)return;const d=new MA;return this.Ss(e,i,d).next(g=>{if(h.result=g,this.fs)return this.Ds(e,i,d,g.size)})}).next(()=>h.result)}Ds(e,i,a,o){return a.documentReadCount<this.gs?(ua()<=Lt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",ca(i),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),tt.resolve()):(ua()<=Lt.DEBUG&&at("QueryEngine","Query:",ca(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ps*o?(ua()<=Lt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",ca(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(i))):tt.resolve())}ws(e,i){if(Xy(i))return tt.resolve(null);let a=ii(i);return this.indexManager.getIndexType(e,a).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=Jf(i,null,"F"),a=ii(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next(h=>{const d=Vt(...h);return this.ys.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,a).next(v=>{const p=this.vs(i,g);return this.Cs(i,p,d,v.readTime)?this.ws(e,Jf(i,null,"F")):this.Fs(e,p,i,v)}))})))}bs(e,i,a,o){return Xy(i)||o.isEqual(Tt.min())?tt.resolve(null):this.ys.getDocuments(e,a).next(h=>{const d=this.vs(i,h);return this.Cs(i,d,a,o)?tt.resolve(null):(ua()<=Lt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ca(i)),this.Fs(e,d,i,i1(o,Xl)).next(g=>g))})}vs(e,i){let a=new we(yv(e));return i.forEach((o,h)=>{oc(e,h)&&(a=a.add(h))}),a}Cs(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(o)>0)}Ss(e,i,a){return ua()<=Lt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",ca(i)),this.ys.getDocumentsMatchingQuery(e,i,gr.min(),a)}Fs(e,i,a,o){return this.ys.getDocumentsMatchingQuery(e,a,o).next(h=>(i.forEach(d=>{h=h.insert(d.key,d)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="LocalStore",UA=3e8;class kA{constructor(e,i,a,o){this.persistence=e,this.Ms=i,this.serializer=o,this.xs=new se(Rt),this.Os=new ds(h=>bd(h),Ed),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(a)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SA(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.xs))}}function LA(s,e,i,a){return new kA(s,e,i,a)}async function zv(s,e){const i=At(s);return await i.persistence.runTransaction("Handle user change","readonly",a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next(h=>(o=h,i.Ls(e),i.mutationQueue.getAllMutationBatches(a))).next(h=>{const d=[],g=[];let v=Vt();for(const p of o){d.push(p.batchId);for(const E of p.mutations)v=v.add(E.key)}for(const p of h){g.push(p.batchId);for(const E of p.mutations)v=v.add(E.key)}return i.localDocuments.getDocuments(a,v).next(p=>({ks:p,removedBatchIds:d,addedBatchIds:g}))})})}function PA(s,e){const i=At(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const o=e.batch.keys(),h=i.Bs.newChangeBuffer({trackRemovals:!0});return function(g,v,p,E){const w=p.batch,R=w.keys();let k=tt.resolve();return R.forEach(Q=>{k=k.next(()=>E.getEntry(v,Q)).next(et=>{const K=p.docVersions.get(Q);qt(K!==null,48541),et.version.compareTo(K)<0&&(w.applyToRemoteDocument(et,p),et.isValidDocument()&&(et.setReadTime(p.commitVersion),E.addEntry(et)))})}),k.next(()=>g.mutationQueue.removeMutationBatch(v,w))}(i,a,e,h).next(()=>h.apply(a)).next(()=>i.mutationQueue.performConsistencyCheck(a)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(g){let v=Vt();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(v=v.add(g.batch.mutations[p].key));return v}(e))).next(()=>i.localDocuments.getDocuments(a,o))})}function Bv(s){const e=At(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Ti.getLastRemoteSnapshotVersion(i))}function zA(s,e){const i=At(s),a=e.snapshotVersion;let o=i.xs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const d=i.Bs.newChangeBuffer({trackRemovals:!0});o=i.xs;const g=[];e.targetChanges.forEach((E,w)=>{const R=o.get(w);if(!R)return;g.push(i.Ti.removeMatchingKeys(h,E.removedDocuments,w).next(()=>i.Ti.addMatchingKeys(h,E.addedDocuments,w)));let k=R.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(w)!==null?k=k.withResumeToken(ze.EMPTY_BYTE_STRING,Tt.min()).withLastLimboFreeSnapshotVersion(Tt.min()):E.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(E.resumeToken,a)),o=o.insert(w,k),function(et,K,bt){return et.resumeToken.approximateByteSize()===0||K.snapshotVersion.toMicroseconds()-et.snapshotVersion.toMicroseconds()>=UA?!0:bt.addedDocuments.size+bt.modifiedDocuments.size+bt.removedDocuments.size>0}(R,k,E)&&g.push(i.Ti.updateTargetData(h,k))});let v=ji(),p=Vt();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,E))}),g.push(BA(h,d,e.documentUpdates).next(E=>{v=E.qs,p=E.Qs})),!a.isEqual(Tt.min())){const E=i.Ti.getLastRemoteSnapshotVersion(h).next(w=>i.Ti.setTargetsMetadata(h,h.currentSequenceNumber,a));g.push(E)}return tt.waitFor(g).next(()=>d.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,v,p)).next(()=>v)}).then(h=>(i.xs=o,h))}function BA(s,e,i){let a=Vt(),o=Vt();return i.forEach(h=>a=a.add(h)),e.getEntries(s,a).next(h=>{let d=ji();return i.forEach((g,v)=>{const p=h.get(g);v.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual(Tt.min())?(e.removeEntry(g,v.readTime),d=d.insert(g,v)):!p.isValidDocument()||v.version.compareTo(p.version)>0||v.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(v),d=d.insert(g,v)):at(Id,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",v.version)}),{qs:d,Qs:o}})}function qA(s,e){const i=At(s);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=yd),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function HA(s,e){const i=At(s);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let o;return i.Ti.getTargetData(a,e).next(h=>h?(o=h,tt.resolve(o)):i.Ti.allocateTargetId(a).next(d=>(o=new cr(e,d,"TargetPurposeListen",a.currentSequenceNumber),i.Ti.addTargetData(a,o).next(()=>o))))}).then(a=>{const o=i.xs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.xs=i.xs.insert(a.targetId,a),i.Os.set(e,a.targetId)),a})}async function id(s,e,i){const a=At(s),o=a.xs.get(e),h=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",h,d=>a.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!Sa(d))throw d;at(Id,`Failed to update sequence numbers for target ${e}: ${d}`)}a.xs=a.xs.remove(e),a.Os.delete(o.target)}function o0(s,e,i){const a=At(s);let o=Tt.min(),h=Vt();return a.persistence.runTransaction("Execute query","readwrite",d=>function(v,p,E){const w=At(v),R=w.Os.get(E);return R!==void 0?tt.resolve(w.xs.get(R)):w.Ti.getTargetData(p,E)}(a,d,ii(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Ti.getMatchingKeysForTargetId(d,g.targetId).next(v=>{h=v})}).next(()=>a.Ms.getDocumentsMatchingQuery(d,e,i?o:Tt.min(),i?h:Vt())).next(g=>(GA(a,N1(e),g),{documents:g,$s:h})))}function GA(s,e,i){let a=s.Ns.get(e)||Tt.min();i.forEach((o,h)=>{h.readTime.compareTo(a)>0&&(a=h.readTime)}),s.Ns.set(e,a)}class u0{constructor(){this.activeTargetIds=j1()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QA{constructor(){this.xo=new u0,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,i,a){this.Oo[e]=i}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new u0,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="ConnectivityMonitor";class h0{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){at(c0,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){at(c0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ku=null;function rd(){return ku===null?ku=function(){return 268435456+Math.round(2147483648*Math.random())}():ku++,"0x"+ku.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="RestConnection",YA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KA{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=i+"://"+e.host,this.Wo=`projects/${a}/databases/${o}`,this.Go=this.databaseId.database===Xu?`project_id=${a}`:`project_id=${a}&database_id=${o}`}zo(e,i,a,o,h){const d=rd(),g=this.jo(e,i.toUriEncodedString());at(Uf,`Sending RPC '${e}' ${d}:`,g,a);const v={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(v,o,h);const{host:p}=new URL(g),E=md(p);return this.Jo(e,g,v,a,E).then(w=>(at(Uf,`Received RPC '${e}' ${d}: `,w),w),w=>{throw ga(Uf,`RPC '${e}' ${d} failed with error: `,w,"url: ",g,"request:",a),w})}Yo(e,i,a,o,h,d){return this.zo(e,i,a,o,h)}Ho(e,i,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Aa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,h)=>e[h]=o),a&&a.headers.forEach((o,h)=>e[h]=o)}jo(e,i){const a=YA[e];return`${this.Ko}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge="WebChannelConnection";class $A extends KA{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,o,h){const d=rd();return new Promise((g,v)=>{const p=new G0;p.setWithCredentials(!0),p.listenOnce(Q0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Lu.NO_ERROR:const w=p.getResponseJson();at(Ge,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(w)),g(w);break;case Lu.TIMEOUT:at(Ge,`RPC '${e}' ${d} timed out`),v(new lt(J.DEADLINE_EXCEEDED,"Request time out"));break;case Lu.HTTP_ERROR:const R=p.getStatus();if(at(Ge,`RPC '${e}' ${d} failed with status:`,R,"response text:",p.getResponseText()),R>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const Q=k==null?void 0:k.error;if(Q&&Q.status&&Q.message){const et=function(bt){const ct=bt.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ct)>=0?ct:J.UNKNOWN}(Q.status);v(new lt(et,Q.message))}else v(new lt(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else v(new lt(J.UNAVAILABLE,"Connection failed."));break;default:yt(9055,{h_:e,streamId:d,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{at(Ge,`RPC '${e}' ${d} completed.`)}});const E=JSON.stringify(o);at(Ge,`RPC '${e}' ${d} sending request:`,o),p.send(i,"POST",E,a,15)})}I_(e,i,a){const o=rd(),h=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=K0(),g=Y0(),v={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(v.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(v.useFetchStreams=!0),this.Ho(v.initMessageHeaders,i,a),v.encodeInitMessageHeaders=!0;const E=h.join("");at(Ge,`Creating RPC '${e}' stream ${o}: ${E}`,v);const w=d.createWebChannel(E,v);this.E_(w);let R=!1,k=!1;const Q=new XA({Zo:K=>{k?at(Ge,`Not sending because RPC '${e}' stream ${o} is closed:`,K):(R||(at(Ge,`Opening RPC '${e}' stream ${o} transport.`),w.open(),R=!0),at(Ge,`RPC '${e}' stream ${o} sending:`,K),w.send(K))},Xo:()=>w.close()}),et=(K,bt,ct)=>{K.listen(bt,ht=>{try{ct(ht)}catch($){setTimeout(()=>{throw $},0)}})};return et(w,Ll.EventType.OPEN,()=>{k||(at(Ge,`RPC '${e}' stream ${o} transport opened.`),Q.__())}),et(w,Ll.EventType.CLOSE,()=>{k||(k=!0,at(Ge,`RPC '${e}' stream ${o} transport closed`),Q.u_(),this.d_(w))}),et(w,Ll.EventType.ERROR,K=>{k||(k=!0,ga(Ge,`RPC '${e}' stream ${o} transport errored. Name:`,K.name,"Message:",K.message),Q.u_(new lt(J.UNAVAILABLE,"The operation could not be completed")))}),et(w,Ll.EventType.MESSAGE,K=>{var bt;if(!k){const ct=K.data[0];qt(!!ct,16349);const ht=ct,$=(ht==null?void 0:ht.error)||((bt=ht[0])===null||bt===void 0?void 0:bt.error);if($){at(Ge,`RPC '${e}' stream ${o} received error:`,$);const W=$.status;let Et=function(N){const M=ve[N];if(M!==void 0)return Cv(M)}(W),V=$.message;Et===void 0&&(Et=J.INTERNAL,V="Unknown error status: "+W+" with message "+$.message),k=!0,Q.u_(new lt(Et,V)),w.close()}else at(Ge,`RPC '${e}' stream ${o} received:`,ct),Q.c_(ct)}}),et(g,F0.STAT_EVENT,K=>{K.stat===Qf.PROXY?at(Ge,`RPC '${e}' stream ${o} detected buffering proxy`):K.stat===Qf.NOPROXY&&at(Ge,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Q.a_()},0),Q}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(i=>i===e)}}function kf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(s){return new tA(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,i,a=1e3,o=1.5,h=6e4){this.xi=e,this.timerId=i,this.A_=a,this.R_=o,this.V_=h,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const i=Math.floor(this.m_+this.w_()),a=Math.max(0,Date.now()-this.g_),o=Math.max(0,i-a);o>0&&at("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="PersistentStream";class Hv{constructor(e,i,a,o,h,d,g,v){this.xi=e,this.S_=a,this.D_=o,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new qv(e,i)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,i){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():i&&i.code===J.RESOURCE_EXHAUSTED?(Mi(i.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):i&&i.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(i)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),i=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,o])=>{this.v_===i&&this.z_(a,o)},a=>{e(()=>{const o=new lt(J.UNKNOWN,"Fetching auth token failed: "+a.message);return this.j_(o)})})}z_(e,i){const a=this.G_(this.v_);this.stream=this.H_(e,i),this.stream.e_(()=>{a(()=>this.listener.e_())}),this.stream.n_(()=>{a(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{a(()=>this.j_(o))}),this.stream.onMessage(o=>{a(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return at(f0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return i=>{this.xi.enqueueAndForget(()=>this.v_===e?i():(at(f0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZA extends Hv{constructor(e,i,a,o,h,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}H_(e,i){return this.connection.I_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const i=iA(this.serializer,e),a=function(h){if(!("targetChange"in h))return Tt.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?Tt.min():d.readTime?ri(d.readTime):Tt.min()}(e);return this.listener.Y_(i,a)}Z_(e){const i={};i.database=nd(this.serializer),i.addTarget=function(h,d){let g;const v=d.target;if(g=$f(v)?{documents:aA(h,v)}:{query:lA(h,v).gt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=Iv(h,d.resumeToken);const p=Wf(h,d.expectedCount);p!==null&&(g.expectedCount=p)}else if(d.snapshotVersion.compareTo(Tt.min())>0){g.readTime=Wu(h,d.snapshotVersion.toTimestamp());const p=Wf(h,d.expectedCount);p!==null&&(g.expectedCount=p)}return g}(this.serializer,e);const a=uA(this.serializer,e);a&&(i.labels=a),this.Q_(i)}X_(e){const i={};i.database=nd(this.serializer),i.removeTarget=e,this.Q_(i)}}class JA extends Hv{constructor(e,i,a,o,h,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,i){return this.connection.I_("Write",e,i)}J_(e){return qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const i=sA(e.writeResults,e.commitTime),a=ri(e.commitTime);return this.listener.ra(a,i)}ia(){const e={};e.database=nd(this.serializer),this.Q_(e)}ta(e){const i={streamToken:this.lastStreamToken,writes:e.map(a=>rA(this.serializer,a))};this.Q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{}class tx extends WA{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new lt(J.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,i,a,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.zo(e,td(i,a),o,h,d)).catch(h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new lt(J.UNKNOWN,h.toString())})}Yo(e,i,a,o,h){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Yo(e,td(i,a),o,d,g,h)).catch(d=>{throw d.name==="FirebaseError"?(d.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new lt(J.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class ex{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Mi(i),this.ua=!1):at("OnlineStateTracker",i)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="RemoteStore";class nx{constructor(e,i,a,o,h){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=h,this.Ra.No(d=>{a.enqueueAndForget(async()=>{ms(this)&&(at(hs,"Restarting streams for network reachability change."),await async function(v){const p=At(v);p.da.add(4),await so(p),p.Va.set("Unknown"),p.da.delete(4),await dc(p)}(this))})}),this.Va=new ex(a,o)}}async function dc(s){if(ms(s))for(const e of s.Aa)await e(!0)}async function so(s){for(const e of s.Aa)await e(!1)}function Gv(s,e){const i=At(s);i.Ea.has(e.targetId)||(i.Ea.set(e.targetId,e),jd(i)?Md(i):Ra(i).N_()&&Od(i,e))}function Vd(s,e){const i=At(s),a=Ra(i);i.Ea.delete(e),a.N_()&&Qv(i,e),i.Ea.size===0&&(a.N_()?a.k_():ms(i)&&i.Va.set("Unknown"))}function Od(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Tt.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Ra(s).Z_(e)}function Qv(s,e){s.ma.Ke(e),Ra(s).X_(e)}function Md(s){s.ma=new $1({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Ra(s).start(),s.Va.ca()}function jd(s){return ms(s)&&!Ra(s).O_()&&s.Ea.size>0}function ms(s){return At(s).da.size===0}function Fv(s){s.ma=void 0}async function ix(s){s.Va.set("Online")}async function rx(s){s.Ea.forEach((e,i)=>{Od(s,e)})}async function sx(s,e){Fv(s),jd(s)?(s.Va.Pa(e),Md(s)):s.Va.set("Unknown")}async function ax(s,e,i){if(s.Va.set("Online"),e instanceof Dv&&e.state===2&&e.cause)try{await async function(o,h){const d=h.cause;for(const g of h.targetIds)o.Ea.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ea.delete(g),o.ma.removeTarget(g))}(s,e)}catch(a){at(hs,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await ec(s,a)}else if(e instanceof qu?s.ma.Xe(e):e instanceof Nv?s.ma.ot(e):s.ma.nt(e),!i.isEqual(Tt.min()))try{const a=await Bv(s.localStore);i.compareTo(a)>=0&&await function(h,d){const g=h.ma.It(d);return g.targetChanges.forEach((v,p)=>{if(v.resumeToken.approximateByteSize()>0){const E=h.Ea.get(p);E&&h.Ea.set(p,E.withResumeToken(v.resumeToken,d))}}),g.targetMismatches.forEach((v,p)=>{const E=h.Ea.get(v);if(!E)return;h.Ea.set(v,E.withResumeToken(ze.EMPTY_BYTE_STRING,E.snapshotVersion)),Qv(h,v);const w=new cr(E.target,v,p,E.sequenceNumber);Od(h,w)}),h.remoteSyncer.applyRemoteEvent(g)}(s,i)}catch(a){at(hs,"Failed to raise snapshot:",a),await ec(s,a)}}async function ec(s,e,i){if(!Sa(e))throw e;s.da.add(1),await so(s),s.Va.set("Offline"),i||(i=()=>Bv(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{at(hs,"Retrying IndexedDB access"),await i(),s.da.delete(1),await dc(s)})}function Yv(s,e){return e().catch(i=>ec(s,i,e))}async function mc(s){const e=At(s),i=_r(e);let a=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:yd;for(;lx(e);)try{const o=await qA(e.localStore,a);if(o===null){e.Ia.length===0&&i.k_();break}a=o.batchId,ox(e,o)}catch(o){await ec(e,o)}Kv(e)&&Xv(e)}function lx(s){return ms(s)&&s.Ia.length<10}function ox(s,e){s.Ia.push(e);const i=_r(s);i.N_()&&i.ea&&i.ta(e.mutations)}function Kv(s){return ms(s)&&!_r(s).O_()&&s.Ia.length>0}function Xv(s){_r(s).start()}async function ux(s){_r(s).ia()}async function cx(s){const e=_r(s);for(const i of s.Ia)e.ta(i.mutations)}async function hx(s,e,i){const a=s.Ia.shift(),o=Sd.from(a,e,i);await Yv(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await mc(s)}async function fx(s,e){e&&_r(s).ea&&await async function(a,o){if(function(d){return K1(d)&&d!==J.ABORTED}(o.code)){const h=a.Ia.shift();_r(a).L_(),await Yv(a,()=>a.remoteSyncer.rejectFailedWrite(h.batchId,o)),await mc(a)}}(s,e),Kv(s)&&Xv(s)}async function d0(s,e){const i=At(s);i.asyncQueue.verifyOperationInProgress(),at(hs,"RemoteStore received new credentials");const a=ms(i);i.da.add(3),await so(i),a&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.da.delete(3),await dc(i)}async function dx(s,e){const i=At(s);e?(i.da.delete(2),await dc(i)):e||(i.da.add(2),await so(i),i.Va.set("Unknown"))}function Ra(s){return s.fa||(s.fa=function(i,a,o){const h=At(i);return h.oa(),new ZA(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)}(s.datastore,s.asyncQueue,{e_:ix.bind(null,s),n_:rx.bind(null,s),i_:sx.bind(null,s),Y_:ax.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),jd(s)?Md(s):s.Va.set("Unknown")):(await s.fa.stop(),Fv(s))})),s.fa}function _r(s){return s.ga||(s.ga=function(i,a,o){const h=At(i);return h.oa(),new JA(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:ux.bind(null,s),i_:fx.bind(null,s),na:cx.bind(null,s),ra:hx.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await mc(s)):(await s.ga.stop(),s.Ia.length>0&&(at(hs,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,i,a,o,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=h,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,h){const d=Date.now()+a,g=new Ud(e,i,d,o,h);return g.start(a),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kd(s,e){if(Mi("AsyncQueue",`${e}: ${s}`),Sa(s))return new lt(J.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{static emptySet(e){return new ma(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||mt.comparator(i.key,a.key):(i,a)=>mt.comparator(i.key,a.key),this.keyedMap=Pl(),this.sortedSet=new se(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,a)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof ma)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(!o.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new ma;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.pa=new se(mt.comparator)}track(e){const i=e.doc.key,a=this.pa.get(i);a?e.type!==0&&a.type===3?this.pa=this.pa.insert(i,e):e.type===3&&a.type!==1?this.pa=this.pa.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.pa=this.pa.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.pa=this.pa.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.pa=this.pa.remove(i):e.type===1&&a.type===2?this.pa=this.pa.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.pa=this.pa.insert(i,{type:2,doc:e.doc}):yt(63341,{Vt:e,ya:a}):this.pa=this.pa.insert(i,e)}wa(){const e=[];return this.pa.inorderTraversal((i,a)=>{e.push(a)}),e}}class ba{constructor(e,i,a,o,h,d,g,v,p){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=p}static fromInitialDocuments(e,i,a,o,h){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new ba(e,i,ma.emptySet(i),d,a,o,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class gx{constructor(){this.queries=g0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const o=At(i),h=o.queries;o.queries=g0(),h.forEach((d,g)=>{for(const v of g.Sa)v.onError(a)})})(this,new lt(J.ABORTED,"Firestore shutting down"))}}function g0(){return new ds(s=>pv(s),lc)}async function $v(s,e){const i=At(s);let a=3;const o=e.query;let h=i.queries.get(o);h?!h.Da()&&e.va()&&(a=2):(h=new mx,a=e.va()?0:1);try{switch(a){case 0:h.ba=await i.onListen(o,!0);break;case 1:h.ba=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(d){const g=kd(d,`Initialization of query '${ca(e.query)}' failed`);return void e.onError(g)}i.queries.set(o,h),h.Sa.push(e),e.Fa(i.onlineState),h.ba&&e.Ma(h.ba)&&Ld(i)}async function Zv(s,e){const i=At(s),a=e.query;let o=3;const h=i.queries.get(a);if(h){const d=h.Sa.indexOf(e);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?o=e.va()?0:1:!h.Da()&&e.va()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function px(s,e){const i=At(s);let a=!1;for(const o of e){const h=o.query,d=i.queries.get(h);if(d){for(const g of d.Sa)g.Ma(o)&&(a=!0);d.ba=o}}a&&Ld(i)}function yx(s,e,i){const a=At(s),o=a.queries.get(e);if(o)for(const h of o.Sa)h.onError(i);a.queries.delete(e)}function Ld(s){s.Ca.forEach(e=>{e.next()})}var sd,p0;(p0=sd||(sd={})).xa="default",p0.Cache="cache";class Jv{constructor(e,i,a){this.query=e,this.Oa=i,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=a||{}}Ma(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new ba(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Na?this.La(e)&&(this.Oa.next(e),i=!0):this.ka(e,this.onlineState)&&(this.qa(e),i=!0),this.Ba=e,i}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let i=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),i=!0),i}ka(e,i){if(!e.fromCache||!this.va())return!0;const a=i!=="Offline";return(!this.options.Qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}La(e){if(e.docChanges.length>0)return!0;const i=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}qa(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==sd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e){this.key=e}}class t_{constructor(e){this.key=e}}class vx{constructor(e,i){this.query=e,this.Ha=i,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Vt(),this.mutatedKeys=Vt(),this.Za=yv(e),this.Xa=new ma(this.Za)}get eu(){return this.Ha}tu(e,i){const a=i?i.nu:new m0,o=i?i.Xa:this.Xa;let h=i?i.mutatedKeys:this.mutatedKeys,d=o,g=!1;const v=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,w)=>{const R=o.get(E),k=oc(this.query,w)?w:null,Q=!!R&&this.mutatedKeys.has(R.key),et=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let K=!1;R&&k?R.data.isEqual(k.data)?Q!==et&&(a.track({type:3,doc:k}),K=!0):this.ru(R,k)||(a.track({type:2,doc:k}),K=!0,(v&&this.Za(k,v)>0||p&&this.Za(k,p)<0)&&(g=!0)):!R&&k?(a.track({type:0,doc:k}),K=!0):R&&!k&&(a.track({type:1,doc:R}),K=!0,(v||p)&&(g=!0)),K&&(k?(d=d.add(k),h=et?h.add(E):h.delete(E)):(d=d.delete(E),h=h.delete(E)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const E=this.query.limitType==="F"?d.last():d.first();d=d.delete(E.key),h=h.delete(E.key),a.track({type:1,doc:E})}return{Xa:d,nu:a,Cs:g,mutatedKeys:h}}ru(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const h=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((E,w)=>function(k,Q){const et=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return yt(20277,{Vt:K})}};return et(k)-et(Q)}(E.type,w.type)||this.Za(E.doc,w.doc)),this.iu(a),o=o!=null&&o;const g=i&&!o?this.su():[],v=this.Ya.size===0&&this.current&&!o?1:0,p=v!==this.Ja;return this.Ja=v,d.length!==0||p?{snapshot:new ba(this.query,e.Xa,h,d,e.mutatedKeys,v===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new m0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Vt(),this.Xa.forEach(a=>{this._u(a.key)&&(this.Ya=this.Ya.add(a.key))});const i=[];return e.forEach(a=>{this.Ya.has(a)||i.push(new t_(a))}),this.Ya.forEach(a=>{e.has(a)||i.push(new Wv(a))}),i}au(e){this.Ha=e.$s,this.Ya=Vt();const i=this.tu(e.documents);return this.applyChanges(i,!0)}uu(){return ba.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Pd="SyncEngine";class _x{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class bx{constructor(e){this.key=e,this.cu=!1}}class Ex{constructor(e,i,a,o,h,d){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new ds(g=>pv(g),lc),this.Pu=new Map,this.Tu=new Set,this.Iu=new se(mt.comparator),this.Eu=new Map,this.du=new Cd,this.Au={},this.Ru=new Map,this.Vu=_a.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function Tx(s,e,i=!0){const a=a_(s);let o;const h=a.hu.get(e);return h?(a.sharedClientState.addLocalQueryTarget(h.targetId),o=h.view.uu()):o=await e_(a,e,i,!0),o}async function Ax(s,e){const i=a_(s);await e_(i,e,!0,!1)}async function e_(s,e,i,a){const o=await HA(s.localStore,ii(e)),h=o.targetId,d=s.sharedClientState.addLocalQueryTarget(h,i);let g;return a&&(g=await xx(s,e,h,d==="current",o.resumeToken)),s.isPrimaryClient&&i&&Gv(s.remoteStore,o),g}async function xx(s,e,i,a,o){s.fu=(w,R,k)=>async function(et,K,bt,ct){let ht=K.view.tu(bt);ht.Cs&&(ht=await o0(et.localStore,K.query,!1).then(({documents:V})=>K.view.tu(V,ht)));const $=ct&&ct.targetChanges.get(K.targetId),W=ct&&ct.targetMismatches.get(K.targetId)!=null,Et=K.view.applyChanges(ht,et.isPrimaryClient,$,W);return v0(et,K.targetId,Et.ou),Et.snapshot}(s,w,R,k);const h=await o0(s.localStore,e,!0),d=new vx(e,h.$s),g=d.tu(h.documents),v=ro.createSynthesizedTargetChangeForCurrentChange(i,a&&s.onlineState!=="Offline",o),p=d.applyChanges(g,s.isPrimaryClient,v);v0(s,i,p.ou);const E=new _x(e,i,d);return s.hu.set(e,E),s.Pu.has(i)?s.Pu.get(i).push(e):s.Pu.set(i,[e]),p.snapshot}async function Sx(s,e,i){const a=At(s),o=a.hu.get(e),h=a.Pu.get(o.targetId);if(h.length>1)return a.Pu.set(o.targetId,h.filter(d=>!lc(d,e))),void a.hu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await id(a.localStore,o.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(o.targetId),i&&Vd(a.remoteStore,o.targetId),ad(a,o.targetId)}).catch(xa)):(ad(a,o.targetId),await id(a.localStore,o.targetId,!0))}async function wx(s,e){const i=At(s),a=i.hu.get(e),o=i.Pu.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Vd(i.remoteStore,a.targetId))}async function Rx(s,e,i){const a=Mx(s);try{const o=await function(d,g){const v=At(d),p=Se.now(),E=g.reduce((k,Q)=>k.add(Q.key),Vt());let w,R;return v.persistence.runTransaction("Locally write mutations","readwrite",k=>{let Q=ji(),et=Vt();return v.Bs.getEntries(k,E).next(K=>{Q=K,Q.forEach((bt,ct)=>{ct.isValidDocument()||(et=et.add(bt))})}).next(()=>v.localDocuments.getOverlayedDocuments(k,Q)).next(K=>{w=K;const bt=[];for(const ct of g){const ht=H1(ct,w.get(ct.key).overlayedDocument);ht!=null&&bt.push(new Ar(ct.key,ht,ov(ht.value.mapValue),Nn.exists(!0)))}return v.mutationQueue.addMutationBatch(k,p,bt,g)}).next(K=>{R=K;const bt=K.applyToLocalDocumentSet(w,et);return v.documentOverlayCache.saveOverlays(k,K.batchId,bt)})}).then(()=>({batchId:R.batchId,changes:_v(w)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),function(d,g,v){let p=d.Au[d.currentUser.toKey()];p||(p=new se(Rt)),p=p.insert(g,v),d.Au[d.currentUser.toKey()]=p}(a,o.batchId,i),await ao(a,o.changes),await mc(a.remoteStore)}catch(o){const h=kd(o,"Failed to persist write");i.reject(h)}}async function n_(s,e){const i=At(s);try{const a=await zA(i.localStore,e);e.targetChanges.forEach((o,h)=>{const d=i.Eu.get(h);d&&(qt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?qt(d.cu,14607):o.removedDocuments.size>0&&(qt(d.cu,42227),d.cu=!1))}),await ao(i,a,e)}catch(a){await xa(a)}}function y0(s,e,i){const a=At(s);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.hu.forEach((h,d)=>{const g=d.view.Fa(e);g.snapshot&&o.push(g.snapshot)}),function(d,g){const v=At(d);v.onlineState=g;let p=!1;v.queries.forEach((E,w)=>{for(const R of w.Sa)R.Fa(g)&&(p=!0)}),p&&Ld(v)}(a.eventManager,e),o.length&&a.lu.Y_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function Cx(s,e,i){const a=At(s);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Eu.get(e),h=o&&o.key;if(h){let d=new se(mt.comparator);d=d.insert(h,Fe.newNoDocument(h,Tt.min()));const g=Vt().add(h),v=new hc(Tt.min(),new Map,new se(Rt),d,g);await n_(a,v),a.Iu=a.Iu.remove(h),a.Eu.delete(e),zd(a)}else await id(a.localStore,e,!1).then(()=>ad(a,e,i)).catch(xa)}async function Nx(s,e){const i=At(s),a=e.batch.batchId;try{const o=await PA(i.localStore,e);r_(i,a,null),i_(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await ao(i,o)}catch(o){await xa(o)}}async function Dx(s,e,i){const a=At(s);try{const o=await function(d,g){const v=At(d);return v.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let E;return v.mutationQueue.lookupMutationBatch(p,g).next(w=>(qt(w!==null,37113),E=w.keys(),v.mutationQueue.removeMutationBatch(p,w))).next(()=>v.mutationQueue.performConsistencyCheck(p)).next(()=>v.documentOverlayCache.removeOverlaysForBatchId(p,E,g)).next(()=>v.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E)).next(()=>v.localDocuments.getDocuments(p,E))})}(a.localStore,e);r_(a,e,i),i_(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await ao(a,o)}catch(o){await xa(o)}}function i_(s,e){(s.Ru.get(e)||[]).forEach(i=>{i.resolve()}),s.Ru.delete(e)}function r_(s,e,i){const a=At(s);let o=a.Au[a.currentUser.toKey()];if(o){const h=o.get(e);h&&(i?h.reject(i):h.resolve(),o=o.remove(e)),a.Au[a.currentUser.toKey()]=o}}function ad(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Pu.get(e))s.hu.delete(a),i&&s.lu.gu(a,i);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(a=>{s.du.containsKey(a)||s_(s,a)})}function s_(s,e){s.Tu.delete(e.path.canonicalString());const i=s.Iu.get(e);i!==null&&(Vd(s.remoteStore,i),s.Iu=s.Iu.remove(e),s.Eu.delete(i),zd(s))}function v0(s,e,i){for(const a of i)a instanceof Wv?(s.du.addReference(a.key,e),Ix(s,a)):a instanceof t_?(at(Pd,"Document no longer in limbo: "+a.key),s.du.removeReference(a.key,e),s.du.containsKey(a.key)||s_(s,a.key)):yt(19791,{pu:a})}function Ix(s,e){const i=e.key,a=i.path.canonicalString();s.Iu.get(i)||s.Tu.has(a)||(at(Pd,"New document in limbo: "+i),s.Tu.add(a),zd(s))}function zd(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const i=new mt(ee.fromString(e)),a=s.Vu.next();s.Eu.set(a,new bx(i)),s.Iu=s.Iu.insert(i,a),Gv(s.remoteStore,new cr(ii(Td(i.path)),a,"TargetPurposeLimboResolution",rc.le))}}async function ao(s,e,i){const a=At(s),o=[],h=[],d=[];a.hu.isEmpty()||(a.hu.forEach((g,v)=>{d.push(a.fu(v,e,i).then(p=>{var E;if((p||i)&&a.isPrimaryClient){const w=p?!p.fromCache:(E=i==null?void 0:i.targetChanges.get(v.targetId))===null||E===void 0?void 0:E.current;a.sharedClientState.updateQueryState(v.targetId,w?"current":"not-current")}if(p){o.push(p);const w=Dd.Rs(v.targetId,p);h.push(w)}}))}),await Promise.all(d),a.lu.Y_(o),await async function(v,p){const E=At(v);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>tt.forEach(p,R=>tt.forEach(R.ds,k=>E.persistence.referenceDelegate.addReference(w,R.targetId,k)).next(()=>tt.forEach(R.As,k=>E.persistence.referenceDelegate.removeReference(w,R.targetId,k)))))}catch(w){if(!Sa(w))throw w;at(Id,"Failed to update sequence numbers: "+w)}for(const w of p){const R=w.targetId;if(!w.fromCache){const k=E.xs.get(R),Q=k.snapshotVersion,et=k.withLastLimboFreeSnapshotVersion(Q);E.xs=E.xs.insert(R,et)}}}(a.localStore,h))}async function Vx(s,e){const i=At(s);if(!i.currentUser.isEqual(e)){at(Pd,"User change. New user:",e.toKey());const a=await zv(i.localStore,e);i.currentUser=e,function(h,d){h.Ru.forEach(g=>{g.forEach(v=>{v.reject(new lt(J.CANCELLED,d))})}),h.Ru.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await ao(i,a.ks)}}function Ox(s,e){const i=At(s),a=i.Eu.get(e);if(a&&a.cu)return Vt().add(a.key);{let o=Vt();const h=i.Pu.get(e);if(!h)return o;for(const d of h){const g=i.hu.get(d);o=o.unionWith(g.view.eu)}return o}}function a_(s){const e=At(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=n_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ox.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Cx.bind(null,e),e.lu.Y_=px.bind(null,e.eventManager),e.lu.gu=yx.bind(null,e.eventManager),e}function Mx(s){const e=At(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Nx.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dx.bind(null,e),e}class nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,i){return null}Cu(e,i){return null}Du(e){return LA(this.persistence,new jA,e.initialUser,this.serializer)}Su(e){return new Pv(Nd.fi,this.serializer)}bu(e){return new QA}async terminate(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nc.provider={build:()=>new nc};class jx extends nc{constructor(e){super(),this.cacheSizeBytes=e}vu(e,i){qt(this.persistence.referenceDelegate instanceof tc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new bA(a,e.asyncQueue,i)}Su(e){const i=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new Pv(a=>tc.fi(a,i),this.serializer)}}class ld{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>y0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vx.bind(null,this.syncEngine),await dx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gx}()}createDatastore(e){const i=fc(e.databaseInfo.databaseId),a=function(h){return new $A(h)}(e.databaseInfo);return function(h,d,g,v){return new tx(h,d,g,v)}(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return function(a,o,h,d,g){return new nx(a,o,h,d,g)}(this.localStore,this.datastore,e.asyncQueue,i=>y0(this.syncEngine,i,0),function(){return h0.C()?new h0:new FA}())}createSyncEngine(e,i){return function(o,h,d,g,v,p,E){const w=new Ex(o,h,d,g,v,p);return E&&(w.mu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await async function(o){const h=At(o);at(hs,"RemoteStore shutting down."),h.da.add(5),await so(h),h.Ra.shutdown(),h.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}ld.provider={build:()=>new ld};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,i){setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="FirestoreClient";class Ux{constructor(e,i,a,o,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=Qe.UNAUTHENTICATED,this.clientId=J0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(a,async d=>{at(br,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(a,d=>(at(br,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=kd(i,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function Lf(s,e){s.asyncQueue.verifyOperationInProgress(),at(br,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let a=i.initialUser;s.setCredentialChangeListener(async o=>{a.isEqual(o)||(await zv(e.localStore,o),a=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function _0(s,e){s.asyncQueue.verifyOperationInProgress();const i=await kx(s);at(br,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener(a=>d0(e.remoteStore,a)),s.setAppCheckTokenChangeListener((a,o)=>d0(e.remoteStore,o)),s._onlineComponents=e}async function kx(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){at(br,"Using user provided OfflineComponentProvider");try{await Lf(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;ga("Error using user provided cache. Falling back to memory cache: "+i),await Lf(s,new nc)}}else at(br,"Using default OfflineComponentProvider"),await Lf(s,new jx(void 0));return s._offlineComponents}async function o_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(at(br,"Using user provided OnlineComponentProvider"),await _0(s,s._uninitializedComponentsProvider._online)):(at(br,"Using default OnlineComponentProvider"),await _0(s,new ld))),s._onlineComponents}function Lx(s){return o_(s).then(e=>e.syncEngine)}async function u_(s){const e=await o_(s),i=e.eventManager;return i.onListen=Tx.bind(null,e.syncEngine),i.onUnlisten=Sx.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=Ax.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=wx.bind(null,e.syncEngine),i}function Px(s,e,i={}){const a=new Ii;return s.asyncQueue.enqueueAndForget(async()=>function(h,d,g,v,p){const E=new l_({next:R=>{E.xu(),d.enqueueAndForget(()=>Zv(h,w));const k=R.docs.has(g);!k&&R.fromCache?p.reject(new lt(J.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&R.fromCache&&v&&v.source==="server"?p.reject(new lt(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(R)},error:R=>p.reject(R)}),w=new Jv(Td(g.path),E,{includeMetadataChanges:!0,Qa:!0});return $v(h,w)}(await u_(s),s.asyncQueue,e,i,a)),a.promise}function zx(s,e,i={}){const a=new Ii;return s.asyncQueue.enqueueAndForget(async()=>function(h,d,g,v,p){const E=new l_({next:R=>{E.xu(),d.enqueueAndForget(()=>Zv(h,w)),R.fromCache&&v.source==="server"?p.reject(new lt(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(R)},error:R=>p.reject(R)}),w=new Jv(g,E,{includeMetadataChanges:!0,Qa:!0});return $v(h,w)}(await u_(s),s.asyncQueue,e,i,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(s,e,i){if(!i)throw new lt(J.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Bx(s,e,i,a){if(e===!0&&a===!0)throw new lt(J.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function E0(s){if(!mt.isDocumentKey(s))throw new lt(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function T0(s){if(mt.isDocumentKey(s))throw new lt(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function gc(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":yt(12329,{type:typeof s})}function Ln(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new lt(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=gc(s);throw new lt(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="firestore.googleapis.com",A0=!0;class x0{constructor(e){var i,a;if(e.host===void 0){if(e.ssl!==void 0)throw new lt(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=f_,this.ssl=A0}else this.host=e.host,this.ssl=(i=e.ssl)!==null&&i!==void 0?i:A0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Lv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vA)throw new lt(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Bx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c_((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new lt(J.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new lt(J.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new lt(J.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,o){return a.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pc{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new lt(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new KT;switch(a.type){case"firstParty":return new JT(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new lt(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const a=b0.get(i);a&&(at("ComponentProvider","Removing Datastore"),b0.delete(i),a.terminate())}(this),Promise.resolve()}}function qx(s,e,i,a={}){var o;s=Ln(s,pc);const h=md(e),d=s._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:s._getEmulatorOptions()}),v=`${e}:${i}`;h&&(AE(`https://${v}`),RE("Firestore",!0)),d.host!==f_&&d.host!==v&&ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},d),{host:v,ssl:h,emulatorOptions:a});if(!Qu(p,g)&&(s._setSettings(p),a.mockUserToken)){let E,w;if(typeof a.mockUserToken=="string")E=a.mockUserToken,w=Qe.MOCK_USER;else{E=xE(a.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const R=a.mockUserToken.sub||a.mockUserToken.user_id;if(!R)throw new lt(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Qe(R)}s._authCredentials=new XT(new $0(E,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class Ze{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ze(this.firestore,e,this._key)}}class mr extends gs{constructor(e,i,a){super(e,i,Td(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new mt(e))}withConverter(e){return new mr(this.firestore,e,this._path)}}function Er(s,e,...i){if(s=Vi(s),h_("collection","path",e),s instanceof pc){const a=ee.fromString(e,...i);return T0(a),new mr(s,null,a)}{if(!(s instanceof Ze||s instanceof mr))throw new lt(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ee.fromString(e,...i));return T0(a),new mr(s.firestore,null,a)}}function us(s,e,...i){if(s=Vi(s),arguments.length===1&&(e=J0.newId()),h_("doc","path",e),s instanceof pc){const a=ee.fromString(e,...i);return E0(a),new Ze(s,null,new mt(a))}{if(!(s instanceof Ze||s instanceof mr))throw new lt(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ee.fromString(e,...i));return E0(a),new Ze(s.firestore,s instanceof mr?s.converter:null,new mt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="AsyncQueue";class w0{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new qv(this,"async_queue_retry"),this.rc=()=>{const a=kf();a&&at(S0,"Visibility state changed to "+a.visibilityState),this.x_.b_()},this.sc=e;const i=kf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const i=kf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const i=new Ii;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Sa(e))throw e;at(S0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const i=this.sc.then(()=>(this.ec=!0,e().catch(a=>{throw this.Xu=a,this.ec=!1,Mi("INTERNAL UNHANDLED ERROR: ",R0(a)),a}).then(a=>(this.ec=!1,a))));return this.sc=i,i}enqueueAfterDelay(e,i,a){this.oc(),this.nc.indexOf(e)>-1&&(i=0);const o=Ud.createAndSchedule(this,e,i,a,h=>this.uc(h));return this.Zu.push(o),o}oc(){this.Xu&&yt(47125,{cc:R0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const i of this.Zu)if(i.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this.Zu)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const i=this.Zu.indexOf(e);this.Zu.splice(i,1)}}function R0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class ps extends pc{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new w0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new w0(e),this._firestoreClient=void 0,await e}}}function Hx(s,e){const i=typeof s=="object"?s:kT(),a=typeof s=="string"?s:Xu,o=VT(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const h=EE("firestore");h&&qx(o,...h)}return o}function Bd(s){if(s._terminated)throw new lt(J.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||Gx(s),s._firestoreClient}function Gx(s){var e,i,a;const o=s._freezeSettings(),h=function(g,v,p,E){return new d1(g,v,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,c_(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((a=o.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new Ux(s._authCredentials,s._appCheckCredentials,s._queue,h,s._componentsProvider&&function(g){const v=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(v),_online:v}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ea(ze.fromBase64String(e))}catch(i){throw new lt(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Ea(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new lt(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new lt(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new lt(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this._values=(e||[]).map(i=>i)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,o){if(a.length!==o.length)return!1;for(let h=0;h<a.length;++h)if(a[h]!==o[h])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=/^__.*__$/;class Fx{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new Ar(e,this.data,this.fieldMask,i,this.fieldTransforms):new io(e,this.data,i,this.fieldTransforms)}}class d_{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return new Ar(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function m_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw yt(40011,{Ic:s})}}class Gd{constructor(e,i,a,o,h,d){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,h===void 0&&this.Ec(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Gd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.dc({path:a,Rc:!1});return o.Vc(e),o}mc(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.dc({path:a,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return ic(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(m_(this.Ic)&&Qx.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class Yx{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||fc(e)}bc(e,i,a,o=!1){return new Gd({Ic:e,methodName:i,wc:a,path:Pe.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _c(s){const e=s._freezeSettings(),i=fc(s._databaseId);return new Yx(s._databaseId,!!e.ignoreUndefinedProperties,i)}function g_(s,e,i,a,o,h={}){const d=s.bc(h.merge||h.mergeFields?2:0,e,i,o);Fd("Data must be an object, but it was:",d,a);const g=p_(a,d);let v,p;if(h.merge)v=new mn(d.fieldMask),p=d.fieldTransforms;else if(h.mergeFields){const E=[];for(const w of h.mergeFields){const R=od(e,w,i);if(!d.contains(R))throw new lt(J.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);v_(E,R)||E.push(R)}v=new mn(E),p=d.fieldTransforms.filter(w=>v.covers(w.field))}else v=null,p=d.fieldTransforms;return new Fx(new nn(g),v,p)}class bc extends vc{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bc}}class Qd extends vc{_toFieldTransform(e){return new P1(e.path,new to)}isEqual(e){return e instanceof Qd}}function Kx(s,e,i,a){const o=s.bc(1,e,i);Fd("Data must be an object, but it was:",o,a);const h=[],d=nn.empty();Tr(a,(v,p)=>{const E=Yd(e,v,i);p=Vi(p);const w=o.mc(E);if(p instanceof bc)h.push(E);else{const R=lo(p,w);R!=null&&(h.push(E),d.set(E,R))}});const g=new mn(h);return new d_(d,g,o.fieldTransforms)}function Xx(s,e,i,a,o,h){const d=s.bc(1,e,i),g=[od(e,a,i)],v=[o];if(h.length%2!=0)throw new lt(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<h.length;R+=2)g.push(od(e,h[R])),v.push(h[R+1]);const p=[],E=nn.empty();for(let R=g.length-1;R>=0;--R)if(!v_(p,g[R])){const k=g[R];let Q=v[R];Q=Vi(Q);const et=d.mc(k);if(Q instanceof bc)p.push(k);else{const K=lo(Q,et);K!=null&&(p.push(k),E.set(k,K))}}const w=new mn(p);return new d_(E,w,d.fieldTransforms)}function $x(s,e,i,a=!1){return lo(i,s.bc(a?4:3,e))}function lo(s,e){if(y_(s=Vi(s)))return Fd("Unsupported field value:",e,s),p_(s,e);if(s instanceof vc)return function(a,o){if(!m_(o.Ic))throw o.gc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${a._methodName}() is not currently supported inside arrays`);const h=a._toFieldTransform(o);h&&o.fieldTransforms.push(h)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(a,o){const h=[];let d=0;for(const g of a){let v=lo(g,o.fc(d));v==null&&(v={nullValue:"NULL_VALUE"}),h.push(v),d++}return{arrayValue:{values:h}}}(s,e)}return function(a,o){if((a=Vi(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return U1(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const h=Se.fromDate(a);return{timestampValue:Wu(o.serializer,h)}}if(a instanceof Se){const h=new Se(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Wu(o.serializer,h)}}if(a instanceof qd)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Ea)return{bytesValue:Iv(o.serializer,a._byteString)};if(a instanceof Ze){const h=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(h))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Rd(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Hd)return function(d,g){return{mapValue:{fields:{[av]:{stringValue:lv},[$u]:{arrayValue:{values:d.toArray().map(p=>{if(typeof p!="number")throw g.gc("VectorValues must only contain numeric values.");return Ad(g.serializer,p)})}}}}}}(a,o);throw o.gc(`Unsupported field value: ${gc(a)}`)}(s,e)}function p_(s,e){const i={};return tv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tr(s,(a,o)=>{const h=lo(o,e.Ac(a));h!=null&&(i[a]=h)}),{mapValue:{fields:i}}}function y_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Se||s instanceof qd||s instanceof Ea||s instanceof Ze||s instanceof vc||s instanceof Hd)}function Fd(s,e,i){if(!y_(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const a=gc(i);throw a==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+a)}}function od(s,e,i){if((e=Vi(e))instanceof yc)return e._internalPath;if(typeof e=="string")return Yd(s,e);throw ic("Field path arguments must be of type string or ",s,!1,void 0,i)}const Zx=new RegExp("[~\\*/\\[\\]]");function Yd(s,e,i){if(e.search(Zx)>=0)throw ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new yc(...e.split("."))._internalPath}catch{throw ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function ic(s,e,i,a,o){const h=a&&!a.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(h||d)&&(v+=" (found",h&&(v+=` in field ${a}`),d&&(v+=` in document ${o}`),v+=")"),new lt(J.INVALID_ARGUMENT,g+s+v)}function v_(s,e){return s.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,i,a,o,h){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Jx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(Ec("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class Jx extends __{data(){return super.data()}}function Ec(s,e){return typeof e=="string"?Yd(s,e):e instanceof yc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new lt(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kd{}class b_ extends Kd{}function ud(s,e,...i){let a=[];e instanceof Kd&&a.push(e),a=a.concat(i),function(h){const d=h.filter(v=>v instanceof Xd).length,g=h.filter(v=>v instanceof Tc).length;if(d>1||d>0&&g>0)throw new lt(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const o of a)s=o._apply(s);return s}class Tc extends b_{constructor(e,i,a){super(),this._field=e,this._op=i,this._value=a,this.type="where"}static _create(e,i,a){return new Tc(e,i,a)}_apply(e){const i=this._parse(e);return E_(e._query,i),new gs(e.firestore,e.converter,Zf(e._query,i))}_parse(e){const i=_c(e.firestore);return function(h,d,g,v,p,E,w){let R;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new lt(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){D0(w,E);const Q=[];for(const et of w)Q.push(N0(v,h,et));R={arrayValue:{values:Q}}}else R=N0(v,h,w)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||D0(w,E),R=$x(g,d,w,E==="in"||E==="not-in");return _e.create(p,E,R)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function cd(s,e,i){const a=e,o=Ec("where",s);return Tc._create(o,a,i)}class Xd extends Kd{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Xd(e,i)}_parse(e){const i=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return i.length===1?i[0]:kn.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(o,h){let d=o;const g=h.getFlattenedFilters();for(const v of g)E_(d,v),d=Zf(d,v)}(e._query,i),new gs(e.firestore,e.converter,Zf(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $d extends b_{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new $d(e,i)}_apply(e){const i=function(o,h,d){if(o.startAt!==null)throw new lt(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new lt(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wl(h,d)}(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,function(o,h){const d=o.explicitOrderBy.concat([h]);return new wa(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,i))}}function C0(s,e="asc"){const i=e,a=Ec("orderBy",s);return $d._create(a,i)}function N0(s,e,i){if(typeof(i=Vi(i))=="string"){if(i==="")throw new lt(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gv(e)&&i.indexOf("/")!==-1)throw new lt(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(ee.fromString(i));if(!mt.isDocumentKey(a))throw new lt(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Hy(s,new mt(a))}if(i instanceof Ze)return Hy(s,i._key);throw new lt(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gc(i)}.`)}function D0(s,e){if(!Array.isArray(s)||s.length===0)throw new lt(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E_(s,e){const i=function(o,h){for(const d of o)for(const g of d.getFlattenedFilters())if(h.indexOf(g.op)>=0)return g.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new lt(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new lt(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class tS{convertValue(e,i="none"){switch(vr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw yt(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return Tr(e,(o,h)=>{a[o]=this.convertValue(h,i)}),a}convertVectorValue(e){var i,a,o;const h=(o=(a=(i=e.fields)===null||i===void 0?void 0:i[$u].arrayValue)===null||a===void 0?void 0:a.values)===null||o===void 0?void 0:o.map(d=>fe(d.doubleValue));return new Hd(h)}convertGeoPoint(e){return new qd(fe(e.latitude),fe(e.longitude))}convertArray(e,i){return(e.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(e,i){switch(i){case"previous":const a=ac(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const i=pr(e);return new Se(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=ee.fromString(e);qt(kv(a),9688,{name:e});const o=new Zl(a.get(1),a.get(3)),h=new mt(a.popFirst(5));return o.isEqual(i)||Mi(`Document ${h} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(s,e,i){let a;return a=s?s.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class A_ extends __{constructor(e,i,a,o,h,d){super(e,i,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Hu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(Ec("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}}class Hu extends A_{data(e={}){return super.data(e)}}class eS{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new Bl(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(a=>{e.call(i,new Hu(this._firestore,this._userDataWriter,a.key,a,new Bl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new lt(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,h){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>{const v=new Hu(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Bl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:v,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>h||g.type!==3).map(g=>{const v=new Hu(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Bl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return g.type!==0&&(p=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),E=d.indexOf(g.doc.key)),{type:nS(g.type),doc:v,oldIndex:p,newIndex:E}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function nS(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return yt(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(s){s=Ln(s,Ze);const e=Ln(s.firestore,ps);return Px(Bd(e),s._key).then(i=>lS(e,s,i))}class x_ extends tS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ea(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,i)}}function fs(s){s=Ln(s,gs);const e=Ln(s.firestore,ps),i=Bd(e),a=new x_(e);return Wx(s._query),zx(i,s._query).then(o=>new eS(e,a,s,o))}function hd(s,e,i){s=Ln(s,Ze);const a=Ln(s.firestore,ps),o=T_(s.converter,e);return Ac(a,[g_(_c(a),"setDoc",s._key,o,s.converter!==null,i).toMutation(s._key,Nn.none())])}function rS(s,e,i,...a){s=Ln(s,Ze);const o=Ln(s.firestore,ps),h=_c(o);let d;return d=typeof(e=Vi(e))=="string"||e instanceof yc?Xx(h,"updateDoc",s._key,e,i,a):Kx(h,"updateDoc",s._key,e),Ac(o,[d.toMutation(s._key,Nn.exists(!0))])}function sS(s){return Ac(Ln(s.firestore,ps),[new xd(s._key,Nn.none())])}function aS(s,e){const i=Ln(s.firestore,ps),a=us(s),o=T_(s.converter,e);return Ac(i,[g_(_c(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,Nn.exists(!1))]).then(()=>a)}function Ac(s,e){return function(a,o){const h=new Ii;return a.asyncQueue.enqueueAndForget(async()=>Rx(await Lx(a),o,h)),h.promise}(Bd(s),e)}function lS(s,e,i){const a=i.docs.get(e._key),o=new x_(s);return new A_(s,o,e._key,a,new Bl(i.hasPendingWrites,i.fromCache),e.converter)}function oS(){return new Qd("serverTimestamp")}(function(e,i=!0){(function(o){Aa=o})(UT),Yu(new Yl("firestore",(a,{instanceIdentifier:o,options:h})=>{const d=a.getProvider("app").getImmediate(),g=new ps(new $T(a.getProvider("auth-internal")),new WT(d,a.getProvider("app-check-internal")),function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new lt(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(p.options.projectId,E)}(d,o),d);return h=Object.assign({useFetchStreams:i},h),g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),da(Iy,Vy,e),da(Iy,Vy,"esm2017")})();var uS="firebase",cS="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */da(uS,cS,"app");const hS={apiKey:"AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",authDomain:"summery-23833.firebaseapp.com",projectId:"summery-23833",storageBucket:"summery-23833.firebasestorage.app",messagingSenderId:"123456789",appId:"1:123456789:web:abcdefghijklmnop"},fS=z0(hS),rn=Hx(fS),S_="https://api.github.com",dS="harukaze1216",mS="youtube-bgm-research";function gS(){return localStorage.getItem("github_token")||null}function w_(s){return{Authorization:`token ${s}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"}}async function pS(s){const e=gS();if(!e)throw new Error("GitHub Personal Access Tokenが設定されていません。設定ページでトークンを設定してください。");try{const i=yS(s.type,s.severity),a=vS(s),o=await fetch(`${S_}/repos/${dS}/${mS}/issues`,{method:"POST",headers:w_(e),body:JSON.stringify({title:s.title,body:a,labels:i})});if(!o.ok){const d=await o.json();throw new Error(`GitHub API Error: ${d.message||o.statusText}`)}const h=await o.json();return{success:!0,issue:{number:h.number,title:h.title,url:h.html_url,state:h.state,createdAt:h.created_at}}}catch(i){throw console.error("GitHub Issue作成エラー:",i),i}}function yS(s,e){const i=[];switch(s){case"bug":i.push("bug");break;case"feature":i.push("enhancement");break;case"question":i.push("question");break;default:i.push("feedback")}switch(e){case"critical":i.push("priority: critical");break;case"high":i.push("priority: high");break;case"medium":i.push("priority: medium");break;case"low":i.push("priority: low");break}return i.push("user-reported"),i}function vS(s){const i=new Date().toLocaleString("ja-JP",{timeZone:"Asia/Tokyo",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return`## 概要
${s.body}

## Issue詳細

**種別:** ${_S(s.type)}  
**重要度:** ${bS(s.severity)}  
**投稿日時:** ${i}

## 環境情報

**ブラウザ:** ${s.browserInfo||"Unknown"}  
**User Agent:** ${s.userAgent||"Unknown"}  
**URL:** ${window.location.href}

## 再現手順

${s.reproductionSteps||"未記入"}

## 期待する動作

${s.expectedBehavior||"未記入"}

## 実際の動作

${s.actualBehavior||"未記入"}

## 追加情報

${s.additionalInfo||"特になし"}

---
*この Issue は YouTube BGM チャンネル分析アプリから自動投稿されました*`}function _S(s){switch(s){case"bug":return"🐛 バグ報告";case"feature":return"✨ 機能要望";case"question":return"❓ 質問・サポート";default:return"💬 フィードバック"}}function bS(s){switch(s){case"critical":return"🚨 緊急";case"high":return"🔴 高";case"medium":return"🟡 中";case"low":return"🟢 低";default:return"🔵 通常"}}function ES(){const s=navigator.userAgent;let e="Unknown",i="Unknown";if(s.includes("Chrome")){e="Chrome";const a=s.match(/Chrome\/([0-9.]+)/);i=a?a[1]:"Unknown"}else if(s.includes("Firefox")){e="Firefox";const a=s.match(/Firefox\/([0-9.]+)/);i=a?a[1]:"Unknown"}else if(s.includes("Safari")){e="Safari";const a=s.match(/Version\/([0-9.]+)/);i=a?a[1]:"Unknown"}else if(s.includes("Edge")){e="Edge";const a=s.match(/Edge\/([0-9.]+)/);i=a?a[1]:"Unknown"}return`${e} ${i}`}function I0(s){return s&&s.trim()?(localStorage.setItem("github_token",s.trim()),!0):(localStorage.removeItem("github_token"),!1)}function R_(){const s=localStorage.getItem("github_token");return s&&s.trim().length>0}async function TS(s){try{return(await fetch(`${S_}/user`,{headers:w_(s)})).ok}catch(e){return console.error("GitHub Token validation error:",e),!1}}const AS=({onClose:s})=>{const[e,i]=kt.useState({title:"",body:"",type:"bug",severity:"medium",reproductionSteps:"",expectedBehavior:"",actualBehavior:"",additionalInfo:""}),[a,o]=kt.useState(!1),[h,d]=kt.useState(null),[g,v]=kt.useState(!1),p=(k,Q)=>{i(et=>({...et,[k]:Q}))},E=async k=>{if(k.preventDefault(),!e.title.trim()){alert("タイトルを入力してください");return}if(!e.body.trim()){alert("内容を入力してください");return}if(!R_()){alert("GitHub Personal Access Tokenが設定されていません。設定ページでトークンを設定してください。");return}o(!0),d(null);try{const Q={...e,browserInfo:ES(),userAgent:navigator.userAgent},et=await pS(Q);d({success:!0,message:"Issueが正常に作成されました！",issue:et.issue}),i({title:"",body:"",type:"bug",severity:"medium",reproductionSteps:"",expectedBehavior:"",actualBehavior:"",additionalInfo:""})}catch(Q){console.error("Issue作成エラー:",Q),d({success:!1,message:`エラーが発生しました: ${Q.message}`})}finally{o(!1)}},w=[{value:"bug",label:"🐛 バグ報告",description:"予期しない動作や不具合"},{value:"feature",label:"✨ 機能要望",description:"新機能や改善の提案"},{value:"question",label:"❓ 質問・サポート",description:"使い方やその他の質問"}],R=[{value:"low",label:"🟢 低",description:"軽微な問題"},{value:"medium",label:"🟡 中",description:"通常の問題"},{value:"high",label:"🔴 高",description:"重要な問題"},{value:"critical",label:"🚨 緊急",description:"アプリが使用不可"}];return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[b.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 p-6",children:[b.jsxs("div",{className:"flex justify-between items-center",children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"🐛 不具合・要望を報告"}),b.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:"×"})]}),b.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"報告はGitHub Issuesに自動投稿されます"})]}),b.jsxs("form",{onSubmit:E,className:"p-6 space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"種別"}),b.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:w.map(k=>b.jsxs("label",{className:`cursor-pointer p-3 rounded-lg border-2 transition-colors ${e.type===k.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[b.jsx("input",{type:"radio",name:"type",value:k.value,checked:e.type===k.value,onChange:Q=>p("type",Q.target.value),className:"sr-only"}),b.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:k.label}),b.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:k.description})]},k.value))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"重要度"}),b.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:R.map(k=>b.jsxs("label",{className:`cursor-pointer p-2 rounded-lg border-2 transition-colors ${e.severity===k.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[b.jsx("input",{type:"radio",name:"severity",value:k.value,checked:e.severity===k.value,onChange:Q=>p("severity",Q.target.value),className:"sr-only"}),b.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:k.label}),b.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:k.description})]},k.value))})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"タイトル *"}),b.jsx("input",{type:"text",value:e.title,onChange:k=>p("title",k.target.value),className:"input-field",placeholder:"問題や要望を簡潔に記述してください",required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"内容 *"}),b.jsx("textarea",{value:e.body,onChange:k=>p("body",k.target.value),className:"input-field h-32 resize-none",placeholder:"問題の詳細や要望内容を具体的に記述してください",required:!0})]}),b.jsx("div",{children:b.jsx("button",{type:"button",onClick:()=>v(!g),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium",children:g?"▼ 詳細項目を非表示":"▶ 詳細項目を表示（任意）"})}),g&&b.jsxs("div",{className:"space-y-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"再現手順"}),b.jsx("textarea",{value:e.reproductionSteps,onChange:k=>p("reproductionSteps",k.target.value),className:"input-field h-24 resize-none",placeholder:`1. 〜をクリック
2. 〜を入力
3. 問題が発生`})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"期待する動作"}),b.jsx("textarea",{value:e.expectedBehavior,onChange:k=>p("expectedBehavior",k.target.value),className:"input-field h-20 resize-none",placeholder:"本来どうなるべきかを記述してください"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"実際の動作"}),b.jsx("textarea",{value:e.actualBehavior,onChange:k=>p("actualBehavior",k.target.value),className:"input-field h-20 resize-none",placeholder:"実際に何が起こるかを記述してください"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"追加情報"}),b.jsx("textarea",{value:e.additionalInfo,onChange:k=>p("additionalInfo",k.target.value),className:"input-field h-20 resize-none",placeholder:"スクリーンショットのURL、関連情報など"})]})]}),h&&b.jsxs("div",{className:`p-4 rounded-lg ${h.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[b.jsx("div",{className:"font-medium mb-2",children:h.success?"✅ 成功":"❌ エラー"}),b.jsx("div",{className:"text-sm mb-2",children:h.message}),h.success&&h.issue&&b.jsx("div",{className:"text-sm",children:b.jsxs("a",{href:h.issue.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:["Issue #",h.issue.number," を確認する →"]})})]}),b.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[b.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"キャンセル"}),b.jsx("button",{type:"submit",disabled:a||!e.title.trim()||!e.body.trim(),className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"投稿中..."]}):b.jsx(b.Fragment,{children:"📤 投稿する"})})]})]})]})})},xS=({currentView:s,onViewChange:e})=>{const[i,a]=kt.useState(!1),[o,h]=kt.useState(!1);kt.useEffect(()=>{const v=localStorage.getItem("theme"),p=window.matchMedia("(prefers-color-scheme: dark)").matches;v==="dark"||!v&&p?(a(!0),document.documentElement.classList.add("dark")):(a(!1),document.documentElement.classList.remove("dark"))},[]);const d=()=>{const v=!i;a(v),v?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},g=[{id:"channels",label:"チャンネル一覧",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"settings",label:"設定",icon:"⚙️"}];return b.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors",children:[b.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:b.jsxs("div",{className:"flex justify-between items-center h-16",children:[b.jsxs("div",{className:"flex items-center",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mr-8",children:"🎵 YouTube BGMチャンネル分析"}),b.jsx("nav",{className:"flex space-x-1",children:g.map(v=>b.jsxs("button",{onClick:()=>e(v.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${s===v.id?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[b.jsx("span",{className:"mr-2",children:v.icon}),v.label]},v.id))})]}),b.jsxs("div",{className:"flex items-center space-x-4",children:[b.jsx("button",{onClick:()=>h(!0),className:"px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"不具合・要望を報告",children:"🐛 フィードバック"}),b.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"ダークモード切り替え",children:i?"☀️":"🌙"})]})]})}),o&&b.jsx(AS,{onClose:()=>h(!1)})]})},SS=({onAddChannel:s})=>{const[e,i]=kt.useState(""),[a,o]=kt.useState(!1),h=async d=>{if(d.preventDefault(),!!e.trim()){o(!0);try{await s(e.trim()),i("")}catch(g){console.error("チャンネル追加エラー:",g)}finally{o(!1)}}};return b.jsxs("div",{className:"card mb-8",children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"チャンネル検索・追加"}),b.jsxs("form",{onSubmit:h,className:"flex gap-4",children:[b.jsx("input",{type:"text",value:e,onChange:d=>i(d.target.value),placeholder:"チャンネルURL または チャンネルID を入力",className:"input-field flex-1",disabled:a}),b.jsx("button",{type:"submit",disabled:a||!e.trim(),className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"分析中..."]}):b.jsx(b.Fragment,{children:"📊 分析追加"})})]})]})},wS=({filters:s,onFiltersChange:e})=>{const i=h=>{e({...s,sortBy:h})},a=h=>{e({...s,filterBy:h})},o=h=>{e({...s,search:h})};return b.jsx("div",{className:"card mb-8",children:b.jsxs("div",{className:"flex flex-wrap gap-6 items-center",children:[b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{className:"text-sm font-medium text-gray-700",children:"並び替え:"}),b.jsxs("select",{value:s.sortBy,onChange:h=>i(h.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[b.jsx("option",{value:"growth_rate",children:"成長率順"}),b.jsx("option",{value:"subscribers",children:"登録者数順"}),b.jsx("option",{value:"views",children:"再生回数順"}),b.jsx("option",{value:"recent_videos",children:"最新動画数順"}),b.jsx("option",{value:"added_date",children:"追加日順"})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[b.jsx("label",{className:"text-sm font-medium text-gray-700",children:"フィルター:"}),b.jsxs("select",{value:s.filterBy,onChange:h=>a(h.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[b.jsx("option",{value:"all",children:"全て"}),b.jsx("option",{value:"growing",children:"成長中"}),b.jsx("option",{value:"large",children:"大規模"}),b.jsx("option",{value:"small",children:"小規模"})]})]}),b.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[b.jsx("label",{className:"text-sm font-medium text-gray-700",children:"検索:"}),b.jsx("input",{type:"text",value:s.search,onChange:h=>o(h.target.value),placeholder:"チャンネル名検索...",className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent flex-1 min-w-0"})]})]})})},RS=({channels:s})=>{const e=s.length,i=s.length>0?Math.round(s.reduce((o,h)=>o+(h.growthRate||0),0)/s.length):0,a=s.length>0?s.reduce((o,h)=>(h.growthRate||0)>(o.growthRate||0)?h:o,s[0]):null;return b.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[b.jsxs("div",{className:"stat-card",children:[b.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:e}),b.jsx("div",{className:"text-sm text-gray-600",children:"追跡チャンネル数"})]}),b.jsxs("div",{className:"stat-card",children:[b.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:[i,"%"]}),b.jsx("div",{className:"text-sm text-gray-600",children:"平均成長率"})]}),b.jsxs("div",{className:"stat-card",children:[b.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1 truncate",children:a?a.channelTitle:"-"}),b.jsx("div",{className:"text-sm text-gray-600",children:"トップパフォーマー"})]})]})};function CS(s){const e=s.trim(),i=[/youtube\.com\/channel\/([UC][a-zA-Z0-9_-]{22})/,/youtube\.com\/c\/([a-zA-Z0-9_-]+)/,/youtube\.com\/user\/([a-zA-Z0-9_-]+)/,/youtube\.com\/@([a-zA-Z0-9_-]+)/,/^(UC[a-zA-Z0-9_-]{22})$/];for(const a of i){const o=e.match(a);if(o)return o[1]}return e}async function NS(s){var e,i,a,o,h,d,g;try{const v="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",p="https://www.googleapis.com/youtube/v3/channels",E=new URLSearchParams({key:v,id:s,part:"snippet,statistics,contentDetails"}),w=await fetch(`${p}?${E}`),R=await w.json();if(!w.ok)throw new Error(((e=R.error)==null?void 0:e.message)||"API呼び出しエラー");if(!R.items||R.items.length===0)throw new Error("チャンネルが見つかりません");const k=R.items[0],Q=k.snippet,et=k.statistics;return{channelId:k.id,channelTitle:Q.title,description:Q.description,thumbnailUrl:((a=(i=Q.thumbnails)==null?void 0:i.high)==null?void 0:a.url)||((h=(o=Q.thumbnails)==null?void 0:o.default)==null?void 0:h.url),channelUrl:`https://www.youtube.com/channel/${k.id}`,subscriberCount:parseInt(et.subscriberCount)||0,videoCount:parseInt(et.videoCount)||0,totalViews:parseInt(et.viewCount)||0,publishedAt:Q.publishedAt,uploadsPlaylistId:(g=(d=k.contentDetails)==null?void 0:d.relatedPlaylists)==null?void 0:g.uploads}}catch(v){throw console.error("チャンネル情報取得エラー:",v),v}}async function DS(s){var e;try{const i="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",a="https://www.googleapis.com/youtube/v3/playlistItems";let o=null,h="",d=0;const g=10;console.log(`📹 最初の動画を検索中: ${s}`);do{const v=new URLSearchParams({key:i,playlistId:s,part:"snippet",maxResults:50});h&&v.append("pageToken",h);const p=await fetch(`${a}?${v}`),E=await p.json();if(!p.ok)throw new Error(((e=E.error)==null?void 0:e.message)||"API呼び出しエラー");if(E.items&&E.items.length>0){for(const w of E.items){const R=new Date(w.snippet.publishedAt);(!o||R<new Date(o.publishedAt))&&(o={title:w.snippet.title,publishedAt:w.snippet.publishedAt,videoId:w.snippet.resourceId.videoId})}console.log(`   ページ ${d+1}: ${E.items.length}本の動画をチェック`),console.log(`   現在の最古動画: ${o==null?void 0:o.title} (${o==null?void 0:o.publishedAt})`)}h=E.nextPageToken,d++,await new Promise(w=>setTimeout(w,100))}while(h&&d<g);return console.log(`✅ 最初の動画検索完了: ${(o==null?void 0:o.title)||"なし"}`),o}catch(i){return console.error("最初の動画取得エラー:",i),null}}async function IS(s){try{const e=Er(rn,"bgm_channels"),i=ud(e,cd("channelId","==",s));return!(await fs(i)).empty}catch(e){return console.error("チャンネル存在チェックエラー:",e),!1}}function VS(s,e){const i=["BGM","instrumental","background music","ambient","lo-fi","lofi","chill","relaxing","study music","meditation","sleep music","インスト","インストゥルメンタル","ヒーリング","リラックス","作業用","勉強用","睡眠用","瞑想","アンビエント"],a=["lyrics","歌詞","vocal","sing","singing","song","rap","talk","podcast","ボーカル","歌","歌い手","トーク","ラップ"],o=`${s} ${e}`.toLowerCase();for(const h of a)if(o.includes(h.toLowerCase()))return!1;for(const h of i)if(o.includes(h.toLowerCase()))return!0;return!1}async function OS(s){var e,i,a,o,h,d;try{const g="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",v="https://www.googleapis.com/youtube/v3/playlistItems";let p=null,E="",w=0;const R=5;console.log(`🔥 最も人気の動画を検索中: ${s}`);do{const k=new URLSearchParams({key:g,playlistId:s,part:"snippet",maxResults:50});E&&k.append("pageToken",E);const Q=await fetch(`${v}?${k}`),et=await Q.json();if(!Q.ok)throw new Error(((e=et.error)==null?void 0:e.message)||"API呼び出しエラー");if(et.items&&et.items.length>0){const K=et.items.map(ct=>ct.snippet.resourceId.videoId),bt=await MS(K);for(let ct=0;ct<et.items.length;ct++){const ht=et.items[ct],$=bt[ht.snippet.resourceId.videoId];if($){const W=parseInt($.viewCount)||0;(!p||W>p.viewCount)&&(p={title:ht.snippet.title,viewCount:W,likeCount:parseInt($.likeCount)||0,commentCount:parseInt($.commentCount)||0,publishedAt:ht.snippet.publishedAt,thumbnailUrl:((a=(i=ht.snippet.thumbnails)==null?void 0:i.high)==null?void 0:a.url)||((h=(o=ht.snippet.thumbnails)==null?void 0:o.default)==null?void 0:h.url),videoId:ht.snippet.resourceId.videoId,url:`https://www.youtube.com/watch?v=${ht.snippet.resourceId.videoId}`})}}console.log(`   ページ ${w+1}: ${et.items.length}本の動画をチェック`),console.log(`   現在の最人気動画: ${p==null?void 0:p.title} (${(d=p==null?void 0:p.viewCount)==null?void 0:d.toLocaleString()}回再生)`)}E=et.nextPageToken,w++,await new Promise(K=>setTimeout(K,200))}while(E&&w<R);return console.log(`✅ 最人気動画検索完了: ${(p==null?void 0:p.title)||"なし"}`),p}catch(g){return console.error("最人気動画取得エラー:",g),null}}async function MS(s){var e;try{const i="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",a="https://www.googleapis.com/youtube/v3/videos",o=new URLSearchParams({key:i,id:s.join(","),part:"statistics"}),h=await fetch(`${a}?${o}`),d=await h.json();if(!h.ok)throw new Error(((e=d.error)==null?void 0:e.message)||"API呼び出しエラー");const g={};return d.items&&d.items.forEach(v=>{g[v.id]=v.statistics}),g}catch(i){return console.error("動画統計取得エラー:",i),{}}}function jS(s,e){try{const i=e?new Date(e.publishedAt):new Date(s.publishedAt),o=(new Date-i)/(1e3*60*60*24*30);if(o<=0)return 0;const d=s.subscriberCount/o/1e3*100;return Math.round(Math.min(d,999))}catch(i){return console.error("成長率計算エラー:",i),0}}async function US(s){try{const e=Er(rn,"bgm_channels");return await aS(e,{...s,createdAt:new Date,addedManually:!0}),!0}catch(e){throw console.error("Firestore保存エラー:",e),e}}async function C_(s){try{const e=us(rn,"bgm_channels",s);await rS(e,{isViewed:!0,viewedAt:oS()}),console.log(`Channel marked as viewed: ${s}`)}catch(e){throw console.error("Error marking channel as viewed:",e),e}}const V0=Object.freeze(Object.defineProperty({__proto__:null,addChannelToFirestore:US,calculateGrowthRate:jS,checkChannelExists:IS,extractChannelId:CS,fetchChannelFirstVideo:DS,fetchChannelInfo:NS,fetchChannelMostPopularVideo:OS,isBGMChannel:VS,markChannelAsViewed:C_},Symbol.toStringTag,{value:"Module"})),kS=({channel:s,onChannelClick:e,onAddToTracking:i})=>{const[a,o]=kt.useState(s.isViewed||!1),h=E=>E>=1e6?`${(E/1e6).toFixed(1)}M`:E>=1e3?`${(E/1e3).toFixed(1)}K`:E.toString(),d=E=>E?(E.toDate?E.toDate():new Date(E)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}):"-",g=E=>E>=50?"bg-green-100 text-green-800":E>=20?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",v=E=>{if(a||!E)return!1;const w=E.toDate?E.toDate():new Date(E);return(Date.now()-w.getTime())/(1e3*60*60*24)<=7},p=async()=>{if(!a&&s.id)try{await C_(s.id),o(!0)}catch(E){console.error("Error marking channel as viewed:",E)}e&&e(s)};return b.jsx("div",{className:"channel-card cursor-pointer",onClick:p,children:b.jsxs("div",{className:"flex items-start gap-4",children:[b.jsx("img",{src:s.thumbnailUrl||"/default-avatar.png",alt:s.channelTitle,className:"w-16 h-16 rounded-full object-cover flex-shrink-0",onError:E=>{E.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),b.jsxs("div",{className:"flex-1 min-w-0",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[b.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.channelTitle}),v(s.createdAt)&&b.jsx("span",{className:"inline-block px-2 py-1 text-xs font-bold bg-red-100 text-red-800 rounded-full animate-pulse",children:"NEW!"})]}),b.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[b.jsxs("span",{className:"text-sm text-gray-600",children:[h(s.subscriberCount)," 登録者"]}),b.jsx("span",{className:"text-sm text-gray-500",children:"•"}),b.jsxs("span",{className:"text-sm text-gray-600",children:["開設: ",d(s.publishedAt)]})]}),b.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.keywords&&s.keywords.slice(0,3).map((E,w)=>b.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:E},w))}),s.latestVideo&&b.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[b.jsx("span",{className:"font-medium",children:"最新:"})," ",s.latestVideo.title]}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${g(s.growthRate||0)}`,children:["成長率 ",s.growthRate||0,"%"]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:E=>{E.stopPropagation(),i(s)},className:`px-3 py-1 text-xs font-medium rounded-full transition-colors ${s.isTracked?"bg-green-100 text-green-800 border border-green-300":"bg-blue-100 text-blue-800 border border-blue-300 hover:bg-blue-200"}`,disabled:s.isTracked,children:s.isTracked?"追跡中":"追跡に追加"}),b.jsx("button",{onClick:E=>{E.stopPropagation(),window.open(s.channelUrl,"_blank")},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"訪問 →"})]})]})]})]})})},LS=({channels:s,onChannelClick:e,onAddToTracking:i})=>s.length===0?b.jsxs("div",{className:"text-center py-16",children:[b.jsx("div",{className:"text-6xl mb-4",children:"📈"}),b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"まだチャンネルが追加されていません"}),b.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"上記の検索欄からYouTubeチャンネルを追加して分析を開始してください"})]}):b.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:s.map(a=>b.jsx(kS,{channel:a,onChannelClick:e,onAddToTracking:i},a.channelId))}),PS=({channel:s,isOpen:e,onClose:i,onRemove:a})=>{if(!e||!s)return null;const o=g=>g>=1e6?`${(g/1e6).toFixed(1)}M`:g>=1e3?`${(g/1e3).toFixed(1)}K`:g.toString(),h=g=>g?(g.toDate?g.toDate():new Date(g)).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"-",d=()=>{confirm("このチャンネルを追跡リストから削除しますか？")&&(a(s.id),i())};return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:b.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[b.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[b.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"チャンネル詳細"}),b.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]}),b.jsxs("div",{className:"p-6",children:[b.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[b.jsx("img",{src:s.thumbnailUrl||"/default-avatar.png",alt:s.channelTitle,className:"w-24 h-24 rounded-full object-cover",onError:g=>{g.target.src="https://via.placeholder.com/96x96/e5e7eb/9ca3af?text=🎵"}}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.channelTitle}),b.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[b.jsxs("div",{children:[b.jsx("span",{className:"text-gray-600",children:"登録者数:"}),b.jsx("span",{className:"ml-2 font-semibold",children:o(s.subscriberCount)})]}),b.jsxs("div",{children:[b.jsx("span",{className:"text-gray-600",children:"総再生回数:"}),b.jsx("span",{className:"ml-2 font-semibold",children:o(s.totalViews||0)})]}),b.jsxs("div",{children:[b.jsx("span",{className:"text-gray-600",children:"動画数:"}),b.jsx("span",{className:"ml-2 font-semibold",children:s.videoCount||"-"})]}),b.jsxs("div",{children:[b.jsx("span",{className:"text-gray-600",children:"開設日:"}),b.jsx("span",{className:"ml-2 font-semibold",children:h(s.publishedAt)})]}),b.jsxs("div",{children:[b.jsx("span",{className:"text-gray-600",children:"初投稿:"}),b.jsx("span",{className:"ml-2 font-semibold",children:h(s.firstVideoDate)})]}),b.jsxs("div",{className:"col-span-2",children:[b.jsx("span",{className:"text-gray-600",children:"成長率:"}),b.jsxs("span",{className:"ml-2 font-semibold text-blue-600",children:[s.growthRate||0,"%"]})]})]})]})]}),s.keywords&&s.keywords.length>0&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-2",children:"タグ"}),b.jsx("div",{className:"flex flex-wrap gap-2",children:s.keywords.map((g,v)=>b.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-full",children:g},v))})]}),s.latestVideo&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"最新動画"}),b.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[b.jsx("h6",{className:"font-medium text-gray-900 mb-1",children:s.latestVideo.title}),b.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["投稿日: ",h(s.latestVideo.publishedAt)]}),b.jsx("a",{href:s.latestVideo.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"動画を見る →"})]})]}),s.mostPopularVideo&&b.jsxs("div",{className:"mb-6",children:[b.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"🔥 最も人気の動画"}),b.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:b.jsxs("div",{className:"flex gap-4",children:[s.mostPopularVideo.thumbnailUrl&&b.jsx("img",{src:s.mostPopularVideo.thumbnailUrl,alt:s.mostPopularVideo.title,className:"w-24 h-18 rounded object-cover flex-shrink-0"}),b.jsxs("div",{className:"flex-1",children:[b.jsx("h6",{className:"font-medium text-gray-900 mb-2 line-clamp-2",children:s.mostPopularVideo.title}),b.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[b.jsxs("span",{className:"flex items-center gap-1",children:["👁️ ",o(s.mostPopularVideo.viewCount)," 回視聴"]}),s.mostPopularVideo.likeCount>0&&b.jsxs("span",{className:"flex items-center gap-1",children:["👍 ",o(s.mostPopularVideo.likeCount)]}),s.mostPopularVideo.commentCount>0&&b.jsxs("span",{className:"flex items-center gap-1",children:["💬 ",o(s.mostPopularVideo.commentCount)]})]}),b.jsx("a",{href:s.mostPopularVideo.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 text-sm font-medium",children:"動画を見る →"})]})]})})]})]}),b.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[b.jsx("button",{onClick:()=>window.open(s.channelUrl,"_blank"),className:"btn-primary flex-1",children:"チャンネル訪問"}),b.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors",children:"追跡削除"})]})]})})},zS=()=>{const[s,e]=kt.useState({youtubeApiKey:"",githubToken:"",searchKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music"],collectionFrequency:"daily",keywordCount:8,videosPerKeyword:40,maxChannelsPerRun:150,monthsThreshold:3,minSubscribers:1e3,maxSubscribers:5e5,minVideos:5,minGrowthRate:10,bgmKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music","meditation","sleep music"],bgmExclusions:["lyrics","歌詞","vocal","sing","rap","talk","podcast"],trackingFrequency:"weekly",trackingRetentionDays:365,theme:"light",defaultSort:"growthRate",itemsPerPage:20,enableApiUsageDisplay:!0,maxDailyApiCalls:1e4}),[i,a]=kt.useState(!0),[o,h]=kt.useState(!1),[d,g]=kt.useState(""),[v,p]=kt.useState("basic"),[E,w]=kt.useState("unchecked");kt.useEffect(()=>{R()},[]);const R=async()=>{try{const $=await iS(us(rn,"settings","app_config"));$.exists()&&e(W=>({...W,...$.data()})),R_()&&(w("valid"),e(W=>({...W,githubToken:"●●●●●●●●●●●●"})))}catch($){console.error("設定の読み込みエラー:",$),g("設定の読み込みに失敗しました")}finally{a(!1)}},k=async()=>{try{if(h(!0),s.githubToken&&s.githubToken!=="●●●●●●●●●●●●")if(await TS(s.githubToken))I0(s.githubToken),w("valid"),g("設定を保存しました（GitHub Token有効）");else{w("invalid"),g("GitHub Tokenが無効です");return}else s.githubToken===""&&(I0(""),w("unchecked"));const $={...s};delete $.githubToken,await hd(us(rn,"settings","app_config"),$),(!s.githubToken||s.githubToken==="●●●●●●●●●●●●")&&g("設定を保存しました"),setTimeout(()=>g(""),3e3)}catch($){console.error("設定の保存エラー:",$),g("設定の保存に失敗しました")}finally{h(!1)}},Q=async $=>{try{const W=await fs(Er(rn,"channels")),Et=await fs(Er(rn,"tracking_data")),V=W.docs.map(M=>({id:M.id,...M.data()})),x=Et.docs.map(M=>({id:M.id,...M.data()})),N={channels:V,tracking:x,exportedAt:new Date().toISOString()};if($==="csv"){const M=et(V);K(M,"youtube-bgm-channels.csv","text/csv")}else{const M=JSON.stringify(N,null,2);K(M,"youtube-bgm-data.json","application/json")}g(`${$.toUpperCase()}でエクスポートしました`)}catch(W){console.error("エクスポートエラー:",W),g("エクスポートに失敗しました")}},et=$=>{const W=["チャンネル名","チャンネルID","登録者数","動画数","成長率(%)","開設日","最初の動画日","キーワード","URL"],Et=$.map(V=>[V.channelTitle||"",V.channelId||"",V.subscriberCount||0,V.videoCount||0,V.growthRate||0,V.publishedAt?new Date(V.publishedAt).toLocaleDateString("ja-JP"):"",V.firstVideoDate?new Date(V.firstVideoDate).toLocaleDateString("ja-JP"):"",(V.keywords||[]).join("; "),V.channelUrl||""]);return[W,...Et].map(V=>V.map(x=>`"${String(x).replace(/"/g,'""')}"`).join(",")).join(`
`)},K=($,W,Et)=>{const V=new Blob([$],{type:Et}),x=URL.createObjectURL(V),N=document.createElement("a");N.href=x,N.download=W,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(x)},bt=$=>{const W=prompt(`新しい${$==="search"?"検索":$==="bgm"?"BGM":"除外"}キーワードを入力してください:`);if(W&&W.trim()){const Et=$==="search"?"searchKeywords":$==="bgm"?"bgmKeywords":"bgmExclusions";e(V=>({...V,[Et]:[...V[Et],W.trim()]}))}},ct=($,W)=>{const Et=$==="search"?"searchKeywords":$==="bgm"?"bgmKeywords":"bgmExclusions";e(V=>({...V,[Et]:V[Et].filter((x,N)=>N!==W)}))},ht=[{id:"basic",label:"基本設定",icon:"⚙️"},{id:"collection",label:"収集設定",icon:"🔍"},{id:"filtering",label:"フィルタリング",icon:"📊"},{id:"bgm",label:"BGM判定",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"display",label:"表示設定",icon:"🎨"},{id:"data",label:"データ管理",icon:"💾"},{id:"security",label:"セキュリティ",icon:"🔒"}];return i?b.jsx("div",{className:"flex items-center justify-center min-h-96",children:b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):b.jsx("div",{className:"max-w-6xl mx-auto p-6",children:b.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[b.jsxs("div",{className:"border-b border-gray-200 p-6",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"設定"}),b.jsx("p",{className:"text-gray-600 mt-1",children:"アプリケーションの動作をカスタマイズできます"}),d&&b.jsx("div",{className:`mt-4 p-3 rounded-md ${d.includes("失敗")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:d})]}),b.jsxs("div",{className:"flex",children:[b.jsx("div",{className:"w-64 border-r border-gray-200 p-4",children:b.jsx("nav",{className:"space-y-1",children:ht.map($=>b.jsxs("button",{onClick:()=>p($.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${v===$.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[b.jsx("span",{className:"mr-2",children:$.icon}),$.label]},$.id))})}),b.jsxs("div",{className:"flex-1 p-6",children:[v==="basic"&&b.jsxs("div",{className:"space-y-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"基本設定"}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube API キー"}),b.jsx("input",{type:"password",value:s.youtubeApiKey,onChange:$=>e(W=>({...W,youtubeApiKey:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"YouTube Data API v3 キーを入力"}),b.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Google Cloud Consoleで取得したAPIキーを設定してください"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Personal Access Token"}),b.jsxs("div",{className:"relative",children:[b.jsx("input",{type:"password",value:s.githubToken,onChange:$=>e(W=>({...W,githubToken:$.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 pr-10 ${E==="valid"?"border-green-300":E==="invalid"?"border-red-300":"border-gray-300"}`,placeholder:"ghp_xxxxxxxxxxxxxxxxxx"}),b.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:[E==="valid"&&b.jsx("span",{className:"text-green-500",children:"✓"}),E==="invalid"&&b.jsx("span",{className:"text-red-500",children:"✗"})]})]}),b.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"不具合・要望報告機能でGitHub Issuesに投稿するために必要です"}),b.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"GitHub Settings → Developer settings → Personal access tokens で作成"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索キーワード"}),b.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.searchKeywords.map(($,W)=>b.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[$,b.jsx("button",{onClick:()=>ct("search",W),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},W))}),b.jsx("button",{onClick:()=>bt("search"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),v==="collection"&&b.jsxs("div",{className:"space-y-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"収集設定"}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"収集頻度"}),b.jsxs("select",{value:s.collectionFrequency,onChange:$=>e(W=>({...W,collectionFrequency:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[b.jsx("option",{value:"daily",children:"毎日"}),b.jsx("option",{value:"weekly",children:"毎週"}),b.jsx("option",{value:"monthly",children:"毎月"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"使用キーワード数"}),b.jsx("input",{type:"number",value:s.keywordCount,onChange:$=>e(W=>({...W,keywordCount:parseInt($.target.value)||8})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"キーワードあたり動画数"}),b.jsx("input",{type:"number",value:s.videosPerKeyword,onChange:$=>e(W=>({...W,videosPerKeyword:parseInt($.target.value)||40})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"10",max:"100"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大チャンネル処理数"}),b.jsx("input",{type:"number",value:s.maxChannelsPerRun,onChange:$=>e(W=>({...W,maxChannelsPerRun:parseInt($.target.value)||150})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"50",max:"500"})]})]})]}),v==="filtering"&&b.jsxs("div",{className:"space-y-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"フィルタリング設定"}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"チャンネル作成期間（ヶ月）"}),b.jsx("input",{type:"number",value:s.monthsThreshold,onChange:$=>e(W=>({...W,monthsThreshold:parseInt($.target.value)||3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"12"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小登録者数"}),b.jsx("input",{type:"number",value:s.minSubscribers,onChange:$=>e(W=>({...W,minSubscribers:parseInt($.target.value)||1e3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"100"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大登録者数"}),b.jsx("input",{type:"number",value:s.maxSubscribers,onChange:$=>e(W=>({...W,maxSubscribers:parseInt($.target.value)||5e5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小動画数"}),b.jsx("input",{type:"number",value:s.minVideos,onChange:$=>e(W=>({...W,minVideos:parseInt($.target.value)||5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小成長率（%）"}),b.jsx("input",{type:"number",value:s.minGrowthRate,onChange:$=>e(W=>({...W,minGrowthRate:parseInt($.target.value)||10})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"0"})]})]})]}),v==="bgm"&&b.jsxs("div",{className:"space-y-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"BGM判定設定"}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BGM関連キーワード"}),b.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.bgmKeywords.map(($,W)=>b.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:[$,b.jsx("button",{onClick:()=>ct("bgm",W),className:"ml-1 text-green-600 hover:text-green-800",children:"×"})]},W))}),b.jsx("button",{onClick:()=>bt("bgm"),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"+ キーワードを追加"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"除外キーワード"}),b.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.bgmExclusions.map(($,W)=>b.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:[$,b.jsx("button",{onClick:()=>ct("exclusion",W),className:"ml-1 text-red-600 hover:text-red-800",children:"×"})]},W))}),b.jsx("button",{onClick:()=>bt("exclusion"),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),v==="tracking"&&b.jsxs("div",{className:"space-y-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"トラッキング設定"}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"トラッキング頻度"}),b.jsxs("select",{value:s.trackingFrequency,onChange:$=>e(W=>({...W,trackingFrequency:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[b.jsx("option",{value:"daily",children:"毎日"}),b.jsx("option",{value:"weekly",children:"毎週"}),b.jsx("option",{value:"monthly",children:"毎月"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"データ保持期間（日）"}),b.jsx("input",{type:"number",value:s.trackingRetentionDays,onChange:$=>e(W=>({...W,trackingRetentionDays:parseInt($.target.value)||365})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"30",max:"1095"})]})]})]}),v==="display"&&b.jsxs("div",{className:"space-y-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"表示設定"}),b.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テーマ"}),b.jsxs("select",{value:s.theme,onChange:$=>e(W=>({...W,theme:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[b.jsx("option",{value:"light",children:"ライト"}),b.jsx("option",{value:"dark",children:"ダーク"}),b.jsx("option",{value:"auto",children:"自動"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"デフォルト並び順"}),b.jsxs("select",{value:s.defaultSort,onChange:$=>e(W=>({...W,defaultSort:$.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[b.jsx("option",{value:"growthRate",children:"成長率順"}),b.jsx("option",{value:"subscriberCount",children:"登録者数順"}),b.jsx("option",{value:"publishedAt",children:"新着順"})]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1ページの表示件数"}),b.jsxs("select",{value:s.itemsPerPage,onChange:$=>e(W=>({...W,itemsPerPage:parseInt($.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[b.jsx("option",{value:10,children:"10件"}),b.jsx("option",{value:20,children:"20件"}),b.jsx("option",{value:50,children:"50件"}),b.jsx("option",{value:100,children:"100件"})]})]})]})]}),v==="data"&&b.jsxs("div",{className:"space-y-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"データ管理"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[b.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データエクスポート"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"収集したチャンネルデータとトラッキングデータをエクスポートできます"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>Q("csv"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"CSV形式でエクスポート"}),b.jsx("button",{onClick:()=>Q("json"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"JSON形式でエクスポート"})]})]}),b.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[b.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データバックアップ"}),b.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"定期的にデータのバックアップを作成することをお勧めします"}),b.jsx("button",{onClick:()=>Q("json"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"今すぐバックアップ"})]})]})]}),v==="security"&&b.jsxs("div",{className:"space-y-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"セキュリティ設定"}),b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsxs("label",{className:"flex items-center",children:[b.jsx("input",{type:"checkbox",checked:s.enableApiUsageDisplay,onChange:$=>e(W=>({...W,enableApiUsageDisplay:$.target.checked})),className:"mr-2"}),b.jsx("span",{className:"text-sm font-medium text-gray-700",children:"API使用量の表示"})]}),b.jsx("p",{className:"text-sm text-gray-500 ml-6",children:"YouTube API使用量をダッシュボードに表示します"})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1日のAPI呼び出し制限"}),b.jsx("input",{type:"number",value:s.maxDailyApiCalls,onChange:$=>e(W=>({...W,maxDailyApiCalls:parseInt($.target.value)||1e4})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000",max:"1000000"}),b.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"YouTube APIの1日あたりのクォータ制限を設定"})]})]})]}),b.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-gray-200",children:b.jsx("button",{onClick:k,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:o?"保存中...":"設定を保存"})})]})]})]})})},Pf=({trackingData:s,title:e})=>{var o,h,d,g,v;if(!s||s.length===0)return b.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),b.jsx("div",{className:"text-center py-8 text-gray-500",children:"トラッキングデータがありません"})]});const i=Math.max(...s.map(p=>p.value)),a=Math.min(...s.map(p=>p.value));return b.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[b.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),b.jsx("div",{className:"mb-4",children:b.jsx("div",{className:"flex items-end h-32 gap-2",children:s.map((p,E)=>{const w=(p.value-a)/(i-a)*100,R=E===s.length-1;return b.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[b.jsx("div",{className:"w-full bg-gray-100 rounded-t",children:b.jsx("div",{className:`w-full rounded-t transition-all duration-300 ${R?"bg-blue-500":"bg-blue-300"}`,style:{height:`${Math.max(w,5)}%`}})}),b.jsx("div",{className:"text-xs text-gray-600 mt-1 text-center",children:new Date(p.date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})})]},E)})})}),b.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center border-t pt-4",children:[b.jsxs("div",{children:[b.jsx("div",{className:"text-sm text-gray-600",children:"最新"}),b.jsx("div",{className:"text-lg font-semibold text-blue-600",children:(o=s[s.length-1])==null?void 0:o.value.toLocaleString()})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-sm text-gray-600",children:"最高"}),b.jsx("div",{className:"text-lg font-semibold text-green-600",children:i.toLocaleString()})]}),b.jsxs("div",{children:[b.jsx("div",{className:"text-sm text-gray-600",children:"成長"}),b.jsx("div",{className:`text-lg font-semibold ${s.length>1?((h=s[s.length-1])==null?void 0:h.value)>((d=s[0])==null?void 0:d.value)?"text-green-600":"text-red-600":"text-gray-600"}`,children:s.length>1?`${((((g=s[s.length-1])==null?void 0:g.value)/((v=s[0])==null?void 0:v.value)-1)*100).toFixed(1)}%`:"N/A"})]})]})]})},BS=({selectedChannelId:s})=>{const[e,i]=kt.useState({subscriberCount:[],videoCount:[],totalViews:[]}),[a,o]=kt.useState(!0),[h,d]=kt.useState([]);kt.useEffect(()=>{g()},[]),kt.useEffect(()=>{s&&v(s)},[s]);const g=async()=>{try{const w=(await fs(ud(Er(rn,"tracked_channels"),cd("isActive","==",!0),C0("addedAt","desc")))).docs.map(R=>({id:R.id,...R.data()}));d(w)}catch(E){console.error("追跡チャンネル一覧の取得エラー:",E)}},v=async E=>{try{o(!0);const R=(await fs(ud(Er(rn,"tracking_data"),cd("channelId","==",E),C0("recordedAt","asc")))).docs.map(K=>K.data()),k=R.map(K=>({date:K.recordedAt.toDate(),value:K.subscriberCount})),Q=R.map(K=>({date:K.recordedAt.toDate(),value:K.videoCount})),et=R.map(K=>({date:K.recordedAt.toDate(),value:K.totalViews}));i({subscriberCount:k,videoCount:Q,totalViews:et})}catch(w){console.error("トラッキングデータの取得エラー:",w)}finally{o(!1)}};if(a&&s)return b.jsxs("div",{className:"text-center py-8",children:[b.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),b.jsx("p",{className:"text-gray-600",children:"トラッキングデータを読み込み中..."})]});if(!s)return b.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-8",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-6xl mb-4",children:"📊"}),b.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"チャンネルを選択してください"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"追跡中のチャンネルから1つを選択すると、成長データを表示します"}),h.length>0&&b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(E=>b.jsx("div",{onClick:()=>v(E.channelId),className:"cursor-pointer p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:E.thumbnailUrl||"/default-avatar.png",alt:E.channelTitle,className:"w-12 h-12 rounded-full object-cover",onError:w=>{w.target.src="https://via.placeholder.com/48x48/e5e7eb/9ca3af?text=🎵"}}),b.jsxs("div",{className:"text-left",children:[b.jsx("h4",{className:"font-medium text-gray-900 truncate",children:E.channelTitle}),b.jsxs("p",{className:"text-sm text-gray-600",children:["追跡開始: ",new Date(E.addedAt.toDate()).toLocaleDateString("ja-JP")]})]})]})},E.id))}),h.length===0&&b.jsxs("p",{className:"text-gray-500",children:["まだ追跡中のチャンネルがありません。",b.jsx("br",{}),"チャンネル一覧から「追跡に追加」ボタンを押してチャンネルを追跡しましょう。"]})]})});const p=h.find(E=>E.channelId===s);return b.jsxs("div",{className:"space-y-6",children:[p&&b.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:b.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[b.jsx("img",{src:p.thumbnailUrl||"/default-avatar.png",alt:p.channelTitle,className:"w-16 h-16 rounded-full object-cover",onError:E=>{E.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),b.jsxs("div",{children:[b.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:p.channelTitle}),b.jsxs("p",{className:"text-gray-600",children:["追跡開始: ",new Date(p.addedAt.toDate()).toLocaleDateString("ja-JP")]})]})]})}),b.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[b.jsx(Pf,{trackingData:e.subscriberCount,title:"📈 登録者数の推移"}),b.jsx(Pf,{trackingData:e.videoCount,title:"🎥 動画数の推移"}),b.jsx(Pf,{trackingData:e.totalViews,title:"👁️ 総再生回数の推移"})]})]})};function qS(){const[s,e]=kt.useState([]),[i,a]=kt.useState([]),[o,h]=kt.useState(!0),[d,g]=kt.useState(null),[v,p]=kt.useState(null),[E,w]=kt.useState(new Set),[R,k]=kt.useState("channels"),[Q,et]=kt.useState(null),[K,bt]=kt.useState({sortBy:"growth_rate",filterBy:"all",search:""});kt.useEffect(()=>{ct(),ht()},[]),kt.useEffect(()=>{$()},[s,K,E]);const ct=async()=>{try{h(!0);const I=(await fs(Er(rn,"bgm_channels"))).docs.map(S=>({id:S.id,...S.data()}));e(I)}catch(D){console.error("チャンネルデータの読み込みエラー:",D)}finally{h(!1)}},ht=async()=>{try{const D=await fs(Er(rn,"tracked_channels")),I=new Set(D.docs.filter(S=>S.data().isActive).map(S=>S.id));w(I)}catch(D){console.error("追跡チャンネルデータの読み込みエラー:",D)}},$=()=>{let D=s.map(I=>({...I,isTracked:E.has(I.channelId)}));switch(K.search&&(D=D.filter(I=>I.channelTitle.toLowerCase().includes(K.search.toLowerCase()))),K.filterBy){case"growing":D=D.filter(I=>(I.growthRate||0)>20);break;case"large":D=D.filter(I=>I.subscriberCount>1e5);break;case"small":D=D.filter(I=>I.subscriberCount<1e4);break}switch(K.sortBy){case"growth_rate":D.sort((I,S)=>(S.growthRate||0)-(I.growthRate||0));break;case"subscribers":D.sort((I,S)=>S.subscriberCount-I.subscriberCount);break;case"views":D.sort((I,S)=>(S.totalViews||0)-(I.totalViews||0));break;case"added_date":D.sort((I,S)=>{var G,rt,ut,Nt;const Wt=((rt=(G=I.createdAt)==null?void 0:G.toDate)==null?void 0:rt.call(G))||new Date(I.createdAt);return(((Nt=(ut=S.createdAt)==null?void 0:ut.toDate)==null?void 0:Nt.call(ut))||new Date(S.createdAt))-Wt});break}a(D)},W=async D=>{try{const{extractChannelId:I,fetchChannelInfo:S,fetchChannelFirstVideo:Wt,checkChannelExists:te,isBGMChannel:G,calculateGrowthRate:rt,addChannelToFirestore:ut}=await vy(async()=>{const{extractChannelId:xt,fetchChannelInfo:vt,fetchChannelFirstVideo:de,checkChannelExists:Ft,isBGMChannel:gn,calculateGrowthRate:Pn,addChannelToFirestore:Dn}=await Promise.resolve().then(()=>V0);return{extractChannelId:xt,fetchChannelInfo:vt,fetchChannelFirstVideo:de,checkChannelExists:Ft,isBGMChannel:gn,calculateGrowthRate:Pn,addChannelToFirestore:Dn}},void 0),Nt=I(D);if(await te(Nt)){alert("このチャンネルは既に追加されています");return}const X=await S(Nt);if(!G(X.channelTitle,X.description)&&!confirm("このチャンネルはBGM関連ではない可能性があります。追加しますか？"))return;const st=await Wt(X.uploadsPlaylistId),nt=rt(X,st),dt={...X,firstVideoDate:(st==null?void 0:st.publishedAt)||X.publishedAt,growthRate:nt,keywords:[],uploadsPlaylistId:X.uploadsPlaylistId};await ut(dt),await ct(),alert(`✅ チャンネル「${X.channelTitle}」を追加しました`)}catch(I){console.error("チャンネル追加エラー:",I),alert(`❌ チャンネル追加に失敗しました: ${I.message}`)}},Et=async D=>{try{let I=D;if(D.startsWith("UC")&&D.length===24){const S=s.find(Wt=>Wt.channelId===D);if(S)I=S.id;else{console.error("削除対象のチャンネルが見つかりません");return}}await sS(us(rn,"bgm_channels",I)),await ct(),console.log(`✅ チャンネルを削除しました: ${I}`)}catch(I){console.error("チャンネル削除エラー:",I),alert("チャンネルの削除に失敗しました")}},V=async D=>{try{if(E.has(D.channelId))return;await hd(us(rn,"tracked_channels",D.channelId),{channelId:D.channelId,channelTitle:D.channelTitle,channelUrl:D.channelUrl,thumbnailUrl:D.thumbnailUrl,addedAt:new Date,isActive:!0}),await hd(us(rn,"tracking_data",`${D.channelId}_${new Date().toISOString().split("T")[0]}`),{channelId:D.channelId,subscriberCount:D.subscriberCount,videoCount:D.videoCount,totalViews:D.totalViews,recordedAt:new Date}),w(I=>new Set([...I,D.channelId])),console.log(`✅ Added to tracking: ${D.channelTitle}`)}catch(I){console.error("追跡追加エラー:",I)}},x=async D=>{g(D),p({...D,mostPopularVideo:{title:"最も人気の動画（取得中...）",viewCount:0,thumbnailUrl:"",url:""}});try{const{fetchChannelMostPopularVideo:I}=await vy(async()=>{const{fetchChannelMostPopularVideo:Wt}=await Promise.resolve().then(()=>V0);return{fetchChannelMostPopularVideo:Wt}},void 0),S=await I(D.uploadsPlaylistId);p(S?{...D,mostPopularVideo:S}:{...D,mostPopularVideo:{title:"人気動画が見つかりませんでした",viewCount:0,thumbnailUrl:"",url:""}})}catch(I){console.error("人気動画取得エラー:",I),p({...D,mostPopularVideo:{title:"人気動画の取得に失敗しました",viewCount:0,thumbnailUrl:"",url:""}})}},N=()=>{g(null),p(null)};if(o)return b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),b.jsx("p",{className:"text-gray-600",children:"チャンネルデータを読み込み中..."})]})});const M=()=>{switch(R){case"settings":return b.jsx(zS,{});case"tracking":return b.jsx(BS,{selectedChannelId:Q});default:return b.jsxs(b.Fragment,{children:[b.jsx(SS,{onAddChannel:W}),b.jsx(wS,{filters:K,onFiltersChange:bt}),b.jsx(RS,{channels:i}),b.jsx(LS,{channels:i,onChannelClick:x,onAddToTracking:V})]})}};return b.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[b.jsx(xS,{currentView:R,onViewChange:k}),b.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:M()}),b.jsx(PS,{channel:v||d,isOpen:!!d,onClose:N,onRemove:Et})]})}oE.createRoot(document.getElementById("root")).render(b.jsx(kt.StrictMode,{children:b.jsx(qS,{})}));
