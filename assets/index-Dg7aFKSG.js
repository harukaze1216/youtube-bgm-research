(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const h of o)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const h={};return o.integrity&&(h.integrity=o.integrity),o.referrerPolicy&&(h.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?h.credentials="include":o.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(o){if(o.ep)return;o.ep=!0;const h=i(o);fetch(o.href,h)}})();var Rf={exports:{}},Ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uy;function Wb(){if(uy)return Ul;uy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,o,h){var d=null;if(h!==void 0&&(d=""+h),o.key!==void 0&&(d=""+o.key),"key"in o){h={};for(var g in o)g!=="key"&&(h[g]=o[g])}else h=o;return o=h.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:h}}return Ul.Fragment=e,Ul.jsx=i,Ul.jsxs=i,Ul}var cy;function tE(){return cy||(cy=1,Rf.exports=Wb()),Rf.exports}var v=tE(),Cf={exports:{}},wt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hy;function eE(){if(hy)return wt;hy=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=A&&M[A]||M["@@iterator"],typeof M=="function"?M:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,G={};function Y(M,J,st){this.props=M,this.context=J,this.refs=G,this.updater=st||k}Y.prototype.isReactComponent={},Y.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},Y.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ft(){}ft.prototype=Y.prototype;function at(M,J,st){this.props=M,this.context=J,this.refs=G,this.updater=st||k}var lt=at.prototype=new ft;lt.constructor=at,B(lt,Y.prototype),lt.isPureReactComponent=!0;var X=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},dt=Object.prototype.hasOwnProperty;function N(M,J,st,nt,gt,St){return st=St.ref,{$$typeof:s,type:M,key:J,ref:st!==void 0?st:null,props:St}}function S(M,J){return N(M.type,J,void 0,void 0,void 0,M.props)}function D(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function O(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(st){return J[st]})}var C=/\/+/g;function V(M,J){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):J.toString(36)}function R(){}function Bt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(R,R):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function qt(M,J,st,nt,gt){var St=typeof M;(St==="undefined"||St==="boolean")&&(M=null);var bt=!1;if(M===null)bt=!0;else switch(St){case"bigint":case"string":case"number":bt=!0;break;case"object":switch(M.$$typeof){case s:case e:bt=!0;break;case T:return bt=M._init,qt(bt(M._payload),J,st,nt,gt)}}if(bt)return gt=gt(M),bt=nt===""?"."+V(M,0):nt,X(gt)?(st="",bt!=null&&(st=bt.replace(C,"$&/")+"/"),qt(gt,J,st,"",function(gn){return gn})):gt!=null&&(D(gt)&&(gt=S(gt,st+(gt.key==null||M&&M.key===gt.key?"":(""+gt.key).replace(C,"$&/")+"/")+bt)),J.push(gt)),1;bt=0;var de=nt===""?".":nt+":";if(X(M))for(var Kt=0;Kt<M.length;Kt++)nt=M[Kt],St=de+V(nt,Kt),bt+=qt(nt,J,st,St,gt);else if(Kt=w(M),typeof Kt=="function")for(M=Kt.call(M),Kt=0;!(nt=M.next()).done;)nt=nt.value,St=de+V(nt,Kt++),bt+=qt(nt,J,st,St,gt);else if(St==="object"){if(typeof M.then=="function")return qt(Bt(M),J,st,nt,gt);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return bt}function F(M,J,st){if(M==null)return M;var nt=[],gt=0;return qt(M,nt,"","",function(St){return J.call(st,St,gt++)}),nt}function it(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(st){(M._status===0||M._status===-1)&&(M._status=1,M._result=st)},function(st){(M._status===0||M._status===-1)&&(M._status=2,M._result=st)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var ht=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Dt(){}return wt.Children={map:F,forEach:function(M,J,st){F(M,function(){J.apply(this,arguments)},st)},count:function(M){var J=0;return F(M,function(){J++}),J},toArray:function(M){return F(M,function(J){return J})||[]},only:function(M){if(!D(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},wt.Component=Y,wt.Fragment=i,wt.Profiler=o,wt.PureComponent=at,wt.StrictMode=a,wt.Suspense=_,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,wt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return Z.H.useMemoCache(M)}},wt.cache=function(M){return function(){return M.apply(null,arguments)}},wt.cloneElement=function(M,J,st){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var nt=B({},M.props),gt=M.key,St=void 0;if(J!=null)for(bt in J.ref!==void 0&&(St=void 0),J.key!==void 0&&(gt=""+J.key),J)!dt.call(J,bt)||bt==="key"||bt==="__self"||bt==="__source"||bt==="ref"&&J.ref===void 0||(nt[bt]=J[bt]);var bt=arguments.length-2;if(bt===1)nt.children=st;else if(1<bt){for(var de=Array(bt),Kt=0;Kt<bt;Kt++)de[Kt]=arguments[Kt+2];nt.children=de}return N(M.type,gt,void 0,void 0,St,nt)},wt.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:h,_context:M},M},wt.createElement=function(M,J,st){var nt,gt={},St=null;if(J!=null)for(nt in J.key!==void 0&&(St=""+J.key),J)dt.call(J,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(gt[nt]=J[nt]);var bt=arguments.length-2;if(bt===1)gt.children=st;else if(1<bt){for(var de=Array(bt),Kt=0;Kt<bt;Kt++)de[Kt]=arguments[Kt+2];gt.children=de}if(M&&M.defaultProps)for(nt in bt=M.defaultProps,bt)gt[nt]===void 0&&(gt[nt]=bt[nt]);return N(M,St,void 0,void 0,null,gt)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(M){return{$$typeof:g,render:M}},wt.isValidElement=D,wt.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:it}},wt.memo=function(M,J){return{$$typeof:p,type:M,compare:J===void 0?null:J}},wt.startTransition=function(M){var J=Z.T,st={};Z.T=st;try{var nt=M(),gt=Z.S;gt!==null&&gt(st,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(Dt,ht)}catch(St){ht(St)}finally{Z.T=J}},wt.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},wt.use=function(M){return Z.H.use(M)},wt.useActionState=function(M,J,st){return Z.H.useActionState(M,J,st)},wt.useCallback=function(M,J){return Z.H.useCallback(M,J)},wt.useContext=function(M){return Z.H.useContext(M)},wt.useDebugValue=function(){},wt.useDeferredValue=function(M,J){return Z.H.useDeferredValue(M,J)},wt.useEffect=function(M,J,st){var nt=Z.H;if(typeof st=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return nt.useEffect(M,J)},wt.useId=function(){return Z.H.useId()},wt.useImperativeHandle=function(M,J,st){return Z.H.useImperativeHandle(M,J,st)},wt.useInsertionEffect=function(M,J){return Z.H.useInsertionEffect(M,J)},wt.useLayoutEffect=function(M,J){return Z.H.useLayoutEffect(M,J)},wt.useMemo=function(M,J){return Z.H.useMemo(M,J)},wt.useOptimistic=function(M,J){return Z.H.useOptimistic(M,J)},wt.useReducer=function(M,J,st){return Z.H.useReducer(M,J,st)},wt.useRef=function(M){return Z.H.useRef(M)},wt.useState=function(M){return Z.H.useState(M)},wt.useSyncExternalStore=function(M,J,st){return Z.H.useSyncExternalStore(M,J,st)},wt.useTransition=function(){return Z.H.useTransition()},wt.version="19.1.0",wt}var fy;function fd(){return fy||(fy=1,Cf.exports=eE()),Cf.exports}var Tt=fd(),Nf={exports:{}},Ll={},Df={exports:{}},If={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy;function nE(){return dy||(dy=1,function(s){function e(F,it){var ht=F.length;F.push(it);t:for(;0<ht;){var Dt=ht-1>>>1,M=F[Dt];if(0<o(M,it))F[Dt]=it,F[ht]=M,ht=Dt;else break t}}function i(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var it=F[0],ht=F.pop();if(ht!==it){F[0]=ht;t:for(var Dt=0,M=F.length,J=M>>>1;Dt<J;){var st=2*(Dt+1)-1,nt=F[st],gt=st+1,St=F[gt];if(0>o(nt,ht))gt<M&&0>o(St,nt)?(F[Dt]=St,F[gt]=ht,Dt=gt):(F[Dt]=nt,F[st]=ht,Dt=st);else if(gt<M&&0>o(St,ht))F[Dt]=St,F[gt]=ht,Dt=gt;else break t}}return it}function o(F,it){var ht=F.sortIndex-it.sortIndex;return ht!==0?ht:F.id-it.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();s.unstable_now=function(){return d.now()-g}}var _=[],p=[],T=1,A=null,w=3,k=!1,B=!1,G=!1,Y=!1,ft=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,lt=typeof setImmediate<"u"?setImmediate:null;function X(F){for(var it=i(p);it!==null;){if(it.callback===null)a(p);else if(it.startTime<=F)a(p),it.sortIndex=it.expirationTime,e(_,it);else break;it=i(p)}}function Z(F){if(G=!1,X(F),!B)if(i(_)!==null)B=!0,dt||(dt=!0,V());else{var it=i(p);it!==null&&qt(Z,it.startTime-F)}}var dt=!1,N=-1,S=5,D=-1;function O(){return Y?!0:!(s.unstable_now()-D<S)}function C(){if(Y=!1,dt){var F=s.unstable_now();D=F;var it=!0;try{t:{B=!1,G&&(G=!1,at(N),N=-1),k=!0;var ht=w;try{e:{for(X(F),A=i(_);A!==null&&!(A.expirationTime>F&&O());){var Dt=A.callback;if(typeof Dt=="function"){A.callback=null,w=A.priorityLevel;var M=Dt(A.expirationTime<=F);if(F=s.unstable_now(),typeof M=="function"){A.callback=M,X(F),it=!0;break e}A===i(_)&&a(_),X(F)}else a(_);A=i(_)}if(A!==null)it=!0;else{var J=i(p);J!==null&&qt(Z,J.startTime-F),it=!1}}break t}finally{A=null,w=ht,k=!1}it=void 0}}finally{it?V():dt=!1}}}var V;if(typeof lt=="function")V=function(){lt(C)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Bt=R.port2;R.port1.onmessage=C,V=function(){Bt.postMessage(null)}}else V=function(){ft(C,0)};function qt(F,it){N=ft(function(){F(s.unstable_now())},it)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return w},s.unstable_next=function(F){switch(w){case 1:case 2:case 3:var it=3;break;default:it=w}var ht=w;w=it;try{return F()}finally{w=ht}},s.unstable_requestPaint=function(){Y=!0},s.unstable_runWithPriority=function(F,it){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ht=w;w=F;try{return it()}finally{w=ht}},s.unstable_scheduleCallback=function(F,it,ht){var Dt=s.unstable_now();switch(typeof ht=="object"&&ht!==null?(ht=ht.delay,ht=typeof ht=="number"&&0<ht?Dt+ht:Dt):ht=Dt,F){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ht+M,F={id:T++,callback:it,priorityLevel:F,startTime:ht,expirationTime:M,sortIndex:-1},ht>Dt?(F.sortIndex=ht,e(p,F),i(_)===null&&F===i(p)&&(G?(at(N),N=-1):G=!0,qt(Z,ht-Dt))):(F.sortIndex=M,e(_,F),B||k||(B=!0,dt||(dt=!0,V()))),F},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(F){var it=w;return function(){var ht=w;w=it;try{return F.apply(this,arguments)}finally{w=ht}}}}(If)),If}var my;function iE(){return my||(my=1,Df.exports=nE()),Df.exports}var Vf={exports:{}},He={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gy;function rE(){if(gy)return He;gy=1;var s=fd();function e(_){var p="https://react.dev/errors/"+_;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)p+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+_+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function h(_,p,T){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:_,containerInfo:p,implementation:T}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(_,p){if(_==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return He.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,He.createPortal=function(_,p){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return h(_,p,null,T)},He.flushSync=function(_){var p=d.T,T=a.p;try{if(d.T=null,a.p=2,_)return _()}finally{d.T=p,a.p=T,a.d.f()}},He.preconnect=function(_,p){typeof _=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,a.d.C(_,p))},He.prefetchDNS=function(_){typeof _=="string"&&a.d.D(_)},He.preinit=function(_,p){if(typeof _=="string"&&p&&typeof p.as=="string"){var T=p.as,A=g(T,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,k=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;T==="style"?a.d.S(_,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:A,integrity:w,fetchPriority:k}):T==="script"&&a.d.X(_,{crossOrigin:A,integrity:w,fetchPriority:k,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},He.preinitModule=function(_,p){if(typeof _=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var T=g(p.as,p.crossOrigin);a.d.M(_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&a.d.M(_)},He.preload=function(_,p){if(typeof _=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var T=p.as,A=g(T,p.crossOrigin);a.d.L(_,T,{crossOrigin:A,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},He.preloadModule=function(_,p){if(typeof _=="string")if(p){var T=g(p.as,p.crossOrigin);a.d.m(_,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else a.d.m(_)},He.requestFormReset=function(_){a.d.r(_)},He.unstable_batchedUpdates=function(_,p){return _(p)},He.useFormState=function(_,p,T){return d.H.useFormState(_,p,T)},He.useFormStatus=function(){return d.H.useHostTransitionStatus()},He.version="19.1.0",He}var py;function sE(){if(py)return Vf.exports;py=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Vf.exports=rE(),Vf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function aE(){if(yy)return Ll;yy=1;var s=iE(),e=fd(),i=sE();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function d(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function g(t){if(h(t)!==t)throw Error(a(188))}function _(t){var n=t.alternate;if(!n){if(n=h(t),n===null)throw Error(a(188));return n!==t?null:t}for(var r=t,l=n;;){var c=r.return;if(c===null)break;var f=c.alternate;if(f===null){if(l=c.return,l!==null){r=l;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===r)return g(c),t;if(f===l)return g(c),n;f=f.sibling}throw Error(a(188))}if(r.return!==l.return)r=c,l=f;else{for(var b=!1,E=c.child;E;){if(E===r){b=!0,r=c,l=f;break}if(E===l){b=!0,l=c,r=f;break}E=E.sibling}if(!b){for(E=f.child;E;){if(E===r){b=!0,r=f,l=c;break}if(E===l){b=!0,l=f,r=c;break}E=E.sibling}if(!b)throw Error(a(189))}}if(r.alternate!==l)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?t:n}function p(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=p(t),n!==null)return n;t=t.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),ft=Symbol.for("react.provider"),at=Symbol.for("react.consumer"),lt=Symbol.for("react.context"),X=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),dt=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function V(t){return t===null||typeof t!="object"?null:(t=C&&t[C]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Bt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case Y:return"Profiler";case G:return"StrictMode";case Z:return"Suspense";case dt:return"SuspenseList";case D:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case k:return"Portal";case lt:return(t.displayName||"Context")+".Provider";case at:return(t._context.displayName||"Context")+".Consumer";case X:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return n=t.displayName||null,n!==null?n:Bt(t.type)||"Memo";case S:n=t._payload,t=t._init;try{return Bt(t(n))}catch{}}return null}var qt=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,it=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ht={pending:!1,data:null,method:null,action:null},Dt=[],M=-1;function J(t){return{current:t}}function st(t){0>M||(t.current=Dt[M],Dt[M]=null,M--)}function nt(t,n){M++,Dt[M]=t.current,t.current=n}var gt=J(null),St=J(null),bt=J(null),de=J(null);function Kt(t,n){switch(nt(bt,n),nt(St,t),nt(gt,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?Up(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=Up(n),t=Lp(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}st(gt),nt(gt,t)}function gn(){st(gt),st(St),st(bt)}function Pn(t){t.memoizedState!==null&&nt(de,t);var n=gt.current,r=Lp(n,t.type);n!==r&&(nt(St,t),nt(gt,r))}function Dn(t){St.current===t&&(st(gt),st(St)),de.current===t&&(st(de),Vl._currentValue=ht)}var Ar=Object.prototype.hasOwnProperty,Sr=s.unstable_scheduleCallback,wr=s.unstable_cancelCallback,Na=s.unstable_shouldYield,co=s.unstable_requestPaint,pn=s.unstable_now,wc=s.unstable_getCurrentPriorityLevel,Da=s.unstable_ImmediatePriority,gs=s.unstable_UserBlockingPriority,Rr=s.unstable_NormalPriority,Rc=s.unstable_LowPriority,ps=s.unstable_IdlePriority,Ia=s.log,ho=s.unstable_setDisableYieldValue,ae=null,Qt=null;function sn(t){if(typeof Ia=="function"&&ho(t),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(ae,t)}catch{}}var Be=Math.clz32?Math.clz32:Cr,fo=Math.log,Cc=Math.LN2;function Cr(t){return t>>>=0,t===0?32:31-(fo(t)/Cc|0)|0}var Nr=256,Dr=4194304;function In(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ys(t,n,r){var l=t.pendingLanes;if(l===0)return 0;var c=0,f=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var E=l&134217727;return E!==0?(l=E&~f,l!==0?c=In(l):(b&=E,b!==0?c=In(b):r||(r=E&~t,r!==0&&(c=In(r))))):(E=l&~f,E!==0?c=In(E):b!==0?c=In(b):r||(r=l&~t,r!==0&&(c=In(r)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,r=n&-n,f>=r||f===32&&(r&4194048)!==0)?n:c}function Ir(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Va(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ma(){var t=Nr;return Nr<<=1,(Nr&4194048)===0&&(Nr=256),t}function Oa(){var t=Dr;return Dr<<=1,(Dr&62914560)===0&&(Dr=4194304),t}function ai(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function li(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ja(t,n,r,l,c,f){var b=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var E=t.entanglements,I=t.expirationTimes,z=t.hiddenUpdates;for(r=b&~r;0<r;){var K=31-Be(r),W=1<<K;E[K]=0,I[K]=-1;var q=z[K];if(q!==null)for(z[K]=null,K=0;K<q.length;K++){var H=q[K];H!==null&&(H.lane&=-536870913)}r&=~W}l!==0&&zn(t,l,0),f!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=f&~(b&~n))}function zn(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-Be(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|r&4194090}function ka(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var l=31-Be(r),c=1<<l;c&n|t[l]&n&&(t[l]|=n),r&=~c}}function ki(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function vs(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ui(){var t=it.p;return t!==0?t:(t=window.event,t===void 0?32:iy(t.type))}function mo(t,n){var r=it.p;try{return it.p=t,n()}finally{it.p=r}}var ne=Math.random().toString(36).slice(2),be="__reactFiber$"+ne,me="__reactProps$"+ne,yn="__reactContainer$"+ne,Ua="__reactEvents$"+ne,Nc="__reactListeners$"+ne,Li="__reactHandles$"+ne,go="__reactResources$"+ne,Vr="__reactMarker$"+ne;function Pi(t){delete t[be],delete t[me],delete t[Ua],delete t[Nc],delete t[Li]}function oi(t){var n=t[be];if(n)return n;for(var r=t.parentNode;r;){if(n=r[yn]||r[be]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=qp(t);t!==null;){if(r=t[be])return r;t=qp(t)}return n}t=r,r=t.parentNode}return null}function Bn(t){if(t=t[be]||t[yn]){var n=t.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return t}return null}function qn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Ye(t){var n=t[go];return n||(n=t[go]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function ue(t){t[Vr]=!0}var La=new Set,_s={};function Vn(t,n){ui(t,n),ui(t+"Capture",n)}function ui(t,n){for(_s[t]=n,t=0;t<n.length;t++)La.add(n[t])}var po=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yo={},Mr={};function vo(t){return Ar.call(Mr,t)?!0:Ar.call(yo,t)?!1:po.test(t)?Mr[t]=!0:(yo[t]=!0,!1)}function zi(t,n,r){if(vo(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function Hn(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Me(t,n,r,l){if(l===null)t.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+l)}}var Or,_o;function ci(t){if(Or===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Or=n&&n[1]||"",_o=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Or+t+_o}var bs=!1;function Es(t,n){if(!t||bs)return"";bs=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(H){var q=H}Reflect.construct(t,[],W)}else{try{W.call()}catch(H){q=H}t.call(W.prototype)}}else{try{throw Error()}catch(H){q=H}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),b=f[0],E=f[1];if(b&&E){var I=b.split(`
`),z=E.split(`
`);for(c=l=0;l<I.length&&!I[l].includes("DetermineComponentFrameRoot");)l++;for(;c<z.length&&!z[c].includes("DetermineComponentFrameRoot");)c++;if(l===I.length||c===z.length)for(l=I.length-1,c=z.length-1;1<=l&&0<=c&&I[l]!==z[c];)c--;for(;1<=l&&0<=c;l--,c--)if(I[l]!==z[c]){if(l!==1||c!==1)do if(l--,c--,0>c||I[l]!==z[c]){var K=`
`+I[l].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=l&&0<=c);break}}}finally{bs=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ci(r):""}function Pa(t){switch(t.tag){case 26:case 27:case 5:return ci(t.type);case 16:return ci("Lazy");case 13:return ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return Es(t.type,!1);case 11:return Es(t.type.render,!1);case 1:return Es(t.type,!0);case 31:return ci("Activity");default:return""}}function Ts(t){try{var n="";do n+=Pa(t),t=t.return;while(t);return n}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}function Ke(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function za(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Dc(t){var n=za(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),l=""+t[n];if(!t.hasOwnProperty(n)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,f=r.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(b){l=""+b,f.call(this,b)}}),Object.defineProperty(t,n,{enumerable:r.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function xs(t){t._valueTracker||(t._valueTracker=Dc(t))}function Ba(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),l="";return t&&(l=za(t)?t.checked?"true":"false":t.value),t=l,t!==r?(n.setValue(t),!0):!1}function jr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Ic=/[\n"\\]/g;function ge(t){return t.replace(Ic,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function an(t,n,r,l,c,f,b,E){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),n!=null?b==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Ke(n)):t.value!==""+Ke(n)&&(t.value=""+Ke(n)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),n!=null?Bi(t,b,Ke(n)):r!=null?Bi(t,b,Ke(r)):l!=null&&t.removeAttribute("value"),c==null&&f!=null&&(t.defaultChecked=!!f),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Ke(E):t.removeAttribute("name")}function kr(t,n,r,l,c,f,b,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),n!=null||r!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;r=r!=null?""+Ke(r):"",n=n!=null?""+Ke(n):r,E||n===t.value||(t.value=n),t.defaultValue=n}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=E?t.checked:!!l,t.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Bi(t,n,r){n==="number"&&jr(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function hi(t,n,r,l){if(t=t.options,n){n={};for(var c=0;c<r.length;c++)n["$"+r[c]]=!0;for(r=0;r<t.length;r++)c=n.hasOwnProperty("$"+t[r].value),t[r].selected!==c&&(t[r].selected=c),c&&l&&(t[r].defaultSelected=!0)}else{for(r=""+Ke(r),n=null,c=0;c<t.length;c++){if(t[c].value===r){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Xt(t,n,r){if(n!=null&&(n=""+Ke(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+Ke(r):""}function Ur(t,n,r,l){if(n==null){if(l!=null){if(r!=null)throw Error(a(92));if(qt(l)){if(1<l.length)throw Error(a(93));l=l[0]}r=l}r==null&&(r=""),n=r}r=Ke(n),t.defaultValue=r,l=t.textContent,l===r&&l!==""&&l!==null&&(t.value=l)}function vn(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var Lr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bo(t,n,r){var l=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,r):typeof r!="number"||r===0||Lr.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function qa(t,n,r){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,r!=null){for(var l in r)!r.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in n)l=n[c],n.hasOwnProperty(c)&&r[c]!==l&&bo(t,c,l)}else for(var f in n)n.hasOwnProperty(f)&&bo(t,f,n[f])}function Ha(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function As(t){return Mc.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var fi=null;function _n(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var di=null,mi=null;function Ga(t){var n=Bn(t);if(n&&(t=n.stateNode)){var r=t[me]||null;t:switch(t=n.stateNode,n.type){case"input":if(an(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+ge(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var l=r[n];if(l!==t&&l.form===t.form){var c=l[me]||null;if(!c)throw Error(a(90));an(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<r.length;n++)l=r[n],l.form===t.form&&Ba(l)}break t;case"textarea":Xt(t,r.value,r.defaultValue);break t;case"select":n=r.value,n!=null&&hi(t,!!r.multiple,n,!1)}}}var Gn=!1;function Eo(t,n,r){if(Gn)return t(n,r);Gn=!0;try{var l=t(n);return l}finally{if(Gn=!1,(di!==null||mi!==null)&&(mu(),di&&(n=di,t=mi,mi=di=null,Ga(n),t)))for(n=0;n<t.length;n++)Ga(t[n])}}function Pr(t,n){var r=t.stateNode;if(r===null)return null;var l=r[me]||null;if(l===null)return null;r=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(a(231,n,typeof r));return r}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bn=!1;if(Mn)try{var zr={};Object.defineProperty(zr,"passive",{get:function(){bn=!0}}),window.addEventListener("test",zr,zr),window.removeEventListener("test",zr,zr)}catch{bn=!1}var Qn=null,qi=null,gi=null;function Qa(){if(gi)return gi;var t,n=qi,r=n.length,l,c="value"in Qn?Qn.value:Qn.textContent,f=c.length;for(t=0;t<r&&n[t]===c[t];t++);var b=r-t;for(l=1;l<=b&&n[r-l]===c[f-l];l++);return gi=c.slice(t,1<l?1-l:void 0)}function Fn(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Yn(){return!0}function Fa(){return!1}function Re(t){function n(r,l,c,f,b){this._reactName=r,this._targetInst=c,this.type=l,this.nativeEvent=f,this.target=b,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(r=t[E],this[E]=r?r(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Yn:Fa,this.isPropagationStopped=Fa,this}return T(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Yn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Yn)},persist:function(){},isPersistent:Yn}),n}var Ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ss=Re(Ht),Br=T({},Ht,{view:0,detail:0}),To=Re(Br),ws,Rs,Kn,qr=T({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kn&&(Kn&&t.type==="mousemove"?(ws=t.screenX-Kn.screenX,Rs=t.screenY-Kn.screenY):Rs=ws=0,Kn=t),ws)},movementY:function(t){return"movementY"in t?t.movementY:Rs}}),En=Re(qr),xo=T({},qr,{dataTransfer:0}),Oc=Re(xo),Hr=T({},Br,{relatedTarget:0}),Cs=Re(Hr),Ya=T({},Ht,{animationName:0,elapsedTime:0,pseudoElement:0}),Ns=Re(Ya),Ao=T({},Ht,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ds=Re(Ao),jc=T({},Ht,{data:0}),Ka=Re(jc),Gr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},So={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xa(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=wo[t])?!!n[t]:!1}function Qr(){return Xa}var Ro=T({},Br,{key:function(t){if(t.key){var n=Gr[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Fn(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?So[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qr,charCode:function(t){return t.type==="keypress"?Fn(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fn(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Is=Re(Ro),Co=T({},qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$a=Re(Co),pi=T({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qr}),No=Re(pi),Do=T({},Ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),Io=Re(Do),Vo=T({},qr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vs=Re(Vo),Xe=T({},Ht,{newState:0,oldState:0}),Mo=Re(Xe),Oo=[9,13,27,32],Xn=Mn&&"CompositionEvent"in window,u=null;Mn&&"documentMode"in document&&(u=document.documentMode);var m=Mn&&"TextEvent"in window&&!u,y=Mn&&(!Xn||u&&8<u&&11>=u),x=" ",L=!1;function Q(t,n){switch(t){case"keyup":return Oo.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rt(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ot=!1;function Ee(t,n){switch(t){case"compositionend":return rt(n);case"keypress":return n.which!==32?null:(L=!0,x);case"textInput":return t=n.data,t===x&&L?null:t;default:return null}}function jt(t,n){if(Ot)return t==="compositionend"||!Xn&&Q(t,n)?(t=Qa(),gi=qi=Qn=null,Ot=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return y&&n.locale!=="ko"?null:n.data;default:return null}}var Ce={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Te(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Ce[t.type]:n==="textarea"}function yi(t,n,r,l){di?mi?mi.push(l):mi=[l]:di=l,n=bu(n,"onChange"),0<n.length&&(r=new Ss("onChange","change",null,r,l),t.push({event:r,listeners:n}))}var Oe=null,$n=null;function Za(t){Vp(t,0)}function jo(t){var n=qn(t);if(Ba(n))return t}function Wd(t,n){if(t==="change")return n}var tm=!1;if(Mn){var kc;if(Mn){var Uc="oninput"in document;if(!Uc){var em=document.createElement("div");em.setAttribute("oninput","return;"),Uc=typeof em.oninput=="function"}kc=Uc}else kc=!1;tm=kc&&(!document.documentMode||9<document.documentMode)}function nm(){Oe&&(Oe.detachEvent("onpropertychange",im),$n=Oe=null)}function im(t){if(t.propertyName==="value"&&jo($n)){var n=[];yi(n,$n,t,_n(t)),Eo(Za,n)}}function N_(t,n,r){t==="focusin"?(nm(),Oe=n,$n=r,Oe.attachEvent("onpropertychange",im)):t==="focusout"&&nm()}function D_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jo($n)}function I_(t,n){if(t==="click")return jo(n)}function V_(t,n){if(t==="input"||t==="change")return jo(n)}function M_(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var ln=typeof Object.is=="function"?Object.is:M_;function Ja(t,n){if(ln(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),l=Object.keys(n);if(r.length!==l.length)return!1;for(l=0;l<r.length;l++){var c=r[l];if(!Ar.call(n,c)||!ln(t[c],n[c]))return!1}return!0}function rm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sm(t,n){var r=rm(t);t=0;for(var l;r;){if(r.nodeType===3){if(l=t+r.textContent.length,t<=n&&l>=n)return{node:r,offset:n-t};t=l}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=rm(r)}}function am(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?am(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function lm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=jr(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=jr(t.document)}return n}function Lc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var O_=Mn&&"documentMode"in document&&11>=document.documentMode,Ms=null,Pc=null,Wa=null,zc=!1;function om(t,n,r){var l=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;zc||Ms==null||Ms!==jr(l)||(l=Ms,"selectionStart"in l&&Lc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Wa&&Ja(Wa,l)||(Wa=l,l=bu(Pc,"onSelect"),0<l.length&&(n=new Ss("onSelect","select",null,n,r),t.push({event:n,listeners:l}),n.target=Ms)))}function Fr(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var Os={animationend:Fr("Animation","AnimationEnd"),animationiteration:Fr("Animation","AnimationIteration"),animationstart:Fr("Animation","AnimationStart"),transitionrun:Fr("Transition","TransitionRun"),transitionstart:Fr("Transition","TransitionStart"),transitioncancel:Fr("Transition","TransitionCancel"),transitionend:Fr("Transition","TransitionEnd")},Bc={},um={};Mn&&(um=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function Yr(t){if(Bc[t])return Bc[t];if(!Os[t])return t;var n=Os[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in um)return Bc[t]=n[r];return t}var cm=Yr("animationend"),hm=Yr("animationiteration"),fm=Yr("animationstart"),j_=Yr("transitionrun"),k_=Yr("transitionstart"),U_=Yr("transitioncancel"),dm=Yr("transitionend"),mm=new Map,qc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qc.push("scrollEnd");function On(t,n){mm.set(t,n),Vn(n,[t])}var gm=new WeakMap;function Tn(t,n){if(typeof t=="object"&&t!==null){var r=gm.get(t);return r!==void 0?r:(n={value:t,source:n,stack:Ts(n)},gm.set(t,n),n)}return{value:t,source:n,stack:Ts(n)}}var xn=[],js=0,Hc=0;function ko(){for(var t=js,n=Hc=js=0;n<t;){var r=xn[n];xn[n++]=null;var l=xn[n];xn[n++]=null;var c=xn[n];xn[n++]=null;var f=xn[n];if(xn[n++]=null,l!==null&&c!==null){var b=l.pending;b===null?c.next=c:(c.next=b.next,b.next=c),l.pending=c}f!==0&&pm(r,c,f)}}function Uo(t,n,r,l){xn[js++]=t,xn[js++]=n,xn[js++]=r,xn[js++]=l,Hc|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Gc(t,n,r,l){return Uo(t,n,r,l),Lo(t)}function ks(t,n){return Uo(t,null,null,n),Lo(t)}function pm(t,n,r){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r);for(var c=!1,f=t.return;f!==null;)f.childLanes|=r,l=f.alternate,l!==null&&(l.childLanes|=r),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(c=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,c&&n!==null&&(c=31-Be(r),t=f.hiddenUpdates,l=t[c],l===null?t[c]=[n]:l.push(n),n.lane=r|536870912),f):null}function Lo(t){if(50<Al)throw Al=0,$h=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var Us={};function L_(t,n,r,l){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,n,r,l){return new L_(t,n,r,l)}function Qc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vi(t,n){var r=t.alternate;return r===null?(r=on(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function ym(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Po(t,n,r,l,c,f){var b=0;if(l=t,typeof t=="function")Qc(t)&&(b=1);else if(typeof t=="string")b=zb(t,r,gt.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case D:return t=on(31,r,n,c),t.elementType=D,t.lanes=f,t;case B:return Kr(r.children,c,f,n);case G:b=8,c|=24;break;case Y:return t=on(12,r,n,c|2),t.elementType=Y,t.lanes=f,t;case Z:return t=on(13,r,n,c),t.elementType=Z,t.lanes=f,t;case dt:return t=on(19,r,n,c),t.elementType=dt,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ft:case lt:b=10;break t;case at:b=9;break t;case X:b=11;break t;case N:b=14;break t;case S:b=16,l=null;break t}b=29,r=Error(a(130,t===null?"null":typeof t,"")),l=null}return n=on(b,r,n,c),n.elementType=t,n.type=l,n.lanes=f,n}function Kr(t,n,r,l){return t=on(7,t,l,n),t.lanes=r,t}function Fc(t,n,r){return t=on(6,t,null,n),t.lanes=r,t}function Yc(t,n,r){return n=on(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Ls=[],Ps=0,zo=null,Bo=0,An=[],Sn=0,Xr=null,_i=1,bi="";function $r(t,n){Ls[Ps++]=Bo,Ls[Ps++]=zo,zo=t,Bo=n}function vm(t,n,r){An[Sn++]=_i,An[Sn++]=bi,An[Sn++]=Xr,Xr=t;var l=_i;t=bi;var c=32-Be(l)-1;l&=~(1<<c),r+=1;var f=32-Be(n)+c;if(30<f){var b=c-c%5;f=(l&(1<<b)-1).toString(32),l>>=b,c-=b,_i=1<<32-Be(n)+c|r<<c|l,bi=f+t}else _i=1<<f|r<<c|l,bi=t}function Kc(t){t.return!==null&&($r(t,1),vm(t,1,0))}function Xc(t){for(;t===zo;)zo=Ls[--Ps],Ls[Ps]=null,Bo=Ls[--Ps],Ls[Ps]=null;for(;t===Xr;)Xr=An[--Sn],An[Sn]=null,bi=An[--Sn],An[Sn]=null,_i=An[--Sn],An[Sn]=null}var $e=null,le=null,zt=!1,Zr=null,Zn=!1,$c=Error(a(519));function Jr(t){var n=Error(a(418,""));throw nl(Tn(n,t)),$c}function _m(t){var n=t.stateNode,r=t.type,l=t.memoizedProps;switch(n[be]=t,n[me]=l,r){case"dialog":Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":case"embed":Vt("load",n);break;case"video":case"audio":for(r=0;r<wl.length;r++)Vt(wl[r],n);break;case"source":Vt("error",n);break;case"img":case"image":case"link":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"input":Vt("invalid",n),kr(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),xs(n);break;case"select":Vt("invalid",n);break;case"textarea":Vt("invalid",n),Ur(n,l.value,l.defaultValue,l.children),xs(n)}r=l.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||l.suppressHydrationWarning===!0||kp(n.textContent,r)?(l.popover!=null&&(Vt("beforetoggle",n),Vt("toggle",n)),l.onScroll!=null&&Vt("scroll",n),l.onScrollEnd!=null&&Vt("scrollend",n),l.onClick!=null&&(n.onclick=Eu),n=!0):n=!1,n||Jr(t)}function bm(t){for($e=t.return;$e;)switch($e.tag){case 5:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:$e=$e.return}}function tl(t){if(t!==$e)return!1;if(!zt)return bm(t),zt=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||df(t.type,t.memoizedProps)),r=!r),r&&le&&Jr(t),bm(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));t:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8)if(r=t.data,r==="/$"){if(n===0){le=kn(t.nextSibling);break t}n--}else r!=="$"&&r!=="$!"&&r!=="$?"||n++;t=t.nextSibling}le=null}}else n===27?(n=le,rr(t.type)?(t=yf,yf=null,le=t):le=n):le=$e?kn(t.stateNode.nextSibling):null;return!0}function el(){le=$e=null,zt=!1}function Em(){var t=Zr;return t!==null&&(tn===null?tn=t:tn.push.apply(tn,t),Zr=null),t}function nl(t){Zr===null?Zr=[t]:Zr.push(t)}var Zc=J(null),Wr=null,Ei=null;function Hi(t,n,r){nt(Zc,n._currentValue),n._currentValue=r}function Ti(t){t._currentValue=Zc.current,st(Zc)}function Jc(t,n,r){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===r)break;t=t.return}}function Wc(t,n,r,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var f=c.dependencies;if(f!==null){var b=c.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=c;for(var I=0;I<n.length;I++)if(E.context===n[I]){f.lanes|=r,E=f.alternate,E!==null&&(E.lanes|=r),Jc(f.return,r,t),l||(b=null);break t}f=E.next}}else if(c.tag===18){if(b=c.return,b===null)throw Error(a(341));b.lanes|=r,f=b.alternate,f!==null&&(f.lanes|=r),Jc(b,r,t),b=null}else b=c.child;if(b!==null)b.return=c;else for(b=c;b!==null;){if(b===t){b=null;break}if(c=b.sibling,c!==null){c.return=b.return,b=c;break}b=b.return}c=b}}function il(t,n,r,l){t=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var b=c.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var E=c.type;ln(c.pendingProps.value,b.value)||(t!==null?t.push(E):t=[E])}}else if(c===de.current){if(b=c.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(Vl):t=[Vl])}c=c.return}t!==null&&Wc(n,t,r,l),n.flags|=262144}function qo(t){for(t=t.firstContext;t!==null;){if(!ln(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ts(t){Wr=t,Ei=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function qe(t){return Tm(Wr,t)}function Ho(t,n){return Wr===null&&ts(t),Tm(t,n)}function Tm(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},Ei===null){if(t===null)throw Error(a(308));Ei=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Ei=Ei.next=n;return r}var P_=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},z_=s.unstable_scheduleCallback,B_=s.unstable_NormalPriority,xe={$$typeof:lt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function th(){return{controller:new P_,data:new Map,refCount:0}}function rl(t){t.refCount--,t.refCount===0&&z_(B_,function(){t.controller.abort()})}var sl=null,eh=0,zs=0,Bs=null;function q_(t,n){if(sl===null){var r=sl=[];eh=0,zs=rf(),Bs={status:"pending",value:void 0,then:function(l){r.push(l)}}}return eh++,n.then(xm,xm),n}function xm(){if(--eh===0&&sl!==null){Bs!==null&&(Bs.status="fulfilled");var t=sl;sl=null,zs=0,Bs=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function H_(t,n){var r=[],l={status:"pending",value:null,reason:null,then:function(c){r.push(c)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var c=0;c<r.length;c++)(0,r[c])(n)},function(c){for(l.status="rejected",l.reason=c,c=0;c<r.length;c++)(0,r[c])(void 0)}),l}var Am=F.S;F.S=function(t,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&q_(t,n),Am!==null&&Am(t,n)};var es=J(null);function nh(){var t=es.current;return t!==null?t:te.pooledCache}function Go(t,n){n===null?nt(es,es.current):nt(es,n.pool)}function Sm(){var t=nh();return t===null?null:{parent:xe._currentValue,pool:t}}var al=Error(a(460)),wm=Error(a(474)),Qo=Error(a(542)),ih={then:function(){}};function Rm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Fo(){}function Cm(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(Fo,Fo),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dm(t),t;default:if(typeof n.status=="string")n.then(Fo,Fo);else{if(t=te,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=l}},function(l){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Dm(t),t}throw ll=n,al}}var ll=null;function Nm(){if(ll===null)throw Error(a(459));var t=ll;return ll=null,t}function Dm(t){if(t===al||t===Qo)throw Error(a(483))}var Gi=!1;function rh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sh(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Qi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Fi(t,n,r){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ft&2)!==0){var c=l.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),l.pending=n,n=Lo(t),pm(t,null,r),n}return Uo(t,l,n,r),Lo(t)}function ol(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,r|=l,n.lanes=r,ka(t,r)}}function ah(t,n){var r=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,r===l)){var c=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var b={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};f===null?c=f=b:f=f.next=b,r=r.next}while(r!==null);f===null?c=f=n:f=f.next=n}else c=f=n;r={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var lh=!1;function ul(){if(lh){var t=Bs;if(t!==null)throw t}}function cl(t,n,r,l){lh=!1;var c=t.updateQueue;Gi=!1;var f=c.firstBaseUpdate,b=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var I=E,z=I.next;I.next=null,b===null?f=z:b.next=z,b=I;var K=t.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==b&&(E===null?K.firstBaseUpdate=z:E.next=z,K.lastBaseUpdate=I))}if(f!==null){var W=c.baseState;b=0,K=z=I=null,E=f;do{var q=E.lane&-536870913,H=q!==E.lane;if(H?(kt&q)===q:(l&q)===q){q!==0&&q===zs&&(lh=!0),K!==null&&(K=K.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=t,yt=E;q=n;var Jt=r;switch(yt.tag){case 1:if(Et=yt.payload,typeof Et=="function"){W=Et.call(Jt,W,q);break t}W=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=yt.payload,q=typeof Et=="function"?Et.call(Jt,W,q):Et,q==null)break t;W=T({},W,q);break t;case 2:Gi=!0}}q=E.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=c.callbacks,H===null?c.callbacks=[q]:H.push(q))}else H={lane:q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?(z=K=H,I=W):K=K.next=H,b|=q;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;H=E,E=H.next,H.next=null,c.lastBaseUpdate=H,c.shared.pending=null}}while(!0);K===null&&(I=W),c.baseState=I,c.firstBaseUpdate=z,c.lastBaseUpdate=K,f===null&&(c.shared.lanes=0),tr|=b,t.lanes=b,t.memoizedState=W}}function Im(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function Vm(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Im(r[t],n)}var qs=J(null),Yo=J(0);function Mm(t,n){t=Ni,nt(Yo,t),nt(qs,n),Ni=t|n.baseLanes}function oh(){nt(Yo,Ni),nt(qs,qs.current)}function uh(){Ni=Yo.current,st(qs),st(Yo)}var Yi=0,Rt=null,$t=null,pe=null,Ko=!1,Hs=!1,ns=!1,Xo=0,hl=0,Gs=null,G_=0;function ce(){throw Error(a(321))}function ch(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!ln(t[r],n[r]))return!1;return!0}function hh(t,n,r,l,c,f){return Yi=f,Rt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,F.H=t===null||t.memoizedState===null?pg:yg,ns=!1,f=r(l,c),ns=!1,Hs&&(f=jm(n,r,l,c)),Om(t),f}function Om(t){F.H=eu;var n=$t!==null&&$t.next!==null;if(Yi=0,pe=$t=Rt=null,Ko=!1,hl=0,Gs=null,n)throw Error(a(300));t===null||Ne||(t=t.dependencies,t!==null&&qo(t)&&(Ne=!0))}function jm(t,n,r,l){Rt=t;var c=0;do{if(Hs&&(Gs=null),hl=0,Hs=!1,25<=c)throw Error(a(301));if(c+=1,pe=$t=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}F.H=Z_,f=n(r,l)}while(Hs);return f}function Q_(){var t=F.H,n=t.useState()[0];return n=typeof n.then=="function"?fl(n):n,t=t.useState()[0],($t!==null?$t.memoizedState:null)!==t&&(Rt.flags|=1024),n}function fh(){var t=Xo!==0;return Xo=0,t}function dh(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function mh(t){if(Ko){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Ko=!1}Yi=0,pe=$t=Rt=null,Hs=!1,hl=Xo=0,Gs=null}function Je(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?Rt.memoizedState=pe=t:pe=pe.next=t,pe}function ye(){if($t===null){var t=Rt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var n=pe===null?Rt.memoizedState:pe.next;if(n!==null)pe=n,$t=t;else{if(t===null)throw Rt.alternate===null?Error(a(467)):Error(a(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},pe===null?Rt.memoizedState=pe=t:pe=pe.next=t}return pe}function gh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fl(t){var n=hl;return hl+=1,Gs===null&&(Gs=[]),t=Cm(Gs,t,n),n=Rt,(pe===null?n.memoizedState:pe.next)===null&&(n=n.alternate,F.H=n===null||n.memoizedState===null?pg:yg),t}function $o(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return fl(t);if(t.$$typeof===lt)return qe(t)}throw Error(a(438,String(t)))}function ph(t){var n=null,r=Rt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var l=Rt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=gh(),Rt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),l=0;l<t;l++)r[l]=O;return n.index++,r}function xi(t,n){return typeof n=="function"?n(t):n}function Zo(t){var n=ye();return yh(n,$t,t)}function yh(t,n,r){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=r;var c=t.baseQueue,f=l.pending;if(f!==null){if(c!==null){var b=c.next;c.next=f.next,f.next=b}n.baseQueue=c=f,l.pending=null}if(f=t.baseState,c===null)t.memoizedState=f;else{n=c.next;var E=b=null,I=null,z=n,K=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(kt&W)===W:(Yi&W)===W){var q=z.revertLane;if(q===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===zs&&(K=!0);else if((Yi&q)===q){z=z.next,q===zs&&(K=!0);continue}else W={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(E=I=W,b=f):I=I.next=W,Rt.lanes|=q,tr|=q;W=z.action,ns&&r(f,W),f=z.hasEagerState?z.eagerState:r(f,W)}else q={lane:W,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},I===null?(E=I=q,b=f):I=I.next=q,Rt.lanes|=W,tr|=W;z=z.next}while(z!==null&&z!==n);if(I===null?b=f:I.next=E,!ln(f,t.memoizedState)&&(Ne=!0,K&&(r=Bs,r!==null)))throw r;t.memoizedState=f,t.baseState=b,t.baseQueue=I,l.lastRenderedState=f}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function vh(t){var n=ye(),r=n.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=t;var l=r.dispatch,c=r.pending,f=n.memoizedState;if(c!==null){r.pending=null;var b=c=c.next;do f=t(f,b.action),b=b.next;while(b!==c);ln(f,n.memoizedState)||(Ne=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),r.lastRenderedState=f}return[f,l]}function km(t,n,r){var l=Rt,c=ye(),f=zt;if(f){if(r===void 0)throw Error(a(407));r=r()}else r=n();var b=!ln(($t||c).memoizedState,r);b&&(c.memoizedState=r,Ne=!0),c=c.queue;var E=Pm.bind(null,l,c,t);if(dl(2048,8,E,[t]),c.getSnapshot!==n||b||pe!==null&&pe.memoizedState.tag&1){if(l.flags|=2048,Qs(9,Jo(),Lm.bind(null,l,c,r,n),null),te===null)throw Error(a(349));f||(Yi&124)!==0||Um(l,n,r)}return r}function Um(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=Rt.updateQueue,n===null?(n=gh(),Rt.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function Lm(t,n,r,l){n.value=r,n.getSnapshot=l,zm(n)&&Bm(t)}function Pm(t,n,r){return r(function(){zm(n)&&Bm(t)})}function zm(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!ln(t,r)}catch{return!0}}function Bm(t){var n=ks(t,2);n!==null&&dn(n,t,2)}function _h(t){var n=Je();if(typeof t=="function"){var r=t;if(t=r(),ns){sn(!0);try{r()}finally{sn(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:t},n}function qm(t,n,r,l){return t.baseState=r,yh(t,$t,typeof l=="function"?l:xi)}function F_(t,n,r,l,c){if(tu(t))throw Error(a(485));if(t=n.action,t!==null){var f={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){f.listeners.push(b)}};F.T!==null?r(!0):f.isTransition=!1,l(f),r=n.pending,r===null?(f.next=n.pending=f,Hm(n,f)):(f.next=r.next,n.pending=r.next=f)}}function Hm(t,n){var r=n.action,l=n.payload,c=t.state;if(n.isTransition){var f=F.T,b={};F.T=b;try{var E=r(c,l),I=F.S;I!==null&&I(b,E),Gm(t,n,E)}catch(z){bh(t,n,z)}finally{F.T=f}}else try{f=r(c,l),Gm(t,n,f)}catch(z){bh(t,n,z)}}function Gm(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(l){Qm(t,n,l)},function(l){return bh(t,n,l)}):Qm(t,n,r)}function Qm(t,n,r){n.status="fulfilled",n.value=r,Fm(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,Hm(t,r)))}function bh(t,n,r){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=r,Fm(n),n=n.next;while(n!==l)}t.action=null}function Fm(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Ym(t,n){return n}function Km(t,n){if(zt){var r=te.formState;if(r!==null){t:{var l=Rt;if(zt){if(le){e:{for(var c=le,f=Zn;c.nodeType!==8;){if(!f){c=null;break e}if(c=kn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){le=kn(c.nextSibling),l=c.data==="F!";break t}}Jr(l)}l=!1}l&&(n=r[0])}}return r=Je(),r.memoizedState=r.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ym,lastRenderedState:n},r.queue=l,r=dg.bind(null,Rt,l),l.dispatch=r,l=_h(!1),f=Sh.bind(null,Rt,!1,l.queue),l=Je(),c={state:n,dispatch:null,action:t,pending:null},l.queue=c,r=F_.bind(null,Rt,c,f,r),c.dispatch=r,l.memoizedState=t,[n,r,!1]}function Xm(t){var n=ye();return $m(n,$t,t)}function $m(t,n,r){if(n=yh(t,n,Ym)[0],t=Zo(xi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=fl(n)}catch(b){throw b===al?Qo:b}else l=n;n=ye();var c=n.queue,f=c.dispatch;return r!==n.memoizedState&&(Rt.flags|=2048,Qs(9,Jo(),Y_.bind(null,c,r),null)),[l,f,t]}function Y_(t,n){t.action=n}function Zm(t){var n=ye(),r=$t;if(r!==null)return $m(n,r,t);ye(),n=n.memoizedState,r=ye();var l=r.queue.dispatch;return r.memoizedState=t,[n,l,!1]}function Qs(t,n,r,l){return t={tag:t,create:r,deps:l,inst:n,next:null},n=Rt.updateQueue,n===null&&(n=gh(),Rt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(l=r.next,r.next=t,t.next=l,n.lastEffect=t),t}function Jo(){return{destroy:void 0,resource:void 0}}function Jm(){return ye().memoizedState}function Wo(t,n,r,l){var c=Je();l=l===void 0?null:l,Rt.flags|=t,c.memoizedState=Qs(1|n,Jo(),r,l)}function dl(t,n,r,l){var c=ye();l=l===void 0?null:l;var f=c.memoizedState.inst;$t!==null&&l!==null&&ch(l,$t.memoizedState.deps)?c.memoizedState=Qs(n,f,r,l):(Rt.flags|=t,c.memoizedState=Qs(1|n,f,r,l))}function Wm(t,n){Wo(8390656,8,t,n)}function tg(t,n){dl(2048,8,t,n)}function eg(t,n){return dl(4,2,t,n)}function ng(t,n){return dl(4,4,t,n)}function ig(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function rg(t,n,r){r=r!=null?r.concat([t]):null,dl(4,4,ig.bind(null,n,t),r)}function Eh(){}function sg(t,n){var r=ye();n=n===void 0?null:n;var l=r.memoizedState;return n!==null&&ch(n,l[1])?l[0]:(r.memoizedState=[t,n],t)}function ag(t,n){var r=ye();n=n===void 0?null:n;var l=r.memoizedState;if(n!==null&&ch(n,l[1]))return l[0];if(l=t(),ns){sn(!0);try{t()}finally{sn(!1)}}return r.memoizedState=[l,n],l}function Th(t,n,r){return r===void 0||(Yi&1073741824)!==0?t.memoizedState=n:(t.memoizedState=r,t=up(),Rt.lanes|=t,tr|=t,r)}function lg(t,n,r,l){return ln(r,n)?r:qs.current!==null?(t=Th(t,r,l),ln(t,n)||(Ne=!0),t):(Yi&42)===0?(Ne=!0,t.memoizedState=r):(t=up(),Rt.lanes|=t,tr|=t,n)}function og(t,n,r,l,c){var f=it.p;it.p=f!==0&&8>f?f:8;var b=F.T,E={};F.T=E,Sh(t,!1,n,r);try{var I=c(),z=F.S;if(z!==null&&z(E,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var K=H_(I,l);ml(t,n,K,fn(t))}else ml(t,n,l,fn(t))}catch(W){ml(t,n,{then:function(){},status:"rejected",reason:W},fn())}finally{it.p=f,F.T=b}}function K_(){}function xh(t,n,r,l){if(t.tag!==5)throw Error(a(476));var c=ug(t).queue;og(t,c,n,ht,r===null?K_:function(){return cg(t),r(l)})}function ug(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:ht,baseState:ht,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:ht},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function cg(t){var n=ug(t).next.queue;ml(t,n,{},fn())}function Ah(){return qe(Vl)}function hg(){return ye().memoizedState}function fg(){return ye().memoizedState}function X_(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=fn();t=Qi(r);var l=Fi(n,t,r);l!==null&&(dn(l,n,r),ol(l,n,r)),n={cache:th()},t.payload=n;return}n=n.return}}function $_(t,n,r){var l=fn();r={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null},tu(t)?mg(n,r):(r=Gc(t,n,r,l),r!==null&&(dn(r,t,l),gg(r,n,l)))}function dg(t,n,r){var l=fn();ml(t,n,r,l)}function ml(t,n,r,l){var c={lane:l,revertLane:0,action:r,hasEagerState:!1,eagerState:null,next:null};if(tu(t))mg(n,c);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var b=n.lastRenderedState,E=f(b,r);if(c.hasEagerState=!0,c.eagerState=E,ln(E,b))return Uo(t,n,c,0),te===null&&ko(),!1}catch{}finally{}if(r=Gc(t,n,c,l),r!==null)return dn(r,t,l),gg(r,n,l),!0}return!1}function Sh(t,n,r,l){if(l={lane:2,revertLane:rf(),action:l,hasEagerState:!1,eagerState:null,next:null},tu(t)){if(n)throw Error(a(479))}else n=Gc(t,r,l,2),n!==null&&dn(n,t,2)}function tu(t){var n=t.alternate;return t===Rt||n!==null&&n===Rt}function mg(t,n){Hs=Ko=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function gg(t,n,r){if((r&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,r|=l,n.lanes=r,ka(t,r)}}var eu={readContext:qe,use:$o,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce,useHostTransitionStatus:ce,useFormState:ce,useActionState:ce,useOptimistic:ce,useMemoCache:ce,useCacheRefresh:ce},pg={readContext:qe,use:$o,useCallback:function(t,n){return Je().memoizedState=[t,n===void 0?null:n],t},useContext:qe,useEffect:Wm,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,Wo(4194308,4,ig.bind(null,n,t),r)},useLayoutEffect:function(t,n){return Wo(4194308,4,t,n)},useInsertionEffect:function(t,n){Wo(4,2,t,n)},useMemo:function(t,n){var r=Je();n=n===void 0?null:n;var l=t();if(ns){sn(!0);try{t()}finally{sn(!1)}}return r.memoizedState=[l,n],l},useReducer:function(t,n,r){var l=Je();if(r!==void 0){var c=r(n);if(ns){sn(!0);try{r(n)}finally{sn(!1)}}}else c=n;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=$_.bind(null,Rt,t),[l.memoizedState,t]},useRef:function(t){var n=Je();return t={current:t},n.memoizedState=t},useState:function(t){t=_h(t);var n=t.queue,r=dg.bind(null,Rt,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:Eh,useDeferredValue:function(t,n){var r=Je();return Th(r,t,n)},useTransition:function(){var t=_h(!1);return t=og.bind(null,Rt,t.queue,!0,!1),Je().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var l=Rt,c=Je();if(zt){if(r===void 0)throw Error(a(407));r=r()}else{if(r=n(),te===null)throw Error(a(349));(kt&124)!==0||Um(l,n,r)}c.memoizedState=r;var f={value:r,getSnapshot:n};return c.queue=f,Wm(Pm.bind(null,l,f,t),[t]),l.flags|=2048,Qs(9,Jo(),Lm.bind(null,l,f,r,n),null),r},useId:function(){var t=Je(),n=te.identifierPrefix;if(zt){var r=bi,l=_i;r=(l&~(1<<32-Be(l)-1)).toString(32)+r,n="«"+n+"R"+r,r=Xo++,0<r&&(n+="H"+r.toString(32)),n+="»"}else r=G_++,n="«"+n+"r"+r.toString(32)+"»";return t.memoizedState=n},useHostTransitionStatus:Ah,useFormState:Km,useActionState:Km,useOptimistic:function(t){var n=Je();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Sh.bind(null,Rt,!0,r),r.dispatch=n,[t,n]},useMemoCache:ph,useCacheRefresh:function(){return Je().memoizedState=X_.bind(null,Rt)}},yg={readContext:qe,use:$o,useCallback:sg,useContext:qe,useEffect:tg,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:ng,useMemo:ag,useReducer:Zo,useRef:Jm,useState:function(){return Zo(xi)},useDebugValue:Eh,useDeferredValue:function(t,n){var r=ye();return lg(r,$t.memoizedState,t,n)},useTransition:function(){var t=Zo(xi)[0],n=ye().memoizedState;return[typeof t=="boolean"?t:fl(t),n]},useSyncExternalStore:km,useId:hg,useHostTransitionStatus:Ah,useFormState:Xm,useActionState:Xm,useOptimistic:function(t,n){var r=ye();return qm(r,$t,t,n)},useMemoCache:ph,useCacheRefresh:fg},Z_={readContext:qe,use:$o,useCallback:sg,useContext:qe,useEffect:tg,useImperativeHandle:rg,useInsertionEffect:eg,useLayoutEffect:ng,useMemo:ag,useReducer:vh,useRef:Jm,useState:function(){return vh(xi)},useDebugValue:Eh,useDeferredValue:function(t,n){var r=ye();return $t===null?Th(r,t,n):lg(r,$t.memoizedState,t,n)},useTransition:function(){var t=vh(xi)[0],n=ye().memoizedState;return[typeof t=="boolean"?t:fl(t),n]},useSyncExternalStore:km,useId:hg,useHostTransitionStatus:Ah,useFormState:Zm,useActionState:Zm,useOptimistic:function(t,n){var r=ye();return $t!==null?qm(r,$t,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:ph,useCacheRefresh:fg},Fs=null,gl=0;function nu(t){var n=gl;return gl+=1,Fs===null&&(Fs=[]),Cm(Fs,t,n)}function pl(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function iu(t,n){throw n.$$typeof===A?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function vg(t){var n=t._init;return n(t._payload)}function _g(t){function n(U,j){if(t){var P=U.deletions;P===null?(U.deletions=[j],U.flags|=16):P.push(j)}}function r(U,j){if(!t)return null;for(;j!==null;)n(U,j),j=j.sibling;return null}function l(U){for(var j=new Map;U!==null;)U.key!==null?j.set(U.key,U):j.set(U.index,U),U=U.sibling;return j}function c(U,j){return U=vi(U,j),U.index=0,U.sibling=null,U}function f(U,j,P){return U.index=P,t?(P=U.alternate,P!==null?(P=P.index,P<j?(U.flags|=67108866,j):P):(U.flags|=67108866,j)):(U.flags|=1048576,j)}function b(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function E(U,j,P,$){return j===null||j.tag!==6?(j=Fc(P,U.mode,$),j.return=U,j):(j=c(j,P),j.return=U,j)}function I(U,j,P,$){var ct=P.type;return ct===B?K(U,j,P.props.children,$,P.key):j!==null&&(j.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===S&&vg(ct)===j.type)?(j=c(j,P.props),pl(j,P),j.return=U,j):(j=Po(P.type,P.key,P.props,null,U.mode,$),pl(j,P),j.return=U,j)}function z(U,j,P,$){return j===null||j.tag!==4||j.stateNode.containerInfo!==P.containerInfo||j.stateNode.implementation!==P.implementation?(j=Yc(P,U.mode,$),j.return=U,j):(j=c(j,P.children||[]),j.return=U,j)}function K(U,j,P,$,ct){return j===null||j.tag!==7?(j=Kr(P,U.mode,$,ct),j.return=U,j):(j=c(j,P),j.return=U,j)}function W(U,j,P){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Fc(""+j,U.mode,P),j.return=U,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case w:return P=Po(j.type,j.key,j.props,null,U.mode,P),pl(P,j),P.return=U,P;case k:return j=Yc(j,U.mode,P),j.return=U,j;case S:var $=j._init;return j=$(j._payload),W(U,j,P)}if(qt(j)||V(j))return j=Kr(j,U.mode,P,null),j.return=U,j;if(typeof j.then=="function")return W(U,nu(j),P);if(j.$$typeof===lt)return W(U,Ho(U,j),P);iu(U,j)}return null}function q(U,j,P,$){var ct=j!==null?j.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return ct!==null?null:E(U,j,""+P,$);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case w:return P.key===ct?I(U,j,P,$):null;case k:return P.key===ct?z(U,j,P,$):null;case S:return ct=P._init,P=ct(P._payload),q(U,j,P,$)}if(qt(P)||V(P))return ct!==null?null:K(U,j,P,$,null);if(typeof P.then=="function")return q(U,j,nu(P),$);if(P.$$typeof===lt)return q(U,j,Ho(U,P),$);iu(U,P)}return null}function H(U,j,P,$,ct){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return U=U.get(P)||null,E(j,U,""+$,ct);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return U=U.get($.key===null?P:$.key)||null,I(j,U,$,ct);case k:return U=U.get($.key===null?P:$.key)||null,z(j,U,$,ct);case S:var Nt=$._init;return $=Nt($._payload),H(U,j,P,$,ct)}if(qt($)||V($))return U=U.get(P)||null,K(j,U,$,ct,null);if(typeof $.then=="function")return H(U,j,P,nu($),ct);if($.$$typeof===lt)return H(U,j,P,Ho(j,$),ct);iu(j,$)}return null}function Et(U,j,P,$){for(var ct=null,Nt=null,mt=j,vt=j=0,Ie=null;mt!==null&&vt<P.length;vt++){mt.index>vt?(Ie=mt,mt=null):Ie=mt.sibling;var Pt=q(U,mt,P[vt],$);if(Pt===null){mt===null&&(mt=Ie);break}t&&mt&&Pt.alternate===null&&n(U,mt),j=f(Pt,j,vt),Nt===null?ct=Pt:Nt.sibling=Pt,Nt=Pt,mt=Ie}if(vt===P.length)return r(U,mt),zt&&$r(U,vt),ct;if(mt===null){for(;vt<P.length;vt++)mt=W(U,P[vt],$),mt!==null&&(j=f(mt,j,vt),Nt===null?ct=mt:Nt.sibling=mt,Nt=mt);return zt&&$r(U,vt),ct}for(mt=l(mt);vt<P.length;vt++)Ie=H(mt,U,vt,P[vt],$),Ie!==null&&(t&&Ie.alternate!==null&&mt.delete(Ie.key===null?vt:Ie.key),j=f(Ie,j,vt),Nt===null?ct=Ie:Nt.sibling=Ie,Nt=Ie);return t&&mt.forEach(function(ur){return n(U,ur)}),zt&&$r(U,vt),ct}function yt(U,j,P,$){if(P==null)throw Error(a(151));for(var ct=null,Nt=null,mt=j,vt=j=0,Ie=null,Pt=P.next();mt!==null&&!Pt.done;vt++,Pt=P.next()){mt.index>vt?(Ie=mt,mt=null):Ie=mt.sibling;var ur=q(U,mt,Pt.value,$);if(ur===null){mt===null&&(mt=Ie);break}t&&mt&&ur.alternate===null&&n(U,mt),j=f(ur,j,vt),Nt===null?ct=ur:Nt.sibling=ur,Nt=ur,mt=Ie}if(Pt.done)return r(U,mt),zt&&$r(U,vt),ct;if(mt===null){for(;!Pt.done;vt++,Pt=P.next())Pt=W(U,Pt.value,$),Pt!==null&&(j=f(Pt,j,vt),Nt===null?ct=Pt:Nt.sibling=Pt,Nt=Pt);return zt&&$r(U,vt),ct}for(mt=l(mt);!Pt.done;vt++,Pt=P.next())Pt=H(mt,U,vt,Pt.value,$),Pt!==null&&(t&&Pt.alternate!==null&&mt.delete(Pt.key===null?vt:Pt.key),j=f(Pt,j,vt),Nt===null?ct=Pt:Nt.sibling=Pt,Nt=Pt);return t&&mt.forEach(function(Jb){return n(U,Jb)}),zt&&$r(U,vt),ct}function Jt(U,j,P,$){if(typeof P=="object"&&P!==null&&P.type===B&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case w:t:{for(var ct=P.key;j!==null;){if(j.key===ct){if(ct=P.type,ct===B){if(j.tag===7){r(U,j.sibling),$=c(j,P.props.children),$.return=U,U=$;break t}}else if(j.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===S&&vg(ct)===j.type){r(U,j.sibling),$=c(j,P.props),pl($,P),$.return=U,U=$;break t}r(U,j);break}else n(U,j);j=j.sibling}P.type===B?($=Kr(P.props.children,U.mode,$,P.key),$.return=U,U=$):($=Po(P.type,P.key,P.props,null,U.mode,$),pl($,P),$.return=U,U=$)}return b(U);case k:t:{for(ct=P.key;j!==null;){if(j.key===ct)if(j.tag===4&&j.stateNode.containerInfo===P.containerInfo&&j.stateNode.implementation===P.implementation){r(U,j.sibling),$=c(j,P.children||[]),$.return=U,U=$;break t}else{r(U,j);break}else n(U,j);j=j.sibling}$=Yc(P,U.mode,$),$.return=U,U=$}return b(U);case S:return ct=P._init,P=ct(P._payload),Jt(U,j,P,$)}if(qt(P))return Et(U,j,P,$);if(V(P)){if(ct=V(P),typeof ct!="function")throw Error(a(150));return P=ct.call(P),yt(U,j,P,$)}if(typeof P.then=="function")return Jt(U,j,nu(P),$);if(P.$$typeof===lt)return Jt(U,j,Ho(U,P),$);iu(U,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,j!==null&&j.tag===6?(r(U,j.sibling),$=c(j,P),$.return=U,U=$):(r(U,j),$=Fc(P,U.mode,$),$.return=U,U=$),b(U)):r(U,j)}return function(U,j,P,$){try{gl=0;var ct=Jt(U,j,P,$);return Fs=null,ct}catch(mt){if(mt===al||mt===Qo)throw mt;var Nt=on(29,mt,null,U.mode);return Nt.lanes=$,Nt.return=U,Nt}finally{}}}var Ys=_g(!0),bg=_g(!1),wn=J(null),Jn=null;function Ki(t){var n=t.alternate;nt(Ae,Ae.current&1),nt(wn,t),Jn===null&&(n===null||qs.current!==null||n.memoizedState!==null)&&(Jn=t)}function Eg(t){if(t.tag===22){if(nt(Ae,Ae.current),nt(wn,t),Jn===null){var n=t.alternate;n!==null&&n.memoizedState!==null&&(Jn=t)}}else Xi()}function Xi(){nt(Ae,Ae.current),nt(wn,wn.current)}function Ai(t){st(wn),Jn===t&&(Jn=null),st(Ae)}var Ae=J(0);function ru(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||pf(r)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function wh(t,n,r,l){n=t.memoizedState,r=r(l,n),r=r==null?n:T({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Rh={enqueueSetState:function(t,n,r){t=t._reactInternals;var l=fn(),c=Qi(l);c.payload=n,r!=null&&(c.callback=r),n=Fi(t,c,l),n!==null&&(dn(n,t,l),ol(n,t,l))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var l=fn(),c=Qi(l);c.tag=1,c.payload=n,r!=null&&(c.callback=r),n=Fi(t,c,l),n!==null&&(dn(n,t,l),ol(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=fn(),l=Qi(r);l.tag=2,n!=null&&(l.callback=n),n=Fi(t,l,r),n!==null&&(dn(n,t,r),ol(n,t,r))}};function Tg(t,n,r,l,c,f,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,b):n.prototype&&n.prototype.isPureReactComponent?!Ja(r,l)||!Ja(c,f):!0}function xg(t,n,r,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,l),n.state!==t&&Rh.enqueueReplaceState(n,n.state,null)}function is(t,n){var r=n;if("ref"in n){r={};for(var l in n)l!=="ref"&&(r[l]=n[l])}if(t=t.defaultProps){r===n&&(r=T({},r));for(var c in t)r[c]===void 0&&(r[c]=t[c])}return r}var su=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Ag(t){su(t)}function Sg(t){console.error(t)}function wg(t){su(t)}function au(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Rg(t,n,r){try{var l=t.onCaughtError;l(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Ch(t,n,r){return r=Qi(r),r.tag=3,r.payload={element:null},r.callback=function(){au(t,n)},r}function Cg(t){return t=Qi(t),t.tag=3,t}function Ng(t,n,r,l){var c=r.type.getDerivedStateFromError;if(typeof c=="function"){var f=l.value;t.payload=function(){return c(f)},t.callback=function(){Rg(n,r,l)}}var b=r.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Rg(n,r,l),typeof c!="function"&&(er===null?er=new Set([this]):er.add(this));var E=l.stack;this.componentDidCatch(l.value,{componentStack:E!==null?E:""})})}function J_(t,n,r,l,c){if(r.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=r.alternate,n!==null&&il(n,r,c,!0),r=wn.current,r!==null){switch(r.tag){case 13:return Jn===null?Jh():r.alternate===null&&oe===0&&(oe=3),r.flags&=-257,r.flags|=65536,r.lanes=c,l===ih?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([l]):n.add(l),tf(t,l,c)),!1;case 22:return r.flags|=65536,l===ih?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([l]):r.add(l)),tf(t,l,c)),!1}throw Error(a(435,r.tag))}return tf(t,l,c),Jh(),!1}if(zt)return n=wn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,l!==$c&&(t=Error(a(422),{cause:l}),nl(Tn(t,r)))):(l!==$c&&(n=Error(a(423),{cause:l}),nl(Tn(n,r))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=Tn(l,r),c=Ch(t.stateNode,l,c),ah(t,c),oe!==4&&(oe=2)),!1;var f=Error(a(520),{cause:l});if(f=Tn(f,r),xl===null?xl=[f]:xl.push(f),oe!==4&&(oe=2),n===null)return!0;l=Tn(l,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=c&-c,r.lanes|=t,t=Ch(r.stateNode,l,t),ah(r,t),!1;case 1:if(n=r.type,f=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(er===null||!er.has(f))))return r.flags|=65536,c&=-c,r.lanes|=c,c=Cg(c),Ng(c,t,r,l),ah(r,c),!1}r=r.return}while(r!==null);return!1}var Dg=Error(a(461)),Ne=!1;function je(t,n,r,l){n.child=t===null?bg(n,null,r,l):Ys(n,t.child,r,l)}function Ig(t,n,r,l,c){r=r.render;var f=n.ref;if("ref"in l){var b={};for(var E in l)E!=="ref"&&(b[E]=l[E])}else b=l;return ts(n),l=hh(t,n,r,b,f,c),E=fh(),t!==null&&!Ne?(dh(t,n,c),Si(t,n,c)):(zt&&E&&Kc(n),n.flags|=1,je(t,n,l,c),n.child)}function Vg(t,n,r,l,c){if(t===null){var f=r.type;return typeof f=="function"&&!Qc(f)&&f.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=f,Mg(t,n,f,l,c)):(t=Po(r.type,null,l,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(f=t.child,!kh(t,c)){var b=f.memoizedProps;if(r=r.compare,r=r!==null?r:Ja,r(b,l)&&t.ref===n.ref)return Si(t,n,c)}return n.flags|=1,t=vi(f,l),t.ref=n.ref,t.return=n,n.child=t}function Mg(t,n,r,l,c){if(t!==null){var f=t.memoizedProps;if(Ja(f,l)&&t.ref===n.ref)if(Ne=!1,n.pendingProps=l=f,kh(t,c))(t.flags&131072)!==0&&(Ne=!0);else return n.lanes=t.lanes,Si(t,n,c)}return Nh(t,n,r,l,c)}function Og(t,n,r){var l=n.pendingProps,c=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((n.flags&128)!==0){if(l=f!==null?f.baseLanes|r:r,t!==null){for(c=n.child=t.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~l}else n.childLanes=0,n.child=null;return jg(t,n,l,r)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Go(n,f!==null?f.cachePool:null),f!==null?Mm(n,f):oh(),Eg(n);else return n.lanes=n.childLanes=536870912,jg(t,n,f!==null?f.baseLanes|r:r,r)}else f!==null?(Go(n,f.cachePool),Mm(n,f),Xi(),n.memoizedState=null):(t!==null&&Go(n,null),oh(),Xi());return je(t,n,c,r),n.child}function jg(t,n,r,l){var c=nh();return c=c===null?null:{parent:xe._currentValue,pool:c},n.memoizedState={baseLanes:r,cachePool:c},t!==null&&Go(n,null),oh(),Eg(n),t!==null&&il(t,n,l,!0),null}function lu(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(a(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Nh(t,n,r,l,c){return ts(n),r=hh(t,n,r,l,void 0,c),l=fh(),t!==null&&!Ne?(dh(t,n,c),Si(t,n,c)):(zt&&l&&Kc(n),n.flags|=1,je(t,n,r,c),n.child)}function kg(t,n,r,l,c,f){return ts(n),n.updateQueue=null,r=jm(n,l,r,c),Om(t),l=fh(),t!==null&&!Ne?(dh(t,n,f),Si(t,n,f)):(zt&&l&&Kc(n),n.flags|=1,je(t,n,r,f),n.child)}function Ug(t,n,r,l,c){if(ts(n),n.stateNode===null){var f=Us,b=r.contextType;typeof b=="object"&&b!==null&&(f=qe(b)),f=new r(l,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Rh,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=l,f.state=n.memoizedState,f.refs={},rh(n),b=r.contextType,f.context=typeof b=="object"&&b!==null?qe(b):Us,f.state=n.memoizedState,b=r.getDerivedStateFromProps,typeof b=="function"&&(wh(n,r,b,l),f.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(b=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),b!==f.state&&Rh.enqueueReplaceState(f,f.state,null),cl(n,l,f,c),ul(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){f=n.stateNode;var E=n.memoizedProps,I=is(r,E);f.props=I;var z=f.context,K=r.contextType;b=Us,typeof K=="object"&&K!==null&&(b=qe(K));var W=r.getDerivedStateFromProps;K=typeof W=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,K||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||z!==b)&&xg(n,f,l,b),Gi=!1;var q=n.memoizedState;f.state=q,cl(n,l,f,c),ul(),z=n.memoizedState,E||q!==z||Gi?(typeof W=="function"&&(wh(n,r,W,l),z=n.memoizedState),(I=Gi||Tg(n,r,I,l,q,z,b))?(K||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=z),f.props=l,f.state=z,f.context=b,l=I):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{f=n.stateNode,sh(t,n),b=n.memoizedProps,K=is(r,b),f.props=K,W=n.pendingProps,q=f.context,z=r.contextType,I=Us,typeof z=="object"&&z!==null&&(I=qe(z)),E=r.getDerivedStateFromProps,(z=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(b!==W||q!==I)&&xg(n,f,l,I),Gi=!1,q=n.memoizedState,f.state=q,cl(n,l,f,c),ul();var H=n.memoizedState;b!==W||q!==H||Gi||t!==null&&t.dependencies!==null&&qo(t.dependencies)?(typeof E=="function"&&(wh(n,r,E,l),H=n.memoizedState),(K=Gi||Tg(n,r,K,l,q,H,I)||t!==null&&t.dependencies!==null&&qo(t.dependencies))?(z||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,H,I),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,H,I)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=H),f.props=l,f.state=H,f.context=I,l=K):(typeof f.componentDidUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&q===t.memoizedState||(n.flags|=1024),l=!1)}return f=l,lu(t,n),l=(n.flags&128)!==0,f||l?(f=n.stateNode,r=l&&typeof r.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,t!==null&&l?(n.child=Ys(n,t.child,null,c),n.child=Ys(n,null,r,c)):je(t,n,r,c),n.memoizedState=f.state,t=n.child):t=Si(t,n,c),t}function Lg(t,n,r,l){return el(),n.flags|=256,je(t,n,r,l),n.child}var Dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ih(t){return{baseLanes:t,cachePool:Sm()}}function Vh(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=Rn),t}function Pg(t,n,r){var l=n.pendingProps,c=!1,f=(n.flags&128)!==0,b;if((b=f)||(b=t!==null&&t.memoizedState===null?!1:(Ae.current&2)!==0),b&&(c=!0,n.flags&=-129),b=(n.flags&32)!==0,n.flags&=-33,t===null){if(zt){if(c?Ki(n):Xi(),zt){var E=le,I;if(I=E){t:{for(I=E,E=Zn;I.nodeType!==8;){if(!E){E=null;break t}if(I=kn(I.nextSibling),I===null){E=null;break t}}E=I}E!==null?(n.memoizedState={dehydrated:E,treeContext:Xr!==null?{id:_i,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},I=on(18,null,null,0),I.stateNode=E,I.return=n,n.child=I,$e=n,le=null,I=!0):I=!1}I||Jr(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return pf(E)?n.lanes=32:n.lanes=536870912,null;Ai(n)}return E=l.children,l=l.fallback,c?(Xi(),c=n.mode,E=ou({mode:"hidden",children:E},c),l=Kr(l,c,r,null),E.return=n,l.return=n,E.sibling=l,n.child=E,c=n.child,c.memoizedState=Ih(r),c.childLanes=Vh(t,b,r),n.memoizedState=Dh,l):(Ki(n),Mh(n,E))}if(I=t.memoizedState,I!==null&&(E=I.dehydrated,E!==null)){if(f)n.flags&256?(Ki(n),n.flags&=-257,n=Oh(t,n,r)):n.memoizedState!==null?(Xi(),n.child=t.child,n.flags|=128,n=null):(Xi(),c=l.fallback,E=n.mode,l=ou({mode:"visible",children:l.children},E),c=Kr(c,E,r,null),c.flags|=2,l.return=n,c.return=n,l.sibling=c,n.child=l,Ys(n,t.child,null,r),l=n.child,l.memoizedState=Ih(r),l.childLanes=Vh(t,b,r),n.memoizedState=Dh,n=c);else if(Ki(n),pf(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var z=b.dgst;b=z,l=Error(a(419)),l.stack="",l.digest=b,nl({value:l,source:null,stack:null}),n=Oh(t,n,r)}else if(Ne||il(t,n,r,!1),b=(r&t.childLanes)!==0,Ne||b){if(b=te,b!==null&&(l=r&-r,l=(l&42)!==0?1:ki(l),l=(l&(b.suspendedLanes|r))!==0?0:l,l!==0&&l!==I.retryLane))throw I.retryLane=l,ks(t,l),dn(b,t,l),Dg;E.data==="$?"||Jh(),n=Oh(t,n,r)}else E.data==="$?"?(n.flags|=192,n.child=t.child,n=null):(t=I.treeContext,le=kn(E.nextSibling),$e=n,zt=!0,Zr=null,Zn=!1,t!==null&&(An[Sn++]=_i,An[Sn++]=bi,An[Sn++]=Xr,_i=t.id,bi=t.overflow,Xr=n),n=Mh(n,l.children),n.flags|=4096);return n}return c?(Xi(),c=l.fallback,E=n.mode,I=t.child,z=I.sibling,l=vi(I,{mode:"hidden",children:l.children}),l.subtreeFlags=I.subtreeFlags&65011712,z!==null?c=vi(z,c):(c=Kr(c,E,r,null),c.flags|=2),c.return=n,l.return=n,l.sibling=c,n.child=l,l=c,c=n.child,E=t.child.memoizedState,E===null?E=Ih(r):(I=E.cachePool,I!==null?(z=xe._currentValue,I=I.parent!==z?{parent:z,pool:z}:I):I=Sm(),E={baseLanes:E.baseLanes|r,cachePool:I}),c.memoizedState=E,c.childLanes=Vh(t,b,r),n.memoizedState=Dh,l):(Ki(n),r=t.child,t=r.sibling,r=vi(r,{mode:"visible",children:l.children}),r.return=n,r.sibling=null,t!==null&&(b=n.deletions,b===null?(n.deletions=[t],n.flags|=16):b.push(t)),n.child=r,n.memoizedState=null,r)}function Mh(t,n){return n=ou({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function ou(t,n){return t=on(22,t,null,n),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Oh(t,n,r){return Ys(n,t.child,null,r),t=Mh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function zg(t,n,r){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),Jc(t.return,n,r)}function jh(t,n,r,l,c){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:r,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=r,f.tailMode=c)}function Bg(t,n,r){var l=n.pendingProps,c=l.revealOrder,f=l.tail;if(je(t,n,l.children,r),l=Ae.current,(l&2)!==0)l=l&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zg(t,r,n);else if(t.tag===19)zg(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(nt(Ae,l),c){case"forwards":for(r=n.child,c=null;r!==null;)t=r.alternate,t!==null&&ru(t)===null&&(c=r),r=r.sibling;r=c,r===null?(c=n.child,n.child=null):(c=r.sibling,r.sibling=null),jh(n,!1,c,r,f);break;case"backwards":for(r=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&ru(t)===null){n.child=c;break}t=c.sibling,c.sibling=r,r=c,c=t}jh(n,!0,r,null,f);break;case"together":jh(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Si(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),tr|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(il(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,r=vi(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=vi(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function kh(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&qo(t)))}function W_(t,n,r){switch(n.tag){case 3:Kt(n,n.stateNode.containerInfo),Hi(n,xe,t.memoizedState.cache),el();break;case 27:case 5:Pn(n);break;case 4:Kt(n,n.stateNode.containerInfo);break;case 10:Hi(n,n.type,n.memoizedProps.value);break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(Ki(n),n.flags|=128,null):(r&n.child.childLanes)!==0?Pg(t,n,r):(Ki(n),t=Si(t,n,r),t!==null?t.sibling:null);Ki(n);break;case 19:var c=(t.flags&128)!==0;if(l=(r&n.childLanes)!==0,l||(il(t,n,r,!1),l=(r&n.childLanes)!==0),c){if(l)return Bg(t,n,r);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),nt(Ae,Ae.current),l)break;return null;case 22:case 23:return n.lanes=0,Og(t,n,r);case 24:Hi(n,xe,t.memoizedState.cache)}return Si(t,n,r)}function qg(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)Ne=!0;else{if(!kh(t,r)&&(n.flags&128)===0)return Ne=!1,W_(t,n,r);Ne=(t.flags&131072)!==0}else Ne=!1,zt&&(n.flags&1048576)!==0&&vm(n,Bo,n.index);switch(n.lanes=0,n.tag){case 16:t:{t=n.pendingProps;var l=n.elementType,c=l._init;if(l=c(l._payload),n.type=l,typeof l=="function")Qc(l)?(t=is(l,t),n.tag=1,n=Ug(null,n,l,t,r)):(n.tag=0,n=Nh(null,n,l,t,r));else{if(l!=null){if(c=l.$$typeof,c===X){n.tag=11,n=Ig(null,n,l,t,r);break t}else if(c===N){n.tag=14,n=Vg(null,n,l,t,r);break t}}throw n=Bt(l)||l,Error(a(306,n,""))}}return n;case 0:return Nh(t,n,n.type,n.pendingProps,r);case 1:return l=n.type,c=is(l,n.pendingProps),Ug(t,n,l,c,r);case 3:t:{if(Kt(n,n.stateNode.containerInfo),t===null)throw Error(a(387));l=n.pendingProps;var f=n.memoizedState;c=f.element,sh(t,n),cl(n,l,null,r);var b=n.memoizedState;if(l=b.cache,Hi(n,xe,l),l!==f.cache&&Wc(n,[xe],r,!0),ul(),l=b.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:b.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Lg(t,n,l,r);break t}else if(l!==c){c=Tn(Error(a(424)),n),nl(c),n=Lg(t,n,l,r);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(le=kn(t.firstChild),$e=n,zt=!0,Zr=null,Zn=!0,r=bg(n,null,l,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(el(),l===c){n=Si(t,n,r);break t}je(t,n,l,r)}n=n.child}return n;case 26:return lu(t,n),t===null?(r=Fp(n.type,null,n.pendingProps,null))?n.memoizedState=r:zt||(r=n.type,t=n.pendingProps,l=Tu(bt.current).createElement(r),l[be]=n,l[me]=t,Ue(l,r,t),ue(l),n.stateNode=l):n.memoizedState=Fp(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return Pn(n),t===null&&zt&&(l=n.stateNode=Hp(n.type,n.pendingProps,bt.current),$e=n,Zn=!0,c=le,rr(n.type)?(yf=c,le=kn(l.firstChild)):le=c),je(t,n,n.pendingProps.children,r),lu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&zt&&((c=l=le)&&(l=Rb(l,n.type,n.pendingProps,Zn),l!==null?(n.stateNode=l,$e=n,le=kn(l.firstChild),Zn=!1,c=!0):c=!1),c||Jr(n)),Pn(n),c=n.type,f=n.pendingProps,b=t!==null?t.memoizedProps:null,l=f.children,df(c,f)?l=null:b!==null&&df(c,b)&&(n.flags|=32),n.memoizedState!==null&&(c=hh(t,n,Q_,null,null,r),Vl._currentValue=c),lu(t,n),je(t,n,l,r),n.child;case 6:return t===null&&zt&&((t=r=le)&&(r=Cb(r,n.pendingProps,Zn),r!==null?(n.stateNode=r,$e=n,le=null,t=!0):t=!1),t||Jr(n)),null;case 13:return Pg(t,n,r);case 4:return Kt(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Ys(n,null,l,r):je(t,n,l,r),n.child;case 11:return Ig(t,n,n.type,n.pendingProps,r);case 7:return je(t,n,n.pendingProps,r),n.child;case 8:return je(t,n,n.pendingProps.children,r),n.child;case 12:return je(t,n,n.pendingProps.children,r),n.child;case 10:return l=n.pendingProps,Hi(n,n.type,l.value),je(t,n,l.children,r),n.child;case 9:return c=n.type._context,l=n.pendingProps.children,ts(n),c=qe(c),l=l(c),n.flags|=1,je(t,n,l,r),n.child;case 14:return Vg(t,n,n.type,n.pendingProps,r);case 15:return Mg(t,n,n.type,n.pendingProps,r);case 19:return Bg(t,n,r);case 31:return l=n.pendingProps,r=n.mode,l={mode:l.mode,children:l.children},t===null?(r=ou(l,r),r.ref=n.ref,n.child=r,r.return=n,n=r):(r=vi(t.child,l),r.ref=n.ref,n.child=r,r.return=n,n=r),n;case 22:return Og(t,n,r);case 24:return ts(n),l=qe(xe),t===null?(c=nh(),c===null&&(c=te,f=th(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=r),c=f),n.memoizedState={parent:l,cache:c},rh(n),Hi(n,xe,c)):((t.lanes&r)!==0&&(sh(t,n),cl(n,null,null,r),ul()),c=t.memoizedState,f=n.memoizedState,c.parent!==l?(c={parent:l,cache:l},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),Hi(n,xe,l)):(l=f.cache,Hi(n,xe,l),l!==c.cache&&Wc(n,[xe],r,!0))),je(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function wi(t){t.flags|=4}function Hg(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Zp(n)){if(n=wn.current,n!==null&&((kt&4194048)===kt?Jn!==null:(kt&62914560)!==kt&&(kt&536870912)===0||n!==Jn))throw ll=ih,wm;t.flags|=8192}}function uu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Oa():536870912,t.lanes|=n,Zs|=n)}function yl(t,n){if(!zt)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function re(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,l=0;if(n)for(var c=t.child;c!==null;)r|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)r|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=r,n}function tb(t,n,r){var l=n.pendingProps;switch(Xc(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return re(n),null;case 1:return re(n),null;case 3:return r=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),Ti(xe),gn(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(tl(n)?wi(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Em())),re(n),null;case 26:return r=n.memoizedState,t===null?(wi(n),r!==null?(re(n),Hg(n,r)):(re(n),n.flags&=-16777217)):r?r!==t.memoizedState?(wi(n),re(n),Hg(n,r)):(re(n),n.flags&=-16777217):(t.memoizedProps!==l&&wi(n),re(n),n.flags&=-16777217),null;case 27:Dn(n),r=bt.current;var c=n.type;if(t!==null&&n.stateNode!=null)t.memoizedProps!==l&&wi(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return re(n),null}t=gt.current,tl(n)?_m(n):(t=Hp(c,l,r),n.stateNode=t,wi(n))}return re(n),null;case 5:if(Dn(n),r=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&wi(n);else{if(!l){if(n.stateNode===null)throw Error(a(166));return re(n),null}if(t=gt.current,tl(n))_m(n);else{switch(c=Tu(bt.current),t){case 1:t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case 2:t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;default:switch(r){case"svg":t=c.createElementNS("http://www.w3.org/2000/svg",r);break;case"math":t=c.createElementNS("http://www.w3.org/1998/Math/MathML",r);break;case"script":t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?c.createElement("select",{is:l.is}):c.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?c.createElement(r,{is:l.is}):c.createElement(r)}}t[be]=n,t[me]=l;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=t;t:switch(Ue(t,r,l),r){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break t;case"img":t=!0;break t;default:t=!1}t&&wi(n)}}return re(n),n.flags&=-16777217,null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&wi(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(a(166));if(t=bt.current,tl(n)){if(t=n.stateNode,r=n.memoizedProps,l=null,c=$e,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[be]=n,t=!!(t.nodeValue===r||l!==null&&l.suppressHydrationWarning===!0||kp(t.nodeValue,r)),t||Jr(n)}else t=Tu(t).createTextNode(l),t[be]=n,n.stateNode=t}return re(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=tl(n),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[be]=n}else el(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;re(n),c=!1}else c=Em(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Ai(n),n):(Ai(n),null)}if(Ai(n),(n.flags&128)!==0)return n.lanes=r,n;if(r=l!==null,t=t!==null&&t.memoizedState!==null,r){l=n.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==c&&(l.flags|=2048)}return r!==t&&r&&(n.child.flags|=8192),uu(n,n.updateQueue),re(n),null;case 4:return gn(),t===null&&of(n.stateNode.containerInfo),re(n),null;case 10:return Ti(n.type),re(n),null;case 19:if(st(Ae),c=n.memoizedState,c===null)return re(n),null;if(l=(n.flags&128)!==0,f=c.rendering,f===null)if(l)yl(c,!1);else{if(oe!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(f=ru(t),f!==null){for(n.flags|=128,yl(c,!1),t=f.updateQueue,n.updateQueue=t,uu(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)ym(r,t),r=r.sibling;return nt(Ae,Ae.current&1|2),n.child}t=t.sibling}c.tail!==null&&pn()>fu&&(n.flags|=128,l=!0,yl(c,!1),n.lanes=4194304)}else{if(!l)if(t=ru(f),t!==null){if(n.flags|=128,l=!0,t=t.updateQueue,n.updateQueue=t,uu(n,t),yl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!zt)return re(n),null}else 2*pn()-c.renderingStartTime>fu&&r!==536870912&&(n.flags|=128,l=!0,yl(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(t=c.last,t!==null?t.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=pn(),n.sibling=null,t=Ae.current,nt(Ae,l?t&1|2:t&1),n):(re(n),null);case 22:case 23:return Ai(n),uh(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(r&536870912)!==0&&(n.flags&128)===0&&(re(n),n.subtreeFlags&6&&(n.flags|=8192)):re(n),r=n.updateQueue,r!==null&&uu(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==r&&(n.flags|=2048),t!==null&&st(es),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),Ti(xe),re(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function eb(t,n){switch(Xc(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Ti(xe),gn(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return Dn(n),null;case 13:if(Ai(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));el()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return st(Ae),null;case 4:return gn(),null;case 10:return Ti(n.type),null;case 22:case 23:return Ai(n),uh(),t!==null&&st(es),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Ti(xe),null;case 25:return null;default:return null}}function Gg(t,n){switch(Xc(n),n.tag){case 3:Ti(xe),gn();break;case 26:case 27:case 5:Dn(n);break;case 4:gn();break;case 13:Ai(n);break;case 19:st(Ae);break;case 10:Ti(n.type);break;case 22:case 23:Ai(n),uh(),t!==null&&st(es);break;case 24:Ti(xe)}}function vl(t,n){try{var r=n.updateQueue,l=r!==null?r.lastEffect:null;if(l!==null){var c=l.next;r=c;do{if((r.tag&t)===t){l=void 0;var f=r.create,b=r.inst;l=f(),b.destroy=l}r=r.next}while(r!==c)}}catch(E){Wt(n,n.return,E)}}function $i(t,n,r){try{var l=n.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var f=c.next;l=f;do{if((l.tag&t)===t){var b=l.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,c=n;var I=r,z=E;try{z()}catch(K){Wt(c,I,K)}}}l=l.next}while(l!==f)}}catch(K){Wt(n,n.return,K)}}function Qg(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{Vm(n,r)}catch(l){Wt(t,t.return,l)}}}function Fg(t,n,r){r.props=is(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(l){Wt(t,n,l)}}function _l(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof r=="function"?t.refCleanup=r(l):r.current=l}}catch(c){Wt(t,n,c)}}function Wn(t,n){var r=t.ref,l=t.refCleanup;if(r!==null)if(typeof l=="function")try{l()}catch(c){Wt(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(c){Wt(t,n,c)}else r.current=null}function Yg(t){var n=t.type,r=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&l.focus();break t;case"img":r.src?l.src=r.src:r.srcSet&&(l.srcset=r.srcSet)}}catch(c){Wt(t,t.return,c)}}function Uh(t,n,r){try{var l=t.stateNode;Tb(l,t.type,r,n),l[me]=n}catch(c){Wt(t,t.return,c)}}function Kg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&rr(t.type)||t.tag===4}function Lh(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Kg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&rr(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ph(t,n,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=Eu));else if(l!==4&&(l===27&&rr(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(Ph(t,n,r),t=t.sibling;t!==null;)Ph(t,n,r),t=t.sibling}function cu(t,n,r){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(l!==4&&(l===27&&rr(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(cu(t,n,r),t=t.sibling;t!==null;)cu(t,n,r),t=t.sibling}function Xg(t){var n=t.stateNode,r=t.memoizedProps;try{for(var l=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Ue(n,l,r),n[be]=t,n[me]=r}catch(f){Wt(t,t.return,f)}}var Ri=!1,he=!1,zh=!1,$g=typeof WeakSet=="function"?WeakSet:Set,De=null;function nb(t,n){if(t=t.containerInfo,hf=Cu,t=lm(t),Lc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{r=(r=t.ownerDocument)&&r.defaultView||window;var l=r.getSelection&&r.getSelection();if(l&&l.rangeCount!==0){r=l.anchorNode;var c=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break t}var b=0,E=-1,I=-1,z=0,K=0,W=t,q=null;e:for(;;){for(var H;W!==r||c!==0&&W.nodeType!==3||(E=b+c),W!==f||l!==0&&W.nodeType!==3||(I=b+l),W.nodeType===3&&(b+=W.nodeValue.length),(H=W.firstChild)!==null;)q=W,W=H;for(;;){if(W===t)break e;if(q===r&&++z===c&&(E=b),q===f&&++K===l&&(I=b),(H=W.nextSibling)!==null)break;W=q,q=W.parentNode}W=H}r=E===-1||I===-1?null:{start:E,end:I}}else r=null}r=r||{start:0,end:0}}else r=null;for(ff={focusedElem:t,selectionRange:r},Cu=!1,De=n;De!==null;)if(n=De,t=n.child,(n.subtreeFlags&1024)!==0&&t!==null)t.return=n,De=t;else for(;De!==null;){switch(n=De,f=n.alternate,t=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,r=n,c=f.memoizedProps,f=f.memoizedState,l=r.stateNode;try{var Et=is(r.type,c,r.elementType===r.type);t=l.getSnapshotBeforeUpdate(Et,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(yt){Wt(r,r.return,yt)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)gf(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":gf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,De=t;break}De=n.return}}function Zg(t,n,r){var l=r.flags;switch(r.tag){case 0:case 11:case 15:Zi(t,r),l&4&&vl(5,r);break;case 1:if(Zi(t,r),l&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(b){Wt(r,r.return,b)}else{var c=is(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Wt(r,r.return,b)}}l&64&&Qg(r),l&512&&_l(r,r.return);break;case 3:if(Zi(t,r),l&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Vm(t,n)}catch(b){Wt(r,r.return,b)}}break;case 27:n===null&&l&4&&Xg(r);case 26:case 5:Zi(t,r),n===null&&l&4&&Yg(r),l&512&&_l(r,r.return);break;case 12:Zi(t,r);break;case 13:Zi(t,r),l&4&&tp(t,r),l&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=hb.bind(null,r),Nb(t,r))));break;case 22:if(l=r.memoizedState!==null||Ri,!l){n=n!==null&&n.memoizedState!==null||he,c=Ri;var f=he;Ri=l,(he=n)&&!f?Ji(t,r,(r.subtreeFlags&8772)!==0):Zi(t,r),Ri=c,he=f}break;case 30:break;default:Zi(t,r)}}function Jg(t){var n=t.alternate;n!==null&&(t.alternate=null,Jg(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Pi(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ie=null,We=!1;function Ci(t,n,r){for(r=r.child;r!==null;)Wg(t,n,r),r=r.sibling}function Wg(t,n,r){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(ae,r)}catch{}switch(r.tag){case 26:he||Wn(r,n),Ci(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:he||Wn(r,n);var l=ie,c=We;rr(r.type)&&(ie=r.stateNode,We=!1),Ci(t,n,r),Cl(r.stateNode),ie=l,We=c;break;case 5:he||Wn(r,n);case 6:if(l=ie,c=We,ie=null,Ci(t,n,r),ie=l,We=c,ie!==null)if(We)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(r.stateNode)}catch(f){Wt(r,n,f)}else try{ie.removeChild(r.stateNode)}catch(f){Wt(r,n,f)}break;case 18:ie!==null&&(We?(t=ie,Bp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),kl(t)):Bp(ie,r.stateNode));break;case 4:l=ie,c=We,ie=r.stateNode.containerInfo,We=!0,Ci(t,n,r),ie=l,We=c;break;case 0:case 11:case 14:case 15:he||$i(2,r,n),he||$i(4,r,n),Ci(t,n,r);break;case 1:he||(Wn(r,n),l=r.stateNode,typeof l.componentWillUnmount=="function"&&Fg(r,n,l)),Ci(t,n,r);break;case 21:Ci(t,n,r);break;case 22:he=(l=he)||r.memoizedState!==null,Ci(t,n,r),he=l;break;default:Ci(t,n,r)}}function tp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{kl(t)}catch(r){Wt(n,n.return,r)}}function ib(t){switch(t.tag){case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new $g),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new $g),n;default:throw Error(a(435,t.tag))}}function Bh(t,n){var r=ib(t);n.forEach(function(l){var c=fb.bind(null,t,l);r.has(l)||(r.add(l),l.then(c,c))})}function un(t,n){var r=n.deletions;if(r!==null)for(var l=0;l<r.length;l++){var c=r[l],f=t,b=n,E=b;t:for(;E!==null;){switch(E.tag){case 27:if(rr(E.type)){ie=E.stateNode,We=!1;break t}break;case 5:ie=E.stateNode,We=!1;break t;case 3:case 4:ie=E.stateNode.containerInfo,We=!0;break t}E=E.return}if(ie===null)throw Error(a(160));Wg(f,b,c),ie=null,We=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ep(n,t),n=n.sibling}var jn=null;function ep(t,n){var r=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:un(n,t),cn(t),l&4&&($i(3,t,t.return),vl(3,t),$i(5,t,t.return));break;case 1:un(n,t),cn(t),l&512&&(he||r===null||Wn(r,r.return)),l&64&&Ri&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?l:r.concat(l))));break;case 26:var c=jn;if(un(n,t),cn(t),l&512&&(he||r===null||Wn(r,r.return)),l&4){var f=r!==null?r.memoizedState:null;if(l=t.memoizedState,r===null)if(l===null)if(t.stateNode===null){t:{l=t.type,r=t.memoizedProps,c=c.ownerDocument||c;e:switch(l){case"title":f=c.getElementsByTagName("title")[0],(!f||f[Vr]||f[be]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(l),c.head.insertBefore(f,c.querySelector("head > title"))),Ue(f,l,r),f[be]=t,ue(f),l=f;break t;case"link":var b=Xp("link","href",c).get(l+(r.href||""));if(b){for(var E=0;E<b.length;E++)if(f=b[E],f.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&f.getAttribute("rel")===(r.rel==null?null:r.rel)&&f.getAttribute("title")===(r.title==null?null:r.title)&&f.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){b.splice(E,1);break e}}f=c.createElement(l),Ue(f,l,r),c.head.appendChild(f);break;case"meta":if(b=Xp("meta","content",c).get(l+(r.content||""))){for(E=0;E<b.length;E++)if(f=b[E],f.getAttribute("content")===(r.content==null?null:""+r.content)&&f.getAttribute("name")===(r.name==null?null:r.name)&&f.getAttribute("property")===(r.property==null?null:r.property)&&f.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&f.getAttribute("charset")===(r.charSet==null?null:r.charSet)){b.splice(E,1);break e}}f=c.createElement(l),Ue(f,l,r),c.head.appendChild(f);break;default:throw Error(a(468,l))}f[be]=t,ue(f),l=f}t.stateNode=l}else $p(c,t.type,t.stateNode);else t.stateNode=Kp(c,l,t.memoizedProps);else f!==l?(f===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):f.count--,l===null?$p(c,t.type,t.stateNode):Kp(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Uh(t,t.memoizedProps,r.memoizedProps)}break;case 27:un(n,t),cn(t),l&512&&(he||r===null||Wn(r,r.return)),r!==null&&l&4&&Uh(t,t.memoizedProps,r.memoizedProps);break;case 5:if(un(n,t),cn(t),l&512&&(he||r===null||Wn(r,r.return)),t.flags&32){c=t.stateNode;try{vn(c,"")}catch(H){Wt(t,t.return,H)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,Uh(t,c,r!==null?r.memoizedProps:c)),l&1024&&(zh=!0);break;case 6:if(un(n,t),cn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,r=t.stateNode;try{r.nodeValue=l}catch(H){Wt(t,t.return,H)}}break;case 3:if(Su=null,c=jn,jn=xu(n.containerInfo),un(n,t),jn=c,cn(t),l&4&&r!==null&&r.memoizedState.isDehydrated)try{kl(n.containerInfo)}catch(H){Wt(t,t.return,H)}zh&&(zh=!1,np(t));break;case 4:l=jn,jn=xu(t.stateNode.containerInfo),un(n,t),cn(t),jn=l;break;case 12:un(n,t),cn(t);break;case 13:un(n,t),cn(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Yh=pn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Bh(t,l)));break;case 22:c=t.memoizedState!==null;var I=r!==null&&r.memoizedState!==null,z=Ri,K=he;if(Ri=z||c,he=K||I,un(n,t),he=K,Ri=z,cn(t),l&8192)t:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(r===null||I||Ri||he||rs(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){I=r=n;try{if(f=I.stateNode,c)b=f.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=I.stateNode;var W=I.memoizedProps.style,q=W!=null&&W.hasOwnProperty("display")?W.display:null;E.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){Wt(I,I.return,H)}}}else if(n.tag===6){if(r===null){I=n;try{I.stateNode.nodeValue=c?"":I.memoizedProps}catch(H){Wt(I,I.return,H)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(r=l.retryQueue,r!==null&&(l.retryQueue=null,Bh(t,r))));break;case 19:un(n,t),cn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Bh(t,l)));break;case 30:break;case 21:break;default:un(n,t),cn(t)}}function cn(t){var n=t.flags;if(n&2){try{for(var r,l=t.return;l!==null;){if(Kg(l)){r=l;break}l=l.return}if(r==null)throw Error(a(160));switch(r.tag){case 27:var c=r.stateNode,f=Lh(t);cu(t,f,c);break;case 5:var b=r.stateNode;r.flags&32&&(vn(b,""),r.flags&=-33);var E=Lh(t);cu(t,E,b);break;case 3:case 4:var I=r.stateNode.containerInfo,z=Lh(t);Ph(t,z,I);break;default:throw Error(a(161))}}catch(K){Wt(t,t.return,K)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function np(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;np(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Zi(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Zg(t,n.alternate,n),n=n.sibling}function rs(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:$i(4,n,n.return),rs(n);break;case 1:Wn(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&Fg(n,n.return,r),rs(n);break;case 27:Cl(n.stateNode);case 26:case 5:Wn(n,n.return),rs(n);break;case 22:n.memoizedState===null&&rs(n);break;case 30:rs(n);break;default:rs(n)}t=t.sibling}}function Ji(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,c=t,f=n,b=f.flags;switch(f.tag){case 0:case 11:case 15:Ji(c,f,r),vl(4,f);break;case 1:if(Ji(c,f,r),l=f,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(z){Wt(l,l.return,z)}if(l=f,c=l.updateQueue,c!==null){var E=l.stateNode;try{var I=c.shared.hiddenCallbacks;if(I!==null)for(c.shared.hiddenCallbacks=null,c=0;c<I.length;c++)Im(I[c],E)}catch(z){Wt(l,l.return,z)}}r&&b&64&&Qg(f),_l(f,f.return);break;case 27:Xg(f);case 26:case 5:Ji(c,f,r),r&&l===null&&b&4&&Yg(f),_l(f,f.return);break;case 12:Ji(c,f,r);break;case 13:Ji(c,f,r),r&&b&4&&tp(c,f);break;case 22:f.memoizedState===null&&Ji(c,f,r),_l(f,f.return);break;case 30:break;default:Ji(c,f,r)}n=n.sibling}}function qh(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&rl(r))}function Hh(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&rl(t))}function ti(t,n,r,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ip(t,n,r,l),n=n.sibling}function ip(t,n,r,l){var c=n.flags;switch(n.tag){case 0:case 11:case 15:ti(t,n,r,l),c&2048&&vl(9,n);break;case 1:ti(t,n,r,l);break;case 3:ti(t,n,r,l),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&rl(t)));break;case 12:if(c&2048){ti(t,n,r,l),t=n.stateNode;try{var f=n.memoizedProps,b=f.id,E=f.onPostCommit;typeof E=="function"&&E(b,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(I){Wt(n,n.return,I)}}else ti(t,n,r,l);break;case 13:ti(t,n,r,l);break;case 23:break;case 22:f=n.stateNode,b=n.alternate,n.memoizedState!==null?f._visibility&2?ti(t,n,r,l):bl(t,n):f._visibility&2?ti(t,n,r,l):(f._visibility|=2,Ks(t,n,r,l,(n.subtreeFlags&10256)!==0)),c&2048&&qh(b,n);break;case 24:ti(t,n,r,l),c&2048&&Hh(n.alternate,n);break;default:ti(t,n,r,l)}}function Ks(t,n,r,l,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=t,b=n,E=r,I=l,z=b.flags;switch(b.tag){case 0:case 11:case 15:Ks(f,b,E,I,c),vl(8,b);break;case 23:break;case 22:var K=b.stateNode;b.memoizedState!==null?K._visibility&2?Ks(f,b,E,I,c):bl(f,b):(K._visibility|=2,Ks(f,b,E,I,c)),c&&z&2048&&qh(b.alternate,b);break;case 24:Ks(f,b,E,I,c),c&&z&2048&&Hh(b.alternate,b);break;default:Ks(f,b,E,I,c)}n=n.sibling}}function bl(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,l=n,c=l.flags;switch(l.tag){case 22:bl(r,l),c&2048&&qh(l.alternate,l);break;case 24:bl(r,l),c&2048&&Hh(l.alternate,l);break;default:bl(r,l)}n=n.sibling}}var El=8192;function Xs(t){if(t.subtreeFlags&El)for(t=t.child;t!==null;)rp(t),t=t.sibling}function rp(t){switch(t.tag){case 26:Xs(t),t.flags&El&&t.memoizedState!==null&&qb(jn,t.memoizedState,t.memoizedProps);break;case 5:Xs(t);break;case 3:case 4:var n=jn;jn=xu(t.stateNode.containerInfo),Xs(t),jn=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=El,El=16777216,Xs(t),El=n):Xs(t));break;default:Xs(t)}}function sp(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Tl(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];De=l,lp(l,t)}sp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ap(t),t=t.sibling}function ap(t){switch(t.tag){case 0:case 11:case 15:Tl(t),t.flags&2048&&$i(9,t,t.return);break;case 3:Tl(t);break;case 12:Tl(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,hu(t)):Tl(t);break;default:Tl(t)}}function hu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];De=l,lp(l,t)}sp(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:$i(8,n,n.return),hu(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,hu(n));break;default:hu(n)}t=t.sibling}}function lp(t,n){for(;De!==null;){var r=De;switch(r.tag){case 0:case 11:case 15:$i(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var l=r.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:rl(r.memoizedState.cache)}if(l=r.child,l!==null)l.return=r,De=l;else t:for(r=t;De!==null;){l=De;var c=l.sibling,f=l.return;if(Jg(l),l===r){De=null;break t}if(c!==null){c.return=f,De=c;break t}De=f}}}var rb={getCacheForType:function(t){var n=qe(xe),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r}},sb=typeof WeakMap=="function"?WeakMap:Map,Ft=0,te=null,It=null,kt=0,Yt=0,hn=null,Wi=!1,$s=!1,Gh=!1,Ni=0,oe=0,tr=0,ss=0,Qh=0,Rn=0,Zs=0,xl=null,tn=null,Fh=!1,Yh=0,fu=1/0,du=null,er=null,ke=0,nr=null,Js=null,Ws=0,Kh=0,Xh=null,op=null,Al=0,$h=null;function fn(){if((Ft&2)!==0&&kt!==0)return kt&-kt;if(F.T!==null){var t=zs;return t!==0?t:rf()}return Ui()}function up(){Rn===0&&(Rn=(kt&536870912)===0||zt?Ma():536870912);var t=wn.current;return t!==null&&(t.flags|=32),Rn}function dn(t,n,r){(t===te&&(Yt===2||Yt===9)||t.cancelPendingCommit!==null)&&(ta(t,0),ir(t,kt,Rn,!1)),li(t,r),((Ft&2)===0||t!==te)&&(t===te&&((Ft&2)===0&&(ss|=r),oe===4&&ir(t,kt,Rn,!1)),ei(t))}function cp(t,n,r){if((Ft&6)!==0)throw Error(a(327));var l=!r&&(n&124)===0&&(n&t.expiredLanes)===0||Ir(t,n),c=l?ob(t,n):Wh(t,n,!0),f=l;do{if(c===0){$s&&!l&&ir(t,n,0,!1);break}else{if(r=t.current.alternate,f&&!ab(r)){c=Wh(t,n,!1),f=!1;continue}if(c===2){if(f=n,t.errorRecoveryDisabledLanes&f)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){n=b;t:{var E=t;c=xl;var I=E.current.memoizedState.isDehydrated;if(I&&(ta(E,b).flags|=256),b=Wh(E,b,!1),b!==2){if(Gh&&!I){E.errorRecoveryDisabledLanes|=f,ss|=f,c=4;break t}f=tn,tn=c,f!==null&&(tn===null?tn=f:tn.push.apply(tn,f))}c=b}if(f=!1,c!==2)continue}}if(c===1){ta(t,0),ir(t,n,0,!0);break}t:{switch(l=t,f=c,f){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:ir(l,n,Rn,!Wi);break t;case 2:tn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=Yh+300-pn(),10<c)){if(ir(l,n,Rn,!Wi),ys(l,0,!0)!==0)break t;l.timeoutHandle=Pp(hp.bind(null,l,r,tn,du,Fh,n,Rn,ss,Zs,Wi,f,2,-0,0),c);break t}hp(l,r,tn,du,Fh,n,Rn,ss,Zs,Wi,f,0,-0,0)}}break}while(!0);ei(t)}function hp(t,n,r,l,c,f,b,E,I,z,K,W,q,H){if(t.timeoutHandle=-1,W=n.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(Il={stylesheets:null,count:0,unsuspend:Bb},rp(n),W=Hb(),W!==null)){t.cancelPendingCommit=W(vp.bind(null,t,n,f,r,l,c,b,E,I,K,1,q,H)),ir(t,f,b,!z);return}vp(t,n,f,r,l,c,b,E,I)}function ab(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var l=0;l<r.length;l++){var c=r[l],f=c.getSnapshot;c=c.value;try{if(!ln(f(),c))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ir(t,n,r,l){n&=~Qh,n&=~ss,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var c=n;0<c;){var f=31-Be(c),b=1<<f;l[f]=-1,c&=~b}r!==0&&zn(t,r,n)}function mu(){return(Ft&6)===0?(Sl(0),!1):!0}function Zh(){if(It!==null){if(Yt===0)var t=It.return;else t=It,Ei=Wr=null,mh(t),Fs=null,gl=0,t=It;for(;t!==null;)Gg(t.alternate,t),t=t.return;It=null}}function ta(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Ab(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),Zh(),te=t,It=r=vi(t.current,null),kt=n,Yt=0,hn=null,Wi=!1,$s=Ir(t,n),Gh=!1,Zs=Rn=Qh=ss=tr=oe=0,tn=xl=null,Fh=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var c=31-Be(l),f=1<<c;n|=t[c],l&=~f}return Ni=n,ko(),r}function fp(t,n){Rt=null,F.H=eu,n===al||n===Qo?(n=Nm(),Yt=3):n===wm?(n=Nm(),Yt=4):Yt=n===Dg?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,hn=n,It===null&&(oe=1,au(t,Tn(n,t.current)))}function dp(){var t=F.H;return F.H=eu,t===null?eu:t}function mp(){var t=F.A;return F.A=rb,t}function Jh(){oe=4,Wi||(kt&4194048)!==kt&&wn.current!==null||($s=!0),(tr&134217727)===0&&(ss&134217727)===0||te===null||ir(te,kt,Rn,!1)}function Wh(t,n,r){var l=Ft;Ft|=2;var c=dp(),f=mp();(te!==t||kt!==n)&&(du=null,ta(t,n)),n=!1;var b=oe;t:do try{if(Yt!==0&&It!==null){var E=It,I=hn;switch(Yt){case 8:Zh(),b=6;break t;case 3:case 2:case 9:case 6:wn.current===null&&(n=!0);var z=Yt;if(Yt=0,hn=null,ea(t,E,I,z),r&&$s){b=0;break t}break;default:z=Yt,Yt=0,hn=null,ea(t,E,I,z)}}lb(),b=oe;break}catch(K){fp(t,K)}while(!0);return n&&t.shellSuspendCounter++,Ei=Wr=null,Ft=l,F.H=c,F.A=f,It===null&&(te=null,kt=0,ko()),b}function lb(){for(;It!==null;)gp(It)}function ob(t,n){var r=Ft;Ft|=2;var l=dp(),c=mp();te!==t||kt!==n?(du=null,fu=pn()+500,ta(t,n)):$s=Ir(t,n);t:do try{if(Yt!==0&&It!==null){n=It;var f=hn;e:switch(Yt){case 1:Yt=0,hn=null,ea(t,n,f,1);break;case 2:case 9:if(Rm(f)){Yt=0,hn=null,pp(n);break}n=function(){Yt!==2&&Yt!==9||te!==t||(Yt=7),ei(t)},f.then(n,n);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:Rm(f)?(Yt=0,hn=null,pp(n)):(Yt=0,hn=null,ea(t,n,f,7));break;case 5:var b=null;switch(It.tag){case 26:b=It.memoizedState;case 5:case 27:var E=It;if(!b||Zp(b)){Yt=0,hn=null;var I=E.sibling;if(I!==null)It=I;else{var z=E.return;z!==null?(It=z,gu(z)):It=null}break e}}Yt=0,hn=null,ea(t,n,f,5);break;case 6:Yt=0,hn=null,ea(t,n,f,6);break;case 8:Zh(),oe=6;break t;default:throw Error(a(462))}}ub();break}catch(K){fp(t,K)}while(!0);return Ei=Wr=null,F.H=l,F.A=c,Ft=r,It!==null?0:(te=null,kt=0,ko(),oe)}function ub(){for(;It!==null&&!Na();)gp(It)}function gp(t){var n=qg(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,n===null?gu(t):It=n}function pp(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=kg(r,n,n.pendingProps,n.type,void 0,kt);break;case 11:n=kg(r,n,n.pendingProps,n.type.render,n.ref,kt);break;case 5:mh(n);default:Gg(r,n),n=It=ym(n,Ni),n=qg(r,n,Ni)}t.memoizedProps=t.pendingProps,n===null?gu(t):It=n}function ea(t,n,r,l){Ei=Wr=null,mh(n),Fs=null,gl=0;var c=n.return;try{if(J_(t,c,n,r,kt)){oe=1,au(t,Tn(r,t.current)),It=null;return}}catch(f){if(c!==null)throw It=c,f;oe=1,au(t,Tn(r,t.current)),It=null;return}n.flags&32768?(zt||l===1?t=!0:$s||(kt&536870912)!==0?t=!1:(Wi=t=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),yp(n,t)):gu(n)}function gu(t){var n=t;do{if((n.flags&32768)!==0){yp(n,Wi);return}t=n.return;var r=tb(n.alternate,n,Ni);if(r!==null){It=r;return}if(n=n.sibling,n!==null){It=n;return}It=n=t}while(n!==null);oe===0&&(oe=5)}function yp(t,n){do{var r=eb(t.alternate,t);if(r!==null){r.flags&=32767,It=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){It=t;return}It=t=r}while(t!==null);oe=6,It=null}function vp(t,n,r,l,c,f,b,E,I){t.cancelPendingCommit=null;do pu();while(ke!==0);if((Ft&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(f=n.lanes|n.childLanes,f|=Hc,ja(t,r,f,b,E,I),t===te&&(It=te=null,kt=0),Js=n,nr=t,Ws=r,Kh=f,Xh=c,op=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,db(Rr,function(){return xp(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=F.T,F.T=null,c=it.p,it.p=2,b=Ft,Ft|=4;try{nb(t,n,r)}finally{Ft=b,it.p=c,F.T=l}}ke=1,_p(),bp(),Ep()}}function _p(){if(ke===1){ke=0;var t=nr,n=Js,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=F.T,F.T=null;var l=it.p;it.p=2;var c=Ft;Ft|=4;try{ep(n,t);var f=ff,b=lm(t.containerInfo),E=f.focusedElem,I=f.selectionRange;if(b!==E&&E&&E.ownerDocument&&am(E.ownerDocument.documentElement,E)){if(I!==null&&Lc(E)){var z=I.start,K=I.end;if(K===void 0&&(K=z),"selectionStart"in E)E.selectionStart=z,E.selectionEnd=Math.min(K,E.value.length);else{var W=E.ownerDocument||document,q=W&&W.defaultView||window;if(q.getSelection){var H=q.getSelection(),Et=E.textContent.length,yt=Math.min(I.start,Et),Jt=I.end===void 0?yt:Math.min(I.end,Et);!H.extend&&yt>Jt&&(b=Jt,Jt=yt,yt=b);var U=sm(E,yt),j=sm(E,Jt);if(U&&j&&(H.rangeCount!==1||H.anchorNode!==U.node||H.anchorOffset!==U.offset||H.focusNode!==j.node||H.focusOffset!==j.offset)){var P=W.createRange();P.setStart(U.node,U.offset),H.removeAllRanges(),yt>Jt?(H.addRange(P),H.extend(j.node,j.offset)):(P.setEnd(j.node,j.offset),H.addRange(P))}}}}for(W=[],H=E;H=H.parentNode;)H.nodeType===1&&W.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<W.length;E++){var $=W[E];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}Cu=!!hf,ff=hf=null}finally{Ft=c,it.p=l,F.T=r}}t.current=n,ke=2}}function bp(){if(ke===2){ke=0;var t=nr,n=Js,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=F.T,F.T=null;var l=it.p;it.p=2;var c=Ft;Ft|=4;try{Zg(t,n.alternate,n)}finally{Ft=c,it.p=l,F.T=r}}ke=3}}function Ep(){if(ke===4||ke===3){ke=0,co();var t=nr,n=Js,r=Ws,l=op;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?ke=5:(ke=0,Js=nr=null,Tp(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(er=null),vs(r),n=n.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(ae,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=F.T,c=it.p,it.p=2,F.T=null;try{for(var f=t.onRecoverableError,b=0;b<l.length;b++){var E=l[b];f(E.value,{componentStack:E.stack})}}finally{F.T=n,it.p=c}}(Ws&3)!==0&&pu(),ei(t),c=t.pendingLanes,(r&4194090)!==0&&(c&42)!==0?t===$h?Al++:(Al=0,$h=t):Al=0,Sl(0)}}function Tp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,rl(n)))}function pu(t){return _p(),bp(),Ep(),xp()}function xp(){if(ke!==5)return!1;var t=nr,n=Kh;Kh=0;var r=vs(Ws),l=F.T,c=it.p;try{it.p=32>r?32:r,F.T=null,r=Xh,Xh=null;var f=nr,b=Ws;if(ke=0,Js=nr=null,Ws=0,(Ft&6)!==0)throw Error(a(331));var E=Ft;if(Ft|=4,ap(f.current),ip(f,f.current,b,r),Ft=E,Sl(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(ae,f)}catch{}return!0}finally{it.p=c,F.T=l,Tp(t,n)}}function Ap(t,n,r){n=Tn(r,n),n=Ch(t.stateNode,n,2),t=Fi(t,n,2),t!==null&&(li(t,2),ei(t))}function Wt(t,n,r){if(t.tag===3)Ap(t,t,r);else for(;n!==null;){if(n.tag===3){Ap(n,t,r);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(er===null||!er.has(l))){t=Tn(r,t),r=Cg(2),l=Fi(n,r,2),l!==null&&(Ng(r,l,n,t),li(l,2),ei(l));break}}n=n.return}}function tf(t,n,r){var l=t.pingCache;if(l===null){l=t.pingCache=new sb;var c=new Set;l.set(n,c)}else c=l.get(n),c===void 0&&(c=new Set,l.set(n,c));c.has(r)||(Gh=!0,c.add(r),t=cb.bind(null,t,n,r),n.then(t,t))}function cb(t,n,r){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,te===t&&(kt&r)===r&&(oe===4||oe===3&&(kt&62914560)===kt&&300>pn()-Yh?(Ft&2)===0&&ta(t,0):Qh|=r,Zs===kt&&(Zs=0)),ei(t)}function Sp(t,n){n===0&&(n=Oa()),t=ks(t,n),t!==null&&(li(t,n),ei(t))}function hb(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Sp(t,r)}function fb(t,n){var r=0;switch(t.tag){case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(r=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(n),Sp(t,r)}function db(t,n){return Sr(t,n)}var yu=null,na=null,ef=!1,vu=!1,nf=!1,as=0;function ei(t){t!==na&&t.next===null&&(na===null?yu=na=t:na=na.next=t),vu=!0,ef||(ef=!0,gb())}function Sl(t,n){if(!nf&&vu){nf=!0;do for(var r=!1,l=yu;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var f=0;else{var b=l.suspendedLanes,E=l.pingedLanes;f=(1<<31-Be(42|t)+1)-1,f&=c&~(b&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(r=!0,Np(l,f))}else f=kt,f=ys(l,l===te?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||Ir(l,f)||(r=!0,Np(l,f));l=l.next}while(r);nf=!1}}function mb(){wp()}function wp(){vu=ef=!1;var t=0;as!==0&&(xb()&&(t=as),as=0);for(var n=pn(),r=null,l=yu;l!==null;){var c=l.next,f=Rp(l,n);f===0?(l.next=null,r===null?yu=c:r.next=c,c===null&&(na=r)):(r=l,(t!==0||(f&3)!==0)&&(vu=!0)),l=c}Sl(t)}function Rp(t,n){for(var r=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var b=31-Be(f),E=1<<b,I=c[b];I===-1?((E&r)===0||(E&l)!==0)&&(c[b]=Va(E,n)):I<=n&&(t.expiredLanes|=E),f&=~E}if(n=te,r=kt,r=ys(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,r===0||t===n&&(Yt===2||Yt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&wr(l),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||Ir(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(l!==null&&wr(l),vs(r)){case 2:case 8:r=gs;break;case 32:r=Rr;break;case 268435456:r=ps;break;default:r=Rr}return l=Cp.bind(null,t),r=Sr(r,l),t.callbackPriority=n,t.callbackNode=r,n}return l!==null&&l!==null&&wr(l),t.callbackPriority=2,t.callbackNode=null,2}function Cp(t,n){if(ke!==0&&ke!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(pu()&&t.callbackNode!==r)return null;var l=kt;return l=ys(t,t===te?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(cp(t,l,n),Rp(t,pn()),t.callbackNode!=null&&t.callbackNode===r?Cp.bind(null,t):null)}function Np(t,n){if(pu())return null;cp(t,n,!0)}function gb(){Sb(function(){(Ft&6)!==0?Sr(Da,mb):wp()})}function rf(){return as===0&&(as=Ma()),as}function Dp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:As(""+t)}function Ip(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function pb(t,n,r,l,c){if(n==="submit"&&r&&r.stateNode===c){var f=Dp((c[me]||null).action),b=l.submitter;b&&(n=(n=b[me]||null)?Dp(n.formAction):b.getAttribute("formAction"),n!==null&&(f=n,b=null));var E=new Ss("action","action",null,l,c);t.push({event:E,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(as!==0){var I=b?Ip(c,b):new FormData(c);xh(r,{pending:!0,data:I,method:c.method,action:f},null,I)}}else typeof f=="function"&&(E.preventDefault(),I=b?Ip(c,b):new FormData(c),xh(r,{pending:!0,data:I,method:c.method,action:f},f,I))},currentTarget:c}]})}}for(var sf=0;sf<qc.length;sf++){var af=qc[sf],yb=af.toLowerCase(),vb=af[0].toUpperCase()+af.slice(1);On(yb,"on"+vb)}On(cm,"onAnimationEnd"),On(hm,"onAnimationIteration"),On(fm,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(j_,"onTransitionRun"),On(k_,"onTransitionStart"),On(U_,"onTransitionCancel"),On(dm,"onTransitionEnd"),ui("onMouseEnter",["mouseout","mouseover"]),ui("onMouseLeave",["mouseout","mouseover"]),ui("onPointerEnter",["pointerout","pointerover"]),ui("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_b=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(wl));function Vp(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var l=t[r],c=l.event;l=l.listeners;t:{var f=void 0;if(n)for(var b=l.length-1;0<=b;b--){var E=l[b],I=E.instance,z=E.currentTarget;if(E=E.listener,I!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=z;try{f(c)}catch(K){su(K)}c.currentTarget=null,f=I}else for(b=0;b<l.length;b++){if(E=l[b],I=E.instance,z=E.currentTarget,E=E.listener,I!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=z;try{f(c)}catch(K){su(K)}c.currentTarget=null,f=I}}}}function Vt(t,n){var r=n[Ua];r===void 0&&(r=n[Ua]=new Set);var l=t+"__bubble";r.has(l)||(Mp(n,t,2,!1),r.add(l))}function lf(t,n,r){var l=0;n&&(l|=4),Mp(r,t,l,n)}var _u="_reactListening"+Math.random().toString(36).slice(2);function of(t){if(!t[_u]){t[_u]=!0,La.forEach(function(r){r!=="selectionchange"&&(_b.has(r)||lf(r,!1,t),lf(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[_u]||(n[_u]=!0,lf("selectionchange",!1,n))}}function Mp(t,n,r,l){switch(iy(n)){case 2:var c=Fb;break;case 8:c=Yb;break;default:c=Tf}r=c.bind(null,n,r,t),c=void 0,!bn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(n,r,{capture:!0,passive:c}):t.addEventListener(n,r,!0):c!==void 0?t.addEventListener(n,r,{passive:c}):t.addEventListener(n,r,!1)}function uf(t,n,r,l,c){var f=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var E=l.stateNode.containerInfo;if(E===c)break;if(b===4)for(b=l.return;b!==null;){var I=b.tag;if((I===3||I===4)&&b.stateNode.containerInfo===c)return;b=b.return}for(;E!==null;){if(b=oi(E),b===null)return;if(I=b.tag,I===5||I===6||I===26||I===27){l=f=b;continue t}E=E.parentNode}}l=l.return}Eo(function(){var z=f,K=_n(r),W=[];t:{var q=mm.get(t);if(q!==void 0){var H=Ss,Et=t;switch(t){case"keypress":if(Fn(r)===0)break t;case"keydown":case"keyup":H=Is;break;case"focusin":Et="focus",H=Cs;break;case"focusout":Et="blur",H=Cs;break;case"beforeblur":case"afterblur":H=Cs;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=En;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=Oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=No;break;case cm:case hm:case fm:H=Ns;break;case dm:H=Io;break;case"scroll":case"scrollend":H=To;break;case"wheel":H=Vs;break;case"copy":case"cut":case"paste":H=Ds;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=$a;break;case"toggle":case"beforetoggle":H=Mo}var yt=(n&4)!==0,Jt=!yt&&(t==="scroll"||t==="scrollend"),U=yt?q!==null?q+"Capture":null:q;yt=[];for(var j=z,P;j!==null;){var $=j;if(P=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||P===null||U===null||($=Pr(j,U),$!=null&&yt.push(Rl(j,$,P))),Jt)break;j=j.return}0<yt.length&&(q=new H(q,Et,null,r,K),W.push({event:q,listeners:yt}))}}if((n&7)===0){t:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&r!==fi&&(Et=r.relatedTarget||r.fromElement)&&(oi(Et)||Et[yn]))break t;if((H||q)&&(q=K.window===K?K:(q=K.ownerDocument)?q.defaultView||q.parentWindow:window,H?(Et=r.relatedTarget||r.toElement,H=z,Et=Et?oi(Et):null,Et!==null&&(Jt=h(Et),yt=Et.tag,Et!==Jt||yt!==5&&yt!==27&&yt!==6)&&(Et=null)):(H=null,Et=z),H!==Et)){if(yt=En,$="onMouseLeave",U="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(yt=$a,$="onPointerLeave",U="onPointerEnter",j="pointer"),Jt=H==null?q:qn(H),P=Et==null?q:qn(Et),q=new yt($,j+"leave",H,r,K),q.target=Jt,q.relatedTarget=P,$=null,oi(K)===z&&(yt=new yt(U,j+"enter",Et,r,K),yt.target=P,yt.relatedTarget=Jt,$=yt),Jt=$,H&&Et)e:{for(yt=H,U=Et,j=0,P=yt;P;P=ia(P))j++;for(P=0,$=U;$;$=ia($))P++;for(;0<j-P;)yt=ia(yt),j--;for(;0<P-j;)U=ia(U),P--;for(;j--;){if(yt===U||U!==null&&yt===U.alternate)break e;yt=ia(yt),U=ia(U)}yt=null}else yt=null;H!==null&&Op(W,q,H,yt,!1),Et!==null&&Jt!==null&&Op(W,Jt,Et,yt,!0)}}t:{if(q=z?qn(z):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var ct=Wd;else if(Te(q))if(tm)ct=V_;else{ct=D_;var Nt=N_}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?z&&Ha(z.elementType)&&(ct=Wd):ct=I_;if(ct&&(ct=ct(t,z))){yi(W,ct,r,K);break t}Nt&&Nt(t,q,z),t==="focusout"&&z&&q.type==="number"&&z.memoizedProps.value!=null&&Bi(q,"number",q.value)}switch(Nt=z?qn(z):window,t){case"focusin":(Te(Nt)||Nt.contentEditable==="true")&&(Ms=Nt,Pc=z,Wa=null);break;case"focusout":Wa=Pc=Ms=null;break;case"mousedown":zc=!0;break;case"contextmenu":case"mouseup":case"dragend":zc=!1,om(W,r,K);break;case"selectionchange":if(O_)break;case"keydown":case"keyup":om(W,r,K)}var mt;if(Xn)t:{switch(t){case"compositionstart":var vt="onCompositionStart";break t;case"compositionend":vt="onCompositionEnd";break t;case"compositionupdate":vt="onCompositionUpdate";break t}vt=void 0}else Ot?Q(t,r)&&(vt="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(vt="onCompositionStart");vt&&(y&&r.locale!=="ko"&&(Ot||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Ot&&(mt=Qa()):(Qn=K,qi="value"in Qn?Qn.value:Qn.textContent,Ot=!0)),Nt=bu(z,vt),0<Nt.length&&(vt=new Ka(vt,t,null,r,K),W.push({event:vt,listeners:Nt}),mt?vt.data=mt:(mt=rt(r),mt!==null&&(vt.data=mt)))),(mt=m?Ee(t,r):jt(t,r))&&(vt=bu(z,"onBeforeInput"),0<vt.length&&(Nt=new Ka("onBeforeInput","beforeinput",null,r,K),W.push({event:Nt,listeners:vt}),Nt.data=mt)),pb(W,t,z,r,K)}Vp(W,n)})}function Rl(t,n,r){return{instance:t,listener:n,currentTarget:r}}function bu(t,n){for(var r=n+"Capture",l=[];t!==null;){var c=t,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=Pr(t,r),c!=null&&l.unshift(Rl(t,c,f)),c=Pr(t,n),c!=null&&l.push(Rl(t,c,f))),t.tag===3)return l;t=t.return}return[]}function ia(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Op(t,n,r,l,c){for(var f=n._reactName,b=[];r!==null&&r!==l;){var E=r,I=E.alternate,z=E.stateNode;if(E=E.tag,I!==null&&I===l)break;E!==5&&E!==26&&E!==27||z===null||(I=z,c?(z=Pr(r,f),z!=null&&b.unshift(Rl(r,z,I))):c||(z=Pr(r,f),z!=null&&b.push(Rl(r,z,I)))),r=r.return}b.length!==0&&t.push({event:n,listeners:b})}var bb=/\r\n?/g,Eb=/\u0000|\uFFFD/g;function jp(t){return(typeof t=="string"?t:""+t).replace(bb,`
`).replace(Eb,"")}function kp(t,n){return n=jp(n),jp(t)===n}function Eu(){}function Zt(t,n,r,l,c,f){switch(r){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||vn(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&vn(t,""+l);break;case"className":Hn(t,"class",l);break;case"tabIndex":Hn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Hn(t,r,l);break;case"style":qa(t,l,f);break;case"data":if(n!=="object"){Hn(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=As(""+l),t.setAttribute(r,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(r==="formAction"?(n!=="input"&&Zt(t,n,"name",c.name,c,null),Zt(t,n,"formEncType",c.formEncType,c,null),Zt(t,n,"formMethod",c.formMethod,c,null),Zt(t,n,"formTarget",c.formTarget,c,null)):(Zt(t,n,"encType",c.encType,c,null),Zt(t,n,"method",c.method,c,null),Zt(t,n,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(r);break}l=As(""+l),t.setAttribute(r,l);break;case"onClick":l!=null&&(t.onclick=Eu);break;case"onScroll":l!=null&&Vt("scroll",t);break;case"onScrollEnd":l!=null&&Vt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}r=As(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""+l):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":l===!0?t.setAttribute(r,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(r,l):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(r,l):t.removeAttribute(r);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(r):t.setAttribute(r,l);break;case"popover":Vt("beforetoggle",t),Vt("toggle",t),zi(t,"popover",l);break;case"xlinkActuate":Me(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Me(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Me(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Me(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Me(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Me(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Me(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Me(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Me(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":zi(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Vc.get(r)||r,zi(t,r,l))}}function cf(t,n,r,l,c,f){switch(r){case"style":qa(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(r=l.__html,r!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=r}}break;case"children":typeof l=="string"?vn(t,l):(typeof l=="number"||typeof l=="bigint")&&vn(t,""+l);break;case"onScroll":l!=null&&Vt("scroll",t);break;case"onScrollEnd":l!=null&&Vt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Eu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_s.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(c=r.endsWith("Capture"),n=r.slice(2,c?r.length-7:void 0),f=t[me]||null,f=f!=null?f[r]:null,typeof f=="function"&&t.removeEventListener(n,f,c),typeof l=="function")){typeof f!="function"&&f!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,l,c);break t}r in t?t[r]=l:l===!0?t.setAttribute(r,""):zi(t,r,l)}}}function Ue(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",t),Vt("load",t);var l=!1,c=!1,f;for(f in r)if(r.hasOwnProperty(f)){var b=r[f];if(b!=null)switch(f){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Zt(t,n,f,b,r,null)}}c&&Zt(t,n,"srcSet",r.srcSet,r,null),l&&Zt(t,n,"src",r.src,r,null);return;case"input":Vt("invalid",t);var E=f=b=c=null,I=null,z=null;for(l in r)if(r.hasOwnProperty(l)){var K=r[l];if(K!=null)switch(l){case"name":c=K;break;case"type":b=K;break;case"checked":I=K;break;case"defaultChecked":z=K;break;case"value":f=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,n));break;default:Zt(t,n,l,K,r,null)}}kr(t,f,E,I,z,b,c,!1),xs(t);return;case"select":Vt("invalid",t),l=b=f=null;for(c in r)if(r.hasOwnProperty(c)&&(E=r[c],E!=null))switch(c){case"value":f=E;break;case"defaultValue":b=E;break;case"multiple":l=E;default:Zt(t,n,c,E,r,null)}n=f,r=b,t.multiple=!!l,n!=null?hi(t,!!l,n,!1):r!=null&&hi(t,!!l,r,!0);return;case"textarea":Vt("invalid",t),f=c=l=null;for(b in r)if(r.hasOwnProperty(b)&&(E=r[b],E!=null))switch(b){case"value":l=E;break;case"defaultValue":c=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:Zt(t,n,b,E,r,null)}Ur(t,l,c,f),xs(t);return;case"option":for(I in r)if(r.hasOwnProperty(I)&&(l=r[I],l!=null))switch(I){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Zt(t,n,I,l,r,null)}return;case"dialog":Vt("beforetoggle",t),Vt("toggle",t),Vt("cancel",t),Vt("close",t);break;case"iframe":case"object":Vt("load",t);break;case"video":case"audio":for(l=0;l<wl.length;l++)Vt(wl[l],t);break;case"image":Vt("error",t),Vt("load",t);break;case"details":Vt("toggle",t);break;case"embed":case"source":case"link":Vt("error",t),Vt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in r)if(r.hasOwnProperty(z)&&(l=r[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:Zt(t,n,z,l,r,null)}return;default:if(Ha(n)){for(K in r)r.hasOwnProperty(K)&&(l=r[K],l!==void 0&&cf(t,n,K,l,r,void 0));return}}for(E in r)r.hasOwnProperty(E)&&(l=r[E],l!=null&&Zt(t,n,E,l,r,null))}function Tb(t,n,r,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,b=null,E=null,I=null,z=null,K=null;for(H in r){var W=r[H];if(r.hasOwnProperty(H)&&W!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":I=W;default:l.hasOwnProperty(H)||Zt(t,n,H,null,l,W)}}for(var q in l){var H=l[q];if(W=r[q],l.hasOwnProperty(q)&&(H!=null||W!=null))switch(q){case"type":f=H;break;case"name":c=H;break;case"checked":z=H;break;case"defaultChecked":K=H;break;case"value":b=H;break;case"defaultValue":E=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,n));break;default:H!==W&&Zt(t,n,q,H,l,W)}}an(t,b,E,I,z,K,f,c);return;case"select":H=b=E=q=null;for(f in r)if(I=r[f],r.hasOwnProperty(f)&&I!=null)switch(f){case"value":break;case"multiple":H=I;default:l.hasOwnProperty(f)||Zt(t,n,f,null,l,I)}for(c in l)if(f=l[c],I=r[c],l.hasOwnProperty(c)&&(f!=null||I!=null))switch(c){case"value":q=f;break;case"defaultValue":E=f;break;case"multiple":b=f;default:f!==I&&Zt(t,n,c,f,l,I)}n=E,r=b,l=H,q!=null?hi(t,!!r,q,!1):!!l!=!!r&&(n!=null?hi(t,!!r,n,!0):hi(t,!!r,r?[]:"",!1));return;case"textarea":H=q=null;for(E in r)if(c=r[E],r.hasOwnProperty(E)&&c!=null&&!l.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Zt(t,n,E,null,l,c)}for(b in l)if(c=l[b],f=r[b],l.hasOwnProperty(b)&&(c!=null||f!=null))switch(b){case"value":q=c;break;case"defaultValue":H=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==f&&Zt(t,n,b,c,l,f)}Xt(t,q,H);return;case"option":for(var Et in r)if(q=r[Et],r.hasOwnProperty(Et)&&q!=null&&!l.hasOwnProperty(Et))switch(Et){case"selected":t.selected=!1;break;default:Zt(t,n,Et,null,l,q)}for(I in l)if(q=l[I],H=r[I],l.hasOwnProperty(I)&&q!==H&&(q!=null||H!=null))switch(I){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:Zt(t,n,I,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in r)q=r[yt],r.hasOwnProperty(yt)&&q!=null&&!l.hasOwnProperty(yt)&&Zt(t,n,yt,null,l,q);for(z in l)if(q=l[z],H=r[z],l.hasOwnProperty(z)&&q!==H&&(q!=null||H!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(a(137,n));break;default:Zt(t,n,z,q,l,H)}return;default:if(Ha(n)){for(var Jt in r)q=r[Jt],r.hasOwnProperty(Jt)&&q!==void 0&&!l.hasOwnProperty(Jt)&&cf(t,n,Jt,void 0,l,q);for(K in l)q=l[K],H=r[K],!l.hasOwnProperty(K)||q===H||q===void 0&&H===void 0||cf(t,n,K,q,l,H);return}}for(var U in r)q=r[U],r.hasOwnProperty(U)&&q!=null&&!l.hasOwnProperty(U)&&Zt(t,n,U,null,l,q);for(W in l)q=l[W],H=r[W],!l.hasOwnProperty(W)||q===H||q==null&&H==null||Zt(t,n,W,q,l,H)}var hf=null,ff=null;function Tu(t){return t.nodeType===9?t:t.ownerDocument}function Up(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Lp(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function df(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var mf=null;function xb(){var t=window.event;return t&&t.type==="popstate"?t===mf?!1:(mf=t,!0):(mf=null,!1)}var Pp=typeof setTimeout=="function"?setTimeout:void 0,Ab=typeof clearTimeout=="function"?clearTimeout:void 0,zp=typeof Promise=="function"?Promise:void 0,Sb=typeof queueMicrotask=="function"?queueMicrotask:typeof zp<"u"?function(t){return zp.resolve(null).then(t).catch(wb)}:Pp;function wb(t){setTimeout(function(){throw t})}function rr(t){return t==="head"}function Bp(t,n){var r=n,l=0,c=0;do{var f=r.nextSibling;if(t.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"){if(0<l&&8>l){r=l;var b=t.ownerDocument;if(r&1&&Cl(b.documentElement),r&2&&Cl(b.body),r&4)for(r=b.head,Cl(r),b=r.firstChild;b;){var E=b.nextSibling,I=b.nodeName;b[Vr]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&b.rel.toLowerCase()==="stylesheet"||r.removeChild(b),b=E}}if(c===0){t.removeChild(f),kl(n);return}c--}else r==="$"||r==="$?"||r==="$!"?c++:l=r.charCodeAt(0)-48;else l=0;r=f}while(r);kl(n)}function gf(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":gf(r),Pi(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Rb(t,n,r,l){for(;t.nodeType===1;){var c=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Vr])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=kn(t.nextSibling),t===null)break}return null}function Cb(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=kn(t.nextSibling),t===null))return null;return t}function pf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Nb(t,n){var r=t.ownerDocument;if(t.data!=="$?"||r.readyState==="complete")n();else{var l=function(){n(),r.removeEventListener("DOMContentLoaded",l)};r.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function kn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return t}var yf=null;function qp(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(n===0)return t;n--}else r==="/$"&&n++}t=t.previousSibling}return null}function Hp(t,n,r){switch(n=Tu(r),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Cl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Pi(t)}var Cn=new Map,Gp=new Set;function xu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Di=it.d;it.d={f:Db,r:Ib,D:Vb,C:Mb,L:Ob,m:jb,X:Ub,S:kb,M:Lb};function Db(){var t=Di.f(),n=mu();return t||n}function Ib(t){var n=Bn(t);n!==null&&n.tag===5&&n.type==="form"?cg(n):Di.r(t)}var ra=typeof document>"u"?null:document;function Qp(t,n,r){var l=ra;if(l&&typeof n=="string"&&n){var c=ge(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof r=="string"&&(c+='[crossorigin="'+r+'"]'),Gp.has(c)||(Gp.add(c),t={rel:t,crossOrigin:r,href:n},l.querySelector(c)===null&&(n=l.createElement("link"),Ue(n,"link",t),ue(n),l.head.appendChild(n)))}}function Vb(t){Di.D(t),Qp("dns-prefetch",t,null)}function Mb(t,n){Di.C(t,n),Qp("preconnect",t,n)}function Ob(t,n,r){Di.L(t,n,r);var l=ra;if(l&&t&&n){var c='link[rel="preload"][as="'+ge(n)+'"]';n==="image"&&r&&r.imageSrcSet?(c+='[imagesrcset="'+ge(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(c+='[imagesizes="'+ge(r.imageSizes)+'"]')):c+='[href="'+ge(t)+'"]';var f=c;switch(n){case"style":f=sa(t);break;case"script":f=aa(t)}Cn.has(f)||(t=T({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Cn.set(f,t),l.querySelector(c)!==null||n==="style"&&l.querySelector(Nl(f))||n==="script"&&l.querySelector(Dl(f))||(n=l.createElement("link"),Ue(n,"link",t),ue(n),l.head.appendChild(n)))}}function jb(t,n){Di.m(t,n);var r=ra;if(r&&t){var l=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+ge(l)+'"][href="'+ge(t)+'"]',f=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=aa(t)}if(!Cn.has(f)&&(t=T({rel:"modulepreload",href:t},n),Cn.set(f,t),r.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Dl(f)))return}l=r.createElement("link"),Ue(l,"link",t),ue(l),r.head.appendChild(l)}}}function kb(t,n,r){Di.S(t,n,r);var l=ra;if(l&&t){var c=Ye(l).hoistableStyles,f=sa(t);n=n||"default";var b=c.get(f);if(!b){var E={loading:0,preload:null};if(b=l.querySelector(Nl(f)))E.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Cn.get(f))&&vf(t,r);var I=b=l.createElement("link");ue(I),Ue(I,"link",t),I._p=new Promise(function(z,K){I.onload=z,I.onerror=K}),I.addEventListener("load",function(){E.loading|=1}),I.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Au(b,n,l)}b={type:"stylesheet",instance:b,count:1,state:E},c.set(f,b)}}}function Ub(t,n){Di.X(t,n);var r=ra;if(r&&t){var l=Ye(r).hoistableScripts,c=aa(t),f=l.get(c);f||(f=r.querySelector(Dl(c)),f||(t=T({src:t,async:!0},n),(n=Cn.get(c))&&_f(t,n),f=r.createElement("script"),ue(f),Ue(f,"link",t),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Lb(t,n){Di.M(t,n);var r=ra;if(r&&t){var l=Ye(r).hoistableScripts,c=aa(t),f=l.get(c);f||(f=r.querySelector(Dl(c)),f||(t=T({src:t,async:!0,type:"module"},n),(n=Cn.get(c))&&_f(t,n),f=r.createElement("script"),ue(f),Ue(f,"link",t),r.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(c,f))}}function Fp(t,n,r,l){var c=(c=bt.current)?xu(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=sa(r.href),r=Ye(c).hoistableStyles,l=r.get(n),l||(l={type:"style",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=sa(r.href);var f=Ye(c).hoistableStyles,b=f.get(t);if(b||(c=c.ownerDocument||c,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,b),(f=c.querySelector(Nl(t)))&&!f._p&&(b.instance=f,b.state.loading=5),Cn.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Cn.set(t,r),f||Pb(c,t,r,b.state))),n&&l===null)throw Error(a(528,""));return b}if(n&&l!==null)throw Error(a(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=aa(r),r=Ye(c).hoistableScripts,l=r.get(n),l||(l={type:"script",instance:null,count:0,state:null},r.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function sa(t){return'href="'+ge(t)+'"'}function Nl(t){return'link[rel="stylesheet"]['+t+"]"}function Yp(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function Pb(t,n,r,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Ue(n,"link",r),ue(n),t.head.appendChild(n))}function aa(t){return'[src="'+ge(t)+'"]'}function Dl(t){return"script[async]"+t}function Kp(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+ge(r.href)+'"]');if(l)return n.instance=l,ue(l),l;var c=T({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),ue(l),Ue(l,"style",c),Au(l,r.precedence,t),n.instance=l;case"stylesheet":c=sa(r.href);var f=t.querySelector(Nl(c));if(f)return n.state.loading|=4,n.instance=f,ue(f),f;l=Yp(r),(c=Cn.get(c))&&vf(l,c),f=(t.ownerDocument||t).createElement("link"),ue(f);var b=f;return b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),Ue(f,"link",l),n.state.loading|=4,Au(f,r.precedence,t),n.instance=f;case"script":return f=aa(r.src),(c=t.querySelector(Dl(f)))?(n.instance=c,ue(c),c):(l=r,(c=Cn.get(f))&&(l=T({},r),_f(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),ue(c),Ue(c,"link",l),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Au(l,r.precedence,t));return n.instance}function Au(t,n,r){for(var l=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,f=c,b=0;b<l.length;b++){var E=l[b];if(E.dataset.precedence===n)f=E;else if(f!==c)break}f?f.parentNode.insertBefore(t,f.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function vf(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function _f(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Su=null;function Xp(t,n,r){if(Su===null){var l=new Map,c=Su=new Map;c.set(r,l)}else c=Su,l=c.get(r),l||(l=new Map,c.set(r,l));if(l.has(t))return l;for(l.set(t,null),r=r.getElementsByTagName(t),c=0;c<r.length;c++){var f=r[c];if(!(f[Vr]||f[be]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var b=f.getAttribute(n)||"";b=t+b;var E=l.get(b);E?E.push(f):l.set(b,[f])}}return l}function $p(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function zb(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Zp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Il=null;function Bb(){}function qb(t,n,r){if(Il===null)throw Error(a(475));var l=Il;if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=sa(r.href),f=t.querySelector(Nl(c));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=wu.bind(l),t.then(l,l)),n.state.loading|=4,n.instance=f,ue(f);return}f=t.ownerDocument||t,r=Yp(r),(c=Cn.get(c))&&vf(r,c),f=f.createElement("link"),ue(f);var b=f;b._p=new Promise(function(E,I){b.onload=E,b.onerror=I}),Ue(f,"link",r),n.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(n,t),(t=n.state.preload)&&(n.state.loading&3)===0&&(l.count++,n=wu.bind(l),t.addEventListener("load",n),t.addEventListener("error",n))}}function Hb(){if(Il===null)throw Error(a(475));var t=Il;return t.stylesheets&&t.count===0&&bf(t,t.stylesheets),0<t.count?function(n){var r=setTimeout(function(){if(t.stylesheets&&bf(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r)}}:null}function wu(){if(this.count--,this.count===0){if(this.stylesheets)bf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ru=null;function bf(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ru=new Map,n.forEach(Gb,t),Ru=null,wu.call(t))}function Gb(t,n){if(!(n.state.loading&4)){var r=Ru.get(t);if(r)var l=r.get(null);else{r=new Map,Ru.set(t,r);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var b=c[f];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(r.set(b.dataset.precedence,b),l=b)}l&&r.set(null,l)}c=n.instance,b=c.getAttribute("data-precedence"),f=r.get(b)||l,f===l&&r.set(null,c),r.set(b,c),this.count++,l=wu.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),f?f.parentNode.insertBefore(c,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var Vl={$$typeof:lt,Provider:null,Consumer:null,_currentValue:ht,_currentValue2:ht,_threadCount:0};function Qb(t,n,r,l,c,f,b,E){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ai(0),this.hiddenUpdates=ai(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Jp(t,n,r,l,c,f,b,E,I,z,K,W){return t=new Qb(t,n,r,b,E,I,z,W),n=1,f===!0&&(n|=24),f=on(3,null,null,n),t.current=f,f.stateNode=t,n=th(),n.refCount++,t.pooledCache=n,n.refCount++,f.memoizedState={element:l,isDehydrated:r,cache:n},rh(f),t}function Wp(t){return t?(t=Us,t):Us}function ty(t,n,r,l,c,f){c=Wp(c),l.context===null?l.context=c:l.pendingContext=c,l=Qi(n),l.payload={element:r},f=f===void 0?null:f,f!==null&&(l.callback=f),r=Fi(t,l,n),r!==null&&(dn(r,t,n),ol(r,t,n))}function ey(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Ef(t,n){ey(t,n),(t=t.alternate)&&ey(t,n)}function ny(t){if(t.tag===13){var n=ks(t,67108864);n!==null&&dn(n,t,67108864),Ef(t,67108864)}}var Cu=!0;function Fb(t,n,r,l){var c=F.T;F.T=null;var f=it.p;try{it.p=2,Tf(t,n,r,l)}finally{it.p=f,F.T=c}}function Yb(t,n,r,l){var c=F.T;F.T=null;var f=it.p;try{it.p=8,Tf(t,n,r,l)}finally{it.p=f,F.T=c}}function Tf(t,n,r,l){if(Cu){var c=xf(l);if(c===null)uf(t,n,l,Nu,r),ry(t,l);else if(Xb(c,t,n,r,l))l.stopPropagation();else if(ry(t,l),n&4&&-1<Kb.indexOf(t)){for(;c!==null;){var f=Bn(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var b=In(f.pendingLanes);if(b!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var I=1<<31-Be(b);E.entanglements[1]|=I,b&=~I}ei(f),(Ft&6)===0&&(fu=pn()+500,Sl(0))}}break;case 13:E=ks(f,2),E!==null&&dn(E,f,2),mu(),Ef(f,2)}if(f=xf(l),f===null&&uf(t,n,l,Nu,r),f===c)break;c=f}c!==null&&l.stopPropagation()}else uf(t,n,l,null,r)}}function xf(t){return t=_n(t),Af(t)}var Nu=null;function Af(t){if(Nu=null,t=oi(t),t!==null){var n=h(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=d(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Nu=t,null}function iy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wc()){case Da:return 2;case gs:return 8;case Rr:case Rc:return 32;case ps:return 268435456;default:return 32}default:return 32}}var Sf=!1,sr=null,ar=null,lr=null,Ml=new Map,Ol=new Map,or=[],Kb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ry(t,n){switch(t){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":lr=null;break;case"pointerover":case"pointerout":Ml.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ol.delete(n.pointerId)}}function jl(t,n,r,l,c,f){return t===null||t.nativeEvent!==f?(t={blockedOn:n,domEventName:r,eventSystemFlags:l,nativeEvent:f,targetContainers:[c]},n!==null&&(n=Bn(n),n!==null&&ny(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function Xb(t,n,r,l,c){switch(n){case"focusin":return sr=jl(sr,t,n,r,l,c),!0;case"dragenter":return ar=jl(ar,t,n,r,l,c),!0;case"mouseover":return lr=jl(lr,t,n,r,l,c),!0;case"pointerover":var f=c.pointerId;return Ml.set(f,jl(Ml.get(f)||null,t,n,r,l,c)),!0;case"gotpointercapture":return f=c.pointerId,Ol.set(f,jl(Ol.get(f)||null,t,n,r,l,c)),!0}return!1}function sy(t){var n=oi(t.target);if(n!==null){var r=h(n);if(r!==null){if(n=r.tag,n===13){if(n=d(r),n!==null){t.blockedOn=n,mo(t.priority,function(){if(r.tag===13){var l=fn();l=ki(l);var c=ks(r,l);c!==null&&dn(c,r,l),Ef(r,l)}});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Du(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=xf(t.nativeEvent);if(r===null){r=t.nativeEvent;var l=new r.constructor(r.type,r);fi=l,r.target.dispatchEvent(l),fi=null}else return n=Bn(r),n!==null&&ny(n),t.blockedOn=r,!1;n.shift()}return!0}function ay(t,n,r){Du(t)&&r.delete(n)}function $b(){Sf=!1,sr!==null&&Du(sr)&&(sr=null),ar!==null&&Du(ar)&&(ar=null),lr!==null&&Du(lr)&&(lr=null),Ml.forEach(ay),Ol.forEach(ay)}function Iu(t,n){t.blockedOn===n&&(t.blockedOn=null,Sf||(Sf=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,$b)))}var Vu=null;function ly(t){Vu!==t&&(Vu=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Vu===t&&(Vu=null);for(var n=0;n<t.length;n+=3){var r=t[n],l=t[n+1],c=t[n+2];if(typeof l!="function"){if(Af(l||r)===null)continue;break}var f=Bn(r);f!==null&&(t.splice(n,3),n-=3,xh(f,{pending:!0,data:c,method:r.method,action:l},l,c))}}))}function kl(t){function n(I){return Iu(I,t)}sr!==null&&Iu(sr,t),ar!==null&&Iu(ar,t),lr!==null&&Iu(lr,t),Ml.forEach(n),Ol.forEach(n);for(var r=0;r<or.length;r++){var l=or[r];l.blockedOn===t&&(l.blockedOn=null)}for(;0<or.length&&(r=or[0],r.blockedOn===null);)sy(r),r.blockedOn===null&&or.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(l=0;l<r.length;l+=3){var c=r[l],f=r[l+1],b=c[me]||null;if(typeof f=="function")b||ly(r);else if(b){var E=null;if(f&&f.hasAttribute("formAction")){if(c=f,b=f[me]||null)E=b.formAction;else if(Af(c)!==null)continue}else E=b.action;typeof E=="function"?r[l+1]=E:(r.splice(l,3),l-=3),ly(r)}}}function wf(t){this._internalRoot=t}Mu.prototype.render=wf.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var r=n.current,l=fn();ty(r,l,t,n,null,null)},Mu.prototype.unmount=wf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;ty(t.current,2,null,t,null,null),mu(),n[yn]=null}};function Mu(t){this._internalRoot=t}Mu.prototype.unstable_scheduleHydration=function(t){if(t){var n=Ui();t={blockedOn:null,target:t,priority:n};for(var r=0;r<or.length&&n!==0&&n<or[r].priority;r++);or.splice(r,0,t),r===0&&sy(t)}};var oy=e.version;if(oy!=="19.1.0")throw Error(a(527,oy,"19.1.0"));it.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(n),t=t!==null?p(t):null,t=t===null?null:t.stateNode,t};var Zb={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ou.isDisabled&&Ou.supportsFiber)try{ae=Ou.inject(Zb),Qt=Ou}catch{}}return Ll.createRoot=function(t,n){if(!o(t))throw Error(a(299));var r=!1,l="",c=Ag,f=Sg,b=wg,E=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(b=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=Jp(t,1,!1,null,null,r,l,c,f,b,E,null),t[yn]=n.current,of(t),new wf(n)},Ll.hydrateRoot=function(t,n,r){if(!o(t))throw Error(a(299));var l=!1,c="",f=Ag,b=Sg,E=wg,I=null,z=null;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(b=r.onCaughtError),r.onRecoverableError!==void 0&&(E=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(I=r.unstable_transitionCallbacks),r.formState!==void 0&&(z=r.formState)),n=Jp(t,1,!0,n,r??null,l,c,f,b,E,I,z),n.context=Wp(null),r=n.current,l=fn(),l=ki(l),c=Qi(l),c.callback=null,Fi(r,c,l),r=l,n.current.lanes=r,li(n,r),ei(n),t[yn]=n.current,of(t),new Mu(n)},Ll.version="19.1.0",Ll}var vy;function lE(){if(vy)return Nf.exports;vy=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Nf.exports=aE(),Nf.exports}var oE=lE();const uE="modulepreload",cE=function(s){return"/youtube-bgm-research/"+s},_y={},ha=function(e,i,a){let o=Promise.resolve();if(i&&i.length>0){let d=function(p){return Promise.all(p.map(T=>Promise.resolve(T).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const g=document.querySelector("meta[property=csp-nonce]"),_=(g==null?void 0:g.nonce)||(g==null?void 0:g.getAttribute("nonce"));o=d(i.map(p=>{if(p=cE(p),p in _y)return;_y[p]=!0;const T=p.endsWith(".css"),A=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${A}`))return;const w=document.createElement("link");if(w.rel=T?"stylesheet":uE,T||(w.as="script"),w.crossOrigin="",w.href=p,_&&w.setAttribute("nonce",_),document.head.appendChild(w),T)return new Promise((k,B)=>{w.addEventListener("load",k),w.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${p}`)))})}))}function h(d){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=d,window.dispatchEvent(g),!g.defaultPrevented)throw d}return o.then(d=>{for(const g of d||[])g.status==="rejected"&&h(g.reason);return e().catch(h)})},hE=()=>{};var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=function(s){const e=[];let i=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}return e},fE=function(s){const e=[];let i=0,a=0;for(;i<s.length;){const o=s[i++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const h=s[i++];e[a++]=String.fromCharCode((o&31)<<6|h&63)}else if(o>239&&o<365){const h=s[i++],d=s[i++],g=s[i++],_=((o&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(_>>10)),e[a++]=String.fromCharCode(56320+(_&1023))}else{const h=s[i++],d=s[i++];e[a++]=String.fromCharCode((o&15)<<12|(h&63)<<6|d&63)}}return e.join("")},M0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const h=s[o],d=o+1<s.length,g=d?s[o+1]:0,_=o+2<s.length,p=_?s[o+2]:0,T=h>>2,A=(h&3)<<4|g>>4;let w=(g&15)<<2|p>>6,k=p&63;_||(k=64,d||(w=64)),a.push(i[T],i[A],i[w],i[k])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(V0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):fE(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const h=i[s.charAt(o++)],g=o<s.length?i[s.charAt(o)]:0;++o;const p=o<s.length?i[s.charAt(o)]:64;++o;const A=o<s.length?i[s.charAt(o)]:64;if(++o,h==null||g==null||p==null||A==null)throw new dE;const w=h<<2|g>>4;if(a.push(w),p!==64){const k=g<<4&240|p>>2;if(a.push(k),A!==64){const B=p<<6&192|A;a.push(B)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class dE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mE=function(s){const e=V0(s);return M0.encodeByteArray(e,!0)},Fu=function(s){return mE(s).replace(/\./g,"")},gE=function(s){try{return M0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=()=>pE().__FIREBASE_DEFAULTS__,vE=()=>{if(typeof process>"u"||typeof by>"u")return;const s=by.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},_E=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&gE(s[1]);return e&&JSON.parse(e)},dd=()=>{try{return hE()||yE()||vE()||_E()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},bE=s=>{var e,i;return(i=(e=dd())===null||e===void 0?void 0:e.emulatorHosts)===null||i===void 0?void 0:i[s]},EE=s=>{const e=bE(s);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},O0=()=>{var s;return(s=dd())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(s){return s.endsWith(".cloudworkstations.dev")}async function xE(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",o=s.iat||0,h=s.sub||s.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Fu(JSON.stringify(i)),Fu(JSON.stringify(d)),""].join(".")}const Gl={};function SE(){const s={prod:[],emulator:[]};for(const e of Object.keys(Gl))Gl[e]?s.emulator.push(e):s.prod.push(e);return s}function wE(s){let e=document.getElementById(s),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),i=!0),{created:i,element:e}}let Ey=!1;function RE(s,e){if(typeof window>"u"||typeof document>"u"||!md(window.location.host)||Gl[s]===e||Gl[s]||Ey)return;Gl[s]=e;function i(w){return`__firebase__banner__${w}`}const a="__firebase__banner",h=SE().prod.length>0;function d(){const w=document.getElementById(a);w&&w.remove()}function g(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function _(w,k){w.setAttribute("width","24"),w.setAttribute("id",k),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Ey=!0,d()},w}function T(w,k){w.setAttribute("id",k),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function A(){const w=wE(a),k=i("text"),B=document.getElementById(k)||document.createElement("span"),G=i("learnmore"),Y=document.getElementById(G)||document.createElement("a"),ft=i("preprendIcon"),at=document.getElementById(ft)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const lt=w.element;g(lt),T(Y,G);const X=p();_(at,ft),lt.append(at,B,Y,X),document.body.appendChild(lt)}h?(B.innerText="Preview backend disconnected.",at.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(at.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",k)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NE(){var s;const e=(s=dd())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DE(){return!NE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IE(){try{return typeof indexedDB=="object"}catch{return!1}}function VE(){return new Promise((s,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),i||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{i=!1},o.onerror=()=>{var h;e(((h=o.error)===null||h===void 0?void 0:h.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="FirebaseError";class xa extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=ME,Object.setPrototypeOf(this,xa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,j0.prototype.create)}}class j0{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},o=`${this.service}/${e}`,h=this.errors[e],d=h?OE(h,a):"Error",g=`${this.serviceName}: ${d} (${o}).`;return new xa(o,g,a)}}function OE(s,e){return s.replace(jE,(i,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const jE=/\{\$([^}]+)}/g;function Yu(s,e){if(s===e)return!0;const i=Object.keys(s),a=Object.keys(e);for(const o of i){if(!a.includes(o))return!1;const h=s[o],d=e[o];if(Ty(h)&&Ty(d)){if(!Yu(h,d))return!1}else if(h!==d)return!1}for(const o of a)if(!i.includes(o))return!1;return!0}function Ty(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(s){return s&&s._delegate?s._delegate:s}class Xl{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new TE;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:i});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){var i;const a=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(i=e==null?void 0:e.optional)!==null&&i!==void 0?i:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(h){if(o)return null;throw h}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LE(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:o});a.resolve(h)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);a===g&&d.resolve(o)}return o}onInit(e,i){var a;const o=this.normalizeInstanceIdentifier(i),h=(a=this.onInitCallbacks.get(o))!==null&&a!==void 0?a:new Set;h.add(e),this.onInitCallbacks.set(o,h);const d=this.instances.get(o);return d&&e(d,o),()=>{h.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const o of a)try{o(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:UE(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UE(s){return s===ls?void 0:s}function LE(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new kE(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Lt||(Lt={}));const zE={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},BE=Lt.INFO,qE={[Lt.DEBUG]:"log",[Lt.VERBOSE]:"log",[Lt.INFO]:"info",[Lt.WARN]:"warn",[Lt.ERROR]:"error"},HE=(s,e,...i)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=qE[e];if(o)console[o](`[${a}]  ${s.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class k0{constructor(e){this.name=e,this._logLevel=BE,this._logHandler=HE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Lt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Lt.DEBUG,...e),this._logHandler(this,Lt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Lt.VERBOSE,...e),this._logHandler(this,Lt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Lt.INFO,...e),this._logHandler(this,Lt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Lt.WARN,...e),this._logHandler(this,Lt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Lt.ERROR,...e),this._logHandler(this,Lt.ERROR,...e)}}const GE=(s,e)=>e.some(i=>s instanceof i);let xy,Ay;function QE(){return xy||(xy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FE(){return Ay||(Ay=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const U0=new WeakMap,qf=new WeakMap,L0=new WeakMap,Mf=new WeakMap,gd=new WeakMap;function YE(s){const e=new Promise((i,a)=>{const o=()=>{s.removeEventListener("success",h),s.removeEventListener("error",d)},h=()=>{i(hr(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",h),s.addEventListener("error",d)});return e.then(i=>{i instanceof IDBCursor&&U0.set(i,s)}).catch(()=>{}),gd.set(e,s),e}function KE(s){if(qf.has(s))return;const e=new Promise((i,a)=>{const o=()=>{s.removeEventListener("complete",h),s.removeEventListener("error",d),s.removeEventListener("abort",d)},h=()=>{i(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",h),s.addEventListener("error",d),s.addEventListener("abort",d)});qf.set(s,e)}let Hf={get(s,e,i){if(s instanceof IDBTransaction){if(e==="done")return qf.get(s);if(e==="objectStoreNames")return s.objectStoreNames||L0.get(s);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return hr(s[e])},set(s,e,i){return s[e]=i,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function XE(s){Hf=s(Hf)}function $E(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=s.call(Of(this),e,...i);return L0.set(a,e.sort?e.sort():[e]),hr(a)}:FE().includes(s)?function(...e){return s.apply(Of(this),e),hr(U0.get(this))}:function(...e){return hr(s.apply(Of(this),e))}}function ZE(s){return typeof s=="function"?$E(s):(s instanceof IDBTransaction&&KE(s),GE(s,QE())?new Proxy(s,Hf):s)}function hr(s){if(s instanceof IDBRequest)return YE(s);if(Mf.has(s))return Mf.get(s);const e=ZE(s);return e!==s&&(Mf.set(s,e),gd.set(e,s)),e}const Of=s=>gd.get(s);function JE(s,e,{blocked:i,upgrade:a,blocking:o,terminated:h}={}){const d=indexedDB.open(s,e),g=hr(d);return a&&d.addEventListener("upgradeneeded",_=>{a(hr(d.result),_.oldVersion,_.newVersion,hr(d.transaction),_)}),i&&d.addEventListener("blocked",_=>i(_.oldVersion,_.newVersion,_)),g.then(_=>{h&&_.addEventListener("close",()=>h()),o&&_.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),g}const WE=["get","getKey","getAll","getAllKeys","count"],tT=["put","add","delete","clear"],jf=new Map;function Sy(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(jf.get(e))return jf.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,o=tT.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(o||WE.includes(i)))return;const h=async function(d,...g){const _=this.transaction(d,o?"readwrite":"readonly");let p=_.store;return a&&(p=p.index(g.shift())),(await Promise.all([p[i](...g),o&&_.done]))[0]};return jf.set(e,h),h}XE(s=>({...s,get:(e,i,a)=>Sy(e,i)||s.get(e,i,a),has:(e,i)=>!!Sy(e,i)||s.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(nT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function nT(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gf="@firebase/app",wy="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new k0("@firebase/app"),iT="@firebase/app-compat",rT="@firebase/analytics-compat",sT="@firebase/analytics",aT="@firebase/app-check-compat",lT="@firebase/app-check",oT="@firebase/auth",uT="@firebase/auth-compat",cT="@firebase/database",hT="@firebase/data-connect",fT="@firebase/database-compat",dT="@firebase/functions",mT="@firebase/functions-compat",gT="@firebase/installations",pT="@firebase/installations-compat",yT="@firebase/messaging",vT="@firebase/messaging-compat",_T="@firebase/performance",bT="@firebase/performance-compat",ET="@firebase/remote-config",TT="@firebase/remote-config-compat",xT="@firebase/storage",AT="@firebase/storage-compat",ST="@firebase/firestore",wT="@firebase/ai",RT="@firebase/firestore-compat",CT="firebase",NT="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf="[DEFAULT]",DT={[Gf]:"fire-core",[iT]:"fire-core-compat",[sT]:"fire-analytics",[rT]:"fire-analytics-compat",[lT]:"fire-app-check",[aT]:"fire-app-check-compat",[oT]:"fire-auth",[uT]:"fire-auth-compat",[cT]:"fire-rtdb",[hT]:"fire-data-connect",[fT]:"fire-rtdb-compat",[dT]:"fire-fn",[mT]:"fire-fn-compat",[gT]:"fire-iid",[pT]:"fire-iid-compat",[yT]:"fire-fcm",[vT]:"fire-fcm-compat",[_T]:"fire-perf",[bT]:"fire-perf-compat",[ET]:"fire-rc",[TT]:"fire-rc-compat",[xT]:"fire-gcs",[AT]:"fire-gcs-compat",[ST]:"fire-fst",[RT]:"fire-fst-compat",[wT]:"fire-vertex","fire-js":"fire-js",[CT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Map,IT=new Map,Ff=new Map;function Ry(s,e){try{s.container.addComponent(e)}catch(i){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,i)}}function Xu(s){const e=s.name;if(Ff.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Ff.set(e,s);for(const i of Ku.values())Ry(i,s);for(const i of IT.values())Ry(i,s);return!0}function VT(s,e){const i=s.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),s.container.getProvider(e)}function MT(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fr=new j0("app","Firebase",OT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e,i,a){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},i),this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Xl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=NT;function P0(s,e={}){let i=s;typeof e!="object"&&(e={name:e});const a=Object.assign({name:Qf,automaticDataCollectionEnabled:!0},e),o=a.name;if(typeof o!="string"||!o)throw fr.create("bad-app-name",{appName:String(o)});if(i||(i=O0()),!i)throw fr.create("no-options");const h=Ku.get(o);if(h){if(Yu(i,h.options)&&Yu(a,h.config))return h;throw fr.create("duplicate-app",{appName:o})}const d=new PE(o);for(const _ of Ff.values())d.addComponent(_);const g=new jT(i,a,d);return Ku.set(o,g),g}function UT(s=Qf){const e=Ku.get(s);if(!e&&s===Qf&&O0())return P0();if(!e)throw fr.create("no-app",{appName:s});return e}function da(s,e,i){var a;let o=(a=DT[s])!==null&&a!==void 0?a:s;i&&(o+=`-${i}`);const h=o.match(/\s|\//),d=e.match(/\s|\//);if(h||d){const g=[`Unable to register library "${o}" with version "${e}":`];h&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),h&&d&&g.push("and"),d&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(g.join(" "));return}Xu(new Xl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firebase-heartbeat-database",PT=1,$l="firebase-heartbeat-store";let kf=null;function z0(){return kf||(kf=JE(LT,PT,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore($l)}catch(i){console.warn(i)}}}}).catch(s=>{throw fr.create("idb-open",{originalErrorMessage:s.message})})),kf}async function zT(s){try{const i=(await z0()).transaction($l),a=await i.objectStore($l).get(B0(s));return await i.done,a}catch(e){if(e instanceof xa)Mi.warn(e.message);else{const i=fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mi.warn(i.message)}}}async function Cy(s,e){try{const a=(await z0()).transaction($l,"readwrite");await a.objectStore($l).put(e,B0(s)),await a.done}catch(i){if(i instanceof xa)Mi.warn(i.message);else{const a=fr.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});Mi.warn(a.message)}}}function B0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=1024,qT=30;class HT{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new QT(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,i;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),h=Ny();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===h||this._heartbeatsCache.heartbeats.some(d=>d.date===h))return;if(this._heartbeatsCache.heartbeats.push({date:h,agent:o}),this._heartbeatsCache.heartbeats.length>qT){const d=FT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Mi.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Ny(),{heartbeatsToSend:a,unsentEntries:o}=GT(this._heartbeatsCache.heartbeats),h=Fu(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),h}catch(i){return Mi.warn(i),""}}}function Ny(){return new Date().toISOString().substring(0,10)}function GT(s,e=BT){const i=[];let a=s.slice();for(const o of s){const h=i.find(d=>d.agent===o.agent);if(h){if(h.dates.push(o.date),Dy(i)>e){h.dates.pop();break}}else if(i.push({agent:o.agent,dates:[o.date]}),Dy(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class QT{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IE()?VE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await zT(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var i;if(await this._canUseIndexedDBPromise){const o=await this.read();return Cy(this.app,{lastSentHeartbeatDate:(i=e.lastSentHeartbeatDate)!==null&&i!==void 0?i:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function Dy(s){return Fu(JSON.stringify({version:2,heartbeats:s})).length}function FT(s){if(s.length===0)return-1;let e=0,i=s[0].date;for(let a=1;a<s.length;a++)s[a].date<i&&(i=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(s){Xu(new Xl("platform-logger",e=>new eT(e),"PRIVATE")),Xu(new Xl("heartbeat",e=>new HT(e),"PRIVATE")),da(Gf,wy,s),da(Gf,wy,"esm2017"),da("fire-js","")}YT("");var Iy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dr,q0;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function D(){}D.prototype=S.prototype,N.D=S.prototype,N.prototype=new D,N.prototype.constructor=N,N.C=function(O,C,V){for(var R=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)R[Bt-2]=arguments[Bt];return S.prototype[C].apply(O,R)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,i),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,S,D){D||(D=0);var O=Array(16);if(typeof S=="string")for(var C=0;16>C;++C)O[C]=S.charCodeAt(D++)|S.charCodeAt(D++)<<8|S.charCodeAt(D++)<<16|S.charCodeAt(D++)<<24;else for(C=0;16>C;++C)O[C]=S[D++]|S[D++]<<8|S[D++]<<16|S[D++]<<24;S=N.g[0],D=N.g[1],C=N.g[2];var V=N.g[3],R=S+(V^D&(C^V))+O[0]+3614090360&4294967295;S=D+(R<<7&4294967295|R>>>25),R=V+(C^S&(D^C))+O[1]+3905402710&4294967295,V=S+(R<<12&4294967295|R>>>20),R=C+(D^V&(S^D))+O[2]+606105819&4294967295,C=V+(R<<17&4294967295|R>>>15),R=D+(S^C&(V^S))+O[3]+3250441966&4294967295,D=C+(R<<22&4294967295|R>>>10),R=S+(V^D&(C^V))+O[4]+4118548399&4294967295,S=D+(R<<7&4294967295|R>>>25),R=V+(C^S&(D^C))+O[5]+1200080426&4294967295,V=S+(R<<12&4294967295|R>>>20),R=C+(D^V&(S^D))+O[6]+2821735955&4294967295,C=V+(R<<17&4294967295|R>>>15),R=D+(S^C&(V^S))+O[7]+4249261313&4294967295,D=C+(R<<22&4294967295|R>>>10),R=S+(V^D&(C^V))+O[8]+1770035416&4294967295,S=D+(R<<7&4294967295|R>>>25),R=V+(C^S&(D^C))+O[9]+2336552879&4294967295,V=S+(R<<12&4294967295|R>>>20),R=C+(D^V&(S^D))+O[10]+4294925233&4294967295,C=V+(R<<17&4294967295|R>>>15),R=D+(S^C&(V^S))+O[11]+2304563134&4294967295,D=C+(R<<22&4294967295|R>>>10),R=S+(V^D&(C^V))+O[12]+1804603682&4294967295,S=D+(R<<7&4294967295|R>>>25),R=V+(C^S&(D^C))+O[13]+4254626195&4294967295,V=S+(R<<12&4294967295|R>>>20),R=C+(D^V&(S^D))+O[14]+2792965006&4294967295,C=V+(R<<17&4294967295|R>>>15),R=D+(S^C&(V^S))+O[15]+1236535329&4294967295,D=C+(R<<22&4294967295|R>>>10),R=S+(C^V&(D^C))+O[1]+4129170786&4294967295,S=D+(R<<5&4294967295|R>>>27),R=V+(D^C&(S^D))+O[6]+3225465664&4294967295,V=S+(R<<9&4294967295|R>>>23),R=C+(S^D&(V^S))+O[11]+643717713&4294967295,C=V+(R<<14&4294967295|R>>>18),R=D+(V^S&(C^V))+O[0]+3921069994&4294967295,D=C+(R<<20&4294967295|R>>>12),R=S+(C^V&(D^C))+O[5]+3593408605&4294967295,S=D+(R<<5&4294967295|R>>>27),R=V+(D^C&(S^D))+O[10]+38016083&4294967295,V=S+(R<<9&4294967295|R>>>23),R=C+(S^D&(V^S))+O[15]+3634488961&4294967295,C=V+(R<<14&4294967295|R>>>18),R=D+(V^S&(C^V))+O[4]+3889429448&4294967295,D=C+(R<<20&4294967295|R>>>12),R=S+(C^V&(D^C))+O[9]+568446438&4294967295,S=D+(R<<5&4294967295|R>>>27),R=V+(D^C&(S^D))+O[14]+3275163606&4294967295,V=S+(R<<9&4294967295|R>>>23),R=C+(S^D&(V^S))+O[3]+4107603335&4294967295,C=V+(R<<14&4294967295|R>>>18),R=D+(V^S&(C^V))+O[8]+1163531501&4294967295,D=C+(R<<20&4294967295|R>>>12),R=S+(C^V&(D^C))+O[13]+2850285829&4294967295,S=D+(R<<5&4294967295|R>>>27),R=V+(D^C&(S^D))+O[2]+4243563512&4294967295,V=S+(R<<9&4294967295|R>>>23),R=C+(S^D&(V^S))+O[7]+1735328473&4294967295,C=V+(R<<14&4294967295|R>>>18),R=D+(V^S&(C^V))+O[12]+2368359562&4294967295,D=C+(R<<20&4294967295|R>>>12),R=S+(D^C^V)+O[5]+4294588738&4294967295,S=D+(R<<4&4294967295|R>>>28),R=V+(S^D^C)+O[8]+2272392833&4294967295,V=S+(R<<11&4294967295|R>>>21),R=C+(V^S^D)+O[11]+1839030562&4294967295,C=V+(R<<16&4294967295|R>>>16),R=D+(C^V^S)+O[14]+4259657740&4294967295,D=C+(R<<23&4294967295|R>>>9),R=S+(D^C^V)+O[1]+2763975236&4294967295,S=D+(R<<4&4294967295|R>>>28),R=V+(S^D^C)+O[4]+1272893353&4294967295,V=S+(R<<11&4294967295|R>>>21),R=C+(V^S^D)+O[7]+4139469664&4294967295,C=V+(R<<16&4294967295|R>>>16),R=D+(C^V^S)+O[10]+3200236656&4294967295,D=C+(R<<23&4294967295|R>>>9),R=S+(D^C^V)+O[13]+681279174&4294967295,S=D+(R<<4&4294967295|R>>>28),R=V+(S^D^C)+O[0]+3936430074&4294967295,V=S+(R<<11&4294967295|R>>>21),R=C+(V^S^D)+O[3]+3572445317&4294967295,C=V+(R<<16&4294967295|R>>>16),R=D+(C^V^S)+O[6]+76029189&4294967295,D=C+(R<<23&4294967295|R>>>9),R=S+(D^C^V)+O[9]+3654602809&4294967295,S=D+(R<<4&4294967295|R>>>28),R=V+(S^D^C)+O[12]+3873151461&4294967295,V=S+(R<<11&4294967295|R>>>21),R=C+(V^S^D)+O[15]+530742520&4294967295,C=V+(R<<16&4294967295|R>>>16),R=D+(C^V^S)+O[2]+3299628645&4294967295,D=C+(R<<23&4294967295|R>>>9),R=S+(C^(D|~V))+O[0]+4096336452&4294967295,S=D+(R<<6&4294967295|R>>>26),R=V+(D^(S|~C))+O[7]+1126891415&4294967295,V=S+(R<<10&4294967295|R>>>22),R=C+(S^(V|~D))+O[14]+2878612391&4294967295,C=V+(R<<15&4294967295|R>>>17),R=D+(V^(C|~S))+O[5]+4237533241&4294967295,D=C+(R<<21&4294967295|R>>>11),R=S+(C^(D|~V))+O[12]+1700485571&4294967295,S=D+(R<<6&4294967295|R>>>26),R=V+(D^(S|~C))+O[3]+2399980690&4294967295,V=S+(R<<10&4294967295|R>>>22),R=C+(S^(V|~D))+O[10]+4293915773&4294967295,C=V+(R<<15&4294967295|R>>>17),R=D+(V^(C|~S))+O[1]+2240044497&4294967295,D=C+(R<<21&4294967295|R>>>11),R=S+(C^(D|~V))+O[8]+1873313359&4294967295,S=D+(R<<6&4294967295|R>>>26),R=V+(D^(S|~C))+O[15]+4264355552&4294967295,V=S+(R<<10&4294967295|R>>>22),R=C+(S^(V|~D))+O[6]+2734768916&4294967295,C=V+(R<<15&4294967295|R>>>17),R=D+(V^(C|~S))+O[13]+1309151649&4294967295,D=C+(R<<21&4294967295|R>>>11),R=S+(C^(D|~V))+O[4]+4149444226&4294967295,S=D+(R<<6&4294967295|R>>>26),R=V+(D^(S|~C))+O[11]+3174756917&4294967295,V=S+(R<<10&4294967295|R>>>22),R=C+(S^(V|~D))+O[2]+718787259&4294967295,C=V+(R<<15&4294967295|R>>>17),R=D+(V^(C|~S))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+C&4294967295,N.g[3]=N.g[3]+V&4294967295}a.prototype.u=function(N,S){S===void 0&&(S=N.length);for(var D=S-this.blockSize,O=this.B,C=this.h,V=0;V<S;){if(C==0)for(;V<=D;)o(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<S;)if(O[C++]=N.charCodeAt(V++),C==this.blockSize){o(this,O),C=0;break}}else for(;V<S;)if(O[C++]=N[V++],C==this.blockSize){o(this,O),C=0;break}}this.h=C,this.o+=S},a.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;var D=8*this.o;for(S=N.length-8;S<N.length;++S)N[S]=D&255,D/=256;for(this.u(N),N=Array(16),S=D=0;4>S;++S)for(var O=0;32>O;O+=8)N[D++]=this.g[S]>>>O&255;return N};function h(N,S){var D=g;return Object.prototype.hasOwnProperty.call(D,N)?D[N]:D[N]=S(N)}function d(N,S){this.h=S;for(var D=[],O=!0,C=N.length-1;0<=C;C--){var V=N[C]|0;O&&V==S||(D[C]=V,O=!1)}this.g=D}var g={};function _(N){return-128<=N&&128>N?h(N,function(S){return new d([S|0],0>S?-1:0)}):new d([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return A;if(0>N)return Y(p(-N));for(var S=[],D=1,O=0;N>=D;O++)S[O]=N/D|0,D*=4294967296;return new d(S,0)}function T(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return Y(T(N.substring(1),S));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=p(Math.pow(S,8)),O=A,C=0;C<N.length;C+=8){var V=Math.min(8,N.length-C),R=parseInt(N.substring(C,C+V),S);8>V?(V=p(Math.pow(S,V)),O=O.j(V).add(p(R))):(O=O.j(D),O=O.add(p(R)))}return O}var A=_(0),w=_(1),k=_(16777216);s=d.prototype,s.m=function(){if(G(this))return-Y(this).m();for(var N=0,S=1,D=0;D<this.g.length;D++){var O=this.i(D);N+=(0<=O?O:4294967296+O)*S,S*=4294967296}return N},s.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(B(this))return"0";if(G(this))return"-"+Y(this).toString(N);for(var S=p(Math.pow(N,6)),D=this,O="";;){var C=X(D,S).g;D=ft(D,C.j(S));var V=((0<D.g.length?D.g[0]:D.h)>>>0).toString(N);if(D=C,B(D))return V+O;for(;6>V.length;)V="0"+V;O=V+O}},s.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function B(N){if(N.h!=0)return!1;for(var S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function G(N){return N.h==-1}s.l=function(N){return N=ft(this,N),G(N)?-1:B(N)?0:1};function Y(N){for(var S=N.g.length,D=[],O=0;O<S;O++)D[O]=~N.g[O];return new d(D,~N.h).add(w)}s.abs=function(){return G(this)?Y(this):this},s.add=function(N){for(var S=Math.max(this.g.length,N.g.length),D=[],O=0,C=0;C<=S;C++){var V=O+(this.i(C)&65535)+(N.i(C)&65535),R=(V>>>16)+(this.i(C)>>>16)+(N.i(C)>>>16);O=R>>>16,V&=65535,R&=65535,D[C]=R<<16|V}return new d(D,D[D.length-1]&-2147483648?-1:0)};function ft(N,S){return N.add(Y(S))}s.j=function(N){if(B(this)||B(N))return A;if(G(this))return G(N)?Y(this).j(Y(N)):Y(Y(this).j(N));if(G(N))return Y(this.j(Y(N)));if(0>this.l(k)&&0>N.l(k))return p(this.m()*N.m());for(var S=this.g.length+N.g.length,D=[],O=0;O<2*S;O++)D[O]=0;for(O=0;O<this.g.length;O++)for(var C=0;C<N.g.length;C++){var V=this.i(O)>>>16,R=this.i(O)&65535,Bt=N.i(C)>>>16,qt=N.i(C)&65535;D[2*O+2*C]+=R*qt,at(D,2*O+2*C),D[2*O+2*C+1]+=V*qt,at(D,2*O+2*C+1),D[2*O+2*C+1]+=R*Bt,at(D,2*O+2*C+1),D[2*O+2*C+2]+=V*Bt,at(D,2*O+2*C+2)}for(O=0;O<S;O++)D[O]=D[2*O+1]<<16|D[2*O];for(O=S;O<2*S;O++)D[O]=0;return new d(D,0)};function at(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function lt(N,S){this.g=N,this.h=S}function X(N,S){if(B(S))throw Error("division by zero");if(B(N))return new lt(A,A);if(G(N))return S=X(Y(N),S),new lt(Y(S.g),Y(S.h));if(G(S))return S=X(N,Y(S)),new lt(Y(S.g),S.h);if(30<N.g.length){if(G(N)||G(S))throw Error("slowDivide_ only works with positive integers.");for(var D=w,O=S;0>=O.l(N);)D=Z(D),O=Z(O);var C=dt(D,1),V=dt(O,1);for(O=dt(O,2),D=dt(D,2);!B(O);){var R=V.add(O);0>=R.l(N)&&(C=C.add(D),V=R),O=dt(O,1),D=dt(D,1)}return S=ft(N,C.j(S)),new lt(C,S)}for(C=A;0<=N.l(S);){for(D=Math.max(1,Math.floor(N.m()/S.m())),O=Math.ceil(Math.log(D)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),V=p(D),R=V.j(S);G(R)||0<R.l(N);)D-=O,V=p(D),R=V.j(S);B(V)&&(V=w),C=C.add(V),N=ft(N,R)}return new lt(C,N)}s.A=function(N){return X(this,N).h},s.and=function(N){for(var S=Math.max(this.g.length,N.g.length),D=[],O=0;O<S;O++)D[O]=this.i(O)&N.i(O);return new d(D,this.h&N.h)},s.or=function(N){for(var S=Math.max(this.g.length,N.g.length),D=[],O=0;O<S;O++)D[O]=this.i(O)|N.i(O);return new d(D,this.h|N.h)},s.xor=function(N){for(var S=Math.max(this.g.length,N.g.length),D=[],O=0;O<S;O++)D[O]=this.i(O)^N.i(O);return new d(D,this.h^N.h)};function Z(N){for(var S=N.g.length+1,D=[],O=0;O<S;O++)D[O]=N.i(O)<<1|N.i(O-1)>>>31;return new d(D,N.h)}function dt(N,S){var D=S>>5;S%=32;for(var O=N.g.length-D,C=[],V=0;V<O;V++)C[V]=0<S?N.i(V+D)>>>S|N.i(V+D+1)<<32-S:N.i(V+D);return new d(C,N.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,q0=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=T,dr=d}).apply(typeof Iy<"u"?Iy:typeof self<"u"?self:typeof window<"u"?window:{});var ju=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H0,Pl,G0,zu,Yf,Q0,F0,Y0;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,y){return u==Array.prototype||u==Object.prototype||(u[m]=y.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ju=="object"&&ju];for(var m=0;m<u.length;++m){var y=u[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var a=i(this);function o(u,m){if(m)t:{var y=a;u=u.split(".");for(var x=0;x<u.length-1;x++){var L=u[x];if(!(L in y))break t;y=y[L]}u=u[u.length-1],x=y[u],m=m(x),m!=x&&m!=null&&e(y,u,{configurable:!0,writable:!0,value:m})}}function h(u,m){u instanceof String&&(u+="");var y=0,x=!1,L={next:function(){if(!x&&y<u.length){var Q=y++;return{value:m(Q,u[Q]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(u){return u||function(){return h(this,function(m,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function _(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function p(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function T(u,m,y){return u.call.apply(u.bind,arguments)}function A(u,m,y){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),u.apply(m,L)}}return function(){return u.apply(m,arguments)}}function w(u,m,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:A,w.apply(null,arguments)}function k(u,m){var y=Array.prototype.slice.call(arguments,1);return function(){var x=y.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function B(u,m){function y(){}y.prototype=m.prototype,u.aa=m.prototype,u.prototype=new y,u.prototype.constructor=u,u.Qb=function(x,L,Q){for(var rt=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)rt[Ot-2]=arguments[Ot];return m.prototype[L].apply(x,rt)}}function G(u){const m=u.length;if(0<m){const y=Array(m);for(let x=0;x<m;x++)y[x]=u[x];return y}return[]}function Y(u,m){for(let y=1;y<arguments.length;y++){const x=arguments[y];if(_(x)){const L=u.length||0,Q=x.length||0;u.length=L+Q;for(let rt=0;rt<Q;rt++)u[L+rt]=x[rt]}else u.push(x)}}class ft{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function at(u){return/^[\s\xa0]*$/.test(u)}function lt(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function X(u){return X[" "](u),u}X[" "]=function(){};var Z=lt().indexOf("Gecko")!=-1&&!(lt().toLowerCase().indexOf("webkit")!=-1&&lt().indexOf("Edge")==-1)&&!(lt().indexOf("Trident")!=-1||lt().indexOf("MSIE")!=-1)&&lt().indexOf("Edge")==-1;function dt(u,m,y){for(const x in u)m.call(y,u[x],x,u)}function N(u,m){for(const y in u)m.call(void 0,u[y],y,u)}function S(u){const m={};for(const y in u)m[y]=u[y];return m}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let y,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(y in x)u[y]=x[y];for(let Q=0;Q<D.length;Q++)y=D[Q],Object.prototype.hasOwnProperty.call(x,y)&&(u[y]=x[y])}}function C(u){var m=1;u=u.split(":");const y=[];for(;0<m&&u.length;)y.push(u.shift()),m--;return u.length&&y.push(u.join(":")),y}function V(u){g.setTimeout(()=>{throw u},0)}function R(){var u=Dt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Bt{constructor(){this.h=this.g=null}add(m,y){const x=qt.get();x.set(m,y),this.h?this.h.next=x:this.g=x,this.h=x}}var qt=new ft(()=>new F,u=>u.reset());class F{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let it,ht=!1,Dt=new Bt,M=()=>{const u=g.Promise.resolve(void 0);it=()=>{u.then(J)}};var J=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(y){V(y)}var m=qt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ht=!1};function st(){this.s=this.s,this.C=this.C}st.prototype.s=!1,st.prototype.ma=function(){this.s||(this.s=!0,this.N())},st.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var gt=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const y=()=>{};g.addEventListener("test",y,m),g.removeEventListener("test",y,m)}catch{}return u}();function St(u,m){if(nt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var y=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Z){t:{try{X(m.nodeName);var L=!0;break t}catch{}L=!1}L||(m=null)}}else y=="mouseover"?m=u.fromElement:y=="mouseout"&&(m=u.toElement);this.relatedTarget=m,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:bt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&St.aa.h.call(this)}}B(St,nt);var bt={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),Kt=0;function gn(u,m,y,x,L){this.listener=u,this.proxy=null,this.src=m,this.type=y,this.capture=!!x,this.ha=L,this.key=++Kt,this.da=this.fa=!1}function Pn(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Dn(u){this.src=u,this.g={},this.h=0}Dn.prototype.add=function(u,m,y,x,L){var Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);var rt=Sr(u,m,x,L);return-1<rt?(m=u[rt],y||(m.fa=!1)):(m=new gn(m,this.src,Q,!!x,L),m.fa=y,u.push(m)),m};function Ar(u,m){var y=m.type;if(y in u.g){var x=u.g[y],L=Array.prototype.indexOf.call(x,m,void 0),Q;(Q=0<=L)&&Array.prototype.splice.call(x,L,1),Q&&(Pn(m),u.g[y].length==0&&(delete u.g[y],u.h--))}}function Sr(u,m,y,x){for(var L=0;L<u.length;++L){var Q=u[L];if(!Q.da&&Q.listener==m&&Q.capture==!!y&&Q.ha==x)return L}return-1}var wr="closure_lm_"+(1e6*Math.random()|0),Na={};function co(u,m,y,x,L){if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)co(u,m[Q],y,x,L);return null}return y=ho(y),u&&u[de]?u.K(m,y,p(x)?!!x.capture:!1,L):pn(u,m,y,!1,x,L)}function pn(u,m,y,x,L,Q){if(!m)throw Error("Invalid event type");var rt=p(L)?!!L.capture:!!L,Ot=ps(u);if(Ot||(u[wr]=Ot=new Dn(u)),y=Ot.add(m,y,x,rt,Q),y.proxy)return y;if(x=wc(),y.proxy=x,x.src=u,x.listener=y,u.addEventListener)gt||(L=rt),L===void 0&&(L=!1),u.addEventListener(m.toString(),x,L);else if(u.attachEvent)u.attachEvent(Rr(m.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return y}function wc(){function u(y){return m.call(u.src,u.listener,y)}const m=Rc;return u}function Da(u,m,y,x,L){if(Array.isArray(m))for(var Q=0;Q<m.length;Q++)Da(u,m[Q],y,x,L);else x=p(x)?!!x.capture:!!x,y=ho(y),u&&u[de]?(u=u.i,m=String(m).toString(),m in u.g&&(Q=u.g[m],y=Sr(Q,y,x,L),-1<y&&(Pn(Q[y]),Array.prototype.splice.call(Q,y,1),Q.length==0&&(delete u.g[m],u.h--)))):u&&(u=ps(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Sr(m,y,x,L)),(y=-1<u?m[u]:null)&&gs(y))}function gs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[de])Ar(m.i,u);else{var y=u.type,x=u.proxy;m.removeEventListener?m.removeEventListener(y,x,u.capture):m.detachEvent?m.detachEvent(Rr(y),x):m.addListener&&m.removeListener&&m.removeListener(x),(y=ps(m))?(Ar(y,u),y.h==0&&(y.src=null,m[wr]=null)):Pn(u)}}}function Rr(u){return u in Na?Na[u]:Na[u]="on"+u}function Rc(u,m){if(u.da)u=!0;else{m=new St(m,this);var y=u.listener,x=u.ha||u.src;u.fa&&gs(u),u=y.call(x,m)}return u}function ps(u){return u=u[wr],u instanceof Dn?u:null}var Ia="__closure_events_fn_"+(1e9*Math.random()>>>0);function ho(u){return typeof u=="function"?u:(u[Ia]||(u[Ia]=function(m){return u.handleEvent(m)}),u[Ia])}function ae(){st.call(this),this.i=new Dn(this),this.M=this,this.F=null}B(ae,st),ae.prototype[de]=!0,ae.prototype.removeEventListener=function(u,m,y,x){Da(this,u,m,y,x)};function Qt(u,m){var y,x=u.F;if(x)for(y=[];x;x=x.F)y.push(x);if(u=u.M,x=m.type||m,typeof m=="string")m=new nt(m,u);else if(m instanceof nt)m.target=m.target||u;else{var L=m;m=new nt(x,u),O(m,L)}if(L=!0,y)for(var Q=y.length-1;0<=Q;Q--){var rt=m.g=y[Q];L=sn(rt,x,!0,m)&&L}if(rt=m.g=u,L=sn(rt,x,!0,m)&&L,L=sn(rt,x,!1,m)&&L,y)for(Q=0;Q<y.length;Q++)rt=m.g=y[Q],L=sn(rt,x,!1,m)&&L}ae.prototype.N=function(){if(ae.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var y=u.g[m],x=0;x<y.length;x++)Pn(y[x]);delete u.g[m],u.h--}}this.F=null},ae.prototype.K=function(u,m,y,x){return this.i.add(String(u),m,!1,y,x)},ae.prototype.L=function(u,m,y,x){return this.i.add(String(u),m,!0,y,x)};function sn(u,m,y,x){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,Q=0;Q<m.length;++Q){var rt=m[Q];if(rt&&!rt.da&&rt.capture==y){var Ot=rt.listener,Ee=rt.ha||rt.src;rt.fa&&Ar(u.i,rt),L=Ot.call(Ee,x)!==!1&&L}}return L&&!x.defaultPrevented}function Be(u,m,y){if(typeof u=="function")y&&(u=w(u,y));else if(u&&typeof u.handleEvent=="function")u=w(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function fo(u){u.g=Be(()=>{u.g=null,u.i&&(u.i=!1,fo(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Cc extends st{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:fo(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cr(u){st.call(this),this.h=u,this.g={}}B(Cr,st);var Nr=[];function Dr(u){dt(u.g,function(m,y){this.g.hasOwnProperty(y)&&gs(m)},u),u.g={}}Cr.prototype.N=function(){Cr.aa.N.call(this),Dr(this)},Cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=g.JSON.stringify,ys=g.JSON.parse,Ir=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function Va(){}Va.prototype.h=null;function Ma(u){return u.h||(u.h=u.i())}function Oa(){}var ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function li(){nt.call(this,"d")}B(li,nt);function ja(){nt.call(this,"c")}B(ja,nt);var zn={},ka=null;function ki(){return ka=ka||new ae}zn.La="serverreachability";function vs(u){nt.call(this,zn.La,u)}B(vs,nt);function Ui(u){const m=ki();Qt(m,new vs(m))}zn.STAT_EVENT="statevent";function mo(u,m){nt.call(this,zn.STAT_EVENT,u),this.stat=m}B(mo,nt);function ne(u){const m=ki();Qt(m,new mo(m,u))}zn.Ma="timingevent";function be(u,m){nt.call(this,zn.Ma,u),this.size=m}B(be,nt);function me(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function yn(){this.g=!0}yn.prototype.xa=function(){this.g=!1};function Ua(u,m,y,x,L,Q){u.info(function(){if(u.g)if(Q)for(var rt="",Ot=Q.split("&"),Ee=0;Ee<Ot.length;Ee++){var jt=Ot[Ee].split("=");if(1<jt.length){var Ce=jt[0];jt=jt[1];var Te=Ce.split("_");rt=2<=Te.length&&Te[1]=="type"?rt+(Ce+"="+jt+"&"):rt+(Ce+"=redacted&")}}else rt=null;else rt=Q;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+m+`
`+y+`
`+rt})}function Nc(u,m,y,x,L,Q,rt){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+m+`
`+y+`
`+Q+" "+rt})}function Li(u,m,y,x){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Vr(u,y)+(x?" "+x:"")})}function go(u,m){u.info(function(){return"TIMEOUT: "+m})}yn.prototype.info=function(){};function Vr(u,m){if(!u.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(u=0;u<y.length;u++)if(Array.isArray(y[u])){var x=y[u];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var Q=L[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var rt=1;rt<L.length;rt++)L[rt]=""}}}}return In(y)}catch{return m}}var Pi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Bn;function qn(){}B(qn,Va),qn.prototype.g=function(){return new XMLHttpRequest},qn.prototype.i=function(){return{}},Bn=new qn;function Ye(u,m,y,x){this.j=u,this.i=m,this.l=y,this.R=x||1,this.U=new Cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ue}function ue(){this.i=null,this.g="",this.h=!1}var La={},_s={};function Vn(u,m,y){u.L=1,u.v=Ur(an(m)),u.m=y,u.P=!0,ui(u,null)}function ui(u,m){u.F=Date.now(),Mr(u),u.A=an(u.v);var y=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),Ga(y.i,"t",x),u.C=0,y=u.j.J,u.h=new ue,u.g=Io(u.j,y?m:null,!u.m),0<u.O&&(u.M=new Cc(w(u.Y,u,u.g),u.O)),m=u.U,y=u.g,x=u.ca;var L="readystatechange";Array.isArray(L)||(L&&(Nr[0]=L.toString()),L=Nr);for(var Q=0;Q<L.length;Q++){var rt=co(y,L[Q],x||m.handleEvent,!1,m.h||m);if(!rt)break;m.g[rt.key]=rt}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Ui(),Ua(u.i,u.u,u.A,u.l,u.R,u.m)}Ye.prototype.ca=function(u){u=u.target;const m=this.M;m&&En(u)==3?m.j():this.Y(u)},Ye.prototype.Y=function(u){try{if(u==this.g)t:{const Te=En(this.g);var m=this.g.Ba();const yi=this.g.Z();if(!(3>Te)&&(Te!=3||this.g&&(this.h.h||this.g.oa()||xo(this.g)))){this.J||Te!=4||m==7||(m==8||0>=yi?Ui(3):Ui(2)),zi(this);var y=this.g.Z();this.X=y;e:if(po(this)){var x=xo(this.g);u="";var L=x.length,Q=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Me(this),Hn(this);var rt="";break e}this.h.i=new g.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,u+=this.h.i.decode(x[m],{stream:!(Q&&m==L-1)});x.length=0,this.h.g+=u,this.C=0,rt=this.h.g}else rt=this.g.oa();if(this.o=y==200,Nc(this.i,this.u,this.A,this.l,this.R,Te,y),this.o){if(this.T&&!this.K){e:{if(this.g){var Ot,Ee=this.g;if((Ot=Ee.g?Ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!at(Ot)){var jt=Ot;break e}}jt=null}if(y=jt)Li(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Or(this,y);else{this.o=!1,this.s=3,ne(12),Me(this),Hn(this);break t}}if(this.P){y=!0;let Oe;for(;!this.J&&this.C<rt.length;)if(Oe=yo(this,rt),Oe==_s){Te==4&&(this.s=4,ne(14),y=!1),Li(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==La){this.s=4,ne(15),Li(this.i,this.l,rt,"[Invalid Chunk]"),y=!1;break}else Li(this.i,this.l,Oe,null),Or(this,Oe);if(po(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Te!=4||rt.length!=0||this.h.h||(this.s=1,ne(16),y=!1),this.o=this.o&&y,!y)Li(this.i,this.l,rt,"[Invalid Chunked Response]"),Me(this),Hn(this);else if(0<rt.length&&!this.W){this.W=!0;var Ce=this.j;Ce.g==this&&Ce.ba&&!Ce.M&&(Ce.j.info("Great, no buffering proxy detected. Bytes received: "+rt.length),Qr(Ce),Ce.M=!0,ne(11))}}else Li(this.i,this.l,rt,null),Or(this,rt);Te==4&&Me(this),this.o&&!this.J&&(Te==4?Co(this.j,this):(this.o=!1,Mr(this)))}else Oc(this.g),y==400&&0<rt.indexOf("Unknown SID")?(this.s=3,ne(12)):(this.s=0,ne(13)),Me(this),Hn(this)}}}catch{}finally{}};function po(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function yo(u,m){var y=u.C,x=m.indexOf(`
`,y);return x==-1?_s:(y=Number(m.substring(y,x)),isNaN(y)?La:(x+=1,x+y>m.length?_s:(m=m.slice(x,x+y),u.C=x+y,m)))}Ye.prototype.cancel=function(){this.J=!0,Me(this)};function Mr(u){u.S=Date.now()+u.I,vo(u,u.I)}function vo(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=me(w(u.ba,u),m)}function zi(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Ye.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(go(this.i,this.A),this.L!=2&&(Ui(),ne(17)),Me(this),this.s=2,Hn(this)):vo(this,this.S-u)};function Hn(u){u.j.G==0||u.J||Co(u.j,u)}function Me(u){zi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Dr(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Or(u,m){try{var y=u.j;if(y.G!=0&&(y.g==u||Pa(y.h,u))){if(!u.K&&Pa(y.h,u)&&y.G==3){try{var x=y.Da.g.parse(m)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){t:if(!y.u){if(y.g)if(y.g.F+3e3<u.F)Is(y),Ns(y);else break t;Xa(y),ne(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=me(w(y.Za,y),6e3));if(1>=Es(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else pi(y,11)}else if((u.K||y.g==u)&&Is(y),!at(m))for(L=y.Da.g.parse(m),m=0;m<L.length;m++){let jt=L[m];if(y.T=jt[0],jt=jt[1],y.G==2)if(jt[0]=="c"){y.K=jt[1],y.ia=jt[2];const Ce=jt[3];Ce!=null&&(y.la=Ce,y.j.info("VER="+y.la));const Te=jt[4];Te!=null&&(y.Aa=Te,y.j.info("SVER="+y.Aa));const yi=jt[5];yi!=null&&typeof yi=="number"&&0<yi&&(x=1.5*yi,y.L=x,y.j.info("backChannelRequestTimeoutMs_="+x)),x=y;const Oe=u.g;if(Oe){const $n=Oe.g?Oe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($n){var Q=x.h;Q.g||$n.indexOf("spdy")==-1&&$n.indexOf("quic")==-1&&$n.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ts(Q,Q.h),Q.h=null))}if(x.D){const Za=Oe.g?Oe.g.getResponseHeader("X-HTTP-Session-Id"):null;Za&&(x.ya=Za,Xt(x.I,x.D,Za))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-u.F,y.j.info("Handshake RTT: "+y.R+"ms")),x=y;var rt=u;if(x.qa=Do(x,x.J?x.ia:null,x.W),rt.K){Ke(x.h,rt);var Ot=rt,Ee=x.L;Ee&&(Ot.I=Ee),Ot.B&&(zi(Ot),Mr(Ot)),x.g=rt}else wo(x);0<y.i.length&&Ds(y)}else jt[0]!="stop"&&jt[0]!="close"||pi(y,7);else y.G==3&&(jt[0]=="stop"||jt[0]=="close"?jt[0]=="stop"?pi(y,7):Ya(y):jt[0]!="noop"&&y.l&&y.l.ta(jt),y.v=0)}}Ui(4)}catch{}}var _o=class{constructor(u,m){this.g=u,this.map=m}};function ci(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bs(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Es(u){return u.h?1:u.g?u.g.size:0}function Pa(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Ts(u,m){u.g?u.g.add(m):u.h=m}function Ke(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}ci.prototype.cancel=function(){if(this.i=za(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function za(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const y of u.g.values())m=m.concat(y.D);return m}return G(u.i)}function Dc(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(_(u)){for(var m=[],y=u.length,x=0;x<y;x++)m.push(u[x]);return m}m=[],y=0;for(x in u)m[y++]=u[x];return m}function xs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(_(u)||typeof u=="string"){var m=[];u=u.length;for(var y=0;y<u;y++)m.push(y);return m}m=[],y=0;for(const x in u)m[y++]=x;return m}}}function Ba(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(_(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var y=xs(u),x=Dc(u),L=x.length,Q=0;Q<L;Q++)m.call(void 0,x[Q],y&&y[Q],u)}var jr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ic(u,m){if(u){u=u.split("&");for(var y=0;y<u.length;y++){var x=u[y].indexOf("="),L=null;if(0<=x){var Q=u[y].substring(0,x);L=u[y].substring(x+1)}else Q=u[y];m(Q,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ge(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ge){this.h=u.h,kr(this,u.j),this.o=u.o,this.g=u.g,Bi(this,u.s),this.l=u.l;var m=u.i,y=new fi;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),hi(this,y),this.m=u.m}else u&&(m=String(u).match(jr))?(this.h=!1,kr(this,m[1]||"",!0),this.o=vn(m[2]||""),this.g=vn(m[3]||"",!0),Bi(this,m[4]),this.l=vn(m[5]||"",!0),hi(this,m[6]||"",!0),this.m=vn(m[7]||"")):(this.h=!1,this.i=new fi(null,this.h))}ge.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Lr(m,qa,!0),":");var y=this.g;return(y||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Lr(m,qa,!0),"@"),u.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&u.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&u.push("/"),u.push(Lr(y,y.charAt(0)=="/"?Vc:Ha,!0))),(y=this.i.toString())&&u.push("?",y),(y=this.m)&&u.push("#",Lr(y,As)),u.join("")};function an(u){return new ge(u)}function kr(u,m,y){u.j=y?vn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Bi(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function hi(u,m,y){m instanceof fi?(u.i=m,Eo(u.i,u.h)):(y||(m=Lr(m,Mc)),u.i=new fi(m,u.h))}function Xt(u,m,y){u.i.set(m,y)}function Ur(u){return Xt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function vn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Lr(u,m,y){return typeof u=="string"?(u=encodeURI(u).replace(m,bo),y&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function bo(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qa=/[#\/\?@]/g,Ha=/[#\?:]/g,Vc=/[#\?]/g,Mc=/[#\?@]/g,As=/#/g;function fi(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function _n(u){u.g||(u.g=new Map,u.h=0,u.i&&Ic(u.i,function(m,y){u.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}s=fi.prototype,s.add=function(u,m){_n(this),this.i=null,u=Gn(this,u);var y=this.g.get(u);return y||this.g.set(u,y=[]),y.push(m),this.h+=1,this};function di(u,m){_n(u),m=Gn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function mi(u,m){return _n(u),m=Gn(u,m),u.g.has(m)}s.forEach=function(u,m){_n(this),this.g.forEach(function(y,x){y.forEach(function(L){u.call(m,L,x,this)},this)},this)},s.na=function(){_n(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let x=0;x<m.length;x++){const L=u[x];for(let Q=0;Q<L.length;Q++)y.push(m[x])}return y},s.V=function(u){_n(this);let m=[];if(typeof u=="string")mi(this,u)&&(m=m.concat(this.g.get(Gn(this,u))));else{u=Array.from(this.g.values());for(let y=0;y<u.length;y++)m=m.concat(u[y])}return m},s.set=function(u,m){return _n(this),this.i=null,u=Gn(this,u),mi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},s.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Ga(u,m,y){di(u,m),0<y.length&&(u.i=null,u.g.set(Gn(u,m),G(y)),u.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var x=m[y];const Q=encodeURIComponent(String(x)),rt=this.V(x);for(x=0;x<rt.length;x++){var L=Q;rt[x]!==""&&(L+="="+encodeURIComponent(String(rt[x]))),u.push(L)}}return this.i=u.join("&")};function Gn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Eo(u,m){m&&!u.j&&(_n(u),u.i=null,u.g.forEach(function(y,x){var L=x.toLowerCase();x!=L&&(di(this,x),Ga(this,L,y))},u)),u.j=m}function Pr(u,m){const y=new yn;if(g.Image){const x=new Image;x.onload=k(bn,y,"TestLoadImage: loaded",!0,m,x),x.onerror=k(bn,y,"TestLoadImage: error",!1,m,x),x.onabort=k(bn,y,"TestLoadImage: abort",!1,m,x),x.ontimeout=k(bn,y,"TestLoadImage: timeout",!1,m,x),g.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else m(!1)}function Mn(u,m){const y=new yn,x=new AbortController,L=setTimeout(()=>{x.abort(),bn(y,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:x.signal}).then(Q=>{clearTimeout(L),Q.ok?bn(y,"TestPingServer: ok",!0,m):bn(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),bn(y,"TestPingServer: error",!1,m)})}function bn(u,m,y,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(y)}catch{}}function zr(){this.g=new Ir}function Qn(u,m,y){const x=y||"";try{Ba(u,function(L,Q){let rt=L;p(L)&&(rt=In(L)),m.push(x+Q+"="+encodeURIComponent(rt))})}catch(L){throw m.push(x+"type="+encodeURIComponent("_badmap")),L}}function qi(u){this.l=u.Ub||null,this.j=u.eb||!1}B(qi,Va),qi.prototype.g=function(){return new gi(this.l,this.j)},qi.prototype.i=function(u){return function(){return u}}({});function gi(u,m){ae.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(gi,ae),s=gi.prototype,s.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Yn(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Yn(this)),this.g&&(this.readyState=3,Yn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qa(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qa(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Fn(this):Yn(this),this.readyState==3&&Qa(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Fn(this))},s.Qa=function(u){this.g&&(this.response=u,Fn(this))},s.ga=function(){this.g&&Fn(this)};function Fn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Yn(u)}s.setRequestHeader=function(u,m){this.u.append(u,m)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,u.push(y[0]+": "+y[1]),y=m.next();return u.join(`\r
`)};function Yn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Fa(u){let m="";return dt(u,function(y,x){m+=x,m+=":",m+=y,m+=`\r
`}),m}function Re(u,m,y){t:{for(x in y){var x=!1;break t}x=!0}x||(y=Fa(y),typeof u=="string"?y!=null&&encodeURIComponent(String(y)):Xt(u,m,y))}function Ht(u){ae.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(Ht,ae);var Ss=/^https?$/i,Br=["POST","PUT"];s=Ht.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,m,y,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Bn.g(),this.v=this.o?Ma(this.o):Ma(Bn),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(Q){To(this,Q);return}if(u=y||"",y=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)y.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const Q of x.keys())y.set(Q,x.get(Q));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(y.keys()).find(Q=>Q.toLowerCase()=="content-type"),L=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Br,m,void 0))||x||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,rt]of y)this.g.setRequestHeader(Q,rt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qr(this),this.u=!0,this.g.send(u),this.u=!1}catch(Q){To(this,Q)}};function To(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ws(u),Kn(u)}function ws(u){u.A||(u.A=!0,Qt(u,"complete"),Qt(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Qt(this,"complete"),Qt(this,"abort"),Kn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kn(this,!0)),Ht.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Rs(this):this.bb())},s.bb=function(){Rs(this)};function Rs(u){if(u.h&&typeof d<"u"&&(!u.v[1]||En(u)!=4||u.Z()!=2)){if(u.u&&En(u)==4)Be(u.Ea,0,u);else if(Qt(u,"readystatechange"),En(u)==4){u.h=!1;try{const rt=u.Z();t:switch(rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var y;if(!(y=m)){var x;if(x=rt===0){var L=String(u.D).match(jr)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),x=!Ss.test(L?L.toLowerCase():"")}y=x}if(y)Qt(u,"complete"),Qt(u,"success");else{u.m=6;try{var Q=2<En(u)?u.g.statusText:""}catch{Q=""}u.l=Q+" ["+u.Z()+"]",ws(u)}}finally{Kn(u)}}}}function Kn(u,m){if(u.g){qr(u);const y=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Qt(u,"ready");try{y.onreadystatechange=x}catch{}}}function qr(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function En(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),ys(m)}};function xo(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Oc(u){const m={};u=(u.g&&2<=En(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(at(u[x]))continue;var y=C(u[x]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const Q=m[L]||[];m[L]=Q,Q.push(y)}N(m,function(x){return x.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hr(u,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[u]||m}function Cs(u){this.Aa=0,this.i=[],this.j=new yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Hr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Hr("baseRetryDelayMs",5e3,u),this.cb=Hr("retryDelaySeedMs",1e4,u),this.Wa=Hr("forwardChannelMaxRetries",2,u),this.wa=Hr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ci(u&&u.concurrentRequestLimit),this.Da=new zr,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Cs.prototype,s.la=8,s.G=1,s.connect=function(u,m,y,x){ne(0),this.W=u,this.H=m||{},y&&x!==void 0&&(this.H.OSID=y,this.H.OAID=x),this.F=this.X,this.I=Do(this,null,this.W),Ds(this)};function Ya(u){if(Ao(u),u.G==3){var m=u.U++,y=an(u.I);if(Xt(y,"SID",u.K),Xt(y,"RID",m),Xt(y,"TYPE","terminate"),Gr(u,y),m=new Ye(u,u.j,m),m.L=2,m.v=Ur(an(y)),y=!1,g.navigator&&g.navigator.sendBeacon)try{y=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&g.Image&&(new Image().src=m.v,y=!0),y||(m.g=Io(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Mr(m)}No(u)}function Ns(u){u.g&&(Qr(u),u.g.cancel(),u.g=null)}function Ao(u){Ns(u),u.u&&(g.clearTimeout(u.u),u.u=null),Is(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function Ds(u){if(!bs(u.h)&&!u.s){u.s=!0;var m=u.Ga;it||M(),ht||(it(),ht=!0),Dt.add(m,u),u.B=0}}function jc(u,m){return Es(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=me(w(u.Ga,u,m),$a(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const L=new Ye(this,this.j,u);let Q=this.o;if(this.S&&(Q?(Q=S(Q),O(Q,this.S)):Q=this.S),this.m!==null||this.O||(L.H=Q,Q=null),this.P)t:{for(var m=0,y=0;y<this.i.length;y++){e:{var x=this.i[y];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break e}x=void 0}if(x===void 0)break;if(m+=x,4096<m){m=y;break t}if(m===4096||y===this.i.length-1){m=y+1;break t}}m=1e3}else m=1e3;m=So(this,L,m),y=an(this.I),Xt(y,"RID",u),Xt(y,"CVER",22),this.D&&Xt(y,"X-HTTP-Session-Id",this.D),Gr(this,y),Q&&(this.O?m="headers="+encodeURIComponent(String(Fa(Q)))+"&"+m:this.m&&Re(y,this.m,Q)),Ts(this.h,L),this.Ua&&Xt(y,"TYPE","init"),this.P?(Xt(y,"$req",m),Xt(y,"SID","null"),L.T=!0,Vn(L,y,null)):Vn(L,y,m),this.G=2}}else this.G==3&&(u?Ka(this,u):this.i.length==0||bs(this.h)||Ka(this))};function Ka(u,m){var y;m?y=m.l:y=u.U++;const x=an(u.I);Xt(x,"SID",u.K),Xt(x,"RID",y),Xt(x,"AID",u.T),Gr(u,x),u.m&&u.o&&Re(x,u.m,u.o),y=new Ye(u,u.j,y,u.B+1),u.m===null&&(y.H=u.o),m&&(u.i=m.D.concat(u.i)),m=So(u,y,1e3),y.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ts(u.h,y),Vn(y,x,m)}function Gr(u,m){u.H&&dt(u.H,function(y,x){Xt(m,x,y)}),u.l&&Ba({},function(y,x){Xt(m,x,y)})}function So(u,m,y){y=Math.min(u.i.length,y);var x=u.l?w(u.l.Na,u.l,u):null;t:{var L=u.i;let Q=-1;for(;;){const rt=["count="+y];Q==-1?0<y?(Q=L[0].g,rt.push("ofs="+Q)):Q=0:rt.push("ofs="+Q);let Ot=!0;for(let Ee=0;Ee<y;Ee++){let jt=L[Ee].g;const Ce=L[Ee].map;if(jt-=Q,0>jt)Q=Math.max(0,L[Ee].g-100),Ot=!1;else try{Qn(Ce,rt,"req"+jt+"_")}catch{x&&x(Ce)}}if(Ot){x=rt.join("&");break t}}}return u=u.i.splice(0,y),m.D=u,x}function wo(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;it||M(),ht||(it(),ht=!0),Dt.add(m,u),u.v=0}}function Xa(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=me(w(u.Fa,u),$a(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Ro(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=me(w(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ne(10),Ns(this),Ro(this))};function Qr(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Ro(u){u.g=new Ye(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=an(u.qa);Xt(m,"RID","rpc"),Xt(m,"SID",u.K),Xt(m,"AID",u.T),Xt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xt(m,"TO",u.ja),Xt(m,"TYPE","xmlhttp"),Gr(u,m),u.m&&u.o&&Re(m,u.m,u.o),u.L&&(u.g.I=u.L);var y=u.g;u=u.ia,y.L=1,y.v=Ur(an(m)),y.m=null,y.P=!0,ui(y,u)}s.Za=function(){this.C!=null&&(this.C=null,Ns(this),Xa(this),ne(19))};function Is(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function Co(u,m){var y=null;if(u.g==m){Is(u),Qr(u),u.g=null;var x=2}else if(Pa(u.h,m))y=m.D,Ke(u.h,m),x=1;else return;if(u.G!=0){if(m.o)if(x==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var L=u.B;x=ki(),Qt(x,new be(x,y)),Ds(u)}else wo(u);else if(L=m.s,L==3||L==0&&0<m.X||!(x==1&&jc(u,m)||x==2&&Xa(u)))switch(y&&0<y.length&&(m=u.h,m.i=m.i.concat(y)),L){case 1:pi(u,5);break;case 4:pi(u,10);break;case 3:pi(u,6);break;default:pi(u,2)}}}function $a(u,m){let y=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(y*=2),y*m}function pi(u,m){if(u.j.info("Error code "+m),m==2){var y=w(u.fb,u),x=u.Xa;const L=!x;x=new ge(x||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||kr(x,"https"),Ur(x),L?Pr(x.toString(),y):Mn(x.toString(),y)}else ne(2);u.G=0,u.l&&u.l.sa(m),No(u),Ao(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ne(2)):(this.j.info("Failed to ping google.com"),ne(1))};function No(u){if(u.G=0,u.ka=[],u.l){const m=za(u.h);(m.length!=0||u.i.length!=0)&&(Y(u.ka,m),Y(u.ka,u.i),u.h.i.length=0,G(u.i),u.i.length=0),u.l.ra()}}function Do(u,m,y){var x=y instanceof ge?an(y):new ge(y);if(x.g!="")m&&(x.g=m+"."+x.g),Bi(x,x.s);else{var L=g.location;x=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var Q=new ge(null);x&&kr(Q,x),m&&(Q.g=m),L&&Bi(Q,L),y&&(Q.l=y),x=Q}return y=u.D,m=u.ya,y&&m&&Xt(x,y,m),Xt(x,"VER",u.la),Gr(u,x),x}function Io(u,m,y){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ht(new qi({eb:y})):new Ht(u.pa),m.Ha(u.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Vo(){}s=Vo.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Vs(){}Vs.prototype.g=function(u,m){return new Xe(u,m)};function Xe(u,m){ae.call(this),this.g=new Cs(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!at(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!at(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Xn(this)}B(Xe,ae),Xe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Xe.prototype.close=function(){Ya(this.g)},Xe.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var y={};y.__data__=u,u=y}else this.u&&(y={},y.__data__=In(u),u=y);m.i.push(new _o(m.Ya++,u)),m.G==3&&Ds(m)},Xe.prototype.N=function(){this.g.l=null,delete this.j,Ya(this.g),delete this.g,Xe.aa.N.call(this)};function Mo(u){li.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const y in m){u=y;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}B(Mo,li);function Oo(){ja.call(this),this.status=1}B(Oo,ja);function Xn(u){this.g=u}B(Xn,Vo),Xn.prototype.ua=function(){Qt(this.g,"a")},Xn.prototype.ta=function(u){Qt(this.g,new Mo(u))},Xn.prototype.sa=function(u){Qt(this.g,new Oo)},Xn.prototype.ra=function(){Qt(this.g,"b")},Vs.prototype.createWebChannel=Vs.prototype.g,Xe.prototype.send=Xe.prototype.o,Xe.prototype.open=Xe.prototype.m,Xe.prototype.close=Xe.prototype.close,Y0=function(){return new Vs},F0=function(){return ki()},Q0=zn,Yf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pi.NO_ERROR=0,Pi.TIMEOUT=8,Pi.HTTP_ERROR=6,zu=Pi,oi.COMPLETE="complete",G0=oi,Oa.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",ae.prototype.listen=ae.prototype.K,Pl=Oa,Ht.prototype.listenOnce=Ht.prototype.L,Ht.prototype.getLastError=Ht.prototype.Ka,Ht.prototype.getLastErrorCode=Ht.prototype.Ba,Ht.prototype.getStatus=Ht.prototype.Z,Ht.prototype.getResponseJson=Ht.prototype.Oa,Ht.prototype.getResponseText=Ht.prototype.oa,Ht.prototype.send=Ht.prototype.ea,Ht.prototype.setWithCredentials=Ht.prototype.Ha,H0=Ht}).apply(typeof ju<"u"?ju:typeof self<"u"?self:typeof window<"u"?window:{});const Vy="@firebase/firestore",My="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qe.UNAUTHENTICATED=new Qe(null),Qe.GOOGLE_CREDENTIALS=new Qe("google-credentials-uid"),Qe.FIRST_PARTY=new Qe("first-party-uid"),Qe.MOCK_USER=new Qe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new k0("@firebase/firestore");function la(){return us.logLevel}function ot(s,...e){if(us.logLevel<=Lt.DEBUG){const i=e.map(pd);us.debug(`Firestore (${Aa}): ${s}`,...i)}}function Oi(s,...e){if(us.logLevel<=Lt.ERROR){const i=e.map(pd);us.error(`Firestore (${Aa}): ${s}`,...i)}}function ga(s,...e){if(us.logLevel<=Lt.WARN){const i=e.map(pd);us.warn(`Firestore (${Aa}): ${s}`,...i)}}function pd(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(s,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,K0(s,a,i)}function K0(s,e,i){let a=`FIRESTORE (${Aa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw Oi(a),new Error(a)}function Gt(s,e,i,a){let o="Unexpected state";typeof i=="string"?o=i:a=i,s||K0(e,o,a)}function At(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ut extends xa{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(){this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable(()=>i(Qe.UNAUTHENTICATED))}shutdown(){}}class XT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class $T{constructor(e){this.t=e,this.currentUser=Qe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){Gt(this.o===void 0,42304);let a=this.i;const o=_=>this.i!==a?(a=this.i,i(_)):Promise.resolve();let h=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Ii,e.enqueueRetryable(()=>o(this.currentUser))};const d=()=>{const _=h;e.enqueueRetryable(async()=>{await _.promise,await o(this.currentUser)})},g=_=>{ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(_=>g(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?g(_):(ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Ii)}},0),d()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(a=>this.i!==e?(ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Gt(typeof a.accessToken=="string",31837,{l:a}),new X0(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Gt(e===null||typeof e=="string",2055,{h:e}),new Qe(e)}}class ZT{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=Qe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class JT{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new ZT(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable(()=>i(Qe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Oy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WT{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,MT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){Gt(this.o===void 0,3512);const a=h=>{h.error!=null&&ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,ot("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>a(h))};const o=h=>{ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(h=>o(h)),setTimeout(()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?o(h):ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Oy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(i=>i?(Gt(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new Oy(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<s;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=t1(40);for(let h=0;h<o.length;++h)a.length<20&&o[h]<i&&(a+=e.charAt(o[h]%62))}return a}}function Ct(s,e){return s<e?-1:s>e?1:0}function Kf(s,e){let i=0;for(;i<s.length&&i<e.length;){const a=s.codePointAt(i),o=e.codePointAt(i);if(a!==o){if(a<128&&o<128)return Ct(a,o);{const h=$0(),d=e1(h.encode(jy(s,i)),h.encode(jy(e,i)));return d!==0?d:Ct(a,o)}}i+=a>65535?2:1}return Ct(s.length,e.length)}function jy(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function e1(s,e){for(let i=0;i<s.length&&i<e.length;++i)if(s[i]!==e[i])return Ct(s[i],e[i]);return Ct(s.length,e.length)}function pa(s,e,i){return s.length===e.length&&s.every((a,o)=>i(a,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=-62135596800,Uy=1e6;class Se{static now(){return Se.fromMillis(Date.now())}static fromDate(e){return Se.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*Uy);return new Se(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new ut(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new ut(et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<ky)throw new ut(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ut(et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uy}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ky;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Se(0,0))}static max(){return new xt(new Se(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="__name__";class ni{constructor(e,i,a){i===void 0?i=0:i>e.length&&_t(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&_t(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return ni.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach(a=>{i.push(a)}):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let o=0;o<a;o++){const h=ni.compareSegments(e.get(o),i.get(o));if(h!==0)return h}return Ct(e.length,i.length)}static compareSegments(e,i){const a=ni.isNumericId(e),o=ni.isNumericId(i);return a&&!o?-1:!a&&o?1:a&&o?ni.extractNumericId(e).compare(ni.extractNumericId(i)):Kf(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return dr.fromString(e.substring(4,e.length-2))}}class ee extends ni{construct(e,i,a){return new ee(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new ut(et.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter(o=>o.length>0))}return new ee(i)}static emptyPath(){return new ee([])}}const n1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pe extends ni{construct(e,i,a){return new Pe(e,i,a)}static isValidIdentifier(e){return n1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ly}static keyField(){return new Pe([Ly])}static fromServerFormat(e){const i=[];let a="",o=0;const h=()=>{if(a.length===0)throw new ut(et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let d=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ut(et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[o+1];if(_!=="\\"&&_!=="."&&_!=="`")throw new ut(et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=_,o+=2}else g==="`"?(d=!d,o++):g!=="."||d?(a+=g,o++):(h(),o++)}if(h(),d)throw new ut(et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pe(i)}static emptyPath(){return new Pe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.path=e}static fromPath(e){return new pt(ee.fromString(e))}static fromName(e){return new pt(ee.fromString(e).popFirst(5))}static empty(){return new pt(ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return ee.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pt(new ee(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=-1;function i1(s,e){const i=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=xt.fromTimestamp(a===1e9?new Se(i+1,0):new Se(i,a));return new pr(o,pt.empty(),e)}function r1(s){return new pr(s.readTime,s.key,Zl)}class pr{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new pr(xt.min(),pt.empty(),Zl)}static max(){return new pr(xt.max(),pt.empty(),Zl)}}function s1(s,e){let i=s.readTime.compareTo(e.readTime);return i!==0?i:(i=pt.comparator(s.documentKey,e.documentKey),i!==0?i:Ct(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class l1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sa(s){if(s.code!==et.FAILED_PRECONDITION||s.message!==a1)throw s;ot("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new tt((a,o)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(a,o)},this.catchCallback=h=>{this.wrapFailure(i,h).next(a,o)}})}toPromise(){return new Promise((e,i)=>{this.next(e,i)})}wrapUserFunction(e){try{const i=e();return i instanceof tt?i:tt.resolve(i)}catch(i){return tt.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction(()=>e(i)):tt.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction(()=>e(i)):tt.reject(i)}static resolve(e){return new tt((i,a)=>{i(e)})}static reject(e){return new tt((i,a)=>{a(e)})}static waitFor(e){return new tt((i,a)=>{let o=0,h=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++h,d&&h===o&&i()},_=>a(_))}),d=!0,h===o&&i()})}static or(e){let i=tt.resolve(!1);for(const a of e)i=i.next(o=>o?tt.resolve(o):a());return i}static forEach(e,i){const a=[];return e.forEach((o,h)=>{a.push(i.call(this,o,h))}),this.waitFor(a)}static mapArray(e,i){return new tt((a,o)=>{const h=e.length,d=new Array(h);let g=0;for(let _=0;_<h;_++){const p=_;i(e[p]).next(T=>{d[p]=T,++g,g===h&&a(d)},T=>o(T))}})}static doWhile(e,i){return new tt((a,o)=>{const h=()=>{e()===!0?i().next(()=>{h()},o):a()};h()})}}function o1(s){const e=s.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function wa(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ue(a),this.ce=a=>i.writeSequenceNumber(a))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}lc.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd=-1;function oc(s){return s==null}function $u(s){return s===0&&1/s==-1/0}function u1(s){return typeof s=="number"&&Number.isInteger(s)&&!$u(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="";function c1(s){let e="";for(let i=0;i<s.length;i++)e.length>0&&(e=Py(e)),e=h1(s.get(i),e);return Py(e)}function h1(s,e){let i=e;const a=s.length;for(let o=0;o<a;o++){const h=s.charAt(o);switch(h){case"\0":i+="";break;case J0:i+="";break;default:i+=h}}return i}function Py(s){return s+J0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(s){let e=0;for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e++;return e}function Tr(s,e){for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&e(i,s[i])}function W0(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e,i){this.comparator=e,this.root=i||Le.EMPTY}insert(e,i){return new se(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,Le.BLACK,null,null))}remove(e){return new se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Le.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return i+a.left.size;o<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((i,a)=>(e(i,a),!1))}toString(){const e=[];return this.inorderTraversal((i,a)=>(e.push(`${i}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ku(this.root,e,this.comparator,!0)}}class ku{constructor(e,i,a,o){this.isReverse=o,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=i?a(e.key,i):1,i&&o&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(h===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Le{constructor(e,i,a,o,h){this.key=e,this.value=i,this.color=a??Le.RED,this.left=o??Le.EMPTY,this.right=h??Le.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,o,h){return new Le(e??this.key,i??this.value,a??this.color,o??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let o=this;const h=a(e,o.key);return o=h<0?o.copy(null,null,null,o.left.insert(e,i,a),null):h===0?o.copy(null,i,null,null,null):o.copy(null,null,null,null,o.right.insert(e,i,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Le.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,o=this;if(i(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),i(e,o.key)===0){if(o.right.isEmpty())return Le.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Le.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _t(27949);return e+(this.isRed()?0:1)}}Le.EMPTY=null,Le.RED=!0,Le.BLACK=!1;Le.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(e,i,a,o,h){return this}insert(e,i,a){return new Le(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.comparator=e,this.data=new se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((i,a)=>(e(i),!1))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;i(o.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new By(this.data.getIterator())}getIteratorFrom(e){return new By(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach(a=>{i=i.add(a)}),i}isEqual(e){if(!(e instanceof we)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(this.comparator(o,h)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(i=>{e.push(i)}),e}toString(){const e=[];return this.forEach(i=>e.push(i)),"SortedSet("+e.toString()+")"}copy(e){const i=new we(this.comparator);return i.data=e,i}}class By{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.fields=e,e.sort(Pe.comparator)}static empty(){return new mn([])}unionWith(e){let i=new we(Pe.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new mn(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,(i,a)=>i.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.binaryString=e}static fromBase64String(e){const i=function(o){try{return atob(o)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new tv("Invalid base64 string: "+h):h}}(e);return new ze(i)}static fromUint8Array(e){const i=function(o){let h="";for(let d=0;d<o.length;++d)h+=String.fromCharCode(o[d]);return h}(e);return new ze(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const a=new Uint8Array(i.length);for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ze.EMPTY_BYTE_STRING=new ze("");const f1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(s){if(Gt(!!s,39018),typeof s=="string"){let e=0;const i=f1.exec(s);if(Gt(!!i,46558,{timestamp:s}),i[1]){let o=i[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:fe(s.seconds),nanos:fe(s.nanos)}}function fe(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function vr(s){return typeof s=="string"?ze.fromBase64String(s):ze.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="server_timestamp",nv="__type__",iv="__previous_value__",rv="__local_write_time__";function vd(s){var e,i;return((i=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[nv])===null||i===void 0?void 0:i.stringValue)===ev}function uc(s){const e=s.mapValue.fields[iv];return vd(e)?uc(e):e}function Jl(s){const e=yr(s.mapValue.fields[rv].timestampValue);return new Se(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,i,a,o,h,d,g,_,p,T){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=o,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=_,this.useFetchStreams=p,this.isUsingEmulator=T}}const Zu="(default)";class Wl{constructor(e,i){this.projectId=e,this.database=i||Zu}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database===Zu}isEqual(e){return e instanceof Wl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="__type__",m1="__max__",Uu={mapValue:{}},av="__vector__",Ju="value";function _r(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?vd(s)?4:p1(s)?9007199254740991:g1(s)?10:11:_t(28295,{value:s})}function si(s,e){if(s===e)return!0;const i=_r(s);if(i!==_r(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Jl(s).isEqual(Jl(e));case 3:return function(o,h){if(typeof o.timestampValue=="string"&&typeof h.timestampValue=="string"&&o.timestampValue.length===h.timestampValue.length)return o.timestampValue===h.timestampValue;const d=yr(o.timestampValue),g=yr(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,h){return vr(o.bytesValue).isEqual(vr(h.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,h){return fe(o.geoPointValue.latitude)===fe(h.geoPointValue.latitude)&&fe(o.geoPointValue.longitude)===fe(h.geoPointValue.longitude)}(s,e);case 2:return function(o,h){if("integerValue"in o&&"integerValue"in h)return fe(o.integerValue)===fe(h.integerValue);if("doubleValue"in o&&"doubleValue"in h){const d=fe(o.doubleValue),g=fe(h.doubleValue);return d===g?$u(d)===$u(g):isNaN(d)&&isNaN(g)}return!1}(s,e);case 9:return pa(s.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(o,h){const d=o.mapValue.fields||{},g=h.mapValue.fields||{};if(zy(d)!==zy(g))return!1;for(const _ in d)if(d.hasOwnProperty(_)&&(g[_]===void 0||!si(d[_],g[_])))return!1;return!0}(s,e);default:return _t(52216,{left:s})}}function to(s,e){return(s.values||[]).find(i=>si(i,e))!==void 0}function ya(s,e){if(s===e)return 0;const i=_r(s),a=_r(e);if(i!==a)return Ct(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Ct(s.booleanValue,e.booleanValue);case 2:return function(h,d){const g=fe(h.integerValue||h.doubleValue),_=fe(d.integerValue||d.doubleValue);return g<_?-1:g>_?1:g===_?0:isNaN(g)?isNaN(_)?0:-1:1}(s,e);case 3:return qy(s.timestampValue,e.timestampValue);case 4:return qy(Jl(s),Jl(e));case 5:return Kf(s.stringValue,e.stringValue);case 6:return function(h,d){const g=vr(h),_=vr(d);return g.compareTo(_)}(s.bytesValue,e.bytesValue);case 7:return function(h,d){const g=h.split("/"),_=d.split("/");for(let p=0;p<g.length&&p<_.length;p++){const T=Ct(g[p],_[p]);if(T!==0)return T}return Ct(g.length,_.length)}(s.referenceValue,e.referenceValue);case 8:return function(h,d){const g=Ct(fe(h.latitude),fe(d.latitude));return g!==0?g:Ct(fe(h.longitude),fe(d.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return Hy(s.arrayValue,e.arrayValue);case 10:return function(h,d){var g,_,p,T;const A=h.fields||{},w=d.fields||{},k=(g=A[Ju])===null||g===void 0?void 0:g.arrayValue,B=(_=w[Ju])===null||_===void 0?void 0:_.arrayValue,G=Ct(((p=k==null?void 0:k.values)===null||p===void 0?void 0:p.length)||0,((T=B==null?void 0:B.values)===null||T===void 0?void 0:T.length)||0);return G!==0?G:Hy(k,B)}(s.mapValue,e.mapValue);case 11:return function(h,d){if(h===Uu.mapValue&&d===Uu.mapValue)return 0;if(h===Uu.mapValue)return 1;if(d===Uu.mapValue)return-1;const g=h.fields||{},_=Object.keys(g),p=d.fields||{},T=Object.keys(p);_.sort(),T.sort();for(let A=0;A<_.length&&A<T.length;++A){const w=Kf(_[A],T[A]);if(w!==0)return w;const k=ya(g[_[A]],p[T[A]]);if(k!==0)return k}return Ct(_.length,T.length)}(s.mapValue,e.mapValue);default:throw _t(23264,{Pe:i})}}function qy(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Ct(s,e);const i=yr(s),a=yr(e),o=Ct(i.seconds,a.seconds);return o!==0?o:Ct(i.nanos,a.nanos)}function Hy(s,e){const i=s.values||[],a=e.values||[];for(let o=0;o<i.length&&o<a.length;++o){const h=ya(i[o],a[o]);if(h)return h}return Ct(i.length,a.length)}function va(s){return Xf(s)}function Xf(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(i){const a=yr(i);return`time(${a.seconds},${a.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(i){return vr(i).toBase64()}(s.bytesValue):"referenceValue"in s?function(i){return pt.fromName(i).toString()}(s.referenceValue):"geoPointValue"in s?function(i){return`geo(${i.latitude},${i.longitude})`}(s.geoPointValue):"arrayValue"in s?function(i){let a="[",o=!0;for(const h of i.values||[])o?o=!1:a+=",",a+=Xf(h);return a+"]"}(s.arrayValue):"mapValue"in s?function(i){const a=Object.keys(i.fields||{}).sort();let o="{",h=!0;for(const d of a)h?h=!1:o+=",",o+=`${d}:${Xf(i.fields[d])}`;return o+"}"}(s.mapValue):_t(61005,{value:s})}function Bu(s){switch(_r(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=uc(s);return e?16+Bu(e):16;case 5:return 2*s.stringValue.length;case 6:return vr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(a){return(a.values||[]).reduce((o,h)=>o+Bu(h),0)}(s.arrayValue);case 10:case 11:return function(a){let o=0;return Tr(a.fields,(h,d)=>{o+=h.length+Bu(d)}),o}(s.mapValue);default:throw _t(13486,{value:s})}}function Gy(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function $f(s){return!!s&&"integerValue"in s}function _d(s){return!!s&&"arrayValue"in s}function Qy(s){return!!s&&"nullValue"in s}function Fy(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function qu(s){return!!s&&"mapValue"in s}function g1(s){var e,i;return((i=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[sv])===null||i===void 0?void 0:i.stringValue)===av}function Ql(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Tr(s.mapValue.fields,(i,a)=>e.mapValue.fields[i]=Ql(a)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(s.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=Ql(s.arrayValue.values[i]);return e}return Object.assign({},s)}function p1(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===m1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!qu(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ql(i)}setAll(e){let i=Pe.emptyPath(),a={},o=[];e.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const _=this.getFieldsMap(i);this.applyChanges(_,a,o),a={},o=[],i=g.popLast()}d?a[g.lastSegment()]=Ql(d):o.push(g.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,a,o)}delete(e){const i=this.field(e.popLast());qu(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=i.mapValue.fields[e.get(a)];qu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=o),i=o}return i.mapValue.fields}applyChanges(e,i,a){Tr(i,(o,h)=>e[o]=h);for(const o of a)delete e[o]}clone(){return new nn(Ql(this.value))}}function lv(s){const e=[];return Tr(s.fields,(i,a)=>{const o=new Pe([i]);if(qu(a)){const h=lv(a.mapValue).fields;if(h.length===0)e.push(o);else for(const d of h)e.push(o.child(d))}else e.push(o)}),new mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,i,a,o,h,d,g){this.key=e,this.documentType=i,this.version=a,this.readTime=o,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Fe(e,0,xt.min(),xt.min(),xt.min(),nn.empty(),0)}static newFoundDocument(e,i,a,o){return new Fe(e,1,i,xt.min(),a,o,0)}static newNoDocument(e,i){return new Fe(e,2,i,xt.min(),xt.min(),nn.empty(),0)}static newUnknownDocument(e,i){return new Fe(e,3,i,xt.min(),xt.min(),nn.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Fe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,i){this.position=e,this.inclusive=i}}function Yy(s,e,i){let a=0;for(let o=0;o<s.position.length;o++){const h=e[o],d=s.position[o];if(h.field.isKeyField()?a=pt.comparator(pt.fromName(d.referenceValue),i.key):a=ya(d,i.data.field(h.field)),h.dir==="desc"&&(a*=-1),a!==0)break}return a}function Ky(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let i=0;i<s.position.length;i++)if(!si(s.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(e,i="asc"){this.field=e,this.dir=i}}function y1(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{}class _e extends ov{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new _1(e,i,a):i==="array-contains"?new T1(e,a):i==="in"?new x1(e,a):i==="not-in"?new A1(e,a):i==="array-contains-any"?new S1(e,a):new _e(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new b1(e,a):new E1(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(ya(i,this.value)):i!==null&&_r(this.value)===_r(i)&&this.matchesComparison(ya(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Un extends ov{constructor(e,i){super(),this.filters=e,this.op=i,this.Te=null}static create(e,i){return new Un(e,i)}matches(e){return uv(this)?this.filters.find(i=>!i.matches(e))===void 0:this.filters.find(i=>i.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,i)=>e.concat(i.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function uv(s){return s.op==="and"}function cv(s){return v1(s)&&uv(s)}function v1(s){for(const e of s.filters)if(e instanceof Un)return!1;return!0}function Zf(s){if(s instanceof _e)return s.field.canonicalString()+s.op.toString()+va(s.value);if(cv(s))return s.filters.map(e=>Zf(e)).join(",");{const e=s.filters.map(i=>Zf(i)).join(",");return`${s.op}(${e})`}}function hv(s,e){return s instanceof _e?function(a,o){return o instanceof _e&&a.op===o.op&&a.field.isEqual(o.field)&&si(a.value,o.value)}(s,e):s instanceof Un?function(a,o){return o instanceof Un&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce((h,d,g)=>h&&hv(d,o.filters[g]),!0):!1}(s,e):void _t(19439)}function fv(s){return s instanceof _e?function(i){return`${i.field.canonicalString()} ${i.op} ${va(i.value)}`}(s):s instanceof Un?function(i){return i.op.toString()+" {"+i.getFilters().map(fv).join(" ,")+"}"}(s):"Filter"}class _1 extends _e{constructor(e,i,a){super(e,i,a),this.key=pt.fromName(a.referenceValue)}matches(e){const i=pt.comparator(e.key,this.key);return this.matchesComparison(i)}}class b1 extends _e{constructor(e,i){super(e,"in",i),this.keys=dv("in",i)}matches(e){return this.keys.some(i=>i.isEqual(e.key))}}class E1 extends _e{constructor(e,i){super(e,"not-in",i),this.keys=dv("not-in",i)}matches(e){return!this.keys.some(i=>i.isEqual(e.key))}}function dv(s,e){var i;return(((i=e.arrayValue)===null||i===void 0?void 0:i.values)||[]).map(a=>pt.fromName(a.referenceValue))}class T1 extends _e{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return _d(i)&&to(i.arrayValue,this.value)}}class x1 extends _e{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&to(this.value.arrayValue,i)}}class A1 extends _e{constructor(e,i){super(e,"not-in",i)}matches(e){if(to(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!to(this.value.arrayValue,i)}}class S1 extends _e{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!_d(i)||!i.arrayValue.values)&&i.arrayValue.values.some(a=>to(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,i=null,a=[],o=[],h=null,d=null,g=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=o,this.limit=h,this.startAt=d,this.endAt=g,this.Ie=null}}function Xy(s,e=null,i=[],a=[],o=null,h=null,d=null){return new w1(s,e,i,a,o,h,d)}function bd(s){const e=At(s);if(e.Ie===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map(a=>Zf(a)).join(","),i+="|ob:",i+=e.orderBy.map(a=>function(h){return h.field.canonicalString()+h.dir}(a)).join(","),oc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(a=>va(a)).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(a=>va(a)).join(",")),e.Ie=i}return e.Ie}function Ed(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<s.orderBy.length;i++)if(!y1(s.orderBy[i],e.orderBy[i]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let i=0;i<s.filters.length;i++)if(!hv(s.filters[i],e.filters[i]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Ky(s.startAt,e.startAt)&&Ky(s.endAt,e.endAt)}function Jf(s){return pt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,i=null,a=[],o=[],h=null,d="F",g=null,_=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=o,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=_,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function R1(s,e,i,a,o,h,d,g){return new ro(s,e,i,a,o,h,d,g)}function Td(s){return new ro(s)}function $y(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function mv(s){return s.collectionGroup!==null}function Fl(s){const e=At(s);if(e.Ee===null){e.Ee=[];const i=new Set;for(const h of e.explicitOrderBy)e.Ee.push(h),i.add(h.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new we(Pe.comparator);return d.filters.forEach(_=>{_.getFlattenedFilters().forEach(p=>{p.isInequality()&&(g=g.add(p.field))})}),g})(e).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||e.Ee.push(new tc(h,a))}),i.has(Pe.keyField().canonicalString())||e.Ee.push(new tc(Pe.keyField(),a))}return e.Ee}function ii(s){const e=At(s);return e.de||(e.de=C1(e,Fl(s))),e.de}function C1(s,e){if(s.limitType==="F")return Xy(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const h=o.dir==="desc"?"asc":"desc";return new tc(o.field,h)});const i=s.endAt?new Wu(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Wu(s.startAt.position,s.startAt.inclusive):null;return Xy(s.path,s.collectionGroup,e,s.filters,s.limit,i,a)}}function Wf(s,e){const i=s.filters.concat([e]);return new ro(s.path,s.collectionGroup,s.explicitOrderBy.slice(),i,s.limit,s.limitType,s.startAt,s.endAt)}function td(s,e,i){return new ro(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,i,s.startAt,s.endAt)}function cc(s,e){return Ed(ii(s),ii(e))&&s.limitType===e.limitType}function gv(s){return`${bd(ii(s))}|lt:${s.limitType}`}function oa(s){return`Query(target=${function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map(o=>fv(o)).join(", ")}]`),oc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map(o=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(o)).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map(o=>va(o)).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map(o=>va(o)).join(",")),`Target(${a})`}(ii(s))}; limitType=${s.limitType})`}function hc(s,e){return e.isFoundDocument()&&function(a,o){const h=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(h):pt.isDocumentKey(a.path)?a.path.isEqual(h):a.path.isImmediateParentOf(h)}(s,e)&&function(a,o){for(const h of Fl(a))if(!h.field.isKeyField()&&o.data.field(h.field)===null)return!1;return!0}(s,e)&&function(a,o){for(const h of a.filters)if(!h.matches(o))return!1;return!0}(s,e)&&function(a,o){return!(a.startAt&&!function(d,g,_){const p=Yy(d,g,_);return d.inclusive?p<=0:p<0}(a.startAt,Fl(a),o)||a.endAt&&!function(d,g,_){const p=Yy(d,g,_);return d.inclusive?p>=0:p>0}(a.endAt,Fl(a),o))}(s,e)}function N1(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function pv(s){return(e,i)=>{let a=!1;for(const o of Fl(s)){const h=D1(o,e,i);if(h!==0)return h;a=a||o.field.isKeyField()}return 0}}function D1(s,e,i){const a=s.field.isKeyField()?pt.comparator(e.key,i.key):function(h,d,g){const _=d.data.field(h),p=g.data.field(h);return _!==null&&p!==null?ya(_,p):_t(42886)}(s.field,e,i);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return _t(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[o,h]of a)if(this.equalsFn(o,e))return h}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let h=0;h<o.length;h++)if(this.equalsFn(o[h][0],e))return void(o[h]=[e,i]);o.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[i]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Tr(this.inner,(i,a)=>{for(const[o,h]of a)e(o,h)})}isEmpty(){return W0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new se(pt.comparator);function ji(){return I1}const yv=new se(pt.comparator);function zl(...s){let e=yv;for(const i of s)e=e.insert(i.key,i);return e}function vv(s){let e=yv;return s.forEach((i,a)=>e=e.insert(i,a.overlayedDocument)),e}function os(){return Yl()}function _v(){return Yl()}function Yl(){return new fs(s=>s.toString(),(s,e)=>s.isEqual(e))}const V1=new se(pt.comparator),M1=new we(pt.comparator);function Mt(...s){let e=M1;for(const i of s)e=e.add(i);return e}const O1=new we(Ct);function j1(){return O1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function bv(s){return{integerValue:""+s}}function k1(s,e){return u1(e)?bv(e):xd(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(){this._=void 0}}function U1(s,e,i){return s instanceof eo?function(o,h){const d={fields:{[nv]:{stringValue:ev},[rv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return h&&vd(h)&&(h=uc(h)),h&&(d.fields[iv]=h),{mapValue:d}}(i,e):s instanceof no?Tv(s,e):s instanceof io?xv(s,e):function(o,h){const d=Ev(o,h),g=Zy(d)+Zy(o.Re);return $f(d)&&$f(o.Re)?bv(g):xd(o.serializer,g)}(s,e)}function L1(s,e,i){return s instanceof no?Tv(s,e):s instanceof io?xv(s,e):i}function Ev(s,e){return s instanceof ec?function(a){return $f(a)||function(h){return!!h&&"doubleValue"in h}(a)}(e)?e:{integerValue:0}:null}class eo extends fc{}class no extends fc{constructor(e){super(),this.elements=e}}function Tv(s,e){const i=Av(e);for(const a of s.elements)i.some(o=>si(o,a))||i.push(a);return{arrayValue:{values:i}}}class io extends fc{constructor(e){super(),this.elements=e}}function xv(s,e){let i=Av(e);for(const a of s.elements)i=i.filter(o=>!si(o,a));return{arrayValue:{values:i}}}class ec extends fc{constructor(e,i){super(),this.serializer=e,this.Re=i}}function Zy(s){return fe(s.integerValue||s.doubleValue)}function Av(s){return _d(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,i){this.field=e,this.transform=i}}function z1(s,e){return s.field.isEqual(e.field)&&function(a,o){return a instanceof no&&o instanceof no||a instanceof io&&o instanceof io?pa(a.elements,o.elements,si):a instanceof ec&&o instanceof ec?si(a.Re,o.Re):a instanceof eo&&o instanceof eo}(s.transform,e.transform)}class B1{constructor(e,i){this.version=e,this.transformResults=i}}class Nn{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class dc{}function Sv(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Ad(s.key,Nn.none()):new so(s.key,s.data,Nn.none());{const i=s.data,a=nn.empty();let o=new we(Pe.comparator);for(let h of e.fields)if(!o.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?a.delete(h):a.set(h,d),o=o.add(h)}return new xr(s.key,a,new mn(o.toArray()),Nn.none())}}function q1(s,e,i){s instanceof so?function(o,h,d){const g=o.value.clone(),_=Wy(o.fieldTransforms,h,d.transformResults);g.setAll(_),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(s,e,i):s instanceof xr?function(o,h,d){if(!Hu(o.precondition,h))return void h.convertToUnknownDocument(d.version);const g=Wy(o.fieldTransforms,h,d.transformResults),_=h.data;_.setAll(wv(o)),_.setAll(g),h.convertToFoundDocument(d.version,_).setHasCommittedMutations()}(s,e,i):function(o,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,i)}function Kl(s,e,i,a){return s instanceof so?function(h,d,g,_){if(!Hu(h.precondition,d))return g;const p=h.value.clone(),T=t0(h.fieldTransforms,_,d);return p.setAll(T),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null}(s,e,i,a):s instanceof xr?function(h,d,g,_){if(!Hu(h.precondition,d))return g;const p=t0(h.fieldTransforms,_,d),T=d.data;return T.setAll(wv(h)),T.setAll(p),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(A=>A.field))}(s,e,i,a):function(h,d,g){return Hu(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(s,e,i)}function H1(s,e){let i=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),h=Ev(a.transform,o||null);h!=null&&(i===null&&(i=nn.empty()),i.set(a.field,h))}return i||null}function Jy(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&pa(a,o,(h,d)=>z1(h,d))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class so extends dc{constructor(e,i,a,o=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xr extends dc{constructor(e,i,a,o,h=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=o,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function wv(s){const e=new Map;return s.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const a=s.data.field(i);e.set(i,a)}}),e}function Wy(s,e,i){const a=new Map;Gt(s.length===i.length,32656,{Ve:i.length,me:s.length});for(let o=0;o<i.length;o++){const h=s[o],d=h.transform,g=e.data.field(h.field);a.set(h.field,L1(d,g,i[o]))}return a}function t0(s,e,i){const a=new Map;for(const o of s){const h=o.transform,d=i.data.field(o.field);a.set(o.field,U1(h,d,e))}return a}class Ad extends dc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class G1 extends dc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,i,a,o){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let o=0;o<this.mutations.length;o++){const h=this.mutations[o];h.key.isEqual(e.key)&&q1(h,e,a[o])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=Kl(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=Kl(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=_v();return this.mutations.forEach(o=>{const h=e.get(o.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(o.key)?null:g;const _=Sv(d,g);_!==null&&a.set(o.key,_),d.isValidDocument()||d.convertToNoDocument(xt.min())}),a}keys(){return this.mutations.reduce((e,i)=>e.add(i.key),Mt())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,(i,a)=>Jy(i,a))&&pa(this.baseMutations,e.baseMutations,(i,a)=>Jy(i,a))}}class Sd{constructor(e,i,a,o){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=o}static from(e,i,a){Gt(e.mutations.length===a.length,58842,{fe:e.mutations.length,ge:a.length});let o=function(){return V1}();const h=e.mutations;for(let d=0;d<h.length;d++)o=o.insert(h[d].key,a[d].version);return new Sd(e,i,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,Ut;function K1(s){switch(s){case et.OK:return _t(64938);case et.CANCELLED:case et.UNKNOWN:case et.DEADLINE_EXCEEDED:case et.RESOURCE_EXHAUSTED:case et.INTERNAL:case et.UNAVAILABLE:case et.UNAUTHENTICATED:return!1;case et.INVALID_ARGUMENT:case et.NOT_FOUND:case et.ALREADY_EXISTS:case et.PERMISSION_DENIED:case et.FAILED_PRECONDITION:case et.ABORTED:case et.OUT_OF_RANGE:case et.UNIMPLEMENTED:case et.DATA_LOSS:return!0;default:return _t(15467,{code:s})}}function Rv(s){if(s===void 0)return Oi("GRPC error has no .code"),et.UNKNOWN;switch(s){case ve.OK:return et.OK;case ve.CANCELLED:return et.CANCELLED;case ve.UNKNOWN:return et.UNKNOWN;case ve.DEADLINE_EXCEEDED:return et.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return et.RESOURCE_EXHAUSTED;case ve.INTERNAL:return et.INTERNAL;case ve.UNAVAILABLE:return et.UNAVAILABLE;case ve.UNAUTHENTICATED:return et.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return et.INVALID_ARGUMENT;case ve.NOT_FOUND:return et.NOT_FOUND;case ve.ALREADY_EXISTS:return et.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return et.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return et.FAILED_PRECONDITION;case ve.ABORTED:return et.ABORTED;case ve.OUT_OF_RANGE:return et.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return et.UNIMPLEMENTED;case ve.DATA_LOSS:return et.DATA_LOSS;default:return _t(39323,{code:s})}}(Ut=ve||(ve={}))[Ut.OK=0]="OK",Ut[Ut.CANCELLED=1]="CANCELLED",Ut[Ut.UNKNOWN=2]="UNKNOWN",Ut[Ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ut[Ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ut[Ut.NOT_FOUND=5]="NOT_FOUND",Ut[Ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ut[Ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ut[Ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ut[Ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ut[Ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ut[Ut.ABORTED=10]="ABORTED",Ut[Ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ut[Ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ut[Ut.INTERNAL=13]="INTERNAL",Ut[Ut.UNAVAILABLE=14]="UNAVAILABLE",Ut[Ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1=new dr([4294967295,4294967295],0);function e0(s){const e=$0().encode(s),i=new q0;return i.update(e),new Uint8Array(i.digest())}function n0(s){const e=new DataView(s.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new dr([i,a],0),new dr([o,h],0)]}class wd{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new Bl(`Invalid padding: ${i}`);if(a<0)throw new Bl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${i}`);this.pe=8*e.length-i,this.ye=dr.fromNumber(this.pe)}we(e,i,a){let o=e.add(i.multiply(dr.fromNumber(a)));return o.compare(X1)===1&&(o=new dr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const i=e0(e),[a,o]=n0(i);for(let h=0;h<this.hashCount;h++){const d=this.we(a,o,h);if(!this.be(d))return!1}return!0}static create(e,i,a){const o=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),d=new wd(h,o,i);return a.forEach(g=>d.insert(g)),d}insert(e){if(this.pe===0)return;const i=e0(e),[a,o]=n0(i);for(let h=0;h<this.hashCount;h++){const d=this.we(a,o,h);this.Se(d)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,i,a,o,h){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const o=new Map;return o.set(e,ao.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new mc(xt.min(),o,new se(Ct),ji(),Mt())}}class ao{constructor(e,i,a,o,h){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new ao(a,i,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,i,a,o){this.De=e,this.removedTargetIds=i,this.key=a,this.ve=o}}class Cv{constructor(e,i){this.targetId=e,this.Ce=i}}class Nv{constructor(e,i,a=ze.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=o}}class i0{constructor(){this.Fe=0,this.Me=r0(),this.xe=ze.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Mt(),i=Mt(),a=Mt();return this.Me.forEach((o,h)=>{switch(h){case 0:e=e.add(o);break;case 2:i=i.add(o);break;case 1:a=a.add(o);break;default:_t(38017,{changeType:h})}}),new ao(this.xe,this.Oe,e,i,a)}Qe(){this.Ne=!1,this.Me=r0()}$e(e,i){this.Ne=!0,this.Me=this.Me.insert(e,i)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Gt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class $1{constructor(e){this.ze=e,this.je=new Map,this.He=ji(),this.Je=Lu(),this.Ye=Lu(),this.Ze=new se(Ct)}Xe(e){for(const i of e.De)e.ve&&e.ve.isFoundDocument()?this.et(i,e.ve):this.tt(i,e.key,e.ve);for(const i of e.removedTargetIds)this.tt(i,e.key,e.ve)}nt(e){this.forEachTarget(e,i=>{const a=this.rt(i);switch(e.state){case 0:this.it(i)&&a.ke(e.resumeToken);break;case 1:a.We(),a.Be||a.Qe(),a.ke(e.resumeToken);break;case 2:a.We(),a.Be||this.removeTarget(i);break;case 3:this.it(i)&&(a.Ge(),a.ke(e.resumeToken));break;case 4:this.it(i)&&(this.st(i),a.ke(e.resumeToken));break;default:_t(56790,{state:e.state})}})}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.je.forEach((a,o)=>{this.it(o)&&i(o)})}ot(e){const i=e.targetId,a=e.Ce.count,o=this._t(i);if(o){const h=o.target;if(Jf(h))if(a===0){const d=new pt(h.path);this.tt(i,d,Fe.newNoDocument(d,xt.min()))}else Gt(a===1,20013,{expectedCount:a});else{const d=this.ut(i);if(d!==a){const g=this.ct(e),_=g?this.lt(g,e,d):1;if(_!==0){this.st(i);const p=_===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(i,p)}}}}}ct(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:h=0}=i;let d,g;try{d=vr(a).toUint8Array()}catch(_){if(_ instanceof tv)return ga("Decoding the base64 bloom filter in existence filter failed ("+_.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw _}try{g=new wd(d,o,h)}catch(_){return ga(_ instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",_),null}return g.pe===0?null:g}lt(e,i,a){return i.Ce.count===a-this.Tt(e,i.targetId)?0:2}Tt(e,i){const a=this.ze.getRemoteKeysForTarget(i);let o=0;return a.forEach(h=>{const d=this.ze.Pt(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;e.mightContain(g)||(this.tt(i,h,null),o++)}),o}It(e){const i=new Map;this.je.forEach((h,d)=>{const g=this._t(d);if(g){if(h.current&&Jf(g.target)){const _=new pt(g.target.path);this.Et(_).has(d)||this.dt(d,_)||this.tt(d,_,Fe.newNoDocument(_,e))}h.Le&&(i.set(d,h.qe()),h.Qe())}});let a=Mt();this.Ye.forEach((h,d)=>{let g=!0;d.forEachWhile(_=>{const p=this._t(_);return!p||p.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(a=a.add(h))}),this.He.forEach((h,d)=>d.setReadTime(e));const o=new mc(e,i,this.Ze,this.He,a);return this.He=ji(),this.Je=Lu(),this.Ye=Lu(),this.Ze=new se(Ct),o}et(e,i){if(!this.it(e))return;const a=this.dt(e,i.key)?2:0;this.rt(e).$e(i.key,a),this.He=this.He.insert(i.key,i),this.Je=this.Je.insert(i.key,this.Et(i.key).add(e)),this.Ye=this.Ye.insert(i.key,this.At(i.key).add(e))}tt(e,i,a){if(!this.it(e))return;const o=this.rt(e);this.dt(e,i)?o.$e(i,1):o.Ue(i),this.Ye=this.Ye.insert(i,this.At(i).delete(e)),this.Ye=this.Ye.insert(i,this.At(i).add(e)),a&&(this.He=this.He.insert(i,a))}removeTarget(e){this.je.delete(e)}ut(e){const i=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let i=this.je.get(e);return i||(i=new i0,this.je.set(e,i)),i}At(e){let i=this.Ye.get(e);return i||(i=new we(Ct),this.Ye=this.Ye.insert(e,i)),i}Et(e){let i=this.Je.get(e);return i||(i=new we(Ct),this.Je=this.Je.insert(e,i)),i}it(e){const i=this._t(e)!==null;return i||ot("WatchChangeAggregator","Detected inactive target",e),i}_t(e){const i=this.je.get(e);return i&&i.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new i0),this.ze.getRemoteKeysForTarget(e).forEach(i=>{this.tt(e,i,null)})}dt(e,i){return this.ze.getRemoteKeysForTarget(e).has(i)}}function Lu(){return new se(pt.comparator)}function r0(){return new se(pt.comparator)}const Z1={asc:"ASCENDING",desc:"DESCENDING"},J1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W1={and:"AND",or:"OR"};class tx{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function ed(s,e){return s.useProto3Json||oc(e)?e:{value:e}}function nc(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Dv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function ex(s,e){return nc(s,e.toTimestamp())}function ri(s){return Gt(!!s,49232),xt.fromTimestamp(function(i){const a=yr(i);return new Se(a.seconds,a.nanos)}(s))}function Rd(s,e){return nd(s,e).canonicalString()}function nd(s,e){const i=function(o){return new ee(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?i:i.child(e)}function Iv(s){const e=ee.fromString(s);return Gt(kv(e),10190,{key:e.toString()}),e}function id(s,e){return Rd(s.databaseId,e.path)}function Uf(s,e){const i=Iv(e);if(i.get(1)!==s.databaseId.projectId)throw new ut(et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+s.databaseId.projectId);if(i.get(3)!==s.databaseId.database)throw new ut(et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+s.databaseId.database);return new pt(Mv(i))}function Vv(s,e){return Rd(s.databaseId,e)}function nx(s){const e=Iv(s);return e.length===4?ee.emptyPath():Mv(e)}function rd(s){return new ee(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Mv(s){return Gt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function s0(s,e,i){return{name:id(s,e),fields:i.value.mapValue.fields}}function ix(s,e){let i;if("targetChange"in e){e.targetChange;const a=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:_t(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],h=function(p,T){return p.useProto3Json?(Gt(T===void 0||typeof T=="string",58123),ze.fromBase64String(T||"")):(Gt(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),ze.fromUint8Array(T||new Uint8Array))}(s,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(p){const T=p.code===void 0?et.UNKNOWN:Rv(p.code);return new ut(T,p.message||"")}(d);i=new Nv(a,o,h,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Uf(s,a.document.name),h=ri(a.document.updateTime),d=a.document.createTime?ri(a.document.createTime):xt.min(),g=new nn({mapValue:{fields:a.document.fields}}),_=Fe.newFoundDocument(o,h,d,g),p=a.targetIds||[],T=a.removedTargetIds||[];i=new Gu(p,T,_.key,_)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Uf(s,a.document),h=a.readTime?ri(a.readTime):xt.min(),d=Fe.newNoDocument(o,h),g=a.removedTargetIds||[];i=new Gu([],g,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Uf(s,a.document),h=a.removedTargetIds||[];i=new Gu([],h,o,null)}else{if(!("filter"in e))return _t(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:h}=a,d=new Y1(o,h),g=a.targetId;i=new Cv(g,d)}}return i}function rx(s,e){let i;if(e instanceof so)i={update:s0(s,e.key,e.value)};else if(e instanceof Ad)i={delete:id(s,e.key)};else if(e instanceof xr)i={update:s0(s,e.key,e.data),updateMask:dx(e.fieldMask)};else{if(!(e instanceof G1))return _t(16599,{ft:e.type});i={verify:id(s,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map(a=>function(h,d){const g=d.transform;if(g instanceof eo)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof no)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof io)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof ec)return{fieldPath:d.field.canonicalString(),increment:g.Re};throw _t(20930,{transform:d.transform})}(0,a))),e.precondition.isNone||(i.currentDocument=function(o,h){return h.updateTime!==void 0?{updateTime:ex(o,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:_t(27497)}(s,e.precondition)),i}function sx(s,e){return s&&s.length>0?(Gt(e!==void 0,14353),s.map(i=>function(o,h){let d=o.updateTime?ri(o.updateTime):ri(h);return d.isEqual(xt.min())&&(d=ri(h)),new B1(d,o.transformResults||[])}(i,e))):[]}function ax(s,e){return{documents:[Vv(s,e.path)]}}function lx(s,e){const i={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=Vv(s,o);const h=function(p){if(p.length!==0)return jv(Un.create(p,"and"))}(e.filters);h&&(i.structuredQuery.where=h);const d=function(p){if(p.length!==0)return p.map(T=>function(w){return{field:ua(w.field),direction:cx(w.dir)}}(T))}(e.orderBy);d&&(i.structuredQuery.orderBy=d);const g=ed(s,e.limit);return g!==null&&(i.structuredQuery.limit=g),e.startAt&&(i.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(i.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{gt:i,parent:o}}function ox(s){let e=nx(s.parent);const i=s.structuredQuery,a=i.from?i.from.length:0;let o=null;if(a>0){Gt(a===1,65062);const T=i.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let h=[];i.where&&(h=function(A){const w=Ov(A);return w instanceof Un&&cv(w)?w.getFilters():[w]}(i.where));let d=[];i.orderBy&&(d=function(A){return A.map(w=>function(B){return new tc(ca(B.field),function(Y){switch(Y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(B.direction))}(w))}(i.orderBy));let g=null;i.limit&&(g=function(A){let w;return w=typeof A=="object"?A.value:A,oc(w)?null:w}(i.limit));let _=null;i.startAt&&(_=function(A){const w=!!A.before,k=A.values||[];return new Wu(k,w)}(i.startAt));let p=null;return i.endAt&&(p=function(A){const w=!A.before,k=A.values||[];return new Wu(k,w)}(i.endAt)),R1(e,o,d,h,g,"F",_,p)}function ux(s,e){const i=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:o})}}(e.purpose);return i==null?null:{"goog-listen-tags":i}}function Ov(s){return s.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=ca(i.unaryFilter.field);return _e.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=ca(i.unaryFilter.field);return _e.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=ca(i.unaryFilter.field);return _e.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=ca(i.unaryFilter.field);return _e.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}}(s):s.fieldFilter!==void 0?function(i){return _e.create(ca(i.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(i){return Un.create(i.compositeFilter.filters.map(a=>Ov(a)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return _t(1026)}}(i.compositeFilter.op))}(s):_t(30097,{filter:s})}function cx(s){return Z1[s]}function hx(s){return J1[s]}function fx(s){return W1[s]}function ua(s){return{fieldPath:s.canonicalString()}}function ca(s){return Pe.fromServerFormat(s.fieldPath)}function jv(s){return s instanceof _e?function(i){if(i.op==="=="){if(Fy(i.value))return{unaryFilter:{field:ua(i.field),op:"IS_NAN"}};if(Qy(i.value))return{unaryFilter:{field:ua(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(Fy(i.value))return{unaryFilter:{field:ua(i.field),op:"IS_NOT_NAN"}};if(Qy(i.value))return{unaryFilter:{field:ua(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ua(i.field),op:hx(i.op),value:i.value}}}(s):s instanceof Un?function(i){const a=i.getFilters().map(o=>jv(o));return a.length===1?a[0]:{compositeFilter:{op:fx(i.op),filters:a}}}(s):_t(54877,{filter:s})}function dx(s){const e=[];return s.fields.forEach(i=>e.push(i.canonicalString())),{fieldPaths:e}}function kv(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,i,a,o,h=xt.min(),d=xt.min(),g=ze.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=_}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e){this.wt=e}}function gx(s){const e=ox({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?td(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.Cn=new yx}addToCollectionParentIndex(e,i){return this.Cn.add(i),tt.resolve()}getCollectionParents(e,i){return tt.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return tt.resolve()}deleteFieldIndex(e,i){return tt.resolve()}deleteAllFieldIndexes(e){return tt.resolve()}createTargetIndexes(e,i){return tt.resolve()}getDocumentsMatchingTarget(e,i){return tt.resolve(null)}getIndexType(e,i){return tt.resolve(0)}getFieldIndexes(e,i){return tt.resolve([])}getNextCollectionGroupToUpdate(e){return tt.resolve(null)}getMinOffset(e,i){return tt.resolve(pr.min())}getMinOffsetFromCollectionGroup(e,i){return tt.resolve(pr.min())}updateCollectionGroup(e,i,a){return tt.resolve()}updateIndexEntries(e,i){return tt.resolve()}}class yx{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i]||new we(ee.comparator),h=!o.has(a);return this.index[i]=o.add(a),h}has(e){const i=e.lastSegment(),a=e.popLast(),o=this.index[i];return o&&o.has(a)}getEntries(e){return(this.index[e]||new we(ee.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uv=41943040;class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(Uv,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new _a(0)}static lr(){return new _a(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="LruGarbageCollector",vx=1048576;function o0([s,e],[i,a]){const o=Ct(s,i);return o===0?Ct(e,a):o}class _x{constructor(e){this.Er=e,this.buffer=new we(o0),this.dr=0}Ar(){return++this.dr}Rr(e){const i=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();o0(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class bx{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ot(l0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){wa(i)?ot(l0,"Ignoring IndexedDB error during garbage collection: ",i):await Sa(i)}await this.mr(3e5)})}}class Ex{constructor(e,i){this.gr=e,this.params=i}calculateTargetCount(e,i){return this.gr.pr(e).next(a=>Math.floor(i/100*a))}nthSequenceNumber(e,i){if(i===0)return tt.resolve(lc.le);const a=new _x(i);return this.gr.forEachTarget(e,o=>a.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>a.Rr(o))).next(()=>a.maxValue)}removeTargets(e,i,a){return this.gr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.gr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(ot("LruGarbageCollector","Garbage collection skipped; disabled"),tt.resolve(a0)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(ot("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),a0):this.wr(e,i))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,i){let a,o,h,d,g,_,p;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(ot("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,d=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(a=A,g=Date.now(),this.removeTargets(e,a,i))).next(A=>(h=A,_=Date.now(),this.removeOrphanedDocuments(e,a))).next(A=>(p=Date.now(),la()<=Lt.DEBUG&&ot("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-T}ms
	Determined least recently used ${o} in `+(g-d)+`ms
	Removed ${h} targets in `+(_-g)+`ms
	Removed ${A} documents in `+(p-_)+`ms
Total Duration: ${p-T}ms`),tt.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:h,documentsRemoved:A})))}}function Tx(s,e){return new Ex(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(){this.changes=new fs(e=>e.toString(),(e,i)=>e.isEqual(i)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,Fe.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?tt.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,i,a,o){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next(o=>(a=o,this.remoteDocumentCache.getEntry(e,i))).next(o=>(a!==null&&Kl(a.mutation,o,mn.empty(),Se.now()),o))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.getLocalViewOfDocuments(e,a,Mt()).next(()=>a))}getLocalViewOfDocuments(e,i,a=Mt()){const o=os();return this.populateOverlays(e,o,i).next(()=>this.computeViews(e,i,o,a).next(h=>{let d=zl();return h.forEach((g,_)=>{d=d.insert(g,_.overlayedDocument)}),d}))}getOverlayedDocuments(e,i){const a=os();return this.populateOverlays(e,a,i).next(()=>this.computeViews(e,i,a,Mt()))}populateOverlays(e,i,a){const o=[];return a.forEach(h=>{i.has(h)||o.push(h)}),this.documentOverlayCache.getOverlays(e,o).next(h=>{h.forEach((d,g)=>{i.set(d,g)})})}computeViews(e,i,a,o){let h=ji();const d=Yl(),g=function(){return Yl()}();return i.forEach((_,p)=>{const T=a.get(p.key);o.has(p.key)&&(T===void 0||T.mutation instanceof xr)?h=h.insert(p.key,p):T!==void 0?(d.set(p.key,T.mutation.getFieldMask()),Kl(T.mutation,p,T.mutation.getFieldMask(),Se.now())):d.set(p.key,mn.empty())}),this.recalculateAndSaveOverlays(e,h).next(_=>(_.forEach((p,T)=>d.set(p,T)),i.forEach((p,T)=>{var A;return g.set(p,new Ax(T,(A=d.get(p))!==null&&A!==void 0?A:null))}),g))}recalculateAndSaveOverlays(e,i){const a=Yl();let o=new se((d,g)=>d-g),h=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next(d=>{for(const g of d)g.keys().forEach(_=>{const p=i.get(_);if(p===null)return;let T=a.get(_)||mn.empty();T=g.applyToLocalView(p,T),a.set(_,T);const A=(o.get(g.batchId)||Mt()).add(_);o=o.insert(g.batchId,A)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const _=g.getNext(),p=_.key,T=_.value,A=_v();T.forEach(w=>{if(!h.has(w)){const k=Sv(i.get(w),a.get(w));k!==null&&A.set(w,k),h=h.add(w)}}),d.push(this.documentOverlayCache.saveOverlays(e,p,A))}return tt.waitFor(d)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,i,a,o){return function(d){return pt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):mv(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,o):this.getDocumentsMatchingCollectionQuery(e,i,a,o)}getNextDocuments(e,i,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,o).next(h=>{const d=o-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,o-h.size):tt.resolve(os());let g=Zl,_=h;return d.next(p=>tt.forEach(p,(T,A)=>(g<A.largestBatchId&&(g=A.largestBatchId),h.get(T)?tt.resolve():this.remoteDocumentCache.getEntry(e,T).next(w=>{_=_.insert(T,w)}))).next(()=>this.populateOverlays(e,p,h)).next(()=>this.computeViews(e,_,p,Mt())).next(T=>({batchId:g,changes:vv(T)})))})}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new pt(i)).next(a=>{let o=zl();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o})}getDocumentsMatchingCollectionGroupQuery(e,i,a,o){const h=i.collectionGroup;let d=zl();return this.indexManager.getCollectionParents(e,h).next(g=>tt.forEach(g,_=>{const p=function(A,w){return new ro(w,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(i,_.child(h));return this.getDocumentsMatchingCollectionQuery(e,p,a,o).next(T=>{T.forEach((A,w)=>{d=d.insert(A,w)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,i,a,o){let h;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next(d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,h,o))).next(d=>{h.forEach((_,p)=>{const T=p.getKey();d.get(T)===null&&(d=d.insert(T,Fe.newInvalidDocument(T)))});let g=zl();return d.forEach((_,p)=>{const T=h.get(_);T!==void 0&&Kl(T.mutation,p,mn.empty(),Se.now()),hc(i,p)&&(g=g.insert(_,p))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,i){return tt.resolve(this.kr.get(i))}saveBundleMetadata(e,i){return this.kr.set(i.id,function(o){return{id:o.id,version:o.version,createTime:ri(o.createTime)}}(i)),tt.resolve()}getNamedQuery(e,i){return tt.resolve(this.qr.get(i))}saveNamedQuery(e,i){return this.qr.set(i.name,function(o){return{name:o.name,query:gx(o.bundledQuery),readTime:ri(o.readTime)}}(i)),tt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.overlays=new se(pt.comparator),this.Qr=new Map}getOverlay(e,i){return tt.resolve(this.overlays.get(i))}getOverlays(e,i){const a=os();return tt.forEach(i,o=>this.getOverlay(e,o).next(h=>{h!==null&&a.set(o,h)})).next(()=>a)}saveOverlays(e,i,a){return a.forEach((o,h)=>{this.St(e,i,h)}),tt.resolve()}removeOverlaysForBatchId(e,i,a){const o=this.Qr.get(a);return o!==void 0&&(o.forEach(h=>this.overlays=this.overlays.remove(h)),this.Qr.delete(a)),tt.resolve()}getOverlaysForCollection(e,i,a){const o=os(),h=i.length+1,d=new pt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const _=g.getNext().value,p=_.getKey();if(!i.isPrefixOf(p.path))break;p.path.length===h&&_.largestBatchId>a&&o.set(_.getKey(),_)}return tt.resolve(o)}getOverlaysForCollectionGroup(e,i,a,o){let h=new se((p,T)=>p-T);const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===i&&p.largestBatchId>a){let T=h.get(p.largestBatchId);T===null&&(T=os(),h=h.insert(p.largestBatchId,T)),T.set(p.getKey(),p)}}const g=os(),_=h.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((p,T)=>g.set(p,T)),!(g.size()>=o)););return tt.resolve(g)}St(e,i,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.Qr.get(o.largestBatchId).delete(a.key);this.Qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new F1(i,a));let h=this.Qr.get(i);h===void 0&&(h=Mt(),this.Qr.set(i,h)),this.Qr.set(i,h.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.sessionToken=ze.EMPTY_BYTE_STRING}getSessionToken(e){return tt.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,tt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this.$r=new we(Ve.Ur),this.Kr=new we(Ve.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,i){const a=new Ve(e,i);this.$r=this.$r.add(a),this.Kr=this.Kr.add(a)}Gr(e,i){e.forEach(a=>this.addReference(a,i))}removeReference(e,i){this.zr(new Ve(e,i))}jr(e,i){e.forEach(a=>this.removeReference(a,i))}Hr(e){const i=new pt(new ee([])),a=new Ve(i,e),o=new Ve(i,e+1),h=[];return this.Kr.forEachInRange([a,o],d=>{this.zr(d),h.push(d.key)}),h}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const i=new pt(new ee([])),a=new Ve(i,e),o=new Ve(i,e+1);let h=Mt();return this.Kr.forEachInRange([a,o],d=>{h=h.add(d.key)}),h}containsKey(e){const i=new Ve(e,0),a=this.$r.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class Ve{constructor(e,i){this.key=e,this.Zr=i}static Ur(e,i){return pt.comparator(e.key,i.key)||Ct(e.Zr,i.Zr)}static Wr(e,i){return Ct(e.Zr,i.Zr)||pt.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.nr=1,this.Xr=new we(Ve.Ur)}checkEmpty(e){return tt.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,o){const h=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Q1(h,i,a,o);this.mutationQueue.push(d);for(const g of o)this.Xr=this.Xr.add(new Ve(g.key,h)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return tt.resolve(d)}lookupMutationBatch(e,i){return tt.resolve(this.ei(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,o=this.ti(a),h=o<0?0:o;return tt.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return tt.resolve(this.mutationQueue.length===0?yd:this.nr-1)}getAllMutationBatches(e){return tt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new Ve(i,0),o=new Ve(i,Number.POSITIVE_INFINITY),h=[];return this.Xr.forEachInRange([a,o],d=>{const g=this.ei(d.Zr);h.push(g)}),tt.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new we(Ct);return i.forEach(o=>{const h=new Ve(o,0),d=new Ve(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([h,d],g=>{a=a.add(g.Zr)})}),tt.resolve(this.ni(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,o=a.length+1;let h=a;pt.isDocumentKey(h)||(h=h.child(""));const d=new Ve(new pt(h),0);let g=new we(Ct);return this.Xr.forEachWhile(_=>{const p=_.key.path;return!!a.isPrefixOf(p)&&(p.length===o&&(g=g.add(_.Zr)),!0)},d),tt.resolve(this.ni(g))}ni(e){const i=[];return e.forEach(a=>{const o=this.ei(a);o!==null&&i.push(o)}),i}removeMutationBatch(e,i){Gt(this.ri(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Xr;return tt.forEach(i.mutations,o=>{const h=new Ve(o.key,i.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=a})}sr(e){}containsKey(e,i){const a=new Ve(i,0),o=this.Xr.firstAfterOrEqual(a);return tt.resolve(i.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,tt.resolve()}ri(e,i){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const i=this.ti(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this.ii=e,this.docs=function(){return new se(pt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,o=this.docs.get(a),h=o?o.size:0,d=this.ii(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return tt.resolve(a?a.document.mutableCopy():Fe.newInvalidDocument(i))}getEntries(e,i){let a=ji();return i.forEach(o=>{const h=this.docs.get(o);a=a.insert(o,h?h.document.mutableCopy():Fe.newInvalidDocument(o))}),tt.resolve(a)}getDocumentsMatchingQuery(e,i,a,o){let h=ji();const d=i.path,g=new pt(d.child("__id-9223372036854775808__")),_=this.docs.getIteratorFrom(g);for(;_.hasNext();){const{key:p,value:{document:T}}=_.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||s1(r1(T),a)<=0||(o.has(T.key)||hc(i,T))&&(h=h.insert(T.key,T.mutableCopy()))}return tt.resolve(h)}getAllFromCollectionGroup(e,i,a,o){_t(9500)}si(e,i){return tt.forEach(this.docs,a=>i(a))}newChangeBuffer(e){return new Ix(this)}getSize(e){return tt.resolve(this.size)}}class Ix extends xx{constructor(e){super(),this.Br=e}applyChanges(e){const i=[];return this.changes.forEach((a,o)=>{o.isValidDocument()?i.push(this.Br.addEntry(e,o)):this.Br.removeEntry(a)}),tt.waitFor(i)}getFromCache(e,i){return this.Br.getEntry(e,i)}getAllFromCache(e,i){return this.Br.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e){this.persistence=e,this.oi=new fs(i=>bd(i),Ed),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this._i=0,this.ai=new Cd,this.targetCount=0,this.ui=_a.cr()}forEachTarget(e,i){return this.oi.forEach((a,o)=>i(o)),tt.resolve()}getLastRemoteSnapshotVersion(e){return tt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return tt.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),tt.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this._i&&(this._i=i),tt.resolve()}Tr(e){this.oi.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ui=new _a(i),this.highestTargetId=i),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,i){return this.Tr(i),this.targetCount+=1,tt.resolve()}updateTargetData(e,i){return this.Tr(i),tt.resolve()}removeTargetData(e,i){return this.oi.delete(i.target),this.ai.Hr(i.targetId),this.targetCount-=1,tt.resolve()}removeTargets(e,i,a){let o=0;const h=[];return this.oi.forEach((d,g)=>{g.sequenceNumber<=i&&a.get(g.targetId)===null&&(this.oi.delete(d),h.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),tt.waitFor(h).next(()=>o)}getTargetCount(e){return tt.resolve(this.targetCount)}getTargetData(e,i){const a=this.oi.get(i)||null;return tt.resolve(a)}addMatchingKeys(e,i,a){return this.ai.Gr(i,a),tt.resolve()}removeMatchingKeys(e,i,a){this.ai.jr(i,a);const o=this.persistence.referenceDelegate,h=[];return o&&i.forEach(d=>{h.push(o.markPotentiallyOrphaned(e,d))}),tt.waitFor(h)}removeMatchingKeysForTargetId(e,i){return this.ai.Hr(i),tt.resolve()}getMatchingKeysForTargetId(e,i){const a=this.ai.Yr(i);return tt.resolve(a)}containsKey(e,i){return tt.resolve(this.ai.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,i){this.ci={},this.overlays={},this.li=new lc(0),this.hi=!1,this.hi=!0,this.Pi=new Cx,this.referenceDelegate=e(this),this.Ti=new Vx(this),this.indexManager=new px,this.remoteDocumentCache=function(o){return new Dx(o)}(a=>this.referenceDelegate.Ii(a)),this.serializer=new mx(i),this.Ei=new wx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new Rx,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ci[e.toKey()];return a||(a=new Nx(i,this.referenceDelegate),this.ci[e.toKey()]=a),a}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,i,a){ot("MemoryPersistence","Starting transaction:",e);const o=new Mx(this.li.next());return this.referenceDelegate.di(),a(o).next(h=>this.referenceDelegate.Ai(o).next(()=>h)).toPromise().then(h=>(o.raiseOnCommittedEvent(),h))}Ri(e,i){return tt.or(Object.values(this.ci).map(a=>()=>a.containsKey(e,i)))}}class Mx extends l1{constructor(e){super(),this.currentSequenceNumber=e}}class Nd{constructor(e){this.persistence=e,this.Vi=new Cd,this.mi=null}static fi(e){return new Nd(e)}get gi(){if(this.mi)return this.mi;throw _t(60996)}addReference(e,i,a){return this.Vi.addReference(a,i),this.gi.delete(a.toString()),tt.resolve()}removeReference(e,i,a){return this.Vi.removeReference(a,i),this.gi.add(a.toString()),tt.resolve()}markPotentiallyOrphaned(e,i){return this.gi.add(i.toString()),tt.resolve()}removeTarget(e,i){this.Vi.Hr(i.targetId).forEach(o=>this.gi.add(o.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next(o=>{o.forEach(h=>this.gi.add(h.toString()))}).next(()=>a.removeTargetData(e,i))}di(){this.mi=new Set}Ai(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tt.forEach(this.gi,a=>{const o=pt.fromPath(a);return this.pi(e,o).next(h=>{h||i.removeEntry(o,xt.min())})}).next(()=>(this.mi=null,i.apply(e)))}updateLimboDocument(e,i){return this.pi(e,i).next(a=>{a?this.gi.delete(i.toString()):this.gi.add(i.toString())})}Ii(e){return 0}pi(e,i){return tt.or([()=>tt.resolve(this.Vi.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ri(e,i)])}}class ic{constructor(e,i){this.persistence=e,this.yi=new fs(a=>c1(a.path),(a,o)=>a.isEqual(o)),this.garbageCollector=Tx(this,i)}static fi(e,i){return new ic(e,i)}di(){}Ai(e){return tt.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}pr(e){const i=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(a=>i.next(o=>a+o))}br(e){let i=0;return this.yr(e,a=>{i++}).next(()=>i)}yr(e,i){return tt.forEach(this.yi,(a,o)=>this.Dr(e,a,o).next(h=>h?tt.resolve():i(o)))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const o=this.persistence.getRemoteDocumentCache(),h=o.newChangeBuffer();return o.si(e,d=>this.Dr(e,d,i).next(g=>{g||(a++,h.removeEntry(d,xt.min()))})).next(()=>h.apply(e)).next(()=>a)}markPotentiallyOrphaned(e,i){return this.yi.set(i,e.currentSequenceNumber),tt.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.yi.set(a,e.currentSequenceNumber),tt.resolve()}removeReference(e,i,a){return this.yi.set(a,e.currentSequenceNumber),tt.resolve()}updateLimboDocument(e,i){return this.yi.set(i,e.currentSequenceNumber),tt.resolve()}Ii(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=Bu(e.data.value)),i}Dr(e,i,a){return tt.or([()=>this.persistence.Ri(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const o=this.yi.get(i);return tt.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,i,a,o){this.targetId=e,this.fromCache=i,this.ds=a,this.As=o}static Rs(e,i){let a=Mt(),o=Mt();for(const h of i.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:o=o.add(h.doc.key)}return new Dd(e,i.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return DE()?8:o1(CE())>0?6:4}()}initialize(e,i){this.ys=e,this.indexManager=i,this.Vs=!0}getDocumentsMatchingQuery(e,i,a,o){const h={result:null};return this.ws(e,i).next(d=>{h.result=d}).next(()=>{if(!h.result)return this.bs(e,i,o,a).next(d=>{h.result=d})}).next(()=>{if(h.result)return;const d=new Ox;return this.Ss(e,i,d).next(g=>{if(h.result=g,this.fs)return this.Ds(e,i,d,g.size)})}).next(()=>h.result)}Ds(e,i,a,o){return a.documentReadCount<this.gs?(la()<=Lt.DEBUG&&ot("QueryEngine","SDK will not create cache indexes for query:",oa(i),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),tt.resolve()):(la()<=Lt.DEBUG&&ot("QueryEngine","Query:",oa(i),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ps*o?(la()<=Lt.DEBUG&&ot("QueryEngine","The SDK decides to create cache indexes for query:",oa(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(i))):tt.resolve())}ws(e,i){if($y(i))return tt.resolve(null);let a=ii(i);return this.indexManager.getIndexType(e,a).next(o=>o===0?null:(i.limit!==null&&o===1&&(i=td(i,null,"F"),a=ii(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next(h=>{const d=Mt(...h);return this.ys.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,a).next(_=>{const p=this.vs(i,g);return this.Cs(i,p,d,_.readTime)?this.ws(e,td(i,null,"F")):this.Fs(e,p,i,_)}))})))}bs(e,i,a,o){return $y(i)||o.isEqual(xt.min())?tt.resolve(null):this.ys.getDocuments(e,a).next(h=>{const d=this.vs(i,h);return this.Cs(i,d,a,o)?tt.resolve(null):(la()<=Lt.DEBUG&&ot("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),oa(i)),this.Fs(e,d,i,i1(o,Zl)).next(g=>g))})}vs(e,i){let a=new we(pv(e));return i.forEach((o,h)=>{hc(e,h)&&(a=a.add(h))}),a}Cs(e,i,a,o){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const h=e.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(o)>0)}Ss(e,i,a){return la()<=Lt.DEBUG&&ot("QueryEngine","Using full collection scan to execute query:",oa(i)),this.ys.getDocumentsMatchingQuery(e,i,pr.min(),a)}Fs(e,i,a,o){return this.ys.getDocumentsMatchingQuery(e,a,o).next(h=>(i.forEach(d=>{h=h.insert(d.key,d)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="LocalStore",kx=3e8;class Ux{constructor(e,i,a,o){this.persistence=e,this.Ms=i,this.serializer=o,this.xs=new se(Ct),this.Os=new fs(h=>bd(h),Ed),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(a)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sx(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>e.collect(i,this.xs))}}function Lx(s,e,i,a){return new Ux(s,e,i,a)}async function Pv(s,e){const i=At(s);return await i.persistence.runTransaction("Handle user change","readonly",a=>{let o;return i.mutationQueue.getAllMutationBatches(a).next(h=>(o=h,i.Ls(e),i.mutationQueue.getAllMutationBatches(a))).next(h=>{const d=[],g=[];let _=Mt();for(const p of o){d.push(p.batchId);for(const T of p.mutations)_=_.add(T.key)}for(const p of h){g.push(p.batchId);for(const T of p.mutations)_=_.add(T.key)}return i.localDocuments.getDocuments(a,_).next(p=>({ks:p,removedBatchIds:d,addedBatchIds:g}))})})}function Px(s,e){const i=At(s);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const o=e.batch.keys(),h=i.Bs.newChangeBuffer({trackRemovals:!0});return function(g,_,p,T){const A=p.batch,w=A.keys();let k=tt.resolve();return w.forEach(B=>{k=k.next(()=>T.getEntry(_,B)).next(G=>{const Y=p.docVersions.get(B);Gt(Y!==null,48541),G.version.compareTo(Y)<0&&(A.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),T.addEntry(G)))})}),k.next(()=>g.mutationQueue.removeMutationBatch(_,A))}(i,a,e,h).next(()=>h.apply(a)).next(()=>i.mutationQueue.performConsistencyCheck(a)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(g){let _=Mt();for(let p=0;p<g.mutationResults.length;++p)g.mutationResults[p].transformResults.length>0&&(_=_.add(g.batch.mutations[p].key));return _}(e))).next(()=>i.localDocuments.getDocuments(a,o))})}function zv(s){const e=At(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",i=>e.Ti.getLastRemoteSnapshotVersion(i))}function zx(s,e){const i=At(s),a=e.snapshotVersion;let o=i.xs;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const d=i.Bs.newChangeBuffer({trackRemovals:!0});o=i.xs;const g=[];e.targetChanges.forEach((T,A)=>{const w=o.get(A);if(!w)return;g.push(i.Ti.removeMatchingKeys(h,T.removedDocuments,A).next(()=>i.Ti.addMatchingKeys(h,T.addedDocuments,A)));let k=w.withSequenceNumber(h.currentSequenceNumber);e.targetMismatches.get(A)!==null?k=k.withResumeToken(ze.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):T.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(T.resumeToken,a)),o=o.insert(A,k),function(G,Y,ft){return G.resumeToken.approximateByteSize()===0||Y.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=kx?!0:ft.addedDocuments.size+ft.modifiedDocuments.size+ft.removedDocuments.size>0}(w,k,T)&&g.push(i.Ti.updateTargetData(h,k))});let _=ji(),p=Mt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,T))}),g.push(Bx(h,d,e.documentUpdates).next(T=>{_=T.qs,p=T.Qs})),!a.isEqual(xt.min())){const T=i.Ti.getLastRemoteSnapshotVersion(h).next(A=>i.Ti.setTargetsMetadata(h,h.currentSequenceNumber,a));g.push(T)}return tt.waitFor(g).next(()=>d.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,_,p)).next(()=>_)}).then(h=>(i.xs=o,h))}function Bx(s,e,i){let a=Mt(),o=Mt();return i.forEach(h=>a=a.add(h)),e.getEntries(s,a).next(h=>{let d=ji();return i.forEach((g,_)=>{const p=h.get(g);_.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(g)),_.isNoDocument()&&_.version.isEqual(xt.min())?(e.removeEntry(g,_.readTime),d=d.insert(g,_)):!p.isValidDocument()||_.version.compareTo(p.version)>0||_.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(_),d=d.insert(g,_)):ot(Id,"Ignoring outdated watch update for ",g,". Current version:",p.version," Watch version:",_.version)}),{qs:d,Qs:o}})}function qx(s,e){const i=At(s);return i.persistence.runTransaction("Get next mutation batch","readonly",a=>(e===void 0&&(e=yd),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function Hx(s,e){const i=At(s);return i.persistence.runTransaction("Allocate target","readwrite",a=>{let o;return i.Ti.getTargetData(a,e).next(h=>h?(o=h,tt.resolve(o)):i.Ti.allocateTargetId(a).next(d=>(o=new cr(e,d,"TargetPurposeListen",a.currentSequenceNumber),i.Ti.addTargetData(a,o).next(()=>o))))}).then(a=>{const o=i.xs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(i.xs=i.xs.insert(a.targetId,a),i.Os.set(e,a.targetId)),a})}async function sd(s,e,i){const a=At(s),o=a.xs.get(e),h=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",h,d=>a.persistence.referenceDelegate.removeTarget(d,o))}catch(d){if(!wa(d))throw d;ot(Id,`Failed to update sequence numbers for target ${e}: ${d}`)}a.xs=a.xs.remove(e),a.Os.delete(o.target)}function u0(s,e,i){const a=At(s);let o=xt.min(),h=Mt();return a.persistence.runTransaction("Execute query","readwrite",d=>function(_,p,T){const A=At(_),w=A.Os.get(T);return w!==void 0?tt.resolve(A.xs.get(w)):A.Ti.getTargetData(p,T)}(a,d,ii(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Ti.getMatchingKeysForTargetId(d,g.targetId).next(_=>{h=_})}).next(()=>a.Ms.getDocumentsMatchingQuery(d,e,i?o:xt.min(),i?h:Mt())).next(g=>(Gx(a,N1(e),g),{documents:g,$s:h})))}function Gx(s,e,i){let a=s.Ns.get(e)||xt.min();i.forEach((o,h)=>{h.readTime.compareTo(a)>0&&(a=h.readTime)}),s.Ns.set(e,a)}class c0{constructor(){this.activeTargetIds=j1()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qx{constructor(){this.xo=new c0,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,i,a){this.Oo[e]=i}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new c0,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="ConnectivityMonitor";class f0{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ot(h0,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ot(h0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu=null;function ad(){return Pu===null?Pu=function(){return 268435456+Math.round(2147483648*Math.random())}():Pu++,"0x"+Pu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="RestConnection",Yx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kx{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=i+"://"+e.host,this.Wo=`projects/${a}/databases/${o}`,this.Go=this.databaseId.database===Zu?`project_id=${a}`:`project_id=${a}&database_id=${o}`}zo(e,i,a,o,h){const d=ad(),g=this.jo(e,i.toUriEncodedString());ot(Lf,`Sending RPC '${e}' ${d}:`,g,a);const _={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(_,o,h);const{host:p}=new URL(g),T=md(p);return this.Jo(e,g,_,a,T).then(A=>(ot(Lf,`Received RPC '${e}' ${d}: `,A),A),A=>{throw ga(Lf,`RPC '${e}' ${d} failed with error: `,A,"url: ",g,"request:",a),A})}Yo(e,i,a,o,h,d){return this.zo(e,i,a,o,h)}Ho(e,i,a){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Aa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,h)=>e[h]=o),a&&a.headers.forEach((o,h)=>e[h]=o)}jo(e,i){const a=Yx[e];return`${this.Ko}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ge="WebChannelConnection";class $x extends Kx{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,o,h){const d=ad();return new Promise((g,_)=>{const p=new H0;p.setWithCredentials(!0),p.listenOnce(G0.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case zu.NO_ERROR:const A=p.getResponseJson();ot(Ge,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(A)),g(A);break;case zu.TIMEOUT:ot(Ge,`RPC '${e}' ${d} timed out`),_(new ut(et.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const w=p.getStatus();if(ot(Ge,`RPC '${e}' ${d} failed with status:`,w,"response text:",p.getResponseText()),w>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);const B=k==null?void 0:k.error;if(B&&B.status&&B.message){const G=function(ft){const at=ft.toLowerCase().replace(/_/g,"-");return Object.values(et).indexOf(at)>=0?at:et.UNKNOWN}(B.status);_(new ut(G,B.message))}else _(new ut(et.UNKNOWN,"Server responded with status "+p.getStatus()))}else _(new ut(et.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{h_:e,streamId:d,P_:p.getLastErrorCode(),T_:p.getLastError()})}}finally{ot(Ge,`RPC '${e}' ${d} completed.`)}});const T=JSON.stringify(o);ot(Ge,`RPC '${e}' ${d} sending request:`,o),p.send(i,"POST",T,a,15)})}I_(e,i,a){const o=ad(),h=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Y0(),g=F0(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(_.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(_.useFetchStreams=!0),this.Ho(_.initMessageHeaders,i,a),_.encodeInitMessageHeaders=!0;const T=h.join("");ot(Ge,`Creating RPC '${e}' stream ${o}: ${T}`,_);const A=d.createWebChannel(T,_);this.E_(A);let w=!1,k=!1;const B=new Xx({Zo:Y=>{k?ot(Ge,`Not sending because RPC '${e}' stream ${o} is closed:`,Y):(w||(ot(Ge,`Opening RPC '${e}' stream ${o} transport.`),A.open(),w=!0),ot(Ge,`RPC '${e}' stream ${o} sending:`,Y),A.send(Y))},Xo:()=>A.close()}),G=(Y,ft,at)=>{Y.listen(ft,lt=>{try{at(lt)}catch(X){setTimeout(()=>{throw X},0)}})};return G(A,Pl.EventType.OPEN,()=>{k||(ot(Ge,`RPC '${e}' stream ${o} transport opened.`),B.__())}),G(A,Pl.EventType.CLOSE,()=>{k||(k=!0,ot(Ge,`RPC '${e}' stream ${o} transport closed`),B.u_(),this.d_(A))}),G(A,Pl.EventType.ERROR,Y=>{k||(k=!0,ga(Ge,`RPC '${e}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),B.u_(new ut(et.UNAVAILABLE,"The operation could not be completed")))}),G(A,Pl.EventType.MESSAGE,Y=>{var ft;if(!k){const at=Y.data[0];Gt(!!at,16349);const lt=at,X=(lt==null?void 0:lt.error)||((ft=lt[0])===null||ft===void 0?void 0:ft.error);if(X){ot(Ge,`RPC '${e}' stream ${o} received error:`,X);const Z=X.status;let dt=function(D){const O=ve[D];if(O!==void 0)return Rv(O)}(Z),N=X.message;dt===void 0&&(dt=et.INTERNAL,N="Unknown error status: "+Z+" with message "+X.message),k=!0,B.u_(new ut(dt,N)),A.close()}else ot(Ge,`RPC '${e}' stream ${o} received:`,at),B.c_(at)}}),G(g,Q0.STAT_EVENT,Y=>{Y.stat===Yf.PROXY?ot(Ge,`RPC '${e}' stream ${o} detected buffering proxy`):Y.stat===Yf.NOPROXY&&ot(Ge,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{B.a_()},0),B}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(i=>i===e)}}function Pf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(s){return new tx(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,i,a=1e3,o=1.5,h=6e4){this.xi=e,this.timerId=i,this.A_=a,this.R_=o,this.V_=h,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const i=Math.floor(this.m_+this.w_()),a=Math.max(0,Date.now()-this.g_),o=Math.max(0,i-a);o>0&&ot("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="PersistentStream";class qv{constructor(e,i,a,o,h,d,g,_){this.xi=e,this.S_=a,this.D_=o,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=_,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Bv(e,i)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,i){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():i&&i.code===et.RESOURCE_EXHAUSTED?(Oi(i.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):i&&i.code===et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(i)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),i=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,o])=>{this.v_===i&&this.z_(a,o)},a=>{e(()=>{const o=new ut(et.UNKNOWN,"Fetching auth token failed: "+a.message);return this.j_(o)})})}z_(e,i){const a=this.G_(this.v_);this.stream=this.H_(e,i),this.stream.e_(()=>{a(()=>this.listener.e_())}),this.stream.n_(()=>{a(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{a(()=>this.j_(o))}),this.stream.onMessage(o=>{a(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ot(d0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return i=>{this.xi.enqueueAndForget(()=>this.v_===e?i():(ot(d0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zx extends qv{constructor(e,i,a,o,h,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}H_(e,i){return this.connection.I_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const i=ix(this.serializer,e),a=function(h){if(!("targetChange"in h))return xt.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?xt.min():d.readTime?ri(d.readTime):xt.min()}(e);return this.listener.Y_(i,a)}Z_(e){const i={};i.database=rd(this.serializer),i.addTarget=function(h,d){let g;const _=d.target;if(g=Jf(_)?{documents:ax(h,_)}:{query:lx(h,_).gt},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=Dv(h,d.resumeToken);const p=ed(h,d.expectedCount);p!==null&&(g.expectedCount=p)}else if(d.snapshotVersion.compareTo(xt.min())>0){g.readTime=nc(h,d.snapshotVersion.toTimestamp());const p=ed(h,d.expectedCount);p!==null&&(g.expectedCount=p)}return g}(this.serializer,e);const a=ux(this.serializer,e);a&&(i.labels=a),this.Q_(i)}X_(e){const i={};i.database=rd(this.serializer),i.removeTarget=e,this.Q_(i)}}class Jx extends qv{constructor(e,i,a,o,h,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,o,d),this.serializer=h}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,i){return this.connection.I_("Write",e,i)}J_(e){return Gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const i=sx(e.writeResults,e.commitTime),a=ri(e.commitTime);return this.listener.ra(a,i)}ia(){const e={};e.database=rd(this.serializer),this.Q_(e)}ta(e){const i={streamToken:this.lastStreamToken,writes:e.map(a=>rx(this.serializer,a))};this.Q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{}class tA extends Wx{constructor(e,i,a,o){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new ut(et.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,i,a,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.zo(e,nd(i,a),o,h,d)).catch(h=>{throw h.name==="FirebaseError"?(h.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ut(et.UNKNOWN,h.toString())})}Yo(e,i,a,o,h){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Yo(e,nd(i,a),o,d,g,h)).catch(d=>{throw d.name==="FirebaseError"?(d.code===et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ut(et.UNKNOWN,d.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class eA{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Oi(i),this.ua=!1):ot("OnlineStateTracker",i)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="RemoteStore";class nA{constructor(e,i,a,o,h){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=h,this.Ra.No(d=>{a.enqueueAndForget(async()=>{ds(this)&&(ot(cs,"Restarting streams for network reachability change."),await async function(_){const p=At(_);p.da.add(4),await lo(p),p.Va.set("Unknown"),p.da.delete(4),await pc(p)}(this))})}),this.Va=new eA(a,o)}}async function pc(s){if(ds(s))for(const e of s.Aa)await e(!0)}async function lo(s){for(const e of s.Aa)await e(!1)}function Hv(s,e){const i=At(s);i.Ea.has(e.targetId)||(i.Ea.set(e.targetId,e),jd(i)?Od(i):Ra(i).N_()&&Md(i,e))}function Vd(s,e){const i=At(s),a=Ra(i);i.Ea.delete(e),a.N_()&&Gv(i,e),i.Ea.size===0&&(a.N_()?a.k_():ds(i)&&i.Va.set("Unknown"))}function Md(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(xt.min())>0){const i=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}Ra(s).Z_(e)}function Gv(s,e){s.ma.Ke(e),Ra(s).X_(e)}function Od(s){s.ma=new $1({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),Ra(s).start(),s.Va.ca()}function jd(s){return ds(s)&&!Ra(s).O_()&&s.Ea.size>0}function ds(s){return At(s).da.size===0}function Qv(s){s.ma=void 0}async function iA(s){s.Va.set("Online")}async function rA(s){s.Ea.forEach((e,i)=>{Md(s,e)})}async function sA(s,e){Qv(s),jd(s)?(s.Va.Pa(e),Od(s)):s.Va.set("Unknown")}async function aA(s,e,i){if(s.Va.set("Online"),e instanceof Nv&&e.state===2&&e.cause)try{await async function(o,h){const d=h.cause;for(const g of h.targetIds)o.Ea.has(g)&&(await o.remoteSyncer.rejectListen(g,d),o.Ea.delete(g),o.ma.removeTarget(g))}(s,e)}catch(a){ot(cs,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await rc(s,a)}else if(e instanceof Gu?s.ma.Xe(e):e instanceof Cv?s.ma.ot(e):s.ma.nt(e),!i.isEqual(xt.min()))try{const a=await zv(s.localStore);i.compareTo(a)>=0&&await function(h,d){const g=h.ma.It(d);return g.targetChanges.forEach((_,p)=>{if(_.resumeToken.approximateByteSize()>0){const T=h.Ea.get(p);T&&h.Ea.set(p,T.withResumeToken(_.resumeToken,d))}}),g.targetMismatches.forEach((_,p)=>{const T=h.Ea.get(_);if(!T)return;h.Ea.set(_,T.withResumeToken(ze.EMPTY_BYTE_STRING,T.snapshotVersion)),Gv(h,_);const A=new cr(T.target,_,p,T.sequenceNumber);Md(h,A)}),h.remoteSyncer.applyRemoteEvent(g)}(s,i)}catch(a){ot(cs,"Failed to raise snapshot:",a),await rc(s,a)}}async function rc(s,e,i){if(!wa(e))throw e;s.da.add(1),await lo(s),s.Va.set("Offline"),i||(i=()=>zv(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{ot(cs,"Retrying IndexedDB access"),await i(),s.da.delete(1),await pc(s)})}function Fv(s,e){return e().catch(i=>rc(s,i,e))}async function yc(s){const e=At(s),i=br(e);let a=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:yd;for(;lA(e);)try{const o=await qx(e.localStore,a);if(o===null){e.Ia.length===0&&i.k_();break}a=o.batchId,oA(e,o)}catch(o){await rc(e,o)}Yv(e)&&Kv(e)}function lA(s){return ds(s)&&s.Ia.length<10}function oA(s,e){s.Ia.push(e);const i=br(s);i.N_()&&i.ea&&i.ta(e.mutations)}function Yv(s){return ds(s)&&!br(s).O_()&&s.Ia.length>0}function Kv(s){br(s).start()}async function uA(s){br(s).ia()}async function cA(s){const e=br(s);for(const i of s.Ia)e.ta(i.mutations)}async function hA(s,e,i){const a=s.Ia.shift(),o=Sd.from(a,e,i);await Fv(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await yc(s)}async function fA(s,e){e&&br(s).ea&&await async function(a,o){if(function(d){return K1(d)&&d!==et.ABORTED}(o.code)){const h=a.Ia.shift();br(a).L_(),await Fv(a,()=>a.remoteSyncer.rejectFailedWrite(h.batchId,o)),await yc(a)}}(s,e),Yv(s)&&Kv(s)}async function m0(s,e){const i=At(s);i.asyncQueue.verifyOperationInProgress(),ot(cs,"RemoteStore received new credentials");const a=ds(i);i.da.add(3),await lo(i),a&&i.Va.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.da.delete(3),await pc(i)}async function dA(s,e){const i=At(s);e?(i.da.delete(2),await pc(i)):e||(i.da.add(2),await lo(i),i.Va.set("Unknown"))}function Ra(s){return s.fa||(s.fa=function(i,a,o){const h=At(i);return h.oa(),new Zx(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)}(s.datastore,s.asyncQueue,{e_:iA.bind(null,s),n_:rA.bind(null,s),i_:sA.bind(null,s),Y_:aA.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),jd(s)?Od(s):s.Va.set("Unknown")):(await s.fa.stop(),Qv(s))})),s.fa}function br(s){return s.ga||(s.ga=function(i,a,o){const h=At(i);return h.oa(),new Jx(a,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:uA.bind(null,s),i_:fA.bind(null,s),na:cA.bind(null,s),ra:hA.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await yc(s)):(await s.ga.stop(),s.Ia.length>0&&(ot(cs,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,i,a,o,h){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=o,this.removalCallback=h,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,o,h){const d=Date.now()+a,g=new kd(e,i,d,o,h);return g.start(a),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ut(et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ud(s,e){if(Oi("AsyncQueue",`${e}: ${s}`),wa(s))return new ut(et.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{static emptySet(e){return new ma(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||pt.comparator(i.key,a.key):(i,a)=>pt.comparator(i.key,a.key),this.keyedMap=zl(),this.sortedSet=new se(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((i,a)=>(e(i),!1))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof ma)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const o=i.getNext().key,h=a.getNext().key;if(!o.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(i=>{e.push(i.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new ma;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(){this.pa=new se(pt.comparator)}track(e){const i=e.doc.key,a=this.pa.get(i);a?e.type!==0&&a.type===3?this.pa=this.pa.insert(i,e):e.type===3&&a.type!==1?this.pa=this.pa.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.pa=this.pa.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.pa=this.pa.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.pa=this.pa.remove(i):e.type===1&&a.type===2?this.pa=this.pa.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.pa=this.pa.insert(i,{type:2,doc:e.doc}):_t(63341,{Vt:e,ya:a}):this.pa=this.pa.insert(i,e)}wa(){const e=[];return this.pa.inorderTraversal((i,a)=>{e.push(a)}),e}}class ba{constructor(e,i,a,o,h,d,g,_,p){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=_,this.hasCachedResults=p}static fromInitialDocuments(e,i,a,o,h){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new ba(e,i,ma.emptySet(i),d,a,o,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let o=0;o<i.length;o++)if(i[o].type!==a[o].type||!i[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class gA{constructor(){this.queries=p0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const o=At(i),h=o.queries;o.queries=p0(),h.forEach((d,g)=>{for(const _ of g.Sa)_.onError(a)})})(this,new ut(et.ABORTED,"Firestore shutting down"))}}function p0(){return new fs(s=>gv(s),cc)}async function Xv(s,e){const i=At(s);let a=3;const o=e.query;let h=i.queries.get(o);h?!h.Da()&&e.va()&&(a=2):(h=new mA,a=e.va()?0:1);try{switch(a){case 0:h.ba=await i.onListen(o,!0);break;case 1:h.ba=await i.onListen(o,!1);break;case 2:await i.onFirstRemoteStoreListen(o)}}catch(d){const g=Ud(d,`Initialization of query '${oa(e.query)}' failed`);return void e.onError(g)}i.queries.set(o,h),h.Sa.push(e),e.Fa(i.onlineState),h.ba&&e.Ma(h.ba)&&Ld(i)}async function $v(s,e){const i=At(s),a=e.query;let o=3;const h=i.queries.get(a);if(h){const d=h.Sa.indexOf(e);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?o=e.va()?0:1:!h.Da()&&e.va()&&(o=2))}switch(o){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function pA(s,e){const i=At(s);let a=!1;for(const o of e){const h=o.query,d=i.queries.get(h);if(d){for(const g of d.Sa)g.Ma(o)&&(a=!0);d.ba=o}}a&&Ld(i)}function yA(s,e,i){const a=At(s),o=a.queries.get(e);if(o)for(const h of o.Sa)h.onError(i);a.queries.delete(e)}function Ld(s){s.Ca.forEach(e=>{e.next()})}var ld,y0;(y0=ld||(ld={})).xa="default",y0.Cache="cache";class Zv{constructor(e,i,a){this.query=e,this.Oa=i,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=a||{}}Ma(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new ba(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Na?this.La(e)&&(this.Oa.next(e),i=!0):this.ka(e,this.onlineState)&&(this.qa(e),i=!0),this.Ba=e,i}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let i=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),i=!0),i}ka(e,i){if(!e.fromCache||!this.va())return!0;const a=i!=="Offline";return(!this.options.Qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}La(e){if(e.docChanges.length>0)return!0;const i=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}qa(e){e=ba.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==ld.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e){this.key=e}}class Wv{constructor(e){this.key=e}}class vA{constructor(e,i){this.query=e,this.Ha=i,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Mt(),this.mutatedKeys=Mt(),this.Za=pv(e),this.Xa=new ma(this.Za)}get eu(){return this.Ha}tu(e,i){const a=i?i.nu:new g0,o=i?i.Xa:this.Xa;let h=i?i.mutatedKeys:this.mutatedKeys,d=o,g=!1;const _=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,A)=>{const w=o.get(T),k=hc(this.query,A)?A:null,B=!!w&&this.mutatedKeys.has(w.key),G=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let Y=!1;w&&k?w.data.isEqual(k.data)?B!==G&&(a.track({type:3,doc:k}),Y=!0):this.ru(w,k)||(a.track({type:2,doc:k}),Y=!0,(_&&this.Za(k,_)>0||p&&this.Za(k,p)<0)&&(g=!0)):!w&&k?(a.track({type:0,doc:k}),Y=!0):w&&!k&&(a.track({type:1,doc:w}),Y=!0,(_||p)&&(g=!0)),Y&&(k?(d=d.add(k),h=G?h.add(T):h.delete(T)):(d=d.delete(T),h=h.delete(T)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),h=h.delete(T.key),a.track({type:1,doc:T})}return{Xa:d,nu:a,Cs:g,mutatedKeys:h}}ru(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,o){const h=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const d=e.nu.wa();d.sort((T,A)=>function(k,B){const G=Y=>{switch(Y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Vt:Y})}};return G(k)-G(B)}(T.type,A.type)||this.Za(T.doc,A.doc)),this.iu(a),o=o!=null&&o;const g=i&&!o?this.su():[],_=this.Ya.size===0&&this.current&&!o?1:0,p=_!==this.Ja;return this.Ja=_,d.length!==0||p?{snapshot:new ba(this.query,e.Xa,h,d,e.mutatedKeys,_===0,p,!1,!!a&&a.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new g0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(i=>this.Ha=this.Ha.add(i)),e.modifiedDocuments.forEach(i=>{}),e.removedDocuments.forEach(i=>this.Ha=this.Ha.delete(i)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Mt(),this.Xa.forEach(a=>{this._u(a.key)&&(this.Ya=this.Ya.add(a.key))});const i=[];return e.forEach(a=>{this.Ya.has(a)||i.push(new Wv(a))}),this.Ya.forEach(a=>{e.has(a)||i.push(new Jv(a))}),i}au(e){this.Ha=e.$s,this.Ya=Mt();const i=this.tu(e.documents);return this.applyChanges(i,!0)}uu(){return ba.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Pd="SyncEngine";class _A{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class bA{constructor(e){this.key=e,this.cu=!1}}class EA{constructor(e,i,a,o,h,d){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=o,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.lu={},this.hu=new fs(g=>gv(g),cc),this.Pu=new Map,this.Tu=new Set,this.Iu=new se(pt.comparator),this.Eu=new Map,this.du=new Cd,this.Au={},this.Ru=new Map,this.Vu=_a.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function TA(s,e,i=!0){const a=s_(s);let o;const h=a.hu.get(e);return h?(a.sharedClientState.addLocalQueryTarget(h.targetId),o=h.view.uu()):o=await t_(a,e,i,!0),o}async function xA(s,e){const i=s_(s);await t_(i,e,!0,!1)}async function t_(s,e,i,a){const o=await Hx(s.localStore,ii(e)),h=o.targetId,d=s.sharedClientState.addLocalQueryTarget(h,i);let g;return a&&(g=await AA(s,e,h,d==="current",o.resumeToken)),s.isPrimaryClient&&i&&Hv(s.remoteStore,o),g}async function AA(s,e,i,a,o){s.fu=(A,w,k)=>async function(G,Y,ft,at){let lt=Y.view.tu(ft);lt.Cs&&(lt=await u0(G.localStore,Y.query,!1).then(({documents:N})=>Y.view.tu(N,lt)));const X=at&&at.targetChanges.get(Y.targetId),Z=at&&at.targetMismatches.get(Y.targetId)!=null,dt=Y.view.applyChanges(lt,G.isPrimaryClient,X,Z);return _0(G,Y.targetId,dt.ou),dt.snapshot}(s,A,w,k);const h=await u0(s.localStore,e,!0),d=new vA(e,h.$s),g=d.tu(h.documents),_=ao.createSynthesizedTargetChangeForCurrentChange(i,a&&s.onlineState!=="Offline",o),p=d.applyChanges(g,s.isPrimaryClient,_);_0(s,i,p.ou);const T=new _A(e,i,d);return s.hu.set(e,T),s.Pu.has(i)?s.Pu.get(i).push(e):s.Pu.set(i,[e]),p.snapshot}async function SA(s,e,i){const a=At(s),o=a.hu.get(e),h=a.Pu.get(o.targetId);if(h.length>1)return a.Pu.set(o.targetId,h.filter(d=>!cc(d,e))),void a.hu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await sd(a.localStore,o.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(o.targetId),i&&Vd(a.remoteStore,o.targetId),od(a,o.targetId)}).catch(Sa)):(od(a,o.targetId),await sd(a.localStore,o.targetId,!0))}async function wA(s,e){const i=At(s),a=i.hu.get(e),o=i.Pu.get(a.targetId);i.isPrimaryClient&&o.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),Vd(i.remoteStore,a.targetId))}async function RA(s,e,i){const a=OA(s);try{const o=await function(d,g){const _=At(d),p=Se.now(),T=g.reduce((k,B)=>k.add(B.key),Mt());let A,w;return _.persistence.runTransaction("Locally write mutations","readwrite",k=>{let B=ji(),G=Mt();return _.Bs.getEntries(k,T).next(Y=>{B=Y,B.forEach((ft,at)=>{at.isValidDocument()||(G=G.add(ft))})}).next(()=>_.localDocuments.getOverlayedDocuments(k,B)).next(Y=>{A=Y;const ft=[];for(const at of g){const lt=H1(at,A.get(at.key).overlayedDocument);lt!=null&&ft.push(new xr(at.key,lt,lv(lt.value.mapValue),Nn.exists(!0)))}return _.mutationQueue.addMutationBatch(k,p,ft,g)}).next(Y=>{w=Y;const ft=Y.applyToLocalDocumentSet(A,G);return _.documentOverlayCache.saveOverlays(k,Y.batchId,ft)})}).then(()=>({batchId:w.batchId,changes:vv(A)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),function(d,g,_){let p=d.Au[d.currentUser.toKey()];p||(p=new se(Ct)),p=p.insert(g,_),d.Au[d.currentUser.toKey()]=p}(a,o.batchId,i),await oo(a,o.changes),await yc(a.remoteStore)}catch(o){const h=Ud(o,"Failed to persist write");i.reject(h)}}async function e_(s,e){const i=At(s);try{const a=await zx(i.localStore,e);e.targetChanges.forEach((o,h)=>{const d=i.Eu.get(h);d&&(Gt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.cu=!0:o.modifiedDocuments.size>0?Gt(d.cu,14607):o.removedDocuments.size>0&&(Gt(d.cu,42227),d.cu=!1))}),await oo(i,a,e)}catch(a){await Sa(a)}}function v0(s,e,i){const a=At(s);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const o=[];a.hu.forEach((h,d)=>{const g=d.view.Fa(e);g.snapshot&&o.push(g.snapshot)}),function(d,g){const _=At(d);_.onlineState=g;let p=!1;_.queries.forEach((T,A)=>{for(const w of A.Sa)w.Fa(g)&&(p=!0)}),p&&Ld(_)}(a.eventManager,e),o.length&&a.lu.Y_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function CA(s,e,i){const a=At(s);a.sharedClientState.updateQueryState(e,"rejected",i);const o=a.Eu.get(e),h=o&&o.key;if(h){let d=new se(pt.comparator);d=d.insert(h,Fe.newNoDocument(h,xt.min()));const g=Mt().add(h),_=new mc(xt.min(),new Map,new se(Ct),d,g);await e_(a,_),a.Iu=a.Iu.remove(h),a.Eu.delete(e),zd(a)}else await sd(a.localStore,e,!1).then(()=>od(a,e,i)).catch(Sa)}async function NA(s,e){const i=At(s),a=e.batch.batchId;try{const o=await Px(i.localStore,e);i_(i,a,null),n_(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await oo(i,o)}catch(o){await Sa(o)}}async function DA(s,e,i){const a=At(s);try{const o=await function(d,g){const _=At(d);return _.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let T;return _.mutationQueue.lookupMutationBatch(p,g).next(A=>(Gt(A!==null,37113),T=A.keys(),_.mutationQueue.removeMutationBatch(p,A))).next(()=>_.mutationQueue.performConsistencyCheck(p)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(p,T,g)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,T)).next(()=>_.localDocuments.getDocuments(p,T))})}(a.localStore,e);i_(a,e,i),n_(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await oo(a,o)}catch(o){await Sa(o)}}function n_(s,e){(s.Ru.get(e)||[]).forEach(i=>{i.resolve()}),s.Ru.delete(e)}function i_(s,e,i){const a=At(s);let o=a.Au[a.currentUser.toKey()];if(o){const h=o.get(e);h&&(i?h.reject(i):h.resolve(),o=o.remove(e)),a.Au[a.currentUser.toKey()]=o}}function od(s,e,i=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Pu.get(e))s.hu.delete(a),i&&s.lu.gu(a,i);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(a=>{s.du.containsKey(a)||r_(s,a)})}function r_(s,e){s.Tu.delete(e.path.canonicalString());const i=s.Iu.get(e);i!==null&&(Vd(s.remoteStore,i),s.Iu=s.Iu.remove(e),s.Eu.delete(i),zd(s))}function _0(s,e,i){for(const a of i)a instanceof Jv?(s.du.addReference(a.key,e),IA(s,a)):a instanceof Wv?(ot(Pd,"Document no longer in limbo: "+a.key),s.du.removeReference(a.key,e),s.du.containsKey(a.key)||r_(s,a.key)):_t(19791,{pu:a})}function IA(s,e){const i=e.key,a=i.path.canonicalString();s.Iu.get(i)||s.Tu.has(a)||(ot(Pd,"New document in limbo: "+i),s.Tu.add(a),zd(s))}function zd(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const i=new pt(ee.fromString(e)),a=s.Vu.next();s.Eu.set(a,new bA(i)),s.Iu=s.Iu.insert(i,a),Hv(s.remoteStore,new cr(ii(Td(i.path)),a,"TargetPurposeLimboResolution",lc.le))}}async function oo(s,e,i){const a=At(s),o=[],h=[],d=[];a.hu.isEmpty()||(a.hu.forEach((g,_)=>{d.push(a.fu(_,e,i).then(p=>{var T;if((p||i)&&a.isPrimaryClient){const A=p?!p.fromCache:(T=i==null?void 0:i.targetChanges.get(_.targetId))===null||T===void 0?void 0:T.current;a.sharedClientState.updateQueryState(_.targetId,A?"current":"not-current")}if(p){o.push(p);const A=Dd.Rs(_.targetId,p);h.push(A)}}))}),await Promise.all(d),a.lu.Y_(o),await async function(_,p){const T=At(_);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>tt.forEach(p,w=>tt.forEach(w.ds,k=>T.persistence.referenceDelegate.addReference(A,w.targetId,k)).next(()=>tt.forEach(w.As,k=>T.persistence.referenceDelegate.removeReference(A,w.targetId,k)))))}catch(A){if(!wa(A))throw A;ot(Id,"Failed to update sequence numbers: "+A)}for(const A of p){const w=A.targetId;if(!A.fromCache){const k=T.xs.get(w),B=k.snapshotVersion,G=k.withLastLimboFreeSnapshotVersion(B);T.xs=T.xs.insert(w,G)}}}(a.localStore,h))}async function VA(s,e){const i=At(s);if(!i.currentUser.isEqual(e)){ot(Pd,"User change. New user:",e.toKey());const a=await Pv(i.localStore,e);i.currentUser=e,function(h,d){h.Ru.forEach(g=>{g.forEach(_=>{_.reject(new ut(et.CANCELLED,d))})}),h.Ru.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await oo(i,a.ks)}}function MA(s,e){const i=At(s),a=i.Eu.get(e);if(a&&a.cu)return Mt().add(a.key);{let o=Mt();const h=i.Pu.get(e);if(!h)return o;for(const d of h){const g=i.hu.get(d);o=o.unionWith(g.view.eu)}return o}}function s_(s){const e=At(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=e_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CA.bind(null,e),e.lu.Y_=pA.bind(null,e.eventManager),e.lu.gu=yA.bind(null,e.eventManager),e}function OA(s){const e=At(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DA.bind(null,e),e}class sc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,i){return null}Cu(e,i){return null}Du(e){return Lx(this.persistence,new jx,e.initialUser,this.serializer)}Su(e){return new Lv(Nd.fi,this.serializer)}bu(e){return new Qx}async terminate(){var e,i;(e=this.gcScheduler)===null||e===void 0||e.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sc.provider={build:()=>new sc};class jA extends sc{constructor(e){super(),this.cacheSizeBytes=e}vu(e,i){Gt(this.persistence.referenceDelegate instanceof ic,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new bx(a,e.asyncQueue,i)}Su(e){const i=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new Lv(a=>ic.fi(a,i),this.serializer)}}class ud{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>v0(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=VA.bind(null,this.syncEngine),await dA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gA}()}createDatastore(e){const i=gc(e.databaseInfo.databaseId),a=function(h){return new $x(h)}(e.databaseInfo);return function(h,d,g,_){return new tA(h,d,g,_)}(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return function(a,o,h,d,g){return new nA(a,o,h,d,g)}(this.localStore,this.datastore,e.asyncQueue,i=>v0(this.syncEngine,i,0),function(){return f0.C()?new f0:new Fx}())}createSyncEngine(e,i){return function(o,h,d,g,_,p,T){const A=new EA(o,h,d,g,_,p);return T&&(A.mu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await async function(o){const h=At(o);ot(cs,"RemoteStore shutting down."),h.da.add(5),await lo(h),h.Ra.shutdown(),h.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()}}ud.provider={build:()=>new ud};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Oi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,i){setTimeout(()=>{this.muted||e(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="FirestoreClient";class kA{constructor(e,i,a,o,h){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=o,this.user=Qe.UNAUTHENTICATED,this.clientId=Z0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(a,async d=>{ot(Er,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(a,d=>(ot(Er,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=Ud(i,"Failed to shutdown persistence");e.reject(a)}}),e.promise}}async function zf(s,e){s.asyncQueue.verifyOperationInProgress(),ot(Er,"Initializing OfflineComponentProvider");const i=s.configuration;await e.initialize(i);let a=i.initialUser;s.setCredentialChangeListener(async o=>{a.isEqual(o)||(await Pv(e.localStore,o),a=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function b0(s,e){s.asyncQueue.verifyOperationInProgress();const i=await UA(s);ot(Er,"Initializing OnlineComponentProvider"),await e.initialize(i,s.configuration),s.setCredentialChangeListener(a=>m0(e.remoteStore,a)),s.setAppCheckTokenChangeListener((a,o)=>m0(e.remoteStore,o)),s._onlineComponents=e}async function UA(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ot(Er,"Using user provided OfflineComponentProvider");try{await zf(s,s._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!function(o){return o.name==="FirebaseError"?o.code===et.FAILED_PRECONDITION||o.code===et.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(i))throw i;ga("Error using user provided cache. Falling back to memory cache: "+i),await zf(s,new sc)}}else ot(Er,"Using default OfflineComponentProvider"),await zf(s,new jA(void 0));return s._offlineComponents}async function l_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ot(Er,"Using user provided OnlineComponentProvider"),await b0(s,s._uninitializedComponentsProvider._online)):(ot(Er,"Using default OnlineComponentProvider"),await b0(s,new ud))),s._onlineComponents}function LA(s){return l_(s).then(e=>e.syncEngine)}async function o_(s){const e=await l_(s),i=e.eventManager;return i.onListen=TA.bind(null,e.syncEngine),i.onUnlisten=SA.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=xA.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=wA.bind(null,e.syncEngine),i}function PA(s,e,i={}){const a=new Ii;return s.asyncQueue.enqueueAndForget(async()=>function(h,d,g,_,p){const T=new a_({next:w=>{T.xu(),d.enqueueAndForget(()=>$v(h,A));const k=w.docs.has(g);!k&&w.fromCache?p.reject(new ut(et.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&w.fromCache&&_&&_.source==="server"?p.reject(new ut(et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),A=new Zv(Td(g.path),T,{includeMetadataChanges:!0,Qa:!0});return Xv(h,A)}(await o_(s),s.asyncQueue,e,i,a)),a.promise}function zA(s,e,i={}){const a=new Ii;return s.asyncQueue.enqueueAndForget(async()=>function(h,d,g,_,p){const T=new a_({next:w=>{T.xu(),d.enqueueAndForget(()=>$v(h,A)),w.fromCache&&_.source==="server"?p.reject(new ut(et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),A=new Zv(g,T,{includeMetadataChanges:!0,Qa:!0});return Xv(h,A)}(await o_(s),s.asyncQueue,e,i,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(s,e,i){if(!i)throw new ut(et.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function BA(s,e,i,a){if(e===!0&&a===!0)throw new ut(et.INVALID_ARGUMENT,`${s} and ${i} cannot be used together.`)}function T0(s){if(!pt.isDocumentKey(s))throw new ut(et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function x0(s){if(pt.isDocumentKey(s))throw new ut(et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function vc(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(a){return a.constructor?a.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":_t(12329,{type:typeof s})}function Ln(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ut(et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=vc(s);throw new ut(et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_="firestore.googleapis.com",A0=!0;class S0{constructor(e){var i,a;if(e.host===void 0){if(e.ssl!==void 0)throw new ut(et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=h_,this.ssl=A0}else this.host=e.host,this.ssl=(i=e.ssl)!==null&&i!==void 0?i:A0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vx)throw new ut(et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u_((a=e.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(h){if(h.timeoutSeconds!==void 0){if(isNaN(h.timeoutSeconds))throw new ut(et.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new ut(et.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new ut(et.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(a,o){return a.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _c{constructor(e,i,a,o){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new S0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ut(et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ut(et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new S0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new KT;switch(a.type){case"firstParty":return new JT(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ut(et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const a=E0.get(i);a&&(ot("ComponentProvider","Removing Datastore"),E0.delete(i),a.terminate())}(this),Promise.resolve()}}function qA(s,e,i,a={}){var o;s=Ln(s,_c);const h=md(e),d=s._getSettings(),g=Object.assign(Object.assign({},d),{emulatorOptions:s._getEmulatorOptions()}),_=`${e}:${i}`;h&&(xE(`https://${_}`),RE("Firestore",!0)),d.host!==h_&&d.host!==_&&ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},d),{host:_,ssl:h,emulatorOptions:a});if(!Yu(p,g)&&(s._setSettings(p),a.mockUserToken)){let T,A;if(typeof a.mockUserToken=="string")T=a.mockUserToken,A=Qe.MOCK_USER;else{T=AE(a.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const w=a.mockUserToken.sub||a.mockUserToken.user_id;if(!w)throw new ut(et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Qe(w)}s._authCredentials=new XT(new X0(T,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new Ca(this.firestore,e,this._query)}}class Ze{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ze(this.firestore,e,this._key)}}class mr extends Ca{constructor(e,i,a){super(e,i,Td(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new pt(e))}withConverter(e){return new mr(this.firestore,e,this._path)}}function hs(s,e,...i){if(s=Vi(s),c_("collection","path",e),s instanceof _c){const a=ee.fromString(e,...i);return x0(a),new mr(s,null,a)}{if(!(s instanceof Ze||s instanceof mr))throw new ut(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ee.fromString(e,...i));return x0(a),new mr(s.firestore,null,a)}}function gr(s,e,...i){if(s=Vi(s),arguments.length===1&&(e=Z0.newId()),c_("doc","path",e),s instanceof _c){const a=ee.fromString(e,...i);return T0(a),new Ze(s,null,new pt(a))}{if(!(s instanceof Ze||s instanceof mr))throw new ut(et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(ee.fromString(e,...i));return T0(a),new Ze(s.firestore,s instanceof mr?s.converter:null,new pt(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="AsyncQueue";class R0{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Bv(this,"async_queue_retry"),this.rc=()=>{const a=Pf();a&&ot(w0,"Visibility state changed to "+a.visibilityState),this.x_.b_()},this.sc=e;const i=Pf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const i=Pf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const i=new Ii;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!wa(e))throw e;ot(w0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const i=this.sc.then(()=>(this.ec=!0,e().catch(a=>{throw this.Xu=a,this.ec=!1,Oi("INTERNAL UNHANDLED ERROR: ",C0(a)),a}).then(a=>(this.ec=!1,a))));return this.sc=i,i}enqueueAfterDelay(e,i,a){this.oc(),this.nc.indexOf(e)>-1&&(i=0);const o=kd.createAndSchedule(this,e,i,a,h=>this.uc(h));return this.Zu.push(o),o}oc(){this.Xu&&_t(47125,{cc:C0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const i of this.Zu)if(i.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((i,a)=>i.targetTimeMs-a.targetTimeMs);for(const i of this.Zu)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const i=this.Zu.indexOf(e);this.Zu.splice(i,1)}}function C0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class ms extends _c{constructor(e,i,a,o){super(e,i,a,o),this.type="firestore",this._queue=new R0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new R0(e),this._firestoreClient=void 0,await e}}}function HA(s,e){const i=typeof s=="object"?s:UT(),a=typeof s=="string"?s:Zu,o=VT(i,"firestore").getImmediate({identifier:a});if(!o._initialized){const h=EE("firestore");h&&qA(o,...h)}return o}function Bd(s){if(s._terminated)throw new ut(et.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||GA(s),s._firestoreClient}function GA(s){var e,i,a;const o=s._freezeSettings(),h=function(g,_,p,T){return new d1(g,_,p,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,u_(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((i=o.localCache)===null||i===void 0)&&i._offlineComponentProvider&&(!((a=o.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new kA(s._authCredentials,s._appCheckCredentials,s._queue,h,s._componentsProvider&&function(g){const _=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(_),_online:_}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ea(ze.fromBase64String(e))}catch(i){throw new ut(et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new Ea(ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new ut(et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new ut(et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new ut(et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e){this._values=(e||[]).map(i=>i)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(a,o){if(a.length!==o.length)return!1;for(let h=0;h<a.length;++h)if(a[h]!==o[h])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=/^__.*__$/;class FA{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new xr(e,this.data,this.fieldMask,i,this.fieldTransforms):new so(e,this.data,i,this.fieldTransforms)}}class f_{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return new xr(e,this.data,this.fieldMask,i,this.fieldTransforms)}}function d_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ic:s})}}class Gd{constructor(e,i,a,o,h,d){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=o,h===void 0&&this.Ec(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Gd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.dc({path:a,Rc:!1});return o.Vc(e),o}mc(e){var i;const a=(i=this.path)===null||i===void 0?void 0:i.child(e),o=this.dc({path:a,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return ac(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(i=>e.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>e.isPrefixOf(i.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(d_(this.Ic)&&QA.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class YA{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||gc(e)}bc(e,i,a,o=!1){return new Gd({Ic:e,methodName:i,wc:a,path:Pe.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tc(s){const e=s._freezeSettings(),i=gc(s._databaseId);return new YA(s._databaseId,!!e.ignoreUndefinedProperties,i)}function m_(s,e,i,a,o,h={}){const d=s.bc(h.merge||h.mergeFields?2:0,e,i,o);Fd("Data must be an object, but it was:",d,a);const g=g_(a,d);let _,p;if(h.merge)_=new mn(d.fieldMask),p=d.fieldTransforms;else if(h.mergeFields){const T=[];for(const A of h.mergeFields){const w=cd(e,A,i);if(!d.contains(w))throw new ut(et.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);y_(T,w)||T.push(w)}_=new mn(T),p=d.fieldTransforms.filter(A=>_.covers(A.field))}else _=null,p=d.fieldTransforms;return new FA(new nn(g),_,p)}class xc extends Ec{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xc}}class Qd extends Ec{_toFieldTransform(e){return new P1(e.path,new eo)}isEqual(e){return e instanceof Qd}}function KA(s,e,i,a){const o=s.bc(1,e,i);Fd("Data must be an object, but it was:",o,a);const h=[],d=nn.empty();Tr(a,(_,p)=>{const T=Yd(e,_,i);p=Vi(p);const A=o.mc(T);if(p instanceof xc)h.push(T);else{const w=uo(p,A);w!=null&&(h.push(T),d.set(T,w))}});const g=new mn(h);return new f_(d,g,o.fieldTransforms)}function XA(s,e,i,a,o,h){const d=s.bc(1,e,i),g=[cd(e,a,i)],_=[o];if(h.length%2!=0)throw new ut(et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<h.length;w+=2)g.push(cd(e,h[w])),_.push(h[w+1]);const p=[],T=nn.empty();for(let w=g.length-1;w>=0;--w)if(!y_(p,g[w])){const k=g[w];let B=_[w];B=Vi(B);const G=d.mc(k);if(B instanceof xc)p.push(k);else{const Y=uo(B,G);Y!=null&&(p.push(k),T.set(k,Y))}}const A=new mn(p);return new f_(T,A,d.fieldTransforms)}function $A(s,e,i,a=!1){return uo(i,s.bc(a?4:3,e))}function uo(s,e){if(p_(s=Vi(s)))return Fd("Unsupported field value:",e,s),g_(s,e);if(s instanceof Ec)return function(a,o){if(!d_(o.Ic))throw o.gc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${a._methodName}() is not currently supported inside arrays`);const h=a._toFieldTransform(o);h&&o.fieldTransforms.push(h)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(a,o){const h=[];let d=0;for(const g of a){let _=uo(g,o.fc(d));_==null&&(_={nullValue:"NULL_VALUE"}),h.push(_),d++}return{arrayValue:{values:h}}}(s,e)}return function(a,o){if((a=Vi(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return k1(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const h=Se.fromDate(a);return{timestampValue:nc(o.serializer,h)}}if(a instanceof Se){const h=new Se(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:nc(o.serializer,h)}}if(a instanceof qd)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Ea)return{bytesValue:Dv(o.serializer,a._byteString)};if(a instanceof Ze){const h=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(h))throw o.gc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Rd(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Hd)return function(d,g){return{mapValue:{fields:{[sv]:{stringValue:av},[Ju]:{arrayValue:{values:d.toArray().map(p=>{if(typeof p!="number")throw g.gc("VectorValues must only contain numeric values.");return xd(g.serializer,p)})}}}}}}(a,o);throw o.gc(`Unsupported field value: ${vc(a)}`)}(s,e)}function g_(s,e){const i={};return W0(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tr(s,(a,o)=>{const h=uo(o,e.Ac(a));h!=null&&(i[a]=h)}),{mapValue:{fields:i}}}function p_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Se||s instanceof qd||s instanceof Ea||s instanceof Ze||s instanceof Ec||s instanceof Hd)}function Fd(s,e,i){if(!p_(i)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(i)){const a=vc(i);throw a==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+a)}}function cd(s,e,i){if((e=Vi(e))instanceof bc)return e._internalPath;if(typeof e=="string")return Yd(s,e);throw ac("Field path arguments must be of type string or ",s,!1,void 0,i)}const ZA=new RegExp("[~\\*/\\[\\]]");function Yd(s,e,i){if(e.search(ZA)>=0)throw ac(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,i);try{return new bc(...e.split("."))._internalPath}catch{throw ac(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,i)}}function ac(s,e,i,a,o){const h=a&&!a.isEmpty(),d=o!==void 0;let g=`Function ${e}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let _="";return(h||d)&&(_+=" (found",h&&(_+=` in field ${a}`),d&&(_+=` in document ${o}`),_+=")"),new ut(et.INVALID_ARGUMENT,g+s+_)}function y_(s,e){return s.some(i=>i.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,i,a,o,h){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=o,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(Kd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class JA extends v_{data(){return super.data()}}function Kd(s,e){return typeof e=="string"?Yd(s,e):e instanceof bc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ut(et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xd{}class tS extends Xd{}function $d(s,e,...i){let a=[];e instanceof Xd&&a.push(e),a=a.concat(i),function(h){const d=h.filter(_=>_ instanceof Jd).length,g=h.filter(_=>_ instanceof Ac).length;if(d>1||d>0&&g>0)throw new ut(et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const o of a)s=o._apply(s);return s}class Ac extends tS{constructor(e,i,a){super(),this._field=e,this._op=i,this._value=a,this.type="where"}static _create(e,i,a){return new Ac(e,i,a)}_apply(e){const i=this._parse(e);return __(e._query,i),new Ca(e.firestore,e.converter,Wf(e._query,i))}_parse(e){const i=Tc(e.firestore);return function(h,d,g,_,p,T,A){let w;if(p.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ut(et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){D0(A,T);const B=[];for(const G of A)B.push(N0(_,h,G));w={arrayValue:{values:B}}}else w=N0(_,h,A)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||D0(A,T),w=$A(g,d,A,T==="in"||T==="not-in");return _e.create(p,T,w)}(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}function Zd(s,e,i){const a=e,o=Kd("where",s);return Ac._create(o,a,i)}class Jd extends Xd{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new Jd(e,i)}_parse(e){const i=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return i.length===1?i[0]:Un.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:(function(o,h){let d=o;const g=h.getFlattenedFilters();for(const _ of g)__(d,_),d=Wf(d,_)}(e._query,i),new Ca(e.firestore,e.converter,Wf(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function N0(s,e,i){if(typeof(i=Vi(i))=="string"){if(i==="")throw new ut(et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mv(e)&&i.indexOf("/")!==-1)throw new ut(et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(ee.fromString(i));if(!pt.isDocumentKey(a))throw new ut(et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Gy(s,new pt(a))}if(i instanceof Ze)return Gy(s,i._key);throw new ut(et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vc(i)}.`)}function D0(s,e){if(!Array.isArray(s)||s.length===0)throw new ut(et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __(s,e){const i=function(o,h){for(const d of o)for(const g of d.getFlattenedFilters())if(h.indexOf(g.op)>=0)return g.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(i!==null)throw i===e.op?new ut(et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ut(et.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class eS{convertValue(e,i="none"){switch(_r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw _t(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return Tr(e,(o,h)=>{a[o]=this.convertValue(h,i)}),a}convertVectorValue(e){var i,a,o;const h=(o=(a=(i=e.fields)===null||i===void 0?void 0:i[Ju].arrayValue)===null||a===void 0?void 0:a.values)===null||o===void 0?void 0:o.map(d=>fe(d.doubleValue));return new Hd(h)}convertGeoPoint(e){return new qd(fe(e.latitude),fe(e.longitude))}convertArray(e,i){return(e.values||[]).map(a=>this.convertValue(a,i))}convertServerTimestamp(e,i){switch(i){case"previous":const a=uc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const i=yr(e);return new Se(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=ee.fromString(e);Gt(kv(a),9688,{name:e});const o=new Wl(a.get(1),a.get(3)),h=new pt(a.popFirst(5));return o.isEqual(i)||Oi(`Document ${h} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(s,e,i){let a;return a=s?s.toFirestore(e):e,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class E_ extends v_{constructor(e,i,a,o,h,d){super(e,i,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new Qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(Kd("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}}class Qu extends E_{data(e={}){return super.data(e)}}class nS{constructor(e,i,a,o){this._firestore=e,this._userDataWriter=i,this._snapshot=o,this.metadata=new ql(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach(i=>e.push(i)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach(a=>{e.call(i,new Qu(this._firestore,this._userDataWriter,a.key,a,new ql(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new ut(et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(o,h){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map(g=>{const _=new Qu(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ql(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:_,oldIndex:-1,newIndex:d++}})}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>h||g.type!==3).map(g=>{const _=new Qu(o._firestore,o._userDataWriter,g.doc.key,g.doc,new ql(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,T=-1;return g.type!==0&&(p=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),T=d.indexOf(g.doc.key)),{type:iS(g.type),doc:_,oldIndex:p,newIndex:T}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}}function iS(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(s){s=Ln(s,Ze);const e=Ln(s.firestore,ms);return PA(Bd(e),s._key).then(i=>lS(e,s,i))}class T_ extends eS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ea(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,i)}}function Ta(s){s=Ln(s,Ca);const e=Ln(s.firestore,ms),i=Bd(e),a=new T_(e);return WA(s._query),zA(i,s._query).then(o=>new nS(e,a,s,o))}function hd(s,e,i){s=Ln(s,Ze);const a=Ln(s.firestore,ms),o=b_(s.converter,e);return Sc(a,[m_(Tc(a),"setDoc",s._key,o,s.converter!==null,i).toMutation(s._key,Nn.none())])}function x_(s,e,i,...a){s=Ln(s,Ze);const o=Ln(s.firestore,ms),h=Tc(o);let d;return d=typeof(e=Vi(e))=="string"||e instanceof bc?XA(h,"updateDoc",s._key,e,i,a):KA(h,"updateDoc",s._key,e),Sc(o,[d.toMutation(s._key,Nn.exists(!0))])}function sS(s){return Sc(Ln(s.firestore,ms),[new Ad(s._key,Nn.none())])}function aS(s,e){const i=Ln(s.firestore,ms),a=gr(s),o=b_(s.converter,e);return Sc(i,[m_(Tc(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,Nn.exists(!1))]).then(()=>a)}function Sc(s,e){return function(a,o){const h=new Ii;return a.asyncQueue.enqueueAndForget(async()=>RA(await LA(a),o,h)),h.promise}(Bd(s),e)}function lS(s,e,i){const a=i.docs.get(e._key),o=new T_(s);return new E_(s,o,e._key,a,new ql(i.hasPendingWrites,i.fromCache),e.converter)}function oS(){return new Qd("serverTimestamp")}(function(e,i=!0){(function(o){Aa=o})(kT),Xu(new Xl("firestore",(a,{instanceIdentifier:o,options:h})=>{const d=a.getProvider("app").getImmediate(),g=new ms(new $T(a.getProvider("auth-internal")),new WT(d,a.getProvider("app-check-internal")),function(p,T){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ut(et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(p.options.projectId,T)}(d,o),d);return h=Object.assign({useFetchStreams:i},h),g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),da(Vy,My,e),da(Vy,My,"esm2017")})();var uS="firebase",cS="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */da(uS,cS,"app");const hS={apiKey:"AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",authDomain:"summery-23833.firebaseapp.com",projectId:"summery-23833",storageBucket:"summery-23833.firebasestorage.app",messagingSenderId:"123456789",appId:"1:123456789:web:abcdefghijklmnop"},fS=P0(hS),rn=HA(fS),A_="https://api.github.com",dS="harukaze1216",mS="youtube-bgm-research";function gS(){return localStorage.getItem("github_token")||null}function S_(s){return{Authorization:`token ${s}`,Accept:"application/vnd.github.v3+json","Content-Type":"application/json"}}async function pS(s){const e=gS();if(!e)throw new Error("GitHub Personal Access Tokenが設定されていません。設定ページでトークンを設定してください。");try{const i=yS(s.type,s.severity),a=vS(s),o=await fetch(`${A_}/repos/${dS}/${mS}/issues`,{method:"POST",headers:S_(e),body:JSON.stringify({title:s.title,body:a,labels:i})});if(!o.ok){const d=await o.json();throw new Error(`GitHub API Error: ${d.message||o.statusText}`)}const h=await o.json();return{success:!0,issue:{number:h.number,title:h.title,url:h.html_url,state:h.state,createdAt:h.created_at}}}catch(i){throw console.error("GitHub Issue作成エラー:",i),i}}function yS(s,e){const i=[];switch(s){case"bug":i.push("bug");break;case"feature":i.push("enhancement");break;case"question":i.push("question");break;default:i.push("feedback")}switch(e){case"critical":i.push("priority: critical");break;case"high":i.push("priority: high");break;case"medium":i.push("priority: medium");break;case"low":i.push("priority: low");break}return i.push("user-reported"),i}function vS(s){const i=new Date().toLocaleString("ja-JP",{timeZone:"Asia/Tokyo",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return`## 概要
${s.body}

## Issue詳細

**種別:** ${_S(s.type)}  
**重要度:** ${bS(s.severity)}  
**投稿日時:** ${i}

## 環境情報

**ブラウザ:** ${s.browserInfo||"Unknown"}  
**User Agent:** ${s.userAgent||"Unknown"}  
**URL:** ${window.location.href}

## 再現手順

${s.reproductionSteps||"未記入"}

## 期待する動作

${s.expectedBehavior||"未記入"}

## 実際の動作

${s.actualBehavior||"未記入"}

## 追加情報

${s.additionalInfo||"特になし"}

---
*この Issue は YouTube BGM チャンネル分析アプリから自動投稿されました*`}function _S(s){switch(s){case"bug":return"🐛 バグ報告";case"feature":return"✨ 機能要望";case"question":return"❓ 質問・サポート";default:return"💬 フィードバック"}}function bS(s){switch(s){case"critical":return"🚨 緊急";case"high":return"🔴 高";case"medium":return"🟡 中";case"low":return"🟢 低";default:return"🔵 通常"}}function ES(){const s=navigator.userAgent;let e="Unknown",i="Unknown";if(s.includes("Chrome")){e="Chrome";const a=s.match(/Chrome\/([0-9.]+)/);i=a?a[1]:"Unknown"}else if(s.includes("Firefox")){e="Firefox";const a=s.match(/Firefox\/([0-9.]+)/);i=a?a[1]:"Unknown"}else if(s.includes("Safari")){e="Safari";const a=s.match(/Version\/([0-9.]+)/);i=a?a[1]:"Unknown"}else if(s.includes("Edge")){e="Edge";const a=s.match(/Edge\/([0-9.]+)/);i=a?a[1]:"Unknown"}return`${e} ${i}`}function I0(s){return s&&s.trim()?(localStorage.setItem("github_token",s.trim()),!0):(localStorage.removeItem("github_token"),!1)}function w_(){const s=localStorage.getItem("github_token");return s&&s.trim().length>0}async function TS(s){try{return(await fetch(`${A_}/user`,{headers:S_(s)})).ok}catch(e){return console.error("GitHub Token validation error:",e),!1}}const xS=({onClose:s})=>{const[e,i]=Tt.useState({title:"",body:"",type:"bug",severity:"medium",reproductionSteps:"",expectedBehavior:"",actualBehavior:"",additionalInfo:""}),[a,o]=Tt.useState(!1),[h,d]=Tt.useState(null),[g,_]=Tt.useState(!1),p=(k,B)=>{i(G=>({...G,[k]:B}))},T=async k=>{if(k.preventDefault(),!e.title.trim()){alert("タイトルを入力してください");return}if(!e.body.trim()){alert("内容を入力してください");return}if(!w_()){alert("GitHub Personal Access Tokenが設定されていません。設定ページでトークンを設定してください。");return}o(!0),d(null);try{const B={...e,browserInfo:ES(),userAgent:navigator.userAgent},G=await pS(B);d({success:!0,message:"Issueが正常に作成されました！",issue:G.issue}),i({title:"",body:"",type:"bug",severity:"medium",reproductionSteps:"",expectedBehavior:"",actualBehavior:"",additionalInfo:""})}catch(B){console.error("Issue作成エラー:",B),d({success:!1,message:`エラーが発生しました: ${B.message}`})}finally{o(!1)}},A=[{value:"bug",label:"🐛 バグ報告",description:"予期しない動作や不具合"},{value:"feature",label:"✨ 機能要望",description:"新機能や改善の提案"},{value:"question",label:"❓ 質問・サポート",description:"使い方やその他の質問"}],w=[{value:"low",label:"🟢 低",description:"軽微な問題"},{value:"medium",label:"🟡 中",description:"通常の問題"},{value:"high",label:"🔴 高",description:"重要な問題"},{value:"critical",label:"🚨 緊急",description:"アプリが使用不可"}];return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 p-6",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"🐛 不具合・要望を報告"}),v.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl",children:"×"})]}),v.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"報告はGitHub Issuesに自動投稿されます"})]}),v.jsxs("form",{onSubmit:T,className:"p-6 space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"種別"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3",children:A.map(k=>v.jsxs("label",{className:`cursor-pointer p-3 rounded-lg border-2 transition-colors ${e.type===k.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[v.jsx("input",{type:"radio",name:"type",value:k.value,checked:e.type===k.value,onChange:B=>p("type",B.target.value),className:"sr-only"}),v.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:k.label}),v.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:k.description})]},k.value))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"重要度"}),v.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:w.map(k=>v.jsxs("label",{className:`cursor-pointer p-2 rounded-lg border-2 transition-colors ${e.severity===k.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-gray-600 hover:border-gray-300 dark:hover:border-gray-500"}`,children:[v.jsx("input",{type:"radio",name:"severity",value:k.value,checked:e.severity===k.value,onChange:B=>p("severity",B.target.value),className:"sr-only"}),v.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white text-center",children:k.label}),v.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center mt-1",children:k.description})]},k.value))})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"タイトル *"}),v.jsx("input",{type:"text",value:e.title,onChange:k=>p("title",k.target.value),className:"input-field",placeholder:"問題や要望を簡潔に記述してください",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"内容 *"}),v.jsx("textarea",{value:e.body,onChange:k=>p("body",k.target.value),className:"input-field h-32 resize-none",placeholder:"問題の詳細や要望内容を具体的に記述してください",required:!0})]}),v.jsx("div",{children:v.jsx("button",{type:"button",onClick:()=>_(!g),className:"text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 text-sm font-medium",children:g?"▼ 詳細項目を非表示":"▶ 詳細項目を表示（任意）"})}),g&&v.jsxs("div",{className:"space-y-4 border-t border-gray-200 dark:border-gray-700 pt-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"再現手順"}),v.jsx("textarea",{value:e.reproductionSteps,onChange:k=>p("reproductionSteps",k.target.value),className:"input-field h-24 resize-none",placeholder:`1. 〜をクリック
2. 〜を入力
3. 問題が発生`})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"期待する動作"}),v.jsx("textarea",{value:e.expectedBehavior,onChange:k=>p("expectedBehavior",k.target.value),className:"input-field h-20 resize-none",placeholder:"本来どうなるべきかを記述してください"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"実際の動作"}),v.jsx("textarea",{value:e.actualBehavior,onChange:k=>p("actualBehavior",k.target.value),className:"input-field h-20 resize-none",placeholder:"実際に何が起こるかを記述してください"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"追加情報"}),v.jsx("textarea",{value:e.additionalInfo,onChange:k=>p("additionalInfo",k.target.value),className:"input-field h-20 resize-none",placeholder:"スクリーンショットのURL、関連情報など"})]})]}),h&&v.jsxs("div",{className:`p-4 rounded-lg ${h.success?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300":"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300"}`,children:[v.jsx("div",{className:"font-medium mb-2",children:h.success?"✅ 成功":"❌ エラー"}),v.jsx("div",{className:"text-sm mb-2",children:h.message}),h.success&&h.issue&&v.jsx("div",{className:"text-sm",children:v.jsxs("a",{href:h.issue.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:["Issue #",h.issue.number," を確認する →"]})})]}),v.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[v.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:"キャンセル"}),v.jsx("button",{type:"submit",disabled:a||!e.title.trim()||!e.body.trim(),className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"投稿中..."]}):v.jsx(v.Fragment,{children:"📤 投稿する"})})]})]})]})})},AS=({currentView:s,onViewChange:e})=>{const[i,a]=Tt.useState(!1),[o,h]=Tt.useState(!1);Tt.useEffect(()=>{const _=localStorage.getItem("theme"),p=window.matchMedia("(prefers-color-scheme: dark)").matches;_==="dark"||!_&&p?(a(!0),document.documentElement.classList.add("dark")):(a(!1),document.documentElement.classList.remove("dark"))},[]);const d=()=>{const _=!i;a(_),_?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},g=[{id:"channels",label:"チャンネル一覧",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"history",label:"履歴",icon:"📋"},{id:"settings",label:"設定",icon:"⚙️"}];return v.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors",children:[v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex justify-between items-center h-16",children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mr-8",children:"🎵 YouTube BGMチャンネル分析"}),v.jsx("nav",{className:"flex space-x-1",children:g.map(_=>v.jsxs("button",{onClick:()=>e(_.id),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${s===_.id?"bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[v.jsx("span",{className:"mr-2",children:_.icon}),_.label]},_.id))})]}),v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("button",{onClick:()=>h(!0),className:"px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"不具合・要望を報告",children:"🐛 フィードバック"}),v.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",title:"ダークモード切り替え",children:i?"☀️":"🌙"})]})]})}),o&&v.jsx(xS,{onClose:()=>h(!1)})]})},SS=({onAddChannel:s})=>{const[e,i]=Tt.useState(""),[a,o]=Tt.useState(!1),h=async d=>{if(d.preventDefault(),!!e.trim()){o(!0);try{await s(e.trim()),i("")}catch(g){console.error("チャンネル追加エラー:",g)}finally{o(!1)}}};return v.jsxs("div",{className:"card mb-8",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"チャンネル検索・追加"}),v.jsxs("form",{onSubmit:h,className:"flex gap-4",children:[v.jsx("input",{type:"text",value:e,onChange:d=>i(d.target.value),placeholder:"チャンネルURL または チャンネルID を入力",className:"input-field flex-1",disabled:a}),v.jsx("button",{type:"submit",disabled:a||!e.trim(),className:"btn-primary flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"分析中..."]}):v.jsx(v.Fragment,{children:"📊 分析追加"})})]})]})},wS=({filters:s,onFiltersChange:e})=>{const i=h=>{e({...s,sortBy:h})},a=h=>{e({...s,filterBy:h})},o=h=>{e({...s,search:h})};return v.jsx("div",{className:"card mb-8",children:v.jsxs("div",{className:"flex flex-wrap gap-6 items-center",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"並び替え:"}),v.jsxs("select",{value:s.sortBy,onChange:h=>i(h.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[v.jsx("option",{value:"growth_rate",children:"成長率順"}),v.jsx("option",{value:"subscribers",children:"登録者数順"}),v.jsx("option",{value:"views",children:"再生回数順"}),v.jsx("option",{value:"recent_videos",children:"最新動画数順"}),v.jsx("option",{value:"added_date",children:"追加日順"})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"フィルター:"}),v.jsxs("select",{value:s.filterBy,onChange:h=>a(h.target.value),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[v.jsx("option",{value:"unset",children:"未仕分け"}),v.jsx("option",{value:"all",children:"全て"}),v.jsx("option",{value:"tracking",children:"トラッキング中"}),v.jsx("option",{value:"non-tracking",children:"対象外"}),v.jsx("option",{value:"rejected",children:"除外済み"}),v.jsx("option",{value:"growing",children:"成長中"}),v.jsx("option",{value:"large",children:"大規模"}),v.jsx("option",{value:"small",children:"小規模"})]})]}),v.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700",children:"検索:"}),v.jsx("input",{type:"text",value:s.search,onChange:h=>o(h.target.value),placeholder:"チャンネル名検索...",className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent flex-1 min-w-0"})]})]})})},RS=({channels:s})=>{const e=s.length,i=s.length>0?Math.round(s.reduce((o,h)=>o+(h.growthRate||0),0)/s.length):0,a=s.length>0?s.reduce((o,h)=>(h.growthRate||0)>(o.growthRate||0)?h:o,s[0]):null;return v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[v.jsxs("div",{className:"stat-card",children:[v.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:e}),v.jsx("div",{className:"text-sm text-gray-600",children:"追跡チャンネル数"})]}),v.jsxs("div",{className:"stat-card",children:[v.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:[i,"%"]}),v.jsx("div",{className:"text-sm text-gray-600",children:"平均成長率"})]}),v.jsxs("div",{className:"stat-card",children:[v.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1 truncate",children:a?a.channelTitle:"-"}),v.jsx("div",{className:"text-sm text-gray-600",children:"トップパフォーマー"})]})]})};function CS(s){const e=s.trim(),i=[/youtube\.com\/channel\/([UC][a-zA-Z0-9_-]{22})/,/youtube\.com\/c\/([a-zA-Z0-9_-]+)/,/youtube\.com\/user\/([a-zA-Z0-9_-]+)/,/youtube\.com\/@([a-zA-Z0-9_-]+)/,/^(UC[a-zA-Z0-9_-]{22})$/];for(const a of i){const o=e.match(a);if(o)return o[1]}return e}async function NS(s){var e,i,a,o,h,d,g;try{const _="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",p="https://www.googleapis.com/youtube/v3/channels",T=new URLSearchParams({key:_,id:s,part:"snippet,statistics,contentDetails"}),A=await fetch(`${p}?${T}`),w=await A.json();if(!A.ok)throw new Error(((e=w.error)==null?void 0:e.message)||"API呼び出しエラー");if(!w.items||w.items.length===0)throw new Error("チャンネルが見つかりません");const k=w.items[0],B=k.snippet,G=k.statistics;return{channelId:k.id,channelTitle:B.title,description:B.description,thumbnailUrl:((a=(i=B.thumbnails)==null?void 0:i.high)==null?void 0:a.url)||((h=(o=B.thumbnails)==null?void 0:o.default)==null?void 0:h.url),channelUrl:`https://www.youtube.com/channel/${k.id}`,subscriberCount:parseInt(G.subscriberCount)||0,videoCount:parseInt(G.videoCount)||0,totalViews:parseInt(G.viewCount)||0,publishedAt:B.publishedAt,uploadsPlaylistId:(g=(d=k.contentDetails)==null?void 0:d.relatedPlaylists)==null?void 0:g.uploads}}catch(_){throw console.error("チャンネル情報取得エラー:",_),_}}async function DS(s){var e;try{const i="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",a="https://www.googleapis.com/youtube/v3/playlistItems";let o=null,h="",d=0;const g=10;console.log(`📹 最初の動画を検索中: ${s}`);do{const _=new URLSearchParams({key:i,playlistId:s,part:"snippet",maxResults:50});h&&_.append("pageToken",h);const p=await fetch(`${a}?${_}`),T=await p.json();if(!p.ok)throw new Error(((e=T.error)==null?void 0:e.message)||"API呼び出しエラー");if(T.items&&T.items.length>0){for(const A of T.items){const w=new Date(A.snippet.publishedAt);(!o||w<new Date(o.publishedAt))&&(o={title:A.snippet.title,publishedAt:A.snippet.publishedAt,videoId:A.snippet.resourceId.videoId})}console.log(`   ページ ${d+1}: ${T.items.length}本の動画をチェック`),console.log(`   現在の最古動画: ${o==null?void 0:o.title} (${o==null?void 0:o.publishedAt})`)}h=T.nextPageToken,d++,await new Promise(A=>setTimeout(A,100))}while(h&&d<g);return console.log(`✅ 最初の動画検索完了: ${(o==null?void 0:o.title)||"なし"}`),o}catch(i){return console.error("最初の動画取得エラー:",i),null}}async function IS(s){try{const e=hs(rn,"bgm_channels"),i=$d(e,Zd("channelId","==",s));return!(await Ta(i)).empty}catch(e){return console.error("チャンネル存在チェックエラー:",e),!1}}function VS(s,e){const i=["BGM","instrumental","background music","ambient","lo-fi","lofi","chill","relaxing","study music","meditation","sleep music","インスト","インストゥルメンタル","ヒーリング","リラックス","作業用","勉強用","睡眠用","瞑想","アンビエント"],a=["lyrics","歌詞","vocal","sing","singing","song","rap","talk","podcast","ボーカル","歌","歌い手","トーク","ラップ"],o=`${s} ${e}`.toLowerCase();for(const h of a)if(o.includes(h.toLowerCase()))return!1;for(const h of i)if(o.includes(h.toLowerCase()))return!0;return!1}async function MS(s){var e,i,a,o,h,d,g,_;try{if(!s)return console.error("uploadsPlaylistId is required"),null;const p="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",T="https://www.googleapis.com/youtube/v3/playlistItems";let A=null,w="",k=0;const B=5;console.log(`🔥 最も人気の動画を検索中: ${s}`);do{const G=new URLSearchParams({key:p,playlistId:s,part:"snippet",maxResults:50});w&&G.append("pageToken",w);const Y=new AbortController,ft=setTimeout(()=>Y.abort(),1e4),at=await fetch(`${T}?${G}`,{signal:Y.signal});clearTimeout(ft);const lt=await at.json();if(!at.ok)throw(i=(e=lt.error)==null?void 0:e.message)!=null&&i.includes("quota")?new Error("YouTube API の使用量制限に達しました。しばらく待ってから再試行してください。"):new Error(((a=lt.error)==null?void 0:a.message)||"API呼び出しエラー");if(lt.items&&lt.items.length>0){const X=lt.items.map(dt=>dt.snippet.resourceId.videoId),Z=await OS(X);for(let dt=0;dt<lt.items.length;dt++){const N=lt.items[dt],S=Z[N.snippet.resourceId.videoId];if(S){const D=parseInt(S.viewCount)||0;(!A||D>A.viewCount)&&(A={title:N.snippet.title,viewCount:D,likeCount:parseInt(S.likeCount)||0,commentCount:parseInt(S.commentCount)||0,publishedAt:N.snippet.publishedAt,thumbnailUrl:((h=(o=N.snippet.thumbnails)==null?void 0:o.high)==null?void 0:h.url)||((g=(d=N.snippet.thumbnails)==null?void 0:d.default)==null?void 0:g.url),videoId:N.snippet.resourceId.videoId,url:`https://www.youtube.com/watch?v=${N.snippet.resourceId.videoId}`})}}console.log(`   ページ ${k+1}: ${lt.items.length}本の動画をチェック`),console.log(`   現在の最人気動画: ${A==null?void 0:A.title} (${(_=A==null?void 0:A.viewCount)==null?void 0:_.toLocaleString()}回再生)`)}w=lt.nextPageToken,k++,await new Promise(X=>setTimeout(X,200))}while(w&&k<B);return console.log(`✅ 最人気動画検索完了: ${(A==null?void 0:A.title)||"なし"}`),A}catch(p){return console.error("最人気動画取得エラー:",p),null}}async function OS(s){var e;try{const i="AIzaSyDN1sTee52txGVYpQwSWgAD7FUr4NNJinQ",a="https://www.googleapis.com/youtube/v3/videos",o=new URLSearchParams({key:i,id:s.join(","),part:"statistics"}),h=await fetch(`${a}?${o}`),d=await h.json();if(!h.ok)throw new Error(((e=d.error)==null?void 0:e.message)||"API呼び出しエラー");const g={};return d.items&&d.items.forEach(_=>{g[_.id]=_.statistics}),g}catch(i){return console.error("動画統計取得エラー:",i),{}}}function jS(s,e){try{const i=e?new Date(e.publishedAt):new Date(s.publishedAt),o=(new Date-i)/(1e3*60*60*24*30);if(o<=0)return 0;const d=s.subscriberCount/o/1e3*100;return Math.round(Math.min(d,999))}catch(i){return console.error("成長率計算エラー:",i),0}}async function kS(s){try{const e=hs(rn,"bgm_channels");return await aS(e,{...s,createdAt:new Date,addedManually:!0}),!0}catch(e){throw console.error("Firestore保存エラー:",e),e}}async function R_(s){try{const e=gr(rn,"bgm_channels",s);await x_(e,{isViewed:!0,viewedAt:oS()}),console.log(`Channel marked as viewed: ${s}`)}catch(e){throw console.error("Error marking channel as viewed:",e),e}}async function US(s,e,i=null){try{const a=gr(rn,"bgm_channels",s),o={status:e,statusUpdatedAt:new Date,statusUpdatedBy:"user"};return i&&(o.rejectionReason=i),await x_(a,o),console.log(`✅ Updated channel status: ${s} -> ${e}`),!0}catch(a){return console.error(`Error updating channel status for ${s}:`,a),!1}}async function Hl(s="all",e={}){try{let i=hs(rn,"bgm_channels");s!=="all"&&s!=="unset"&&(i=$d(i,Zd("status","==",s)));const a=await Ta(i),o=[];a.forEach(d=>{const g=d.data();o.push({id:d.id,...g})});let h=o;return s==="unset"&&(h=o.filter(d=>!d.status||d.status===null||d.status===void 0||d.status==="")),console.log(`📊 Found ${h.length} channels with status: ${s}`),h}catch(i){return console.error("Error getting channels by status:",i),[]}}const fa=Object.freeze(Object.defineProperty({__proto__:null,addChannelToFirestore:kS,calculateGrowthRate:jS,checkChannelExists:IS,extractChannelId:CS,fetchChannelFirstVideo:DS,fetchChannelInfo:NS,fetchChannelMostPopularVideo:MS,getChannelsByStatus:Hl,isBGMChannel:VS,markChannelAsViewed:R_,updateChannelStatus:US},Symbol.toStringTag,{value:"Module"})),LS=({channel:s,onStatusChange:e})=>{const[i,a]=Tt.useState(!1),[o,h]=Tt.useState(""),d=w=>{switch(w){case"tracking":return{text:"トラッキング中",className:"bg-green-100 text-green-800 border border-green-300"};case"non-tracking":return{text:"対象外",className:"bg-yellow-100 text-yellow-800 border border-yellow-300"};case"rejected":return{text:"除外済み",className:"bg-red-100 text-red-800 border border-red-300"};default:return null}},g=w=>{w.stopPropagation(),e(s.id,"tracking")},_=w=>{w.stopPropagation(),e(s.id,"non-tracking")},p=w=>{w.stopPropagation(),a(!0)},T=()=>{e(s.id,"rejected",o||"手動で除外"),a(!1),h("")},A=d(s.status);return A?v.jsx("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${A.className}`,children:A.text}):v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex gap-1",children:[v.jsx("button",{onClick:g,className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 border border-green-300 rounded hover:bg-green-200 transition-colors min-w-[48px]",title:"トラッキング対象に追加",children:"追跡"}),v.jsx("button",{onClick:_,className:"px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-300 rounded hover:bg-yellow-200 transition-colors min-w-[48px]",title:"トラッキング対象外に設定",children:"対象外"}),v.jsx("button",{onClick:p,className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 border border-red-300 rounded hover:bg-red-200 transition-colors min-w-[48px]",title:"完全に除外",children:"除外"})]}),i&&v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:()=>a(!1),children:v.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",onClick:w=>w.stopPropagation(),children:[v.jsx("h3",{className:"text-lg font-semibold mb-4",children:"チャンネルを除外"}),v.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["「",s.channelTitle,"」を除外します。理由を入力してください（任意）："]}),v.jsx("textarea",{value:o,onChange:w=>h(w.target.value),className:"w-full p-3 border rounded-lg resize-none h-20 text-sm",placeholder:"除外理由（例：BGM以外のコンテンツ、品質が低い、など）"}),v.jsxs("div",{className:"flex gap-3 mt-4",children:[v.jsx("button",{onClick:()=>a(!1),className:"flex-1 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"キャンセル"}),v.jsx("button",{onClick:T,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"除外する"})]})]})})]})},C_=({channel:s,onChannelClick:e,onAddToTracking:i,onStatusChange:a})=>{const[o,h]=Tt.useState(s.isViewed||!1),d=A=>A>=1e6?`${(A/1e6).toFixed(1)}M`:A>=1e3?`${(A/1e3).toFixed(1)}K`:A.toString(),g=A=>A?(A.toDate?A.toDate():new Date(A)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"}):"-",_=A=>A>=50?"bg-green-100 text-green-800":A>=20?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",p=A=>{if(o||!A)return!1;const w=A.toDate?A.toDate():new Date(A);return(Date.now()-w.getTime())/(1e3*60*60*24)<=7},T=async()=>{if(!o&&s.id)try{await R_(s.id),h(!0)}catch(A){console.error("Error marking channel as viewed:",A)}e&&e(s)};return v.jsx("div",{className:"channel-card cursor-pointer",onClick:T,children:v.jsxs("div",{className:"flex items-start gap-4",children:[v.jsx("img",{src:s.thumbnailUrl||"/default-avatar.png",alt:s.channelTitle,className:"w-16 h-16 rounded-full object-cover flex-shrink-0",onError:A=>{A.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[v.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.channelTitle}),p(s.createdAt)&&v.jsx("span",{className:"inline-block px-2 py-1 text-xs font-bold bg-red-100 text-red-800 rounded-full animate-pulse",children:"NEW!"})]}),v.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[v.jsxs("span",{className:"text-sm text-gray-600",children:[d(s.subscriberCount)," 登録者"]}),v.jsx("span",{className:"text-sm text-gray-500",children:"•"}),v.jsxs("span",{className:"text-sm text-gray-600",children:["開設: ",g(s.publishedAt)]})]}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.keywords&&s.keywords.slice(0,3).map((A,w)=>v.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:A},w))}),s.latestVideo&&v.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[v.jsx("span",{className:"font-medium",children:"最新:"})," ",s.latestVideo.title]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-medium rounded-full ${_(s.growthRate||0)}`,children:["成長率 ",s.growthRate||0,"%"]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx(LS,{channel:s,onStatusChange:a||(async(A,w,k)=>{const{updateChannelStatus:B}=await ha(async()=>{const{updateChannelStatus:G}=await Promise.resolve().then(()=>fa);return{updateChannelStatus:G}},void 0);await B(A,w,k),window.location.reload()})}),v.jsx("button",{onClick:A=>{A.stopPropagation(),window.open(s.channelUrl,"_blank")},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"訪問 →"})]})]})]})]})})},PS=({channels:s,onChannelClick:e,onAddToTracking:i,onStatusChange:a})=>s.length===0?v.jsxs("div",{className:"text-center py-16",children:[v.jsx("div",{className:"text-6xl mb-4",children:"📈"}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"まだチャンネルが追加されていません"}),v.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"上記の検索欄からYouTubeチャンネルを追加して分析を開始してください"})]}):v.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:s.map(o=>v.jsx(C_,{channel:o,onChannelClick:e,onAddToTracking:i,onStatusChange:a},o.channelId))}),zS=({channel:s,isOpen:e,onClose:i,onRemove:a})=>{if(!e||!s)return null;const o=g=>g>=1e6?`${(g/1e6).toFixed(1)}M`:g>=1e3?`${(g/1e3).toFixed(1)}K`:g.toString(),h=g=>g?(g.toDate?g.toDate():new Date(g)).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}):"-",d=()=>{confirm("このチャンネルを追跡リストから削除しますか？")&&(a(s.id),i())};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"チャンネル詳細"}),v.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"×"})]}),v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex items-start gap-6 mb-6",children:[v.jsx("img",{src:s.thumbnailUrl||"/default-avatar.png",alt:s.channelTitle,className:"w-24 h-24 rounded-full object-cover",onError:g=>{g.target.src="https://via.placeholder.com/96x96/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h4",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.channelTitle}),v.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"登録者数:"}),v.jsx("span",{className:"ml-2 font-semibold",children:o(s.subscriberCount)})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"総再生回数:"}),v.jsx("span",{className:"ml-2 font-semibold",children:o(s.totalViews||0)})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"動画数:"}),v.jsx("span",{className:"ml-2 font-semibold",children:s.videoCount||"-"})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"開設日:"}),v.jsx("span",{className:"ml-2 font-semibold",children:h(s.publishedAt)})]}),v.jsxs("div",{children:[v.jsx("span",{className:"text-gray-600",children:"初投稿:"}),v.jsx("span",{className:"ml-2 font-semibold",children:h(s.firstVideoDate)})]}),v.jsxs("div",{className:"col-span-2",children:[v.jsx("span",{className:"text-gray-600",children:"成長率:"}),v.jsxs("span",{className:"ml-2 font-semibold text-blue-600",children:[s.growthRate||0,"%"]})]})]})]})]}),s.keywords&&s.keywords.length>0&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-2",children:"タグ"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:s.keywords.map((g,_)=>v.jsx("span",{className:"inline-block px-3 py-1 text-sm bg-blue-100 text-blue-800 rounded-full",children:g},_))})]}),s.latestVideo&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"最新動画"}),v.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[v.jsx("h6",{className:"font-medium text-gray-900 mb-1",children:s.latestVideo.title}),v.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["投稿日: ",h(s.latestVideo.publishedAt)]}),v.jsx("a",{href:s.latestVideo.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"動画を見る →"})]})]}),s.mostPopularVideo&&v.jsxs("div",{className:"mb-6",children:[v.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"🔥 最も人気の動画"}),v.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-lg p-4 border border-orange-200",children:v.jsxs("div",{className:"flex gap-4",children:[s.mostPopularVideo.thumbnailUrl&&v.jsx("img",{src:s.mostPopularVideo.thumbnailUrl,alt:s.mostPopularVideo.title,className:"w-24 h-18 rounded object-cover flex-shrink-0"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("h6",{className:"font-medium text-gray-900 mb-2 line-clamp-2",children:s.mostPopularVideo.title}),v.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[v.jsxs("span",{className:"flex items-center gap-1",children:["👁️ ",o(s.mostPopularVideo.viewCount)," 回視聴"]}),s.mostPopularVideo.likeCount>0&&v.jsxs("span",{className:"flex items-center gap-1",children:["👍 ",o(s.mostPopularVideo.likeCount)]}),s.mostPopularVideo.commentCount>0&&v.jsxs("span",{className:"flex items-center gap-1",children:["💬 ",o(s.mostPopularVideo.commentCount)]})]}),v.jsx("a",{href:s.mostPopularVideo.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 text-sm font-medium",children:"動画を見る →"})]})]})})]})]}),v.jsxs("div",{className:"flex gap-3 p-6 border-t border-gray-200",children:[v.jsx("button",{onClick:()=>window.open(s.channelUrl,"_blank"),className:"btn-primary flex-1",children:"チャンネル訪問"}),v.jsx("button",{onClick:d,className:"px-4 py-2 bg-red-100 text-red-700 font-medium rounded-lg hover:bg-red-200 transition-colors",children:"追跡削除"})]})]})})},BS=()=>{const[s,e]=Tt.useState({youtubeApiKey:"",githubToken:"",searchKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music"],collectionFrequency:"daily",keywordCount:8,videosPerKeyword:40,maxChannelsPerRun:150,monthsThreshold:3,minSubscribers:1e3,maxSubscribers:5e5,minVideos:5,minGrowthRate:10,bgmKeywords:["BGM","instrumental","background music","ambient","lo-fi","chill","relaxing","study music","meditation","sleep music"],bgmExclusions:["lyrics","歌詞","vocal","sing","rap","talk","podcast"],trackingFrequency:"weekly",trackingRetentionDays:365,theme:"light",defaultSort:"growthRate",itemsPerPage:20,enableApiUsageDisplay:!0,maxDailyApiCalls:1e4}),[i,a]=Tt.useState(!0),[o,h]=Tt.useState(!1),[d,g]=Tt.useState(""),[_,p]=Tt.useState("basic"),[T,A]=Tt.useState("unchecked");Tt.useEffect(()=>{w()},[]);const w=async()=>{try{const X=await rS(gr(rn,"settings","app_config"));X.exists()&&e(Z=>({...Z,...X.data()})),w_()&&(A("valid"),e(Z=>({...Z,githubToken:"●●●●●●●●●●●●"})))}catch(X){console.error("設定の読み込みエラー:",X),g("設定の読み込みに失敗しました")}finally{a(!1)}},k=async()=>{try{if(h(!0),s.githubToken&&s.githubToken!=="●●●●●●●●●●●●")if(await TS(s.githubToken))I0(s.githubToken),A("valid"),g("設定を保存しました（GitHub Token有効）");else{A("invalid"),g("GitHub Tokenが無効です");return}else s.githubToken===""&&(I0(""),A("unchecked"));const X={...s};delete X.githubToken,await hd(gr(rn,"settings","app_config"),X),(!s.githubToken||s.githubToken==="●●●●●●●●●●●●")&&g("設定を保存しました"),setTimeout(()=>g(""),3e3)}catch(X){console.error("設定の保存エラー:",X),g("設定の保存に失敗しました")}finally{h(!1)}},B=async X=>{try{const Z=await Ta(hs(rn,"channels")),dt=await Ta(hs(rn,"tracking_data")),N=Z.docs.map(O=>({id:O.id,...O.data()})),S=dt.docs.map(O=>({id:O.id,...O.data()})),D={channels:N,tracking:S,exportedAt:new Date().toISOString()};if(X==="csv"){const O=G(N);Y(O,"youtube-bgm-channels.csv","text/csv")}else{const O=JSON.stringify(D,null,2);Y(O,"youtube-bgm-data.json","application/json")}g(`${X.toUpperCase()}でエクスポートしました`)}catch(Z){console.error("エクスポートエラー:",Z),g("エクスポートに失敗しました")}},G=X=>{const Z=["チャンネル名","チャンネルID","登録者数","動画数","成長率(%)","開設日","最初の動画日","キーワード","URL"],dt=X.map(N=>[N.channelTitle||"",N.channelId||"",N.subscriberCount||0,N.videoCount||0,N.growthRate||0,N.publishedAt?new Date(N.publishedAt).toLocaleDateString("ja-JP"):"",N.firstVideoDate?new Date(N.firstVideoDate).toLocaleDateString("ja-JP"):"",(N.keywords||[]).join("; "),N.channelUrl||""]);return[Z,...dt].map(N=>N.map(S=>`"${String(S).replace(/"/g,'""')}"`).join(",")).join(`
`)},Y=(X,Z,dt)=>{const N=new Blob([X],{type:dt}),S=URL.createObjectURL(N),D=document.createElement("a");D.href=S,D.download=Z,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(S)},ft=X=>{const Z=prompt(`新しい${X==="search"?"検索":X==="bgm"?"BGM":"除外"}キーワードを入力してください:`);if(Z&&Z.trim()){const dt=X==="search"?"searchKeywords":X==="bgm"?"bgmKeywords":"bgmExclusions";e(N=>({...N,[dt]:[...N[dt],Z.trim()]}))}},at=(X,Z)=>{const dt=X==="search"?"searchKeywords":X==="bgm"?"bgmKeywords":"bgmExclusions";e(N=>({...N,[dt]:N[dt].filter((S,D)=>D!==Z)}))},lt=[{id:"basic",label:"基本設定",icon:"⚙️"},{id:"collection",label:"収集設定",icon:"🔍"},{id:"filtering",label:"フィルタリング",icon:"📊"},{id:"bgm",label:"BGM判定",icon:"🎵"},{id:"tracking",label:"トラッキング",icon:"📈"},{id:"display",label:"表示設定",icon:"🎨"},{id:"data",label:"データ管理",icon:"💾"},{id:"security",label:"セキュリティ",icon:"🔒"}];return i?v.jsx("div",{className:"flex items-center justify-center min-h-96",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):v.jsx("div",{className:"max-w-6xl mx-auto p-6",children:v.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[v.jsxs("div",{className:"border-b border-gray-200 p-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"設定"}),v.jsx("p",{className:"text-gray-600 mt-1",children:"アプリケーションの動作をカスタマイズできます"}),d&&v.jsx("div",{className:`mt-4 p-3 rounded-md ${d.includes("失敗")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"}`,children:d})]}),v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"w-64 border-r border-gray-200 p-4",children:v.jsx("nav",{className:"space-y-1",children:lt.map(X=>v.jsxs("button",{onClick:()=>p(X.id),className:`w-full text-left px-3 py-2 rounded-md text-sm font-medium transition-colors ${_===X.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[v.jsx("span",{className:"mr-2",children:X.icon}),X.label]},X.id))})}),v.jsxs("div",{className:"flex-1 p-6",children:[_==="basic"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"基本設定"}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube API キー"}),v.jsx("input",{type:"password",value:s.youtubeApiKey,onChange:X=>e(Z=>({...Z,youtubeApiKey:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"YouTube Data API v3 キーを入力"}),v.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Google Cloud Consoleで取得したAPIキーを設定してください"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GitHub Personal Access Token"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"password",value:s.githubToken,onChange:X=>e(Z=>({...Z,githubToken:X.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-blue-500 focus:border-blue-500 pr-10 ${T==="valid"?"border-green-300":T==="invalid"?"border-red-300":"border-gray-300"}`,placeholder:"ghp_xxxxxxxxxxxxxxxxxx"}),v.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:[T==="valid"&&v.jsx("span",{className:"text-green-500",children:"✓"}),T==="invalid"&&v.jsx("span",{className:"text-red-500",children:"✗"})]})]}),v.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"不具合・要望報告機能でGitHub Issuesに投稿するために必要です"}),v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"GitHub Settings → Developer settings → Personal access tokens で作成"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"検索キーワード"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.searchKeywords.map((X,Z)=>v.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:[X,v.jsx("button",{onClick:()=>at("search",Z),className:"ml-1 text-blue-600 hover:text-blue-800",children:"×"})]},Z))}),v.jsx("button",{onClick:()=>ft("search"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),_==="collection"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"収集設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"収集頻度"}),v.jsxs("select",{value:s.collectionFrequency,onChange:X=>e(Z=>({...Z,collectionFrequency:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"daily",children:"毎日"}),v.jsx("option",{value:"weekly",children:"毎週"}),v.jsx("option",{value:"monthly",children:"毎月"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"使用キーワード数"}),v.jsx("input",{type:"number",value:s.keywordCount,onChange:X=>e(Z=>({...Z,keywordCount:parseInt(X.target.value)||8})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"20"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"キーワードあたり動画数"}),v.jsx("input",{type:"number",value:s.videosPerKeyword,onChange:X=>e(Z=>({...Z,videosPerKeyword:parseInt(X.target.value)||40})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"10",max:"100"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大チャンネル処理数"}),v.jsx("input",{type:"number",value:s.maxChannelsPerRun,onChange:X=>e(Z=>({...Z,maxChannelsPerRun:parseInt(X.target.value)||150})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"50",max:"500"})]})]})]}),_==="filtering"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"フィルタリング設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"チャンネル作成期間（ヶ月）"}),v.jsx("input",{type:"number",value:s.monthsThreshold,onChange:X=>e(Z=>({...Z,monthsThreshold:parseInt(X.target.value)||3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1",max:"12"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小登録者数"}),v.jsx("input",{type:"number",value:s.minSubscribers,onChange:X=>e(Z=>({...Z,minSubscribers:parseInt(X.target.value)||1e3})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"100"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大登録者数"}),v.jsx("input",{type:"number",value:s.maxSubscribers,onChange:X=>e(Z=>({...Z,maxSubscribers:parseInt(X.target.value)||5e5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小動画数"}),v.jsx("input",{type:"number",value:s.minVideos,onChange:X=>e(Z=>({...Z,minVideos:parseInt(X.target.value)||5})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小成長率（%）"}),v.jsx("input",{type:"number",value:s.minGrowthRate,onChange:X=>e(Z=>({...Z,minGrowthRate:parseInt(X.target.value)||10})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"0"})]})]})]}),_==="bgm"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"BGM判定設定"}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"BGM関連キーワード"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.bgmKeywords.map((X,Z)=>v.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-800 text-sm rounded-full",children:[X,v.jsx("button",{onClick:()=>at("bgm",Z),className:"ml-1 text-green-600 hover:text-green-800",children:"×"})]},Z))}),v.jsx("button",{onClick:()=>ft("bgm"),className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"+ キーワードを追加"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"除外キーワード"}),v.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:s.bgmExclusions.map((X,Z)=>v.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:[X,v.jsx("button",{onClick:()=>at("exclusion",Z),className:"ml-1 text-red-600 hover:text-red-800",children:"×"})]},Z))}),v.jsx("button",{onClick:()=>ft("exclusion"),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"+ キーワードを追加"})]})]}),_==="tracking"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"トラッキング設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"トラッキング頻度"}),v.jsxs("select",{value:s.trackingFrequency,onChange:X=>e(Z=>({...Z,trackingFrequency:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"daily",children:"毎日"}),v.jsx("option",{value:"weekly",children:"毎週"}),v.jsx("option",{value:"monthly",children:"毎月"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"データ保持期間（日）"}),v.jsx("input",{type:"number",value:s.trackingRetentionDays,onChange:X=>e(Z=>({...Z,trackingRetentionDays:parseInt(X.target.value)||365})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"30",max:"1095"})]})]})]}),_==="display"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"表示設定"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"テーマ"}),v.jsxs("select",{value:s.theme,onChange:X=>e(Z=>({...Z,theme:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"light",children:"ライト"}),v.jsx("option",{value:"dark",children:"ダーク"}),v.jsx("option",{value:"auto",children:"自動"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"デフォルト並び順"}),v.jsxs("select",{value:s.defaultSort,onChange:X=>e(Z=>({...Z,defaultSort:X.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:"growthRate",children:"成長率順"}),v.jsx("option",{value:"subscriberCount",children:"登録者数順"}),v.jsx("option",{value:"publishedAt",children:"新着順"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1ページの表示件数"}),v.jsxs("select",{value:s.itemsPerPage,onChange:X=>e(Z=>({...Z,itemsPerPage:parseInt(X.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[v.jsx("option",{value:10,children:"10件"}),v.jsx("option",{value:20,children:"20件"}),v.jsx("option",{value:50,children:"50件"}),v.jsx("option",{value:100,children:"100件"})]})]})]})]}),_==="data"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"データ管理"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[v.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データエクスポート"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"収集したチャンネルデータとトラッキングデータをエクスポートできます"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>B("csv"),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"CSV形式でエクスポート"}),v.jsx("button",{onClick:()=>B("json"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"JSON形式でエクスポート"})]})]}),v.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[v.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"データバックアップ"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"定期的にデータのバックアップを作成することをお勧めします"}),v.jsx("button",{onClick:()=>B("json"),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"今すぐバックアップ"})]})]})]}),_==="security"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"セキュリティ設定"}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsxs("label",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",checked:s.enableApiUsageDisplay,onChange:X=>e(Z=>({...Z,enableApiUsageDisplay:X.target.checked})),className:"mr-2"}),v.jsx("span",{className:"text-sm font-medium text-gray-700",children:"API使用量の表示"})]}),v.jsx("p",{className:"text-sm text-gray-500 ml-6",children:"YouTube API使用量をダッシュボードに表示します"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"1日のAPI呼び出し制限"}),v.jsx("input",{type:"number",value:s.maxDailyApiCalls,onChange:X=>e(Z=>({...Z,maxDailyApiCalls:parseInt(X.target.value)||1e4})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",min:"1000",max:"1000000"}),v.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"YouTube APIの1日あたりのクォータ制限を設定"})]})]})]}),v.jsx("div",{className:"flex justify-end mt-8 pt-6 border-t border-gray-200",children:v.jsx("button",{onClick:k,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:o?"保存中...":"設定を保存"})})]})]})]})})},Bf=({trackingData:s,title:e})=>{var o,h,d,g,_;if(console.log(`TrackingChart for ${e}:`,s),!s||s.length===0)return v.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),v.jsx("div",{className:"text-center py-8 text-gray-500",children:"トラッキングデータがありません"})]});const i=Math.max(...s.map(p=>p.value)),a=Math.min(...s.map(p=>p.value));return console.log(`Chart range for ${e}: ${a} - ${i}`),v.jsxs("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e}),v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"relative h-32 bg-gray-50 rounded p-4",children:[v.jsxs("svg",{width:"100%",height:"100%",className:"overflow-visible",children:[s.length>1&&s.map((p,T)=>{if(T===0)return null;const A=s[T-1],w=(T-1)/(s.length-1)*100,k=T/(s.length-1)*100,B=i===a?50:100-(A.value-a)/(i-a)*80,G=i===a?50:100-(p.value-a)/(i-a)*80;return v.jsx("line",{x1:`${w}%`,y1:`${B}%`,x2:`${k}%`,y2:`${G}%`,stroke:"#3b82f6",strokeWidth:"2",className:"transition-all duration-300"},T)}),s.map((p,T)=>{const A=T/(s.length-1)*100,w=i===a?50:100-(p.value-a)/(i-a)*80,k=T===s.length-1;return v.jsx("circle",{cx:`${A}%`,cy:`${w}%`,r:"4",fill:k?"#1d4ed8":"#3b82f6",className:"transition-all duration-300"},T)})]}),v.jsx("div",{className:"flex justify-between mt-2",children:s.map((p,T)=>v.jsx("div",{className:"text-xs text-gray-600 text-center flex-1",children:new Date(p.date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})},T))})]})}),v.jsxs("div",{className:"mb-4 max-h-32 overflow-y-auto",children:[v.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"履歴データ"}),v.jsx("div",{className:"space-y-1",children:s.map((p,T)=>v.jsxs("div",{className:"flex justify-between text-xs",children:[v.jsx("span",{className:"text-gray-600",children:new Date(p.date).toLocaleDateString("ja-JP")}),v.jsx("span",{className:"font-medium text-gray-900",children:p.value.toLocaleString()})]},T))})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center border-t pt-4",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-600",children:"最新"}),v.jsx("div",{className:"text-lg font-semibold text-blue-600",children:(o=s[s.length-1])==null?void 0:o.value.toLocaleString()})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-600",children:"最高"}),v.jsx("div",{className:"text-lg font-semibold text-green-600",children:i.toLocaleString()})]}),v.jsxs("div",{children:[v.jsx("div",{className:"text-sm text-gray-600",children:"成長"}),v.jsx("div",{className:`text-lg font-semibold ${s.length>1?((h=s[s.length-1])==null?void 0:h.value)>((d=s[0])==null?void 0:d.value)?"text-green-600":"text-red-600":"text-gray-600"}`,children:s.length>1?`${((((g=s[s.length-1])==null?void 0:g.value)/((_=s[0])==null?void 0:_.value)-1)*100).toFixed(1)}%`:"N/A"})]})]})]})},qS=({selectedChannelId:s})=>{const[e,i]=Tt.useState({subscriberCount:[],videoCount:[],totalViews:[]}),[a,o]=Tt.useState(!1),[h,d]=Tt.useState([]),[g,_]=Tt.useState(!0),[p,T]=Tt.useState(s);Tt.useEffect(()=>{A()},[]),Tt.useEffect(()=>{p&&w(p)},[p]);const A=async()=>{try{_(!0);const{getChannelsByStatus:B}=await ha(async()=>{const{getChannelsByStatus:Y}=await Promise.resolve().then(()=>fa);return{getChannelsByStatus:Y}},void 0),G=await B("tracking");d(G)}catch(B){console.error("追跡チャンネル一覧の取得エラー:",B)}finally{_(!1)}},w=async B=>{try{o(!0),console.log("Loading tracking data for:",B);try{const ft=(await Ta($d(hs(rn,"tracking_data"),Zd("channelId","==",B)))).docs.map(at=>at.data());if(console.log("Found tracking data:",ft),ft.length>0){const at=ft.filter(N=>N.recordedAt).sort((N,S)=>{const D=N.recordedAt.toDate?N.recordedAt.toDate():new Date(N.recordedAt),O=S.recordedAt.toDate?S.recordedAt.toDate():new Date(S.recordedAt);return D-O}),lt=at.map(N=>({date:N.recordedAt.toDate?N.recordedAt.toDate():new Date(N.recordedAt),value:N.subscriberCount||0})),X=at.map(N=>({date:N.recordedAt.toDate?N.recordedAt.toDate():new Date(N.recordedAt),value:N.videoCount||0})),Z=at.map(N=>({date:N.recordedAt.toDate?N.recordedAt.toDate():new Date(N.recordedAt),value:N.totalViews||0})),dt={subscriberCount:lt,videoCount:X,totalViews:Z};console.log("Setting real tracking data:",dt),i(dt);return}}catch(Y){console.log("Failed to fetch real tracking data, using mock data:",Y)}const G=h.find(Y=>Y.channelId===B);if(console.log("Using channel data for mock tracking:",G),G){const Y=new Date,ft=new Date(Y-7*24*60*60*1e3),at=new Date(Y-14*24*60*60*1e3),lt=G.subscriberCount||0,X=G.videoCount||0,Z=G.totalViews||0,dt={subscriberCount:[{date:at,value:Math.max(0,Math.floor(lt*.95))},{date:ft,value:Math.max(0,Math.floor(lt*.98))},{date:Y,value:lt}],videoCount:[{date:at,value:Math.max(0,X-2)},{date:ft,value:Math.max(0,X-1)},{date:Y,value:X}],totalViews:[{date:at,value:Math.max(0,Math.floor(Z*.9))},{date:ft,value:Math.max(0,Math.floor(Z*.95))},{date:Y,value:Z}]};console.log("Setting simulated tracking data:",dt),i(dt)}}catch(G){console.error("トラッキングデータの取得エラー:",G)}finally{o(!1)}};if(a&&p)return v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"トラッキングデータを読み込み中..."})]});if(g)return v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"トラッキングチャンネルを読み込み中..."})]});if(!p)return v.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-8",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4",children:"📊"}),v.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"チャンネルを選択してください"}),v.jsx("p",{className:"text-gray-600 mb-6",children:"追跡中のチャンネルから1つを選択すると、成長データを表示します"}),h.length>0&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map(B=>v.jsx("div",{onClick:()=>{console.log("Selecting channel:",B.channelId,B),T(B.channelId),w(B.channelId)},className:"cursor-pointer p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors",children:v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:B.thumbnailUrl||"/default-avatar.png",alt:B.channelTitle,className:"w-12 h-12 rounded-full object-cover",onError:G=>{G.target.src="https://via.placeholder.com/48x48/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{className:"text-left",children:[v.jsx("h4",{className:"font-medium text-gray-900 truncate",children:B.channelTitle}),v.jsxs("p",{className:"text-sm text-gray-600",children:["ステータス更新: ",B.statusUpdatedAt?new Date(B.statusUpdatedAt.toDate?B.statusUpdatedAt.toDate():B.statusUpdatedAt).toLocaleDateString("ja-JP"):"Unknown"]})]})]})},B.id))}),h.length===0&&v.jsxs("p",{className:"text-gray-500",children:["まだトラッキング中のチャンネルがありません。",v.jsx("br",{}),"チャンネル一覧からチャンネルを「追跡」ステータスに設定してください。"]})]})});const k=h.find(B=>B.channelId===p);return v.jsxs("div",{className:"space-y-6",children:[k&&v.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("img",{src:k.thumbnailUrl||"/default-avatar.png",alt:k.channelTitle,className:"w-16 h-16 rounded-full object-cover",onError:B=>{B.target.src="https://via.placeholder.com/64x64/e5e7eb/9ca3af?text=🎵"}}),v.jsxs("div",{children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:k.channelTitle}),v.jsxs("p",{className:"text-gray-600",children:["ステータス更新: ",k.statusUpdatedAt?new Date(k.statusUpdatedAt.toDate?k.statusUpdatedAt.toDate():k.statusUpdatedAt).toLocaleDateString("ja-JP"):"Unknown"]})]})]}),v.jsx("button",{onClick:()=>T(null),className:"px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",children:"← チャンネル一覧に戻る"})]})}),v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:[v.jsx(Bf,{trackingData:e.subscriberCount,title:"📈 登録者数の推移"}),v.jsx(Bf,{trackingData:e.videoCount,title:"🎥 動画数の推移"}),v.jsx(Bf,{trackingData:e.totalViews,title:"👁️ 総再生回数の推移"})]})]})},HS=()=>{var w,k,B;const[s,e]=Tt.useState("tracking"),[i,a]=Tt.useState([]),[o,h]=Tt.useState(!0),[d,g]=Tt.useState({tracking:0,"non-tracking":0,rejected:0});Tt.useEffect(()=>{_()},[s]),Tt.useEffect(()=>{p()},[]);const _=async()=>{try{h(!0);const G=await Hl(s);a(G)}catch(G){console.error("チャンネル履歴読み込みエラー:",G)}finally{h(!1)}},p=async()=>{try{const[G,Y,ft]=await Promise.all([Hl("tracking"),Hl("non-tracking"),Hl("rejected")]);g({tracking:G.length,"non-tracking":Y.length,rejected:ft.length})}catch(G){console.error("統計読み込みエラー:",G)}},T=[{id:"tracking",label:"トラッキング中",icon:"📊",color:"green",count:d.tracking},{id:"non-tracking",label:"対象外",icon:"📋",color:"yellow",count:d["non-tracking"]},{id:"rejected",label:"除外済み",icon:"❌",color:"red",count:d.rejected}],A=G=>G?(G.toDate?G.toDate():new Date(G)).toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"チャンネル履歴"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"ステータス別にチャンネルの履歴を確認できます"})]}),v.jsx("div",{className:"card",children:v.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(G=>{const Y=s===G.id,ft={green:Y?"bg-green-100 text-green-800 border-green-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-green-50 hover:text-green-700",yellow:Y?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-yellow-50 hover:text-yellow-700",red:Y?"bg-red-100 text-red-800 border-red-300":"bg-gray-50 text-gray-700 border-gray-200 hover:bg-red-50 hover:text-red-700"};return v.jsxs("button",{onClick:()=>e(G.id),className:`px-4 py-3 rounded-lg border font-medium transition-all duration-200 flex items-center gap-2 ${ft[G.color]}`,children:[v.jsx("span",{className:"text-lg",children:G.icon}),v.jsx("span",{children:G.label}),v.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Y?"bg-white bg-opacity-50":"bg-gray-200"}`,children:G.count})]},G.id)})})}),v.jsxs("div",{className:"card",children:[v.jsx("div",{className:"mb-4",children:v.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[((w=T.find(G=>G.id===s))==null?void 0:w.label)||"チャンネル"," (",i.length,"件)"]})}),o?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"読み込み中..."})]}):i.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"text-6xl mb-4",children:((k=T.find(G=>G.id===s))==null?void 0:k.icon)||"📋"}),v.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:[(B=T.find(G=>G.id===s))==null?void 0:B.label,"のチャンネルがありません"]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"チャンネルの仕分けを行うと、ここに表示されます"})]}):v.jsx("div",{className:"space-y-4",children:i.map(G=>{var Y;return v.jsxs("div",{className:"relative",children:[v.jsx(C_,{channel:G,onChannelClick:()=>{},onAddToTracking:()=>{},showStatusHistory:!0}),v.jsxs("div",{className:"mt-2 px-4 py-2 bg-gray-50 dark:bg-gray-800 rounded-lg text-sm",children:[v.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-400",children:[v.jsxs("span",{children:["ステータス: ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:((Y=T.find(ft=>ft.id===G.status))==null?void 0:Y.label)||G.status||"未設定"})]}),v.jsxs("span",{children:["更新日時: ",A(G.statusUpdatedAt)]})]}),G.status==="rejected"&&G.rejectionReason&&v.jsx("div",{className:"mt-2 p-2 bg-red-50 dark:bg-red-900/20 rounded border-l-4 border-red-300",children:v.jsxs("span",{className:"text-red-700 dark:text-red-300 text-sm",children:[v.jsx("strong",{children:"除外理由:"})," ",G.rejectionReason]})}),G.statusUpdatedBy&&v.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["更新者: ",G.statusUpdatedBy]})]})]},G.id)})})]}),v.jsx("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:v.jsxs("p",{children:["合計: ",d.tracking+d["non-tracking"]+d.rejected," チャンネル | トラッキング中: ",d.tracking," | 対象外: ",d["non-tracking"]," | 除外済み: ",d.rejected]})})]})};function GS(){const[s,e]=Tt.useState([]),[i,a]=Tt.useState([]),[o,h]=Tt.useState(!0),[d,g]=Tt.useState(null),[_,p]=Tt.useState(null),[T,A]=Tt.useState(new Set),[w,k]=Tt.useState("channels"),[B,G]=Tt.useState(null),[Y,ft]=Tt.useState({sortBy:"growth_rate",filterBy:"unset",search:""});Tt.useEffect(()=>{at(),lt()},[]),Tt.useEffect(()=>{X()},[s,Y,T]),Tt.useEffect(()=>{Y.filterBy!=="all"&&Y.filterBy!=="growing"&&Y.filterBy!=="large"&&Y.filterBy!=="small"&&at()},[Y.filterBy]);const at=async()=>{try{h(!0);const{getChannelsByStatus:C}=await ha(async()=>{const{getChannelsByStatus:R}=await Promise.resolve().then(()=>fa);return{getChannelsByStatus:R}},void 0);let V=[];switch(Y.filterBy){case"unset":V=await C("unset");break;case"tracking":V=await C("tracking");break;case"non-tracking":V=await C("non-tracking");break;case"rejected":V=await C("rejected");break;case"all":V=await C("all");break;default:V=await C("unset");break}e(V)}catch(C){console.error("チャンネルデータの読み込みエラー:",C)}finally{h(!1)}},lt=async()=>{try{const C=await Ta(hs(rn,"tracked_channels")),V=new Set(C.docs.filter(R=>R.data().isActive).map(R=>R.id));A(V)}catch(C){console.error("追跡チャンネルデータの読み込みエラー:",C)}},X=()=>{let C=s.map(V=>({...V,isTracked:T.has(V.channelId)}));switch(Y.search&&(C=C.filter(V=>V.channelTitle.toLowerCase().includes(Y.search.toLowerCase()))),Y.filterBy){case"growing":C=C.filter(V=>(V.growthRate||0)>20);break;case"large":C=C.filter(V=>V.subscriberCount>1e5);break;case"small":C=C.filter(V=>V.subscriberCount<1e4);break}switch(Y.sortBy){case"growth_rate":C.sort((V,R)=>(R.growthRate||0)-(V.growthRate||0));break;case"subscribers":C.sort((V,R)=>R.subscriberCount-V.subscriberCount);break;case"views":C.sort((V,R)=>(R.totalViews||0)-(V.totalViews||0));break;case"added_date":C.sort((V,R)=>{var F,it,ht,Dt;const Bt=((it=(F=V.createdAt)==null?void 0:F.toDate)==null?void 0:it.call(F))||new Date(V.createdAt);return(((Dt=(ht=R.createdAt)==null?void 0:ht.toDate)==null?void 0:Dt.call(ht))||new Date(R.createdAt))-Bt});break}a(C)},Z=async C=>{try{const{extractChannelId:V,fetchChannelInfo:R,fetchChannelFirstVideo:Bt,checkChannelExists:qt,isBGMChannel:F,calculateGrowthRate:it,addChannelToFirestore:ht}=await ha(async()=>{const{extractChannelId:St,fetchChannelInfo:bt,fetchChannelFirstVideo:de,checkChannelExists:Kt,isBGMChannel:gn,calculateGrowthRate:Pn,addChannelToFirestore:Dn}=await Promise.resolve().then(()=>fa);return{extractChannelId:St,fetchChannelInfo:bt,fetchChannelFirstVideo:de,checkChannelExists:Kt,isBGMChannel:gn,calculateGrowthRate:Pn,addChannelToFirestore:Dn}},void 0),Dt=V(C);if(await qt(Dt)){alert("このチャンネルは既に追加されています");return}const J=await R(Dt);if(!F(J.channelTitle,J.description)&&!confirm("このチャンネルはBGM関連ではない可能性があります。追加しますか？"))return;const st=await Bt(J.uploadsPlaylistId),nt=it(J,st),gt={...J,firstVideoDate:(st==null?void 0:st.publishedAt)||J.publishedAt,growthRate:nt,keywords:[],uploadsPlaylistId:J.uploadsPlaylistId};await ht(gt),await at(),alert(`✅ チャンネル「${J.channelTitle}」を追加しました`)}catch(V){console.error("チャンネル追加エラー:",V),alert(`❌ チャンネル追加に失敗しました: ${V.message}`)}},dt=async C=>{try{let V=C;if(C.startsWith("UC")&&C.length===24){const R=s.find(Bt=>Bt.channelId===C);if(R)V=R.id;else{console.error("削除対象のチャンネルが見つかりません");return}}await sS(gr(rn,"bgm_channels",V)),await at(),console.log(`✅ チャンネルを削除しました: ${V}`)}catch(V){console.error("チャンネル削除エラー:",V),alert("チャンネルの削除に失敗しました")}},N=async C=>{try{if(T.has(C.channelId))return;await hd(gr(rn,"tracked_channels",C.channelId),{channelId:C.channelId,channelTitle:C.channelTitle,channelUrl:C.channelUrl,thumbnailUrl:C.thumbnailUrl,addedAt:new Date,isActive:!0}),await hd(gr(rn,"tracking_data",`${C.channelId}_${new Date().toISOString().split("T")[0]}`),{channelId:C.channelId,subscriberCount:C.subscriberCount,videoCount:C.videoCount,totalViews:C.totalViews,recordedAt:new Date}),A(V=>new Set([...V,C.channelId])),console.log(`✅ Added to tracking: ${C.channelTitle}`)}catch(V){console.error("追跡追加エラー:",V)}},S=async C=>{g(C),p({...C,mostPopularVideo:{title:"最も人気の動画（取得中...）",viewCount:0,thumbnailUrl:"",url:""}});try{const{fetchChannelMostPopularVideo:V,fetchChannelInfo:R}=await ha(async()=>{const{fetchChannelMostPopularVideo:F,fetchChannelInfo:it}=await Promise.resolve().then(()=>fa);return{fetchChannelMostPopularVideo:F,fetchChannelInfo:it}},void 0);let Bt=C.uploadsPlaylistId;Bt||(console.log("uploadsPlaylistId not found, fetching channel info..."),Bt=(await R(C.channelId)).uploadsPlaylistId),console.log("Using uploadsPlaylistId:",Bt);const qt=await V(Bt);p(qt?{...C,mostPopularVideo:qt}:{...C,mostPopularVideo:{title:"人気動画が見つかりませんでした",viewCount:0,thumbnailUrl:"",url:""}})}catch(V){console.error("人気動画取得エラー:",V),p({...C,mostPopularVideo:{title:"人気動画の取得に失敗しました",viewCount:0,thumbnailUrl:"",url:""}})}},D=()=>{g(null),p(null)};if(o)return v.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600",children:"チャンネルデータを読み込み中..."})]})});const O=()=>{switch(w){case"settings":return v.jsx(BS,{});case"tracking":return v.jsx(qS,{selectedChannelId:B});case"history":return v.jsx(HS,{});default:return v.jsxs(v.Fragment,{children:[v.jsx(SS,{onAddChannel:Z}),v.jsx(wS,{filters:Y,onFiltersChange:ft}),v.jsx(RS,{channels:i}),v.jsx(PS,{channels:i,onChannelClick:S,onAddToTracking:N,onStatusChange:async(C,V,R)=>{const{updateChannelStatus:Bt}=await ha(async()=>{const{updateChannelStatus:qt}=await Promise.resolve().then(()=>fa);return{updateChannelStatus:qt}},void 0);await Bt(C,V,R),await at()}})]})}};return v.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-colors",children:[v.jsx(AS,{currentView:w,onViewChange:k}),v.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:O()}),v.jsx(zS,{channel:_||d,isOpen:!!d,onClose:D,onRemove:dt})]})}oE.createRoot(document.getElementById("root")).render(v.jsx(Tt.StrictMode,{children:v.jsx(GS,{})}));
